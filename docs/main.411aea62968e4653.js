(self.webpackChunkfront=self.webpackChunkfront||[]).push([[179],{3658:(yt,it,ae)=>{"use strict";function ye(i){return"function"==typeof i}function j(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const oe=j(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function re(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class ie{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(ye(n))try{n()}catch(s){t=s instanceof oe?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{q(s)}catch(a){t=t??[],a instanceof oe?t=[...t,...a.errors]:t.push(a)}}if(t)throw new oe(t)}}add(t){var e;if(t&&t!==this)if(this.closed)q(t);else{if(t instanceof ie){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&re(e,t)}remove(t){const{_finalizers:e}=this;e&&re(e,t),t instanceof ie&&t._removeParent(this)}}ie.EMPTY=(()=>{const i=new ie;return i.closed=!0,i})();const V=ie.EMPTY;function K(i){return i instanceof ie||i&&"closed"in i&&ye(i.remove)&&ye(i.add)&&ye(i.unsubscribe)}function q(i){ye(i)?i():i.unsubscribe()}const le={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Te={setTimeout(i,t,...e){const{delegate:n}=Te;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=Te;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function De(i){Te.setTimeout(()=>{const{onUnhandledError:t}=le;if(!t)throw i;t(i)})}function xe(){}const _e=Le("C",void 0,void 0);function Le(i,t,e){return{kind:i,value:t,error:e}}let Ve=null;function Ae(i){if(le.useDeprecatedSynchronousErrorHandling){const t=!Ve;if(t&&(Ve={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=Ve;if(Ve=null,e)throw n}}else i()}class L extends ie{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,K(t)&&t.add(this)):this.destination=Vt}static create(t,e,n){return new dt(t,e,n)}next(t){this.isStopped?ut(function Re(i){return Le("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ut(function Q(i){return Le("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ut(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ee=Function.prototype.bind;function Ce(i,t){return ee.call(i,t)}class ze{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){st(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){st(n)}else st(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){st(e)}}}class dt extends L{constructor(t,e,n){let r;if(super(),ye(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&le.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Ce(t.next,s),error:t.error&&Ce(t.error,s),complete:t.complete&&Ce(t.complete,s)}):r=t}this.destination=new ze(r)}}function st(i){le.useDeprecatedSynchronousErrorHandling?function Se(i){le.useDeprecatedSynchronousErrorHandling&&Ve&&(Ve.errorThrown=!0,Ve.error=i)}(i):De(i)}function ut(i,t){const{onStoppedNotification:e}=le;e&&Te.setTimeout(()=>e(i,t))}const Vt={closed:!0,next:xe,error:function bt(i){throw i},complete:xe},on="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ct(i){return i}function Qt(i){return 0===i.length?Ct:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let Ht=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function Sn(i){return i&&i instanceof L||function en(i){return i&&ye(i.next)&&ye(i.error)&&ye(i.complete)}(i)&&K(i)}(e)?e:new dt(e,n,r);return Ae(()=>{const{operator:a,source:u}=this;s.add(a?a.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Qn(n))((r,s)=>{const a=new dt({next:u=>{try{e(u)}catch(h){s(h),a.unsubscribe()}},error:s,complete:r});this.subscribe(a)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[on](){return this}pipe(...e){return Qt(e)(this)}toPromise(e){return new(e=Qn(e))((n,r)=>{let s;this.subscribe(a=>s=a,a=>r(a),()=>n(s))})}}return i.create=t=>new i(t),i})();function Qn(i){var t;return null!==(t=i??le.Promise)&&void 0!==t?t:Promise}const Pn=j(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let xt=(()=>{class i extends Ht{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new Jt(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new Pn}next(e){Ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){Ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){Ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?V:(this.currentObservers=null,s.push(e),new ie(()=>{this.currentObservers=null,re(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new Ht;return e.source=this,e}}return i.create=(t,e)=>new Jt(t,e),i})();class Jt extends xt{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:V}}function Gn(i){return ye(i?.lift)}function ri(i){return t=>{if(Gn(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function ni(i,t,e,n,r){return new St(i,t,e,n,r)}class St extends L{constructor(t,e,n,r,s,a){super(t),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=e?function(u){try{e(u)}catch(h){t.error(h)}}:super._next,this._error=r?function(u){try{r(u)}catch(h){t.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Oe(i,t){return ri((e,n)=>{let r=0;e.subscribe(ni(n,s=>{n.next(i.call(t,s,r++))}))})}function Hr(i){return this instanceof Hr?(this.v=i,this):new Hr(i)}function Ds(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(O){n[O]&&(r[O]=function(W){return new Promise(function(te,ue){s.push([O,W,te,ue])>1||u(O,W)})})}function u(O,W){try{!function h(O){O.value instanceof Hr?Promise.resolve(O.value.v).then(m,w):T(s[0][2],O)}(n[O](W))}catch(te){T(s[0][3],te)}}function m(O){u("next",O)}function w(O){u("throw",O)}function T(O,W){O(W),s.shift(),s.length&&u(s[0][0],s[0][1])}}function fr(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function Yn(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(a){return new Promise(function(u,h){!function r(s,a,u,h){Promise.resolve(h).then(function(m){s({value:m,done:u})},a)}(u,h,(a=i[s](a)).done,a.value)})}}}const N=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function z(i){return ye(i?.then)}function D(i){return ye(i[on])}function H(i){return Symbol.asyncIterator&&ye(i?.[Symbol.asyncIterator])}function Z(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const R=function $(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Y(i){return ye(i?.[R])}function he(i){return Ds(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield Hr(e.read());if(r)return yield Hr(void 0);yield yield Hr(n)}}finally{e.releaseLock()}})}function me(i){return ye(i?.getReader)}function ve(i){if(i instanceof Ht)return i;if(null!=i){if(D(i))return function ge(i){return new Ht(t=>{const e=i[on]();if(ye(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(N(i))return function pe(i){return new Ht(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(z(i))return function de(i){return new Ht(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,De)})}(i);if(H(i))return ke(i);if(Y(i))return function Ee(i){return new Ht(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(me(i))return function Xe(i){return ke(he(i))}(i)}throw Z(i)}function ke(i){return new Ht(t=>{(function je(i,t){var e,n,r,s;return function It(i,t,e,n){return new(e||(e=Promise))(function(s,a){function u(w){try{m(n.next(w))}catch(T){a(T)}}function h(w){try{m(n.throw(w))}catch(T){a(T)}}function m(w){w.done?s(w.value):function r(s){return s instanceof e?s:new e(function(a){a(s)})}(w.value).then(u,h)}m((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=fr(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(a){r={error:a}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function nt(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function gt(i,t,e=1/0){return ye(t)?gt((n,r)=>Oe((s,a)=>t(n,s,r,a))(ve(i(n,r))),e):("number"==typeof t&&(e=t),ri((n,r)=>function pt(i,t,e,n,r,s,a,u){const h=[];let m=0,w=0,T=!1;const O=()=>{T&&!h.length&&!m&&t.complete()},W=ue=>m<n?te(ue):h.push(ue),te=ue=>{s&&t.next(ue),m++;let ce=!1;ve(e(ue,w++)).subscribe(ni(t,Ne=>{r?.(Ne),s?W(Ne):t.next(Ne)},()=>{ce=!0},void 0,()=>{if(ce)try{for(m--;h.length&&m<n;){const Ne=h.shift();a?nt(t,a,()=>te(Ne)):te(Ne)}O()}catch(Ne){t.error(Ne)}}))};return i.subscribe(ni(t,W,()=>{T=!0,O()})),()=>{u?.()}}(n,r,i,e)))}function Wt(i=1/0){return gt(Ct,i)}const Lt=new Ht(i=>i.complete());function Pe(i){return i&&ye(i.schedule)}function We(i){return i[i.length-1]}function Ye(i){return ye(We(i))?i.pop():void 0}function we(i){return Pe(We(i))?i.pop():void 0}function ct(i,t=0){return ri((e,n)=>{e.subscribe(ni(n,r=>nt(n,i,()=>n.next(r),t),()=>nt(n,i,()=>n.complete(),t),r=>nt(n,i,()=>n.error(r),t)))})}function Dt(i,t=0){return ri((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function ii(i,t){if(!i)throw new Error("Iterable cannot be null");return new Ht(e=>{nt(e,t,()=>{const n=i[Symbol.asyncIterator]();nt(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Ei(i,t){return t?function yi(i,t){if(null!=i){if(D(i))return function wt(i,t){return ve(i).pipe(Dt(t),ct(t))}(i,t);if(N(i))return function On(i,t){return new Ht(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(z(i))return function nn(i,t){return ve(i).pipe(Dt(t),ct(t))}(i,t);if(H(i))return ii(i,t);if(Y(i))return function jn(i,t){return new Ht(e=>{let n;return nt(e,t,()=>{n=i[R](),nt(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(a){return void e.error(a)}s?e.complete():e.next(r)},0,!0)}),()=>ye(n?.return)&&n.return()})}(i,t);if(me(i))return function Ci(i,t){return ii(he(i),t)}(i,t)}throw Z(i)}(i,t):ve(i)}function or(i={}){const{connector:t=(()=>new xt),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let a,u,h,m=0,w=!1,T=!1;const O=()=>{u?.unsubscribe(),u=void 0},W=()=>{O(),a=h=void 0,w=T=!1},te=()=>{const ue=a;W(),ue?.unsubscribe()};return ri((ue,ce)=>{m++,!T&&!w&&O();const Ne=h=h??t();ce.add(()=>{m--,0===m&&!T&&!w&&(u=is(te,r))}),Ne.subscribe(ce),!a&&m>0&&(a=new dt({next:et=>Ne.next(et),error:et=>{T=!0,O(),u=is(W,e,et),Ne.error(et)},complete:()=>{w=!0,O(),u=is(W,n),Ne.complete()}}),ve(ue).subscribe(a))})(s)}}function is(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new dt({next:()=>{n.unsubscribe(),i()}});return t(...e).subscribe(n)}function _r(i){for(let t in i)if(i[t]===_r)return t;throw Error("Could not find renamed property on target object.")}function ws(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function wr(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(wr).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function rs(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const ss=_r({__forward_ref__:_r});function Xr(i){return i.__forward_ref__=Xr,i.toString=function(){return wr(this())},i}function Kr(i){return La(i)?i():i}function La(i){return"function"==typeof i&&i.hasOwnProperty(ss)&&i.__forward_ref__===Xr}class Qi extends Error{constructor(t,e){super(function Ea(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function As(i){return"string"==typeof i?i:null==i?"":String(i)}function An(i,t){throw new Qi(-201,!1)}function xl(i,t){null==i&&function $a(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function Zr(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ps(i){return{providers:i.providers||[],imports:i.imports||[]}}function Gu(i){return um(i,Mf)||um(i,vg)}function um(i,t){return i.hasOwnProperty(t)?i[t]:null}function ul(i){return i&&(i.hasOwnProperty(lp)||i.hasOwnProperty(_g))?i[lp]:null}const Mf=_r({\u0275prov:_r}),lp=_r({\u0275inj:_r}),vg=_r({ngInjectableDef:_r}),_g=_r({ngInjectorDef:_r});var ua=(()=>((ua=ua||{})[ua.Default=0]="Default",ua[ua.Host=1]="Host",ua[ua.Self=2]="Self",ua[ua.SkipSelf=4]="SkipSelf",ua[ua.Optional=8]="Optional",ua))();let cm;function Wu(i){const t=cm;return cm=i,t}function Lu(i,t,e){const n=Gu(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&ua.Optional?null:void 0!==t?t:void An(wr(i))}function nh(i){return{toString:i}.toString()}var vc=(()=>((vc=vc||{})[vc.OnPush=0]="OnPush",vc[vc.Default=1]="Default",vc))(),fl=(()=>{return(i=fl||(fl={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",fl;var i})();const ho=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),gh={},no=[],pl=_r({\u0275cmp:_r}),Kd=_r({\u0275dir:_r}),tl=_r({\u0275pipe:_r}),Ul=_r({\u0275mod:_r}),No=_r({\u0275fac:_r}),mh=_r({__NG_ELEMENT_ID__:_r});let Sd=0;function hs(i){return nh(()=>{const e=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===vc.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||no,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||fl.Emulated,id:"c"+Sd++,styles:i.styles||no,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,a=i.features;return r.inputs=nv(i.inputs,n),r.outputs=nv(i.outputs),a&&a.forEach(u=>u(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(zh).filter(Zd):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(qa).filter(Zd):null,r})}function zh(i){return $o(i)||Sl(i)}function Zd(i){return null!==i}function ks(i){return nh(()=>({type:i.type,bootstrap:i.bootstrap||no,declarations:i.declarations||no,imports:i.imports||no,exports:i.exports||no,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function nv(i,t){if(null==i)return gh;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}const Qs=hs;function kc(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function $o(i){return i[pl]||null}function Sl(i){return i[Kd]||null}function qa(i){return i[tl]||null}function _c(i,t){const e=i[Ul]||null;if(!e&&!0===t)throw new Error(`Type ${wr(i)} does not have '\u0275mod' property.`);return e}function $u(i){return Array.isArray(i)&&"object"==typeof i[1]}function Hh(i){return Array.isArray(i)&&!0===i[1]}function hm(i){return 0!=(8&i.flags)}function Pf(i){return 2==(2&i.flags)}function Lf(i){return 1==(1&i.flags)}function Gh(i){return null!==i.template}function ef(i){return 0!=(256&i[2])}function Rp(i,t){return i.hasOwnProperty(No)?i[No]:null}class iv{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Tl(){return up}function up(i){return i.type.prototype.ngOnChanges&&(i.setInput=Op),Y_}function Y_(){const i=rv(this),t=i?.current;if(t){const e=i.previous;if(e===gh)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function Op(i,t,e,n){const r=rv(i)||function dm(i,t){return i[Xv]=t}(i,{previous:gh,current:null}),s=r.current||(r.current={}),a=r.previous,u=this.declaredInputs[e],h=a[u];s[u]=new iv(h&&h.currentValue,t,a===gh),i[n]=t}Tl.ngInherit=!0;const Xv="__ngSimpleChanges__";function rv(i){return i[Xv]||null}function vl(i){for(;Array.isArray(i);)i=i[0];return i}function gm(i,t){return vl(t[i])}function dd(i,t){return vl(t[i.index])}function Sa(i,t){return i.data[t]}function xu(i,t){return i[t]}function Oc(i,t){const e=t[i];return $u(e)?e:e[0]}function Po(i){return 4==(4&i[2])}function qo(i){return 64==(64&i[2])}function io(i,t){return null==t?null:i[t]}function na(i){i[18]=0}function mm(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const da={lFrame:Bl(null),bindingsEnabled:!0};function Q_(){return da.bindingsEnabled}function br(){return da.lFrame.lView}function Na(){return da.lFrame.tView}function gn(i){return da.lFrame.contextLView=i,i[8]}function vn(i){return da.lFrame.contextLView=null,i}function ln(){let i=Xo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Xo(){return da.lFrame.currentTNode}function _l(i,t){const e=da.lFrame;e.currentTNode=i,e.isParent=t}function Ga(){return da.lFrame.isParent}function Sg(){da.lFrame.isParent=!1}function Yo(){const i=da.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function eu(){return da.lFrame.bindingIndex}function Md(){return da.lFrame.bindingIndex++}function Au(i){const t=da.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function Of(i,t){const e=da.lFrame;e.bindingIndex=e.bindingRootIndex=i,Wh(t)}function Wh(i){da.lFrame.currentDirectiveIndex=i}function Nc(){return da.lFrame.currentQueryIndex}function vm(i){da.lFrame.currentQueryIndex=i}function Ba(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function Kv(i,t,e){if(e&ua.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&ua.Host||(r=Ba(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,i=s}const n=da.lFrame=Bs();return n.currentTNode=t,n.lView=i,!0}function _m(i){const t=Bs(),e=i[1];da.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Bs(){const i=da.lFrame,t=null===i?null:i.child;return null===t?Bl(i):t}function Bl(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function Xu(){const i=da.lFrame;return da.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const yl=Xu;function tu(){const i=Xu();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function yc(){return da.lFrame.selectedIndex}function hp(i){da.lFrame.selectedIndex=i}function nu(){const i=da.lFrame;return Sa(i.tView,i.selectedIndex)}function fp(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:h,ngAfterViewChecked:m,ngOnDestroy:w}=s;a&&(i.contentHooks||(i.contentHooks=[])).push(-e,a),u&&((i.contentHooks||(i.contentHooks=[])).push(e,u),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,u)),h&&(i.viewHooks||(i.viewHooks=[])).push(-e,h),m&&((i.viewHooks||(i.viewHooks=[])).push(e,m),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,m)),null!=w&&(i.destroyHooks||(i.destroyHooks=[])).push(e,w)}}function Nf(i,t,e){pp(i,t,3,e)}function Cm(i,t,e,n){(3&i[2])===e&&pp(i,t,e,n)}function Dd(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function pp(i,t,e,n){const s=n??-1,a=t.length-1;let u=0;for(let h=void 0!==n?65535&i[18]:0;h<a;h++)if("number"==typeof t[h+1]){if(u=t[h],null!=n&&u>=n)break}else t[h]<0&&(i[18]+=65536),(u<s||-1==s)&&(gp(i,e,t,h),i[18]=(4294901760&i[18])+h+2),h++}function gp(i,t,e,n){const r=e[n]<0,s=e[n+1],u=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(u)}finally{}}}else try{s.call(u)}finally{}}class Eg{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Tg(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],a=e[n++],u=e[n++];i.setAttribute(t,a,u,s)}else{const s=r,a=e[++n];zf(s)?i.setProperty(t,s,a):i.setAttribute(t,s,a),n++}}return n}function gu(i){return 3===i||4===i||6===i}function zf(i){return 64===i.charCodeAt(0)}function Pd(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||Bc(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function Bc(i,t,e,n,r){let s=0,a=i.length;if(-1===t)a=-1;else for(;s<i.length;){const u=i[s++];if("number"==typeof u){if(u===t){a=-1;break}if(u>t){a=s-1;break}}}for(;s<i.length;){const u=i[s];if("number"==typeof u)break;if(u===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==a&&(i.splice(a,0,t),s=a+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function Ld(i){return-1!==i}function fd(i){return 32767&i}function _h(i,t){let e=function jh(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let bl=!0;function rf(i){const t=bl;return bl=i,t}let yh=0;const Lo={};function Ja(i,t){const e=Vp(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,zp(n.data,i),zp(t,null),zp(n.blueprint,null));const r=Vc(i,t),s=i.injectorIndex;if(Ld(r)){const a=fd(r),u=_h(r,t),h=u[1].data;for(let m=0;m<8;m++)t[s+m]=u[a+m]|h[a+m]}return t[s+8]=r,s}function zp(i,t){i.push(0,0,0,0,0,0,0,0,t)}function Vp(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function Vc(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=uu(r),null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function Up(i,t,e){!function zc(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(mh)&&(n=e[mh]),null==n&&(n=e[mh]=yh++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function pd(i,t,e){if(e&ua.Optional)return i;An()}function Vf(i,t,e,n){if(e&ua.Optional&&void 0===n&&(n=null),0==(e&(ua.Self|ua.Host))){const r=i[9],s=Wu(void 0);try{return r?r.get(t,n,e&ua.Optional):Lu(t,n,e&ua.Optional)}finally{Wu(s)}}return pd(n,0,e)}function Uf(i,t,e,n=ua.Default,r){if(null!==i){if(1024&t[2]){const a=function Rd(i,t,e,n,r){let s=i,a=t;for(;null!==s&&null!==a&&1024&a[2]&&!(256&a[2]);){const u=ic(s,a,e,n|ua.Self,Lo);if(u!==Lo)return u;let h=s.parent;if(!h){const m=a[21];if(m){const w=m.get(e,Lo,n);if(w!==Lo)return w}h=uu(a),a=a[15]}s=h}return r}(i,t,e,n,Lo);if(a!==Lo)return a}const s=ic(i,t,e,n,Lo);if(s!==Lo)return s}return Vf(t,e,n,r)}function ic(i,t,e,n,r){const s=function sf(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(mh)?i[mh]:void 0;return"number"==typeof t?t>=0?255&t:Mg:t}(e);if("function"==typeof s){if(!Kv(t,i,n))return n&ua.Host?pd(r,0,n):Vf(t,e,n,r);try{const a=s(n);if(null!=a||n&ua.Optional)return a;An()}finally{yl()}}else if("number"==typeof s){let a=null,u=Vp(i,t),h=-1,m=n&ua.Host?t[16][6]:null;for((-1===u||n&ua.SkipSelf)&&(h=-1===u?Vc(i,t):t[u+8],-1!==h&&Hp(n,!1)?(a=t[1],u=fd(h),t=_h(h,t)):u=-1);-1!==u;){const w=t[1];if(Hf(s,u,w.data)){const T=vu(u,t,e,a,n,m);if(T!==Lo)return T}h=t[u+8],-1!==h&&Hp(n,t[1].data[u+8]===m)&&Hf(s,u,t)?(a=w,u=fd(h),t=_h(h,t)):u=-1}}return r}function vu(i,t,e,n,r,s){const a=t[1],u=a.data[i+8],w=kd(u,a,e,null==n?Pf(u)&&bl:n!=a&&0!=(3&u.type),r&ua.Host&&s===u);return null!==w?ah(t,a,w,u):Lo}function kd(i,t,e,n,r){const s=i.providerIndexes,a=t.data,u=1048575&s,h=i.directiveStart,w=s>>20,O=r?u+w:i.directiveEnd;for(let W=n?u:u+w;W<O;W++){const te=a[W];if(W<h&&e===te||W>=h&&te.type===e)return W}if(r){const W=a[h];if(W&&Gh(W)&&W.type===e)return h}return null}function ah(i,t,e,n){let r=i[e];const s=t.data;if(function J_(i){return i instanceof Eg}(r)){const a=r;a.resolving&&function Be(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new Qi(-200,`Circular dependency in DI detected for ${i}${e}`)}(function B(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():As(i)}(s[e]));const u=rf(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Wu(a.injectImpl):null;Kv(i,n,ua.Default);try{r=i[e]=a.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function av(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const a=up(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,a)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==h&&Wu(h),rf(u),a.resolving=!1,yl()}}return r}function Hf(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function Hp(i,t){return!(i&ua.Self||i&ua.Host&&t)}class gd{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return Uf(this._tNode,this._lView,t,n,e)}}function Mg(){return new gd(ln(),br())}function nl(i){return nh(()=>{const t=i.prototype.constructor,e=t[No]||Gf(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[No]||Gf(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Gf(i){return La(i)?()=>{const t=Gf(Kr(i));return t&&t()}:Rp(i)}function uu(i){const t=i[1],e=t.type;return 2===e?t.declTNode:1===e?i[6]:null}function af(i){return function xm(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(gu(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(ln(),i)}const Od="__parameters__";function Cl(i,t,e){return nh(()=>{const n=function lf(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const a=new r(...s);return u.annotation=a,u;function u(h,m,w){const T=h.hasOwnProperty(Od)?h[Od]:Object.defineProperty(h,Od,{value:[]})[Od];for(;T.length<=w;)T.push(null);return(T[w]=T[w]||[]).push(a),h}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class ls{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Zr({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function iu(i,t){void 0===t&&(t=i);for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)?(t===i&&(t=i.slice(0,e)),iu(n,t)):t!==i&&t.push(n)}return t}function bh(i,t){i.forEach(e=>Array.isArray(e)?bh(e,t):t(e))}function Xh(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Yh(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Ou(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function Fu(i,t,e){let n=Vo(i,t);return n>=0?i[1|n]=e:(n=~n,function Gp(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function Cc(i,t){const e=Vo(i,t);if(e>=0)return i[1|e]}function Vo(i,t){return function ac(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),a=i[s<<e];if(t===a)return s<<e;a>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const wh={},_p="__NG_DI_FLAG__",yp="ngTempTokenPath",xc=/\n/gm,Bd="__source";let jf;function Kh(i){const t=jf;return jf=i,t}function uf(i,t=ua.Default){if(void 0===jf)throw new Qi(-203,!1);return null===jf?Lu(i,void 0,t):jf.get(i,t&ua.Optional?null:void 0,t)}function ji(i,t=ua.Default){return(function yg(){return cm}()||uf)(Kr(i),t)}function Ml(i,t=ua.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),ji(i,t)}function $f(i){const t=[];for(let e=0;e<i.length;e++){const n=Kr(i[e]);if(Array.isArray(n)){if(0===n.length)throw new Qi(900,!1);let r,s=ua.Default;for(let a=0;a<n.length;a++){const u=n[a],h=hv(u);"number"==typeof h?-1===h?r=u.token:s|=h:r=u}t.push(ji(r,s))}else t.push(ji(n))}return t}function xh(i,t){return i[_p]=t,i.prototype[_p]=t,i}function hv(i){return i[_p]}const Zh=xh(Cl("Inject",i=>({token:i})),-1),Bu=xh(Cl("Optional"),8),vd=xh(Cl("SkipSelf"),4);let yd,Uc,Jh;function Ac(i){return function ql(){if(void 0===Uc&&(Uc=null,ho.trustedTypes))try{Uc=ho.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Uc}()?.createHTML(i)||i}function df(i){return function wp(){if(void 0===Jh&&(Jh=null,ho.trustedTypes))try{Jh=ho.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Jh}()?.createHTML(i)||i}class uh{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ff extends uh{getTypeName(){return"HTML"}}class Kp extends uh{getTypeName(){return"Style"}}class mv extends uh{getTypeName(){return"Script"}}class Qy extends uh{getTypeName(){return"URL"}}class Pm extends uh{getTypeName(){return"ResourceURL"}}function Eu(i){return i instanceof uh?i.changingThisBreaksApplicationSecurity:i}function wl(i,t){const e=function xp(i){return i instanceof uh&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}class Bg{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Ac(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class ed{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Ac(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Ac(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const a=e.item(r).name;("xmlns:ns1"===a||0===a.indexOf("ns1:"))&&t.removeAttribute(a)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const zg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ug(i){return(i=String(i)).match(zg)||i.match(Vg)?i:"unsafe:"+i}function Hc(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Ap(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const vv=Hc("area,br,col,hr,img,wbr"),ty=Hc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ny=Hc("rp,rt"),_u=Ap(vv,Ap(ty,Hc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ap(ny,Hc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ap(ny,ty)),_v=Hc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ip=Hc("srcset"),iy=Ap(_v,Ip,Hc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ry=Hc("script,style,template");class Jy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!_u.hasOwnProperty(e))return this.sanitizedSomething=!0,!ry.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),a=s.name,u=a.toLowerCase();if(!iy.hasOwnProperty(u)){this.sanitizedSomething=!0;continue}let h=s.value;_v[u]&&(h=Ug(h)),Ip[u]&&(i=h,h=(i=String(i)).split(",").map(t=>Ug(t.trim())).join(", ")),this.buf.push(" ",a,'="',sy(h),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();_u.hasOwnProperty(e)&&!vv.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(sy(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const e0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t0=/([^\#-~ |!])/g;function sy(i){return i.replace(/&/g,"&amp;").replace(e0,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(t0,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yv;function r_(i,t){let e=null;try{yv=yv||function gf(i){const t=new ed(i);return function Ud(){try{return!!(new window.DOMParser).parseFromString(Ac(""),"text/html")}catch{return!1}}()?new Bg(t):t}(i);let n=t?String(t):"";e=yv.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=yv.getInertBodyElement(n)}while(n!==s);return Ac((new Jy).sanitizeChildren(Ih(e)||e))}finally{if(e){const n=Ih(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Ih(i){return"content"in i&&function n0(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Dl=(()=>((Dl=Dl||{})[Dl.NONE=0]="NONE",Dl[Dl.HTML=1]="HTML",Dl[Dl.STYLE=2]="STYLE",Dl[Dl.SCRIPT=3]="SCRIPT",Dl[Dl.URL=4]="URL",Dl[Dl.RESOURCE_URL=5]="RESOURCE_URL",Dl))();function zl(i){const t=Rm();return t?df(t.sanitize(Dl.HTML,i)||""):wl(i,"HTML")?df(Eu(i)):r_(function pv(){return void 0!==yd?yd:typeof document<"u"?document:void 0}(),As(i))}function Hd(i){const t=Rm();return t?t.sanitize(Dl.URL,i)||"":wl(i,"URL")?Eu(i):Ug(As(i))}function Rm(){const i=br();return i&&i[12]}const o_=new ls("ENVIRONMENT_INITIALIZER"),ly=new ls("INJECTOR",-1),uy=new ls("INJECTOR_DEF_TYPES");class o{get(t,e=wh){if(e===wh){const n=new Error(`NullInjectorError: No provider for ${wr(t)}!`);throw n.name="NullInjectorError",n}return e}}function f(...i){return{\u0275providers:v(0,i)}}function v(i,...t){const e=[],n=new Set;let r;return bh(t,s=>{const a=s;P(a,e,[],n)&&(r||(r=[]),r.push(a))}),void 0!==r&&x(r,e),e}function x(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];bh(r,s=>{t.push(s)})}}function P(i,t,e,n){if(!(i=Kr(i)))return!1;let r=null,s=ul(i);const a=!s&&$o(i);if(s||a){if(a&&!a.standalone)return!1;r=i}else{const h=i.ngModule;if(s=ul(h),!s)return!1;r=h}const u=n.has(r);if(a){if(u)return!1;if(n.add(r),a.dependencies){const h="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const m of h)P(m,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!u){let m;n.add(r);try{bh(s.imports,w=>{P(w,t,e,n)&&(m||(m=[]),m.push(w))})}finally{}void 0!==m&&x(m,t)}if(!u){const m=Rp(r)||(()=>new r);t.push({provide:r,useFactory:m,deps:no},{provide:uy,useValue:r,multi:!0},{provide:o_,useValue:()=>ji(r),multi:!0})}const h=s.providers;null==h||u||bh(h,w=>{t.push(w)})}}return r!==i&&void 0!==i.providers}const J=_r({provide:String,useValue:_r});function se(i){return null!==i&&"object"==typeof i&&J in i}function qe(i){return"function"==typeof i}const ft=new ls("Set Injector scope."),mt={},vt={};let Kt;function Yt(){return void 0===Kt&&(Kt=new o),Kt}class jt{}class cn extends jt{constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dr(t,a=>this.processProvider(a)),this.records.set(ly,Jn(void 0,this)),r.has("environment")&&this.records.set(jt,Jn(void 0,this));const s=this.records.get(ft);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(uy.multi,no,ua.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Kh(this),n=Wu(void 0);try{return t()}finally{Kh(e),Wu(n)}}get(t,e=wh,n=ua.Default){this.assertNotDestroyed();const r=Kh(this),s=Wu(void 0);try{if(!(n&ua.SkipSelf)){let u=this.records.get(t);if(void 0===u){const h=function Li(i){return"function"==typeof i||"object"==typeof i&&i instanceof ls}(t)&&Gu(t);u=h&&this.injectableDefInScope(h)?Jn(fn(t),mt):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(n&ua.Self?Yt():this.parent).get(t,e=n&ua.Optional&&e===wh?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[yp]=a[yp]||[]).unshift(wr(t)),r)throw a;return function Sm(i,t,e,n){const r=i[yp];throw t[Bd]&&r.unshift(t[Bd]),i.message=function jp(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=wr(t);if(Array.isArray(t))r=t.map(wr).join(" -> ");else if("object"==typeof t){let s=[];for(let a in t)if(t.hasOwnProperty(a)){let u=t[a];s.push(a+":"+("string"==typeof u?JSON.stringify(u):wr(u)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(xc,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[yp]=null,i}(a,t,"R3InjectorError",this.source)}throw a}finally{Wu(s),Kh(r)}}resolveInjectorInitializers(){const t=Kh(this),e=Wu(void 0);try{const n=this.get(o_.multi,no,ua.Self);for(const r of n)r()}finally{Kh(t),Wu(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(wr(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Qi(205,!1)}processProvider(t){let e=qe(t=Kr(t))?t:Kr(t&&t.provide);const n=function Ln(i){return se(i)?Jn(void 0,i.useValue):Jn(oi(i),mt)}(t);if(qe(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Jn(void 0,mt,!0),r.factory=()=>$f(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===mt&&(e.value=vt,e.value=e.factory()),"object"==typeof e.value&&e.value&&function ci(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Kr(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function fn(i){const t=Gu(i),e=null!==t?t.factory:Rp(i);if(null!==e)return e;if(i instanceof ls)throw new Qi(204,!1);if(i instanceof Function)return function Hn(i){const t=i.length;if(t>0)throw Ou(t,"?"),new Qi(204,!1);const e=function Qm(i){const t=i&&(i[Mf]||i[vg]);if(t){const e=function Al(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new Qi(204,!1)}function oi(i,t,e){let n;if(qe(i)){const r=Kr(i);return Rp(r)||fn(r)}if(se(i))n=()=>Kr(i.useValue);else if(function Me(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...$f(i.deps||[]));else if(function Fe(i){return!(!i||!i.useExisting)}(i))n=()=>ji(Kr(i.useExisting));else{const r=Kr(i&&(i.useClass||i.provide));if(!function Xn(i){return!!i.deps}(i))return Rp(r)||fn(r);n=()=>new r(...$f(i.deps))}return n}function Jn(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function Tr(i){return!!i.\u0275providers}function dr(i,t){for(const e of i)Array.isArray(e)?dr(e,t):Tr(e)?dr(e.\u0275providers,t):t(e)}class Un{}class xr{resolveComponentFactory(t){throw function Gi(i){const t=Error(`No component factory found for ${wr(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let gr=(()=>{class i{}return i.NULL=new xr,i})();function fs(){return Wr(ln(),br())}function Wr(i,t){return new $i(dd(i,t))}let $i=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=fs,i})();function Ui(i){return i instanceof $i?i.nativeElement:i}class c{}let p=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function b(){const i=br(),e=Oc(ln().index,i);return($u(e)?e:i)[11]}(),i})(),A=(()=>{class i{}return i.\u0275prov=Zr({token:i,providedIn:"root",factory:()=>null}),i})();class E{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const M=new E("14.1.3"),U={};function Rn(i){return i.ngOriginalError}class Xt{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Rn(t);for(;e&&Rn(e);)e=Rn(e);return e||null}}const xi=new Map;let Ki=0;const ps="__ngContext__";function Xs(i,t){$u(t)?(i[ps]=t[20],function Ar(i){xi.set(i[20],i)}(t)):i[ps]=t}function sa(i){const t=i[ps];return"number"==typeof t?function mr(i){return xi.get(i)||null}(t):t||null}function Cs(i){const t=sa(i);return t?$u(t)?t:t.lView:null}const Cn=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(ho))();function qi(i){return i.ownerDocument.defaultView}function ti(i){return i instanceof Function?i():i}var Ur=(()=>((Ur=Ur||{})[Ur.Important=1]="Important",Ur[Ur.DashCase=2]="DashCase",Ur))();function as(i,t){return undefined(i,t)}function rl(i){const t=i[3];return Hh(t)?t[3]:t}function Os(i){return Ju(i[13])}function ru(i){return Ju(i[4])}function Ju(i){for(;null!==i&&!Hh(i);)i=i[4];return i}function Gc(i,t,e,n,r){if(null!=n){let s,a=!1;Hh(n)?s=n:$u(n)&&(a=!0,n=n[0]);const u=vl(n);0===i&&null!==e?null==r?u0(t,e,u):Gg(t,e,u,r||null,!0):1===i&&null!==e?Gg(t,e,u,r||null,!0):2===i?function W1(i,t,e){const n=u_(i,t);n&&function Qf(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,u,a):3===i&&t.destroyNode(u),null!=s&&function vT(i,t,e,n,r){const s=e[7];s!==vl(e)&&Gc(t,i,n,s,r);for(let u=10;u<e.length;u++){const h=e[u];Sh(h[1],h,i,t,n,s)}}(t,i,s,e,r)}}function lc(i,t,e){return i.createElement(t,e)}function a0(i,t){const e=i[9],n=e.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,mm(r,-1)),e.splice(n,1)}function o0(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&a0(r,n),t>0&&(i[e-1][4]=n[4]);const s=Yh(i,10+t);!function jc(i,t){Sh(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const a=s[19];null!==a&&a.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function hl(i,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&Sh(i,t,e,3,null,null),function uo(i){let t=i[13];if(!t)return l0(i[1],i);for(;t;){let e=null;if($u(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)$u(t)&&l0(t[1],t),t=t[3];null===t&&(t=i),$u(t)&&l0(t[1],t),e=t&&t[4]}t=e}}(t)}}function l0(i,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function Hg(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Eg)){const s=e[n+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const u=r[s[a]],h=s[a+1];try{h.call(u)}finally{}}else try{s.call(r)}finally{}}}}(i,t),function Tb(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const a=e[s+1],u="function"==typeof a?a(t):vl(t[a]),h=n[r=e[s+2]],m=e[s+3];"boolean"==typeof m?u.removeEventListener(e[s],h,m):m>=0?n[r=m]():n[r=-m].unsubscribe(),s+=2}else{const a=n[r=e[s+1]];e[s].call(a)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[7]=null}}(i,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Hh(t[3])){e!==t[3]&&a0(e,t);const n=t[19];null!==n&&n.detachView(i)}!function pr(i){xi.delete(i[20])}(t)}}function cy(i,t,e){return function l_(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===fl.None||r===fl.Emulated)return null}return dd(n,e)}(i,t.parent,e)}function Gg(i,t,e,n,r){i.insertBefore(t,e,n,r)}function u0(i,t,e){i.appendChild(t,e)}function Mb(i,t,e,n,r){null!==n?Gg(i,t,e,n,r):u0(i,t,e)}function u_(i,t){return i.parentNode(t)}function vf(i,t,e){return H1(i,t,e)}let H1=function Pb(i,t,e){return 40&i.type?dd(i,e):null};function kb(i,t,e,n){const r=cy(i,n,t),s=t[11],u=vf(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let h=0;h<e.length;h++)Mb(s,r,e[h],u,!1);else Mb(s,r,e,u,!1)}function hy(i,t){if(null!==t){const e=t.type;if(3&e)return dd(t,i);if(4&e)return gw(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return hy(i,n);{const r=i[t.index];return Hh(r)?gw(-1,r):vl(r)}}if(32&e)return as(t,i)()||vl(i[t.index]);{const n=G1(i,t);return null!==n?Array.isArray(n)?n[0]:hy(rl(i[16]),n):hy(i,t.next)}}return null}function G1(i,t){return null!==t?i[16][6].projection[t.projection]:null}function gw(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return hy(n,r)}return t[7]}function qc(i,t,e,n,r,s,a){for(;null!=e;){const u=n[e.index],h=e.type;if(a&&0===t&&(u&&Xs(vl(u),n),e.flags|=4),64!=(64&e.flags))if(8&h)qc(i,t,e.child,n,r,s,!1),Gc(t,i,r,u,s);else if(32&h){const m=as(e,n);let w;for(;w=m();)Gc(t,i,r,w,s);Gc(t,i,r,u,s)}else 16&h?j1(i,t,n,e,r,s):Gc(t,i,r,u,s);e=a?e.projectionNext:e.next}}function Sh(i,t,e,n,r,s){qc(e,n,i.firstChild,t,r,s,!1)}function j1(i,t,e,n,r,s){const a=e[16],h=a[6].projection[n.projection];if(Array.isArray(h))for(let m=0;m<h.length;m++)Gc(t,i,r,h[m],s);else qc(i,t,h,a[3],r,s,!0)}function q1(i,t,e){i.setAttribute(t,"style",e)}function mw(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function X1(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const Y1="ng-template";function yT(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==X1(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function K1(i){return 4===i.type&&i.value!==Y1}function Z1(i,t,e){return t===(4!==i.type||e?i.value:Y1)}function Q1(i,t,e){let n=4;const r=i.attrs||[],s=function dy(i){for(let t=0;t<i.length;t++)if(gu(i[t]))return t;return i.length}(r);let a=!1;for(let u=0;u<t.length;u++){const h=t[u];if("number"!=typeof h){if(!a)if(4&n){if(n=2|1&n,""!==h&&!Z1(i,h,e)||""===h&&1===t.length){if(eg(n))return!1;a=!0}}else{const m=8&n?h:t[++u];if(8&n&&null!==i.attrs){if(!yT(i.attrs,m,e)){if(eg(n))return!1;a=!0}continue}const T=bT(8&n?"class":h,r,K1(i),e);if(-1===T){if(eg(n))return!1;a=!0;continue}if(""!==m){let O;O=T>s?"":r[T+1].toLowerCase();const W=8&n?O:null;if(W&&-1!==X1(W,m,0)||2&n&&m!==O){if(eg(n))return!1;a=!0}}}}else{if(!a&&!eg(n)&&!eg(h))return!1;if(a&&eg(h))continue;a=!1,n=h|1&n}}return eg(n)||a}function eg(i){return 0==(1&i)}function bT(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const a=t[r];if(a===i)return r;if(3===a||6===a)s=!0;else{if(1===a||2===a){let u=t[++r];for(;"string"==typeof u;)u=t[++r];continue}if(4===a)break;if(0===a){r+=4;continue}}r+=s?1:2}return-1}return function wT(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function J1(i,t,e=!1){for(let n=0;n<t.length;n++)if(Q1(i,t[n],e))return!0;return!1}function xT(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function eA(i,t){return i?":not("+t.trim()+")":t}function AT(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let a=i[e];if("string"==typeof a)if(2&n){const u=i[++e];r+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else 8&n?r+="."+a:4&n&&(r+=" "+a);else""!==r&&!eg(a)&&(t+=eA(s,r),r=""),n=a,s=s||!eg(n);e++}return""!==r&&(t+=eA(s,r)),t}const ro={};function tt(i){nA(Na(),br(),yc()+i,!1)}function nA(i,t,e,n){if(!n)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&Nf(t,s,e)}else{const s=i.preOrderHooks;null!==s&&Cm(t,s,0,e)}hp(e)}function aA(i,t=null,e=null,n){const r=oA(i,t,e,n);return r.resolveInjectorInitializers(),r}function oA(i,t=null,e=null,n,r=new Set){const s=[e||no,f(i)];return n=n||("object"==typeof i?void 0:wr(i)),new cn(s,t||Yt(),n||null,r)}let Eh=(()=>{class i{static create(e,n){if(Array.isArray(e))return aA({name:""},n,e,"");{const r=e.name??"";return aA({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=wh,i.NULL=new o,i.\u0275prov=Zr({token:i,providedIn:"any",factory:()=>ji(ly)}),i.__NG_ELEMENT_ID__=-1,i})();function Tn(i,t=ua.Default){const e=br();return null===e?ji(i,t):Uf(ln(),e,Kr(i),t)}function Aw(){throw new Error("invalid")}function c0(i,t){return i<<17|t<<2}function tg(i){return i>>17&32767}function h0(i){return 2|i}function ng(i){return(131068&i)>>2}function Iw(i,t){return-131069&i|t<<2}function Sw(i){return 1|i}function gR(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];if(-1!==s){const a=i.data[s];vm(r),a.contentQueries(2,t[s],s)}}}function CA(i,t,e,n,r,s,a,u,h,m,w){const T=t.blueprint.slice();return T[0]=r,T[2]=76|n,(null!==w||i&&1024&i[2])&&(T[2]|=1024),na(T),T[3]=T[15]=i,T[8]=e,T[10]=a||i&&i[10],T[11]=u||i&&i[11],T[12]=h||i&&i[12]||null,T[9]=m||i&&i[9]||null,T[6]=s,T[20]=function hr(){return Ki++}(),T[21]=w,T[16]=2==t.type?i[16]:T,T}function Bb(i,t,e,n,r){let s=i.data[t];if(null===s)s=function $T(i,t,e,n,r){const s=Xo(),a=Ga(),h=i.data[t]=function u9(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=h),null!==s&&(a?null==s.child&&null!==h.parent&&(s.child=h):null===s.next&&(s.next=h)),h}(i,t,e,n,r),function Rf(){return da.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const a=function zo(){const i=da.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return _l(s,!0),s}function zb(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function wA(i,t,e){_m(t);try{const n=i.viewQuery;null!==n&&tM(1,n,e);const r=i.template;null!==r&&mR(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&gR(i,t),i.staticViewQueries&&tM(2,i.viewQuery,e);const s=i.components;null!==s&&function s9(i,t){for(let e=0;e<t.length;e++)I9(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,tu()}}function Dw(i,t,e,n){const r=t[2];if(128!=(128&r)){_m(t);try{na(t),function bs(i){return da.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&mR(i,t,e,2,n);const a=3==(3&r);if(a){const m=i.preOrderCheckHooks;null!==m&&Nf(t,m,null)}else{const m=i.preOrderHooks;null!==m&&Cm(t,m,0,null),Dd(t,0)}if(function x9(i){for(let t=Os(i);null!==t;t=ru(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n],s=r[3];0==(512&r[2])&&mm(s,1),r[2]|=512}}}(t),function w9(i){for(let t=Os(i);null!==t;t=ru(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];qo(n)&&Dw(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&gR(i,t),a){const m=i.contentCheckHooks;null!==m&&Nf(t,m)}else{const m=i.contentHooks;null!==m&&Cm(t,m,1),Dd(t,1)}!function bA(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)hp(~r);else{const s=r,a=e[++n],u=e[++n];Of(a,s),u(2,t[s])}}}finally{hp(-1)}}(i,t);const u=i.components;null!==u&&function r9(i,t){for(let e=0;e<t.length;e++)A9(i,t[e])}(t,u);const h=i.viewQuery;if(null!==h&&tM(2,h,n),a){const m=i.viewCheckHooks;null!==m&&Nf(t,m)}else{const m=i.viewHooks;null!==m&&Cm(t,m,2),Dd(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,mm(t[3],-1))}finally{tu()}}}function a9(i,t,e,n){const r=t[10],a=Po(t);try{!a&&r.begin&&r.begin(),a&&wA(i,t,n),Dw(i,t,e,n)}finally{!a&&r.end&&r.end()}}function mR(i,t,e,n,r){const s=yc(),a=2&n;try{hp(-1),a&&t.length>22&&nA(i,t,22,!1),e(n,r)}finally{hp(s)}}function vR(i,t,e){if(hm(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const a=i.data[s];a.contentQueries&&a.contentQueries(1,e[s],s)}}}function qT(i,t,e){!Q_()||(function p9(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;i.firstCreatePass||Ja(e,t),Xs(n,t);const a=e.initialInputs;for(let u=r;u<s;u++){const h=i.data[u],m=Gh(h);m&&y9(t,e,h);const w=ah(t,i,u,e);Xs(w,t),null!==a&&b9(0,u-r,w,h,0,a),m&&(Oc(e.index,t)[8]=w)}}(i,t,e,dd(e,t)),128==(128&e.flags)&&function g9(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,a=function cp(){return da.lFrame.currentDirectiveIndex}();try{hp(s);for(let u=n;u<r;u++){const h=i.data[u],m=t[u];Wh(u),(null!==h.hostBindings||0!==h.hostVars||null!==h.hostAttrs)&&AR(h,m)}}finally{hp(-1),Wh(a)}}(i,t,e))}function XT(i,t,e=dd){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const a=n[s+1],u=-1===a?e(t,i):i[a];i[r++]=u}}}function _R(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=YT(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function YT(i,t,e,n,r,s,a,u,h,m){const w=22+n,T=w+r,O=function o9(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:ro);return e}(w,T),W="function"==typeof m?m():m;return O[1]={type:i,blueprint:O,template:e,queries:null,viewQuery:u,declTNode:t,data:O.slice().fill(null,w),bindingStartIndex:w,expandoStartIndex:T,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:h,consts:W,incompleteFirstPass:!1}}function yR(i,t,e,n){const r=PR(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&LR(i).push(n,r.length-1))}function bR(i,t,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}return e}function CR(i,t){const n=t.directiveEnd,r=i.data,s=t.attrs,a=[];let u=null,h=null;for(let m=t.directiveStart;m<n;m++){const w=r[m],T=w.inputs,O=null===s||K1(t)?null:C9(T,s);a.push(O),u=bR(T,m,u),h=bR(w.outputs,m,h)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=16),u.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=u,t.outputs=h}function sg(i,t,e,n,r,s,a,u){const h=dd(t,e);let w,m=t.inputs;!u&&null!=m&&(w=m[n])?(nM(i,e,w,n,r),Pf(t)&&wR(e,t.index)):3&t.type&&(n=function c9(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=a?a(r,t.value||"",n):r,s.setProperty(h,n,r))}function wR(i,t){const e=Oc(t,i);16&e[2]||(e[2]|=32)}function KT(i,t,e,n){let r=!1;if(Q_()){const s=function m9(i,t,e){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const a=n[s];J1(e,a.selectors,!1)&&(r||(r=[]),Up(Ja(e,t),i,a.type),Gh(a)?(IR(i,e),r.unshift(a)):r.push(a))}return r}(i,t,e),a=null===n?null:{"":-1};if(null!==s){r=!0,SR(e,i.data.length,s.length);for(let w=0;w<s.length;w++){const T=s[w];T.providersResolver&&T.providersResolver(T)}let u=!1,h=!1,m=zb(i,t,s.length,null);for(let w=0;w<s.length;w++){const T=s[w];e.mergedAttrs=Pd(e.mergedAttrs,T.hostAttrs),ER(i,e,t,m,T),_9(m,T,a),null!==T.contentQueries&&(e.flags|=8),(null!==T.hostBindings||null!==T.hostAttrs||0!==T.hostVars)&&(e.flags|=128);const O=T.type.prototype;!u&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),u=!0),!h&&(O.ngOnChanges||O.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),h=!0),m++}CR(i,e)}a&&function v9(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new Qi(-301,!1);n.push(t[r],s)}}}(e,n,a)}return e.mergedAttrs=Pd(e.mergedAttrs,e.attrs),r}function xR(i,t,e,n,r,s){const a=s.hostBindings;if(a){let u=i.hostBindingOpCodes;null===u&&(u=i.hostBindingOpCodes=[]);const h=~t.index;(function f9(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(u)!=h&&u.push(h),u.push(n,r,a)}}function AR(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function IR(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function _9(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Gh(t)&&(e[""]=i)}}function SR(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function ER(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=Rp(r.type)),a=new Eg(s,Gh(r),Tn);i.blueprint[n]=a,e[n]=a,xR(i,t,0,n,zb(i,e,r.hostVars,ro),r)}function y9(i,t,e){const n=dd(t,i),r=_R(e),s=i[10],a=xA(i,CA(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=a}function wv(i,t,e,n,r,s){const a=dd(i,t);!function ZT(i,t,e,n,r,s,a){if(null==s)i.removeAttribute(t,r,e);else{const u=null==a?As(s):a(s,n||"",r);i.setAttribute(t,r,u,e)}}(t[11],a,s,i.value,e,n,r)}function b9(i,t,e,n,r,s){const a=s[t];if(null!==a){const u=n.setInput;for(let h=0;h<a.length;){const m=a[h++],w=a[h++],T=a[h++];null!==u?n.setInput(e,T,m,w):e[w]=T}}}function C9(i,t){let e=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,i[r],t[n+1])),n+=2}else n+=2;else n+=4}return e}function TR(i,t,e,n){return new Array(i,!0,!1,t,null,0,n,e,null,null)}function A9(i,t){const e=Oc(t,i);if(qo(e)){const n=e[1];48&e[2]?Dw(n,e,n.template,e[8]):e[5]>0&&QT(e)}}function QT(i){for(let n=Os(i);null!==n;n=ru(n))for(let r=10;r<n.length;r++){const s=n[r];if(qo(s))if(512&s[2]){const a=s[1];Dw(a,s,a.template,s[8])}else s[5]>0&&QT(s)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Oc(e[n],i);qo(r)&&r[5]>0&&QT(r)}}function I9(i,t){const e=Oc(t,i),n=e[1];(function S9(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),wA(n,e,e[8])}function xA(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function JT(i){for(;i;){i[2]|=32;const t=rl(i);if(ef(i)&&!t)return i;i=t}return null}function DR(i){!function MR(i){for(let t=0;t<i.components.length;t++){const e=i.components[t],n=Cs(e);if(null!==n){const r=n[1];a9(r,n,r.template,e)}}}(i[8])}function tM(i,t,e){vm(0),t(i,e)}const T9=(()=>Promise.resolve(null))();function PR(i){return i[7]||(i[7]=[])}function LR(i){return i.cleanup||(i.cleanup=[])}function RR(i,t){const e=i[9],n=e?e.get(Xt,null):null;n&&n.handleError(t)}function nM(i,t,e,n,r){for(let s=0;s<e.length;){const a=e[s++],u=e[s++],h=t[a],m=i.data[a];null!==m.setInput?m.setInput(h,r,n,u):h[u]=r}}function h_(i,t,e){const n=gm(t,i);!function Sp(i,t,e){i.setValue(t,e)}(i[11],n,e)}function AA(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let a=0;a<t.length;a++){const u=t[a];"number"==typeof u?s=u:1==s?r=rs(r,u):2==s&&(n=rs(n,u+": "+t[++a]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function IA(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(vl(s)),Hh(s))for(let u=10;u<s.length;u++){const h=s[u],m=h[1].firstChild;null!==m&&IA(h[1],h,m,n)}const a=e.type;if(8&a)IA(i,t,e.child,n);else if(32&a){const u=as(e,t);let h;for(;h=u();)n.push(h)}else if(16&a){const u=G1(t,e);if(Array.isArray(u))n.push(...u);else{const h=rl(t[16]);IA(h[1],h,u,n,!0)}}e=r?e.projectionNext:e.next}return n}class Pw{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return IA(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Hh(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(o0(t,n),Yh(e,n))}this._attachedToViewContainer=!1}hl(this._lView[1],this._lView)}onDestroy(t){yR(this._lView[1],this._lView,null,t)}markForCheck(){JT(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function eM(i,t,e){const n=t[10];n.begin&&n.begin();try{Dw(i,t,i.template,e)}catch(r){throw RR(t,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Qi(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $c(i,t){Sh(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Qi(902,!1);this._appRef=t}}class M9 extends Pw{constructor(t){super(t),this._view=t}detectChanges(){DR(this._view)}checkNoChanges(){}get context(){return null}}class iM extends gr{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=$o(t);return new Lw(e,this.ngModule)}}function OR(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class P9{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){const r=this.injector.get(t,U,n);return r!==U||e===U?r:this.parentInjector.get(t,e,n)}}class Lw extends Un{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function IT(i){return i.map(AT).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return OR(this.componentDef.inputs)}get outputs(){return OR(this.componentDef.outputs)}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof jt?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new P9(t,s):t,u=a.get(c,null);if(null===u)throw new Qi(407,!1);const h=a.get(A,null),m=u.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",T=n?function l9(i,t,e){return i.selectRootElement(t,e===fl.ShadowDom)}(m,n,this.componentDef.encapsulation):lc(u.createRenderer(null,this.componentDef),w,function D9(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(w)),O=this.componentDef.onPush?288:272,W=function F9(i,t){return{components:[],scheduler:i||Cn,clean:T9,playerHandler:t||null,flags:0}}(),te=YT(0,null,null,1,0,null,null,null,null,null),ue=CA(null,te,W,O,null,null,u,m,h,a,null);let ce,Ne;_m(ue);try{const et=function R9(i,t,e,n,r,s){const a=e[1];e[22]=i;const h=Bb(a,22,2,"#host",null),m=h.mergedAttrs=t.hostAttrs;null!==m&&(AA(h,m,!0),null!==i&&(Tg(r,i,m),null!==h.classes&&mw(r,i,h.classes),null!==h.styles&&q1(r,i,h.styles)));const w=n.createRenderer(i,t),T=CA(e,_R(t),null,t.onPush?32:16,e[22],h,n,w,s||null,null,null);return a.firstCreatePass&&(Up(Ja(h,e),a,t.type),IR(a,h),SR(h,e.length,1)),xA(e,T),e[22]=T}(T,this.componentDef,ue,u,m);if(T)if(n)Tg(m,T,["ng-version",M.full]);else{const{attrs:Je,classes:at}=function tA(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!eg(r))break;r=s}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);Je&&Tg(m,T,Je),at&&at.length>0&&mw(m,T,at.join(" "))}if(Ne=Sa(te,22),void 0!==e){const Je=Ne.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const kt=e[at];Je.push(null!=kt?Array.from(kt):null)}}ce=function O9(i,t,e,n,r){const s=e[1],a=function d9(i,t,e){const n=ln();i.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),ER(i,n,t,zb(i,t,1,null),e),CR(i,n));const r=ah(t,i,n.directiveStart,n);Xs(r,t);const s=dd(n,t);return s&&Xs(s,t),r}(s,e,t);if(n.components.push(a),i[8]=a,null!==r)for(const h of r)h(a,t);if(t.contentQueries){const h=ln();t.contentQueries(1,a,h.directiveStart)}const u=ln();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(hp(u.index),xR(e[1],u,0,u.directiveStart,u.directiveEnd,t),AR(t,a)),a}(et,this.componentDef,ue,W,[N9]),wA(te,ue,null)}finally{tu()}return new k9(this.componentType,ce,Wr(Ne,ue),ue,Ne)}}class k9 extends class zn{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new M9(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;nM(s[1],s,r,t,e),wR(s,this._tNode.index)}}get injector(){return new gd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function N9(){const i=ln();fp(br()[1],i)}function cu(i){let t=function FR(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(Gh(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Qi(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const a=i;a.inputs=rM(i.inputs),a.declaredInputs=rM(i.declaredInputs),a.outputs=rM(i.outputs);const u=r.hostBindings;u&&U9(i,u);const h=r.viewQuery,m=r.contentQueries;if(h&&z9(i,h),m&&V9(i,m),ws(i.inputs,r.inputs),ws(i.declaredInputs,r.declaredInputs),ws(i.outputs,r.outputs),Gh(r)&&r.data.animation){const w=i.data;w.animation=(w.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let a=0;a<s.length;a++){const u=s[a];u&&u.ngInherit&&u(i),u===cu&&(e=!1)}}t=Object.getPrototypeOf(t)}!function B9(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Pd(r.hostAttrs,e=Pd(e,r.hostAttrs))}}(n)}function rM(i){return i===gh?{}:i===no?[]:i}function z9(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function V9(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function U9(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let SA=null;function d0(){if(!SA){const i=ho.Symbol;if(i&&i.iterator)SA=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(SA=n)}}}return SA}function kw(i){return!!sM(i)&&(Array.isArray(i)||!(i instanceof Map)&&d0()in i)}function sM(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function xv(i,t,e){return i[t]=e}function Rw(i,t){return i[t]}function yf(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function f0(i,t,e,n){const r=yf(i,t,e);return yf(i,t+1,n)||r}function EA(i,t,e,n,r){const s=f0(i,t,e,n);return yf(i,t+2,r)||s}function Wg(i,t,e,n,r,s){const a=f0(i,t,e,n);return f0(i,t+2,r,s)||a}function xs(i,t,e,n){const r=br();return yf(r,Md(),t)&&(Na(),wv(nu(),r,i,t,e,n)),xs}function Ub(i,t,e,n){return yf(i,Md(),e)?t+As(e)+n:ro}function At(i,t,e,n,r,s,a,u){const h=br(),m=Na(),w=i+22,T=m.firstCreatePass?function K9(i,t,e,n,r,s,a,u,h){const m=t.consts,w=Bb(t,i,4,a||null,io(m,u));KT(t,e,w,io(m,h)),fp(t,w);const T=w.tViews=YT(2,w,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,m);return null!==t.queries&&(t.queries.template(t,w),T.queries=t.queries.embeddedTView(w)),w}(w,m,h,t,e,n,r,s,a):m.data[w];_l(T,!1);const O=h[11].createComment("");kb(m,h,O,T),Xs(O,h),xA(h,h[w]=TR(O,h,O,T)),Lf(T)&&qT(m,h,T),null!=a&&XT(h,T,u)}function _o(i){return xu(function Es(){return da.lFrame.contextLView}(),22+i)}function He(i,t,e){const n=br();return yf(n,Md(),t)&&sg(Na(),nu(),n,i,t,n[11],e,!1),He}function aM(i,t,e,n,r){const a=r?"class":"style";nM(i,e,t.inputs[a],a,n)}function Pt(i,t,e,n){const r=br(),s=Na(),a=22+i,u=r[11],h=r[a]=lc(u,t,function dp(){return da.lFrame.currentNamespace}()),m=s.firstCreatePass?function Q9(i,t,e,n,r,s,a){const u=t.consts,m=Bb(t,i,2,r,io(u,s));return KT(t,e,m,io(u,a)),null!==m.attrs&&AA(m,m.attrs,!1),null!==m.mergedAttrs&&AA(m,m.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,m),m}(a,s,r,0,t,e,n):s.data[a];_l(m,!0);const w=m.mergedAttrs;null!==w&&Tg(u,h,w);const T=m.classes;null!==T&&mw(u,h,T);const O=m.styles;return null!==O&&q1(u,h,O),64!=(64&m.flags)&&kb(s,r,h,m),0===function tf(){return da.lFrame.elementDepthCount}()&&Xs(h,r),function Ig(){da.lFrame.elementDepthCount++}(),Lf(m)&&(qT(s,r,m),vR(s,m,r)),null!==n&&XT(r,m),Pt}function Nt(){let i=ln();Ga()?Sg():(i=i.parent,_l(i,!1));const t=i;!function Ky(){da.lFrame.elementDepthCount--}();const e=Na();return e.firstCreatePass&&(fp(e,i),hm(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function Jv(i){return 0!=(16&i.flags)}(t)&&aM(e,t,br(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Zy(i){return 0!=(32&i.flags)}(t)&&aM(e,t,br(),t.stylesWithoutHost,!1),Nt}function Ri(i,t,e,n){return Pt(i,t,e,n),Nt(),Ri}function js(i,t,e){const n=br(),r=Na(),s=i+22,a=r.firstCreatePass?function J9(i,t,e,n,r){const s=t.consts,a=io(s,n),u=Bb(t,i,8,"ng-container",a);return null!==a&&AA(u,a,!0),KT(t,e,u,io(s,r)),null!==t.queries&&t.queries.elementStart(t,u),u}(s,r,n,t,e):r.data[s];_l(a,!0);const u=n[s]=n[11].createComment("");return kb(r,n,u,a),Xs(u,n),Lf(a)&&(qT(r,n,a),vR(r,a,n)),null!=e&&XT(n,a),js}function $s(){let i=ln();const t=Na();return Ga()?Sg():(i=i.parent,_l(i,!1)),t.firstCreatePass&&(fp(t,i),hm(i)&&t.queries.elementEnd(i)),$s}function Nr(i,t,e){return js(i,t,e),$s(),Nr}function vr(){return br()}function Ow(i){return!!i&&"function"==typeof i.then}const oM=function $R(i){return!!i&&"function"==typeof i.subscribe};function si(i,t,e,n){const r=br(),s=Na(),a=ln();return function XR(i,t,e,n,r,s,a,u){const h=Lf(n),w=i.firstCreatePass&&LR(i),T=t[8],O=PR(t);let W=!0;if(3&n.type||u){const ce=dd(n,t),Ne=u?u(ce):ce,et=O.length,Je=u?kt=>u(vl(kt[n.index])):n.index;let at=null;if(!u&&h&&(at=function e7(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const a=r[s];if(a===e&&r[s+1]===n){const u=t[7],h=r[s+2];return u.length>h?u[h]:null}"string"==typeof a&&(s+=2)}return null}(i,t,r,n.index)),null!==at)(at.__ngLastListenerFn__||at).__ngNextListenerFn__=s,at.__ngLastListenerFn__=s,W=!1;else{s=KR(n,t,T,s,!1);const kt=e.listen(Ne,r,s);O.push(s,kt),w&&w.push(r,Je,et,et+1)}}else s=KR(n,t,T,s,!1);const te=n.outputs;let ue;if(W&&null!==te&&(ue=te[r])){const ce=ue.length;if(ce)for(let Ne=0;Ne<ce;Ne+=2){const Zt=t[ue[Ne]][ue[Ne+1]].subscribe(s),yn=O.length;O.push(s,Zt),w&&w.push(r,n.index,yn,-(yn+1))}}}(s,r,r[11],a,i,t,0,n),si}function YR(i,t,e,n){try{return!1!==e(n)}catch(r){return RR(i,r),!1}}function KR(i,t,e,n,r){return function s(a){if(a===Function)return n;JT(2&i.flags?Oc(i.index,t):t);let h=YR(t,0,n,a),m=s.__ngNextListenerFn__;for(;m;)h=YR(t,0,m,a)&&h,m=m.__ngNextListenerFn__;return r&&!1===h&&(a.preventDefault(),a.returnValue=!1),h}}function Ze(i=1){return function ku(i){return(da.lFrame.contextLView=function Ff(i,t){for(;i>0;)t=t[15],i--;return t}(i,da.lFrame.contextLView))[8]}(i)}function t7(i,t){let e=null;const n=function CT(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?J1(i,s,!0):xT(n,s))return r}else e=r}return e}function Ep(i){const t=br()[16][6];if(!t.projection){const n=t.projection=Ou(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const a=i?t7(s,i):0;null!==a&&(r[a]?r[a].projectionNext=s:n[a]=s,r[a]=s),s=s.next}}}function ch(i,t=0,e){const n=br(),r=Na(),s=Bb(r,22+i,16,null,e||null);null===s.projection&&(s.projection=t),Sg(),64!=(64&s.flags)&&function mT(i,t,e){j1(t[11],0,t,e,cy(i,e,t),vf(e.parent||t[6],e,t))}(r,n,s)}function p0(i,t,e){return Fw(i,"",t,"",e),p0}function Fw(i,t,e,n,r){const s=br(),a=Ub(s,t,e,n);return a!==ro&&sg(Na(),nu(),s,i,a,s[11],r,!1),Fw}function sO(i,t,e,n,r){const s=i[e+1],a=null===t;let u=n?tg(s):ng(s),h=!1;for(;0!==u&&(!1===h||a);){const w=i[u+1];s7(i[u],t)&&(h=!0,i[u+1]=n?Sw(w):h0(w)),u=n?tg(w):ng(w)}h&&(i[e+1]=n?h0(s):Sw(s))}function s7(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Vo(i,t)>=0}const td={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function aO(i){return i.substring(td.key,td.keyEnd)}function a7(i){return i.substring(td.value,td.valueEnd)}function oO(i,t){const e=td.textEnd;return e===t?-1:(t=td.keyEnd=function u7(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,td.key=t,e),Yb(i,t,e))}function lO(i,t){const e=td.textEnd;let n=td.key=Yb(i,t,e);return e===n?-1:(n=td.keyEnd=function c7(i,t,e){let n;for(;t<e&&(45===(n=i.charCodeAt(t))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)t++;return t}(i,n,e),n=cO(i,n,e),n=td.value=Yb(i,n,e),n=td.valueEnd=function h7(i,t,e){let n=-1,r=-1,s=-1,a=t,u=a;for(;a<e;){const h=i.charCodeAt(a++);if(59===h)return u;34===h||39===h?u=a=hO(i,h,a,e):t===a-4&&85===s&&82===r&&76===n&&40===h?u=a=hO(i,41,a,e):h>32&&(u=a),s=r,r=n,n=-33&h}return u}(i,n,e),cO(i,n,e))}function uO(i){td.key=0,td.keyEnd=0,td.value=0,td.valueEnd=0,td.textEnd=i.length}function Yb(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function cO(i,t,e,n){return(t=Yb(i,t,e))<e&&t++,t}function hO(i,t,e,n){let r=-1,s=e;for(;s<n;){const a=i.charCodeAt(s++);if(a==t&&92!==r)return s;r=92==a&&92===r?0:a}throw new Error}function bf(i,t,e){return Om(i,t,e,!1),bf}function ag(i,t){return Om(i,t,null,!0),ag}function co(i){Fm(pO,d7,i,!1)}function d7(i,t){for(let e=function l7(i){return uO(i),lO(i,Yb(i,0,td.textEnd))}(t);e>=0;e=lO(t,e))pO(i,aO(t),a7(t))}function Us(i){Fm(Fu,Av,i,!0)}function Av(i,t){for(let e=function o7(i){return uO(i),oO(i,Yb(i,0,td.textEnd))}(t);e>=0;e=oO(t,e))Fu(i,aO(t),!0)}function Om(i,t,e,n){const r=br(),s=Na(),a=Au(2);s.firstUpdatePass&&fO(s,i,a,n),t!==ro&&yf(r,a,t)&&gO(s,s.data[yc()],r,r[11],i,r[a+1]=function y7(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=wr(Eu(i)))),i}(t,e),n,a)}function Fm(i,t,e,n){const r=Na(),s=Au(2);r.firstUpdatePass&&fO(r,null,s,n);const a=br();if(e!==ro&&yf(a,s,e)){const u=r.data[yc()];if(vO(u,n)&&!dO(r,s)){let h=n?u.classesWithoutHost:u.stylesWithoutHost;null!==h&&(e=rs(h,e||"")),aM(r,u,a,e,n)}else!function _7(i,t,e,n,r,s,a,u){r===ro&&(r=no);let h=0,m=0,w=0<r.length?r[0]:null,T=0<s.length?s[0]:null;for(;null!==w||null!==T;){const O=h<r.length?r[h+1]:void 0,W=m<s.length?s[m+1]:void 0;let ue,te=null;w===T?(h+=2,m+=2,O!==W&&(te=T,ue=W)):null===T||null!==w&&w<T?(h+=2,te=w):(m+=2,te=T,ue=W),null!==te&&gO(i,t,e,n,te,ue,a,u),w=h<r.length?r[h]:null,T=m<s.length?s[m]:null}}(r,u,a,a[11],a[s+1],a[s+1]=function v7(i,t,e){if(null==e||""===e)return no;const n=[],r=Eu(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}function dO(i,t){return t>=i.expandoStartIndex}function fO(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[yc()],a=dO(i,e);vO(s,n)&&null===t&&!a&&(t=!1),t=function f7(i,t,e,n){const r=function ga(i){const t=da.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=Nw(e=lM(null,i,t,e,n),t.attrs,n),s=null);else{const a=t.directiveStylingLast;if(-1===a||i[a]!==r)if(e=lM(r,i,t,e,n),null===s){let h=function p7(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==ng(n))return i[tg(n)]}(i,t,n);void 0!==h&&Array.isArray(h)&&(h=lM(null,i,t,h[1],n),h=Nw(h,t.attrs,n),function g7(i,t,e,n){i[tg(e?t.classBindings:t.styleBindings)]=n}(i,t,n,h))}else s=function m7(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=Nw(n,i[s].hostAttrs,e);return Nw(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function n7(i,t,e,n,r,s){let a=s?t.classBindings:t.styleBindings,u=tg(a),h=ng(a);i[n]=e;let w,m=!1;if(Array.isArray(e)){const T=e;w=T[1],(null===w||Vo(T,w)>0)&&(m=!0)}else w=e;if(r)if(0!==h){const O=tg(i[u+1]);i[n+1]=c0(O,u),0!==O&&(i[O+1]=Iw(i[O+1],n)),i[u+1]=function VT(i,t){return 131071&i|t<<17}(i[u+1],n)}else i[n+1]=c0(u,0),0!==u&&(i[u+1]=Iw(i[u+1],n)),u=n;else i[n+1]=c0(h,0),0===u?u=n:i[h+1]=Iw(i[h+1],n),h=n;m&&(i[n+1]=h0(i[n+1])),sO(i,w,n,!0),sO(i,w,n,!1),function r7(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Vo(s,t)>=0&&(e[n+1]=Sw(e[n+1]))}(t,w,i,n,s),a=c0(u,h),s?t.classBindings=a:t.styleBindings=a}(r,s,t,e,a,n)}}function lM(i,t,e,n,r){let s=null;const a=e.directiveEnd;let u=e.directiveStylingLast;for(-1===u?u=e.directiveStart:u++;u<a&&(s=t[u],n=Nw(n,s.hostAttrs,r),s!==i);)u++;return null!==i&&(e.directiveStylingLast=u),n}function Nw(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?r=a:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Fu(i,a,!!e||t[++s]))}return void 0===i?null:i}function pO(i,t,e){Fu(i,t,Eu(e))}function gO(i,t,e,n,r,s,a,u){if(!(3&t.type))return;const h=i.data,m=h[u+1];TA(function mA(i){return 1==(1&i)}(m)?mO(h,t,e,r,ng(m),a):void 0)||(TA(s)||function gA(i){return 2==(2&i)}(m)&&(s=mO(h,null,e,r,u,a)),function $1(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:Ur.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ur.Important),i.setStyle(e,n,r,s))}}(n,a,gm(yc(),e),r,s))}function mO(i,t,e,n,r,s){const a=null===t;let u;for(;r>0;){const h=i[r],m=Array.isArray(h),w=m?h[1]:h,T=null===w;let O=e[r+1];O===ro&&(O=T?no:void 0);let W=T?Cc(O,n):w===n?O:void 0;if(m&&!TA(W)&&(W=Cc(h,n)),TA(W)&&(u=W,a))return u;const te=i[r+1];r=a?tg(te):ng(te)}if(null!==t){let h=s?t.residualClasses:t.residualStyles;null!=h&&(u=Cc(h,n))}return u}function TA(i){return void 0!==i}function vO(i,t){return 0!=(i.flags&(t?16:32))}function ur(i,t=""){const e=br(),n=Na(),r=i+22,s=n.firstCreatePass?Bb(n,r,1,t,null):n.data[r],a=e[r]=function Qp(i,t){return i.createText(t)}(e[11],t);kb(n,e,a,s),_l(s,!1)}function ca(i){return cc("",i,""),ca}function cc(i,t,e){const n=br(),r=Ub(n,i,t,e);return r!==ro&&h_(n,yc(),r),cc}function Bw(i,t,e,n,r){const s=br(),a=function Hb(i,t,e,n,r,s){const u=f0(i,eu(),e,r);return Au(2),u?t+As(e)+n+As(r)+s:ro}(s,i,t,e,n,r);return a!==ro&&h_(s,yc(),a),Bw}function uM(i,t,e,n,r,s,a){const u=br(),h=function Gb(i,t,e,n,r,s,a,u){const m=EA(i,eu(),e,r,a);return Au(3),m?t+As(e)+n+As(r)+s+As(a)+u:ro}(u,i,t,e,n,r,s,a);return h!==ro&&h_(u,yc(),h),uM}const g0=void 0;var z7=["en",[["a","p"],["AM","PM"],g0],[["AM","PM"],g0,g0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],g0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],g0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",g0,"{1} 'at' {0}",g0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function B7(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Kb={};function Jf(i){const t=function V7(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=FO(t);if(e)return e;const n=t.split("-")[0];if(e=FO(n),e)return e;if("en"===n)return z7;throw new Qi(701,!1)}function FO(i){return i in Kb||(Kb[i]=ho.ng&&ho.ng.common&&ho.ng.common.locales&&ho.ng.common.locales[i]),Kb[i]}var qs=(()=>((qs=qs||{})[qs.LocaleId=0]="LocaleId",qs[qs.DayPeriodsFormat=1]="DayPeriodsFormat",qs[qs.DayPeriodsStandalone=2]="DayPeriodsStandalone",qs[qs.DaysFormat=3]="DaysFormat",qs[qs.DaysStandalone=4]="DaysStandalone",qs[qs.MonthsFormat=5]="MonthsFormat",qs[qs.MonthsStandalone=6]="MonthsStandalone",qs[qs.Eras=7]="Eras",qs[qs.FirstDayOfWeek=8]="FirstDayOfWeek",qs[qs.WeekendRange=9]="WeekendRange",qs[qs.DateFormat=10]="DateFormat",qs[qs.TimeFormat=11]="TimeFormat",qs[qs.DateTimeFormat=12]="DateTimeFormat",qs[qs.NumberSymbols=13]="NumberSymbols",qs[qs.NumberFormats=14]="NumberFormats",qs[qs.CurrencyCode=15]="CurrencyCode",qs[qs.CurrencySymbol=16]="CurrencySymbol",qs[qs.CurrencyName=17]="CurrencyName",qs[qs.Currencies=18]="Currencies",qs[qs.Directionality=19]="Directionality",qs[qs.PluralCase=20]="PluralCase",qs[qs.ExtraData=21]="ExtraData",qs))();const Zb="en-US";let NO=Zb;function dM(i,t,e,n,r){if(i=Kr(i),Array.isArray(i))for(let s=0;s<i.length;s++)dM(i[s],t,e,n,r);else{const s=Na(),a=br();let u=qe(i)?i:Kr(i.provide),h=oi(i);const m=ln(),w=1048575&m.providerIndexes,T=m.directiveStart,O=m.providerIndexes>>20;if(qe(i)||!i.multi){const W=new Eg(h,r,Tn),te=pM(u,t,r?w:w+O,T);-1===te?(Up(Ja(m,a),s,u),fM(s,i,t.length),t.push(u),m.directiveStart++,m.directiveEnd++,r&&(m.providerIndexes+=1048576),e.push(W),a.push(W)):(e[te]=W,a[te]=W)}else{const W=pM(u,t,w+O,T),te=pM(u,t,w,w+O),ue=W>=0&&e[W],ce=te>=0&&e[te];if(r&&!ce||!r&&!ue){Up(Ja(m,a),s,u);const Ne=function NW(i,t,e,n,r){const s=new Eg(i,e,Tn);return s.multi=[],s.index=t,s.componentProviders=0,u3(s,r,n&&!e),s}(r?FW:OW,e.length,r,n,h);!r&&ce&&(e[te].providerFactory=Ne),fM(s,i,t.length,0),t.push(u),m.directiveStart++,m.directiveEnd++,r&&(m.providerIndexes+=1048576),e.push(Ne),a.push(Ne)}else fM(s,i,W>-1?W:te,u3(e[r?te:W],h,!r&&n));!r&&n&&ce&&e[te].componentProviders++}}}function fM(i,t,e,n){const r=qe(t),s=function Qe(i){return!!i.useClass}(t);if(r||s){const h=(s?Kr(t.useClass):t).prototype.ngOnDestroy;if(h){const m=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const w=m.indexOf(e);-1===w?m.push(e,[n,h]):m[w+1].push(n,h)}else m.push(e,h)}}}function u3(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function pM(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function OW(i,t,e,n){return gM(this.multi,[])}function FW(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,u=ah(e,e[1],this.providerFactory.index,n);s=u.slice(0,a),gM(r,s);for(let h=a;h<u.length;h++)s.push(u[h])}else s=[],gM(r,s);return s}function gM(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function Ro(i,t=[]){return e=>{e.providersResolver=(n,r)=>function RW(i,t,e){const n=Na();if(n.firstCreatePass){const r=Gh(i);dM(e,n.data,n.blueprint,r,!0),dM(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class m0{}class c3{}class h3 extends m0{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new iM(this);const n=_c(t);this._bootstrapComponents=ti(n.bootstrap),this._r3Injector=oA(t,e,[{provide:m0,useValue:this},{provide:gr,useValue:this.componentFactoryResolver}],wr(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class mM extends c3{constructor(t){super(),this.moduleType=t}create(t){return new h3(this.moduleType,t)}}class zW extends m0{constructor(t,e,n){super(),this.componentFactoryResolver=new iM(this),this.instance=null;const r=new cn([...t,{provide:m0,useValue:this},{provide:gr,useValue:this.componentFactoryResolver}],e||Yt(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function kA(i,t,e=null){return new zW(i,t,e).injector}function mo(i,t,e){const n=Yo()+i,r=br();return r[n]===ro?xv(r,n,e?t.call(e):t()):Rw(r,n)}function yr(i,t,e,n){return y3(br(),Yo(),i,t,e,n)}function fa(i,t,e,n,r){return function b3(i,t,e,n,r,s,a){const u=t+e;return f0(i,u,r,s)?xv(i,u+2,a?n.call(a,r,s):n(r,s)):Gw(i,u+2)}(br(),Yo(),i,t,e,n,r)}function Th(i,t,e,n,r,s){return function C3(i,t,e,n,r,s,a,u){const h=t+e;return EA(i,h,r,s,a)?xv(i,h+3,u?n.call(u,r,s,a):n(r,s,a)):Gw(i,h+3)}(br(),Yo(),i,t,e,n,r,s)}function ep(i,t,e,n,r,s,a){return function w3(i,t,e,n,r,s,a,u,h){const m=t+e;return Wg(i,m,r,s,a,u)?xv(i,m+4,h?n.call(h,r,s,a,u):n(r,s,a,u)):Gw(i,m+4)}(br(),Yo(),i,t,e,n,r,s,a)}function v0(i,t,e,n,r,s,a,u){const h=Yo()+i,m=br(),w=Wg(m,h,e,n,r,s);return yf(m,h+4,a)||w?xv(m,h+5,u?t.call(u,e,n,r,s,a):t(e,n,r,s,a)):Rw(m,h+5)}function Jb(i,t,e,n,r,s,a,u,h){const m=Yo()+i,w=br(),T=Wg(w,m,e,n,r,s);return f0(w,m+4,a,u)||T?xv(w,m+6,h?t.call(h,e,n,r,s,a,u):t(e,n,r,s,a,u)):Rw(w,m+6)}function _M(i,t,e,n){return function x3(i,t,e,n,r,s){let a=t+e,u=!1;for(let h=0;h<r.length;h++)yf(i,a++,r[h])&&(u=!0);return u?xv(i,a,n.apply(s,r)):Gw(i,a)}(br(),Yo(),i,t,e,n)}function Gw(i,t){const e=i[t];return e===ro?void 0:e}function y3(i,t,e,n,r,s){const a=t+e;return yf(i,a,r)?xv(i,a+1,s?n.call(s,r):n(r)):Gw(i,a+1)}function yM(i){return t=>{setTimeout(i,void 0,t)}}const ki=class nj extends xt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),a=n;if(t&&"object"==typeof t){const h=t;r=h.next?.bind(h),s=h.error?.bind(h),a=h.complete?.bind(h)}this.__isAsync&&(s=yM(s),r&&(r=yM(r)),a&&(a=yM(a)));const u=super.subscribe({next:r,error:s,complete:a});return t instanceof ie&&t.add(u),u}};function ij(){return this._results[d0()]()}class bM{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=d0(),n=bM.prototype;n[e]||(n[e]=ij)}get changes(){return this._changes||(this._changes=new ki)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=iu(t);(this._changesDetected=!function Wf(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Nm=(()=>{class i{}return i.__NG_ELEMENT_ID__=aj,i})();const rj=Nm,sj=class extends rj{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tViews,r=CA(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(r[19]=a.createEmbeddedView(n)),wA(n,r,t),new Pw(r)}};function aj(){return RA(ln(),br())}function RA(i,t){return 4&i.type?new sj(t,i,Wr(i,t)):null}let jg=(()=>{class i{}return i.__NG_ELEMENT_ID__=oj,i})();function oj(){return T3(ln(),br())}const lj=jg,S3=class extends lj{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Wr(this._hostTNode,this._hostLView)}get injector(){return new gd(this._hostTNode,this._hostLView)}get parentInjector(){const t=Vc(this._hostTNode,this._hostLView);if(Ld(t)){const e=_h(t,this._hostLView),n=fd(t);return new gd(e[1].data[n+8],e)}return new gd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=E3(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const a=t.createEmbeddedView(e||{},s);return this.insert(a,r),a}createComponent(t,e,n,r,s){const a=t&&!function Ru(i){return"function"==typeof i}(t);let u;if(a)u=e;else{const T=e||{};u=T.index,n=T.injector,r=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const h=a?t:new Lw($o(t)),m=n||this.parentInjector;if(!s&&null==h.ngModule){const O=(a?m:this.parentInjector).get(jt,null);O&&(s=O)}const w=h.create(m,r,void 0,s);return this.insert(w.hostView,u),w}insert(t,e){const n=t._lView,r=n[1];if(function Gs(i){return Hh(i[3])}(n)){const w=this.indexOf(t);if(-1!==w)this.detach(w);else{const T=n[3],O=new S3(T,T[6],T[3]);O.detach(O.indexOf(t))}}const s=this._adjustIndex(e),a=this._lContainer;!function Eb(i,t,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=t),n<s-10?(t[4]=e[r],Xh(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const a=t[17];null!==a&&e!==a&&function mf(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(a,t);const u=t[19];null!==u&&u.insertView(i),t[2]|=64}(r,n,a,s);const u=gw(s,a),h=n[11],m=u_(h,a[7]);return null!==m&&function Jp(i,t,e,n,r,s){n[0]=r,n[6]=t,Sh(i,n,e,1,r,s)}(r,a[6],h,n,m,u),t.attachToViewContainerRef(),Xh(CM(a),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=E3(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=o0(this._lContainer,e);n&&(Yh(CM(this._lContainer),e),hl(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=o0(this._lContainer,e);return n&&null!=Yh(CM(this._lContainer),e)?new Pw(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function E3(i){return i[8]}function CM(i){return i[8]||(i[8]=[])}function T3(i,t){let e;const n=t[i.index];if(Hh(n))e=n;else{let r;if(8&i.type)r=vl(n);else{const s=t[11];r=s.createComment("");const a=dd(i,t);Gg(s,u_(s,a),r,function c_(i,t){return i.nextSibling(t)}(s,a),!1)}t[i.index]=e=TR(n,t,r,i),xA(t,e)}return new S3(e,i,t)}class wM{constructor(t){this.queryList=t,this.matches=null}clone(){return new wM(this.queryList)}setDirty(){this.queryList.setDirty()}}class xM{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const a=e.getByIndex(s);r.push(this.queries[a.indexInDeclarationView].clone())}return new xM(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==k3(t,e).matches&&this.queries[e].setDirty()}}class M3{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class AM{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new AM(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class IM{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new IM(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,hj(e,s)),this.matchTNodeWithReadOption(t,e,kd(e,t,s,!1,!1))}else n===Nm?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,kd(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===$i||r===jg||r===Nm&&4&e.type)this.addMatch(e.index,-2);else{const s=kd(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function hj(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function fj(i,t,e,n){return-1===e?function dj(i,t){return 11&i.type?Wr(i,t):4&i.type?RA(i,t):null}(t,i):-2===e?function pj(i,t,e){return e===$i?Wr(t,i):e===Nm?RA(t,i):e===jg?T3(t,i):void 0}(i,t,n):ah(i,i[1],e,t)}function D3(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const s=i.data,a=e.matches,u=[];for(let h=0;h<a.length;h+=2){const m=a[h];u.push(m<0?null:fj(t,s[m],a[h+1],e.metadata.read))}r.matches=u}return r.matches}function SM(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const a=D3(i,t,r,e);for(let u=0;u<s.length;u+=2){const h=s[u];if(h>0)n.push(a[u/2]);else{const m=s[u+1],w=t[-h];for(let T=10;T<w.length;T++){const O=w[T];O[17]===O[3]&&SM(O[1],O,m,n)}if(null!==w[9]){const T=w[9];for(let O=0;O<T.length;O++){const W=T[O];SM(W[1],W,m,n)}}}}}return n}function jr(i){const t=br(),e=Na(),n=Nc();vm(n+1);const r=k3(e,n);if(i.dirty&&Po(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?SM(e,t,n,[]):D3(e,t,r,n);i.reset(s,Ui),i.notifyOnChanges()}return!0}return!1}function Rs(i,t,e){const n=Na();n.firstCreatePass&&(L3(n,new M3(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),P3(n,br(),t)}function Yl(i,t,e,n){const r=Na();if(r.firstCreatePass){const s=ln();L3(r,new M3(t,e,n),s.index),function mj(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}P3(r,br(),e)}function $r(){return function gj(i,t){return i[19].queries[t].queryList}(br(),Nc())}function P3(i,t,e){const n=new bM(4==(4&e));yR(i,t,n,n.destroy),null===t[19]&&(t[19]=new xM),t[19].queries.push(new wM(n))}function L3(i,t,e){null===i.queries&&(i.queries=new AM),i.queries.track(new IM(t,e))}function k3(i,t){return i.queries.getByIndex(t)}function hc(i,t){return RA(i,t)}function FA(...i){}const $w=new ls("Application Initializer");let NA=(()=>{class i{constructor(e){this.appInits=e,this.resolve=FA,this.reject=FA,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Ow(s))e.push(s);else if(oM(s)){const a=new Promise((u,h)=>{s.subscribe({complete:u,error:h})});e.push(a)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(ji($w,8))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const qw=new ls("AppId",{providedIn:"root",factory:function Q3(){return`${PM()}${PM()}${PM()}`}});function PM(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const J3=new ls("Platform Initializer"),iC=new ls("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eF=new ls("appBootstrapListener"),tF=new ls("AnimationModuleType");let Fj=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const d_=new ls("LocaleId",{providedIn:"root",factory:()=>Ml(d_,ua.Optional|ua.SkipSelf)||function Nj(){return typeof $localize<"u"&&$localize.locale||Zb}()});class zj{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let LM=(()=>{class i{compileModuleSync(e){return new mM(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=ti(_c(e).declarations).reduce((a,u)=>{const h=$o(u);return h&&a.push(new Lw(h)),a},[]);return new zj(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Hj=(()=>Promise.resolve(0))();function kM(i){typeof Zone>"u"?Hj.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Zo{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ki(!1),this.onMicrotaskEmpty=new ki(!1),this.onStable=new ki(!1),this.onError=new ki(!1),typeof Zone>"u")throw new Qi(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Gj(){let i=ho.requestAnimationFrame,t=ho.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function $j(i){const t=()=>{!function jj(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(ho,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,OM(i),i.isCheckStableRunning=!0,RM(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),OM(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,a,u)=>{try{return rF(i),e.invokeTask(r,s,a,u)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),sF(i)}},onInvoke:(e,n,r,s,a,u,h)=>{try{return rF(i),e.invoke(r,s,a,u,h)}finally{i.shouldCoalesceRunChangeDetection&&t(),sF(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,OM(i),RM(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zo.isInAngularZone())throw new Qi(909,!1)}static assertNotInAngularZone(){if(Zo.isInAngularZone())throw new Qi(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+r,t,Wj,FA,FA);try{return s.runTask(a,e,n)}finally{s.cancelTask(a)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Wj={};function RM(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function OM(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function rF(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function sF(i){i._nesting--,RM(i)}class qj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ki,this.onMicrotaskEmpty=new ki,this.onStable=new ki,this.onError=new ki}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const aF=new ls(""),BA=new ls("");let BM,FM=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,BM||(function Xj(i){BM=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zo.assertNotInAngularZone(),kM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kM(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(ji(Zo),ji(NM),ji(BA))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),NM=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return BM?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),fy=null;const oF=new ls("AllowMultipleToken"),zM=new ls("PlatformDestroyListeners");class lF{constructor(t,e){this.name=t,this.token=e}}function cF(i,t,e=[]){const n=`Platform: ${t}`,r=new ls(n);return(s=[])=>{let a=VM();if(!a||a.injector.get(oF,!1)){const u=[...e,...s,{provide:r,useValue:!0}];i?i(u):function Zj(i){if(fy&&!fy.get(oF,!1))throw new Qi(400,!1);fy=i;const t=i.get(dF);(function uF(i){const t=i.get(J3,null);t&&t.forEach(e=>e())})(i)}(function hF(i=[],t){return Eh.create({name:t,providers:[{provide:ft,useValue:"platform"},{provide:zM,useValue:new Set([()=>fy=null])},...i]})}(u,n))}return function Jj(i){const t=VM();if(!t)throw new Qi(401,!1);return t}()}}function VM(){return fy?.get(dF)??null}let dF=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function e$(i,t){let e;return e="noop"===i?new qj:("zone.js"===i?void 0:i)||new Zo(t),e}(n?.ngZone,function fF(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Zo,useValue:r}];return r.run(()=>{const a=Eh.create({providers:s,parent:this.injector,name:e.moduleType.name}),u=e.create(a),h=u.injector.get(Xt,null);if(!h)throw new Qi(402,!1);return r.runOutsideAngular(()=>{const m=r.onError.subscribe({next:w=>{h.handleError(w)}});u.onDestroy(()=>{zA(this._modules,u),m.unsubscribe()})}),function pF(i,t,e){try{const n=e();return Ow(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(h,r,()=>{const m=u.injector.get(NA);return m.runInitializers(),m.donePromise.then(()=>(function BO(i){xl(i,"Expected localeId to be defined"),"string"==typeof i&&(NO=i.toLowerCase().replace(/_/g,"-"))}(u.injector.get(d_,Zb)||Zb),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,n=[]){const r=gF({},n);return function Yj(i,t,e){const n=new mM(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(Xw);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Qi(403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Qi(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(zM,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(ji(Eh))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function gF(i,t){return Array.isArray(t)?t.reduce(gF,i):{...i,...t}}let Xw=(()=>{class i{constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Ht(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),a=new Ht(u=>{let h;this._zone.runOutsideAngular(()=>{h=this._zone.onStable.subscribe(()=>{Zo.assertNotInAngularZone(),kM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const m=this._zone.onUnstable.subscribe(()=>{Zo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{h.unsubscribe(),m.unsubscribe()}});this.isStable=function Ai(...i){const t=we(i),e=function Ue(i,t){return"number"==typeof We(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?ve(n[0]):Wt(e)(Ei(n,t)):Lt}(s,a.pipe(or()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){const r=e instanceof Un;if(!this._injector.get(NA).done)throw!r&&function tC(i){const t=$o(i)||Sl(i)||qa(i);return null!==t&&t.standalone}(e),new Qi(405,false);let a;a=r?e:this._injector.get(gr).resolveComponentFactory(e),this.componentTypes.push(a.componentType);const u=function Kj(i){return i.isBoundToModule}(a)?void 0:this._injector.get(m0),m=a.create(Eh.NULL,[],n||a.selector,u),w=m.location.nativeElement,T=m.injector.get(aF,null);return T?.registerApplication(w),m.onDestroy(()=>{this.detachView(m.hostView),zA(this.components,m),T?.unregisterApplication(w)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new Qi(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;zA(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(eF,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>zA(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Qi(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(ji(Zo),ji(jt),ji(Xt))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function zA(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let vF=!0,_F=!1;function yF(){return _F=!0,vF}let Oo=(()=>{class i{}return i.__NG_ELEMENT_ID__=i$,i})();function i$(i){return function r$(i,t,e){if(Pf(i)&&!e){const n=Oc(i.index,t);return new Pw(n,n)}return 47&i.type?new Pw(t[16],t):null}(ln(),br(),16==(16&i))}class xF{constructor(){}supports(t){return kw(t)}create(t){return new c$(t)}}const u$=(i,t)=>t;class c${constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||u$}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const a=!n||e&&e.currentIndex<IF(n,r,s)?e:n,u=IF(a,r,s),h=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(e=e._next,null==a.previousIndex)r++;else{s||(s=[]);const m=u-r,w=h-r;if(m!=w){for(let O=0;O<m;O++){const W=O<s.length?s[O]:s[O]=0,te=W+O;w<=te&&te<m&&(s[O]=W+1)}s[a.previousIndex]=w-m}}u!==h&&t(a,u,h)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!kw(t))throw new Qi(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,a,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)s=t[u],a=this._trackByFn(u,s),null!==e&&Object.is(e.trackById,a)?(n&&(e=this._verifyReinsertion(e,s,a,u)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,a,u),n=!0),e=e._next}else r=0,function $9(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[d0()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,u=>{a=this._trackByFn(r,u),null!==e&&Object.is(e.trackById,a)?(n&&(e=this._verifyReinsertion(e,u,a,r)),Object.is(e.item,u)||this._addIdentityChange(e,u)):(e=this._mismatch(e,u,a,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new h$(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new AF),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AF),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class h${constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class d${constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class AF{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new d$,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function IF(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class SF{constructor(){}supports(t){return t instanceof Map||sM(t)}create(){return new f$}}class f${constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||sM(t)))throw new Qi(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,a=r._next;return s&&(s._next=a),a&&(a._prev=s),r._next=null,r._prev=null,r}const n=new p$(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class p${constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function EF(){return new HA([new xF])}let HA=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||EF()),deps:[[i,new vd,new Bu]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new Qi(901,!1)}}return i.\u0275prov=Zr({token:i,providedIn:"root",factory:EF}),i})();function TF(){return new Yw([new SF])}let Yw=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||TF()),deps:[[i,new vd,new Bu]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new Qi(901,!1)}}return i.\u0275prov=Zr({token:i,providedIn:"root",factory:TF}),i})();const v$=cF(null,"core",[]);let _$=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(ji(Xw))},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({}),i})();function p_(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}let GA=null;function Iv(){return GA}const nd=new ls("DocumentToken");let jM=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:function(){return function w$(){return ji(MF)}()},providedIn:"platform"}),i})();const x$=new ls("Location Initialized");let MF=(()=>{class i extends jM{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Iv().getBaseHref(this._doc)}onPopState(e){const n=Iv().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Iv().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){DF()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){DF()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(ji(nd))},i.\u0275prov=Zr({token:i,factory:function(){return function A$(){return new MF(ji(nd))}()},providedIn:"platform"}),i})();function DF(){return!!window.history.pushState}function $M(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function PF(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function g_(i){return i&&"?"!==i[0]?"?"+i:i}let y0=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:function(){return Ml(kF)},providedIn:"root"}),i})();const LF=new ls("appBaseHref");let kF=(()=>{class i extends y0{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Ml(nd).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return $M(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+g_(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const a=this.prepareExternalUrl(r+g_(s));this._platformLocation.pushState(e,n,a)}replaceState(e,n,r,s){const a=this.prepareExternalUrl(r+g_(s));this._platformLocation.replaceState(e,n,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(ji(jM),ji(LF,8))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),I$=(()=>{class i extends y0{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=$M(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let a=this.prepareExternalUrl(r+g_(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(e,n,a)}replaceState(e,n,r,s){let a=this.prepareExternalUrl(r+g_(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(ji(jM),ji(LF,8))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),qM=(()=>{class i{constructor(e){this._subject=new ki,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._baseHref=PF(RF(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+g_(n))}normalize(e){return i.stripTrailingSlash(function E$(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,RF(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g_(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g_(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=g_,i.joinWithSlash=$M,i.stripTrailingSlash=PF,i.\u0275fac=function(e){return new(e||i)(ji(y0))},i.\u0275prov=Zr({token:i,factory:function(){return function S$(){return new qM(ji(y0))}()},providedIn:"root"}),i})();function RF(i){return i.replace(/\/index.html$/,"")}var hh=(()=>((hh=hh||{})[hh.Format=0]="Format",hh[hh.Standalone=1]="Standalone",hh))(),sl=(()=>((sl=sl||{})[sl.Narrow=0]="Narrow",sl[sl.Abbreviated=1]="Abbreviated",sl[sl.Wide=2]="Wide",sl[sl.Short=3]="Short",sl))(),Sc=(()=>((Sc=Sc||{})[Sc.Short=0]="Short",Sc[Sc.Medium=1]="Medium",Sc[Sc.Long=2]="Long",Sc[Sc.Full=3]="Full",Sc))(),Wa=(()=>((Wa=Wa||{})[Wa.Decimal=0]="Decimal",Wa[Wa.Group=1]="Group",Wa[Wa.List=2]="List",Wa[Wa.PercentSign=3]="PercentSign",Wa[Wa.PlusSign=4]="PlusSign",Wa[Wa.MinusSign=5]="MinusSign",Wa[Wa.Exponential=6]="Exponential",Wa[Wa.SuperscriptingExponent=7]="SuperscriptingExponent",Wa[Wa.PerMille=8]="PerMille",Wa[Wa.Infinity=9]="Infinity",Wa[Wa.NaN=10]="NaN",Wa[Wa.TimeSeparator=11]="TimeSeparator",Wa[Wa.CurrencyDecimal=12]="CurrencyDecimal",Wa[Wa.CurrencyGroup=13]="CurrencyGroup",Wa))();function WA(i,t){return qg(Jf(i)[qs.DateFormat],t)}function jA(i,t){return qg(Jf(i)[qs.TimeFormat],t)}function $A(i,t){return qg(Jf(i)[qs.DateTimeFormat],t)}function $g(i,t){const e=Jf(i),n=e[qs.NumberSymbols][t];if(typeof n>"u"){if(t===Wa.CurrencyDecimal)return e[qs.NumberSymbols][Wa.Decimal];if(t===Wa.CurrencyGroup)return e[qs.NumberSymbols][Wa.Group]}return n}function FF(i){if(!i[qs.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[qs.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function qg(i,t){for(let e=t;e>-1;e--)if(typeof i[e]<"u")return i[e];throw new Error("Locale data API: locale data undefined")}function YM(i){const[t,e]=i.split(":");return{hours:+t,minutes:+e}}const V$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Kw={},U$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var id=(()=>((id=id||{})[id.Short=0]="Short",id[id.ShortGMT=1]="ShortGMT",id[id.Long=2]="Long",id[id.Extended=3]="Extended",id))(),Za=(()=>((Za=Za||{})[Za.FullYear=0]="FullYear",Za[Za.Month=1]="Month",Za[Za.Date=2]="Date",Za[Za.Hours=3]="Hours",Za[Za.Minutes=4]="Minutes",Za[Za.Seconds=5]="Seconds",Za[Za.FractionalSeconds=6]="FractionalSeconds",Za[Za.Day=7]="Day",Za))(),So=(()=>((So=So||{})[So.DayPeriods=0]="DayPeriods",So[So.Days=1]="Days",So[So.Months=2]="Months",So[So.Eras=3]="Eras",So))();function H$(i,t,e,n){let r=function Z$(i){if(zF(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){const[r,s=1,a=1]=i.split("-").map(u=>+u);return qA(r,s-1,a)}const e=parseFloat(i);if(!isNaN(i-e))return new Date(e);let n;if(n=i.match(V$))return function Q$(i){const t=new Date(0);let e=0,n=0;const r=i[8]?t.setUTCFullYear:t.setFullYear,s=i[8]?t.setUTCHours:t.setHours;i[9]&&(e=Number(i[9]+i[10]),n=Number(i[9]+i[11])),r.call(t,Number(i[1]),Number(i[2])-1,Number(i[3]));const a=Number(i[4]||0)-e,u=Number(i[5]||0)-n,h=Number(i[6]||0),m=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return s.call(t,a,u,h,m),t}(n)}const t=new Date(i);if(!zF(t))throw new Error(`Unable to convert "${i}" into a date`);return t}(i);t=m_(e,t)||t;let u,a=[];for(;t;){if(u=U$.exec(t),!u){a.push(t);break}{a=a.concat(u.slice(1));const w=a.pop();if(!w)break;t=w}}let h=r.getTimezoneOffset();n&&(h=BF(n,h),r=function K$(i,t,e){const n=e?-1:1,r=i.getTimezoneOffset();return function Y$(i,t){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+t),i}(i,n*(BF(t,r)-r))}(r,n,!0));let m="";return a.forEach(w=>{const T=function X$(i){if(ZM[i])return ZM[i];let t;switch(i){case"G":case"GG":case"GGG":t=zu(So.Eras,sl.Abbreviated);break;case"GGGG":t=zu(So.Eras,sl.Wide);break;case"GGGGG":t=zu(So.Eras,sl.Narrow);break;case"y":t=Dh(Za.FullYear,1,0,!1,!0);break;case"yy":t=Dh(Za.FullYear,2,0,!0,!0);break;case"yyy":t=Dh(Za.FullYear,3,0,!1,!0);break;case"yyyy":t=Dh(Za.FullYear,4,0,!1,!0);break;case"Y":t=ZA(1);break;case"YY":t=ZA(2,!0);break;case"YYY":t=ZA(3);break;case"YYYY":t=ZA(4);break;case"M":case"L":t=Dh(Za.Month,1,1);break;case"MM":case"LL":t=Dh(Za.Month,2,1);break;case"MMM":t=zu(So.Months,sl.Abbreviated);break;case"MMMM":t=zu(So.Months,sl.Wide);break;case"MMMMM":t=zu(So.Months,sl.Narrow);break;case"LLL":t=zu(So.Months,sl.Abbreviated,hh.Standalone);break;case"LLLL":t=zu(So.Months,sl.Wide,hh.Standalone);break;case"LLLLL":t=zu(So.Months,sl.Narrow,hh.Standalone);break;case"w":t=KM(1);break;case"ww":t=KM(2);break;case"W":t=KM(1,!0);break;case"d":t=Dh(Za.Date,1);break;case"dd":t=Dh(Za.Date,2);break;case"c":case"cc":t=Dh(Za.Day,1);break;case"ccc":t=zu(So.Days,sl.Abbreviated,hh.Standalone);break;case"cccc":t=zu(So.Days,sl.Wide,hh.Standalone);break;case"ccccc":t=zu(So.Days,sl.Narrow,hh.Standalone);break;case"cccccc":t=zu(So.Days,sl.Short,hh.Standalone);break;case"E":case"EE":case"EEE":t=zu(So.Days,sl.Abbreviated);break;case"EEEE":t=zu(So.Days,sl.Wide);break;case"EEEEE":t=zu(So.Days,sl.Narrow);break;case"EEEEEE":t=zu(So.Days,sl.Short);break;case"a":case"aa":case"aaa":t=zu(So.DayPeriods,sl.Abbreviated);break;case"aaaa":t=zu(So.DayPeriods,sl.Wide);break;case"aaaaa":t=zu(So.DayPeriods,sl.Narrow);break;case"b":case"bb":case"bbb":t=zu(So.DayPeriods,sl.Abbreviated,hh.Standalone,!0);break;case"bbbb":t=zu(So.DayPeriods,sl.Wide,hh.Standalone,!0);break;case"bbbbb":t=zu(So.DayPeriods,sl.Narrow,hh.Standalone,!0);break;case"B":case"BB":case"BBB":t=zu(So.DayPeriods,sl.Abbreviated,hh.Format,!0);break;case"BBBB":t=zu(So.DayPeriods,sl.Wide,hh.Format,!0);break;case"BBBBB":t=zu(So.DayPeriods,sl.Narrow,hh.Format,!0);break;case"h":t=Dh(Za.Hours,1,-12);break;case"hh":t=Dh(Za.Hours,2,-12);break;case"H":t=Dh(Za.Hours,1);break;case"HH":t=Dh(Za.Hours,2);break;case"m":t=Dh(Za.Minutes,1);break;case"mm":t=Dh(Za.Minutes,2);break;case"s":t=Dh(Za.Seconds,1);break;case"ss":t=Dh(Za.Seconds,2);break;case"S":t=Dh(Za.FractionalSeconds,1);break;case"SS":t=Dh(Za.FractionalSeconds,2);break;case"SSS":t=Dh(Za.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=YA(id.Short);break;case"ZZZZZ":t=YA(id.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=YA(id.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=YA(id.Long);break;default:return null}return ZM[i]=t,t}(w);m+=T?T(r,e,h):"''"===w?"'":w.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),m}function qA(i,t,e){const n=new Date(0);return n.setFullYear(i,t,e),n.setHours(0,0,0),n}function m_(i,t){const e=function T$(i){return Jf(i)[qs.LocaleId]}(i);if(Kw[e]=Kw[e]||{},Kw[e][t])return Kw[e][t];let n="";switch(t){case"shortDate":n=WA(i,Sc.Short);break;case"mediumDate":n=WA(i,Sc.Medium);break;case"longDate":n=WA(i,Sc.Long);break;case"fullDate":n=WA(i,Sc.Full);break;case"shortTime":n=jA(i,Sc.Short);break;case"mediumTime":n=jA(i,Sc.Medium);break;case"longTime":n=jA(i,Sc.Long);break;case"fullTime":n=jA(i,Sc.Full);break;case"short":const r=m_(i,"shortTime"),s=m_(i,"shortDate");n=XA($A(i,Sc.Short),[r,s]);break;case"medium":const a=m_(i,"mediumTime"),u=m_(i,"mediumDate");n=XA($A(i,Sc.Medium),[a,u]);break;case"long":const h=m_(i,"longTime"),m=m_(i,"longDate");n=XA($A(i,Sc.Long),[h,m]);break;case"full":const w=m_(i,"fullTime"),T=m_(i,"fullDate");n=XA($A(i,Sc.Full),[w,T])}return n&&(Kw[e][t]=n),n}function XA(i,t){return t&&(i=i.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),i}function zm(i,t,e="-",n,r){let s="";(i<0||r&&i<=0)&&(r?i=1-i:(i=-i,s=e));let a=String(i);for(;a.length<t;)a="0"+a;return n&&(a=a.slice(a.length-t)),s+a}function Dh(i,t,e=0,n=!1,r=!1){return function(s,a){let u=function W$(i,t){switch(i){case Za.FullYear:return t.getFullYear();case Za.Month:return t.getMonth();case Za.Date:return t.getDate();case Za.Hours:return t.getHours();case Za.Minutes:return t.getMinutes();case Za.Seconds:return t.getSeconds();case Za.FractionalSeconds:return t.getMilliseconds();case Za.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}(i,s);if((e>0||u>-e)&&(u+=e),i===Za.Hours)0===u&&-12===e&&(u=12);else if(i===Za.FractionalSeconds)return function G$(i,t){return zm(i,3).substring(0,t)}(u,t);const h=$g(a,Wa.MinusSign);return zm(u,t,h,n,r)}}function zu(i,t,e=hh.Format,n=!1){return function(r,s){return function j$(i,t,e,n,r,s){switch(e){case So.Months:return function P$(i,t,e){const n=Jf(i),s=qg([n[qs.MonthsFormat],n[qs.MonthsStandalone]],t);return qg(s,e)}(t,r,n)[i.getMonth()];case So.Days:return function D$(i,t,e){const n=Jf(i),s=qg([n[qs.DaysFormat],n[qs.DaysStandalone]],t);return qg(s,e)}(t,r,n)[i.getDay()];case So.DayPeriods:const a=i.getHours(),u=i.getMinutes();if(s){const m=function O$(i){const t=Jf(i);return FF(t),(t[qs.ExtraData][2]||[]).map(n=>"string"==typeof n?YM(n):[YM(n[0]),YM(n[1])])}(t),w=function F$(i,t,e){const n=Jf(i);FF(n);const s=qg([n[qs.ExtraData][0],n[qs.ExtraData][1]],t)||[];return qg(s,e)||[]}(t,r,n),T=m.findIndex(O=>{if(Array.isArray(O)){const[W,te]=O,ue=a>=W.hours&&u>=W.minutes,ce=a<te.hours||a===te.hours&&u<te.minutes;if(W.hours<te.hours){if(ue&&ce)return!0}else if(ue||ce)return!0}else if(O.hours===a&&O.minutes===u)return!0;return!1});if(-1!==T)return w[T]}return function M$(i,t,e){const n=Jf(i),s=qg([n[qs.DayPeriodsFormat],n[qs.DayPeriodsStandalone]],t);return qg(s,e)}(t,r,n)[a<12?0:1];case So.Eras:return function L$(i,t){return qg(Jf(i)[qs.Eras],t)}(t,n)[i.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,i,t,e,n)}}function YA(i){return function(t,e,n){const r=-1*n,s=$g(e,Wa.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case id.Short:return(r>=0?"+":"")+zm(a,2,s)+zm(Math.abs(r%60),2,s);case id.ShortGMT:return"GMT"+(r>=0?"+":"")+zm(a,1,s);case id.Long:return"GMT"+(r>=0?"+":"")+zm(a,2,s)+":"+zm(Math.abs(r%60),2,s);case id.Extended:return 0===n?"Z":(r>=0?"+":"")+zm(a,2,s)+":"+zm(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${i}"`)}}}function NF(i){return qA(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))}function KM(i,t=!1){return function(e,n){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,a=e.getDate();r=1+Math.floor((a+s)/7)}else{const s=NF(e),a=function q$(i){const t=qA(i,0,1).getDay();return qA(i,0,1+(t<=4?4:11)-t)}(s.getFullYear()),u=s.getTime()-a.getTime();r=1+Math.round(u/6048e5)}return zm(r,i,$g(n,Wa.MinusSign))}}function ZA(i,t=!1){return function(e,n){return zm(NF(e).getFullYear(),i,$g(n,Wa.MinusSign),t)}}const ZM={};function BF(i,t){i=i.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(e)?t:e}function zF(i){return i instanceof Date&&!isNaN(i.valueOf())}function GF(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let vo=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(kw(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${wr(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(Tn(HA),Tn(Yw),Tn($i),Tn(p))},i.\u0275dir=Qs({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class hq{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ec=(()=>{class i{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,a)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new hq(r.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)n.remove(null===s?void 0:s);else if(null!==s){const u=n.get(s);n.move(u,a),$F(u,r)}});for(let r=0,s=n.length;r<s;r++){const u=n.get(r).context;u.index=r,u.count=s,u.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{$F(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Tn(jg),Tn(Nm),Tn(HA))},i.\u0275dir=Qs({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function $F(i,t){i.context.$implicit=t.item}let wo=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new fq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){qF("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){qF("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Tn(jg),Tn(Nm))},i.\u0275dir=Qs({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class fq{constructor(){this.$implicit=null,this.ngIf=null}}function qF(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${wr(t)}'.`)}let Ho=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),a=-1===r.indexOf("-")?void 0:Ur.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,a):this._renderer.removeStyle(this._ngEl.nativeElement,r,a)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(Yw),Tn(p))},i.\u0275dir=Qs({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),hu=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:a}=this;this._viewRef=n.createEmbeddedView(r,s,a?{injector:a}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(Tn(jg))},i.\u0275dir=Qs({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Tl]}),i})();const Sq=new ls("DATE_PIPE_DEFAULT_TIMEZONE");let YF=(()=>{class i{constructor(e,n){this.locale=e,this.defaultTimezone=n}transform(e,n="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return H$(e,n,s||this.locale,r??this.defaultTimezone??void 0)}catch(a){throw function Vm(i,t){return new Qi(2100,!1)}()}}}return i.\u0275fac=function(e){return new(e||i)(Tn(d_,16),Tn(Sq,24))},i.\u0275pipe=kc({name:"date",type:i,pure:!0,standalone:!0}),i})(),KF=(()=>{class i{transform(e){return JSON.stringify(e,null,2)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=kc({name:"json",type:i,pure:!1,standalone:!0}),i})(),Oa=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({}),i})();const QF="browser";function oD(i){return i===QF}let zq=(()=>{class i{}return i.\u0275prov=Zr({token:i,providedIn:"root",factory:()=>new Vq(ji(nd),window)}),i})();class Vq{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Uq(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const a=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(a)return a}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=JF(this.window.history)||JF(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function JF(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class eN{}class lD extends class Hq extends class C${}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function b$(i){GA||(GA=i)}(new lD)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Gq(){return Qw=Qw||document.querySelector("base"),Qw?Qw.getAttribute("href"):null}();return null==e?null:function Wq(i){JA=JA||document.createElement("a"),JA.setAttribute("href",i);const t=JA.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Qw=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return GF(document.cookie,t)}}let JA,Qw=null;const tN=new ls("TRANSITION_ID"),$q=[{provide:$w,useFactory:function jq(i,t,e){return()=>{e.get(NA).donePromise.then(()=>{const n=Iv(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[tN,nd,Eh],multi:!0}];let Xq=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const eI=new ls("EventManagerPlugins");let tI=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const a=r[s];if(a.supports(e))return this._eventNameToPlugin.set(e,a),a}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(ji(eI),ji(Zo))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();class nN{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Iv().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let iN=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),Jw=(()=>{class i extends iN{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,r.push(n.appendChild(a))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(rN),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(rN))}}return i.\u0275fac=function(e){return new(e||i)(ji(nd))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();function rN(i){Iv().remove(i)}const uD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cD=/%COMP%/g;function nI(i,t,e){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?nI(i,r,e):(r=r.replace(cD,i),e.push(r))}return e}function oN(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let iI=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new hD(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case fl.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new eX(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case fl.ShadowDom:return new tX(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=nI(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(ji(tI),ji(Jw),ji(qw))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();class hD{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(uD[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(uN(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(uN(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=uD[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=uD[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Ur.DashCase|Ur.Important)?t.style.setProperty(e,n,r&Ur.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Ur.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,oN(n)):this.eventManager.addEventListener(t,e,oN(n))}}function uN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class eX extends hD{constructor(t,e,n,r){super(t),this.component=n;const s=nI(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=function Zq(i){return"_ngcontent-%COMP%".replace(cD,i)}(r+"-"+n.id),this.hostAttr=function Qq(i){return"_nghost-%COMP%".replace(cD,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class tX extends hD{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=nI(r.id,r.styles,[]);for(let a=0;a<s.length;a++){const u=document.createElement("style");u.textContent=s[a],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let nX=(()=>{class i extends nN{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(ji(nd))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const cN=["alt","control","meta","shift"],rX={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hN={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},sX={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let aX=(()=>{class i extends nN{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),a=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Iv().onAndCancel(e,s.domEventName,a))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let a="";if(cN.forEach(h=>{const m=n.indexOf(h);m>-1&&(n.splice(m,1),a+=h+".")}),a+=s,0!=n.length||0===s.length)return null;const u={};return u.domEventName=r,u.fullKey=a,u}static getEventFullKey(e){let n="",r=function oX(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&hN.hasOwnProperty(t)&&(t=hN[t]))}return rX[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),cN.forEach(s=>{s!=r&&(0,sX[s])(e)&&(n+=s+".")}),n+=r,n}static eventCallback(e,n,r){return s=>{i.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(ji(nd))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const hX=cF(v$,"browser",[{provide:iC,useValue:QF},{provide:J3,useValue:function lX(){lD.makeCurrent()},multi:!0},{provide:nd,useFactory:function cX(){return function Og(i){yd=i}(document),document},deps:[]}]),fN=new ls(""),pN=[{provide:BA,useClass:class qq{addToWindow(t){ho.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},ho.getAllAngularTestabilities=()=>t.getAllTestabilities(),ho.getAllAngularRootElements=()=>t.getAllRootElements(),ho.frameworkStabilizers||(ho.frameworkStabilizers=[]),ho.frameworkStabilizers.push(n=>{const r=ho.getAllAngularTestabilities();let s=r.length,a=!1;const u=function(h){a=a||h,s--,0==s&&n(a)};r.forEach(function(h){h.whenStable(u)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Iv().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:aF,useClass:FM,deps:[Zo,NM,BA]},{provide:FM,useClass:FM,deps:[Zo,NM,BA]}],gN=[{provide:ft,useValue:"root"},{provide:Xt,useFactory:function uX(){return new Xt},deps:[]},{provide:eI,useClass:nX,multi:!0,deps:[nd,Zo,iC]},{provide:eI,useClass:aX,multi:!0,deps:[nd]},{provide:iI,useClass:iI,deps:[tI,Jw,qw]},{provide:c,useExisting:iI},{provide:iN,useExisting:Jw},{provide:Jw,useClass:Jw,deps:[nd]},{provide:tI,useClass:tI,deps:[eI,Zo]},{provide:eN,useClass:Xq,deps:[]},[]];let mN=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:qw,useValue:e.appId},{provide:tN,useExisting:qw},$q]}}}return i.\u0275fac=function(e){return new(e||i)(ji(fN,12))},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({providers:[...gN,...pN],imports:[Oa,_$]}),i})(),fD=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(ji(nd))},i.\u0275prov=Zr({token:i,factory:function(e){let n=null;return n=e?new e:function fX(){return new fD(ji(nd))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let yN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:function(e){let n=null;return n=e?new(e||i):ji(bN),n},providedIn:"root"}),i})(),bN=(()=>{class i extends yN{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case Dl.NONE:return n;case Dl.HTML:return wl(n,"HTML")?Eu(n):r_(this._doc,String(n)).toString();case Dl.STYLE:return wl(n,"Style")?Eu(n):n;case Dl.SCRIPT:if(wl(n,"Script"))return Eu(n);throw new Error("unsafe value used in a script context");case Dl.URL:return wl(n,"URL")?Eu(n):Ug(String(n));case Dl.RESOURCE_URL:if(wl(n,"ResourceURL"))return Eu(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function Ng(i){return new ff(i)}(e)}bypassSecurityTrustStyle(e){return function zd(i){return new Kp(i)}(e)}bypassSecurityTrustScript(e){return function Vd(i){return new mv(i)}(e)}bypassSecurityTrustUrl(e){return function pf(i){return new Qy(i)}(e)}bypassSecurityTrustResourceUrl(e){return function Kf(i){return new Pm(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(ji(nd))},i.\u0275prov=Zr({token:i,factory:function(e){let n=null;return n=e?new e:function bX(i){return new bN(i.get(nd))}(ji(Eh)),n},providedIn:"root"}),i})();function ta(...i){return Ei(i,we(i))}function v_(i,t){return ye(t)?gt(i,t,1):gt(i,1)}function Xg(i,t){return ri((e,n)=>{let r=0;e.subscribe(ni(n,s=>i.call(t,s,r++)&&n.next(s)))})}class CN{}class rI{}class Sv{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),a=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Sv?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Sv;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Sv?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let a=this.headers.get(e);if(!a)return;a=a.filter(u=>-1===s.indexOf(u)),0===a.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class CX{encodeKey(t){return wN(t)}encodeValue(t){return wN(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const xX=/%(\d[a-f0-9])/gi,AX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wN(i){return encodeURIComponent(i).replace(xX,(t,e)=>AX[e]??t)}function sI(i){return`${i}`}class __{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new CX,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function wX(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[a,u]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],h=e.get(a)||[];h.push(u),e.set(a,h)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(sI):[sI(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new __({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(sI(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(sI(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class IX{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function xN(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function AN(i){return typeof Blob<"u"&&i instanceof Blob}function IN(i){return typeof FormData<"u"&&i instanceof FormData}class b0{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function SX(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Sv),this.context||(this.context=new IX),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=e;else{const u=e.indexOf("?");this.urlWithParams=e+(-1===u?"?":u<e.length-1?"&":"")+a}}else this.params=new __,this.urlWithParams=e}serializeBody(){return null===this.body?null:xN(this.body)||AN(this.body)||IN(this.body)||function EX(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof __?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||IN(this.body)?null:AN(this.body)?this.body.type||null:xN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof __?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,u=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let h=t.headers||this.headers,m=t.params||this.params;const w=t.context??this.context;return void 0!==t.setHeaders&&(h=Object.keys(t.setHeaders).reduce((T,O)=>T.set(O,t.setHeaders[O]),h)),t.setParams&&(m=Object.keys(t.setParams).reduce((T,O)=>T.set(O,t.setParams[O]),m)),new b0(e,n,s,{params:m,headers:h,context:w,reportProgress:u,responseType:r,withCredentials:a})}}var Tc=(()=>((Tc=Tc||{})[Tc.Sent=0]="Sent",Tc[Tc.UploadProgress=1]="UploadProgress",Tc[Tc.ResponseHeader=2]="ResponseHeader",Tc[Tc.DownloadProgress=3]="DownloadProgress",Tc[Tc.Response=4]="Response",Tc[Tc.User=5]="User",Tc))();class gD{constructor(t,e=200,n="OK"){this.headers=t.headers||new Sv,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class mD extends gD{constructor(t={}){super(t),this.type=Tc.ResponseHeader}clone(t={}){return new mD({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class rC extends gD{constructor(t={}){super(t),this.type=Tc.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new rC({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class SN extends gD{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function vD(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let aI=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof b0)s=e;else{let h,m;h=r.headers instanceof Sv?r.headers:new Sv(r.headers),r.params&&(m=r.params instanceof __?r.params:new __({fromObject:r.params})),s=new b0(e,n,void 0!==r.body?r.body:null,{headers:h,context:r.context,params:m,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const a=ta(s).pipe(v_(h=>this.handler.handle(h)));if(e instanceof b0||"events"===r.observe)return a;const u=a.pipe(Xg(h=>h instanceof rC));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(Oe(h=>{if(null!==h.body&&!(h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return h.body}));case"blob":return u.pipe(Oe(h=>{if(null!==h.body&&!(h.body instanceof Blob))throw new Error("Response is not a Blob.");return h.body}));case"text":return u.pipe(Oe(h=>{if(null!==h.body&&"string"!=typeof h.body)throw new Error("Response is not a string.");return h.body}));default:return u.pipe(Oe(h=>h.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new __).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,vD(r,n))}post(e,n,r={}){return this.request("POST",e,vD(r,n))}put(e,n,r={}){return this.request("PUT",e,vD(r,n))}}return i.\u0275fac=function(e){return new(e||i)(ji(CN))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();class EN{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const TN=new ls("HTTP_INTERCEPTORS");let TX=(()=>{class i{intercept(e,n){return n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const MX=/^\)\]\}',?\n/;let MN=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ht(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((W,te)=>r.setRequestHeader(W,te.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const W=e.detectContentTypeHeader();null!==W&&r.setRequestHeader("Content-Type",W)}if(e.responseType){const W=e.responseType.toLowerCase();r.responseType="json"!==W?W:"text"}const s=e.serializeBody();let a=null;const u=()=>{if(null!==a)return a;const W=r.statusText||"OK",te=new Sv(r.getAllResponseHeaders()),ue=function DX(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||e.url;return a=new mD({headers:te,status:r.status,statusText:W,url:ue}),a},h=()=>{let{headers:W,status:te,statusText:ue,url:ce}=u(),Ne=null;204!==te&&(Ne=typeof r.response>"u"?r.responseText:r.response),0===te&&(te=Ne?200:0);let et=te>=200&&te<300;if("json"===e.responseType&&"string"==typeof Ne){const Je=Ne;Ne=Ne.replace(MX,"");try{Ne=""!==Ne?JSON.parse(Ne):null}catch(at){Ne=Je,et&&(et=!1,Ne={error:at,text:Ne})}}et?(n.next(new rC({body:Ne,headers:W,status:te,statusText:ue,url:ce||void 0})),n.complete()):n.error(new SN({error:Ne,headers:W,status:te,statusText:ue,url:ce||void 0}))},m=W=>{const{url:te}=u(),ue=new SN({error:W,status:r.status||0,statusText:r.statusText||"Unknown Error",url:te||void 0});n.error(ue)};let w=!1;const T=W=>{w||(n.next(u()),w=!0);let te={type:Tc.DownloadProgress,loaded:W.loaded};W.lengthComputable&&(te.total=W.total),"text"===e.responseType&&!!r.responseText&&(te.partialText=r.responseText),n.next(te)},O=W=>{let te={type:Tc.UploadProgress,loaded:W.loaded};W.lengthComputable&&(te.total=W.total),n.next(te)};return r.addEventListener("load",h),r.addEventListener("error",m),r.addEventListener("timeout",m),r.addEventListener("abort",m),e.reportProgress&&(r.addEventListener("progress",T),null!==s&&r.upload&&r.upload.addEventListener("progress",O)),r.send(s),n.next({type:Tc.Sent}),()=>{r.removeEventListener("error",m),r.removeEventListener("abort",m),r.removeEventListener("load",h),r.removeEventListener("timeout",m),e.reportProgress&&(r.removeEventListener("progress",T),null!==s&&r.upload&&r.upload.removeEventListener("progress",O)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(ji(eN))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const _D=new ls("XSRF_COOKIE_NAME"),yD=new ls("XSRF_HEADER_NAME");class DN{}let PX=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=GF(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(ji(nd),ji(iC),ji(_D))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),bD=(()=>{class i{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(ji(DN),ji(yD))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),LX=(()=>{class i{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(TN,[]);this.chain=n.reduceRight((r,s)=>new EN(r,s),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(ji(rI),ji(Eh))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),kX=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:bD,useClass:TX}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:_D,useValue:e.cookieName}:[],e.headerName?{provide:yD,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({providers:[bD,{provide:TN,useExisting:bD,multi:!0},{provide:DN,useClass:PX},{provide:_D,useValue:"XSRF-TOKEN"},{provide:yD,useValue:"X-XSRF-TOKEN"}]}),i})(),PN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({providers:[aI,{provide:CN,useClass:LX},MN,{provide:rI,useExisting:MN}],imports:[kX.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),i})();class Mp extends xt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const oI=j(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:RX}=Array,{getPrototypeOf:OX,prototype:FX,keys:NX}=Object;function LN(i){if(1===i.length){const t=i[0];if(RX(t))return{args:t,keys:null};if(function BX(i){return i&&"object"==typeof i&&OX(i)===FX}(t)){const e=NX(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:zX}=Array;function kN(i){return Oe(t=>function VX(i,t){return zX(t)?i(...t):i(t)}(i,t))}function RN(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function ON(...i){const t=we(i),e=Ye(i),{args:n,keys:r}=LN(i);if(0===n.length)return Ei([],t);const s=new Ht(function UX(i,t,e=Ct){return n=>{FN(t,()=>{const{length:r}=i,s=new Array(r);let a=r,u=r;for(let h=0;h<r;h++)FN(t,()=>{const m=Ei(i[h],t);let w=!1;m.subscribe(ni(n,T=>{s[h]=T,w||(w=!0,u--),u||n.next(e(s.slice()))},()=>{--a||n.complete()}))},n)},n)}}(n,t,r?a=>RN(r,a):Ct));return e?s.pipe(kN(e)):s}function FN(i,t,e){i?nt(e,i,t):t()}function CD(...i){return function HX(){return Wt(1)}()(Ei(i,we(i)))}function NN(i){return new Ht(t=>{ve(i()).subscribe(t)})}function sC(i,t){const e=ye(i)?i:()=>i,n=r=>r.error(e());return new Ht(t?r=>t.schedule(n,0,r):n)}function wD(){return ri((i,t)=>{let e=null;i._refCount++;const n=ni(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class BN extends Ht{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Gn(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ie;const e=this.getSubject();t.add(this.source.subscribe(ni(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ie.EMPTY)}return t}refCount(){return wD()(this)}}function Um(i,t){return ri((e,n)=>{let r=null,s=0,a=!1;const u=()=>a&&!r&&n.complete();e.subscribe(ni(n,h=>{r?.unsubscribe();let m=0;const w=s++;ve(i(h,w)).subscribe(r=ni(n,T=>n.next(t?t(h,T,w,m++):T),()=>{r=null,u()}))},()=>{a=!0,u()}))})}function aC(i){return i<=0?()=>Lt:ri((t,e)=>{let n=0;t.subscribe(ni(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function lI(i){return ri((t,e)=>{let n=!1;t.subscribe(ni(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function zN(i=WX){return ri((t,e)=>{let n=!1;t.subscribe(ni(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function WX(){return new oI}function gy(i,t){const e=arguments.length>=2;return n=>n.pipe(i?Xg((r,s)=>i(r,s,n)):Ct,aC(1),e?lI(t):zN(()=>new oI))}function Cf(i,t,e){const n=ye(i)||t||e?{next:i,error:t,complete:e}:i;return n?ri((r,s)=>{var a;null===(a=n.subscribe)||void 0===a||a.call(n);let u=!0;r.subscribe(ni(s,h=>{var m;null===(m=n.next)||void 0===m||m.call(n,h),s.next(h)},()=>{var h;u=!1,null===(h=n.complete)||void 0===h||h.call(n),s.complete()},h=>{var m;u=!1,null===(m=n.error)||void 0===m||m.call(n,h),s.error(h)},()=>{var h,m;u&&(null===(h=n.unsubscribe)||void 0===h||h.call(n)),null===(m=n.finalize)||void 0===m||m.call(n)}))}):Ct}function Ev(i){return ri((t,e)=>{let s,n=null,r=!1;n=t.subscribe(ni(e,void 0,void 0,a=>{s=ve(i(a,Ev(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function jX(i,t,e,n,r){return(s,a)=>{let u=e,h=t,m=0;s.subscribe(ni(a,w=>{const T=m++;h=u?i(h,w,T):(u=!0,w),n&&a.next(h)},r&&(()=>{u&&a.next(h),a.complete()})))}}function xD(i,t){return ri(jX(i,t,arguments.length>=2,!0))}function AD(i){return i<=0?()=>Lt:ri((t,e)=>{let n=[];t.subscribe(ni(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function VN(i,t){const e=arguments.length>=2;return n=>n.pipe(i?Xg((r,s)=>i(r,s,n)):Ct,AD(1),e?lI(t):zN(()=>new oI))}function ID(i){return ri((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const Go="primary";class XX{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function oC(i){return new XX(i)}function YX(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const a=n[s],u=i[s];if(a.startsWith(":"))r[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Tv(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!UN(i[r],t[r]))return!1;return!0}function UN(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function HN(i){return Array.prototype.concat.apply([],i)}function GN(i){return i.length>0?i[i.length-1]:null}function jd(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function y_(i){return oM(i)?i:Ow(i)?Ei(Promise.resolve(i)):ta(i)}const QX={exact:function $N(i,t,e){if(!w0(i.segments,t.segments)||!uI(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!$N(i.children[n],t.children[n],e))return!1;return!0},subset:qN},WN={exact:function JX(i,t){return Tv(i,t)},subset:function eY(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>UN(i[e],t[e]))},ignored:()=>!0};function jN(i,t,e){return QX[e.paths](i.root,t.root,e.matrixParams)&&WN[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function qN(i,t,e){return XN(i,t,t.segments,e)}function XN(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!w0(r,e)||t.hasChildren()||!uI(r,e,n))}if(i.segments.length===e.length){if(!w0(i.segments,e)||!uI(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!qN(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(w0(i.segments,r)&&uI(i.segments,r,n)&&i.children[Go])&&XN(i.children[Go],t,s,n)}}function uI(i,t,e){return t.every((n,r)=>WN[e](i[r].parameters,n.parameters))}class C0{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oC(this.queryParams)),this._queryParamMap}toString(){return iY.serialize(this)}}class Qo{constructor(t,e){this.segments=t,this.children=e,this.parent=null,jd(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cI(this)}}class ex{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=oC(this.parameters)),this._parameterMap}toString(){return QN(this)}}function w0(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let YN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:function(){return new ED},providedIn:"root"}),i})();class ED{parse(t){const e=new dY(t);return new C0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${tx(t.root,!0)}`,n=function aY(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${hI(e)}=${hI(r)}`).join("&"):`${hI(e)}=${hI(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function rY(i){return encodeURI(i)}(t.fragment)}`:""}`}}const iY=new ED;function cI(i){return i.segments.map(t=>QN(t)).join("/")}function tx(i,t){if(!i.hasChildren())return cI(i);if(t){const e=i.children[Go]?tx(i.children[Go],!1):"",n=[];return jd(i.children,(r,s)=>{s!==Go&&n.push(`${s}:${tx(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function nY(i,t){let e=[];return jd(i.children,(n,r)=>{r===Go&&(e=e.concat(t(n,r)))}),jd(i.children,(n,r)=>{r!==Go&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===Go?[tx(i.children[Go],!1)]:[`${r}:${tx(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Go]?`${cI(i)}/${e[0]}`:`${cI(i)}/(${e.join("//")})`}}function KN(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hI(i){return KN(i).replace(/%3B/gi,";")}function TD(i){return KN(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dI(i){return decodeURIComponent(i)}function ZN(i){return dI(i.replace(/\+/g,"%20"))}function QN(i){return`${TD(i.path)}${function sY(i){return Object.keys(i).map(t=>`;${TD(t)}=${TD(i[t])}`).join("")}(i.parameters)}`}const oY=/^[^\/()?;=#]+/;function fI(i){const t=i.match(oY);return t?t[0]:""}const lY=/^[^=?&#]+/,cY=/^[^&#]+/;class dY{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qo([],{}):new Qo([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Go]=new Qo(t,e)),n}parseSegment(){const t=fI(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Qi(4009,!1);return this.capture(t),new ex(dI(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=fI(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=fI(this.remaining);r&&(n=r,this.capture(n))}t[dI(e)]=dI(n)}parseQueryParam(t){const e=function uY(i){const t=i.match(lY);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const a=function hY(i){const t=i.match(cY);return t?t[0]:""}(this.remaining);a&&(n=a,this.capture(n))}const r=ZN(e),s=ZN(n);if(t.hasOwnProperty(r)){let a=t[r];Array.isArray(a)||(a=[a],t[r]=a),a.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=fI(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Qi(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Go);const a=this.parseChildren();e[s]=1===Object.keys(a).length?a[Go]:new Qo([],a),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Qi(4011,!1)}}function MD(i){return i.segments.length>0?new Qo([],{[Go]:i}):i}function pI(i){const t={};for(const n of Object.keys(i.children)){const s=pI(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function fY(i){if(1===i.numberOfChildren&&i.children[Go]){const t=i.children[Go];return new Qo(i.segments.concat(t.segments),t.children)}return i}(new Qo(i.segments,t))}function x0(i){return i instanceof C0}function mY(i,t,e,n,r){if(0===e.length)return lC(t.root,t.root,t.root,n,r);const s=function tB(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new eB(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const u={};return jd(s.outlets,(h,m)=>{u[m]="string"==typeof h?h.split("/"):h}),[...r,{outlets:u}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===a?(s.split("/").forEach((u,h)=>{0==h&&"."===u||(0==h&&""===u?e=!0:".."===u?t++:""!=u&&r.push(u))}),r):[...r,s]},[]);return new eB(e,t,n)}(e);return s.toRoot()?lC(t.root,t.root,new Qo([],{}),n,r):function a(h){const m=function _Y(i,t,e,n){if(i.isAbsolute)return new uC(t.root,!0,0);if(-1===n)return new uC(e,e===t.root,0);return function nB(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new Qi(4005,!1);r=n.segments.length}return new uC(n,!1,r-s)}(e,n+(nx(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,h),w=m.processChildren?rx(m.segmentGroup,m.index,s.commands):PD(m.segmentGroup,m.index,s.commands);return lC(t.root,m.segmentGroup,w,n,r)}(i.snapshot?._lastPathIndex)}function nx(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function ix(i){return"object"==typeof i&&null!=i&&i.outlets}function lC(i,t,e,n,r){let a,s={};n&&jd(n,(h,m)=>{s[m]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),a=i===t?e:JN(i,t,e);const u=MD(pI(a));return new C0(u,s,r)}function JN(i,t,e){const n={};return jd(i.children,(r,s)=>{n[s]=r===t?e:JN(r,t,e)}),new Qo(i.segments,n)}class eB{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&nx(n[0]))throw new Qi(4003,!1);const r=n.find(ix);if(r&&r!==GN(n))throw new Qi(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uC{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function PD(i,t,e){if(i||(i=new Qo([],{})),0===i.segments.length&&i.hasChildren())return rx(i,t,e);const n=function bY(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const a=i.segments[r],u=e[n];if(ix(u))break;const h=`${u}`,m=n<e.length-1?e[n+1]:null;if(r>0&&void 0===h)break;if(h&&m&&"object"==typeof m&&void 0===m.outlets){if(!rB(h,m,a))return s;n+=2}else{if(!rB(h,{},a))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new Qo(i.segments.slice(0,n.pathIndex),{});return s.children[Go]=new Qo(i.segments.slice(n.pathIndex),i.children),rx(s,0,r)}return n.match&&0===r.length?new Qo(i.segments,{}):n.match&&!i.hasChildren()?LD(i,t,e):n.match?rx(i,0,r):LD(i,t,e)}function rx(i,t,e){if(0===e.length)return new Qo(i.segments,{});{const n=function yY(i){return ix(i[0])?i[0].outlets:{[Go]:i}}(e),r={};return jd(n,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[a]=PD(i.children[a],t,s))}),jd(i.children,(s,a)=>{void 0===n[a]&&(r[a]=s)}),new Qo(i.segments,r)}}function LD(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(ix(s)){const h=CY(s.outlets);return new Qo(n,h)}if(0===r&&nx(e[0])){n.push(new ex(i.segments[t].path,iB(e[0]))),r++;continue}const a=ix(s)?s.outlets[Go]:`${s}`,u=r<e.length-1?e[r+1]:null;a&&u&&nx(u)?(n.push(new ex(a,iB(u))),r+=2):(n.push(new ex(a,{})),r++)}return new Qo(n,{})}function CY(i){const t={};return jd(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=LD(new Qo([],{}),0,e))}),t}function iB(i){const t={};return jd(i,(e,n)=>t[n]=`${e}`),t}function rB(i,t,e){return i==e.path&&Tv(t,e.parameters)}class b_{constructor(t,e){this.id=t,this.url=e}}class kD extends b_{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class A0 extends b_{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gI extends b_{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sB extends b_{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wY extends b_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xY extends b_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AY extends b_{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class IY extends b_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SY extends b_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EY{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class TY{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class MY{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DY{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PY{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LY{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aB{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oB{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=RD(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=RD(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=OD(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return OD(t,this._root).map(e=>e.value)}}function RD(i,t){if(i===t.value)return t;for(const e of t.children){const n=RD(i,e);if(n)return n}return null}function OD(i,t){if(i===t.value)return[t];for(const e of t.children){const n=OD(i,e);if(n.length)return n.unshift(t),n}return[]}class C_{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function cC(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class lB extends oB{constructor(t,e){super(t),this.snapshot=e,FD(this,t)}toString(){return this.snapshot.toString()}}function uB(i,t){const e=function RY(i,t){const a=new mI([],{},{},"",{},Go,t,null,i.root,-1,{});return new hB("",new C_(a,[]))}(i,t),n=new Mp([new ex("",{})]),r=new Mp({}),s=new Mp({}),a=new Mp({}),u=new Mp(""),h=new w_(n,r,a,u,s,Go,t,e.root);return h.snapshot=e.root,new lB(new C_(h,[]),e)}class w_{constructor(t,e,n,r,s,a,u,h){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=a,this.component=u,this._futureSnapshot=h}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(t=>oC(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(t=>oC(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cB(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function OY(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class mI{constructor(t,e,n,r,s,a,u,h,m,w,T,O){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=a,this.component=u,this.routeConfig=h,this._urlSegment=m,this._lastPathIndex=w,this._correctedLastPathIndex=O??w,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oC(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oC(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hB extends oB{constructor(t,e){super(e),this.url=t,FD(this,e)}toString(){return dB(this._root)}}function FD(i,t){t.value._routerState=i,t.children.forEach(e=>FD(i,e))}function dB(i){const t=i.children.length>0?` { ${i.children.map(dB).join(", ")} } `:"";return`${i.value}${t}`}function ND(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Tv(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),Tv(t.params,e.params)||i.params.next(e.params),function KX(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Tv(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),Tv(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function BD(i,t){const e=Tv(i.params,t.params)&&function tY(i,t){return w0(i,t)&&i.every((e,n)=>Tv(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||BD(i.parent,t.parent))}function sx(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function NY(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return sx(i,n,r);return sx(i,n)})}(i,t,e);return new C_(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(u=>sx(i,u)),a}}const n=function BY(i){return new w_(new Mp(i.url),new Mp(i.params),new Mp(i.queryParams),new Mp(i.fragment),new Mp(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>sx(i,s));return new C_(n,r)}}const zD="ngNavigationCancelingError";function fB(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=x0(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=pB(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function pB(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[zD]=!0,n.cancellationCode=t,e&&(n.url=e),n}function gB(i){return mB(i)&&x0(i.url)}function mB(i){return i&&i[zD]}class zY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ax,this.attachRef=null}}let ax=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new zY,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vI=!1;let VD=(()=>{class i{constructor(e,n,r,s,a){this.parentContexts=e,this.location=n,this.changeDetector=s,this.environmentInjector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new ki,this.deactivateEvents=new ki,this.attachEvents=new ki,this.detachEvents=new ki,this.name=r||Go,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Qi(4012,vI);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Qi(4012,vI);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Qi(4012,vI);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Qi(4013,vI);this._activatedRoute=e;const r=this.location,a=e._futureSnapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,h=new VY(e,u,r.injector);if(n&&function UY(i){return!!i.resolveComponentFactory}(n)){const m=n.resolveComponentFactory(a);this.activated=r.createComponent(m,r.length,h)}else this.activated=r.createComponent(a,{index:r.length,injector:h,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(Tn(ax),Tn(jg),af("name"),Tn(Oo),Tn(jt))},i.\u0275dir=Qs({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class VY{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===w_?this.route:t===ax?this.childContexts:this.parent.get(t,e)}}let vB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=hs({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&Ri(0,"router-outlet")},dependencies:[VD],encapsulation:2}),i})();function _B(i,t){return i.providers&&!i._injector&&(i._injector=kA(i.providers,t,`Route: ${i.path}`)),i._injector??t}function HD(i){const t=i.children&&i.children.map(HD),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Go&&(e.component=vB),e}function Yg(i){return i.outlet||Go}function yB(i,t){const e=i.filter(n=>Yg(n)===t);return e.push(...i.filter(n=>Yg(n)!==t)),e}function bB(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class $Y{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ND(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=cC(e);t.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,r[a],n),delete r[a]}),jd(r,(s,a)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(t,e,a.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=cC(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);if(n&&n.outlet){const a=n.outlet.detach(),u=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:u})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=cC(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=cC(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new LY(s.value.snapshot))}),t.children.length&&this.forwardEvent(new DY(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(ND(r),r===s)if(r.component){const a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,a.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),ND(u.route.value),this.activateChildRoutes(t,null,a.children)}else{const u=bB(r.snapshot),h=u?.get(gr)??null;a.attachRef=null,a.route=r,a.resolver=h,a.injector=u,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}class CB{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class _I{constructor(t,e){this.component=t,this.route=e}}function qY(i,t,e){const n=i._root;return ox(n,t?t._root:null,e,[n.value])}function yI(i,t,e){return(bB(t)??e).get(i)}function ox(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=cC(t);return i.children.forEach(a=>{(function YY(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,a=t?t.value:null,u=e?e.getContext(i.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const h=function KY(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!w0(i.url,t.url);case"pathParamsOrQueryParamsChange":return!w0(i.url,t.url)||!Tv(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!BD(i,t)||!Tv(i.queryParams,t.queryParams);default:return!BD(i,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);h?r.canActivateChecks.push(new CB(n)):(s.data=a.data,s._resolvedData=a._resolvedData),ox(i,t,s.component?u?u.children:null:e,n,r),h&&u&&u.outlet&&u.outlet.isActivated&&r.canDeactivateChecks.push(new _I(u.outlet.component,a))}else a&&lx(t,u,r),r.canActivateChecks.push(new CB(n)),ox(i,null,s.component?u?u.children:null:e,n,r)})(a,s[a.value.outlet],e,n.concat([a.value]),r),delete s[a.value.outlet]}),jd(s,(a,u)=>lx(a,e.getContext(u),r)),r}function lx(i,t,e){const n=cC(i),r=i.value;jd(n,(s,a)=>{lx(s,r.component?t?t.children.getContext(a):null:t,e)}),e.canDeactivateChecks.push(new _I(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function ux(i){return"function"==typeof i}function GD(i){return i instanceof oI||"EmptyError"===i?.name}const bI=Symbol("INITIAL_VALUE");function hC(){return Um(i=>ON(i.map(t=>t.pipe(aC(1),function GX(...i){const t=we(i);return ri((e,n)=>{(t?CD(i,e,t):CD(i,e)).subscribe(n)})}(bI)))).pipe(Oe(t=>{for(const e of t)if(!0!==e){if(e===bI)return bI;if(!1===e||e instanceof C0)return e}return!0}),Xg(t=>t!==bI),aC(1)))}function wB(i){return function rn(...i){return Qt(i)}(Cf(t=>{if(x0(t))throw fB(0,t)}),Oe(t=>!0===t))}const WD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xB(i,t,e,n,r){const s=jD(i,t,e);return s.matched?function fK(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?ta(r.map(a=>{const u=i.get(a),h=function nK(i){return i&&ux(i.canMatch)}(u)?u.canMatch(t,e):u(t,e);return y_(h)})).pipe(hC(),wB()):ta(!0)}(n=_B(t,n),t,e).pipe(Oe(a=>!0===a?s:{...WD})):ta(s)}function jD(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...WD}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||YX)(e,i,t);if(!r)return{...WD};const s={};jd(r.posParams,(u,h)=>{s[h]=u.path});const a=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function CI(i,t,e,n,r="corrected"){if(e.length>0&&function mK(i,t,e){return e.some(n=>wI(i,t,n)&&Yg(n)!==Go)}(i,e,n)){const a=new Qo(t,function gK(i,t,e,n){const r={};r[Go]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Yg(s)!==Go){const a=new Qo([],{});a._sourceSegment=i,a._segmentIndexShift=t.length,r[Yg(s)]=a}return r}(i,t,n,new Qo(e,i.children)));return a._sourceSegment=i,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===e.length&&function vK(i,t,e){return e.some(n=>wI(i,t,n))}(i,e,n)){const a=new Qo(i.segments,function pK(i,t,e,n,r,s){const a={};for(const u of n)if(wI(i,e,u)&&!r[Yg(u)]){const h=new Qo([],{});h._sourceSegment=i,h._segmentIndexShift="legacy"===s?i.segments.length:t.length,a[Yg(u)]=h}return{...r,...a}}(i,t,e,n,i.children,r));return a._sourceSegment=i,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:e}}const s=new Qo(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function wI(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function AB(i,t,e,n){return!!(Yg(i)===n||n!==Go&&wI(t,e,i))&&("**"===i.path||jD(t,i,e).matched)}function IB(i,t,e){return 0===t.length&&!i.children[e]}const xI=!1;class AI{constructor(t){this.segmentGroup=t||null}}class SB{constructor(t){this.urlTree=t}}function cx(i){return sC(new AI(i))}function EB(i){return sC(new SB(i))}class CK{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=CI(this.urlTree.root,[],[],this.config).segmentGroup,e=new Qo(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Go).pipe(Oe(s=>this.createUrlTree(pI(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ev(s=>{if(s instanceof SB)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof AI?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Go).pipe(Oe(r=>this.createUrlTree(pI(r),t.queryParams,t.fragment))).pipe(Ev(r=>{throw r instanceof AI?this.noMatchError(r):r}))}noMatchError(t){return new Qi(4002,xI)}createUrlTree(t,e,n){const r=MD(t);return new C0(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Oe(s=>new Qo([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Ei(r).pipe(v_(s=>{const a=n.children[s],u=yB(e,s);return this.expandSegmentGroup(t,u,a,s).pipe(Oe(h=>({segment:h,outlet:s})))}),xD((s,a)=>(s[a.outlet]=a.segment,s),{}),VN())}expandSegment(t,e,n,r,s,a){return Ei(n).pipe(v_(u=>this.expandSegmentAgainstRoute(t,e,n,u,r,s,a).pipe(Ev(m=>{if(m instanceof AI)return ta(null);throw m}))),gy(u=>!!u),Ev((u,h)=>{if(GD(u))return IB(e,r,s)?ta(new Qo([],{})):cx(e);throw u}))}expandSegmentAgainstRoute(t,e,n,r,s,a,u){return AB(r,e,s,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,a):u&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,a):cx(e):cx(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?EB(s):this.lineralizeSegments(n,s).pipe(gt(a=>{const u=new Qo(a,{});return this.expandSegment(t,u,e,a,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,a){const{matched:u,consumedSegments:h,remainingSegments:m,positionalParamSegments:w}=jD(e,r,s);if(!u)return cx(e);const T=this.applyRedirectCommands(h,r.redirectTo,w);return r.redirectTo.startsWith("/")?EB(T):this.lineralizeSegments(r,T).pipe(gt(O=>this.expandSegment(t,e,n,O.concat(m),a,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=_B(n,t),n.loadChildren?(n._loadedRoutes?ta({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(Oe(u=>(n._loadedRoutes=u.routes,n._loadedInjector=u.injector,new Qo(r,{})))):ta(new Qo(r,{}))):xB(e,n,r,t).pipe(Um(({matched:a,consumedSegments:u,remainingSegments:h})=>a?this.getChildConfig(t=n._injector??t,n,r).pipe(gt(w=>{const T=w.injector??t,O=w.routes,{segmentGroup:W,slicedSegments:te}=CI(e,u,h,O),ue=new Qo(W.segments,W.children);if(0===te.length&&ue.hasChildren())return this.expandChildren(T,O,ue).pipe(Oe(Je=>new Qo(u,Je)));if(0===O.length&&0===te.length)return ta(new Qo(u,{}));const ce=Yg(n)===s;return this.expandSegment(T,ue,O,te,ce?Go:s,!0).pipe(Oe(et=>new Qo(u.concat(et.segments),et.children)))})):cx(e)))}getChildConfig(t,e,n){return e.children?ta({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ta({routes:e._loadedRoutes,injector:e._loadedInjector}):function dK(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?ta(!0):ta(r.map(a=>{const u=i.get(a),h=function QY(i){return i&&ux(i.canLoad)}(u)?u.canLoad(t,e):u(t,e);return y_(h)})).pipe(hC(),wB())}(t,e,n).pipe(gt(r=>r?this.configLoader.loadChildren(t,e).pipe(Cf(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function yK(i){return sC(pB(xI,3))}())):ta({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ta(n);if(r.numberOfChildren>1||!r.children[Go])return sC(new Qi(4e3,xI));r=r.children[Go]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new C0(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return jd(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const u=r.substring(1);n[s]=e[u]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let a={};return jd(e.children,(u,h)=>{a[h]=this.createSegmentGroup(t,u,n,r)}),new Qo(s,a)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Qi(4001,xI);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class xK{}class SK{constructor(t,e,n,r,s,a,u,h){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u,this.urlSerializer=h}recognize(){const t=CI(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Go).pipe(Oe(e=>{if(null===e)return null;const n=new mI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Go,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new C_(n,e),s=new hB(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=cB(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return Ei(Object.keys(n.children)).pipe(v_(r=>{const s=n.children[r],a=yB(e,r);return this.processSegmentGroup(t,a,s,r)}),xD((r,s)=>r&&s?(r.push(...s),r):null),function $X(i,t=!1){return ri((e,n)=>{let r=0;e.subscribe(ni(n,s=>{const a=i(s,r++);(a||t)&&n.next(s),!a&&n.complete()}))})}(r=>null!==r),lI(null),VN(),Oe(r=>{if(null===r)return null;const s=TB(r);return function EK(i){i.sort((t,e)=>t.value.outlet===Go?-1:e.value.outlet===Go?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return Ei(e).pipe(v_(a=>this.processSegmentAgainstRoute(a._injector??t,a,n,r,s)),gy(a=>!!a),Ev(a=>{if(GD(a))return IB(n,r,s)?ta([]):ta(null);throw a}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!AB(e,n,r,s))return ta(null);let a;if("**"===e.path){const u=r.length>0?GN(r).parameters:{},h=DB(n)+r.length;a=ta({snapshot:new mI(r,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,LB(e),Yg(e),e.component??e._loadedComponent??null,e,MB(n),h,kB(e),h),consumedSegments:[],remainingSegments:[]})}else a=xB(n,e,r,t).pipe(Oe(({matched:u,consumedSegments:h,remainingSegments:m,parameters:w})=>{if(!u)return null;const T=DB(n)+h.length;return{snapshot:new mI(h,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,LB(e),Yg(e),e.component??e._loadedComponent??null,e,MB(n),T,kB(e),T),consumedSegments:h,remainingSegments:m}}));return a.pipe(Um(u=>{if(null===u)return ta(null);const{snapshot:h,consumedSegments:m,remainingSegments:w}=u;t=e._injector??t;const T=e._loadedInjector??t,O=function TK(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:W,slicedSegments:te}=CI(n,m,w,O.filter(ce=>void 0===ce.redirectTo),this.relativeLinkResolution);if(0===te.length&&W.hasChildren())return this.processChildren(T,O,W).pipe(Oe(ce=>null===ce?null:[new C_(h,ce)]));if(0===O.length&&0===te.length)return ta([new C_(h,[])]);const ue=Yg(e)===s;return this.processSegment(T,O,W,te,ue?Go:s).pipe(Oe(ce=>null===ce?null:[new C_(h,ce)]))}))}}function MK(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function TB(i){const t=[],e=new Set;for(const n of i){if(!MK(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=TB(n.children);t.push(new C_(n.value,r))}return t.filter(n=>!e.has(n))}function MB(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function DB(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function LB(i){return i.data||{}}function kB(i){return i.resolve||{}}const $D=Symbol("RouteTitle");function RB(i){return"string"==typeof i.title||null===i.title}function qD(i){return Um(t=>{const e=i(t);return e?Ei(e).pipe(Oe(()=>t)):ta(t)})}let OB=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===Go);return n}getResolvedTitleForRoute(e){return e.data[$D]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:function(){return Ml(FB)},providedIn:"root"}),i})(),FB=(()=>{class i extends OB{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(ji(fD))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class NK{}class zK extends class BK{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const XD=new ls("",{providedIn:"root",factory:()=>({})}),YD=new ls("ROUTES");let KD=(()=>{class i{constructor(e,n){this.injector=e,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ta(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=y_(e.loadComponent()).pipe(Cf(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),ID(()=>{this.componentLoaders.delete(e)})),r=new BN(n,()=>new xt).pipe(wD());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ta({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(Oe(u=>{this.onLoadEndListener&&this.onLoadEndListener(n);let h,m,w=!1;Array.isArray(u)?m=u:(h=u.create(e).injector,m=HN(h.get(YD,[],ua.Self|ua.Optional)));return{routes:m.map(HD),injector:h}}),ID(()=>{this.childrenLoaders.delete(n)})),a=new BN(s,()=>new xt).pipe(wD());return this.childrenLoaders.set(n,a),a}loadModuleFactoryOrRoutes(e){return y_(e()).pipe(gt(n=>n instanceof c3||Array.isArray(n)?ta(n):Ei(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(e){return new(e||i)(ji(Eh),ji(LM))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class UK{}class HK{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function GK(i){throw i}function WK(i,t,e){return t.parse("/")}const jK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$K={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function BB(){const i=Ml(YN),t=Ml(ax),e=Ml(qM),n=Ml(Eh),r=Ml(LM),s=Ml(YD,{optional:!0})??[],a=Ml(XD,{optional:!0})??{},u=Ml(FB),h=Ml(OB,{optional:!0}),m=Ml(UK,{optional:!0}),w=Ml(NK,{optional:!0}),T=new Ph(null,i,t,e,n,r,HN(s));return m&&(T.urlHandlingStrategy=m),w&&(T.routeReuseStrategy=w),T.titleStrategy=h??u,function qK(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(a,T),T}let Ph=(()=>{class i{constructor(e,n,r,s,a,u,h){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=h,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xt,this.errorHandler=GK,this.malformedUriErrorHandler=WK,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ta(void 0),this.urlHandlingStrategy=new HK,this.routeReuseStrategy=new zK,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=a.get(KD),this.configLoader.onLoadEndListener=O=>this.triggerEvent(new TY(O)),this.configLoader.onLoadStartListener=O=>this.triggerEvent(new EY(O)),this.ngModule=a.get(m0),this.console=a.get(Fj);const T=a.get(Zo);this.isNgZoneEnabled=T instanceof Zo&&Zo.isInAngularZone(),this.resetConfig(h),this.currentUrlTree=function ZX(){return new C0(new Qo([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=uB(this.currentUrlTree,this.rootComponentType),this.transitions=new Mp({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(Xg(r=>0!==r.id),Oe(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Um(r=>{let s=!1,a=!1;return ta(r).pipe(Cf(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Um(u=>{const h=this.browserUrlTree.toString(),m=!this.navigated||u.extractedUrl.toString()!==h||h!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||m)&&this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return zB(u.source)&&(this.browserUrlTree=u.extractedUrl),ta(u).pipe(Um(T=>{const O=this.transitions.getValue();return n.next(new kD(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),O!==this.transitions.getValue()?Lt:Promise.resolve(T)}),function wK(i,t,e,n){return Um(r=>function bK(i,t,e,n,r){return new CK(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(Oe(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Cf(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function PK(i,t,e,n,r,s){return gt(a=>function IK(i,t,e,n,r,s,a="emptyOnly",u="legacy"){return new SK(i,t,e,n,r,a,u,s).recognize().pipe(Um(h=>null===h?function AK(i){return new Ht(t=>t.error(i))}(new xK):ta(h)))}(i,t,e,a.urlAfterRedirects,n.serialize(a.urlAfterRedirects),n,r,s).pipe(Oe(u=>({...a,targetSnapshot:u}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Cf(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(W,T)}this.browserUrlTree=T.urlAfterRedirects}const O=new wY(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);n.next(O)}));if(m&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:W,source:te,restoredState:ue,extras:ce}=u,Ne=new kD(O,this.serializeUrl(W),te,ue);n.next(Ne);const et=uB(W,this.rootComponentType).snapshot;return ta(r={...u,targetSnapshot:et,urlAfterRedirects:W,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=u.rawUrl,u.resolve(null),Lt}),Cf(u=>{const h=new xY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(h)}),Oe(u=>r={...u,guards:qY(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),function rK(i,t){return gt(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=e;return 0===a.length&&0===s.length?ta({...e,guardsResult:!0}):function sK(i,t,e,n){return Ei(i).pipe(gt(r=>function hK(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ta(s.map(u=>{const h=yI(u,t,r);return y_(function tK(i){return i&&ux(i.canDeactivate)}(h)?h.canDeactivate(i,t,e,n):h(i,t,e,n)).pipe(gy())})).pipe(hC()):ta(!0)}(r.component,r.route,e,t,n)),gy(r=>!0!==r,!0))}(a,n,r,i).pipe(gt(u=>u&&function ZY(i){return"boolean"==typeof i}(u)?function aK(i,t,e,n){return Ei(t).pipe(v_(r=>CD(function lK(i,t){return null!==i&&t&&t(new MY(i)),ta(!0)}(r.route.parent,n),function oK(i,t){return null!==i&&t&&t(new PY(i)),ta(!0)}(r.route,n),function cK(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>function XY(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(a)).filter(a=>null!==a).map(a=>NN(()=>ta(a.guards.map(h=>{const m=yI(h,a.node,e);return y_(function eK(i){return i&&ux(i.canActivateChild)}(m)?m.canActivateChild(n,i):m(n,i)).pipe(gy())})).pipe(hC())));return ta(s).pipe(hC())}(i,r.path,e),function uK(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return ta(!0);const r=n.map(s=>NN(()=>{const a=yI(s,t,e);return y_(function JY(i){return i&&ux(i.canActivate)}(a)?a.canActivate(t,i):a(t,i)).pipe(gy())}));return ta(r).pipe(hC())}(i,r.route,e))),gy(r=>!0!==r,!0))}(n,s,i,t):ta(u)),Oe(u=>({...e,guardsResult:u})))})}(this.ngModule.injector,u=>this.triggerEvent(u)),Cf(u=>{if(r.guardsResult=u.guardsResult,x0(u.guardsResult))throw fB(0,u.guardsResult);const h=new AY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.triggerEvent(h)}),Xg(u=>!!u.guardsResult||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",3),!1)),qD(u=>{if(u.guards.canActivateChecks.length)return ta(u).pipe(Cf(h=>{const m=new IY(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),Um(h=>{let m=!1;return ta(h).pipe(function LK(i,t){return gt(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return ta(e);let s=0;return Ei(r).pipe(v_(a=>function kK(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!RB(r)&&(s[$D]=r.title),function RK(i,t,e,n){const r=function OK(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return ta({});const s={};return Ei(r).pipe(gt(a=>function FK(i,t,e,n){const r=yI(i,t,n);return y_(r.resolve?r.resolve(t,e):r(t,e))}(i[a],t,e,n).pipe(gy(),Cf(u=>{s[a]=u}))),AD(1),function qX(i){return Oe(()=>i)}(s),Ev(a=>GD(a)?Lt:sC(a)))}(s,i,t,n).pipe(Oe(a=>(i._resolvedData=a,i.data=cB(i,e).resolve,r&&RB(r)&&(i.data[$D]=r.title),null)))}(a.route,n,i,t)),Cf(()=>s++),AD(1),gt(a=>s===r.length?ta(e):Lt))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Cf({next:()=>m=!0,complete:()=>{m||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),Cf(h=>{const m=new SY(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}))}),qD(u=>{const h=m=>{const w=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(m.routeConfig).pipe(Cf(T=>{m.component=T}),Oe(()=>{})));for(const T of m.children)w.push(...h(T));return w};return ON(h(u.targetSnapshot.root)).pipe(lI(),aC(1))}),qD(()=>this.afterPreactivation()),Oe(u=>{const h=function FY(i,t,e){const n=sx(i,t._root,e?e._root:void 0);return new lB(n,t)}(this.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return r={...u,targetRouterState:h}}),Cf(u=>{this.currentUrlTree=u.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),this.routerState=u.targetRouterState,"deferred"===this.urlUpdateStrategy&&(u.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,u),this.browserUrlTree=u.urlAfterRedirects)}),((i,t,e)=>Oe(n=>(new $Y(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,u=>this.triggerEvent(u)),Cf({next(){s=!0},complete(){s=!0}}),ID(()=>{s||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ev(u=>{if(a=!0,mB(u)){gB(u)||(this.navigated=!0,this.restoreHistory(r,!0));const h=new gI(r.id,this.serializeUrl(r.extractedUrl),u.message,u.cancellationCode);if(n.next(h),gB(u)){const m=this.urlHandlingStrategy.merge(u.url,this.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zB(r.source)};this.scheduleNavigation(m,"imperative",null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const h=new sB(r.id,this.serializeUrl(r.extractedUrl),u,r.targetSnapshot??void 0);n.next(h);try{r.resolve(this.errorHandler(u))}catch(m){r.reject(m)}}return Lt}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const u={...s};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(r.state=u)}const a=this.parseUrl(e.url);this.scheduleNavigation(a,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(HD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:h}=n,m=r||this.routerState.root,w=h?this.currentUrlTree.fragment:a;let T=null;switch(u){case"merge":T={...this.currentUrlTree.queryParams,...s};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),mY(m,this.currentUrlTree,e,T,w??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=x0(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function XK(i){for(let t=0;t<i.length;t++){if(null==i[t])throw new Qi(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...jK}:!1===n?{...$K}:n,x0(e))return jN(this.currentUrlTree,e,r);const s=this.parseUrl(e);return jN(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new A0(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,s,a){if(this.disposed)return Promise.resolve(!1);let u,h,m;a?(u=a.resolve,h=a.reject,m=a.promise):m=new Promise((O,W)=>{u=O,h=W});const w=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),T=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:w,targetPageId:T,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:u,reject:h,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(O=>Promise.reject(O))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n,r){const s=new gI(e.id,this.serializeUrl(e.extractedUrl),n,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){Aw()},i.\u0275prov=Zr({token:i,factory:function(){return BB()},providedIn:"root"}),i})();function zB(i){return"imperative"!==i}let ZD=(()=>{class i{constructor(e,n,r,s,a){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=a,this.commands=null,this.onChanges=new xt,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const n=this.renderer,r=this.el.nativeElement;null!==e?n.setAttribute(r,"tabindex",e):n.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:p_(this.skipLocationChange),replaceUrl:p_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:p_(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Tn(Ph),Tn(w_),af("tabindex"),Tn(p),Tn($i))},i.\u0275dir=Qs({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,n){1&e&&si("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Tl]}),i})(),dC=(()=>{class i{constructor(e,n,r){this.router=e,this.route=n,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new xt,this.subscription=e.events.subscribe(s=>{s instanceof A0&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,r,s,a){if(0!==e||n||r||s||a||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const u={skipLocationChange:p_(this.skipLocationChange),replaceUrl:p_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,u),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:p_(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Tn(Ph),Tn(w_),Tn(y0))},i.\u0275dir=Qs({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&si("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&xs("target",n.target)("href",n.href,Hd)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Tl]}),i})(),QD=(()=>{class i{constructor(e,n,r,s,a,u){this.router=e,this.element=n,this.renderer=r,this.cdr=s,this.link=a,this.linkWithHref=u,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ki,this.routerEventsSubscription=e.events.subscribe(h=>{h instanceof A0&&this.update()})}ngAfterContentInit(){ta(this.links.changes,this.linksWithHrefs.changes,ta(null)).pipe(Wt()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=Ei(e).pipe(Wt()).subscribe(n=>{this.isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const n=function YK(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,n)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(Tn(Ph),Tn($i),Tn(p),Tn(Oo),Tn(ZD,8),Tn(dC,8))},i.\u0275dir=Qs({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,n,r){if(1&e&&(Yl(r,ZD,5),Yl(r,dC,5)),2&e){let s;jr(s=$r())&&(n.links=s),jr(s=$r())&&(n.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Tl]}),i})();class VB{}let UB=(()=>{class i{constructor(e,n,r,s,a){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Xg(e=>e instanceof A0),v_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=kA(s.providers,e,`Route: ${s.path}`));const a=s._injector??e,u=s._loadedInjector??a;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(a,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(u,s.children??s._loadedRoutes))}return Ei(r).pipe(Wt())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):ta(null);const s=r.pipe(gt(a=>null===a?ta(void 0):(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));return n.loadComponent&&!n._loadedComponent?Ei([s,this.loader.loadComponent(n)]).pipe(Wt()):s})}}return i.\u0275fac=function(e){return new(e||i)(ji(Ph),ji(LM),ji(jt),ji(VB),ji(KD))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const HB=new ls("");let KK=(()=>{class i{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof kD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof A0&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof aB&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new aB(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){Aw()},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const GB=new ls("ROUTER_FORROOT_GUARD"),WB=new ls(""),ZK=[qM,{provide:YN,useClass:ED},{provide:Ph,useFactory:BB},ax,{provide:w_,useFactory:function QK(i){return i.routerState.root},deps:[Ph]},KD];function JK(){return new lF("Router",Ph)}let vy=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[ZK,[],jB(e),{provide:GB,useFactory:iZ,deps:[[Ph,new Bu,new vd]]},{provide:XD,useValue:n||{}},n?.useHash?{provide:y0,useClass:I$}:{provide:y0,useClass:kF},{provide:HB,useFactory:()=>{const i=Ml(Ph),t=Ml(zq),e=Ml(XD);return e.scrollOffset&&t.setOffset(e.scrollOffset),new KK(i,t,e)}},n?.preloadingStrategy?cZ(n.preloadingStrategy):[],{provide:lF,multi:!0,useFactory:JK},n?.initialNavigation?sZ(n):[],[{provide:$B,useFactory:rZ},{provide:eF,multi:!0,useExisting:$B}]]}}static forChild(e){return{ngModule:i,providers:[jB(e)]}}}return i.\u0275fac=function(e){return new(e||i)(ji(GB,8))},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({}),i})();function iZ(i){return"guarded"}function jB(i){return[{provide:YD,multi:!0,useValue:i}]}function rZ(){const i=Ml(Eh);return t=>{const e=i.get(Xw);if(t!==e.components[0])return;const n=i.get(Ph),r=i.get(qB);1===i.get(JD)&&n.initialNavigation(),i.get(WB,null,ua.Optional)?.setUpPreloading(),i.get(HB,null,ua.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const $B=new ls("");function sZ(i){return["disabled"===i.initialNavigation?[{provide:$w,multi:!0,useFactory:()=>{const i=Ml(Ph);return()=>{i.setUpLocationChangeListener()}}},{provide:JD,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:JD,useValue:0},{provide:$w,multi:!0,deps:[Eh],useFactory:i=>{const t=i.get(x$,Promise.resolve(null));let e=!1;return()=>t.then(()=>new Promise(r=>{const s=i.get(Ph),a=i.get(qB);(function n(r){i.get(Ph).events.pipe(Xg(a=>a instanceof A0||a instanceof gI||a instanceof sB),Oe(a=>a instanceof A0||a instanceof gI&&(0===a.code||1===a.code)&&null),Xg(a=>null!==a),aC(1)).subscribe(()=>{r()})})(()=>{r(!0),e=!0}),s.afterPreactivation=()=>(r(!0),e||a.closed?ta(void 0):a),s.initialNavigation()}))}}]:[]]}const qB=new ls("",{factory:()=>new xt}),JD=new ls("",{providedIn:"root",factory:()=>1});function cZ(i){return[UB,{provide:WB,useExisting:UB},{provide:VB,useExisting:i}]}var Br=ae(7489);class ns{static equals(t,e,n){return n?this.resolveFieldData(t,n)===this.resolveFieldData(e,n):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,a,u,n=Array.isArray(t),r=Array.isArray(e);if(n&&r){if((a=t.length)!=e.length)return!1;for(s=a;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(n!=r)return!1;var h=t instanceof Date,m=e instanceof Date;if(h!=m)return!1;if(h&&m)return t.getTime()==e.getTime();var w=t instanceof RegExp,T=e instanceof RegExp;if(w!=T)return!1;if(w&&T)return t.toString()==e.toString();var O=Object.keys(t);if((a=O.length)!==Object.keys(e).length)return!1;for(s=a;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,O[s]))return!1;for(s=a;0!=s--;)if(!this.equalsByValue(t[u=O[s]],e[u]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let n=e.split("."),r=t;for(let s=0,a=n.length;s<a;++s){if(null==r)return null;r=r[n[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,n,r){if(n.length>0){let s=!1;for(let a=0;a<n.length;a++)if(this.findIndexInList(n[a],r)>e){n.splice(a,0,t),s=!0;break}s||n.push(t)}else n.push(t)}static findIndexInList(t,e){let n=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){n=r;break}return n}static contains(t,e){if(null!=t&&e&&e.length)for(let n of e)if(this.equals(t,n))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}}var XB=0;function fC(){return"pr_id_"+ ++XB}var Vu=function hZ(){let i=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,a,u)=>{a&&(a.style.zIndex=String(((s,a)=>{let u=i.length>0?i[i.length-1]:{key:s,value:a},h=u.value+(u.key===s?0:a)+1;return i.push({key:s,value:h}),h})(s,u)))},clear:s=>{s&&((s=>{i=i.filter(a=>a.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const YB=["*"];let $d=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.IN="in",i.LESS_THAN="lt",i.LESS_THAN_OR_EQUAL_TO="lte",i.GREATER_THAN="gt",i.GREATER_THAN_OR_EQUAL_TO="gte",i.BETWEEN="between",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.DATE_IS="dateIs",i.DATE_IS_NOT="dateIsNot",i.DATE_BEFORE="dateBefore",i.DATE_AFTER="dateAfter",i})(),og=(()=>{class i{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[$d.STARTS_WITH,$d.CONTAINS,$d.NOT_CONTAINS,$d.ENDS_WITH,$d.EQUALS,$d.NOT_EQUALS],numeric:[$d.EQUALS,$d.NOT_EQUALS,$d.LESS_THAN,$d.LESS_THAN_OR_EQUAL_TO,$d.GREATER_THAN,$d.GREATER_THAN_OR_EQUAL_TO],date:[$d.DATE_IS,$d.DATE_IS_NOT,$d.DATE_BEFORE,$d.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new xt,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Kc=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.NO_FILTER="noFilter",i.LT="lt",i.LTE="lte",i.GT="gt",i.GTE="gte",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.CLEAR="clear",i.APPLY="apply",i.MATCH_ALL="matchAll",i.MATCH_ANY="matchAny",i.ADD_RULE="addRule",i.REMOVE_RULE="removeRule",i.ACCEPT="accept",i.REJECT="reject",i.CHOOSE="choose",i.UPLOAD="upload",i.CANCEL="cancel",i.DAY_NAMES="dayNames",i.DAY_NAMES_SHORT="dayNamesShort",i.DAY_NAMES_MIN="dayNamesMin",i.MONTH_NAMES="monthNames",i.MONTH_NAMES_SHORT="monthNamesShort",i.FIRST_DAY_OF_WEEK="firstDayOfWeek",i.TODAY="today",i.WEEK_HEADER="weekHeader",i.WEAK="weak",i.MEDIUM="medium",i.STRONG="strong",i.PASSWORD_PROMPT="passwordPrompt",i.EMPTY_MESSAGE="emptyMessage",i.EMPTY_FILTER_MESSAGE="emptyFilterMessage",i})(),hx=(()=>{class i{constructor(){this.requireConfirmationSource=new xt,this.acceptConfirmationSource=new xt,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),dx=(()=>{class i{constructor(){this.filters={startsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=ns.removeAccents(n.toString()).toLocaleLowerCase(r);return ns.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=ns.removeAccents(n.toString()).toLocaleLowerCase(r);return-1!==ns.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=ns.removeAccents(n.toString()).toLocaleLowerCase(r);return-1===ns.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=ns.removeAccents(n.toString()).toLocaleLowerCase(r),a=ns.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==a.indexOf(s,a.length-s.length)},equals:(e,n,r)=>null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():ns.removeAccents(e.toString()).toLocaleLowerCase(r)==ns.removeAccents(n.toString()).toLocaleLowerCase(r)),notEquals:(e,n,r)=>!(null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():ns.removeAccents(e.toString()).toLocaleLowerCase(r)==ns.removeAccents(n.toString()).toLocaleLowerCase(r))),in:(e,n)=>{if(null==n||0===n.length)return!0;for(let r=0;r<n.length;r++)if(ns.equals(e,n[r]))return!0;return!1},between:(e,n)=>null==n||null==n[0]||null==n[1]||null!=e&&(e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]),lt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<n.getTime():e<n),lte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n),gt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>n.getTime():e>n),gte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n),is:(e,n,r)=>this.filters.equals(e,n,r),isNot:(e,n,r)=>this.filters.notEquals(e,n,r),before:(e,n,r)=>this.filters.lt(e,n,r),after:(e,n,r)=>this.filters.gt(e,n,r),dateIs:(e,n)=>null==n||null!=e&&e.toDateString()===n.toDateString(),dateIsNot:(e,n)=>null==n||null!=e&&e.toDateString()!==n.toDateString(),dateBefore:(e,n)=>null==n||null!=e&&e.getTime()<n.getTime(),dateAfter:(e,n)=>null==n||null!=e&&e.getTime()>n.getTime()}}filter(e,n,r,s,a){let u=[];if(e)for(let h of e)for(let m of n){let w=ns.resolveFieldData(h,m);if(this.filters[s](w,r,a)){u.push(h);break}}return u}register(e,n){this.filters[e]=n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),KB=(()=>{class i{constructor(){this.activeItemKeyChange=new xt,this.activeItemKeyChange$=this.activeItemKeyChange.asObservable()}changeKey(e){this.activeItemKey=e,this.activeItemKeyChange.next(this.activeItemKey)}reset(){this.activeItemKey=null,this.activeItemKeyChange.next(this.activeItemKey)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),Hm=(()=>{class i{constructor(){this.messageSource=new xt,this.clearSource=new xt,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),fx=(()=>{class i{constructor(){this.clickSource=new xt,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ZB=(()=>{class i{}return i.AND="and",i.OR="or",i})(),e2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=hs({type:i,selectors:[["p-header"]],ngContentSelectors:YB,decls:1,vars:0,template:function(e,n){1&e&&(Ep(),ch(0))},encapsulation:2}),i})(),EI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=hs({type:i,selectors:[["p-footer"]],ngContentSelectors:YB,decls:1,vars:0,template:function(e,n){1&e&&(Ep(),ch(0))},encapsulation:2}),i})(),Kl=(()=>{class i{constructor(e){this.template=e}getType(){return this.name}}return i.\u0275fac=function(e){return new(e||i)(Tn(Nm))},i.\u0275dir=Qs({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),i})(),Pl=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})(),dZ=(()=>{class i{constructor(){this.dragStartSource=new xt,this.dragStopSource=new xt,this.dragStart$=this.dragStartSource.asObservable(),this.dragStop$=this.dragStopSource.asObservable()}startDrag(e){this.dragStartSource.next(e)}stopDrag(e){this.dragStopSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();class fZ extends ie{constructor(t,e){super()}schedule(t,e=0){return this}}const TI={setInterval(i,t,...e){const{delegate:n}=TI;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=TI;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class QB extends fZ{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return TI.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;TI.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,re(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const t2={now:()=>(t2.delegate||Date).now(),delegate:void 0};class px{constructor(t,e=px.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}px.now=t2.now;class JB extends px{constructor(t,e=px.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const mZ=new class gZ extends JB{}(class pZ extends QB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!=n&&n>0||null==n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});function e4(i,t=Ct){return i=i??yZ,ri((e,n)=>{let r,s=!0;e.subscribe(ni(n,a=>{const u=t(a);(s||!i(r,u))&&(s=!1,r=u,n.next(a))}))})}function yZ(i,t){return i===t}const gx={};function Mv(i,t){if(gx[i]=(gx[i]||0)+1,"function"==typeof t)return n2(i,(...n)=>({...t(...n),type:i}));switch(t?t._as:"empty"){case"empty":return n2(i,()=>({type:i}));case"props":return n2(i,n=>({...n,type:i}));default:throw new Error("Unexpected config.")}}function n2(i,t){return Object.defineProperty(t,"type",{value:i,writable:!1})}const t4="@ngrx/store/init";let pC=(()=>{class i extends Mp{constructor(){super({type:t4})}next(e){if("function"==typeof e)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof e>"u")throw new TypeError("Actions must be objects");if(typeof e.type>"u")throw new TypeError("Actions must have a type property");super.next(e)}complete(){}ngOnDestroy(){super.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const wZ=[pC],n4=new ls("@ngrx/store Internal Root Guard"),r4=new ls("@ngrx/store Internal Initial State"),s2=new ls("@ngrx/store Initial State"),s4=new ls("@ngrx/store Reducer Factory"),a4=new ls("@ngrx/store Internal Reducer Factory Provider"),o4=new ls("@ngrx/store Initial Reducers"),a2=new ls("@ngrx/store Internal Initial Reducers"),l4=new ls("@ngrx/store Store Features"),u4=new ls("@ngrx/store Internal Store Reducers"),o2=new ls("@ngrx/store Internal Feature Reducers"),c4=new ls("@ngrx/store Internal Feature Configs"),h4=new ls("@ngrx/store Internal Store Features"),d4=new ls("@ngrx/store Internal Feature Reducers Token"),f4=new ls("@ngrx/store Feature Reducers"),p4=new ls("@ngrx/store User Provided Meta Reducers"),MI=new ls("@ngrx/store Meta Reducers"),g4=new ls("@ngrx/store Internal Resolved Meta Reducers"),m4=new ls("@ngrx/store User Runtime Checks Config"),v4=new ls("@ngrx/store Internal User Runtime Checks Config"),mx=new ls("@ngrx/store Internal Runtime Checks"),l2=new ls("@ngrx/store Check if Action types are unique");function u2(i,t={}){const e=Object.keys(i),n={};for(let s=0;s<e.length;s++){const a=e[s];"function"==typeof i[a]&&(n[a]=i[a])}const r=Object.keys(n);return function(a,u){a=void 0===a?t:a;let h=!1;const m={};for(let w=0;w<r.length;w++){const T=r[w],W=a[T],te=(0,n[T])(W,u);m[T]=te,h=h||te!==W}return h?m:a}}function _4(...i){return function(t){if(0===i.length)return t;const e=i[i.length-1];return i.slice(0,-1).reduceRight((r,s)=>s(r),e(t))}}function y4(i,t){return Array.isArray(t)&&t.length>0&&(i=_4.apply(null,[...t,i])),(e,n)=>{const r=i(e);return(s,a)=>r(s=void 0===s?n:s,a)}}class c2 extends Ht{}class b4 extends pC{}let DI=(()=>{class i extends Mp{constructor(e,n,r,s){super(s(r,n)),this.dispatcher=e,this.initialState=n,this.reducers=r,this.reducerFactory=s}get currentReducers(){return this.reducers}addFeature(e){this.addFeatures([e])}addFeatures(e){const n=e.reduce((r,{reducers:s,reducerFactory:a,metaReducers:u,initialState:h,key:m})=>{const w="function"==typeof s?function AZ(i){const t=Array.isArray(i)&&i.length>0?_4(...i):e=>e;return(e,n)=>(e=t(e),(r,s)=>e(r=void 0===r?n:r,s))}(u)(s,h):y4(a,u)(s,h);return r[m]=w,r},{});this.addReducers(n)}removeFeature(e){this.removeFeatures([e])}removeFeatures(e){this.removeReducers(e.map(n=>n.key))}addReducer(e,n){this.addReducers({[e]:n})}addReducers(e){this.reducers={...this.reducers,...e},this.updateReducers(Object.keys(e))}removeReducer(e){this.removeReducers([e])}removeReducers(e){e.forEach(n=>{this.reducers=function xZ(i,t){return Object.keys(i).filter(e=>e!==t).reduce((e,n)=>Object.assign(e,{[n]:i[n]}),{})}(this.reducers,n)}),this.updateReducers(e)}updateReducers(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:e})}ngOnDestroy(){this.complete()}}return i.\u0275fac=function(e){return new(e||i)(ji(b4),ji(s2),ji(o4),ji(s4))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const SZ=[DI,{provide:c2,useExisting:DI},{provide:b4,useExisting:pC}];let h2=(()=>{class i extends xt{ngOnDestroy(){this.complete()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=nl(i)))(n||i)}}(),i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const EZ=[h2];class C4 extends Ht{}let w4=(()=>{class i extends Mp{constructor(e,n,r,s){super(s);const u=e.pipe(ct(mZ)).pipe(function vZ(...i){const t=Ye(i);return ri((e,n)=>{const r=i.length,s=new Array(r);let a=i.map(()=>!1),u=!1;for(let h=0;h<r;h++)ve(i[h]).subscribe(ni(n,m=>{s[h]=m,!u&&!a[h]&&(a[h]=!0,(u=a.every(Ct))&&(a=null))},xe));e.subscribe(ni(n,h=>{if(u){const m=[h,...s];n.next(t?t(...m):m)}}))})}(n)),m=u.pipe(xD(TZ,{state:s}));this.stateSubscription=m.subscribe(({state:w,action:T})=>{this.next(w),r.next(T)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return i.INIT=t4,i.\u0275fac=function(e){return new(e||i)(ji(pC),ji(c2),ji(h2),ji(s2))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();function TZ(i={state:void 0},[t,e]){const{state:n}=i;return{state:e(n,t),action:t}}const MZ=[w4,{provide:C4,useExisting:w4}];let Gm=(()=>{class i extends Ht{constructor(e,n,r){super(),this.actionsObserver=n,this.reducerManager=r,this.source=e}select(e,...n){return PZ.call(null,e,...n)(this)}lift(e){const n=new i(this,this.actionsObserver,this.reducerManager);return n.operator=e,n}dispatch(e){this.actionsObserver.next(e)}next(e){this.actionsObserver.next(e)}error(e){this.actionsObserver.error(e)}complete(){this.actionsObserver.complete()}addReducer(e,n){this.reducerManager.addReducer(e,n)}removeReducer(e){this.reducerManager.removeReducer(e)}}return i.\u0275fac=function(e){return new(e||i)(ji(C4),ji(pC),ji(DI))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const DZ=[Gm];function PZ(i,t,...e){return function(r){let s;if("string"==typeof i){const a=[t,...e].filter(Boolean);s=r.pipe(function _Z(...i){const t=i.length;if(0===t)throw new Error("list of properties cannot be empty.");return Oe(e=>{let n=e;for(let r=0;r<t;r++){const s=n?.[i[r]];if(!(typeof s<"u"))return;n=s}return n})}(i,...a))}else{if("function"!=typeof i)throw new TypeError(`Unexpected type '${typeof i}' in select operator, expected 'string' or 'function'`);s=r.pipe(Oe(a=>i(a,t)))}return s.pipe(e4())}}const d2="https://ngrx.io/guide/store/configuration/runtime-checks";function x4(i){return void 0===i}function A4(i){return null===i}function I4(i){return Array.isArray(i)}function S4(i){return"object"==typeof i&&null!==i}function f2(i){return"function"==typeof i}function p2(i,t){return i===t}function zZ(i,t,e){for(let n=0;n<i.length;n++)if(!e(i[n],t[n]))return!0;return!1}function g2(i,t=p2,e=p2){let s,n=null,r=null;return{memoized:function m(){if(void 0!==s)return s.result;if(!n)return r=i.apply(null,arguments),n=arguments,r;if(!zZ(arguments,n,t))return r;const w=i.apply(null,arguments);return n=arguments,e(r,w)?r:(r=w,w)},reset:function a(){n=null,r=null},setResult:function u(w){s={result:w}},clearResult:function h(){s=void 0}}}function VZ(i,t,e,n){if(void 0===e){const s=t.map(a=>a(i));return n.memoized.apply(null,s)}const r=t.map(s=>s(i,e));return n.memoized.apply(null,[...r,e])}function I0(i){return function M4(...i){return function UZ(i,t={stateFn:VZ}){return function(...e){let n=e;if(Array.isArray(n[0])){const[w,...T]=n;n=[...w,...T]}const r=n.slice(0,n.length-1),s=n[n.length-1],a=r.filter(w=>w.release&&"function"==typeof w.release),u=i(function(...w){return s.apply(null,w)}),h=g2(function(w,T){return t.stateFn.apply(null,[w,r,T,u])});return Object.assign(h.memoized,{release:function m(){h.reset(),u.reset(),a.forEach(w=>w.release())},projector:u.memoized,setResult:h.setResult,clearResult:h.clearResult})}}(g2)(...i)}(t=>{const e=t[i];return yF()&&!(i in t)&&console.warn(`@ngrx/store: The feature name "${i}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${i}', ...) or StoreModule.forFeature('${i}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),e},t=>t)}function m2(i){Object.freeze(i);const t=f2(i);return Object.getOwnPropertyNames(i).forEach(e=>{if(!e.startsWith("\u0275")&&function NZ(i,t){return Object.prototype.hasOwnProperty.call(i,t)}(i,e)&&(!t||"caller"!==e&&"callee"!==e&&"arguments"!==e)){const n=i[e];(S4(n)||f2(n))&&!Object.isFrozen(n)&&m2(n)}}),i}function v2(i,t=[]){return(x4(i)||A4(i))&&0===t.length?{path:["root"],value:i}:Object.keys(i).reduce((n,r)=>{if(n)return n;const s=i[r];return function FZ(i){return f2(i)&&i.hasOwnProperty("\u0275cmp")}(s)?n:!(x4(s)||A4(s)||function RZ(i){return"number"==typeof i}(s)||function kZ(i){return"boolean"==typeof i}(s)||function LZ(i){return"string"==typeof i}(s)||I4(s))&&(function E4(i){if(!function OZ(i){return S4(i)&&!I4(i)}(i))return!1;const t=Object.getPrototypeOf(i);return t===Object.prototype||null===t}(s)?v2(s,[...t,r]):{path:[...t,r],value:s})},!1)}function D4(i,t){if(!1===i)return;const e=i.path.join("."),n=new Error(`Detected unserializable ${t} at "${e}". ${d2}#strict${t}serializability`);throw n.value=i.value,n.unserializablePath=e,n}function qZ(i){return yF()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...i}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function XZ({strictActionSerializability:i,strictStateSerializability:t}){return e=>i||t?function jZ(i,t){return function(e,n){t.action(n)&&D4(v2(n),"action");const r=i(e,n);return t.state()&&D4(v2(r),"state"),r}}(e,{action:n=>i&&!_2(n),state:()=>t}):e}function YZ({strictActionImmutability:i,strictStateImmutability:t}){return e=>i||t?function WZ(i,t){return function(e,n){const r=t.action(n)?m2(n):n,s=i(e,r);return t.state()?m2(s):s}}(e,{action:n=>i&&!_2(n),state:()=>t}):e}function _2(i){return i.type.startsWith("@ngrx")}function KZ({strictActionWithinNgZone:i}){return t=>i?function $Z(i,t){return function(e,n){if(t.action(n)&&!Zo.isInAngularZone())throw new Error(`Action '${n.type}' running outside NgZone. ${d2}#strictactionwithinngzone`);return i(e,n)}}(t,{action:e=>i&&!_2(e)}):t}function ZZ(i){return[{provide:v4,useValue:i},{provide:m4,useFactory:QZ,deps:[v4]},{provide:mx,deps:[m4],useFactory:qZ},{provide:MI,multi:!0,deps:[mx],useFactory:YZ},{provide:MI,multi:!0,deps:[mx],useFactory:XZ},{provide:MI,multi:!0,deps:[mx],useFactory:KZ}]}function P4(){return[{provide:l2,multi:!0,deps:[mx],useFactory:JZ}]}function QZ(i){return i}function JZ(i){if(!i.strictActionTypeUniqueness)return;const t=Object.entries(gx).filter(([,e])=>e>1).map(([e])=>e);if(t.length)throw new Error(`Action types are registered more than once, ${t.map(e=>`"${e}"`).join(", ")}. ${d2}#strictactiontypeuniqueness`)}let L4=(()=>{class i{constructor(e,n,r,s,a,u){}}return i.\u0275fac=function(e){return new(e||i)(ji(pC),ji(c2),ji(h2),ji(Gm),ji(n4,8),ji(l2,8))},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({}),i})(),eQ=(()=>{class i{constructor(e,n,r,s,a){this.features=e,this.featureReducers=n,this.reducerManager=r;const u=e.map((h,m)=>{const T=n.shift()[m];return{...h,reducers:T,initialState:k4(h.initialState)}});r.addFeatures(u)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return i.\u0275fac=function(e){return new(e||i)(ji(h4),ji(f4),ji(DI),ji(L4),ji(l2,8))},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({}),i})(),tQ=(()=>{class i{static forRoot(e,n={}){return{ngModule:L4,providers:[{provide:n4,useFactory:aQ,deps:[[Gm,new Bu,new vd]]},{provide:r4,useValue:n.initialState},{provide:s2,useFactory:k4,deps:[r4]},{provide:a2,useValue:e},{provide:u4,useExisting:e instanceof ls?e:a2},{provide:o4,deps:[Eh,a2,[new Zh(u4)]],useFactory:nQ},{provide:p4,useValue:n.metaReducers?n.metaReducers:[]},{provide:g4,deps:[MI,p4],useFactory:sQ},{provide:a4,useValue:n.reducerFactory?n.reducerFactory:u2},{provide:s4,deps:[a4,g4],useFactory:y4},wZ,SZ,EZ,MZ,DZ,ZZ(n.runtimeChecks),P4()]}}static forFeature(e,n,r={}){return{ngModule:eQ,providers:[{provide:c4,multi:!0,useValue:e instanceof Object?{}:r},{provide:l4,multi:!0,useValue:{key:e instanceof Object?e.name:e,reducerFactory:r instanceof ls||!r.reducerFactory?u2:r.reducerFactory,metaReducers:r instanceof ls||!r.metaReducers?[]:r.metaReducers,initialState:r instanceof ls||!r.initialState?void 0:r.initialState}},{provide:h4,deps:[Eh,c4,l4],useFactory:iQ},{provide:o2,multi:!0,useValue:e instanceof Object?e.reducer:n},{provide:d4,multi:!0,useExisting:n instanceof ls?n:o2},{provide:f4,multi:!0,deps:[Eh,o2,[new Zh(d4)]],useFactory:rQ},P4()]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({}),i})();function nQ(i,t){return t instanceof ls?i.get(t):t}function iQ(i,t,e){return e.map((n,r)=>{if(t[r]instanceof ls){const s=i.get(t[r]);return{key:n.key,reducerFactory:s.reducerFactory?s.reducerFactory:u2,metaReducers:s.metaReducers?s.metaReducers:[],initialState:s.initialState}}return n})}function rQ(i,t){return t.map(n=>n instanceof ls?i.get(n):n)}function k4(i){return"function"==typeof i?i():i}function sQ(i,t){return i.concat(t)}function aQ(i){if(i)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function x_(...i){return{reducer:i.pop(),types:i.map(n=>n.type)}}function S0(i,...t){const e=new Map;for(const n of t)for(const r of n.types){const s=e.get(r);e.set(r,s?(u,h)=>n.reducer(s(u,h),h):n.reducer)}return function(n=i,r){const s=e.get(r.type);return s?s(n,r):n}}const vx=Mv("[SysGraph List/API] Retrieve Graphs Success",{_as:"props",_p:void 0}),_x=Mv("[SysGraph List/API] Retrieve Graph Success",{_as:"props",_p:void 0}),y2=I0("graphs"),PI=I0("graph"),lQ=new JB(QB);class dQ extends xt{constructor(t=1/0,e=1/0,n=t2){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:a}=this;e||(n.push(t),!r&&n.push(s.now()+a)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let a=0;a<s.length&&!t.closed;a+=n?1:2)t.next(s[a]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const a=e.now();let u=0;for(let h=1;h<n.length&&n[h]<=a;h+=2)u=h;u&&n.splice(0,u+1)}}}function b2(i,t,e){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=i):n=i??1/0,or({connector:()=>new dQ(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}var R4={},O4={};function fQ(i){for(var t=[],e=0,n=0,r=0;r<i.length;r+=1){var s=R4[i[r]];if(void 0===s)throw new Error("Invalid character ("+i[r]+")");var a=32&s;if(n+=(s&=31)<<e,a)e+=5;else{var u=1&n;n>>>=1,t.push(u?0===n?-2147483648:-n:n),n=e=0}}return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(i,t){R4[i]=t,O4[t]=i});const LI="TOKEN_LOGGER_CONFIG";class pQ{constructor(t){this.config=this._clone(t)}get level(){return this.config.level}get serverLogLevel(){return this.config.serverLogLevel}updateConfig(t){this.config=this._clone(t)}partialUpdateConfig(t){!t||Object.keys(t).forEach(e=>{this.config[e]=t[e]})}getConfig(){return this._clone(this.config)}_clone(t){const e={level:null};return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}}const yx="TOKEN_LOGGER_CONFIG_ENGINE_FACTORY";class gQ{provideConfigEngine(t){return new pQ(t)}}const bx="TOKEN_LOGGER_MAPPER_SERVICE";let mQ=(()=>{class i{constructor(e){this.httpBackend=e,this.sourceMapCache=new Map,this.logPositionCache=new Map}getLogPosition(e,n){const r=this.getStackLine(e);if(!r)return ta({fileName:"",lineNumber:0,columnNumber:0});const s=this.getLocalPosition(r);if(!e.enableSourceMaps)return ta(s);const a=this.getSourceMapLocation(r);return this.getSourceMap(a,s)}getStackLine(e){const n=new Error;try{throw n}catch{try{let s=4;return n.stack.split("\n")[0].includes(".js:")||(s+=1),n.stack.split("\n")[s+(e.proxiedSteps||0)]}catch{return null}}}getLocalPosition(e){const n=e.lastIndexOf("/");let r=e.indexOf(")");r<0&&(r=void 0);const a=e.substring(n+1,r).split(":");return 3===a.length?{fileName:a[0],lineNumber:+a[1],columnNumber:+a[2]}:{fileName:"unknown",lineNumber:0,columnNumber:0}}getTranspileLocation(e){let n=e.indexOf("(");n<0&&(n=e.lastIndexOf("@"),n<0&&(n=e.lastIndexOf(" ")));let r=e.indexOf(")");return r<0&&(r=void 0),e.substring(n+1,r)}getSourceMapLocation(e){const n=this.getTranspileLocation(e),r=n.substring(0,n.lastIndexOf(":"));return r.substring(0,r.lastIndexOf(":"))+".map"}getMapping(e,n){let r=0,s=0,a=0;const u=e.mappings.split(";");for(let h=0;h<u.length;h++){let m=0;const w=u[h].split(",");for(let T=0;T<w.length;T++){const O=fQ(w[T]);if(O.length>=4&&(m+=O[0],r+=O[1],s+=O[2],a+=O[3]),h===n.lineNumber){if(m===n.columnNumber)return{fileName:e.sources[r],lineNumber:s,columnNumber:a};if(T+1===w.length)return{fileName:e.sources[r],lineNumber:s,columnNumber:0}}}}return{fileName:"unknown",lineNumber:0,columnNumber:0}}getSourceMap(e,n){const r=new b0("GET",e),s=`${n.fileName}:${n.lineNumber}:${n.columnNumber}`;if(this.logPositionCache.has(s))return this.logPositionCache.get(s);this.sourceMapCache.has(e)||(this.httpBackend?this.sourceMapCache.set(e,this.httpBackend.handle(r).pipe(Xg(u=>u instanceof rC),Oe(u=>u.body),function hQ(i=1/0){let t;t=i&&"object"==typeof i?i:{count:i};const{count:e=1/0,delay:n,resetOnSuccess:r=!1}=t;return e<=0?Ct:ri((s,a)=>{let h,u=0;const m=()=>{let w=!1;h=s.subscribe(ni(a,T=>{r&&(u=0),a.next(T)},void 0,T=>{if(u++<e){const O=()=>{h?(h.unsubscribe(),h=null,m()):w=!0};if(null!=n){const W="number"==typeof n?function cQ(i=0,t,e=lQ){let n=-1;return null!=t&&(Pe(t)?e=t:n=t),new Ht(r=>{let s=function uQ(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let a=0;return e.schedule(function(){r.closed||(r.next(a++),0<=n?this.schedule(void 0,n):r.complete())},s)})}(n):ve(n(T,u)),te=ni(a,()=>{te.unsubscribe(),O()},()=>{a.complete()});W.subscribe(te)}else O()}else a.error(T)})),w&&(h.unsubscribe(),h=null,m())};m()})}(3),b2(1))):(console.error("NGXLogger : Can't get sourcemap because HttpBackend is not provided. You need to import HttpClientModule"),this.sourceMapCache.set(e,ta(null))));const a=this.sourceMapCache.get(e).pipe(Oe(u=>u?this.getMapping(u,n):n),Ev(()=>ta(n)),b2(1));return this.logPositionCache.set(s,a),a}}return i.\u0275fac=function(e){return new(e||i)(ji(rI,8))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const Cx="TOKEN_LOGGER_METADATA_SERVICE";let vQ=(()=>{class i{constructor(e){this.datePipe=e}computeTimestamp(e){const n=()=>(new Date).toISOString();return e.timestampFormat?this.datePipe?this.datePipe.transform(new Date,e.timestampFormat):(console.error("NGXLogger : Can't use timeStampFormat because DatePipe is not provided. You need to provide DatePipe"),n()):n()}getMetadata(e,n,r,s){const a={level:e,additional:s};return a.message=r&&"function"==typeof r?r():r,a.timestamp=this.computeTimestamp(n),a}}return i.\u0275fac=function(e){return new(e||i)(ji(YF,8))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const wx="TOKEN_LOGGER_RULES_SERVICE";let _Q=(()=>{class i{shouldCallWriter(e,n,r,s){return!n.disableConsoleLogging&&e>=n.level}shouldCallServer(e,n,r,s){return!!n.serverLoggingUrl&&e>=n.serverLogLevel}shouldCallMonitor(e,n,r,s){return this.shouldCallWriter(e,n,r,s)||this.shouldCallServer(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const xx="TOKEN_LOGGER_SERVER_SERVICE";let yQ=(()=>{class i{constructor(e){this.httpBackend=e}secureErrorObject(e){return e?.stack}secureAdditionalParameters(e){return null==e?null:e.map((n,r)=>{try{return n instanceof Error?this.secureErrorObject(n):("object"==typeof n&&JSON.stringify(n),n)}catch{return`The additional[${r}] value could not be parsed using JSON.stringify().`}})}secureMessage(e){try{if(e instanceof Error)return this.secureErrorObject(e);"string"!=typeof e&&(e=JSON.stringify(e,null,2))}catch{e='The provided "message" value could not be parsed with JSON.stringify().'}return e}alterHttpRequest(e){return e}logOnServer(e,n,r){if(!this.httpBackend)return console.error("NGXLogger : Can't log on server because HttpBackend is not provided. You need to import HttpClientModule"),ta(null);let s=new b0("POST",e,n,r||{}),a=ta(s);const u=this.alterHttpRequest(s);return function oQ(i){return!!i&&(i instanceof Ht||ye(i.lift)&&ye(i.subscribe))}(u)?a=u:u?a=ta(u):console.warn("NGXLogger : alterHttpRequest returned an invalid request. Using default one instead"),a.pipe(v_(h=>h?this.httpBackend.handle(h):(console.warn("NGXLogger : alterHttpRequest returned an invalid request (observable). Using default one instead"),this.httpBackend.handle(s))),Xg(h=>h instanceof rC),Oe(h=>h.body))}customiseRequestBody(e){return e}sendToServer(e,n){const r={...e};r.additional=this.secureAdditionalParameters(r.additional),r.message=this.secureMessage(r.message);const s=this.customiseRequestBody(r),a=n.customHttpHeaders||new Sv;a.has("Content-Type")||a.set("Content-Type","application/json"),this.logOnServer(n.serverLoggingUrl,s,{headers:a,params:n.customHttpParams||new __,responseType:n.httpResponseType||"json",withCredentials:n.withCredentials||!1}).pipe(Ev(u=>(console.error("NGXLogger: Failed to log on server",u),sC(u)))).subscribe()}}return i.\u0275fac=function(e){return new(e||i)(ji(rI,8))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();const Ax="TOKEN_LOGGER_WRITER_SERVICE";var dc=(()=>{return(i=dc||(dc={}))[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.LOG=3]="LOG",i[i.WARN=4]="WARN",i[i.ERROR=5]="ERROR",i[i.FATAL=6]="FATAL",i[i.OFF=7]="OFF",dc;var i})();const bQ=["purple","teal","gray","gray","red","red","red"];let CQ=(()=>{class i{constructor(e){this.platformId=e,this.prepareMetaStringFuncs=[this.getTimestampToWrite,this.getLevelToWrite,this.getFileDetailsToWrite,this.getContextToWrite],this.isIE=oD(e)&&navigator&&navigator.userAgent&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.logFunc=this.isIE?this.logIE.bind(this):this.logModern.bind(this)}getTimestampToWrite(e,n){return e.timestamp}getLevelToWrite(e,n){return dc[e.level]}getFileDetailsToWrite(e,n){return!0===n.disableFileDetails?"":`[${e.fileName}:${e.lineNumber}:${e.columnNumber}]`}getContextToWrite(e,n){return n.context?`{${n.context}}`:""}prepareMetaString(e,n){let r="";return this.prepareMetaStringFuncs.forEach(s=>{const a=s(e,n);a&&(r=r+" "+a)}),r.trim()}getColor(e,n){if(e.level!==dc.OFF)return(n.colorScheme??bQ)[e.level]}logIE(e,n,r){const s=e.additional||[];switch(e.level){case dc.WARN:console.warn(`${r} `,e.message,...s);break;case dc.ERROR:case dc.FATAL:console.error(`${r} `,e.message,...s);break;case dc.INFO:console.info(`${r} `,e.message,...s);break;default:console.log(`${r} `,e.message,...s)}}logModern(e,n,r){const s=this.getColor(e,n),a=e.additional||[];switch(e.level){case dc.WARN:console.warn(`%c${r}`,`color:${s}`,e.message,...a);break;case dc.ERROR:case dc.FATAL:console.error(`%c${r}`,`color:${s}`,e.message,...a);break;case dc.INFO:console.info(`%c${r}`,`color:${s}`,e.message,...a);break;case dc.DEBUG:console.debug(`%c${r}`,`color:${s}`,e.message,...a);break;default:console.log(`%c${r}`,`color:${s}`,e.message,...a)}}writeMessage(e,n){const r=this.prepareMetaString(e,n);this.logFunc(e,n,r)}}return i.\u0275fac=function(e){return new(e||i)(ji(iC))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),qd=(()=>{class i{constructor(e,n,r,s,a,u,h){this.metadataService=r,this.ruleService=s,this.mapperService=a,this.writerService=u,this.serverService=h,this.configEngine=n.provideConfigEngine(e)}get level(){return this.configEngine.level}get serverLogLevel(){return this.configEngine.serverLogLevel}trace(e,...n){this._log(dc.TRACE,e,n)}debug(e,...n){this._log(dc.DEBUG,e,n)}info(e,...n){this._log(dc.INFO,e,n)}log(e,...n){this._log(dc.LOG,e,n)}warn(e,...n){this._log(dc.WARN,e,n)}error(e,...n){this._log(dc.ERROR,e,n)}fatal(e,...n){this._log(dc.FATAL,e,n)}setCustomHttpHeaders(e){const n=this.getConfigSnapshot();n.customHttpHeaders=e,this.updateConfig(n)}setCustomParams(e){const n=this.getConfigSnapshot();n.customHttpParams=e,this.updateConfig(n)}setWithCredentialsOptionValue(e){const n=this.getConfigSnapshot();n.withCredentials=e,this.updateConfig(n)}registerMonitor(e){this._loggerMonitor=e}updateConfig(e){this.configEngine.updateConfig(e)}partialUpdateConfig(e){this.configEngine.partialUpdateConfig(e)}getConfigSnapshot(){return this.configEngine.getConfig()}_log(e,n,r=[]){const s=this.configEngine.getConfig(),a=this.ruleService.shouldCallWriter(e,s,n,r),u=this.ruleService.shouldCallServer(e,s,n,r),h=this.ruleService.shouldCallMonitor(e,s,n,r);if(!a&&!u&&!h)return;const m=this.metadataService.getMetadata(e,s,n,r);this.mapperService.getLogPosition(s,m).pipe(aC(1)).subscribe(w=>{w&&(m.fileName=w.fileName,m.lineNumber=w.lineNumber,m.columnNumber=w.columnNumber),h&&this._loggerMonitor&&this._loggerMonitor.onLog(m,s),a&&this.writerService.writeMessage(m,s),u&&this.serverService.sendToServer(m,s)})}}return i.\u0275fac=function(e){return new(e||i)(ji(LI),ji(yx),ji(Cx),ji(wx),ji(bx),ji(Ax),ji(xx))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),wQ=(()=>{class i{constructor(e,n,r,s,a,u,h){this.logger=e,this.configEngineFactory=n,this.metadataService=r,this.ruleService=s,this.mapperService=a,this.writerService=u,this.serverService=h}create(e,n,r,s){return this.getNewInstance({config:e,serverService:n,logMonitor:r,mapperService:s})}getNewInstance(e){const n=new qd(e?.config??this.logger.getConfigSnapshot(),e?.configEngineFactory??this.configEngineFactory,e?.metadataService??this.metadataService,e?.ruleService??this.ruleService,e?.mapperService??this.mapperService,e?.writerService??this.writerService,e?.serverService??this.serverService);return e?.partialConfig&&n.partialUpdateConfig(e.partialConfig),e?.logMonitor&&n.registerMonitor(e.logMonitor),n}}return i.\u0275fac=function(e){return new(e||i)(ji(qd),ji(yx),ji(Cx),ji(wx),ji(bx),ji(Ax),ji(xx))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xQ=(()=>{class i{static forRoot(e,n){if(n||(n={}),n.configProvider){if(n.configProvider.provide!==LI)throw new Error(`Wrong injection token for configProvider, it should be ${LI} and you used ${n.configProvider.provide}`)}else n.configProvider={provide:LI,useValue:e||{}};if(n.configEngineFactoryProvider){if(n.configEngineFactoryProvider.provide!==yx)throw new Error(`Wrong injection token for configEngineFactoryProvider, it should be '${yx}' and you used '${n.configEngineFactoryProvider.provide}'`)}else n.configEngineFactoryProvider={provide:yx,useClass:gQ};if(n.metadataProvider){if(n.metadataProvider.provide!==Cx)throw new Error(`Wrong injection token for metadataProvider, it should be '${Cx}' and you used '${n.metadataProvider.provide}'`)}else n.metadataProvider={provide:Cx,useClass:vQ};if(n.ruleProvider){if(n.ruleProvider.provide!==wx)throw new Error(`Wrong injection token for ruleProvider, it should be '${wx}' and you used '${n.ruleProvider.provide}'`)}else n.ruleProvider={provide:wx,useClass:_Q};if(n.mapperProvider){if(n.mapperProvider.provide!==bx)throw new Error(`Wrong injection token for mapperProvider, it should be '${bx}' and you used '${n.mapperProvider.provide}'`)}else n.mapperProvider={provide:bx,useClass:mQ};if(n.writerProvider){if(n.writerProvider.provide!==Ax)throw new Error(`Wrong injection token for writerProvider, it should be '${Ax}' and you used '${n.writerProvider.provide}'`)}else n.writerProvider={provide:Ax,useClass:CQ};if(n.serverProvider){if(n.serverProvider.provide!==xx)throw new Error(`Wrong injection token for serverProvider, it should be '${xx}' and you used '${n.writerProvider.provide}'`)}else n.serverProvider={provide:xx,useClass:yQ};return{ngModule:i,providers:[qd,n.configProvider,n.configEngineFactoryProvider,n.metadataProvider,n.ruleProvider,n.mapperProvider,n.writerProvider,n.serverProvider,wQ]}}static forChild(){return{ngModule:i}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[[Oa]]}),i})();function N4(i,t,e,n,r,s,a){try{var u=i[s](a),h=u.value}catch(m){return void e(m)}u.done?t(h):Promise.resolve(h).then(n,r)}function A_(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function a(h){N4(s,n,r,a,u,"next",h)}function u(h){N4(s,n,r,a,u,"throw",h)}a(void 0)})}}var B4=ae(5452);class kI{init(t,e,n){this.storage=e,this.logger=n,this.selector=`my-system-${t}`,this.findAll()||this.storage.store(this.selector,[])}findOne(t){let e=this.findAll(),n=Br.find(e,r=>t===r.id);if(n)return this.logger.info(`${this.selector} FINDONE`,n),n}delete(t){let e=this.findAll();return Br.remove(e,n=>t===n.id),this.storage.store(this.selector,e),this.logger.info("DELETE",t),e}store(t,e){let n=this.findAll(),r=Br.find(n,s=>t.id===s.id);return r?(r.id=t.id,e(r),this.logger.info("STORE/UPDATE",r)):(n.push(t),this.logger.info("STORE/INSERT",t)),this.storage.store(this.selector,n),n}findAll(){let t=this.storage.retrieve(this.selector);if(t){let e=JSON.parse(JSON.stringify(t));return this.logger.info(`${this.selector} FINDALL`,e),e}return this.storage.store(this.selector,[]),[]}reset(){return this.logger.info("RESET",this.selector),this.storage.store(this.selector,[]),[]}}var Wm=(()=>{return(i=Wm||(Wm={})).Local="local_strategy",i.Session="session_strategy",i.InMemory="in_memory_strategy",Wm;var i})();function RI(){}let Pv=(()=>{class i{static normalize(e){return e=i.isCaseSensitive?e:e.toLowerCase(),`${i.prefix}${i.separator}${e}`}static isNormalizedKey(e){return 0===e.indexOf(i.prefix+i.separator)}static setPrefix(e){i.prefix=e}static setSeparator(e){i.separator=e}static setCaseSensitive(e){i.isCaseSensitive=e}static consumeConfiguration(e){"prefix"in e&&this.setPrefix(e.prefix),"separator"in e&&this.setSeparator(e.separator),"caseSensitive"in e&&this.setCaseSensitive(e.caseSensitive)}}return i.prefix="ngx-webstorage",i.separator="|",i.isCaseSensitive=!1,i})();class OI{constructor(t){this.strategy=t}retrieve(t){let e;return this.strategy.get(Pv.normalize(t)).subscribe(n=>e=typeof n>"u"?null:n),e}store(t,e){return this.strategy.set(Pv.normalize(t),e).subscribe(RI),e}clear(t){void 0!==t?this.strategy.del(Pv.normalize(t)).subscribe(RI):this.strategy.clear().subscribe(RI)}getStrategyName(){return this.strategy.name}observe(t){return t=Pv.normalize(t),this.strategy.keyChanges.pipe(Xg(e=>null===e||e===t),Um(()=>this.strategy.get(t)),e4(),b2({refCount:!0,bufferSize:1}))}}let C2=(()=>{class i{constructor(){this.caches={}}get(e,n){return this.getCacheStore(e)[n]}set(e,n,r){this.getCacheStore(e)[n]=r}del(e,n){delete this.getCacheStore(e)[n]}clear(e){this.caches[e]={}}getCacheStore(e){return e in this.caches?this.caches[e]:this.caches[e]={}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const z4=new ls("window_local_storage"),MQ={provide:z4,useFactory:function TQ(){return typeof window<"u"?window.localStorage:null}},V4=new ls("window_session_storage"),PQ={provide:V4,useFactory:function DQ(){return typeof window<"u"?window.sessionStorage:null}};class U4{constructor(t,e){this.storage=t,this.cache=e,this.keyChanges=new xt}get isAvailable(){return void 0===this._isAvailable&&(this._isAvailable=class AQ{static isStorageAvailable(t){let e=!0;try{"object"==typeof t?(t.setItem("test-storage","foobar"),t.removeItem("test-storage")):e=!1}catch{e=!1}return e}}.isStorageAvailable(this.storage)),this._isAvailable}get(t){let e=this.cache.get(this.name,t);if(void 0!==e)return ta(e);try{const n=this.storage.getItem(t);null!==n&&(e=JSON.parse(n),this.cache.set(this.name,t,e))}catch(n){console.warn(n)}return ta(e)}set(t,e){const n=JSON.stringify(e);return this.storage.setItem(t,n),this.cache.set(this.name,t,e),this.keyChanges.next(t),ta(e)}del(t){return this.storage.removeItem(t),this.cache.del(this.name,t),this.keyChanges.next(t),ta(null)}clear(){return this.storage.clear(),this.cache.clear(this.name),this.keyChanges.next(null),ta(null)}}class I_ extends U4{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=I_.strategyName,oD(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==e?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}I_.strategyName=Wm.Local,I_.\u0275fac=function(t){return new(t||I_)(ji(z4),ji(C2),ji(iC),ji(Zo))},I_.\u0275prov=Zr({token:I_,factory:I_.\u0275fac});class S_ extends U4{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=S_.strategyName,oD(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==t.key?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}S_.strategyName=Wm.Session,S_.\u0275fac=function(t){return new(t||S_)(ji(V4),ji(C2),ji(iC),ji(Zo))},S_.\u0275prov=Zr({token:S_,factory:S_.\u0275fac});class E_{constructor(t){this.cache=t,this.keyChanges=new xt,this.isAvailable=!0,this.name=E_.strategyName}get(t){return ta(this.cache.get(this.name,t))}set(t,e){return this.cache.set(this.name,t,e),this.keyChanges.next(t),ta(e)}del(t){return this.cache.del(this.name,t),this.keyChanges.next(t),ta(null)}clear(){return this.cache.clear(this.name),this.keyChanges.next(null),ta(null)}}E_.strategyName=Wm.InMemory,E_.\u0275fac=function(t){return new(t||E_)(ji(C2))},E_.\u0275prov=Zr({token:E_,factory:E_.\u0275fac});const FI=new ls("STORAGE_STRATEGIES"),LQ=[{provide:FI,useClass:E_,multi:!0},{provide:FI,useClass:I_,multi:!0},{provide:FI,useClass:S_,multi:!0}],H4="invalid_strategy";let E0=(()=>{class i{constructor(e){this.strategies=e,this.registration$=new xt,e||(e=[]),this.strategies=e.reverse().map((n,r,s)=>n.name).map((n,r,s)=>s.indexOf(n)===r?r:null).filter(n=>null!==n).map(n=>e[n])}static get(e){if(!this.isStrategyRegistered(e))throw Error(H4);let n=this.index[e];return n.isAvailable||(n=this.index[Wm.InMemory]),n}static set(e,n){this.index[e]=n}static clear(e){void 0!==e?delete this.index[e]:this.index={}}static isStrategyRegistered(e){return e in this.index}static hasRegistredStrategies(){return Object.keys(this.index).length>0}getStrategy(e){return i.get(e)}indexStrategies(){this.strategies.forEach(e=>this.register(e.name,e))}indexStrategy(e,n=!1){if(i.isStrategyRegistered(e)&&!n)return i.get(e);const r=this.strategies.find(s=>s.name===e);if(!r)throw new Error(H4);return this.register(e,r,n),r}register(e,n,r=!1){(!i.isStrategyRegistered(e)||r)&&(i.set(e,n),this.registration$.next(e))}}return i.index={},i.\u0275fac=function(e){return new(e||i)(ji(FI,8))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Ix extends OI{}const zQ=[{provide:Ix,useFactory:function RQ(i){const t=i.indexStrategy(Wm.Local);return new OI(t)},deps:[E0]},{provide:class FQ extends OI{},useFactory:function NQ(i){const t=i.indexStrategy(Wm.Session);return new OI(t)},deps:[E0]}],W4=new ls("ngx_webstorage_config");function VQ(i){return i.indexStrategies(),()=>E0.index}let UQ=(()=>{class i{constructor(e,n){n?Pv.consumeConfiguration(n):console.error("NgxWebstorage : Possible misconfiguration (The forRoot method usage is mandatory since the 3.0.0)")}static forRoot(e={}){return{ngModule:i,providers:[{provide:W4,useValue:e},MQ,PQ,...zQ,...LQ,{provide:$w,useFactory:VQ,deps:[E0],multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)(ji(E0),ji(W4,8))},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({}),i})(),NI=(()=>{class i{constructor(){}ascii_to_u8a(e){return new Uint8Array(e.length).map((r,s)=>e.codePointAt(s)??0)}u8a_to_hex(e){let n="";for(const r of e)n+=r.toString(16).padStart(2,"0");return n}hex_to_u8a(e){if(e.length%2)throw new Error("odd string length");const n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const s=e.slice(2*r,2*r+2);n[r]=parseInt(s,16)}return n}u8a_to_ascii(e){let n="";for(const r of e)n+=String.fromCharCode(r);return n}encode(e){return this.u8a_to_hex(this.ascii_to_u8a(e))}decode(e){return this.u8a_to_ascii(this.hex_to_u8a(e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const j4=new B4.Parser;let Sx=(()=>{class i extends kI{constructor(e,n,r,s){super(),this._logger=e,this._storage=n,this.base16=r,this.messageService=s,this.init("graphs",this._storage,this._logger)}outputNodes(e){return Br.map(Br.sortBy(e?.nodes,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,x:n.x,y:n.y,group:void 0===n.group?null:n.group,tag:void 0===n.tag?null:n.tag};return n.parent&&(r.parent=this.base16.decode(n.parent)),n.cdata&&(r.cdata=n.cdata),n.alias&&(r.alias=n.alias),r})}outputEdges(e){return Br.map(Br.sortBy(e?.edges,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,source:this.base16.decode(n.source),target:this.base16.decode(n.target),tag:void 0===n.tag?null:n.tag};return n.cdata&&(r.cdata=n.cdata),r})}computeInstance(e,n){return e[n]?e[n].count++:e[n]={count:1},e[n]}buildId(e,n){let r=this.computeInstance(e,`${n.source}:${n.target}`),s="";return r.count>1&&(s="@"+(r.count-1)),`${n.source}:${n.target}${s}`}toGexf(e){this._logger.info("toGexf",e);let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),n.push('<meta lastmodifieddate="2009-03-20">'),n.push("<creator>Gexf.net</creator>"),n.push("<description>A hello world! file</description>"),n.push("</meta>"),n.push(`<graph mode="static" defaultedgetype="directed" style="${e?.style}" rules="${e?.rules}">`),n.push("<nodes>"),Br.each(Br.sortBy(this.outputNodes(e),"uid"),a=>{let u=" />";a.cdata&&(u=">"),null==a.alias&&(a.alias=""),n.push(null===a.tag?a.parent?`<node id="${a.uid}" parent="${parent}" label="${a.label}" alias="${a.alias}" group="${a.group}" x="${a.x}" y="${a.y}"${u}`:`<node id="${a.uid}" label="${a.label}" alias="${a.alias}" group="${a.group}" x="${a.x}" y="${a.y}"${u}`:a.parent?`<node id="${a.uid}" parent="${a.parent}" label="${a.label}" alias="${a.alias}" group="${a.group}" x="${a.x}" y="${a.y}" tag="${a.tag}"${u}`:`<node id="${a.uid}" label="${a.label}" alias="${a.alias}" group="${a.group}" x="${a.x}" y="${a.y}" tag="${a.tag}"${u}`),a.cdata&&(n.push(`<![CDATA[${a.cdata}]]>`),n.push("</node>"))}),n.push("</nodes>"),n.push("<edges>");let r=Br.map(this.outputEdges(e),a=>(a.uid=`${a.source}:${a.target}`,a)),s={};return Br.each(Br.sortBy(r,"uid"),a=>{let u=" />";a.cdata&&(u=">"),n.push(null===a.tag?`<edge id="${this.buildId(s,a)}" source="${a.source}" target="${a.target}" label="${a.label}"${u}`:`<edge id="${this.buildId(s,a)}" source="${a.source}" target="${a.target}" label="${a.label}" tag="${a.tag}"${u}`),a.cdata&&(n.push(`<![CDATA[${a.cdata}]]>`),n.push("</edge>"))}),n.push("</edges>"),n.push("</graph>"),n.push("</gexf>"),n}toGraphml(e){let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">'),n.push(`<graph id="G" edgedefault="undirected" style="${e?.style}">`),Br.each(this.outputNodes(e),s=>{let a=" />";s.cdata&&(a=">"),n.push(null===s.tag?s.parent?`<node id="${s.uid}" parent="${parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${a}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${a}`:s.parent?`<node id="${s.uid}" parent="${s.parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${a}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${a}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</node>"))});let r={};return Br.each(this.outputEdges(e),s=>{let a=" />";s.cdata&&(a=">"),n.push(null===s.tag?`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}"${a}`:`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}" tag="${s.tag}"${a}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</edge>"))}),n.push("</graph>"),n.push("</graphml>"),n}filterCDATA(e){if(e){let n="";for(let r=1;r<e.length-1;r++)n+=e.charAt(r);return n}}loadGraphGexf(e,n,r){var s=this;return A_(function*(){return s._logger.info(`loadGraphGexf: ${e}`),new Promise(a=>{j4.parseString(r,(u,h)=>{if(u)throw s._logger.error(u),u;let m={id:e,style:"default",rules:"default",label:n,nodes:[],edges:[]};Br.each(h.gexf.graph,w=>{m.style=w.$.style,m.rules=w.$.rules;let T={};s._logger.info("loading nodes",w.nodes),Br.each(w.nodes,O=>{Br.each(O.node,W=>{let te={id:s.base16.encode(W.$.id),x:parseFloat(W.$.x),y:parseFloat(W.$.y),cdata:s.filterCDATA(W._),alias:W.$.alias?W.$.alias:"",label:W.$.label?W.$.label:"",group:W.$.group?W.$.group:"",tag:W.$.tag?W.$.tag:""};T[te.id]=!0,W.$.parent&&(te.parent=s.base16.encode(W.$.parent)),m.nodes.push(te)})}),s._logger.info("loading edges",w.edges),Br.each(w.edges,O=>{Br.each(O.edge,W=>{let te={id:s.base16.encode(W.$.id),source:s.base16.encode(W.$.source),target:s.base16.encode(W.$.target),cdata:s.filterCDATA(W._),label:W.$.label?W.$.label:"",tag:W.$.tag?W.$.tag:""};if(!T[te.source])throw s._logger.error("source unkown",W.$),new Error(`source unkown ${W.$.source}`);if(!T[te.target])throw s._logger.error("target unkown",W.$),new Error(`target unkown ${W.$.target}`);m.edges.push(te)})})}),s._logger.info(m),a(m)})})})()}extractMlData(e,n){let r=Br.find(e.data,s=>{if(s.$.key===n)return s});return r?r._:0}loadGraphMl(e,n,r){var s=this;return A_(function*(){return s._logger.info(`loadGraphMl: ${e}`),new Promise(a=>{j4.parseString(r,(u,h)=>{if(u)throw u;let m={id:e,style:"default",rules:"default",label:n,nodes:[],edges:[]},w=[];Br.each(h.graphml.graph.key,T=>{w.push({label:T.id,type:T["attr.type"]})}),Br.each(h.graphml.graph,T=>{Br.each(T.node,O=>{let W={id:O.$.id,label:s.extractMlData(O,"tooltip"),x:parseFloat(s.extractMlData(O,"x")),y:parseFloat(s.extractMlData(O,"y"))};m.nodes.push(W)}),Br.each(T.edge,O=>{m.edges.push({id:O.$.id,label:"default",source:O.$.source,target:O.$.target})})}),a(m)})})})()}uploadHandler(e,n,r){var s=this;return new Promise(a=>{let u=new FileReader;u.addEventListener("loadend",A_(function*(){let h=new String(u.result),m={id:n,style:"default",rules:"default",label:r,nodes:[],edges:[]};h.includes('xmlns="http://gexf')&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GEXF file to ${r}`}),m=yield s.loadGraphGexf(n,r,h.toString())),h.includes("http://graphml.graphdrawing.org")&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GRAPHML file to ${r}`}),m=yield s.loadGraphMl(n,r,h.toString())),0==m.nodes.length&&s.messageService.add({severity:"warn",summary:"warn",detail:`No node for ${r}`}),a(m)})),u.readAsText(e)})}}return i.\u0275fac=function(e){return new(e||i)(ji(qd),ji(Ix),ji(NI),ji(Hm))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),BI=(()=>{class i{constructor(e){this.logger=e}fallbackCopyTextToClipboard(e){var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{var r=document.execCommand("copy");this.logger.info("Fallback: Copying text command was "+(r?"successful":"unsuccessful"))}catch(a){this.logger.error("Fallback: Oops, unable to copy",a)}document.body.removeChild(n)}copyTextToClipboard(e){navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{this.logger.info("Async: Copying to clipboard was successful!")},n=>{this.logger.error("Async: Could not copy text: ",n)}):this.fallbackCopyTextToClipboard(e)}}return i.\u0275fac=function(e){return new(e||i)(ji(qd))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$4=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(Tn(p),Tn($i))},i.\u0275dir=Qs({type:i}),i})(),T0=(()=>{class i extends $4{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=nl(i)))(n||i)}}(),i.\u0275dir=Qs({type:i,features:[cu]}),i})();const Mc=new ls("NgValueAccessor"),WQ={provide:Mc,useExisting:Xr(()=>M0),multi:!0},$Q=new ls("CompositionEventMode");let M0=(()=>{class i extends $4{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jQ(){const i=Iv()?Iv().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(Tn(p),Tn($i),Tn($Q,8))},i.\u0275dir=Qs({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&si("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Ro([WQ]),cu]}),i})();const wf=new ls("NgValidators"),yy=new ls("NgAsyncValidators");function r5(i){return null!=i}function s5(i){return Ow(i)?Ei(i):i}function a5(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function o5(i,t){return t.map(e=>e(i))}function l5(i){return i.map(t=>function YQ(i){return!i.validate}(t)?t:e=>t.validate(e))}function w2(i){return null!=i?function u5(i){if(!i)return null;const t=i.filter(r5);return 0==t.length?null:function(e){return a5(o5(e,t))}}(l5(i)):null}function x2(i){return null!=i?function c5(i){if(!i)return null;const t=i.filter(r5);return 0==t.length?null:function(e){return function HQ(...i){const t=Ye(i),{args:e,keys:n}=LN(i),r=new Ht(s=>{const{length:a}=e;if(!a)return void s.complete();const u=new Array(a);let h=a,m=a;for(let w=0;w<a;w++){let T=!1;ve(e[w]).subscribe(ni(s,O=>{T||(T=!0,m--),u[w]=O},()=>h--,void 0,()=>{(!h||!T)&&(m||s.next(n?RN(n,u):u),s.complete())}))}});return t?r.pipe(kN(t)):r}(o5(e,t).map(s5)).pipe(Oe(a5))}}(l5(i)):null}function h5(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function A2(i){return i?Array.isArray(i)?i:[i]:[]}function VI(i,t){return Array.isArray(i)?i.includes(t):i===t}function p5(i,t){const e=A2(t);return A2(i).forEach(r=>{VI(e,r)||e.push(r)}),e}function g5(i,t){return A2(t).filter(e=>!VI(i,e))}class m5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=w2(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=x2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class np extends m5{get formDirective(){return null}get path(){return null}}class Lv extends m5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let D0=(()=>{class i extends class v5{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(Tn(Lv,2))},i.\u0275dir=Qs({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&ag("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[cu]}),i})();const Ex="VALID",HI="INVALID",gC="PENDING",Tx="DISABLED";function y5(i){return Array.isArray(i)?w2(i):i||null}function b5(i){return Array.isArray(i)?x2(i):i||null}function GI(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function Mx(i,t){(function P2(i,t){const e=function d5(i){return i._rawValidators}(i);null!==t.validator?i.setValidators(h5(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=function f5(i){return i._rawAsyncValidators}(i);null!==t.asyncValidator?i.setAsyncValidators(h5(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();$I(t._rawValidators,r),$I(t._rawAsyncValidators,r)})(i,t),t.valueAccessor.writeValue(i.value),i.disabled&&t.valueAccessor.setDisabledState?.(!0),function sJ(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&A5(i,t)})}(i,t),function oJ(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function aJ(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&A5(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function rJ(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function $I(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function A5(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function T5(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function M5(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const gJ={provide:Lv,useExisting:Xr(()=>kv)},k5=(()=>Promise.resolve(null))();let kv=(()=>{class i extends Lv{constructor(e,n,r,s,a){super(),this._changeDetectorRef=a,this.control=new class extends class x5{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=y5(this._rawValidators),this._composedAsyncValidatorFn=b5(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ex}get invalid(){return this.status===HI}get pending(){return this.status==gC}get disabled(){return this.status===Tx}get enabled(){return this.status!==Tx}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=y5(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=b5(t)}addValidators(t){this.setValidators(p5(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(p5(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(g5(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(g5(t,this._rawAsyncValidators))}hasValidator(t){return VI(this._rawValidators,t)}hasAsyncValidator(t){return VI(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=gC,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Tx,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ex,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ex||this.status===gC)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tx:Ex}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=gC,this._hasOwnPendingAsyncValidator=!0;const e=s5(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ki,this.statusChanges=new ki}_calculateStatus(){return this._allControlsDisabled()?Tx:this.errors?HI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gC)?gC:this._anyControlsHaveStatus(HI)?HI:Ex}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){GI(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,n){super(function T2(i){return(GI(i)?i.validators:i)||null}(e),function M2(i,t){return(GI(t)?t.asyncValidators:i)||null}(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),GI(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=M5(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){T5(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){T5(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){M5(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new ki,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function k2(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===M0?e=s:function cJ(i){return Object.getPrototypeOf(i.constructor)===T0}(s)?n=s:r=s}),r||n||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function L2(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Mx(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){k5.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&p_(n);k5.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function WI(i,t){return[...t.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(Tn(np,9),Tn(wf,10),Tn(yy,10),Tn(Mc,10),Tn(Oo,8))},i.\u0275dir=Qs({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ro([gJ]),cu,Tl]}),i})(),O5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({}),i})(),VJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[O5]}),i})(),XI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[VJ]}),i})();class J5{}const T_="*";function M_(i,t){return{type:7,name:i,definitions:t,options:{}}}function Dc(i,t=null){return{type:4,styles:t,timings:i}}function ez(i,t=null){return{type:2,steps:i,options:t}}function du(i){return{type:6,styles:i,offset:null}}function L0(i,t,e){return{type:0,name:i,styles:t,options:e}}function Lh(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function mC(i,t=null){return{type:8,animation:i,options:t}}function GJ(i=null){return{type:9,options:i}}function tz(i,t=null){return{type:10,animation:i,options:t}}function WJ(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function nz(i){Promise.resolve(null).then(i)}class Px{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){nz(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class iz{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?nz(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++e==s&&this._onFinish()}),a.onDestroy(()=>{++n==s&&this._onDestroy()}),a.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,u)=>Math.max(a,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}let bn=(()=>{class i{static addClass(e,n){e.classList?e.classList.add(n):e.className+=" "+n}static addMultipleClasses(e,n){if(e.classList){let r=n.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=n.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,n){return e.classList?e.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(n){return n!==e})}static find(e,n){return Array.from(e.querySelectorAll(n))}static findSingle(e,n){return e?e.querySelector(n):null}static index(e){let n=e.parentNode.childNodes,r=0;for(var s=0;s<n.length;s++){if(n[s]==e)return r;1==n[s].nodeType&&r++}return-1}static indexWithinGroup(e,n){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var a=0;a<r.length;a++){if(r[a]==e)return s;r[a].attributes&&r[a].attributes[n]&&1==r[a].nodeType&&s++}return-1}static relativePosition(e,n){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=n.offsetHeight,a=n.getBoundingClientRect(),u=this.getViewport();let h,m;a.top+s+r.height>u.height?(h=-1*r.height,e.style.transformOrigin="bottom",a.top+h<0&&(h=-1*a.top)):(h=s,e.style.transformOrigin="top"),m=r.width>u.width?-1*a.left:a.left+r.width>u.width?-1*(a.left+r.width-u.width):0,e.style.top=h+"px",e.style.left=m+"px"}static absolutePosition(e,n){let W,te,r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,a=r.width,u=n.offsetHeight,h=n.offsetWidth,m=n.getBoundingClientRect(),w=this.getWindowScrollTop(),T=this.getWindowScrollLeft(),O=this.getViewport();m.top+u+s>O.height?(W=m.top+w-s,e.style.transformOrigin="bottom",W<0&&(W=w)):(W=u+m.top+w,e.style.transformOrigin="top"),te=m.left+a>O.width?Math.max(0,m.left+T+h-a):m.left+T,e.style.top=W+"px",e.style.left=te+"px"}static getParents(e,n=[]){return null===e.parentNode?n:this.getParents(e.parentNode,n.concat([e.parentNode]))}static getScrollableParents(e){let n=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,a=u=>{let h=window.getComputedStyle(u,null);return s.test(h.getPropertyValue("overflow"))||s.test(h.getPropertyValue("overflowX"))||s.test(h.getPropertyValue("overflowY"))};for(let u of r){let h=1===u.nodeType&&u.dataset.scrollselectors;if(h){let m=h.split(",");for(let w of m){let T=this.findSingle(u,w);T&&a(T)&&n.push(T)}}9!==u.nodeType&&a(u)&&n.push(u)}}return n}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementDimensions(e){let n={};return e.style.visibility="hidden",e.style.display="block",n.width=e.offsetWidth,n.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",n}static scrollInView(e,n){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,a=getComputedStyle(e).getPropertyValue("paddingTop"),u=a?parseFloat(a):0,h=e.getBoundingClientRect(),w=n.getBoundingClientRect().top+document.body.scrollTop-(h.top+document.body.scrollTop)-s-u,T=e.scrollTop,O=e.clientHeight,W=this.getOuterHeight(n);w<0?e.scrollTop=T+w:w+W>O&&(e.scrollTop=T+w-O+W)}static fadeIn(e,n){e.style.opacity=0;let r=+new Date,s=0,a=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/n,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(a)||setTimeout(a,16))};a()}static fadeOut(e,n){var r=1,u=50/n;let h=setInterval(()=>{(r-=u)<=0&&(r=0,clearInterval(h)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)}).call(e,n)}static getOuterWidth(e,n){let r=e.offsetWidth;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let n=getComputedStyle(e);return parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)}static getHorizontalMargin(e){let n=getComputedStyle(e);return parseFloat(n.marginLeft)+parseFloat(n.marginRight)}static innerWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static width(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static getInnerHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n}static getOuterHeight(e,n){let r=e.offsetHeight;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),n}static getWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),n}static getViewport(){let e=window,n=document,r=n.documentElement,s=n.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var n=e.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,n){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(n,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,n){if(this.isElement(n))n.appendChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot append "+n+" to "+e;n.el.nativeElement.appendChild(e)}}static removeChild(e,n){if(this.isElement(n))n.removeChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot remove "+e+" from "+n;n.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let n=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let n=document.createElement("div");n.className="p-scrollbar-measure",document.body.appendChild(n);let r=n.offsetWidth-n.clientWidth;return document.body.removeChild(n),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=n,n}static invokeElementMethod(e,n,r){e[n].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let n=i.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of n)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return i.zindex=1e3,i.calculatedScrollbarWidth=null,i.calculatedScrollbarHeight=null,i})();class Lx{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=bn.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let Rv=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?bn.appendChild(this.container,this.el.nativeElement):bn.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),bn.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Vu.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Vu.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+bn.getWindowScrollLeft(),top:e.top+bn.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),n=e.left+bn.getOuterWidth(this.el.nativeElement),r=e.top+(bn.getOuterHeight(this.el.nativeElement)-bn.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),n=e.left-bn.getOuterWidth(this.container),r=e.top+(bn.getOuterHeight(this.el.nativeElement)-bn.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),n=e.left+(bn.getOuterWidth(this.el.nativeElement)-bn.getOuterWidth(this.container))/2,r=e.top-bn.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),n=e.left+(bn.getOuterWidth(this.el.nativeElement)-bn.getOuterWidth(this.container))/2,r=e.top+bn.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return bn.hasClass(e,"p-inputwrapper")?bn.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let e=this.container.getBoundingClientRect(),n=e.top,r=e.left,s=bn.getOuterWidth(this.container),a=bn.getOuterHeight(this.container),u=bn.getViewport();return r+s>u.width||r<0||n<0||n+a>u.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Lx(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):bn.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Vu.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(Zo),Tn(og))},i.\u0275dir=Qs({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[Tl]}),i})(),Ov=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();const jJ=["element"],$J=["content"];function qJ(i,t){1&i&&Nr(0)}const H2=function(i,t){return{$implicit:i,options:t}};function XJ(i,t){if(1&i&&(js(0),At(1,qJ,1,0,"ng-container",7),$s()),2&i){const e=Ze(2);tt(1),He("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",fa(2,H2,e.loadedItems,e.getContentOptions()))}}function YJ(i,t){1&i&&Nr(0)}function KJ(i,t){if(1&i&&(js(0),At(1,YJ,1,0,"ng-container",7),$s()),2&i){const e=t.$implicit,n=t.index,r=Ze(3);tt(1),He("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",fa(2,H2,e,r.getOptions(n)))}}const ZJ=function(i){return{"p-scroller-loading":i}};function QJ(i,t){if(1&i&&(Pt(0,"div",8,9),At(2,KJ,2,5,"ng-container",10),Nt()),2&i){const e=Ze(2);He("ngClass",yr(4,ZJ,e.d_loading))("ngStyle",e.contentStyle),tt(2),He("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function JJ(i,t){1&i&&Ri(0,"div",11),2&i&&He("ngStyle",Ze(2).spacerStyle)}function eee(i,t){1&i&&Nr(0)}const tee=function(i){return{numCols:i}},rz=function(i){return{options:i}};function nee(i,t){if(1&i&&(js(0),At(1,eee,1,0,"ng-container",7),$s()),2&i){const e=t.index,n=Ze(4);tt(1),He("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",yr(4,rz,n.getLoaderOptions(e,n.both&&yr(2,tee,n._numItemsInViewport.cols))))}}function iee(i,t){if(1&i&&(js(0),At(1,nee,2,6,"ng-container",14),$s()),2&i){const e=Ze(3);tt(1),He("ngForOf",e.loaderArr)}}function ree(i,t){1&i&&Nr(0)}const see=function(){return{styleClass:"p-scroller-loading-icon"}};function aee(i,t){if(1&i&&(js(0),At(1,ree,1,0,"ng-container",7),$s()),2&i){const e=Ze(4);tt(1),He("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",yr(3,rz,mo(2,see)))}}function oee(i,t){1&i&&Ri(0,"i",16)}function lee(i,t){if(1&i&&(At(0,aee,2,5,"ng-container",0),At(1,oee,1,0,"ng-template",null,15,hc)),2&i){const e=_o(2);He("ngIf",Ze(3).loaderIconTemplate)("ngIfElse",e)}}const uee=function(i){return{"p-component-overlay":i}};function cee(i,t){if(1&i&&(Pt(0,"div",12),At(1,iee,2,1,"ng-container",0),At(2,lee,3,2,"ng-template",null,13,hc),Nt()),2&i){const e=_o(3),n=Ze(2);He("ngClass",yr(3,uee,!n.loaderTemplate)),tt(1),He("ngIf",n.loaderTemplate)("ngIfElse",e)}}const hee=function(i,t){return{"p-scroller":!0,"p-both-scroll":i,"p-horizontal-scroll":t}};function dee(i,t){if(1&i){const e=vr();js(0),Pt(1,"div",2,3),si("scroll",function(r){return gn(e),vn(Ze().onContainerScroll(r))}),At(3,XJ,2,5,"ng-container",0),At(4,QJ,3,6,"ng-template",null,4,hc),At(6,JJ,1,1,"div",5),At(7,cee,4,5,"div",6),Nt(),$s()}if(2&i){const e=_o(5),n=Ze();tt(1),Us(n._styleClass),He("ngStyle",n._style)("ngClass",fa(10,hee,n.both,n.horizontal)),xs("id",n._id)("tabindex",n.tabindex),tt(2),He("ngIf",n.contentTemplate)("ngIfElse",e),tt(3),He("ngIf",n._showSpacer),tt(1),He("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function fee(i,t){1&i&&Nr(0)}const pee=function(i,t){return{rows:i,columns:t}};function gee(i,t){if(1&i&&(js(0),At(1,fee,1,0,"ng-container",7),$s()),2&i){const e=Ze(2);tt(1),He("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",fa(5,H2,e.items,fa(2,pee,e._items,e.loadedColumns)))}}function mee(i,t){if(1&i&&(ch(0),At(1,gee,2,8,"ng-container",17)),2&i){const e=Ze();tt(1),He("ngIf",e.contentTemplate)}}const vee=["*"];let kx=(()=>{class i{constructor(e,n){this.cd=e,this.zone=n,this.onLazyLoad=new ki,this.onScroll=new ki,this.onScrollIndexChange=new ki,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._delay=0,this._resizeDelay=10,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1,this._disabled||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([n,r])=>this[`_${n}`]!==r&&(this[`_${n}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}ngOnInit(){this.setInitialState()}ngOnChanges(e){let n=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,n=!0)}if(this.initialized&&!n&&(e.items||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init(),e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.setContentEl(this.contentEl),this.init(),this.defaultWidth=bn.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=bn.getHeight(this.elementViewChild.nativeElement),this.initialized=!0}ngAfterViewChecked(){this.calculateAutoSize()}ngOnDestroy(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||bn.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems}getElementRef(){return this.elementViewChild}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,n="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),a=(m=0,w)=>m<=w?0:m,u=(m,w,T)=>m*w+T,h=(m=0,w=0)=>this.scrollTo({left:m,top:w,behavior:n});if(this.both){const m={rows:a(e[0],r[0]),cols:a(e[1],r[1])};(m.rows!==this.first.rows||m.cols!==this.first.cols)&&h(u(m.cols,this._itemSize[1],s.left),u(m.rows,this._itemSize[0],s.top))}else{const m=a(e,r);m!==this.first&&(this.horizontal?h(u(m,this._itemSize,s.left),0):h(0,u(m,this._itemSize,s.top)))}}scrollInView(e,n,r="auto"){if(n){const{first:s,viewport:a}=this.getRenderedRange(),u=(w=0,T=0)=>this.scrollTo({left:w,top:T,behavior:r}),m="to-end"===n;if("to-start"===n){if(this.both)a.first.rows-s.rows>e[0]?u(a.first.cols*this._itemSize[1],(a.first.rows-1)*this._itemSize[0]):a.first.cols-s.cols>e[1]&&u((a.first.cols-1)*this._itemSize[1],a.first.rows*this._itemSize[0]);else if(a.first-s>e){const w=(a.first-1)*this._itemSize;this.horizontal?u(w,0):u(0,w)}}else if(m)if(this.both)a.last.rows-s.rows<=e[0]+1?u(a.first.cols*this._itemSize[1],(a.first.rows+1)*this._itemSize[0]):a.last.cols-s.cols<=e[1]+1&&u((a.first.cols+1)*this._itemSize[1],a.first.rows*this._itemSize[0]);else if(a.last-s<=e+1){const w=(a.first+1)*this._itemSize;this.horizontal?u(w,0):u(0,w)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,a)=>Math.floor(s/(a||s));let n=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:a}=this.elementViewChild.nativeElement;this.both?(n={rows:e(s,this._itemSize[0]),cols:e(a,this._itemSize[1])},r={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols}):(n=e(this.horizontal?a:s,this._itemSize),r=n+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:n,last:r}}}calculateNumItems(){const e=this.getContentPosition(),n=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(m,w)=>Math.ceil(m/(w||m)),a=m=>Math.ceil(m/2),u=this.both?{rows:s(r,this._itemSize[0]),cols:s(n,this._itemSize[1])}:s(this.horizontal?n:r,this._itemSize);return{numItemsInViewport:u,numToleratedItems:this.d_numToleratedItems||(this.both?[a(u.rows),a(u.cols)]:a(u))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),r=(u,h,m,w=!1)=>this.getLast(u+h+(u<m?2:3)*m,w),s=this.first,a=this.both?{rows:r(this.first.rows,e.rows,n[0]),cols:r(this.first.cols,e.cols,n[1],!0)}:r(this.first,e,n);this.last=a,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&this.handleEvents("onLazyLoad",{first:s,last:a})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:n}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(n<this.defaultHeight?n:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),n=parseInt(e.paddingLeft,10)+Math.max(parseInt(e.left,10),0),r=parseInt(e.paddingRight,10)+Math.max(parseInt(e.right,10),0),s=parseInt(e.paddingTop,10)+Math.max(parseInt(e.top,10),0),a=parseInt(e.paddingBottom,10)+Math.max(parseInt(e.bottom,10),0);return{left:n,right:r,top:s,bottom:a,x:n+r,y:s+a}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(a,u)=>this.elementViewChild.nativeElement.style[a]=u;this.both||this.horizontal?(s("height",r),s("width",n)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),n=(r,s,a,u=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*a+u+"px"};this.both?(n("height",this._items,this._itemSize[0],e.y),n("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,e.x):n("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl){const n=e?e.first:this.first,r=(a,u)=>a*u,s=(a=0,u=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${a}px, ${u}px, 0)`};if(this.both)s(r(n.cols,this._itemSize[1]),r(n.rows,this._itemSize[0]));else{const a=r(n,this._itemSize);this.horizontal?s(a,0):s(0,a)}}}onScrollPositionChange(e){const n=e.target,r=this.getContentPosition(),s=(ce,Ne)=>ce?ce>Ne?ce-Ne:ce:0,a=(ce,Ne)=>Math.floor(ce/(Ne||ce)),u=(ce,Ne,et,Je,at,kt)=>ce<=at?at:kt?et-Je-at:Ne+at-1,h=(ce,Ne,et,Je,at,kt,Zt)=>ce<=kt?0:Math.max(0,Zt?ce<Ne?et:ce-kt:ce>Ne?et:ce-2*kt),m=(ce,Ne,et,Je,at,kt=!1)=>{let Zt=Ne+Je+2*at;return ce>=at&&(Zt+=at+1),this.getLast(Zt,kt)},w=s(n.scrollTop,r.top),T=s(n.scrollLeft,r.left);let O=this.both?{rows:0,cols:0}:0,W=this.last,te=!1,ue=this.lastScrollPos;if(this.both){const ce=this.lastScrollPos.top<=w,Ne=this.lastScrollPos.left<=T,et={rows:a(w,this._itemSize[0]),cols:a(T,this._itemSize[1])},Je={rows:u(et.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],ce),cols:u(et.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],Ne)};O={rows:h(et.rows,Je.rows,this.first.rows,0,0,this.d_numToleratedItems[0],ce),cols:h(et.cols,Je.cols,this.first.cols,0,0,this.d_numToleratedItems[1],Ne)},W={rows:m(et.rows,O.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:m(et.cols,O.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},te=O.rows!==this.first.rows||W.rows!==this.last.rows||O.cols!==this.first.cols||W.cols!==this.last.cols,ue={top:w,left:T}}else{const ce=this.horizontal?T:w,Ne=this.lastScrollPos<=ce,et=a(ce,this._itemSize);O=h(et,u(et,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Ne),this.first,0,0,this.d_numToleratedItems,Ne),W=m(et,O,0,this.numItemsInViewport,this.d_numToleratedItems),te=O!==this.first||W!==this.last,ue=ce}return{first:O,last:W,isRangeChanged:te,scrollPos:ue}}onScrollChange(e){const{first:n,last:r,isRangeChanged:s,scrollPos:a}=this.onScrollPositionChange(e);if(s){const u={first:n,last:r};this.setContentPosition(u),this.first=n,this.last=r,this.lastScrollPos=a,this.handleEvents("onScrollIndexChange",u),this._lazy&&this.handleEvents("onLazyLoad",u)}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:n}=this.onScrollPositionChange(e);n&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.cd.detectChanges())},this._delay)}else this.onScrollChange(e)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(this.elementViewChild){const[e,n]=[bn.getWidth(this.elementViewChild.nativeElement),bn.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,n!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=n,this.init()})}},this._resizeDelay)}handleEvents(e,n){return this.options&&this.options[e]?this.options[e](n):this[e].emit(n)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,n)=>this.getLoaderOptions(e,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const n=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:n,first:0===r,last:r===n-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,n){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...n}}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo),Tn(Zo))},i.\u0275cmp=hs({type:i,selectors:[["p-scroller"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(jJ,5),Rs($J,5)),2&e){let r;jr(r=$r())&&(n.elementViewChild=r.first),jr(r=$r())&&(n.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",delay:"delay",resizeDelay:"resizeDelay",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[Tl],ngContentSelectors:vee,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,n){if(1&e&&(Ep(),At(0,dee,8,13,"ng-container",0),At(1,mee,2,1,"ng-template",null,1,hc)),2&e){const r=_o(2);He("ngIf",!n._disabled)("ngIfElse",r)}},dependencies:[vo,Ec,wo,hu,Ho],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}\n"],encapsulation:2}),i})(),Fv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})(),kh=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let n=this.getInk();if(!n||"none"===getComputedStyle(n,null).display)return;if(bn.removeClass(n,"p-ink-active"),!bn.getHeight(n)&&!bn.getWidth(n)){let u=Math.max(bn.getOuterWidth(this.el.nativeElement),bn.getOuterHeight(this.el.nativeElement));n.style.height=u+"px",n.style.width=u+"px"}let r=bn.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-bn.getWidth(n)/2,a=e.pageY-r.top+document.body.scrollLeft-bn.getHeight(n)/2;n.style.top=a+"px",n.style.left=s+"px",bn.addClass(n,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&bn.removeClass(e,"p-ink-active")}onAnimationEnd(e){bn.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),bn.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(Zo),Tn(og,8))},i.\u0275dir=Qs({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),i})(),Pc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})(),_ee=(()=>{class i{constructor(e){this.host=e,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=bn.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return i.\u0275fac=function(e){return new(e||i)(Tn($i))},i.\u0275dir=Qs({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:["pAutoFocus","autofocus"]}}),i})(),yee=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();function bee(i,t){if(1&i&&(Pt(0,"span"),ur(1),Nt()),2&i){const e=Ze();tt(1),ca(e.label||"empty")}}function Cee(i,t){1&i&&Nr(0)}const Rx=function(i){return{height:i}},wee=function(i,t){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":t}},G2=function(i){return{$implicit:i}},xee=["container"],Aee=["filter"],Iee=["in"],See=["editableInput"],Eee=["items"],Tee=["scroller"];function Mee(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(2);tt(1),ca(e.label||"empty")}}function Dee(i,t){1&i&&Nr(0)}const Pee=function(i){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":i}};function Lee(i,t){if(1&i&&(Pt(0,"span",12),At(1,Mee,2,1,"ng-container",13),At(2,Dee,1,0,"ng-container",14),Nt()),2&i){const e=Ze();He("ngClass",yr(9,Pee,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),xs("id",e.labelId),tt(1),He("ngIf",!e.selectedItemTemplate),tt(1),He("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",yr(11,G2,e.selectedOption))}}const kee=function(i){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":i}};function Ree(i,t){if(1&i&&(Pt(0,"span",15),ur(1),Nt()),2&i){const e=Ze();He("ngClass",yr(2,kee,null==e.placeholder||0===e.placeholder.length)),tt(1),ca(e.placeholder||"empty")}}function Oee(i,t){if(1&i){const e=vr();Pt(0,"input",16,17),si("click",function(){return gn(e),vn(Ze().onEditableInputClick())})("input",function(r){return gn(e),vn(Ze().onEditableInputChange(r))})("focus",function(r){return gn(e),vn(Ze().onEditableInputFocus(r))})("blur",function(r){return gn(e),vn(Ze().onInputBlur(r))}),Nt()}if(2&i){const e=Ze();He("disabled",e.disabled),xs("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function Fee(i,t){if(1&i){const e=vr();Pt(0,"i",18),si("click",function(r){return gn(e),vn(Ze().clear(r))}),Nt()}}function Nee(i,t){1&i&&Nr(0)}function Bee(i,t){1&i&&Nr(0)}const sz=function(i){return{options:i}};function zee(i,t){if(1&i&&(js(0),At(1,Bee,1,0,"ng-container",14),$s()),2&i){const e=Ze(3);tt(1),He("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",yr(2,sz,e.filterOptions))}}function Vee(i,t){if(1&i){const e=vr();Pt(0,"div",27)(1,"input",28,29),si("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){return gn(e),vn(Ze(3).onKeydown(r,!1))})("input",function(r){return gn(e),vn(Ze(3).onFilterInputChange(r))}),Nt(),Ri(3,"span",30),Nt()}if(2&i){const e=Ze(3);tt(1),He("value",e.filterValue||""),xs("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function Uee(i,t){if(1&i&&(Pt(0,"div",24),si("click",function(n){return n.stopPropagation()}),At(1,zee,2,4,"ng-container",25),At(2,Vee,4,4,"ng-template",null,26,hc),Nt()),2&i){const e=_o(3),n=Ze(2);tt(1),He("ngIf",n.filterTemplate)("ngIfElse",e)}}function Hee(i,t){1&i&&Nr(0)}const az=function(i,t){return{$implicit:i,options:t}};function Gee(i,t){if(1&i&&At(0,Hee,1,0,"ng-container",14),2&i){const e=t.$implicit,n=t.options;Ze(2),He("ngTemplateOutlet",_o(7))("ngTemplateOutletContext",fa(2,az,e,n))}}function Wee(i,t){1&i&&Nr(0)}function jee(i,t){if(1&i&&At(0,Wee,1,0,"ng-container",14),2&i){const e=t.options;He("ngTemplateOutlet",Ze(4).loaderTemplate)("ngTemplateOutletContext",yr(2,sz,e))}}function $ee(i,t){1&i&&(js(0),At(1,jee,1,4,"ng-template",34),$s())}function qee(i,t){if(1&i){const e=vr();Pt(0,"p-scroller",31,32),si("onLazyLoad",function(r){return gn(e),vn(Ze(2).onLazyLoad.emit(r))}),At(2,Gee,1,5,"ng-template",33),At(3,$ee,2,0,"ng-container",13),Nt()}if(2&i){const e=Ze(2);co(yr(8,Rx,e.scrollHeight)),He("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),tt(3),He("ngIf",e.loaderTemplate)}}function Xee(i,t){1&i&&Nr(0)}const Yee=function(){return{}};function Kee(i,t){if(1&i&&(js(0),At(1,Xee,1,0,"ng-container",14),$s()),2&i){Ze();const e=_o(7),n=Ze();tt(1),He("ngTemplateOutlet",e)("ngTemplateOutletContext",fa(3,az,n.optionsToDisplay,mo(2,Yee)))}}function Zee(i,t){if(1&i&&(Pt(0,"span"),ur(1),Nt()),2&i){const e=Ze().$implicit,n=Ze(4);tt(1),ca(n.getOptionGroupLabel(e)||"empty")}}function Qee(i,t){1&i&&Nr(0)}function Jee(i,t){1&i&&Nr(0)}const oz=function(i,t){return{$implicit:i,selectedOption:t}};function ete(i,t){if(1&i&&(Pt(0,"li",40),At(1,Zee,2,1,"span",13),At(2,Qee,1,0,"ng-container",14),Nt(),At(3,Jee,1,0,"ng-container",14)),2&i){const e=t.$implicit,n=Ze(2).options,r=_o(5),s=Ze(2);He("ngStyle",yr(6,Rx,n.itemSize+"px")),tt(1),He("ngIf",!s.groupTemplate),tt(1),He("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",yr(8,G2,e)),tt(1),He("ngTemplateOutlet",r)("ngTemplateOutletContext",fa(10,oz,s.getOptionGroupChildren(e),s.selectedOption))}}function tte(i,t){if(1&i&&(js(0),At(1,ete,4,13,"ng-template",39),$s()),2&i){const e=Ze().$implicit;tt(1),He("ngForOf",e)}}function nte(i,t){1&i&&Nr(0)}function ite(i,t){if(1&i&&(js(0),At(1,nte,1,0,"ng-container",14),$s()),2&i){const e=Ze().$implicit,n=_o(5),r=Ze(2);tt(1),He("ngTemplateOutlet",n)("ngTemplateOutletContext",fa(2,oz,e,r.selectedOption))}}function rte(i,t){if(1&i){const e=vr();Pt(0,"p-dropdownItem",41),si("onClick",function(r){return gn(e),vn(Ze(4).onItemClick(r))}),Nt()}if(2&i){const e=t.$implicit,n=Ze().selectedOption,r=Ze(3);He("option",e)("selected",n==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function ste(i,t){1&i&&At(0,rte,1,5,"ng-template",39),2&i&&He("ngForOf",t.$implicit)}function ate(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(4);tt(1),cc(" ",e.emptyFilterMessageLabel," ")}}function ote(i,t){1&i&&Nr(0,null,43)}function lte(i,t){if(1&i&&(Pt(0,"li",42),At(1,ate,2,1,"ng-container",25),At(2,ote,2,0,"ng-container",19),Nt()),2&i){const e=Ze().options,n=Ze(2);He("ngStyle",yr(4,Rx,e.itemSize+"px")),tt(1),He("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),tt(1),He("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function ute(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(4);tt(1),cc(" ",e.emptyMessageLabel," ")}}function cte(i,t){1&i&&Nr(0,null,44)}function hte(i,t){if(1&i&&(Pt(0,"li",42),At(1,ute,2,1,"ng-container",25),At(2,cte,2,0,"ng-container",19),Nt()),2&i){const e=Ze().options,n=Ze(2);He("ngStyle",yr(4,Rx,e.itemSize+"px")),tt(1),He("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),tt(1),He("ngTemplateOutlet",n.emptyTemplate)}}function dte(i,t){if(1&i&&(Pt(0,"ul",35,36),At(2,tte,2,1,"ng-container",13),At(3,ite,2,5,"ng-container",13),At(4,ste,1,1,"ng-template",null,37,hc),At(6,lte,3,6,"li",38),At(7,hte,3,6,"li",38),Nt()),2&i){const e=t.options,n=Ze(2);co(e.contentStyle),He("ngClass",e.contentStyleClass),xs("id",n.listId),tt(2),He("ngIf",n.group),tt(1),He("ngIf",!n.group),tt(3),He("ngIf",n.filterValue&&n.isEmpty()),tt(1),He("ngIf",!n.filterValue&&n.isEmpty())}}function fte(i,t){1&i&&Nr(0)}const pte=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},gte=function(i){return{value:"visible",params:i}};function mte(i,t){if(1&i){const e=vr();Pt(0,"div",0),si("click",function(r){return gn(e),vn(Ze().onOverlayClick(r))})("@overlayAnimation.start",function(r){return gn(e),vn(Ze().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return gn(e),vn(Ze().onOverlayAnimationEnd(r))}),At(1,Nee,1,0,"ng-container",19),At(2,Uee,4,2,"div",20),Pt(3,"div",21),At(4,qee,4,10,"p-scroller",22),At(5,Kee,2,6,"ng-container",13),At(6,dte,8,8,"ng-template",null,23,hc),Nt(),At(8,fte,1,0,"ng-container",19),Nt()}if(2&i){const e=Ze();Us(e.panelStyleClass),He("ngClass","p-dropdown-panel p-component")("@overlayAnimation",yr(15,gte,fa(12,pte,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),tt(1),He("ngTemplateOutlet",e.headerTemplate),tt(1),He("ngIf",e.filter),tt(1),bf("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),tt(1),He("ngIf",e.virtualScroll),tt(1),He("ngIf",!e.virtualScroll),tt(3),He("ngTemplateOutlet",e.footerTemplate)}}const vte=function(i,t,e,n){return{"p-dropdown p-component":!0,"p-disabled":i,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":n}},_te={provide:Mc,useExisting:Xr(()=>W2),multi:!0};let yte=(()=>{class i{constructor(){this.onClick=new ki}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=hs({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Pt(0,"li",0),si("click",function(s){return n.onOptionClick(s)}),At(1,bee,2,1,"span",1),At(2,Cee,1,0,"ng-container",2),Nt()),2&e&&(He("ngStyle",yr(8,Rx,n.itemSize+"px"))("id",n.selected?"p-highlighted-option":"")("ngClass",fa(10,wee,n.selected,n.disabled)),xs("aria-label",n.label)("aria-selected",n.selected),tt(1),He("ngIf",!n.template),tt(1),He("ngTemplateOutlet",n.template)("ngTemplateOutletContext",yr(13,G2,n.option)))},dependencies:[vo,wo,hu,Ho,kh],encapsulation:2}),i})(),W2=(()=>{class i{constructor(e,n,r,s,a,u,h){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.filterService=a,this.config=u,this.overlayService=h,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new ki,this.onFilter=new ki,this.onFocus=new ki,this.onBlur=new ki,this.onClick=new ki,this.onShow=new ki,this.onHide=new ki,this.onClear=new ki,this.onLazyLoad=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=fC()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&ns.isNotEmpty(this.value)&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Kc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Kc.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?ns.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?ns.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?ns.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?ns.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ns.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const n=e.option;this.isOptionDisabled(n)||(this.selectItem(e.originalEvent,n),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},150)}selectItem(e,n){this.selectedOption!=n&&(this.selectedOption=n,this.value=this.getOptionValue(n),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(bn.findSingle(this.overlay,"li.p-highlight")&&bn.scrollInView(this.itemsWrapper,bn.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return bn.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=bn.findSingle(this.overlay,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Vu.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length)if(this.virtualScroll){const n=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==n&&this.scroller.scrollToIndex(n)}else{let n=bn.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");n&&n.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){"void"===e.toState&&Vu.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):bn.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=bn.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?bn.absolutePosition(this.overlay,this.containerViewChild.nativeElement):bn.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}findNextEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}onKeydown(e,n){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let a=this.optionsToDisplay[r.groupIndex-1];a&&(this.selectItem(e,this.getOptionGroupChildren(a)[this.getOptionGroupChildren(a).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:n&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:n&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const n=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=n,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+n:n,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let n;return this.searchValue&&(n=this.searchOptionInRange(e,this.optionsToDisplay.length),n||(n=this.searchOptionInRange(0,e))),n}searchOptionInRange(e,n){for(let r=e;r<n;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let a=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(a).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(a))return a}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let a=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(a).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(a))return a}}return null}findOptionIndex(e,n){let r=-1;if(n)for(let s=0;s<n.length;s++)if(null==e&&null==this.getOptionValue(n[s])||ns.equals(e,this.getOptionValue(n[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,n){let r,s;if(n)for(let a=0;a<n.length&&(r=a,s=this.findOptionIndex(e,this.getOptionGroupChildren(n[a])),-1===s);a++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,n,r){if(this.group&&!r){let s;if(n&&n.length)for(let a of n)if(s=this.findOption(e,this.getOptionGroupChildren(a),!0),s)break;return s}{let s=this.findOptionIndex(e,n);return-1!=s?n[s]:null}}onFilterInputChange(e){let n=e.target.value;n&&n.length?(this._filterValue=n,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=n}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?bn.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():bn.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!bn.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Lx(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Vu.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(p),Tn(Oo),Tn(Zo),Tn(dx),Tn(og),Tn(fx))},i.\u0275cmp=hs({type:i,selectors:[["p-dropdown"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(xee,5),Rs(Aee,5),Rs(Iee,5),Rs(See,5),Rs(Eee,5),Rs(Tee,5)),2&e){let r;jr(r=$r())&&(n.containerViewChild=r.first),jr(r=$r())&&(n.filterViewChild=r.first),jr(r=$r())&&(n.accessibleViewChild=r.first),jr(r=$r())&&(n.editableInputViewChild=r.first),jr(r=$r())&&(n.itemsViewChild=r.first),jr(r=$r())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,n){2&e&&ag("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused||n.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[Ro([_te])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","pAutoFocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,n){1&e&&(Pt(0,"div",0,1),si("click",function(s){return n.onMouseclick(s)}),Pt(2,"div",2)(3,"input",3,4),si("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)})("keydown",function(s){return n.onKeydown(s,!0)}),Nt()(),At(5,Lee,3,13,"span",5),At(6,Ree,2,4,"span",6),At(7,Oee,2,4,"input",7),At(8,Fee,1,0,"i",8),Pt(9,"div",9),Ri(10,"span",10),Nt(),At(11,mte,9,17,"div",11),Nt()),2&e&&(Us(n.styleClass),He("ngClass",ep(20,vte,n.disabled,n.overlayVisible,n.focused,n.showClear&&!n.disabled))("ngStyle",n.style),tt(3),He("disabled",n.disabled)("pAutoFocus",n.autofocus),xs("id",n.inputId)("placeholder",n.placeholder)("aria-label",n.ariaLabel)("aria-expanded",!1)("aria-labelledby",n.ariaLabelledBy)("tabindex",n.tabindex)("aria-activedescendant",n.overlayVisible?n.labelId:null),tt(2),He("ngIf",!n.editable&&null!=n.label),tt(1),He("ngIf",!n.editable&&null==n.label),tt(1),He("ngIf",n.editable),tt(1),He("ngIf",null!=n.value&&n.showClear&&!n.disabled),tt(1),xs("aria-expanded",n.overlayVisible),tt(1),He("ngClass",n.dropdownIcon),tt(1),He("ngIf",n.overlayVisible))},dependencies:[vo,Ec,wo,hu,Ho,Kl,Rv,kx,_ee,yte],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[M_("overlayAnimation",[Lh(":enter",[du({opacity:0,transform:"scaleY(0.8)"}),Dc("{{showTransitionParams}}")]),Lh(":leave",[Dc("{{hideTransitionParams}}",du({opacity:0}))])])]},changeDetection:0}),i})(),YI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl,Ov,Pc,Fv,yee,Pl,Fv]}),i})(),vC=(()=>{class i{constructor(e,n,r){this.el=e,this.ngModel=n,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(kv,8),Tn(Oo))},i.\u0275dir=Qs({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,n){1&e&&si("input",function(s){return n.onInput(s)}),2&e&&ag("p-filled",n.filled)}}),i})(),j2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();function bte(i,t){1&i&&Nr(0)}const Cte=function(i,t,e,n){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":n}};function wte(i,t){if(1&i&&Ri(0,"span",4),2&i){const e=Ze();Us(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),He("ngClass",ep(4,Cte,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),xs("aria-hidden",!0)}}function xte(i,t){if(1&i&&(Pt(0,"span",5),ur(1),Nt()),2&i){const e=Ze();xs("aria-hidden",e.icon&&!e.label),tt(1),ca(e.label||"\xa0")}}function Ate(i,t){if(1&i&&(Pt(0,"span",4),ur(1),Nt()),2&i){const e=Ze();Us(e.badgeClass),He("ngClass",e.badgeStyleClass()),tt(1),ca(e.badge)}}const Ite=function(i,t,e,n,r){return{"p-button p-component":!0,"p-button-icon-only":i,"p-button-vertical":t,"p-disabled":e,"p-button-loading":n,"p-button-loading-label-only":r}},Ste=["*"];let k0=(()=>{class i{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,bn.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let n=this.label?"p-button-icon-"+this.iconPos:null;n&&bn.addClass(e,n);let r=this.getIconClass();r&&bn.addMultipleClasses(e,r);let s=bn.findSingle(this.el.nativeElement,".p-button-label");s?this.el.nativeElement.insertBefore(e,s):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=bn.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=bn.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(bn.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(Tn($i))},i.\u0275dir=Qs({type:i,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),i})(),KI=(()=>{class i{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new ki,this.onFocus=new ki,this.onBlur=new ki}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=hs({type:i,selectors:[["p-button"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:Ste,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,n){1&e&&(Ep(),Pt(0,"button",0),si("click",function(s){return n.onClick.emit(s)})("focus",function(s){return n.onFocus.emit(s)})("blur",function(s){return n.onBlur.emit(s)}),ch(1),At(2,bte,1,0,"ng-container",1),At(3,wte,1,9,"span",2),At(4,xte,2,2,"span",3),At(5,Ate,2,4,"span",2),Nt()),2&e&&(Us(n.styleClass),He("ngStyle",n.style)("disabled",n.disabled||n.loading)("ngClass",v0(11,Ite,n.icon&&!n.label,("top"===n.iconPos||"bottom"===n.iconPos)&&n.label,n.disabled||n.loading,n.loading,n.loading&&!n.icon&&n.label)),xs("type",n.type)("aria-label",n.ariaLabel),tt(2),He("ngTemplateOutlet",n.contentTemplate),tt(1),He("ngIf",!n.contentTemplate&&(n.icon||n.loading)),tt(1),He("ngIf",!n.contentTemplate),tt(1),He("ngIf",!n.contentTemplate&&n.badge))},dependencies:[vo,wo,hu,Ho,kh],encapsulation:2,changeDetection:0}),i})(),Nv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pc]}),i})();const Ete=["input"];function Tte(i,t){if(1&i){const e=vr();Pt(0,"i",6),si("click",function(){return gn(e),vn(Ze().clear())}),Nt()}}const lz=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},uz=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function Mte(i,t){if(1&i){const e=vr();Pt(0,"span",7)(1,"button",8),si("mousedown",function(r){return gn(e),vn(Ze().onUpButtonMouseDown(r))})("mouseup",function(){return gn(e),vn(Ze().onUpButtonMouseUp())})("mouseleave",function(){return gn(e),vn(Ze().onUpButtonMouseLeave())})("keydown",function(r){return gn(e),vn(Ze().onUpButtonKeyDown(r))})("keyup",function(){return gn(e),vn(Ze().onUpButtonKeyUp())}),Nt(),Pt(2,"button",8),si("mousedown",function(r){return gn(e),vn(Ze().onDownButtonMouseDown(r))})("mouseup",function(){return gn(e),vn(Ze().onDownButtonMouseUp())})("mouseleave",function(){return gn(e),vn(Ze().onDownButtonMouseLeave())})("keydown",function(r){return gn(e),vn(Ze().onDownButtonKeyDown(r))})("keyup",function(){return gn(e),vn(Ze().onDownButtonKeyUp())}),Nt()()}if(2&i){const e=Ze();tt(1),Us(e.incrementButtonClass),He("ngClass",mo(10,lz))("icon",e.incrementButtonIcon)("disabled",e.disabled),tt(1),Us(e.decrementButtonClass),He("ngClass",mo(11,uz))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function Dte(i,t){if(1&i){const e=vr();Pt(0,"button",8),si("mousedown",function(r){return gn(e),vn(Ze().onUpButtonMouseDown(r))})("mouseup",function(){return gn(e),vn(Ze().onUpButtonMouseUp())})("mouseleave",function(){return gn(e),vn(Ze().onUpButtonMouseLeave())})("keydown",function(r){return gn(e),vn(Ze().onUpButtonKeyDown(r))})("keyup",function(){return gn(e),vn(Ze().onUpButtonKeyUp())}),Nt()}if(2&i){const e=Ze();Us(e.incrementButtonClass),He("ngClass",mo(5,lz))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function Pte(i,t){if(1&i){const e=vr();Pt(0,"button",8),si("mousedown",function(r){return gn(e),vn(Ze().onDownButtonMouseDown(r))})("mouseup",function(){return gn(e),vn(Ze().onDownButtonMouseUp())})("mouseleave",function(){return gn(e),vn(Ze().onDownButtonMouseLeave())})("keydown",function(r){return gn(e),vn(Ze().onDownButtonKeyDown(r))})("keyup",function(){return gn(e),vn(Ze().onDownButtonKeyUp())}),Nt()}if(2&i){const e=Ze();Us(e.decrementButtonClass),He("ngClass",mo(5,uz))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const Lte=function(i,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},kte={provide:Mc,useExisting:Xr(()=>cz),multi:!0};let cz=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new ki,this.onFocus=new ki,this.onBlur=new ki,this.onKeyDown=new ki,this.onClear=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),n=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>n.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if("-"===n)return n;let r=+n;return isNaN(r)?null:r}return null}repeat(e,n,r){if(this.readonly)return;let s=n||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,n){let r=this.step*n,s=this.parseValue(this.input.nativeElement.value)||0,a=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(a).length||(this.updateInput(a,null,"spin",null),this.updateModel(e,a),this.handleOnInput(e,s,a))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let n=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,a=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(s.charAt(n-1))||e.preventDefault();break;case 39:this.isNumeralChar(s.charAt(n))||e.preventDefault();break;case 13:a=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(a),this.input.nativeElement.setAttribute("aria-valuenow",a),this.updateModel(e,a);break;case 8:if(e.preventDefault(),n===r){const u=s.charAt(n-1),{decimalCharIndex:h,decimalCharIndexWithoutPrefix:m}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(u)){const w=this.getDecimalLength(s);if(this._group.test(u))this._group.lastIndex=0,a=s.slice(0,n-2)+s.slice(n-1);else if(this._decimal.test(u))this._decimal.lastIndex=0,w?this.input.nativeElement.setSelectionRange(n-1,n-1):a=s.slice(0,n-1)+s.slice(n);else if(h>0&&n>h){const T=this.isDecimalMode()&&(this.minFractionDigits||0)<w?"":"0";a=s.slice(0,n-1)+T+s.slice(n)}else 1===m?(a=s.slice(0,n-1)+"0"+s.slice(n),a=this.parseValue(a)>0?a:""):a=s.slice(0,n-1)+s.slice(n)}this.updateValue(e,a,null,"delete-single")}else a=this.deleteRange(s,n,r),this.updateValue(e,a,null,"delete-range");break;case 46:if(e.preventDefault(),n===r){const u=s.charAt(n),{decimalCharIndex:h,decimalCharIndexWithoutPrefix:m}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(u)){const w=this.getDecimalLength(s);if(this._group.test(u))this._group.lastIndex=0,a=s.slice(0,n)+s.slice(n+2);else if(this._decimal.test(u))this._decimal.lastIndex=0,w?this.input.nativeElement.setSelectionRange(n+1,n+1):a=s.slice(0,n)+s.slice(n+1);else if(h>0&&n>h){const T=this.isDecimalMode()&&(this.minFractionDigits||0)<w?"":"0";a=s.slice(0,n)+T+s.slice(n+1)}else 1===m?(a=s.slice(0,n)+"0"+s.slice(n+1),a=this.parseValue(a)>0?a:""):a=s.slice(0,n)+s.slice(n+1)}this.updateValue(e,a,null,"delete-back-single")}else a=this.deleteRange(s,n,r),this.updateValue(e,a,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let n=e.which||e.keyCode,r=String.fromCharCode(n);const s=this.isDecimalSign(r),a=this.isMinusSign(r);(48<=n&&n<=57||a||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:a})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let n=(e.clipboardData||window.clipboardData).getData("Text");if(n){let r=this.parseValue(n);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let n=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){const n=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const a=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:a}}insert(e,n,r={isDecimalSign:!1,isMinusSign:!1}){const s=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let a=this.input.nativeElement.selectionStart,u=this.input.nativeElement.selectionEnd,h=this.input.nativeElement.value.trim();const{decimalCharIndex:m,minusCharIndex:w,suffixCharIndex:T,currencyCharIndex:O}=this.getCharIndexes(h);let W;if(r.isMinusSign)0===a&&(W=h,(-1===w||0!==u)&&(W=this.insertText(h,n,0,u)),this.updateValue(e,W,n,"insert"));else if(r.isDecimalSign)m>0&&a===m?this.updateValue(e,h,n,"insert"):(m>a&&m<u||-1===m&&this.maxFractionDigits)&&(W=this.insertText(h,n,a,u),this.updateValue(e,W,n,"insert"));else{const te=this.numberFormat.resolvedOptions().maximumFractionDigits,ue=a!==u?"range-insert":"insert";if(m>0&&a>m){if(a+n.length-(m+1)<=te){const ce=O>=a?O-1:T>=a?T:h.length;W=h.slice(0,a)+n+h.slice(a+n.length,ce)+h.slice(ce),this.updateValue(e,W,n,ue)}}else W=this.insertText(h,n,a,u),this.updateValue(e,W,n,ue)}}insertText(e,n,r,s){if(2===("."===n?n:n.split(".")).length){const u=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,u>0?e.slice(0,r)+this.formatValue(n)+e.slice(s):e||this.formatValue(n)}return s-r===e.length?this.formatValue(n):0===r?n+e.slice(s):s===e.length?e.slice(0,r)+n:e.slice(0,r)+n+e.slice(s)}deleteRange(e,n,r){let s;return s=r-n===e.length?"":0===n?e.slice(r):r===e.length?e.slice(0,n):e.slice(0,n)+e.slice(r),s}initCursor(){let e=this.input.nativeElement.selectionStart,n=this.input.nativeElement.value,r=n.length,s=null,a=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e-=a;let u=n.charAt(e);if(this.isNumeralChar(u))return e+a;let h=e-1;for(;h>=0;){if(u=n.charAt(h),this.isNumeralChar(u)){s=h+a;break}h--}if(null!==s)this.input.nativeElement.setSelectionRange(s+1,s+1);else{for(h=e;h<r;){if(u=n.charAt(h),this.isNumeralChar(u)){s=h+a;break}h++}null!==s&&this.input.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,n,r,s){let a=this.input.nativeElement.value,u=null;null!=n&&(u=this.parseValue(n),u=u||this.allowEmpty?u:0,this.updateInput(u,r,s,n),this.handleOnInput(e,a,u))}handleOnInput(e,n,r){this.isValueChanged(n,r)&&this.onInput.emit({originalEvent:e,value:r})}isValueChanged(e,n){return null===n&&null!==e||null!=n&&n!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,n,r,s){n=n||"";let a=this.input.nativeElement.value,u=this.formatValue(e),h=a.length;if(u!==s&&(u=this.concatValues(u,s)),0===h){this.input.nativeElement.value=u,this.input.nativeElement.setSelectionRange(0,0);const w=this.initCursor()+n.length;this.input.nativeElement.setSelectionRange(w,w)}else{let m=this.input.nativeElement.selectionStart,w=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<u.length)return;this.input.nativeElement.value=u;let T=u.length;if("range-insert"===r){const O=this.parseValue((a||"").slice(0,m)),te=(null!==O?O.toString():"").split("").join(`(${this.groupChar})?`),ue=new RegExp(te,"g");ue.test(u);const ce=n.split("").join(`(${this.groupChar})?`),Ne=new RegExp(ce,"g");Ne.test(u.slice(ue.lastIndex)),w=ue.lastIndex+Ne.lastIndex,this.input.nativeElement.setSelectionRange(w,w)}else if(T===h)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(w+1,w+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(w-1,w-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(w,w);else if("delete-back-single"===r){let O=a.charAt(w-1),W=a.charAt(w),te=h-T,ue=this._group.test(W);ue&&1===te?w+=1:!ue&&this.isNumeralChar(O)&&(w+=-1*te+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(w,w)}else if("-"===a&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const W=this.initCursor()+n.length+1;this.input.nativeElement.setSelectionRange(W,W)}else w+=T-h,this.input.nativeElement.setSelectionRange(w,w)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,n){if(e&&n){let r=n.search(this._decimal);return this._decimal.lastIndex=0,-1!==r?e.split(this._decimal)[0]+n.slice(r):e}return e}getDecimalLength(e){if(e){const n=e.split(this._decimal);if(2===n.length)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let n=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(n),this.input.nativeElement.setAttribute("aria-valuenow",n),this.updateModel(e,n),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,n){this.value!==n&&(this.value=n,this.onModelChange(n)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-inputNumber"]],viewQuery:function(e,n){if(1&e&&Rs(Ete,5),2&e){let r;jr(r=$r())&&(n.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&ag("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused)("p-inputnumber-clearable",n.showClear&&"vertical"!=n.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Ro([kte]),Tl],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,n){1&e&&(Pt(0,"span",0)(1,"input",1,2),si("input",function(s){return n.onUserInput(s)})("keydown",function(s){return n.onInputKeyDown(s)})("keypress",function(s){return n.onInputKeyPress(s)})("paste",function(s){return n.onPaste(s)})("click",function(){return n.onInputClick()})("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)}),Nt(),At(3,Tte,1,0,"i",3),At(4,Mte,3,12,"span",4),At(5,Dte,1,6,"button",5),At(6,Pte,1,6,"button",5),Nt()),2&e&&(Us(n.styleClass),He("ngClass",Th(28,Lte,n.showButtons&&"stacked"===n.buttonLayout,n.showButtons&&"horizontal"===n.buttonLayout,n.showButtons&&"vertical"===n.buttonLayout))("ngStyle",n.style),tt(1),Us(n.inputStyleClass),He("ngClass","p-inputnumber-input")("ngStyle",n.inputStyle)("value",n.formattedValue())("disabled",n.disabled)("readonly",n.readonly),xs("placeholder",n.placeholder)("title",n.title)("id",n.inputId)("size",n.size)("name",n.name)("autocomplete",n.autocomplete)("maxlength",n.maxlength)("tabindex",n.tabindex)("aria-label",n.ariaLabel)("aria-required",n.ariaRequired)("required",n.required)("min",n.min)("max",n.max),tt(2),He("ngIf","vertical"!=n.buttonLayout&&n.showClear&&n.value),tt(1),He("ngIf",n.showButtons&&"stacked"===n.buttonLayout),tt(1),He("ngIf",n.showButtons&&"stacked"!==n.buttonLayout),tt(1),He("ngIf",n.showButtons&&"stacked"!==n.buttonLayout))},dependencies:[vo,wo,Ho,vC,k0],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),ZI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,j2,Nv]}),i})();function Rte(i,t){1&i&&Nr(0)}const $2=function(i){return{$implicit:i}};function Ote(i,t){if(1&i&&(Pt(0,"div",15),At(1,Rte,1,0,"ng-container",16),Nt()),2&i){const e=Ze(2);tt(1),He("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",yr(2,$2,e.paginatorState))}}function Fte(i,t){if(1&i&&(Pt(0,"span",17),ur(1),Nt()),2&i){const e=Ze(2);tt(1),ca(e.currentPageReport)}}const QI=function(i){return{"p-disabled":i}};function Nte(i,t){if(1&i){const e=vr();Pt(0,"button",18),si("click",function(r){return gn(e),vn(Ze(2).changePageToFirst(r))}),Ri(1,"span",19),Nt()}if(2&i){const e=Ze(2);He("disabled",e.isFirstPage()||e.empty())("ngClass",yr(2,QI,e.isFirstPage()||e.empty()))}}const Bte=function(i){return{"p-highlight":i}};function zte(i,t){if(1&i){const e=vr();Pt(0,"button",22),si("click",function(r){const a=gn(e).$implicit;return vn(Ze(3).onPageLinkClick(r,a-1))}),ur(1),Nt()}if(2&i){const e=t.$implicit,n=Ze(3);He("ngClass",yr(2,Bte,e-1==n.getPage())),tt(1),ca(e)}}function Vte(i,t){if(1&i&&(Pt(0,"span",20),At(1,zte,2,4,"button",21),Nt()),2&i){const e=Ze(2);tt(1),He("ngForOf",e.pageLinks)}}function Ute(i,t){1&i&&ur(0),2&i&&ca(Ze(3).currentPageReport)}function Hte(i,t){if(1&i){const e=vr();Pt(0,"p-dropdown",23),si("onChange",function(r){return gn(e),vn(Ze(2).onPageDropdownChange(r))}),At(1,Ute,1,1,"ng-template",24),Nt()}if(2&i){const e=Ze(2);He("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function Gte(i,t){if(1&i){const e=vr();Pt(0,"button",25),si("click",function(r){return gn(e),vn(Ze(2).changePageToLast(r))}),Ri(1,"span",26),Nt()}if(2&i){const e=Ze(2);He("disabled",e.isLastPage()||e.empty())("ngClass",yr(2,QI,e.isLastPage()||e.empty()))}}function Wte(i,t){if(1&i){const e=vr();Pt(0,"p-inputNumber",27),si("ngModelChange",function(r){return gn(e),vn(Ze(2).changePage(r-1))}),Nt()}if(2&i){const e=Ze(2);He("ngModel",e.currentPage())("disabled",e.empty())}}function jte(i,t){1&i&&Nr(0)}function $te(i,t){if(1&i&&At(0,jte,1,0,"ng-container",16),2&i){const e=t.$implicit;He("ngTemplateOutlet",Ze(4).dropdownItemTemplate)("ngTemplateOutletContext",yr(2,$2,e))}}function qte(i,t){1&i&&(js(0),At(1,$te,1,4,"ng-template",30),$s())}function Xte(i,t){if(1&i){const e=vr();Pt(0,"p-dropdown",28),si("ngModelChange",function(r){return gn(e),vn(Ze(2).rows=r)})("onChange",function(r){return gn(e),vn(Ze(2).onRppChange(r))}),At(1,qte,2,0,"ng-container",29),Nt()}if(2&i){const e=Ze(2);He("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),tt(1),He("ngIf",e.dropdownItemTemplate)}}function Yte(i,t){1&i&&Nr(0)}function Kte(i,t){if(1&i&&(Pt(0,"div",31),At(1,Yte,1,0,"ng-container",16),Nt()),2&i){const e=Ze(2);tt(1),He("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",yr(2,$2,e.paginatorState))}}function Zte(i,t){if(1&i){const e=vr();Pt(0,"div",1),At(1,Ote,2,4,"div",2),At(2,Fte,2,1,"span",3),At(3,Nte,2,4,"button",4),Pt(4,"button",5),si("click",function(r){return gn(e),vn(Ze().changePageToPrev(r))}),Ri(5,"span",6),Nt(),At(6,Vte,2,1,"span",7),At(7,Hte,2,5,"p-dropdown",8),Pt(8,"button",9),si("click",function(r){return gn(e),vn(Ze().changePageToNext(r))}),Ri(9,"span",10),Nt(),At(10,Gte,2,4,"button",11),At(11,Wte,1,2,"p-inputNumber",12),At(12,Xte,2,6,"p-dropdown",13),At(13,Kte,2,4,"div",14),Nt()}if(2&i){const e=Ze();Us(e.styleClass),He("ngStyle",e.style)("ngClass","p-paginator p-component"),tt(1),He("ngIf",e.templateLeft),tt(1),He("ngIf",e.showCurrentPageReport),tt(1),He("ngIf",e.showFirstLastIcon),tt(1),He("disabled",e.isFirstPage()||e.empty())("ngClass",yr(17,QI,e.isFirstPage()||e.empty())),tt(2),He("ngIf",e.showPageLinks),tt(1),He("ngIf",e.showJumpToPageDropdown),tt(1),He("disabled",e.isLastPage()||e.empty())("ngClass",yr(19,QI,e.isLastPage()||e.empty())),tt(2),He("ngIf",e.showFirstLastIcon),tt(1),He("ngIf",e.showJumpToPageInput),tt(1),He("ngIf",e.rowsPerPageOptions),tt(1),He("ngIf",e.templateRight)}}let hz=(()=>{class i{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new ki,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),n=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-n/2)),s=Math.min(e-1,r+n-1);return r=Math.max(0,r-(this.pageLinkSize-(s-r+1))),[r,s]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let s=e[0];s<=r;s++)this.pageLinks.push(s+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let s=0;s<this.getPageCount();s++)this.pageItems.push({label:String(s+1),value:s})}}changePage(e){var n=this.getPageCount();if(e>=0&&e<n){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:n};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,n){this.changePage(n),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[Tl],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,n){1&e&&At(0,Zte,14,21,"div",0),2&e&&He("ngIf",!!n.alwaysShow||n.pageLinks&&n.pageLinks.length>1)},dependencies:[vo,Ec,wo,hu,Ho,W2,Kl,cz,D0,kv,kh],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),dz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,YI,ZI,XI,Pl,Pc,YI,ZI,XI,Pl]}),i})();function Qte(i,t){1&i&&Ri(0,"span",8),2&i&&(Us(Ze(2).$implicit.icon),He("ngClass","p-button-icon p-button-icon-left"))}function Jte(i,t){if(1&i&&(js(0),At(1,Qte,1,3,"span",6),Pt(2,"span",7),ur(3),Nt(),$s()),2&i){const e=Ze().$implicit,n=Ze();tt(1),He("ngIf",e.icon),tt(2),ca(n.getOptionLabel(e))}}function ene(i,t){1&i&&Nr(0)}const tne=function(i,t){return{$implicit:i,index:t}};function nne(i,t){if(1&i&&At(0,ene,1,0,"ng-container",9),2&i){const e=Ze(),n=e.$implicit,r=e.index;He("ngTemplateOutlet",Ze().itemTemplate)("ngTemplateOutletContext",fa(2,tne,n,r))}}const ine=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-button-icon-only":e}};function rne(i,t){if(1&i){const e=vr();Pt(0,"div",2,3),si("click",function(r){const s=gn(e),a=s.$implicit,u=s.index;return vn(Ze().onItemClick(r,a,u))})("keydown.enter",function(r){const s=gn(e),a=s.$implicit,u=s.index;return vn(Ze().onItemClick(r,a,u))})("blur",function(){return gn(e),vn(Ze().onBlur())}),At(2,Jte,4,2,"ng-container",4),At(3,nne,1,5,"ng-template",null,5,hc),Nt()}if(2&i){const e=t.$implicit,n=_o(4),r=Ze();Us(e.styleClass),He("ngClass",Th(10,ine,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),xs("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),tt(2),He("ngIf",!r.itemTemplate)("ngIfElse",n)}}const sne={provide:Mc,useExisting:Xr(()=>ane),multi:!0};let ane=(()=>{class i{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new ki,this.onChange=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?ns.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ns.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?ns.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,n,r){if(!this.disabled&&!this.isOptionDisabled(n)){if(this.multiple)this.isSelected(n)?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let s=this.getOptionValue(n);this.value!==s&&(this.value=this.getOptionValue(n),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:n,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(n=>!ns.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(ns.equals(s,r,this.dataKey)){n=!0;break}}else n=ns.equals(this.getOptionValue(e),this.value,this.dataKey);return n}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-selectButton"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Nm,5),2&e){let s;jr(s=$r())&&(n.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[Ro([sne])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Pt(0,"div",0),At(1,rne,5,14,"div",1),Nt()),2&e&&(Us(n.styleClass),He("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",n.style),tt(1),He("ngForOf",n.options))},dependencies:[vo,Ec,wo,hu,Ho,kh],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),one=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pc]}),i})();const lne=function(i,t,e){return{"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function une(i,t){if(1&i){const e=vr();Pt(0,"label",7),si("click",function(r){gn(e);const s=Ze(),a=_o(3);return vn(s.onClick(r,a))}),ur(1),Nt()}if(2&i){const e=Ze();He("ngClass",Th(3,lne,null!=e.value,e.disabled,e.focused)),xs("for",e.inputId),tt(1),ca(e.label)}}const cne=function(i,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":t}},hne=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},dne={provide:Mc,useExisting:Xr(()=>fne),multi:!0};let fne=(()=>{class i{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,n.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[Ro([dne])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,n){if(1&e){const r=vr();Pt(0,"div",0)(1,"div",1)(2,"input",2,3),si("keyup",function(a){return n.onKeyup(a)})("keydown",function(a){return n.onKeydown(a)})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),Nt()(),Pt(4,"div",4),si("click",function(a){gn(r);const u=_o(3);return vn(n.onClick(a,u))}),Ri(5,"span",5),Nt()(),At(6,une,2,7,"label",6)}2&e&&(Us(n.styleClass),He("ngStyle",n.style)("ngClass",fa(14,cne,n.disabled,n.focused)),tt(2),He("name",n.name)("readonly",n.readonly)("disabled",n.disabled),xs("id",n.inputId)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy),tt(2),He("ngClass",Th(17,hne,null!=n.value,n.disabled,n.focused)),xs("aria-checked",!0===n.value),tt(1),He("ngClass",!0===n.value?n.checkboxTrueIcon:!1===n.value?n.checkboxFalseIcon:""),tt(1),He("ngIf",n.label))},dependencies:[vo,wo,Ho],encapsulation:2,changeDetection:0}),i})(),pne=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();const gne=["container"],mne=["inputfield"],vne=["contentWrapper"];function _ne(i,t){if(1&i){const e=vr();Pt(0,"i",8),si("click",function(){return gn(e),vn(Ze(2).clear())}),Nt()}}function yne(i,t){if(1&i){const e=vr();Pt(0,"button",9),si("click",function(r){gn(e),Ze();const s=_o(1);return vn(Ze().onButtonClick(r,s))}),Nt()}if(2&i){const e=Ze(2);He("icon",e.icon)("disabled",e.disabled),xs("aria-label",e.iconAriaLabel)}}function bne(i,t){if(1&i){const e=vr();Pt(0,"input",4,5),si("focus",function(r){return gn(e),vn(Ze().onInputFocus(r))})("keydown",function(r){return gn(e),vn(Ze().onInputKeydown(r))})("click",function(){return gn(e),vn(Ze().onInputClick())})("blur",function(r){return gn(e),vn(Ze().onInputBlur(r))})("input",function(r){return gn(e),vn(Ze().onUserInput(r))}),Nt(),At(2,_ne,1,0,"i",6),At(3,yne,1,3,"button",7)}if(2&i){const e=Ze();Us(e.inputStyleClass),He("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),xs("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),tt(2),He("ngIf",e.showClear&&!e.disabled&&null!=e.value),tt(1),He("ngIf",e.showIcon)}}function Cne(i,t){1&i&&Nr(0)}function wne(i,t){if(1&i){const e=vr();Pt(0,"button",30),si("keydown",function(r){return gn(e),vn(Ze(4).onContainerButtonKeydown(r))})("click",function(r){return gn(e),vn(Ze(4).onPrevButtonClick(r))}),Ri(1,"span",31),Nt()}}function xne(i,t){if(1&i){const e=vr();Pt(0,"button",32),si("click",function(r){return gn(e),vn(Ze(4).switchToMonthView(r))})("keydown",function(r){return gn(e),vn(Ze(4).onContainerButtonKeydown(r))}),ur(1),Nt()}if(2&i){const e=Ze().$implicit,n=Ze(3);He("disabled",n.switchViewButtonDisabled()),tt(1),cc(" ",n.getMonthName(e.month)," ")}}function Ane(i,t){if(1&i){const e=vr();Pt(0,"button",33),si("click",function(r){return gn(e),vn(Ze(4).switchToYearView(r))})("keydown",function(r){return gn(e),vn(Ze(4).onContainerButtonKeydown(r))}),ur(1),Nt()}if(2&i){const e=Ze().$implicit,n=Ze(3);He("disabled",n.switchViewButtonDisabled()),tt(1),cc(" ",n.getYear(e)," ")}}function Ine(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(5);tt(1),Bw("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function Sne(i,t){1&i&&Nr(0)}const fz=function(i){return{$implicit:i}};function Ene(i,t){if(1&i&&(Pt(0,"span",34),At(1,Ine,2,2,"ng-container",13),At(2,Sne,1,0,"ng-container",35),Nt()),2&i){const e=Ze(4);tt(1),He("ngIf",!e.decadeTemplate),tt(1),He("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",yr(3,fz,e.yearPickerValues))}}function Tne(i,t){if(1&i&&(Pt(0,"th",41)(1,"span"),ur(2),Nt()()),2&i){const e=Ze(5);tt(2),ca(e.getTranslation("weekHeader"))}}function Mne(i,t){if(1&i&&(Pt(0,"th",42)(1,"span"),ur(2),Nt()()),2&i){const e=t.$implicit;tt(2),ca(e)}}function Dne(i,t){if(1&i&&(Pt(0,"td",45)(1,"span",46),ur(2),Nt()()),2&i){const e=Ze().index,n=Ze(2).$implicit;tt(2),cc(" ",n.weekNumbers[e]," ")}}function Pne(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(2).$implicit;tt(1),ca(e.day)}}function Lne(i,t){1&i&&Nr(0)}const kne=function(i,t){return{"p-highlight":i,"p-disabled":t}};function Rne(i,t){if(1&i){const e=vr();js(0),Pt(1,"span",48),si("click",function(r){gn(e);const s=Ze().$implicit;return vn(Ze(6).onDateSelect(r,s))})("keydown",function(r){gn(e);const s=Ze().$implicit,a=Ze(3).index;return vn(Ze(3).onDateCellKeydown(r,s,a))}),At(2,Pne,2,1,"ng-container",13),At(3,Lne,1,0,"ng-container",35),Nt(),$s()}if(2&i){const e=Ze().$implicit,n=Ze(6);tt(1),He("ngClass",fa(4,kne,n.isSelected(e),!e.selectable)),tt(1),He("ngIf",!n.dateTemplate),tt(1),He("ngTemplateOutlet",n.dateTemplate)("ngTemplateOutletContext",yr(7,fz,e))}}const One=function(i,t){return{"p-datepicker-other-month":i,"p-datepicker-today":t}};function Fne(i,t){if(1&i&&(Pt(0,"td",47),At(1,Rne,4,9,"ng-container",13),Nt()),2&i){const e=t.$implicit,n=Ze(6);He("ngClass",fa(2,One,e.otherMonth,e.today)),tt(1),He("ngIf",!e.otherMonth||n.showOtherMonths)}}function Nne(i,t){if(1&i&&(Pt(0,"tr"),At(1,Dne,3,1,"td",43),At(2,Fne,2,5,"td",44),Nt()),2&i){const e=t.$implicit,n=Ze(5);tt(1),He("ngIf",n.showWeek),tt(1),He("ngForOf",e)}}function Bne(i,t){if(1&i&&(Pt(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),At(4,Tne,3,1,"th",38),At(5,Mne,3,1,"th",39),Nt()(),Pt(6,"tbody"),At(7,Nne,3,2,"tr",40),Nt()()()),2&i){const e=Ze().$implicit,n=Ze(3);tt(4),He("ngIf",n.showWeek),tt(1),He("ngForOf",n.weekDays),tt(2),He("ngForOf",e.dates)}}function zne(i,t){if(1&i){const e=vr();Pt(0,"div",20)(1,"div",21),At(2,wne,2,0,"button",22),Pt(3,"div",23),At(4,xne,2,2,"button",24),At(5,Ane,2,2,"button",25),At(6,Ene,3,5,"span",26),Nt(),Pt(7,"button",27),si("keydown",function(r){return gn(e),vn(Ze(3).onContainerButtonKeydown(r))})("click",function(r){return gn(e),vn(Ze(3).onNextButtonClick(r))}),Ri(8,"span",28),Nt()(),At(9,Bne,8,3,"div",29),Nt()}if(2&i){const e=t.index,n=Ze(3);tt(2),He("ngIf",0===e),tt(2),He("ngIf","date"===n.currentView),tt(1),He("ngIf","year"!==n.currentView),tt(1),He("ngIf","year"===n.currentView),tt(1),bf("display",1===n.numberOfMonths||e===n.numberOfMonths-1?"inline-flex":"none"),tt(2),He("ngIf","date"===n.currentView)}}const pz=function(i){return{"p-highlight":i}};function Vne(i,t){if(1&i){const e=vr();Pt(0,"span",51),si("click",function(r){const a=gn(e).index;return vn(Ze(4).onMonthSelect(r,a))})("keydown",function(r){const a=gn(e).index;return vn(Ze(4).onMonthCellKeydown(r,a))}),ur(1),Nt()}if(2&i){const e=t.$implicit,n=t.index,r=Ze(4);He("ngClass",yr(2,pz,r.isMonthSelected(n))),tt(1),cc(" ",e," ")}}function Une(i,t){if(1&i&&(Pt(0,"div",49),At(1,Vne,2,4,"span",50),Nt()),2&i){const e=Ze(3);tt(1),He("ngForOf",e.monthPickerValues())}}function Hne(i,t){if(1&i){const e=vr();Pt(0,"span",54),si("click",function(r){const a=gn(e).$implicit;return vn(Ze(4).onYearSelect(r,a))})("keydown",function(r){const a=gn(e).$implicit;return vn(Ze(4).onYearCellKeydown(r,a))}),ur(1),Nt()}if(2&i){const e=t.$implicit,n=Ze(4);He("ngClass",yr(2,pz,n.isYearSelected(e))),tt(1),cc(" ",e," ")}}function Gne(i,t){if(1&i&&(Pt(0,"div",52),At(1,Hne,2,4,"span",53),Nt()),2&i){const e=Ze(3);tt(1),He("ngForOf",e.yearPickerValues())}}function Wne(i,t){if(1&i&&(js(0),Pt(1,"div",16),At(2,zne,10,7,"div",17),Nt(),At(3,Une,2,1,"div",18),At(4,Gne,2,1,"div",19),$s()),2&i){const e=Ze(2);tt(2),He("ngForOf",e.months),tt(1),He("ngIf","month"===e.currentView),tt(1),He("ngIf","year"===e.currentView)}}function jne(i,t){1&i&&(js(0),ur(1,"0"),$s())}function $ne(i,t){1&i&&(js(0),ur(1,"0"),$s())}function qne(i,t){if(1&i&&(Pt(0,"div",60)(1,"span"),ur(2),Nt()()),2&i){const e=Ze(3);tt(2),ca(e.timeSeparator)}}function Xne(i,t){1&i&&(js(0),ur(1,"0"),$s())}function Yne(i,t){if(1&i){const e=vr();Pt(0,"div",65)(1,"button",57),si("keydown",function(r){return gn(e),vn(Ze(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return gn(e),vn(Ze(3).incrementSecond(r))})("keydown.space",function(r){return gn(e),vn(Ze(3).incrementSecond(r))})("mousedown",function(r){return gn(e),vn(Ze(3).onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){return gn(e),vn(Ze(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return gn(e),vn(Ze(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return gn(e),vn(Ze(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return gn(e),vn(Ze(3).onTimePickerElementMouseLeave())}),Ri(2,"span",58),Nt(),Pt(3,"span"),At(4,Xne,2,0,"ng-container",13),ur(5),Nt(),Pt(6,"button",57),si("keydown",function(r){return gn(e),vn(Ze(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return gn(e),vn(Ze(3).decrementSecond(r))})("keydown.space",function(r){return gn(e),vn(Ze(3).decrementSecond(r))})("mousedown",function(r){return gn(e),vn(Ze(3).onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){return gn(e),vn(Ze(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return gn(e),vn(Ze(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return gn(e),vn(Ze(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return gn(e),vn(Ze(3).onTimePickerElementMouseLeave())}),Ri(7,"span",59),Nt()()}if(2&i){const e=Ze(3);tt(4),He("ngIf",e.currentSecond<10),tt(1),ca(e.currentSecond)}}function Kne(i,t){if(1&i){const e=vr();Pt(0,"div",66)(1,"button",67),si("keydown",function(r){return gn(e),vn(Ze(3).onContainerButtonKeydown(r))})("click",function(r){return gn(e),vn(Ze(3).toggleAMPM(r))})("keydown.enter",function(r){return gn(e),vn(Ze(3).toggleAMPM(r))}),Ri(2,"span",58),Nt(),Pt(3,"span"),ur(4),Nt(),Pt(5,"button",67),si("keydown",function(r){return gn(e),vn(Ze(3).onContainerButtonKeydown(r))})("click",function(r){return gn(e),vn(Ze(3).toggleAMPM(r))})("keydown.enter",function(r){return gn(e),vn(Ze(3).toggleAMPM(r))}),Ri(6,"span",59),Nt()()}if(2&i){const e=Ze(3);tt(4),ca(e.pm?"PM":"AM")}}function Zne(i,t){if(1&i){const e=vr();Pt(0,"div",55)(1,"div",56)(2,"button",57),si("keydown",function(r){return gn(e),vn(Ze(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return gn(e),vn(Ze(2).incrementHour(r))})("keydown.space",function(r){return gn(e),vn(Ze(2).incrementHour(r))})("mousedown",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return gn(e),vn(Ze(2).onTimePickerElementMouseLeave())}),Ri(3,"span",58),Nt(),Pt(4,"span"),At(5,jne,2,0,"ng-container",13),ur(6),Nt(),Pt(7,"button",57),si("keydown",function(r){return gn(e),vn(Ze(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return gn(e),vn(Ze(2).decrementHour(r))})("keydown.space",function(r){return gn(e),vn(Ze(2).decrementHour(r))})("mousedown",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return gn(e),vn(Ze(2).onTimePickerElementMouseLeave())}),Ri(8,"span",59),Nt()(),Pt(9,"div",60)(10,"span"),ur(11),Nt()(),Pt(12,"div",61)(13,"button",57),si("keydown",function(r){return gn(e),vn(Ze(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return gn(e),vn(Ze(2).incrementMinute(r))})("keydown.space",function(r){return gn(e),vn(Ze(2).incrementMinute(r))})("mousedown",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return gn(e),vn(Ze(2).onTimePickerElementMouseLeave())}),Ri(14,"span",58),Nt(),Pt(15,"span"),At(16,$ne,2,0,"ng-container",13),ur(17),Nt(),Pt(18,"button",57),si("keydown",function(r){return gn(e),vn(Ze(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return gn(e),vn(Ze(2).decrementMinute(r))})("keydown.space",function(r){return gn(e),vn(Ze(2).decrementMinute(r))})("mousedown",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return gn(e),vn(Ze(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return gn(e),vn(Ze(2).onTimePickerElementMouseLeave())}),Ri(19,"span",59),Nt()(),At(20,qne,3,1,"div",62),At(21,Yne,8,2,"div",63),At(22,Kne,7,1,"div",64),Nt()}if(2&i){const e=Ze(2);tt(5),He("ngIf",e.currentHour<10),tt(1),ca(e.currentHour),tt(5),ca(e.timeSeparator),tt(5),He("ngIf",e.currentMinute<10),tt(1),ca(e.currentMinute),tt(3),He("ngIf",e.showSeconds),tt(1),He("ngIf",e.showSeconds),tt(1),He("ngIf","12"==e.hourFormat)}}const gz=function(i){return[i]};function Qne(i,t){if(1&i){const e=vr();Pt(0,"div",68)(1,"button",69),si("keydown",function(r){return gn(e),vn(Ze(2).onContainerButtonKeydown(r))})("click",function(r){return gn(e),vn(Ze(2).onTodayButtonClick(r))}),Nt(),Pt(2,"button",69),si("keydown",function(r){return gn(e),vn(Ze(2).onContainerButtonKeydown(r))})("click",function(r){return gn(e),vn(Ze(2).onClearButtonClick(r))}),Nt()()}if(2&i){const e=Ze(2);tt(1),He("label",e.getTranslation("today"))("ngClass",yr(4,gz,e.todayButtonStyleClass)),tt(1),He("label",e.getTranslation("clear"))("ngClass",yr(6,gz,e.clearButtonStyleClass))}}function Jne(i,t){1&i&&Nr(0)}const eie=function(i,t,e,n,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":n,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},mz=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},tie=function(i){return{value:"visibleTouchUI",params:i}},nie=function(i){return{value:"visible",params:i}};function iie(i,t){if(1&i){const e=vr();Pt(0,"div",10,11),si("@overlayAnimation.start",function(r){return gn(e),vn(Ze().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return gn(e),vn(Ze().onOverlayAnimationDone(r))})("click",function(r){return gn(e),vn(Ze().onOverlayClick(r))}),ch(2),At(3,Cne,1,0,"ng-container",12),At(4,Wne,5,3,"ng-container",13),At(5,Zne,23,8,"div",14),At(6,Qne,3,8,"div",15),ch(7,1),At(8,Jne,1,0,"ng-container",12),Nt()}if(2&i){const e=Ze();Us(e.panelStyleClass),He("ngStyle",e.panelStyle)("ngClass",Jb(11,eie,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?yr(21,tie,fa(18,mz,e.showTransitionOptions,e.hideTransitionOptions)):yr(26,nie,fa(23,mz,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),tt(3),He("ngTemplateOutlet",e.headerTemplate),tt(1),He("ngIf",!e.timeOnly),tt(1),He("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),tt(1),He("ngIf",e.showButtonBar),tt(2),He("ngTemplateOutlet",e.footerTemplate)}}const rie=[[["p-header"]],[["p-footer"]]],sie=function(i,t,e,n){return{"p-calendar":!0,"p-calendar-w-btn":i,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":n}},aie=["p-header","p-footer"],oie={provide:Mc,useExisting:Xr(()=>lie),multi:!0};let lie=(()=>{class i{constructor(e,n,r,s,a,u){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.config=a,this.overlayService=u,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new ki,this.onBlur=new ki,this.onClose=new ki,this.onSelect=new ki,this.onClear=new ki,this.onInput=new ki,this.onTodayClick=new ki,this.onClearClick=new ki,this.onMonthChange=new ki,this.onYearChange=new ki,this.onClickOutside=new ki,this.onShow=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(h,m){return"12"==this.hourFormat?12===h?m?12:0:m?h+12:h:h}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const n=e||new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.initTime(n),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const n=e.split(":"),r=parseInt(n[0]),s=parseInt(n[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=fC();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=bn.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,n){this.yearOptions=[];for(let r=e;r<=n;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),n=this.getTranslation(Kc.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(n[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let n=0;n<=11;n++)e.push(this.config.getTranslation("monthNamesShort")[n]);return e}yearPickerValues(){let e=[],n=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(n+r);return e}createMonths(e,n){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,a=n;s>11&&(s=s%11-1,a=n+1),this.months.push(this.createMonth(s,a))}}getWeekNumber(e){let n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));let r=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((r-n.getTime())/864e5)/7)+1}createMonth(e,n){let r=[],s=this.getFirstDayOfMonthIndex(e,n),a=this.getDaysCountInMonth(e,n),u=this.getDaysCountInPrevMonth(e,n),h=1,m=new Date,w=[],T=Math.ceil((a+s)/7);for(let O=0;O<T;O++){let W=[];if(0==O){for(let ue=u-s+1;ue<=u;ue++){let ce=this.getPreviousMonthAndYear(e,n);W.push({day:ue,month:ce.month,year:ce.year,otherMonth:!0,today:this.isToday(m,ue,ce.month,ce.year),selectable:this.isSelectable(ue,ce.month,ce.year,!0)})}let te=7-W.length;for(let ue=0;ue<te;ue++)W.push({day:h,month:e,year:n,today:this.isToday(m,h,e,n),selectable:this.isSelectable(h,e,n,!1)}),h++}else for(let te=0;te<7;te++){if(h>a){let ue=this.getNextMonthAndYear(e,n);W.push({day:h-a,month:ue.month,year:ue.year,otherMonth:!0,today:this.isToday(m,h-a,ue.month,ue.year),selectable:this.isSelectable(h-a,ue.month,ue.year,!0)})}else W.push({day:h,month:e,year:n,today:this.isToday(m,h,e,n),selectable:this.isSelectable(h,e,n,!1)});h++}this.showWeek&&w.push(this.getWeekNumber(new Date(W[0].year,W[0].month,W[0].day))),r.push(W)}return{month:e,year:n,dates:r,weekNumbers:w}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,n){!this.disabled&&n.selectable?(this.isMultipleSelection()&&this.isSelected(n)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,n)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(n)&&this.selectDate(n),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,n){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:n,day:1,selectable:!0}):(this.currentMonth=n,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,n){"year"===this.view?this.onDateSelect(e,{year:n,month:0,day:1,selectable:!0}):(this.currentYear=n,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let n=0;n<this.value.length;n++)e+=this.formatDateTime(this.value[n]),n!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let n=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?n=this.formatTime(e):(n=this.formatDate(e,this.getDateFormat()),this.showTime&&(n+=" "+this.formatTime(e)))),n}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let n=new Date(e.year,e.month,e.day);if(this.showTime&&(n.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.currentSecond)),this.minDate&&this.minDate>n&&(n=this.minDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.maxDate&&this.maxDate<n&&(n=this.maxDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.isSingleSelection())this.updateModel(n);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,n]:[n]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&n.getTime()>=r.getTime()?s=n:(r=n,s=null),this.updateModel([r,s])}else this.updateModel([n,null]);this.onSelect.emit(n)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let n=null;this.value&&(n=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(n)}}getFirstDayOfMonthIndex(e,n){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(n);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,n){return 32-this.daylightSavingAdjust(new Date(n,e,32)).getDate()}getDaysCountInPrevMonth(e,n){let r=this.getPreviousMonthAndYear(e,n);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,n){let r,s;return 0===e?(r=11,s=n-1):(r=e-1,s=n),{month:r,year:s}}getNextMonthAndYear(e,n){let r,s;return 11===e?(r=0,s=n+1):(r=e+1,s=n),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let n=!1;for(let r of this.value)if(n=this.isDateEquals(r,e),n)break;return n}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getMonth()===e&&n.getFullYear()===this.currentYear}return!1}isYearSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getFullYear()===e}return!1}isDateEquals(e,n){return!!(e&&e instanceof Date)&&e.getDate()===n.day&&e.getMonth()===n.month&&e.getFullYear()===n.year}isDateBetween(e,n,r){if(e&&n){let a=new Date(r.year,r.month,r.day);return e.getTime()<=a.getTime()&&n.getTime()>=a.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,n,r,s){return e.getDate()===n&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,n,r,s){let a=!0,u=!0,h=!0,m=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>n||this.minDate.getMonth()===n&&this.minDate.getDate()>e))&&(a=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<n||this.maxDate.getMonth()===n&&this.maxDate.getDate()<e))&&(u=!1),this.disabledDates&&(h=!this.isDateDisabled(e,n,r)),this.disabledDays&&(m=!this.isDayDisabled(e,n,r)),a&&u&&h&&m)}isDateDisabled(e,n,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===n&&s.getDate()===e)return!0;return!1}isDayDisabled(e,n,r){if(this.disabledDays){let a=new Date(r,n,e).getDay();return-1!==this.disabledDays.indexOf(a)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,n){this.overlayVisible?this.hideOverlay():(n.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(bn.getFocusableElements(this.contentViewChild.nativeElement).forEach(n=>n.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,n,r){const s=e.currentTarget,a=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let u=bn.index(a),h=a.parentElement.nextElementSibling;h?bn.hasClass(h.children[u].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(h.children[u].children[0].tabIndex="0",h.children[u].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let u=bn.index(a),h=a.parentElement.previousElementSibling;if(h){let m=h.children[u].children[0];bn.hasClass(m,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(m.tabIndex="0",m.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let u=a.previousElementSibling;if(u){let h=u.children[0];bn.hasClass(h,"p-disabled")||bn.hasClass(h.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(h.tabIndex="0",h.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let u=a.nextElementSibling;if(u){let h=u.children[0];bn.hasClass(h,"p-disabled")?this.navigateToMonth(!1,r):(h.tabIndex="0",h.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,a=bn.index(r);let u=s[40===e.which?a+3:a-3];u&&(u.tabIndex="0",u.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let u=r.previousElementSibling;u?(u.tabIndex="0",u.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let u=r.nextElementSibling;u?(u.tabIndex="0",u.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,n),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,a=bn.index(r);let u=s[40===e.which?a+2:a-2];u&&(u.tabIndex="0",u.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let u=r.previousElementSibling;u?(u.tabIndex="0",u.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let u=r.nextElementSibling;u?(u.tabIndex="0",u.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,n){if(e)if(1===this.numberOfMonths||0===n)this.navigationState={backward:!0},this.navBackward(event);else{let s=bn.find(this.contentViewChild.nativeElement.children[n-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),a=s[s.length-1];a.tabIndex="0",a.focus()}else if(1===this.numberOfMonths||n===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=bn.findSingle(this.contentViewChild.nativeElement.children[n+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?bn.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():bn.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let n;n=bn.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),n&&n.length>0&&(e=n[n.length-1])}else e=bn.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.currentView){let n=bn.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=bn.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&bn.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if("year"===this.currentView){let n=bn.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=bn.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&bn.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if(e=bn.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){let n=bn.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");e=n||bn.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{e.focus()},1),this.preventFocus=!1)}trapFocus(e){let n=bn.getFocusableElements(this.contentViewChild.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)n[n.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else n[r-1].focus();else if(-1==r||r===n.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();n[0].focus()}else n[r+1].focus()}else n[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,n,r,s){let a=this.value;const u=this.convertTo24Hour(e,s);this.isRangeSelection()&&(a=this.value[1]||this.value[0]),this.isMultipleSelection()&&(a=this.value[this.value.length-1]);const h=a?a.toDateString():null;return!(this.minDate&&h&&this.minDate.toDateString()===h&&(this.minDate.getHours()>u||this.minDate.getHours()===u&&(this.minDate.getMinutes()>n||this.minDate.getMinutes()===n&&this.minDate.getSeconds()>r))||this.maxDate&&h&&this.maxDate.toDateString()===h&&(this.maxDate.getHours()<u||this.maxDate.getHours()===u&&(this.maxDate.getMinutes()<n||this.maxDate.getMinutes()===n&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,n,r){this.disabled||(this.repeat(e,null,n,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,n,r,s){let a=n||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},a),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let n=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?n=n<0?24+n:n:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),n=n<=0?12+n:n),this.validateTime(n,this.currentMinute,this.currentSecond,r)&&(this.currentHour=n,this.pm=r),e.preventDefault()}incrementMinute(e){let n=this.currentMinute+this.stepMinute;n=n>59?n-60:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}decrementMinute(e){let n=this.currentMinute-this.stepMinute;n=n<0?60+n:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}incrementSecond(e){let n=this.currentSecond+this.stepSecond;n=n>59?n-60:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}decrementSecond(e){let n=this.currentSecond-this.stepSecond;n=n<0?60+n:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const n=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,n)&&(this.pm=n,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let n=e.target.value;try{let r=this.parseValueFromString(n);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?n:null)}this.filled=null!=n&&n.length,this.onInput.emit(e)}isValidSelection(e){let n=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(n=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(n=e.length>1&&e[1]>e[0]),n}parseValueFromString(e){if(!e||0===e.trim().length)return null;let n;if(this.isSingleSelection())n=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);n=[];for(let s of r)n.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");n=[];for(let s=0;s<r.length;s++)n[s]=this.parseDateTime(r[s].trim())}return n}parseDateTime(e){let n,r=e.split(" ");if(this.timeOnly)n=new Date,this.populateTime(n,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let a="12"==this.hourFormat?r.pop():null,u=r.pop();n=this.parseDate(r.join(" "),s),this.populateTime(n,u,a)}else n=this.parseDate(e,s)}return n}populateTime(e,n,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(n);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&ns.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let n=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?Vu.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Vu.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Vu.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):bn.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=bn.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=bn.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=bn.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",bn.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):bn.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),bn.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),bn.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(bn.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let n,e=document.body.children;for(let r=0;r<e.length;r++)if(bn.hasClass(e[r],"p-datepicker-mask-scrollblocker")){n=!0;break}n||bn.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Kc.FIRST_DAY_OF_WEEK)}formatDate(e,n){if(!e)return"";let r;const s=w=>{const T=r+1<n.length&&n.charAt(r+1)===w;return T&&r++,T},a=(w,T,O)=>{let W=""+T;if(s(w))for(;W.length<O;)W="0"+W;return W},u=(w,T,O,W)=>s(w)?W[T]:O[T];let h="",m=!1;if(e)for(r=0;r<n.length;r++)if(m)"'"!==n.charAt(r)||s("'")?h+=n.charAt(r):m=!1;else switch(n.charAt(r)){case"d":h+=a("d",e.getDate(),2);break;case"D":h+=u("D",e.getDay(),this.getTranslation(Kc.DAY_NAMES_SHORT),this.getTranslation(Kc.DAY_NAMES));break;case"o":h+=a("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=a("m",e.getMonth()+1,2);break;case"M":h+=u("M",e.getMonth(),this.getTranslation(Kc.MONTH_NAMES_SHORT),this.getTranslation(Kc.MONTH_NAMES));break;case"y":h+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?h+="'":m=!0;break;default:h+=n.charAt(r)}return h}formatTime(e){if(!e)return"";let n="",r=e.getHours(),s=e.getMinutes(),a=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),n+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,n+=":",n+=s<10?"0"+s:s,this.showSeconds&&(n+=":",n+=a<10?"0"+a:a),"12"==this.hourFormat&&(n+=e.getHours()>11?" PM":" AM"),n}parseTime(e){let n=e.split(":");if(n.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(n[0]),a=parseInt(n[1]),u=this.showSeconds?parseInt(n[2]):null;if(isNaN(s)||isNaN(a)||s>23||a>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(u)||u>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:a,second:u}}parseDate(e,n){if(null==n||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,a,te,u=0,h="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),m=-1,w=-1,T=-1,O=-1,W=!1,ue=Je=>{let at=r+1<n.length&&n.charAt(r+1)===Je;return at&&r++,at},ce=Je=>{let at=ue(Je),kt="@"===Je?14:"!"===Je?20:"y"===Je&&at?4:"o"===Je?3:2,yn=new RegExp("^\\d{"+("y"===Je?kt:1)+","+kt+"}"),zt=e.substring(u).match(yn);if(!zt)throw"Missing number at position "+u;return u+=zt[0].length,parseInt(zt[0],10)},Ne=(Je,at,kt)=>{let Zt=-1,yn=ue(Je)?kt:at,zt=[];for(let pn=0;pn<yn.length;pn++)zt.push([pn,yn[pn]]);zt.sort((pn,Kn)=>-(pn[1].length-Kn[1].length));for(let pn=0;pn<zt.length;pn++){let Kn=zt[pn][1];if(e.substr(u,Kn.length).toLowerCase()===Kn.toLowerCase()){Zt=zt[pn][0],u+=Kn.length;break}}if(-1!==Zt)return Zt+1;throw"Unknown name at position "+u},et=()=>{if(e.charAt(u)!==n.charAt(r))throw"Unexpected literal at position "+u;u++};for("month"===this.view&&(T=1),r=0;r<n.length;r++)if(W)"'"!==n.charAt(r)||ue("'")?et():W=!1;else switch(n.charAt(r)){case"d":T=ce("d");break;case"D":Ne("D",this.getTranslation(Kc.DAY_NAMES_SHORT),this.getTranslation(Kc.DAY_NAMES));break;case"o":O=ce("o");break;case"m":w=ce("m");break;case"M":w=Ne("M",this.getTranslation(Kc.MONTH_NAMES_SHORT),this.getTranslation(Kc.MONTH_NAMES));break;case"y":m=ce("y");break;case"@":te=new Date(ce("@")),m=te.getFullYear(),w=te.getMonth()+1,T=te.getDate();break;case"!":te=new Date((ce("!")-this.ticksTo1970)/1e4),m=te.getFullYear(),w=te.getMonth()+1,T=te.getDate();break;case"'":ue("'")?et():W=!0;break;default:et()}if(u<e.length&&(a=e.substr(u),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=h?0:-100)),O>-1)for(w=1,T=O;s=this.getDaysCountInMonth(m,w-1),!(T<=s);)w++,T-=s;if("year"===this.view&&(w=-1===w?1:w,T=-1===T?1:T),te=this.daylightSavingAdjust(new Date(m,w-1,T)),te.getFullYear()!==m||te.getMonth()+1!==w||te.getDate()!==T)throw"Invalid date";return te}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let n=new Date,r={day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),otherMonth:n.getMonth()!==this.currentMonth||n.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let n=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<n.length;r++){let{breakpoint:s,numMonths:a}=n[r],u=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${a}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let h=a;h<this.numberOfMonths;h++)u+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${h+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${u}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",n=>{this.isOutsideClicked(n)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(n),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Lx(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return bn.hasClass(e.target,"p-datepicker-prev")||bn.hasClass(e.target,"p-datepicker-prev-icon")||bn.hasClass(e.target,"p-datepicker-next")||bn.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!bn.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Vu.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(p),Tn(Oo),Tn(Zo),Tn(og),Tn(fx))},i.\u0275cmp=hs({type:i,selectors:[["p-calendar"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(gne,5),Rs(mne,5),Rs(vne,5)),2&e){let r;jr(r=$r())&&(n.containerViewChild=r.first),jr(r=$r())&&(n.inputfieldViewChild=r.first),jr(r=$r())&&(n.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&ag("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus)("p-calendar-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[Ro([oie])],ngContentSelectors:aie,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,n){1&e&&(Ep(rie),Pt(0,"span",0,1),At(2,bne,4,17,"ng-template",2),At(3,iie,9,28,"div",3),Nt()),2&e&&(Us(n.styleClass),He("ngClass",ep(6,sie,n.showIcon,n.timeOnly,n.disabled,n.focus))("ngStyle",n.style),tt(2),He("ngIf",!n.inline),tt(1),He("ngIf",n.inline||n.overlayVisible))},dependencies:[vo,Ec,wo,hu,Ho,k0,kh],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[M_("overlayAnimation",[L0("visibleTouchUI",du({transform:"translate(-50%,-50%)",opacity:1})),Lh("void => visible",[du({opacity:0,transform:"scaleY(0.8)"}),Dc("{{showTransitionParams}}",du({opacity:1,transform:"*"}))]),Lh("visible => void",[Dc("{{hideTransitionParams}}",du({opacity:0}))]),Lh("void => visibleTouchUI",[du({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),Dc("{{showTransitionParams}}")]),Lh("visibleTouchUI => void",[Dc("{{hideTransitionParams}}",du({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),i})(),vz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Nv,Pl,Pc,Nv,Pl]}),i})();const uie=["container"],cie=["resizeHelper"],hie=["reorderIndicatorUp"],die=["reorderIndicatorDown"],fie=["wrapper"],pie=["table"],gie=["tableHeader"],mie=["scroller"];function vie(i,t){if(1&i&&(Pt(0,"div",15),Ri(1,"i"),Nt()),2&i){const e=Ze();tt(1),Us("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function _ie(i,t){1&i&&Nr(0)}function yie(i,t){if(1&i&&(Pt(0,"div",16),At(1,_ie,1,0,"ng-container",17),Nt()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.captionTemplate)}}function bie(i,t){if(1&i){const e=vr();Pt(0,"p-paginator",18),si("onPageChange",function(r){return gn(e),vn(Ze().onPageChange(r))}),Nt()}if(2&i){const e=Ze();He("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function Cie(i,t){1&i&&Nr(0)}const _z=function(i,t){return{$implicit:i,options:t}};function wie(i,t){if(1&i&&At(0,Cie,1,0,"ng-container",22),2&i){const e=t.$implicit,n=t.options;Ze(2),He("ngTemplateOutlet",_o(10))("ngTemplateOutletContext",fa(2,_z,e,n))}}const xie=function(i){return{height:i}};function Aie(i,t){if(1&i){const e=vr();Pt(0,"p-scroller",19,20),si("onLazyLoad",function(r){return gn(e),vn(Ze().onLazyItemLoad(r))}),At(2,wie,1,5,"ng-template",21),Nt()}if(2&i){const e=Ze();co(yr(12,xie,"flex"!==e.scrollHeight?e.scrollHeight:void 0)),He("items",e.processedData)("columns",e.columns)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("delay",e.lazy?e.virtualScrollDelay:0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)}}function Iie(i,t){1&i&&Nr(0)}const Sie=function(i){return{columns:i}};function Eie(i,t){if(1&i&&(js(0),At(1,Iie,1,0,"ng-container",22),$s()),2&i){const e=Ze(),n=_o(10);tt(1),He("ngTemplateOutlet",n)("ngTemplateOutletContext",fa(4,_z,e.processedData,yr(2,Sie,e.columns)))}}function Tie(i,t){1&i&&Nr(0)}function Mie(i,t){1&i&&Nr(0)}function Die(i,t){if(1&i&&Ri(0,"tbody",29),2&i){const e=Ze().options,n=Ze();He("value",n.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",n.frozenBodyTemplate)("frozen",!0)}}function Pie(i,t){1&i&&Nr(0)}const Ox=function(i){return{$implicit:i}};function Lie(i,t){if(1&i&&(Pt(0,"tfoot",30),At(1,Pie,1,0,"ng-container",22),Nt()),2&i){const e=Ze().options,n=Ze();tt(1),He("ngTemplateOutlet",n.footerGroupedTemplate||n.footerTemplate)("ngTemplateOutletContext",yr(2,Ox,e.columns))}}function kie(i,t){if(1&i&&(Pt(0,"table",23,24),At(2,Tie,1,0,"ng-container",22),Pt(3,"thead",25),At(4,Mie,1,0,"ng-container",22),Nt(),At(5,Die,1,5,"tbody",26),Ri(6,"tbody",27),At(7,Lie,2,4,"tfoot",28),Nt()),2&i){const e=t.options,n=Ze();co(e.spacerStyle),He("ngClass",n.tableStyleClass)("ngStyle",n.tableStyle),xs("id",n.id+"-table"),tt(2),He("ngTemplateOutlet",n.colGroupTemplate)("ngTemplateOutletContext",yr(18,Ox,e.columns)),tt(2),He("ngTemplateOutlet",n.headerGroupedTemplate||n.headerTemplate)("ngTemplateOutletContext",yr(20,Ox,e.columns)),tt(1),He("ngIf",n.frozenValue||n.frozenBodyTemplate),tt(1),co(e.contentStyle),He("ngClass",e.contentStyleClass)("value",n.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",n.bodyTemplate)("scrollerOptions",e),tt(1),He("ngIf",n.footerGroupedTemplate||n.footerTemplate)}}function Rie(i,t){if(1&i){const e=vr();Pt(0,"p-paginator",31),si("onPageChange",function(r){return gn(e),vn(Ze().onPageChange(r))}),Nt()}if(2&i){const e=Ze();He("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function Oie(i,t){1&i&&Nr(0)}function Fie(i,t){if(1&i&&(Pt(0,"div",32),At(1,Oie,1,0,"ng-container",17),Nt()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.summaryTemplate)}}function Nie(i,t){1&i&&Ri(0,"div",33,34)}function Bie(i,t){1&i&&Ri(0,"span",35,36)}function zie(i,t){1&i&&Ri(0,"span",37,38)}const Vie=function(i,t,e,n,r,s,a,u,h,m,w,T,O,W){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":i,"p-datatable-auto-layout":t,"p-datatable-resizable":e,"p-datatable-resizable-fit":n,"p-datatable-scrollable":r,"p-datatable-scrollable-vertical":s,"p-datatable-scrollable-horizontal":a,"p-datatable-scrollable-both":u,"p-datatable-flex-scrollable":h,"p-datatable-responsive-stack":m,"p-datatable-responsive-scroll":w,"p-datatable-responsive":T,"p-datatable-grouped-header":O,"p-datatable-grouped-footer":W}},Uie=function(i){return{maxHeight:i}},Hie=["pTableBody",""];function Gie(i,t){1&i&&Nr(0)}const JI=function(i,t,e,n,r){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r}};function Wie(i,t){if(1&i&&(js(0,3),At(1,Gie,1,0,"ng-container",4),$s()),2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze(2);tt(1),He("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",v0(2,JI,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function jie(i,t){1&i&&Nr(0)}function $ie(i,t){if(1&i&&(js(0),At(1,jie,1,0,"ng-container",4),$s()),2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze(2);tt(1),He("ngTemplateOutlet",s.template)("ngTemplateOutletContext",v0(2,JI,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function qie(i,t){1&i&&Nr(0)}const Xie=function(i,t,e,n,r,s,a){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r,rowgroup:s,rowspan:a}};function Yie(i,t){if(1&i&&(js(0),At(1,qie,1,0,"ng-container",4),$s()),2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze(2);tt(1),He("ngTemplateOutlet",s.template)("ngTemplateOutletContext",function _3(i,t,e,n,r,s,a,u,h,m){const w=Yo()+i,T=br();let O=Wg(T,w,e,n,r,s);return EA(T,w+4,a,u,h)||O?xv(T,w+7,m?t.call(m,e,n,r,s,a,u,h):t(e,n,r,s,a,u,h)):Rw(T,w+7)}(2,Xie,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen,s.shouldRenderRowspan(s.value,n,s.getRowIndex(r)),s.calculateRowGroupSize(s.value,n,s.getRowIndex(r))))}}function Kie(i,t){1&i&&Nr(0)}function Zie(i,t){if(1&i&&(js(0,3),At(1,Kie,1,0,"ng-container",4),$s()),2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze(2);tt(1),He("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",v0(2,JI,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Qie(i,t){if(1&i&&(At(0,Wie,2,8,"ng-container",2),At(1,$ie,2,8,"ng-container",0),At(2,Yie,2,10,"ng-container",0),At(3,Zie,2,8,"ng-container",2)),2&i){const e=t.$implicit,n=t.index,r=Ze(2);He("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),tt(1),He("ngIf","rowspan"!==r.dt.rowGroupMode),tt(1),He("ngIf","rowspan"===r.dt.rowGroupMode),tt(1),He("ngIf",r.dt.groupFooterTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,r.getRowIndex(n)))}}function Jie(i,t){if(1&i&&(js(0),At(1,Qie,4,4,"ng-template",1),$s()),2&i){const e=Ze();tt(1),He("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function ere(i,t){1&i&&Nr(0)}function tre(i,t){if(1&i&&At(0,ere,1,0,"ng-container",4),2&i){const e=t.$implicit,n=t.index,r=Ze(2);He("ngTemplateOutlet",e?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",v0(2,JI,e,r.getRowIndex(n),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen))}}function nre(i,t){if(1&i&&(js(0),At(1,tre,1,8,"ng-template",1),$s()),2&i){const e=Ze();tt(1),He("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function ire(i,t){1&i&&Nr(0)}const eS=function(i,t,e,n,r,s){return{$implicit:i,rowIndex:t,columns:e,expanded:n,editing:r,frozen:s}};function rre(i,t){if(1&i&&(js(0),At(1,ire,1,0,"ng-container",4),$s()),2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze(2);tt(1),He("ngTemplateOutlet",s.template)("ngTemplateOutletContext",Jb(2,eS,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function sre(i,t){1&i&&Nr(0)}function are(i,t){if(1&i&&(js(0,3),At(1,sre,1,0,"ng-container",4),$s()),2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze(2);tt(1),He("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",Jb(2,eS,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function ore(i,t){1&i&&Nr(0)}function lre(i,t){1&i&&Nr(0)}function ure(i,t){if(1&i&&(js(0,3),At(1,lre,1,0,"ng-container",4),$s()),2&i){const e=Ze(2),n=e.$implicit,r=e.index,s=Ze(2);tt(1),He("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",Jb(2,eS,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}const yz=function(i,t,e,n){return{$implicit:i,rowIndex:t,columns:e,frozen:n}};function cre(i,t){if(1&i&&(js(0),At(1,ore,1,0,"ng-container",4),At(2,ure,2,9,"ng-container",2),$s()),2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze(2);tt(1),He("ngTemplateOutlet",s.dt.expandedRowTemplate)("ngTemplateOutletContext",ep(3,yz,n,s.getRowIndex(r),s.columns,s.frozen)),tt(1),He("ngIf",s.dt.groupFooterTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,n,s.getRowIndex(r)))}}function hre(i,t){if(1&i&&(At(0,rre,2,9,"ng-container",0),At(1,are,2,9,"ng-container",2),At(2,cre,3,8,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=Ze(2);He("ngIf",!r.dt.groupHeaderTemplate),tt(1),He("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),tt(1),He("ngIf",r.dt.isRowExpanded(e))}}function dre(i,t){if(1&i&&(js(0),At(1,hre,3,3,"ng-template",1),$s()),2&i){const e=Ze();tt(1),He("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function fre(i,t){1&i&&Nr(0)}function pre(i,t){1&i&&Nr(0)}function gre(i,t){if(1&i&&(js(0),At(1,pre,1,0,"ng-container",4),$s()),2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze(2);tt(1),He("ngTemplateOutlet",s.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",ep(2,yz,n,s.getRowIndex(r),s.columns,s.frozen))}}function mre(i,t){if(1&i&&(At(0,fre,1,0,"ng-container",4),At(1,gre,2,7,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=Ze(2);He("ngTemplateOutlet",r.template)("ngTemplateOutletContext",Jb(3,eS,e,r.getRowIndex(n),r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),tt(1),He("ngIf",r.dt.isRowExpanded(e))}}function vre(i,t){if(1&i&&(js(0),At(1,mre,2,10,"ng-template",1),$s()),2&i){const e=Ze();tt(1),He("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function _re(i,t){1&i&&Nr(0)}const bz=function(i,t){return{$implicit:i,frozen:t}};function yre(i,t){if(1&i&&(js(0),At(1,_re,1,0,"ng-container",4),$s()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",fa(2,bz,e.columns,e.frozen))}}function bre(i,t){1&i&&Nr(0)}function Cre(i,t){if(1&i&&(js(0),At(1,bre,1,0,"ng-container",4),$s()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",fa(2,bz,e.columns,e.frozen))}}function wre(i,t){if(1&i&&(Pt(0,"span",2),ur(1),Nt()),2&i){const e=Ze();tt(1),ca(e.getBadgeValue())}}const xre=function(i,t,e){return{"pi-sort-amount-up-alt":i,"pi-sort-amount-down":t,"pi-sort-alt":e}},Cz=function(i,t){return{"p-checkbox-focused":i,"p-checkbox-disabled":t}},Sre=function(i,t,e){return{"p-checkbox-box p-component":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}},wz=function(i){return{"pi pi-check":i}},Ere=function(i,t,e){return{"p-checkbox-box":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}};let Fx=(()=>{class i{constructor(){this.sortSource=new xt,this.selectionSource=new xt,this.contextMenuSource=new xt,this.valueSource=new xt,this.totalRecordsSource=new xt,this.columnsSource=new xt,this.resetSource=new xt,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),by=(()=>{class i{constructor(e,n,r,s,a,u){this.el=e,this.zone=n,this.tableService=r,this.cd=s,this.filterService=a,this.overlayService=u,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new ki,this.selectionChange=new ki,this.contextMenuSelectionChange=new ki,this.contextMenuSelectionMode="separate",this.rowTrackBy=(h,m)=>m,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new ki,this.onRowUnselect=new ki,this.onPage=new ki,this.onSort=new ki,this.onFilter=new ki,this.onLazyLoad=new ki,this.onRowExpand=new ki,this.onRowCollapse=new ki,this.onContextMenuSelect=new ki,this.onColResize=new ki,this.onColReorder=new ki,this.onRowReorder=new ki,this.onEditInit=new ki,this.onEditComplete=new ki,this.onEditCancel=new ki,this.onHeaderCheckboxToggle=new ki,this.sortFunction=new ki,this.firstChange=new ki,this.rowsChange=new ki,this.onStateSave=new ki,this.onStateRestore=new ki,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=fC()}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get processedData(){return this.filteredValue||this.value||[]}dataToRender(e){const n=e||this.processedData;if(n&&this.paginator){const r=this.lazy?0:this.first;return n.slice(r,r+this.rows)}return n}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(ns.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(ns.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,n=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&n){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:n}):(this.value.sort((s,a)=>{let u=ns.resolveFieldData(s,e),h=ns.resolveFieldData(a,e),m=null;return m=null==u&&null!=h?-1:null!=u&&null==h?1:null==u&&null==h?0:"string"==typeof u&&"string"==typeof h?u.localeCompare(h):u<h?-1:u>h?1:0,n*m}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:n};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,n)=>this.multisortField(e,n,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,n,r,s){let a=ns.resolveFieldData(e,r[s].field),u=ns.resolveFieldData(n,r[s].field),h=null;if(null==a&&null!=u)h=-1;else if(null!=a&&null==u)h=1;else if(null==a&&null==u)h=0;else if("string"==typeof a||a instanceof String){if(a.localeCompare&&a!=u)return r[s].order*a.localeCompare(u)}else h=a<u?-1:1;return a==u?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*h}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}handleRowClick(e){let n=e.originalEvent.target,r=n.nodeName,s=n.parentElement&&n.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!bn.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let a=e.rowData,u=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)bn.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=u,this.selectRange(e.originalEvent,u);else{let h=this.isSelected(a);if(!h&&!this.isRowSelectable(a,u))return;let m=!this.rowTouched&&this.metaKeySelection,w=this.dataKey?String(ns.resolveFieldData(a,this.dataKey)):null;if(this.anchorRowIndex=u,this.rangeRowIndex=u,m){let T=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(h&&T){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let O=this.findIndexInSelection(a);this._selection=this.selection.filter((W,te)=>te!=O),this.selectionChange.emit(this.selection),w&&delete this.selectionKeys[w]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:a,type:"row"})}else this.isSingleSelectionMode()?(this._selection=a,this.selectionChange.emit(a),w&&(this.selectionKeys={},this.selectionKeys[w]=1)):this.isMultipleSelectionMode()&&(T?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,a],this.selectionChange.emit(this.selection),w&&(this.selectionKeys[w]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:u})}else if("single"===this.selectionMode)h?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:u})):(this._selection=a,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:u}),w&&(this.selectionKeys={},this.selectionKeys[w]=1));else if("multiple"===this.selectionMode)if(h){let T=this.findIndexInSelection(a);this._selection=this.selection.filter((O,W)=>W!=T),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:u}),w&&delete this.selectionKeys[w]}else this._selection=this.selection?[...this.selection,a]:[a],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:u}),w&&(this.selectionKeys[w]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:n,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let s=this.isSelected(n),a=this.dataKey?String(ns.resolveFieldData(n,this.dataKey)):null;if(!s){if(!this.isRowSelectable(n,r))return;this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n),a&&(this.selectionKeys={},this.selectionKeys[a]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),a&&(this.selectionKeys[a]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:n,index:e.rowIndex})}}}selectRange(e,n){let r,s;this.anchorRowIndex>n?(r=n,s=this.anchorRowIndex):this.anchorRowIndex<n?(r=this.anchorRowIndex,s=n):(r=n,s=n),this.lazy&&this.paginator&&(r-=this.first,s-=this.first);let a=[];for(let u=r;u<=s;u++){let h=this.filteredValue?this.filteredValue[u]:this.value[u];if(!this.isSelected(h)){if(!this.isRowSelectable(h,n))continue;a.push(h),this._selection=[...this.selection,h];let m=this.dataKey?String(ns.resolveFieldData(h,this.dataKey)):null;m&&(this.selectionKeys[m]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:a,type:"row"})}clearSelectionRange(e){let n,r;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,r=this.anchorRowIndex):(n=this.rangeRowIndex,r=this.rangeRowIndex);for(let s=n;s<=r;s++){let a=this.value[s],u=this.findIndexInSelection(a);this._selection=this.selection.filter((m,w)=>w!=u);let h=this.dataKey?String(ns.resolveFieldData(a,this.dataKey)):null;h&&delete this.selectionKeys[h],this.onRowUnselect.emit({originalEvent:e,data:a,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[ns.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isRowSelectable(e,n){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:n}))}toggleRowWithRadio(e,n){if(this.preventSelectionSetterPropagation=!0,this.selection!=n){if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=n,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(ns.resolveFieldData(n,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,n){this.selection=this.selection||[];let r=this.isSelected(n),s=this.dataKey?String(ns.resolveFieldData(n,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let a=this.findIndexInSelection(n);this._selection=this.selection.filter((u,h)=>h!=a),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&delete this.selectionKeys[s]}else{if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&(this.selectionKeys[s]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,n){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:n});else{const r=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let s=this.selectionPageOnly&&this._selection?this._selection.filter(a=>!r.some(u=>this.equals(a,u))):[];n&&(s=this.frozenValue?[...s,...this.frozenValue,...r]:[...s,...r],s=this.rowSelectable?s.filter((a,u)=>this.rowSelectable({data:a,index:u})):s),this._selection=s,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n}),this.isStateful()&&this.saveState()}}equals(e,n){return"equals"===this.compareSelectionBy?e===n:ns.equals(e,n,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let n=0;n<this.value.length;n++){let u,r=!0,s=!1,a=!1;for(let h in this.filters)if(this.filters.hasOwnProperty(h)&&"global"!==h){a=!0;let m=h,w=this.filters[m];if(Array.isArray(w)){for(let T of w)if(r=this.executeLocalFilter(m,this.value[n],T),T.operator===ZB.OR&&r||T.operator===ZB.AND&&!r)break}else r=this.executeLocalFilter(m,this.value[n],w);if(!r)break}if(this.filters.global&&!s&&e)for(let h=0;h<e.length&&(s=this.filterService.filters[this.filters.global.matchMode](ns.resolveFieldData(this.value[n],e[h].field||e[h]),this.filters.global.value,this.filterLocale),!s);h++);u=this.filters.global?a?a&&r&&s:s:a&&r,u&&this.filteredValue.push(this.value[n])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,n,r){let s=r.value,a=r.matchMode||$d.STARTS_WITH,u=ns.resolveFieldData(n,e);return(0,this.filterService.filters[a])(u,s,this.filterLocale)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let n,r="",s=this.columns;e&&e.selectionOnly?n=this.selection||[]:(n=this.filteredValue||this.value,this.frozenValue&&(n=n?[...this.frozenValue,...n]:this.frozenValue));for(let h=0;h<s.length;h++){let m=s[h];!1!==m.exportable&&m.field&&(r+='"'+this.getExportHeader(m)+'"',h<s.length-1&&(r+=this.csvSeparator))}n.forEach((h,m)=>{r+="\n";for(let w=0;w<s.length;w++){let T=s[w];if(!1!==T.exportable&&T.field){let O=ns.resolveFieldData(h,T.field);O=null!=O?this.exportFunction?this.exportFunction({data:O,field:T.field}):String(O).replace(/"/g,'""'):"",r+='"'+O+'"',w<s.length-1&&(r+=this.csvSeparator)}}});let a=new Blob([r],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a");u.style.display="none",document.body.appendChild(u),void 0!==u.download?(u.setAttribute("href",URL.createObjectURL(a)),u.setAttribute("download",this.exportFilename+".csv"),u.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(u)}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,n,r,s){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.editingCellRowIndex=s,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===bn.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(bn.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let n=String(ns.resolveFieldData(e,this.dataKey));this.editingRowKeys[n]=!0}saveRowEdit(e,n){if(0===bn.find(n,".ng-invalid.ng-dirty").length){let r=String(ns.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let n=String(ns.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[n]}toggleRow(e,n){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(ns.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:n,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:n,data:e})),n&&n.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(ns.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(ns.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let n=bn.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let n=bn.getOffset(this.containerViewChild.nativeElement).left;bn.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let u=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&u>15&&this.resizeTableCells(r,u)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+e+"px"),this.resizeTableCells(r,null));this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",bn.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,n){let r=bn.index(this.resizeColumnElement),s=[];const a=bn.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");bn.find(a,"tr > th").forEach(m=>s.push(bn.getOuterWidth(m))),this.destroyStyleElement(),this.createStyleElement();let h="";s.forEach((m,w)=>{let T=w===r?e:n&&w===r+1?n:m;h+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${w+1}),\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${w+1}),\n                #${this.id} .p-datatable-tfoot > tr > td:nth-child(${w+1}) {\n                    ${this.scrollable?`flex: 1 1 ${T}px !important`:`width: ${T}px !important`}\n                }\n            `}),this.styleElement.innerHTML=h}onColumnDragStart(e,n){this.reorderIconWidth=bn.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=bn.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=bn.getOffset(this.containerViewChild.nativeElement),s=bn.getOffset(n);if(this.draggedColumn!=n){let a=bn.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),u=bn.indexWithinGroup(n,"preorderablecolumn"),h=s.left-r.left,w=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>w?(this.reorderIndicatorUpViewChild.nativeElement.style.left=h+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=h+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=h-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=h-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),u-a==1&&-1===this.dropPosition||u-a==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=bn.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=bn.indexWithinGroup(n,"preorderablecolumn"),a=r!=s;a&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(a=!1),a&&s<r&&1===this.dropPosition&&(s+=1),a&&s>r&&-1===this.dropPosition&&(s-=1),a&&(ns.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,n){this.rowDragging=!0,this.draggedRowIndex=n,e.dataTransfer.setData("text","b")}onRowDragOver(e,n,r){if(this.rowDragging&&this.draggedRowIndex!==n){let s=bn.getOffset(r).top+bn.getWindowScrollTop(),a=e.pageY,u=s+bn.getOuterHeight(r)/2,h=r.previousElementSibling;a<u?(bn.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=n,h?bn.addClass(h,"p-datatable-dragpoint-bottom"):bn.addClass(r,"p-datatable-dragpoint-top")):(h?bn.removeClass(h,"p-datatable-dragpoint-bottom"):bn.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=n+1,bn.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,n){let r=n.previousElementSibling;r&&bn.removeClass(r,"p-datatable-dragpoint-bottom"),bn.removeClass(n,"p-datatable-dragpoint-bottom"),bn.removeClass(n,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,n){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;ns.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,n),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let n={};this.paginator&&(n.first=this.first,n.rows=this.rows),this.sortField&&(n.sortField=this.sortField,n.sortOrder=this.sortOrder),this.multiSortMeta&&(n.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&this.saveColumnOrder(n),this.selection&&(n.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(n.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(n)),this.onStateSave.emit(n)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const n=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(n){let a=JSON.parse(n,function(a,u){return"string"==typeof u&&r.test(u)?new Date(u):u});this.paginator&&(void 0!==this.first&&(this.first=a.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=a.rows,this.rowsChange.emit(this.rows))),a.sortField&&(this.restoringSort=!0,this._sortField=a.sortField,this._sortOrder=a.sortOrder),a.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=a.multiSortMeta),a.filters&&(this.restoringFilter=!0,this.filters=a.filters),this.resizableColumns&&(this.columnWidthsState=a.columnWidths,this.tableWidthState=a.tableWidth),a.expandedRowKeys&&(this.expandedRowKeys=a.expandedRowKeys),a.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(a.selection)),this.stateRestored=!0,this.onStateRestore.emit(a)}}saveColumnWidths(e){let n=[];bn.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(s=>n.push(bn.getOuterWidth(s))),e.columnWidths=n.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=bn.getOuterWidth(this.tableViewChild.nativeElement)+"px")}setResizeTableWidth(e){if(this.virtualScroll){const n=bn.findSingle(this.containerViewChild.nativeElement,".p-scroller > table > tbody");n.style.width=e,n.style.minWidth=e}this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),ns.isNotEmpty(e)){this.createStyleElement();let n="";e.forEach((r,s)=>{n+=`\n                        #${this.id} .p-datatable-thead > tr > th:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tbody > tr > td:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tfoot > tr > td:nth-child(${s+1}) {\n                            ${this.scrollable?`flex: 1 1 ${r}px !important`:`width: ${r}px !important`}\n                        }\n                    `}),this.styleElement.innerHTML=n}}}saveColumnOrder(e){if(this.columns){let n=[];this.columns.map(r=>{n.push(r.field||r.key)}),e.columnOrder=n}}restoreColumnOrder(){const n=this.getStorage().getItem(this.stateKey);if(n){let s=JSON.parse(n).columnOrder;if(s){let a=[];s.map(u=>{let h=this.findColumnByKey(u);h&&a.push(h)}),this.columnOrderStateRestored=!0,this.columns=a}}}findColumnByKey(e){if(!this.columns)return null;for(let n of this.columns)if(n.key===e||n.field===e)return n}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(Zo),Tn(Fx),Tn(Oo),Tn(dx),Tn(fx))},i.\u0275cmp=hs({type:i,selectors:[["p-table"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(uie,5),Rs(cie,5),Rs(hie,5),Rs(die,5),Rs(fie,5),Rs(pie,5),Rs(gie,5),Rs(mie,5)),2&e){let r;jr(r=$r())&&(n.containerViewChild=r.first),jr(r=$r())&&(n.resizeHelperViewChild=r.first),jr(r=$r())&&(n.reorderIndicatorUpViewChild=r.first),jr(r=$r())&&(n.reorderIndicatorDownViewChild=r.first),jr(r=$r())&&(n.wrapperViewChild=r.first),jr(r=$r())&&(n.tableViewChild=r.first),jr(r=$r())&&(n.tableHeaderViewChild=r.first),jr(r=$r())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[Ro([Fx]),Tl],decls:16,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(Pt(0,"div",0,1),At(2,vie,2,2,"div",2),At(3,yie,2,1,"div",3),At(4,bie,1,17,"p-paginator",4),Pt(5,"div",5,6),At(7,Aie,3,14,"p-scroller",7),At(8,Eie,2,7,"ng-container",8),At(9,kie,8,22,"ng-template",null,9,hc),Nt(),At(11,Rie,1,17,"p-paginator",10),At(12,Fie,2,1,"div",11),At(13,Nie,2,0,"div",12),At(14,Bie,2,0,"span",13),At(15,zie,2,0,"span",14),Nt()),2&e&&(Us(n.styleClass),He("ngStyle",n.style)("ngClass",_M(16,Vie,[n.rowHover||n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable,n.scrollable&&"vertical"===n.scrollDirection,n.scrollable&&"horizontal"===n.scrollDirection,n.scrollable&&"both"===n.scrollDirection,n.scrollable&&"flex"===n.scrollHeight,"stack"===n.responsiveLayout,"scroll"===n.responsiveLayout,n.responsive,null!=n.headerGroupedTemplate,null!=n.footerGroupedTemplate])),xs("id",n.id),tt(2),He("ngIf",n.loading&&n.showLoader),tt(1),He("ngIf",n.captionTemplate),tt(1),He("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),tt(1),He("ngStyle",yr(31,Uie,n.virtualScroll?"":n.scrollHeight)),tt(2),He("ngIf",n.virtualScroll),tt(1),He("ngIf",!n.virtualScroll),tt(3),He("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),tt(1),He("ngIf",n.summaryTemplate),tt(1),He("ngIf",n.resizableColumns),tt(1),He("ngIf",n.reorderableColumns),tt(1),He("ngIf",n.reorderableColumns))},dependencies:function(){return[vo,wo,hu,Ho,hz,Kl,kx,Kre]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;min-width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper>table,.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-thead,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot{display:block}.p-datatable-scrollable .p-datatable-thead>tr,.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-thead>tr>th,.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-thead,.p-datatable-scrollable>.p-datatable-wrapper>.p-scroller-viewport>.p-scroller>.p-datatable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th .p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td{display:table-cell}.p-datatable-scrollable .p-scroller>.p-datatable-table{display:inline-block}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-thead>tr>th,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),Kre=(()=>{class i{constructor(e,n,r,s){this.dt=e,this.tableService=n,this.cd=r,this.el=s,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition(),this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.updateScrollerPosition()}ngOnChanges(e){if(e.scrollerOptions){const{previousValue:n,currentValue:r}=e.scrollerOptions;this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.getScrollerOption("itemSize",n)!==this.getScrollerOption("itemSize",r)&&this.updateScrollerPosition()}}shouldRenderRowGroupHeader(e,n,r){let s=ns.resolveFieldData(n,this.dt.groupRowsBy),a=e[r-1];return!a||s!==ns.resolveFieldData(a,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,n,r){let s=ns.resolveFieldData(n,this.dt.groupRowsBy),a=e[r+1];return!a||s!==ns.resolveFieldData(a,this.dt.groupRowsBy)}shouldRenderRowspan(e,n,r){let s=ns.resolveFieldData(n,this.dt.groupRowsBy),a=e[r-1];return!a||s!==ns.resolveFieldData(a,this.dt.groupRowsBy)}calculateRowGroupSize(e,n,r){let s=ns.resolveFieldData(n,this.dt.groupRowsBy),a=s,u=0;for(;s===a;){u++;let h=e[++r];if(!h)break;a=ns.resolveFieldData(h,this.dt.groupRowsBy)}return 1===u?null:u}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=bn.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=bn.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}updateScrollerPosition(){const e=bn.getOuterHeight(this.el.nativeElement.previousElementSibling);this.el.nativeElement.style.top=(this.el.nativeElement.style.top||0)+e+"px"}getScrollerOption(e,n){return this.dt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.dt.paginator?this.dt.first+e:e,r=this.getScrollerOption("getItemOptions");return r?r(n).index:n}}return i.\u0275fac=function(e){return new(e||i)(Tn(by),Tn(Fx),Tn(Oo),Tn($i))},i.\u0275cmp=hs({type:i,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},features:[Tl],attrs:Hie,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(At(0,Jie,2,2,"ng-container",0),At(1,nre,2,2,"ng-container",0),At(2,dre,2,2,"ng-container",0),At(3,vre,2,2,"ng-container",0),At(4,yre,2,5,"ng-container",0),At(5,Cre,2,5,"ng-container",0)),2&e&&(He("ngIf",!n.dt.expandedRowTemplate&&!n.dt.virtualScroll),tt(1),He("ngIf",!n.dt.expandedRowTemplate&&n.dt.virtualScroll),tt(1),He("ngIf",n.dt.expandedRowTemplate&&!(n.frozen&&n.dt.frozenExpandedRowTemplate)),tt(1),He("ngIf",n.dt.frozenExpandedRowTemplate&&n.frozen),tt(1),He("ngIf",n.dt.loading),tt(1),He("ngIf",n.dt.isEmpty()&&!n.dt.loading))},dependencies:[Ec,wo,hu],encapsulation:2}),i})(),q2=(()=>{class i{constructor(e){this.dt=e,this.isEnabled()&&(this.subscription=this.dt.tableService.sortSource$.subscribe(n=>{this.updateSortState()}))}ngOnInit(){this.isEnabled()&&this.updateSortState()}updateSortState(){this.sorted=this.dt.isSorted(this.field),this.sortOrder=this.sorted?1===this.dt.sortOrder?"ascending":"descending":"none"}onClick(e){this.isEnabled()&&!this.isFilterElement(e.target)&&(this.updateSortState(),this.dt.sort({originalEvent:e,field:this.field}),bn.clearSelection())}onEnterKey(e){this.onClick(e)}isEnabled(){return!0!==this.pSortableColumnDisabled}isFilterElement(e){return bn.hasClass(e,"pi-filter-icon")||bn.hasClass(e,"p-column-filter-menu-button")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn(by))},i.\u0275dir=Qs({type:i,selectors:[["","pSortableColumn",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(e,n){1&e&&si("click",function(s){return n.onClick(s)})("keydown.enter",function(s){return n.onEnterKey(s)}),2&e&&(xs("tabindex",n.isEnabled()?"0":null)("role","columnheader")("aria-sort",n.sortOrder),ag("p-sortable-column",n.isEnabled())("p-highlight",n.sorted))},inputs:{field:["pSortableColumn","field"],pSortableColumnDisabled:"pSortableColumnDisabled"}}),i})(),X2=(()=>{class i{constructor(e,n){this.dt=e,this.cd=n,this.subscription=this.dt.tableService.sortSource$.subscribe(r=>{this.updateSortState()})}ngOnInit(){this.updateSortState()}onClick(e){e.preventDefault()}updateSortState(){if("single"===this.dt.sortMode)this.sortOrder=this.dt.isSorted(this.field)?this.dt.sortOrder:0;else if("multiple"===this.dt.sortMode){let e=this.dt.getSortMeta(this.field);this.sortOrder=e?e.order:0}this.cd.markForCheck()}getMultiSortMetaIndex(){let e=this.dt._multiSortMeta,n=-1;if(e&&"multiple"===this.dt.sortMode&&(this.dt.showInitialSortBadge||e.length>1))for(let r=0;r<e.length;r++){let s=e[r];if(s.field===this.field||s.field===this.field){n=r;break}}return n}getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.dt.groupRowsBy&&e>-1?e:e+1}isMultiSorted(){return"multiple"===this.dt.sortMode&&this.getMultiSortMetaIndex()>-1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn(by),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-sortIcon"]],hostAttrs:[1,"p-element"],inputs:{field:"field"},decls:2,vars:6,consts:[[1,"p-sortable-column-icon","pi","pi-fw",3,"ngClass"],["class","p-sortable-column-badge",4,"ngIf"],[1,"p-sortable-column-badge"]],template:function(e,n){1&e&&(Ri(0,"i",0),At(1,wre,2,1,"span",1)),2&e&&(He("ngClass",Th(2,xre,1===n.sortOrder,-1===n.sortOrder,0===n.sortOrder)),tt(1),He("ngIf",n.isMultiSorted()))},dependencies:[vo,wo],encapsulation:2,changeDetection:0}),i})(),Y2=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.dt.isSelected(this.value),this.cd.markForCheck()})}ngOnInit(){this.checked=this.dt.isSelected(this.value)}onClick(e){this.disabled||this.dt.toggleRowWithCheckbox({originalEvent:e,rowIndex:this.index},this.value),bn.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn(by),Tn(Fx),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-tableCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",value:"value",index:"index",inputId:"inputId",name:"name",required:"required",ariaLabel:"ariaLabel"},decls:6,vars:19,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(Pt(0,"div",0),si("click",function(s){return n.onClick(s)}),Pt(1,"div",1)(2,"input",2),si("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),Nt()(),Pt(3,"div",3,4),Ri(5,"span",5),Nt()()),2&e&&(He("ngClass",fa(10,Cz,n.focused,n.disabled)),tt(2),He("checked",n.checked)("disabled",n.disabled),xs("id",n.inputId)("name",n.name)("required",n.required)("aria-label",n.ariaLabel),tt(1),He("ngClass",Th(13,Sre,n.checked,n.focused,n.disabled)),xs("aria-checked",n.checked),tt(2),He("ngClass",yr(17,wz,n.checked)))},dependencies:[vo],encapsulation:2,changeDetection:0}),i})(),K2=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.valueChangeSubscription=this.dt.tableService.valueSource$.subscribe(()=>{this.checked=this.updateCheckedState()}),this.selectionChangeSubscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.updateCheckedState()})}ngOnInit(){this.checked=this.updateCheckedState()}onClick(e){this.disabled||this.dt.value&&this.dt.value.length>0&&this.dt.toggleRowsWithCheckbox(e,!this.checked),bn.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}isDisabled(){return this.disabled||!this.dt.value||!this.dt.value.length}ngOnDestroy(){this.selectionChangeSubscription&&this.selectionChangeSubscription.unsubscribe(),this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe()}updateCheckedState(){if(this.cd.markForCheck(),null!==this.dt._selectAll)return this.dt._selectAll;{const e=this.dt.selectionPageOnly?this.dt.dataToRender(this.dt.processedData):this.dt.processedData,n=this.dt.frozenValue?[...this.dt.frozenValue,...e]:e,r=this.dt.rowSelectable?n.filter((s,a)=>this.dt.rowSelectable({data:s,index:a})):n;return ns.isNotEmpty(r)&&ns.isNotEmpty(this.dt.selection)&&r.every(s=>this.dt.selection.some(a=>this.dt.equals(s,a)))}}}return i.\u0275fac=function(e){return new(e||i)(Tn(by),Tn(Fx),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-tableHeaderCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",inputId:"inputId",name:"name",ariaLabel:"ariaLabel"},decls:7,vars:18,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["cb",""],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(Pt(0,"div",0),si("click",function(s){return n.onClick(s)}),Pt(1,"div",1)(2,"input",2,3),si("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),Nt()(),Pt(4,"div",4,5),Ri(6,"span",6),Nt()()),2&e&&(He("ngClass",fa(9,Cz,n.focused,n.isDisabled())),tt(2),He("checked",n.checked)("disabled",n.isDisabled()),xs("id",n.inputId)("name",n.name)("aria-label",n.ariaLabel),tt(2),He("ngClass",Th(12,Ere,n.checked,n.focused,n.isDisabled())),xs("aria-checked",n.checked),tt(2),He("ngClass",yr(16,wz,n.checked)))},dependencies:[vo],encapsulation:2,changeDetection:0}),i})(),Zre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,dz,j2,YI,XI,Nv,one,vz,ZI,pne,Fv,Pl,Fv]}),i})(),Qre=(()=>{class i{constructor(e){this.el=e}onkeydown(e){if(!0!==this.pFocusTrapDisabled){e.preventDefault();let n=bn.getFocusableElements(this.el.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}}return i.\u0275fac=function(e){return new(e||i)(Tn($i))},i.\u0275dir=Qs({type:i,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,n){1&e&&si("keydown.tab",function(s){return n.onkeydown(s)})("keydown.shift.tab",function(s){return n.onkeydown(s)})},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),i})(),Jre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();const ese=["titlebar"],tse=["content"],nse=["footer"];function ise(i,t){if(1&i){const e=vr();Pt(0,"div",11),si("mousedown",function(r){return gn(e),vn(Ze(3).initResize(r))}),Nt()}}function rse(i,t){if(1&i&&(Pt(0,"span",18),ur(1),Nt()),2&i){const e=Ze(4);xs("id",e.id+"-label"),tt(1),ca(e.header)}}function sse(i,t){1&i&&(Pt(0,"span",18),ch(1,1),Nt()),2&i&&xs("id",Ze(4).id+"-label")}function ase(i,t){1&i&&Nr(0)}const ose=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function lse(i,t){if(1&i){const e=vr();Pt(0,"button",19),si("click",function(){return gn(e),vn(Ze(4).maximize())})("keydown.enter",function(){return gn(e),vn(Ze(4).maximize())}),Ri(1,"span",20),Nt()}if(2&i){const e=Ze(4);He("ngClass",mo(2,ose)),tt(1),He("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}const use=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function cse(i,t){if(1&i){const e=vr();Pt(0,"button",21),si("click",function(r){return gn(e),vn(Ze(4).close(r))})("keydown.enter",function(r){return gn(e),vn(Ze(4).close(r))}),Ri(1,"span",22),Nt()}if(2&i){const e=Ze(4);He("ngClass",mo(4,use)),xs("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),tt(1),He("ngClass",e.closeIcon)}}function hse(i,t){if(1&i){const e=vr();Pt(0,"div",12,13),si("mousedown",function(r){return gn(e),vn(Ze(3).initDrag(r))}),At(2,rse,2,2,"span",14),At(3,sse,2,1,"span",14),At(4,ase,1,0,"ng-container",9),Pt(5,"div",15),At(6,lse,2,3,"button",16),At(7,cse,2,5,"button",17),Nt()()}if(2&i){const e=Ze(3);tt(2),He("ngIf",!e.headerFacet&&!e.headerTemplate),tt(1),He("ngIf",e.headerFacet),tt(1),He("ngTemplateOutlet",e.headerTemplate),tt(2),He("ngIf",e.maximizable),tt(1),He("ngIf",e.closable)}}function dse(i,t){1&i&&Nr(0)}function fse(i,t){1&i&&Nr(0)}function pse(i,t){if(1&i&&(Pt(0,"div",23,24),ch(2,2),At(3,fse,1,0,"ng-container",9),Nt()),2&i){const e=Ze(3);tt(3),He("ngTemplateOutlet",e.footerTemplate)}}const gse=function(i,t,e,n){return{"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":t,"p-dialog-resizable":e,"p-dialog-maximized":n}},mse=function(i,t){return{transform:i,transition:t}},vse=function(i){return{value:"visible",params:i}};function _se(i,t){if(1&i){const e=vr();Pt(0,"div",3,4),si("@animation.start",function(r){return gn(e),vn(Ze(2).onAnimationStart(r))})("@animation.done",function(r){return gn(e),vn(Ze(2).onAnimationEnd(r))}),At(2,ise,1,0,"div",5),At(3,hse,8,5,"div",6),Pt(4,"div",7,8),ch(6),At(7,dse,1,0,"ng-container",9),Nt(),At(8,pse,4,1,"div",10),Nt()}if(2&i){const e=Ze(2);Us(e.styleClass),He("ngClass",ep(15,gse,e.rtl,e.draggable,e.resizable,e.maximized))("ngStyle",e.style)("pFocusTrapDisabled",!1===e.focusTrap)("@animation",yr(23,vse,fa(20,mse,e.transformOptions,e.transitionOptions))),xs("aria-labelledby",e.id+"-label"),tt(2),He("ngIf",e.resizable),tt(1),He("ngIf",e.showHeader),tt(1),Us(e.contentStyleClass),He("ngClass","p-dialog-content")("ngStyle",e.contentStyle),tt(3),He("ngTemplateOutlet",e.contentTemplate),tt(1),He("ngIf",e.footerFacet||e.footerTemplate)}}const yse=function(i,t,e,n,r,s,a,u,h,m){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":t,"p-dialog-left":e,"p-dialog-right":n,"p-dialog-top":r,"p-dialog-top-left":s,"p-dialog-top-right":a,"p-dialog-bottom":u,"p-dialog-bottom-left":h,"p-dialog-bottom-right":m}};function bse(i,t){if(1&i&&(Pt(0,"div",1),At(1,_se,9,25,"div",2),Nt()),2&i){const e=Ze();Us(e.maskStyleClass),He("ngClass",_M(4,yse,[e.modal,e.modal||e.blockScroll,"left"===e.position,"right"===e.position,"top"===e.position,"topleft"===e.position||"top-left"===e.position,"topright"===e.position||"top-right"===e.position,"bottom"===e.position,"bottomleft"===e.position||"bottom-left"===e.position,"bottomright"===e.position||"bottom-right"===e.position])),tt(1),He("ngIf",e.visible)}}const Cse=["*",[["p-header"]],[["p-footer"]]],wse=["*","p-header","p-footer"],xse=mC([du({transform:"{{transform}}",opacity:0}),Dc("{{transition}}")]),Ase=mC([Dc("{{transition}}",du({transform:"{{transform}}",opacity:0}))]);let tS=(()=>{class i{constructor(e,n,r,s,a){this.el=e,this.renderer=n,this.zone=r,this.cd=s,this.config=a,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.closeTabindex="-1",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new ki,this.onHide=new ki,this.visibleChange=new ki,this.onResizeInit=new ki,this.onResizeEnd=new ki,this.onDragEnd=new ki,this.onMaximize=new ki,this.id=fC(),this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle()}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style={...e},this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let e=bn.findSingle(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&bn.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&bn.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?bn.addClass(document.body,"p-overflow-hidden"):bn.removeClass(document.body,"p-overflow-hidden")),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(Vu.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints)e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[n]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}initDrag(e){bn.hasClass(e.target,"p-dialog-header-icon")||bn.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",bn.addClass(document.body,"p-unselectable-text"))}onKeydown(e){if(this.focusTrap&&9===e.which){e.preventDefault();let n=bn.getFocusableElements(this.container);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}onDrag(e){if(this.dragging){let n=bn.getOuterWidth(this.container),r=bn.getOuterHeight(this.container),s=e.pageX-this.lastPageX,a=e.pageY-this.lastPageY,u=this.container.getBoundingClientRect(),h=u.left+s,m=u.top+a,w=bn.getViewport();this.container.style.position="fixed",this.keepInViewport?(h>=this.minX&&h+n<w.width&&(this._style.left=h+"px",this.lastPageX=e.pageX,this.container.style.left=h+"px"),m>=this.minY&&m+r<w.height&&(this._style.top=m+"px",this.lastPageY=e.pageY,this.container.style.top=m+"px")):(this.lastPageX=e.pageX,this.container.style.left=h+"px",this.lastPageY=e.pageY,this.container.style.top=m+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,bn.removeClass(document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,bn.addClass(document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let n=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,s=bn.getOuterWidth(this.container),a=bn.getOuterHeight(this.container),u=bn.getOuterHeight(this.contentViewChild.nativeElement),h=s+n,m=a+r,w=this.container.style.minWidth,T=this.container.style.minHeight,O=this.container.getBoundingClientRect(),W=bn.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(h+=n,m+=r),(!w||h>parseInt(w))&&O.left+h<W.width&&(this._style.width=h+"px",this.container.style.width=this._style.width),(!T||m>parseInt(T))&&O.top+m<W.height&&(this.contentViewChild.nativeElement.style.height=u+m-a+"px",this._style.height&&(this._style.height=m+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,bn.removeClass(document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{27==n.which&&this.close(n)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):bn.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&bn.addClass(document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&bn.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(bn.removeClass(document.body,"p-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&bn.removeClass(document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&Vu.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?{...this.originalStyle}:{}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(p),Tn(Zo),Tn(Oo),Tn(og))},i.\u0275cmp=hs({type:i,selectors:[["p-dialog"]],contentQueries:function(e,n,r){if(1&e&&(Yl(r,e2,5),Yl(r,EI,5),Yl(r,Kl,4)),2&e){let s;jr(s=$r())&&(n.headerFacet=s.first),jr(s=$r())&&(n.footerFacet=s.first),jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(ese,5),Rs(tse,5),Rs(nse,5)),2&e){let r;jr(r=$r())&&(n.headerViewChild=r.first),jr(r=$r())&&(n.contentViewChild=r.first),jr(r=$r())&&(n.footerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:"draggable",resizable:"resizable",positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:"modal",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",rtl:"rtl",closable:"closable",responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",showHeader:"showHeader",breakpoint:"breakpoint",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",maximizable:"maximizable",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},ngContentSelectors:wse,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["content",""],[4,"ngTemplateOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"],["footer",""]],template:function(e,n){1&e&&(Ep(Cse),At(0,bse,2,15,"div",0)),2&e&&He("ngIf",n.maskVisible)},dependencies:[vo,wo,hu,Ho,Qre,kh],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translate(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0px!important;left:0px!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[M_("animation",[Lh("void => visible",[tz(xse)]),Lh("visible => void",[tz(Ase)])])]},changeDetection:0}),i})(),Ise=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Jre,Pc,Pl]}),i})();const xz=["container"],Sse=function(i,t,e,n){return{"pi-info-circle":i,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":n}};function Ese(i,t){if(1&i&&(js(0),Ri(1,"span",6),Pt(2,"div",7)(3,"div",8),ur(4),Nt(),Pt(5,"div",9),ur(6),Nt()(),$s()),2&i){const e=Ze();tt(1),Us("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),He("ngClass",ep(5,Sse,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),tt(3),ca(e.message.summary),tt(2),ca(e.message.detail)}}function Tse(i,t){1&i&&Nr(0)}function Mse(i,t){if(1&i){const e=vr();Pt(0,"button",10),si("click",function(r){return gn(e),vn(Ze().onCloseIconClick(r))})("keydown.enter",function(r){return gn(e),vn(Ze().onCloseIconClick(r))}),Ri(1,"span",11),Nt()}}const Dse=function(i){return[i,"p-toast-message"]},Pse=function(i,t,e,n){return{showTransformParams:i,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:n}},Lse=function(i){return{value:"visible",params:i}},kse=function(i){return{$implicit:i}};function Rse(i,t){if(1&i){const e=vr();Pt(0,"p-toastItem",3),si("onClose",function(r){return gn(e),vn(Ze().onMessageClose(r))})("@toastAnimation.start",function(r){return gn(e),vn(Ze().onAnimationStart(r))})("@toastAnimation.done",function(r){return gn(e),vn(Ze().onAnimationEnd(r))}),Nt()}if(2&i){const e=t.$implicit,n=t.index,r=Ze();He("message",e)("index",n)("template",r.template)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}let Ose=(()=>{class i{constructor(e){this.zone=e,this.onClose=new ki}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return i.\u0275fac=function(e){return new(e||i)(Tn(Zo))},i.\u0275cmp=hs({type:i,selectors:[["p-toastItem"]],viewQuery:function(e,n){if(1&e&&Rs(xz,5),2&e){let r;jr(r=$r())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,n){1&e&&(Pt(0,"div",0,1),si("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()}),Pt(2,"div",2),At(3,Ese,7,10,"ng-container",3),At(4,Tse,1,0,"ng-container",4),At(5,Mse,2,0,"button",5),Nt()()),2&e&&(Us(n.message.styleClass),He("ngClass",yr(10,Dse,"p-toast-message-"+n.message.severity))("@messageState",yr(17,Lse,ep(12,Pse,n.showTransformOptions,n.hideTransformOptions,n.showTransitionOptions,n.hideTransitionOptions))),xs("id",n.message.id),tt(2),He("ngClass",n.message.contentStyleClass),tt(1),He("ngIf",!n.template),tt(1),He("ngTemplateOutlet",n.template)("ngTemplateOutletContext",yr(19,kse,n.message)),tt(1),He("ngIf",!1!==n.message.closable))},dependencies:[vo,wo,hu,kh],encapsulation:2,data:{animation:[M_("messageState",[L0("visible",du({transform:"translateY(0)",opacity:1})),Lh("void => *",[du({transform:"{{showTransformParams}}",opacity:0}),Dc("{{showTransitionParams}}")]),Lh("* => void",[Dc("{{hideTransitionParams}}",du({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),i})(),Nx=(()=>{class i{constructor(e,n,r){this.messageService=e,this.cd=n,this.config=r,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new ki,this.id=fC()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const n=e.filter(r=>this.canAdd(r));this.add(n)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let n=this.key===e.key;return n&&this.preventOpenDuplicates&&(n=!this.containsMessage(this.messages,e)),n&&this.preventDuplicates&&(n=!this.containsMessage(this.messagesArchieve,e)),n}containsMessage(e,n){return!!e&&null!=e.find(r=>r.summary===n.summary&&r.detail==n.detail&&r.severity===n.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&Vu.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&ns.isEmpty(this.messages)&&Vu.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints){let r="";for(let s in this.breakpoints[n])r+=s+":"+this.breakpoints[n][s]+" !important;";e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-toast[${this.id}] {\n                           ${r}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Vu.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Tn(Hm),Tn(Oo),Tn(og))},i.\u0275cmp=hs({type:i,selectors:[["p-toast"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&Rs(xz,5),2&e){let r;jr(r=$r())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,n){1&e&&(Pt(0,"div",0,1),At(2,Rse,1,8,"p-toastItem",2),Nt()),2&e&&(Us(n.styleClass),He("ngClass","p-toast p-component p-toast-"+n.position)("ngStyle",n.style),tt(2),He("ngForOf",n.messages))},dependencies:[vo,Ec,Ho,Ose],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[M_("toastAnimation",[Lh(":enter, :leave",[WJ("@*",GJ())])])]},changeDetection:0}),i})(),Az=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pc,Pl]}),i})();function Fse(i,t){1&i&&Ri(0,"span",11),2&i&&He("innerHTML",Ze(2).$implicit.summary,zl)}function Nse(i,t){1&i&&Ri(0,"span",12),2&i&&He("innerHTML",Ze(2).$implicit.detail,zl)}function Bse(i,t){if(1&i&&(js(0),At(1,Fse,1,1,"span",9),At(2,Nse,1,1,"span",10),$s()),2&i){const e=Ze().$implicit;tt(1),He("ngIf",e.summary),tt(1),He("ngIf",e.detail)}}function zse(i,t){if(1&i&&(Pt(0,"span",15),ur(1),Nt()),2&i){const e=Ze(2).$implicit;tt(1),ca(e.summary)}}function Vse(i,t){if(1&i&&(Pt(0,"span",16),ur(1),Nt()),2&i){const e=Ze(2).$implicit;tt(1),ca(e.detail)}}function Use(i,t){if(1&i&&(At(0,zse,2,1,"span",13),At(1,Vse,2,1,"span",14)),2&i){const e=Ze().$implicit;He("ngIf",e.summary),tt(1),He("ngIf",e.detail)}}function Hse(i,t){if(1&i){const e=vr();Pt(0,"button",17),si("click",function(){gn(e);const r=Ze().index;return vn(Ze(2).removeMessage(r))}),Ri(1,"i",18),Nt()}}const Gse=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Wse=function(i){return{value:"visible",params:i}},jse=function(i,t,e,n){return{"pi-info-circle":i,"pi-check":t,"pi-exclamation-triangle":e,"pi-times-circle":n}};function $se(i,t){if(1&i&&(Pt(0,"div",4)(1,"div",5),Ri(2,"span",6),At(3,Bse,3,2,"ng-container",1),At(4,Use,2,2,"ng-template",null,7,hc),At(6,Hse,2,0,"button",8),Nt()()),2&i){const e=t.$implicit,n=_o(5),r=Ze(2);Us("p-message p-message-"+e.severity),He("@messageAnimation",yr(12,Wse,fa(9,Gse,r.showTransitionOptions,r.hideTransitionOptions))),tt(2),Us("p-message-icon pi"+(e.icon?" "+e.icon:"")),He("ngClass",ep(14,jse,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),tt(1),He("ngIf",!r.escape)("ngIfElse",n),tt(3),He("ngIf",r.closable)}}function qse(i,t){if(1&i&&(js(0),At(1,$se,7,19,"div",3),$s()),2&i){const e=Ze();tt(1),He("ngForOf",e.value)}}function Xse(i,t){1&i&&Nr(0)}function Yse(i,t){if(1&i&&(Pt(0,"div",19)(1,"div",5),At(2,Xse,1,0,"ng-container",20),Nt()()),2&i){const e=Ze();He("ngClass","p-message p-message-"+e.severity),tt(2),He("ngTemplateOutlet",e.contentTemplate)}}let Kse=(()=>{class i{constructor(e,n,r){this.messageService=e,this.el=n,this.cd=r,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new ki}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){if(e instanceof Array){let n=e.filter(r=>this.key===r.key);this.value=this.value?[...this.value,...n]:[...n]}else this.key===e.key&&(this.value=this.value?[...this.value,e]:[e]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(e){this.value=this.value.filter((n,r)=>r!==e),this.valueChange.emit(this.value)}get icon(){const e=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn(Hm,8),Tn($i),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-messages"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(Pt(0,"div",0),At(1,qse,2,1,"ng-container",1),At(2,Yse,3,2,"ng-template",null,2,hc),Nt()),2&e){const r=_o(3);Us(n.styleClass),He("ngStyle",n.style),tt(1),He("ngIf",!n.contentTemplate)("ngIfElse",r)}},dependencies:[vo,Ec,wo,hu,Ho,kh],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[M_("messageAnimation",[Lh(":enter",[du({opacity:0,transform:"translateY(-25%)"}),Dc("{{showTransitionParams}}")]),Lh(":leave",[Dc("{{hideTransitionParams}}",du({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),i})(),Iz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pc]}),i})();function Zse(i,t){if(1&i&&(Pt(0,"div",5),ur(1),Nt()),2&i){const e=Ze(2);bf("display",null!=e.value&&0!==e.value?"flex":"none"),tt(1),Bw("",e.value,"",e.unit,"")}}function Qse(i,t){if(1&i&&(Pt(0,"div",3),At(1,Zse,2,4,"div",4),Nt()),2&i){const e=Ze();bf("width",e.value+"%"),tt(1),He("ngIf",e.showValue)}}function Jse(i,t){1&i&&(Pt(0,"div",6),Ri(1,"div",7),Nt())}const eae=function(i,t){return{"p-progressbar p-component":!0,"p-progressbar-determinate":i,"p-progressbar-indeterminate":t}};let tae=(()=>{class i{constructor(){this.showValue=!0,this.unit="%",this.mode="determinate"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=hs({type:i,selectors:[["p-progressBar"]],hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",style:"style",styleClass:"styleClass",unit:"unit",mode:"mode"},decls:3,vars:10,consts:[["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],["class","p-progressbar-label",3,"display",4,"ngIf"],[1,"p-progressbar-label"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(e,n){1&e&&(Pt(0,"div",0),At(1,Qse,2,3,"div",1),At(2,Jse,2,0,"div",2),Nt()),2&e&&(Us(n.styleClass),He("ngStyle",n.style)("ngClass",fa(7,eae,"determinate"===n.mode,"indeterminate"===n.mode)),xs("aria-valuenow",n.value),tt(1),He("ngIf","determinate"===n.mode),tt(1),He("ngIf","indeterminate"===n.mode))},dependencies:[vo,wo,Ho],styles:['.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0}),i})(),Z2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();const nae=["advancedfileinput"],iae=["basicfileinput"],rae=["content"];function sae(i,t){if(1&i){const e=vr();Pt(0,"p-button",17),si("onClick",function(){return gn(e),vn(Ze(2).upload())}),Nt()}if(2&i){const e=Ze(2);He("label",e.uploadButtonLabel)("icon",e.uploadIcon)("disabled",!e.hasFiles()||e.isFileLimitExceeded())}}function aae(i,t){if(1&i){const e=vr();Pt(0,"p-button",17),si("onClick",function(){return gn(e),vn(Ze(2).clear())}),Nt()}if(2&i){const e=Ze(2);He("label",e.cancelButtonLabel)("icon",e.cancelIcon)("disabled",!e.hasFiles()||e.uploading)}}function oae(i,t){1&i&&Nr(0)}function lae(i,t){1&i&&Ri(0,"p-progressBar",18),2&i&&He("value",Ze(2).progress)("showValue",!1)}function uae(i,t){if(1&i&&Ri(0,"img",26),2&i){const e=Ze().$implicit,n=Ze(4);He("src",e.objectURL,Hd)("width",n.previewWidth)}}function cae(i,t){if(1&i){const e=vr();Pt(0,"div",22)(1,"div"),At(2,uae,1,2,"img",23),Nt(),Pt(3,"div",24),ur(4),Nt(),Pt(5,"div"),ur(6),Nt(),Pt(7,"div")(8,"button",25),si("click",function(r){const a=gn(e).index;return vn(Ze(4).remove(r,a))}),Nt()()()}if(2&i){const e=t.$implicit,n=Ze(4);tt(2),He("ngIf",n.isImage(e)),tt(2),ca(e.name),tt(2),ca(n.formatSize(e.size)),tt(2),He("disabled",n.uploading)}}function hae(i,t){if(1&i&&(Pt(0,"div"),At(1,cae,9,4,"div",21),Nt()),2&i){const e=Ze(3);tt(1),He("ngForOf",e.files)}}function dae(i,t){}function fae(i,t){if(1&i&&(Pt(0,"div"),At(1,dae,0,0,"ng-template",27),Nt()),2&i){const e=Ze(3);tt(1),He("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function pae(i,t){if(1&i&&(Pt(0,"div",19),At(1,hae,2,1,"div",20),At(2,fae,2,2,"div",20),Nt()),2&i){const e=Ze(2);tt(1),He("ngIf",!e.fileTemplate),tt(1),He("ngIf",e.fileTemplate)}}function gae(i,t){1&i&&Nr(0)}const mae=function(i,t){return{"p-focus":i,"p-disabled":t}},vae=function(i){return{$implicit:i}};function _ae(i,t){if(1&i){const e=vr();Pt(0,"div",2)(1,"div",3)(2,"span",4),si("focus",function(){return gn(e),vn(Ze().onFocus())})("blur",function(){return gn(e),vn(Ze().onBlur())})("click",function(){return gn(e),vn(Ze().choose())})("keydown.enter",function(){return gn(e),vn(Ze().choose())}),Pt(3,"input",5,6),si("change",function(r){return gn(e),vn(Ze().onFileSelect(r))}),Nt(),Ri(5,"span",7),Pt(6,"span",8),ur(7),Nt()(),At(8,sae,1,3,"p-button",9),At(9,aae,1,3,"p-button",9),At(10,oae,1,0,"ng-container",10),Nt(),Pt(11,"div",11,12),si("dragenter",function(r){return gn(e),vn(Ze().onDragEnter(r))})("dragleave",function(r){return gn(e),vn(Ze().onDragLeave(r))})("drop",function(r){return gn(e),vn(Ze().onDrop(r))}),At(13,lae,1,2,"p-progressBar",13),Ri(14,"p-messages",14),At(15,pae,3,2,"div",15),At(16,gae,1,0,"ng-container",16),Nt()()}if(2&i){const e=Ze();Us(e.styleClass),He("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),tt(2),He("ngClass",fa(22,mae,e.focus,e.disabled||e.isChooseDisabled())),tt(1),He("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),xs("title",""),tt(2),Us(e.chooseIcon),He("ngClass","p-button-icon p-button-icon-left"),tt(2),ca(e.chooseButtonLabel),tt(1),He("ngIf",!e.auto&&e.showUploadButton),tt(1),He("ngIf",!e.auto&&e.showCancelButton),tt(1),He("ngTemplateOutlet",e.toolbarTemplate),tt(3),He("ngIf",e.hasFiles()),tt(1),He("value",e.msgs)("enableService",!1),tt(1),He("ngIf",e.hasFiles()),tt(1),He("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",yr(25,vae,e.files))}}function yae(i,t){if(1&i){const e=vr();Pt(0,"input",32,33),si("change",function(r){return gn(e),vn(Ze(2).onFileSelect(r))})("focus",function(){return gn(e),vn(Ze(2).onFocus())})("blur",function(){return gn(e),vn(Ze(2).onBlur())}),Nt()}if(2&i){const e=Ze(2);He("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled)}}const bae=function(i,t,e,n){return{"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":i,"p-fileupload-choose-selected":t,"p-focus":e,"p-disabled":n}};function Cae(i,t){if(1&i){const e=vr();Pt(0,"div",28),Ri(1,"p-messages",14),Pt(2,"span",29),si("mouseup",function(){return gn(e),vn(Ze().onBasicUploaderClick())})("keydown",function(r){return gn(e),vn(Ze().onBasicKeydown(r))}),Ri(3,"span",30),Pt(4,"span",8),ur(5),Nt(),At(6,yae,2,3,"input",31),Nt()()}if(2&i){const e=Ze();tt(1),He("value",e.msgs)("enableService",!1),tt(1),Us(e.styleClass),He("ngClass",ep(9,bae,!e.chooseLabel,e.hasFiles(),e.focus,e.disabled))("ngStyle",e.style),tt(1),He("ngClass",e.hasFiles()&&!e.auto?e.uploadIcon:e.chooseIcon),tt(2),ca(e.auto?e.chooseLabel:e.hasFiles()?e.files[0].name:e.chooseLabel),tt(1),He("ngIf",!e.hasFiles())}}let Sz=(()=>{class i{constructor(e,n,r,s,a,u){this.el=e,this.sanitizer=n,this.zone=r,this.http=s,this.cd=a,this.config=u,this.method="post",this.invalidFileSizeMessageSummary="{0}: Invalid file size, ",this.invalidFileSizeMessageDetail="maximum upload size is {0}.",this.invalidFileTypeMessageSummary="{0}: Invalid file type, ",this.invalidFileTypeMessageDetail="allowed file types: {0}.",this.invalidFileLimitMessageDetail="limit is {0} at most.",this.invalidFileLimitMessageSummary="Maximum number of files exceeded, ",this.previewWidth=50,this.chooseIcon="pi pi-plus",this.uploadIcon="pi pi-upload",this.cancelIcon="pi pi-times",this.showUploadButton=!0,this.showCancelButton=!0,this.mode="advanced",this.onBeforeUpload=new ki,this.onSend=new ki,this.onUpload=new ki,this.onError=new ki,this.onClear=new ki,this.onRemove=new ki,this.onSelect=new ki,this.onProgress=new ki,this.uploadHandler=new ki,this._files=[],this.progress=0,this.uploadedFileCount=0}set files(e){this._files=[];for(let n=0;n<e.length;n++){let r=e[n];this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[n]))),this._files.push(e[n]))}}get files(){return this._files}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"file":default:this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){"advanced"===this.mode&&this.zone.runOutsideAngular(()=>{this.content&&this.content.nativeElement.addEventListener("dragover",this.onDragOver.bind(this))})}choose(){this.advancedFileInput.nativeElement.click()}onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.msgs=[],this.multiple||(this.files=[]);let n=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let r=0;r<n.length;r++){let s=n[r];this.isFileSelected(s)||this.validate(s)&&(this.isImage(s)&&(s.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(n[r]))),this.files.push(n[r]))}this.onSelect.emit({originalEvent:e,files:n,currentFiles:this.files}),this.fileLimit&&"advanced"==this.mode&&this.checkFileLimit(),this.hasFiles()&&this.auto&&("advanced"!==this.mode||!this.isFileLimitExceeded())&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let n of this.files)if(n.name+n.type+n.size===e.name+e.type+e.size)return!0;return!1}isIE11(){return!!window.MSInputMethodContext&&!!document.documentMode}validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):!(this.maxFileSize&&e.size>this.maxFileSize&&(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),1))}isFileTypeValid(e){let n=this.accept.split(",").map(r=>r.trim());for(let r of n)if(this.isWildcard(r)?this.getTypeClass(e.type)===this.getTypeClass(r):e.type==r||this.getFileExtension(e).toLowerCase()===r.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return-1!==e.indexOf("*")}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let n=0;n<this.files.length;n++)e.append(this.name,this.files[n],this.files[n].name);this.http[this.method](this.url,e,{headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(n=>{switch(n.type){case Tc.Sent:this.onSend.emit({originalEvent:n,formData:e});break;case Tc.Response:this.uploading=!1,this.progress=0,n.status>=200&&n.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:n,files:this.files})):this.onError.emit({files:this.files}),this.clear();break;case Tc.UploadProgress:n.loaded&&(this.progress=Math.round(100*n.loaded/n.total)),this.onProgress.emit({originalEvent:n,progress:this.progress})}this.cd.markForCheck()},n=>{this.uploading=!1,this.onError.emit({files:this.files,error:n})})}}clear(){this.files=[],this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,n){this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[n]}),this.files.splice(n,1)}isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount}isChooseDisabled(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(){this.isFileLimitExceeded()&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(bn.addClass(this.content.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||bn.removeClass(this.content.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){bn.removeClass(this.content.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let n=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||n&&1===n.length)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){if(0==e)return"0 B";let a=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,a)).toFixed(3))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault()}}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(Kc.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(Kc.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(Kc.CANCEL)}ngOnDestroy(){this.content&&this.content.nativeElement&&this.content.nativeElement.removeEventListener("dragover",this.onDragOver),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(yN),Tn(Zo),Tn(aI),Tn(Oo),Tn(og))},i.\u0275cmp=hs({type:i,selectors:[["p-fileUpload"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(nae,5),Rs(iae,5),Rs(rae,5)),2&e){let r;jr(r=$r())&&(n.advancedFileInput=r.first),jr(r=$r())&&(n.basicFileInput=r.first),jr(r=$r())&&(n.content=r.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:"multiple",accept:"accept",disabled:"disabled",auto:"auto",withCredentials:"withCredentials",maxFileSize:"maxFileSize",invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:"previewWidth",chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:"showUploadButton",showCancelButton:"showCancelButton",mode:"mode",headers:"headers",customUpload:"customUpload",fileLimit:"fileLimit",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler"},decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"p-fileupload-buttonbar"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"ngClass","focus","blur","click","keydown.enter"],["type","file",3,"multiple","accept","disabled","change"],["advancedfileinput",""],[3,"ngClass"],[1,"p-button-label"],["type","button",3,"label","icon","disabled","onClick",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],["content",""],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"label","icon","disabled","onClick"],[3,"value","showValue"],[1,"p-fileupload-files"],[4,"ngIf"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[3,"src","width",4,"ngIf"],[1,"p-fileupload-filename"],["type","button","icon","pi pi-times","pButton","",3,"disabled","click"],[3,"src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"ngClass","ngStyle","mouseup","keydown"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur"],["basicfileinput",""]],template:function(e,n){1&e&&(At(0,_ae,17,27,"div",0),At(1,Cae,7,14,"div",1)),2&e&&(He("ngIf","advanced"===n.mode),tt(1),He("ngIf","basic"===n.mode))},dependencies:[vo,Ec,wo,hu,Ho,k0,KI,tae,Kse,kh],styles:[".p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}\n"],encapsulation:2,changeDetection:0}),i})(),wae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl,Nv,Z2,Iz,Pc,Pl,Nv,Z2,Iz]}),i})();function xae(i,t){1&i&&Nr(0)}function Aae(i,t){if(1&i&&(Pt(0,"div",3),At(1,xae,1,0,"ng-container",4),Nt()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.leftTemplate)}}function Iae(i,t){1&i&&Nr(0)}function Sae(i,t){if(1&i&&(Pt(0,"div",5),At(1,Iae,1,0,"ng-container",4),Nt()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.rightTemplate)}}const Eae=["*"];let Q2=(()=>{class i{constructor(e){this.el=e}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"left":this.leftTemplate=e.template;break;case"right":this.rightTemplate=e.template}})}}return i.\u0275fac=function(e){return new(e||i)(Tn($i))},i.\u0275cmp=hs({type:i,selectors:[["p-toolbar"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:Eae,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(e,n){1&e&&(Ep(),Pt(0,"div",0),ch(1),At(2,Aae,2,1,"div",1),At(3,Sae,2,1,"div",2),Nt()),2&e&&(Us(n.styleClass),He("ngClass","p-toolbar p-component")("ngStyle",n.style),tt(2),He("ngIf",n.leftTemplate),tt(1),He("ngIf",n.rightTemplate))},dependencies:[vo,wo,hu,Ho],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),i})(),Tae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();function Mae(i,t){1&i&&Ri(0,"i",8),2&i&&(Us(Ze(2).confirmation.icon),He("ngClass","p-confirm-popup-icon"))}function Dae(i,t){if(1&i){const e=vr();Pt(0,"button",9),si("click",function(){return gn(e),vn(Ze(2).reject())}),Nt()}if(2&i){const e=Ze(2);Us(e.confirmation.rejectButtonStyleClass||"p-button-text"),He("icon",e.confirmation.rejectIcon)("label",e.rejectButtonLabel)("ngClass","p-confirm-popup-reject p-button-sm"),xs("aria-label",e.rejectButtonLabel)}}function Pae(i,t){if(1&i){const e=vr();Pt(0,"button",9),si("click",function(){return gn(e),vn(Ze(2).accept())}),Nt()}if(2&i){const e=Ze(2);Us(e.confirmation.acceptButtonStyleClass),He("icon",e.confirmation.acceptIcon)("label",e.acceptButtonLabel)("ngClass","p-confirm-popup-accept p-button-sm"),xs("aria-label",e.acceptButtonLabel)}}const Lae=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},kae=function(i){return{value:"open",params:i}};function Rae(i,t){if(1&i){const e=vr();Pt(0,"div",1),si("click",function(r){return gn(e),vn(Ze().onOverlayClick(r))})("@animation.start",function(r){return gn(e),vn(Ze().onAnimationStart(r))})("@animation.done",function(r){return gn(e),vn(Ze().onAnimationEnd(r))}),Pt(1,"div",2,3),At(3,Mae,1,3,"i",4),Pt(4,"span",5),ur(5),Nt()(),Pt(6,"div",6),At(7,Dae,1,6,"button",7),At(8,Pae,1,6,"button",7),Nt()()}if(2&i){const e=Ze();Us(e.styleClass),He("ngClass","p-confirm-popup p-component")("ngStyle",e.style)("@animation",yr(12,kae,fa(9,Lae,e.showTransitionOptions,e.hideTransitionOptions))),tt(3),He("ngIf",e.confirmation.icon),tt(2),ca(e.confirmation.message),tt(2),He("ngIf",!1!==e.confirmation.rejectVisible),tt(1),He("ngIf",!1!==e.confirmation.acceptVisible)}}let J2=(()=>{class i{constructor(e,n,r,s,a,u){this.el=e,this.confirmationService=n,this.renderer=r,this.cd=s,this.config=a,this.overlayService=u,this.defaultFocus="accept",this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autoZIndex=!0,this.baseZIndex=0,this.subscription=this.confirmationService.requireConfirmation$.subscribe(h=>{h?h.key===this.key&&(this.confirmation=h,this.confirmation.accept&&(this.confirmation.acceptEvent=new ki,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new ki,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this.cd.markForCheck()}onAnimationStart(e){if("open"===e.toState){this.container=e.element,document.body.appendChild(this.container),this.align(),this.bindListeners();const n=this.getElementToFocus();n&&n.focus()}}onAnimationEnd(e){"void"===e.toState&&this.onContainerDestroy()}getElementToFocus(){switch(this.defaultFocus){case"accept":return bn.findSingle(this.container,".p-confirm-popup-accept");case"reject":return bn.findSingle(this.container,".p-confirm-popup-reject");case"none":return null}}align(){this.autoZIndex&&Vu.set("overlay",this.container,this.config.zIndex.overlay),bn.absolutePosition(this.container,this.confirmation.target);const e=bn.getOffset(this.container),n=bn.getOffset(this.confirmation.target);let r=0;e.left<n.left&&(r=n.left-e.left),this.container.style.setProperty("--overlayArrowLeft",`${r}px`),e.top<n.top&&bn.addClass(this.container,"p-confirm-popup-flipped")}hide(){this.visible=!1}accept(){this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide()}reject(){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(),this.hide()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}bindListeners(){this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener()}unbindListeners(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}bindDocumentClickListener(){if(!this.documentClickListener){let e=bn.isIOS()?"touchstart":"click";const n=this.el?this.el.nativeElement.ownerDocument:document;this.documentClickListener=this.renderer.listen(n,e,r=>{let s=this.confirmation.target;this.container!==r.target&&!this.container.contains(r.target)&&s!==r.target&&!s.contains(r.target)&&this.hide()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}onWindowResize(){this.visible&&!bn.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Lx(this.confirmation.target,()=>{this.visible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unsubscribeConfirmationSubscriptions(){this.confirmation&&(this.confirmation.acceptEvent&&this.confirmation.acceptEvent.unsubscribe(),this.confirmation.rejectEvent&&this.confirmation.rejectEvent.unsubscribe())}onContainerDestroy(){this.unbindListeners(),this.unsubscribeConfirmationSubscriptions(),this.autoZIndex&&Vu.clear(this.container),this.confirmation=null,this.container=null}restoreAppend(){this.container&&document.body.removeChild(this.container),this.onContainerDestroy()}get acceptButtonLabel(){return this.confirmation.acceptLabel||this.config.getTranslation(Kc.ACCEPT)}get rejectButtonLabel(){return this.confirmation.rejectLabel||this.config.getTranslation(Kc.REJECT)}ngOnDestroy(){this.restoreAppend(),this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(hx),Tn(p),Tn(Oo),Tn(og),Tn(fx))},i.\u0275cmp=hs({type:i,selectors:[["p-confirmPopup"]],hostAttrs:[1,"p-element"],inputs:{key:"key",defaultFocus:"defaultFocus",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",visible:"visible"},decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-confirm-popup-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-popup-message"],[1,"p-confirm-popup-footer"],["type","button","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],[3,"ngClass"],["type","button","pButton","",3,"icon","label","ngClass","click"]],template:function(e,n){1&e&&At(0,Rae,9,14,"div",0),2&e&&He("ngIf",n.visible)},dependencies:[vo,wo,Ho,k0],styles:['.p-confirm-popup{position:absolute;margin-top:10px;top:0;left:0}.p-confirm-popup-flipped{margin-top:0;margin-bottom:10px}.p-confirm-popup:after,.p-confirm-popup:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-confirm-popup:after{border-width:8px;margin-left:-8px}.p-confirm-popup:before{border-width:10px;margin-left:-10px}.p-confirm-popup-flipped:after,.p-confirm-popup-flipped:before{bottom:auto;top:100%}.p-confirm-popup.p-confirm-popup-flipped:after{border-bottom-color:transparent}.p-confirm-popup.p-confirm-popup-flipped:before{border-bottom-color:transparent}.p-confirm-popup .p-confirm-popup-content{display:flex;align-items:center}\n'],encapsulation:2,data:{animation:[M_("animation",[L0("void",du({transform:"scaleY(0.8)",opacity:0})),L0("open",du({transform:"translateY(0)",opacity:1})),Lh("void => open",Dc("{{showTransitionParams}}")),Lh("open => void",Dc("{{hideTransitionParams}}"))])]},changeDetection:0}),i})(),Oae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Nv]}),i})();function Fae(i,t){if(1&i){const e=vr();Pt(0,"span",13)(1,"input",14),si("ngModelChange",function(r){return gn(e),vn(Ze().newGraph=r)}),Nt(),Pt(2,"label",15),ur(3,"Name"),Nt(),Pt(4,"button",16),si("click",function(){gn(e);const r=Ze();return vn(r.openNew(r.newGraph))}),Nt()()}if(2&i){const e=Ze();tt(1),He("ngModel",e.newGraph)}}function Nae(i,t){}function Bae(i,t){1&i&&(Pt(0,"div",17)(1,"h5",18),ur(2,"Manage Graphs"),Nt(),Pt(3,"span",19),Ri(4,"i",20)(5,"input",21),Nt()())}function zae(i,t){1&i&&(Pt(0,"tr")(1,"th",22),Ri(2,"p-tableHeaderCheckbox"),Nt(),Pt(3,"th",23),ur(4,"Label "),Ri(5,"p-sortIcon",24),Nt(),Pt(6,"th"),ur(7,"Action(s) "),Nt()())}function Vae(i,t){if(1&i){const e=vr();Pt(0,"tr")(1,"td"),Ri(2,"p-tableCheckbox",25),Nt(),Pt(3,"td"),ur(4),Nt(),Pt(5,"td")(6,"button",26),si("click",function(){const s=gn(e).$implicit;return vn(Ze().showImport(s))}),Nt(),Pt(7,"span"),ur(8,"\xa0"),Nt(),Pt(9,"button",27),si("click",function(){const s=gn(e).$implicit;return vn(Ze().gexf(s))}),Nt(),Pt(10,"span"),ur(11,"\xa0"),Nt(),Pt(12,"button",28),si("click",function(r){const a=gn(e).$implicit;return vn(Ze().confirm(r,a))}),Nt(),Pt(13,"span"),ur(14,"\xa0"),Nt(),Pt(15,"button",29),si("click",function(){const s=gn(e).$implicit;return vn(Ze().selectCytoscape(s))}),Nt()()()}if(2&i){const e=t.$implicit;tt(2),He("value",e),tt(2),ca(e.label)}}function Uae(i,t){if(1&i){const e=vr();Pt(0,"p-button",30),si("click",function(){return gn(e),vn(Ze().displayExport=!1)}),Nt()}}const Hae=function(){return["label"]},Gae=function(){return{width:"50vw"}};let Wae=(()=>{class i{constructor(e,n,r,s,a,u,h){this.router=e,this.logger=n,this.graphsService=r,this.clipboardService=s,this.confirmationService=a,this.messageService=u,this.store=h,this.graph=void 0,this.graphs=[],this.displayImport=!1,this.displayExport=!1,this.exportData=[],this.exportDataHtml="",this.Delete="false",this.xml=[],this.graph$=this.store.select(PI),this.graphs$=this.store.select(y2),this.graph$.subscribe(m=>{!m||(this.graph=m)}),this.graphs$.subscribe(m=>{!m||(this.graphs=Br.map(m,w=>({id:w.id,style:w.style,rules:w.rules,label:w.label,nodes:w.nodes,edges:w.edges})))})}ngOnInit(){let e=this.graphsService.findAll();this.store.dispatch(vx({graphs:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteGraph(n)},reject:()=>{}})}deleteGraph(e){let n=this.graphsService.delete(e.id);this.store.dispatch(vx({graphs:n}))}showImport(e){this.displayImport=!0,this.selectedGraph=e}openNew(e){if(e){this.graphsService.store({id:e,style:"default",rules:"default",label:e,edges:[],nodes:[]},r=>{r.style="default",r.rules="default",r.label=e,r.edges=[],r.nodes=[]});let n=this.graphsService.findAll();this.store.dispatch(vx({graphs:n}))}}uploadHandler(e,n){n&&this.graphsService.uploadHandler(e.files[0],n.id,n.id).then(r=>{this.graphsService.store(r,s=>{s.style="default",s.rules="default",s.label=r.label,s.edges=[],s.nodes=[]}),this.displayImport=!1})}gexf(e){let n=this.graphsService.findOne(e.id+"");this.exportData=this.graphsService.toGexf(n),this.exportDataHtml=this.exportData.join("\n"),this.clipboardService.copyTextToClipboard(this.exportData.join("\n")),this.displayExport=!0}selectCytoscape(e){this.router.navigate(["graphs","cytoscape",e.id])}selectThreejs(e){this.router.navigate(["graphs","threejs",e.id])}}return i.\u0275fac=function(e){return new(e||i)(Tn(Ph),Tn(qd),Tn(Sx),Tn(BI),Tn(hx),Tn(Hm),Tn(Gm))},i.\u0275cmp=hs({type:i,selectors:[["app-graph-selector"]],features:[Ro([Hm])],decls:17,vars:17,consts:[[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"modal","header","visible","visibleChange"],["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","baseZIndex","visibleChange"],["pTemplate","footer"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","type","button","pTooltip","Import","tooltipPosition","top","icon","pi pi-cloud-upload",3,"click"],["pButton","","pRipple","","pTooltip","Copy to clipboard","tooltipPosition","top","icon","pi pi-cloud-download",3,"click"],["pButton","","pRipple","","pTooltip","Remove this graph","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"]],template:function(e,n){1&e&&(Pt(0,"div",0)(1,"p-toolbar",1),At(2,Fae,5,1,"ng-template",2),At(3,Nae,0,0,"ng-template",3),Nt(),Ri(4,"p-toast"),Pt(5,"p-table",4,5),At(7,Bae,6,0,"ng-template",6),At(8,zae,8,0,"ng-template",7),At(9,Vae,16,2,"ng-template",8),Nt()(),Ri(10,"p-confirmPopup"),Pt(11,"p-dialog",9),si("visibleChange",function(s){return n.displayImport=s}),Pt(12,"p-fileUpload",10),si("uploadHandler",function(s){return n.uploadHandler(s,n.selectedGraph)}),Nt()(),Pt(13,"p-dialog",11),si("visibleChange",function(s){return n.displayExport=s}),Pt(14,"pre"),ur(15),Nt(),At(16,Uae,1,0,"ng-template",12),Nt()),2&e&&(tt(5),He("value",n.graphs)("rows",10)("paginator",!0)("globalFilterFields",mo(15,Hae))("rowHover",!0)("showCurrentPageReport",!0),tt(6),Fw("header","Import ",null==n.selectedGraph?null:n.selectedGraph.label,""),He("modal",!0)("visible",n.displayImport),tt(1),He("customUpload",!0),tt(1),co(mo(16,Gae)),He("visible",n.displayExport)("baseZIndex",1e4),tt(2),ca(n.exportDataHtml))},dependencies:[by,Kl,q2,X2,Y2,K2,k0,KI,tS,Rv,Nx,vC,Sz,Q2,M0,D0,kv,J2]}),i})();var jae=ae(5595),$ae=ae.n(jae),qae=ae(3424),Xae=ae.n(qae),Yae=ae(756),Kae=ae.n(Yae);const Zae=["myGraph"];function Qae(i,t){if(1&i&&(Pt(0,"pre"),ur(1),Nt()),2&i){const e=t.$implicit;tt(1),cc("",e,"\n")}}let Jae=(()=>{class i{constructor(e,n,r,s){this.http=e,this.logger=n,this.graphsService=r,this.store=s,this.subscription=null,this.graph=new($ae()),this.display=!1,this.xml=[],this.graphs$=this.store.select(y2),this.graphs$.subscribe(a=>{a&&0!==a.length&&(this.graph.clear(),Br.each(a[0].nodes,h=>{this.graph.addNode(h.id,{x:h.x,y:h.y,label:h.label,color:h.color,size:h.size,uid:h.id})}),Br.each(a[0].edges,h=>{h.source&&h.target?this.graph.addEdge(h.source,h.target,{label:h.label,type:"arrow",size:5,uid:h.id,source:h.source,target:h.target}):this.logger.info(h)}),new(Xae())(this.graph,{isNodeFixed:(h,m)=>m.highlighted}))})}ngOnInit(){let e=this.graphsService.findAll();this.store.dispatch(vx({graphs:e}))}ngAfterViewInit(){let e=null,n=!1;this.renderer=new(Kae())(this.graph,this.myGraph?.nativeElement,{renderEdgeLabels:!0}),this.renderer.on("downNode",r=>{n=!0,e=r.node,this.graph.setNodeAttribute(e,"highlighted",!0)}),this.renderer.getMouseCaptor().on("mousemovebody",r=>{if(!n||!e||!this.renderer)return;const s=this.renderer.viewportToGraph(r);this.graph.setNodeAttribute(e,"x",s.x),this.graph.setNodeAttribute(e,"y",s.y),r.preventSigmaDefault(),r.original.preventDefault(),r.original.stopPropagation()}),this.renderer.getMouseCaptor().on("mouseup",()=>{e&&this.graph.removeNodeAttribute(e,"highlighted"),n=!1,e=null}),this.renderer.getMouseCaptor().on("mousedown",()=>{this.renderer?.getCustomBBox()||this.renderer?.setCustomBBox(this.renderer.getBBox())})}gexf(e){this.xml=[],this.xml.push('<?xml version="1.0" encoding="UTF-8"?>'),this.xml.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),this.xml.push('<meta lastmodifieddate="2009-03-20">'),this.xml.push("<creator>Gexf.net</creator>"),this.xml.push("<description>A hello world! file</description>"),this.xml.push("</meta>"),this.xml.push(`<graph mode="static" defaultedgetype="directed" style="${e}">`),this.xml.push("<nodes>"),this.graph.forEachNode(n=>{let r=this.graph.getNodeAttribute(n,"uid"),s=this.graph.getNodeAttribute(n,"label"),a=this.graph.getNodeAttribute(n,"x"),u=this.graph.getNodeAttribute(n,"y");this.xml.push(`<node id="${r}" label="${s}" x="${a}" y="${u}" />`)}),this.xml.push("</nodes>"),this.xml.push("<edges>"),this.graph.forEachEdge(n=>{let r=this.graph.getEdgeAttribute(n,"uid"),s=this.graph.getEdgeAttribute(n,"label"),a=this.graph.getEdgeAttribute(n,"source"),u=this.graph.getEdgeAttribute(n,"target");this.xml.push(`<edge id="${r}" source="${a}" target="${u}" label="${s}" />`)}),this.xml.push("</edges>"),this.xml.push("</graph>"),this.xml.push("</gexf>"),this.display=!0}uploadHandler(e){let n=new FileReader;n.addEventListener("loadend",()=>{}),n.readAsText(e.files[0])}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn(aI),Tn(qd),Tn(Sx),Tn(Gm))},i.\u0275cmp=hs({type:i,selectors:[["app-graph"]],viewQuery:function(e,n){if(1&e&&Rs(Zae,5),2&e){let r;jr(r=$r())&&(n.myGraph=r.first)}},hostBindings:function(e,n){1&e&&si("beforeunload",function(s){return n.ngOnDestroy(s)},0,qi)},decls:6,vars:3,consts:[["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","visibleChange"],[4,"ngFor","ngForOf"],["label","Gexf",3,"onClick"],[1,"sigma-container"],["myGraph",""]],template:function(e,n){1&e&&(Pt(0,"p-fileUpload",0),si("uploadHandler",function(s){return n.uploadHandler(s)}),Nt(),Pt(1,"p-dialog",1),si("visibleChange",function(s){return n.display=s}),At(2,Qae,2,1,"pre",2),Nt(),Pt(3,"p-button",3),si("onClick",function(){return n.gexf("default")}),Nt(),Ri(4,"div",4,5)),2&e&&(He("customUpload",!0),tt(1),He("visible",n.display),tt(1),He("ngForOf",n.xml))},dependencies:[Ec,KI,tS,Sz],styles:[".sigma-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}"]}),i})();const Ez={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let nS;const eoe=new Uint8Array(16);function toe(){if(!nS&&(nS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nS(eoe)}const Xd=[];for(let i=0;i<256;++i)Xd.push((i+256).toString(16).slice(1));const Mz=function noe(i,t,e){if(Ez.randomUUID&&!t&&!i)return Ez.randomUUID();const n=(i=i||{}).random||(i.rng||toe)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=n[r];return t}return function Tz(i,t=0){return(Xd[i[t+0]]+Xd[i[t+1]]+Xd[i[t+2]]+Xd[i[t+3]]+"-"+Xd[i[t+4]]+Xd[i[t+5]]+"-"+Xd[i[t+6]]+Xd[i[t+7]]+"-"+Xd[i[t+8]]+Xd[i[t+9]]+"-"+Xd[i[t+10]]+Xd[i[t+11]]+Xd[i[t+12]]+Xd[i[t+13]]+Xd[i[t+14]]+Xd[i[t+15]]).toLowerCase()}(n)};var iS=ae(6864);class eP extends class roe extends class ioe{ready(t){console.debug(`layout ready, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}stop(t){console.debug(`layout stop, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}}{constructor(){super(...arguments),this.zoom=null,this.pan=null,this.animate=!1,this.animationDuration=500,this.animationEasing=void 0,this.animateFilter=(t,e)=>!0}}{constructor(){super(...arguments),this.fit=!0,this.padding=30,this.boundingBox=null,this.avoidOverlap=!0,this.nodeDimensionsIncludeLabels=!1,this.spacingFactor=1.75,this.sort=null,this.transform=(t,e)=>e}}class soe extends eP{constructor(){super(...arguments),this.name="circle",this.startAngle=1.5*Math.PI,this.sweep=null,this.clockwise=!0}}class aoe{constructor(){this.name="concentric",this.startAngle=1.5*Math.PI,this.equidistant=!1,this.minNodeSpacing=10,this.boundingBox=null,this.height=null,this.width=null,this.spacingFactor=null}concentric(t){return 0}levelWidth(t){return 0}}class ooe extends eP{constructor(){super(...arguments),this.name="breadthfirst",this.directed=!1,this.circle=!1,this.maximal=!1,this.grid=!1,this.nodeDimensionsIncludeLabels=!1}}class loe extends eP{constructor(){super(...arguments),this.name="cose",this.animationThreshold=250,this.refresh=20,this.randomize=!1,this.componentSpacing=40,this.nodeOverlap=4e3,this.nestingFactor=1.2,this.gravity=1,this.numIter=1e3,this.initialTemp=1e3,this.coolingFactor=.99,this.minTemp=1,this.nodeRepulsion=t=>2048,this.idealEdgeLength=t=>32,this.edgeElasticity=t=>32}}const Bx=Mv("[SysTags List/API] Retrieve Styles Success",{_as:"props",_p:void 0}),Dz=Mv("[SysTags List/API] Retrieve Style Success",{_as:"props",_p:void 0}),Pz=I0("menu"),tP=I0("parameter");var Tu=(()=>{return(i=Tu||(Tu={}))[i.default=0]="default",i[i.statistics_groups=1]="statistics_groups",i[i.statistics_tags=2]="statistics_tags",i[i.statistics_summary=3]="statistics_summary",i[i.graph_apply_rules=4]="graph_apply_rules",i[i.graph_change_properties=5]="graph_change_properties",i[i.graph_add_new_node=6]="graph_add_new_node",i[i.graph_layout_bread_first=7]="graph_layout_bread_first",i[i.graph_layout_concentric=8]="graph_layout_concentric",i[i.graph_layout_circle=9]="graph_layout_circle",i[i.graph_layout_grid=10]="graph_layout_grid",i[i.graph_layout_cose=11]="graph_layout_cose",Tu;var i})();const nP=Mv("[SysMenuMessage] selectMenuIds",{_as:"props",_p:void 0}),iP=Mv("[SysParameterMessage] setDrawMode",{_as:"props",_p:void 0}),rP=Mv("[SysParameterMessage] setGroupMode",{_as:"props",_p:void 0}),sP=Mv("[SysParameterMessage] setZoom",{_as:"props",_p:void 0});let Lz=(()=>{class i extends kI{constructor(e,n){super(),this._logger=e,this._storage=n,this.init("styles",this._storage,this._logger)}}return i.\u0275fac=function(e){return new(e||i)(ji(qd),ji(Ix))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var kz=ae(397);let Rz=(()=>{class i extends kI{constructor(e,n,r){super(),this._logger=e,this._storage=n,this.base16=r,this.init("rules",this._storage,this._logger)}load(e,n){this.store({id:e,rules:n},r=>{r.rules=n})}jsondataEngine(e,n,r,s){let a=this.findOne(e)?.rules;if(a){let u=[];Br.each(a,m=>{u.push({name:m.name,sets:m.sets,asserts:m.asserts})});let h=[];return Br.each(u,m=>{let w=[];Br.each(m.sets,T=>{let O=kz(T).evaluate(n);O.length||(O=[O]),this._logger.info(O),Br.each(O,W=>{w.push(W)})}),Br.each(w,T=>{let O=!1;Br.each(m.asserts,W=>{kz(W).evaluate(T)&&(O=!0)}),h.push({fact:T,ruleResult:{name:m.name,result:O}})})}),new Promise(m=>{m({success:Br.filter(h,w=>w.ruleResult.result),failure:Br.filter(h,w=>!w.ruleResult.result),treenodes:Br.map(u,w=>({data:{id:w.name,fail:Br.filter(Br.map(h,T=>({name:T.ruleResult.name,result:T.ruleResult.result})),T=>T.name===w.name&&0==T.result),success:Br.filter(Br.map(h,T=>({name:T.ruleResult.name,result:T.ruleResult.result})),T=>T.name===w.name&&1==T.result)},children:Br.filter(Br.map(h,T=>({data:{uid:this.base16.encode(T.fact.data.id),id:T.fact.data.id,alias:T.fact.data.alias,label:T.fact.data.label,tag:T.fact.data.tag,rule:T.ruleResult.name,valid:T.ruleResult.result},children:[]})),T=>T.data.rule===w.name&&(T.data.valid===r||T.data.valid===s))}))})})}return new Promise(u=>{u({success:[],failure:[],treenodes:[]})})}}return i.\u0275fac=function(e){return new(e||i)(ji(qd),ji(Ix),ji(NI))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();new B4.Parser;let Oz=(()=>{class i extends kI{constructor(e,n){super(),this._logger=e,this._storage=n,this.init("preferences",this._storage,this._logger),this.findOne("default")||this.store({id:"default",full:!1,grid:!1,debug:!1,applyRules:!1,info:!1,maxWidth:16384,maxHeight:16384},r=>{})}apply(){var n;this.findOne("default")?.debug?((n=this._logger.getConfigSnapshot()).level=dc.DEBUG,this._logger.updateConfig(n)):((n=this._logger.getConfigSnapshot()).level=dc.INFO,this._logger.updateConfig(n))}}return i.\u0275fac=function(e){return new(e||i)(ji(qd),ji(Ix))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const coe=["sublist"],hoe=["menuitem"],doe=function(i){return{"p-hidden":i}};function foe(i,t){if(1&i&&Ri(0,"li",5,6),2&i){const e=Ze().$implicit;He("ngClass",yr(1,doe,!1===e.visible))}}function poe(i,t){if(1&i&&Ri(0,"span",17),2&i){const e=Ze(3).$implicit;He("ngClass",e.icon)("ngStyle",e.iconStyle)}}function goe(i,t){if(1&i&&(Pt(0,"span",18),ur(1),Nt()),2&i){const e=Ze(3).$implicit;tt(1),ca(e.label)}}function moe(i,t){1&i&&Ri(0,"span",19),2&i&&He("innerHTML",Ze(3).$implicit.label,zl)}function voe(i,t){if(1&i&&(Pt(0,"span",20),ur(1),Nt()),2&i){const e=Ze(3).$implicit;He("ngClass",e.badgeStyleClass),tt(1),ca(e.badge)}}function _oe(i,t){1&i&&Ri(0,"span",21)}const Fz=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function yoe(i,t){if(1&i){const e=vr();Pt(0,"a",11),si("click",function(r){gn(e),Ze();const s=_o(1),a=Ze(),u=a.$implicit,h=a.index,m=Ze();return vn(m.onItemClick(r,u,s,m.getKey(h)))}),At(1,poe,1,2,"span",12),At(2,goe,2,1,"span",13),At(3,moe,1,1,"ng-template",null,14,hc),At(5,voe,2,2,"span",15),At(6,_oe,1,0,"span",16),Nt()}if(2&i){const e=_o(4),n=Ze(2),r=n.$implicit,s=n.index,a=Ze();He("target",r.target)("ngClass",yr(13,Fz,r.disabled)),xs("href",r.url?r.url:null,Hd)("title",r.title)("id",r.id)("tabindex",r.disabled?null:"0")("aria-haspopup",null!=a.item.items)("aria-expanded",a.isActive(a.getKey(s))),tt(1),He("ngIf",r.icon),tt(1),He("ngIf",!1!==r.escape)("ngIfElse",e),tt(3),He("ngIf",r.badge),tt(1),He("ngIf",r.items)}}function boe(i,t){if(1&i&&Ri(0,"span",17),2&i){const e=Ze(3).$implicit;He("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Coe(i,t){if(1&i&&(Pt(0,"span",18),ur(1),Nt()),2&i){const e=Ze(3).$implicit;tt(1),ca(e.label)}}function woe(i,t){1&i&&Ri(0,"span",19),2&i&&He("innerHTML",Ze(3).$implicit.label,zl)}function xoe(i,t){if(1&i&&(Pt(0,"span",20),ur(1),Nt()),2&i){const e=Ze(3).$implicit;He("ngClass",e.badgeStyleClass),tt(1),ca(e.badge)}}function Aoe(i,t){1&i&&Ri(0,"span",21)}const Ioe=function(){return{exact:!1}};function Soe(i,t){if(1&i){const e=vr();Pt(0,"a",22),si("click",function(r){gn(e),Ze();const s=_o(1),a=Ze(),u=a.$implicit,h=a.index,m=Ze();return vn(m.onItemClick(r,u,s,m.getKey(h)))}),At(1,boe,1,2,"span",12),At(2,Coe,2,1,"span",13),At(3,woe,1,1,"ng-template",null,23,hc),At(5,xoe,2,2,"span",15),At(6,Aoe,1,0,"span",16),Nt()}if(2&i){const e=_o(4),n=Ze(2).$implicit;He("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||mo(20,Ioe))("target",n.target)("ngClass",yr(21,Fz,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),xs("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),tt(1),He("ngIf",n.icon),tt(1),He("ngIf",!1!==n.escape)("ngIfElse",e),tt(3),He("ngIf",n.badge),tt(1),He("ngIf",n.items)}}function Eoe(i,t){if(1&i){const e=vr();Pt(0,"p-contextMenuSub",24),si("leafClick",function(){return gn(e),vn(Ze(3).onLeafClick())}),Nt()}if(2&i){const e=Ze(2),n=e.index,r=e.$implicit;He("parentItemKey",Ze().getKey(n))("item",r)}}const Toe=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function Moe(i,t){if(1&i){const e=vr();Pt(0,"li",7,6),si("mouseenter",function(r){gn(e);const s=Ze(),a=s.$implicit,u=s.index,h=Ze();return vn(h.onItemMouseEnter(r,a,h.getKey(u)))})("mouseleave",function(r){gn(e);const s=Ze().$implicit;return vn(Ze().onItemMouseLeave(r,s))}),At(2,yoe,7,15,"a",8),At(3,Soe,7,23,"a",9),At(4,Eoe,1,2,"p-contextMenuSub",10),Nt()}if(2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze();Us(n.styleClass),He("ngClass",fa(9,Toe,s.isActive(s.getKey(r)),!1===n.visible))("ngStyle",n.style)("tooltipOptions",n.tooltipOptions),xs("data-ik",s.getKey(r)),tt(2),He("ngIf",!n.routerLink),tt(1),He("ngIf",n.routerLink),tt(1),He("ngIf",n.items)}}function Doe(i,t){if(1&i&&(At(0,foe,2,3,"li",3),At(1,Moe,5,12,"li",4)),2&i){const e=t.$implicit;He("ngIf",e.separator),tt(1),He("ngIf",!e.separator)}}const Poe=function(i){return{"p-submenu-list":i}},Loe=["container"];let koe=(()=>{class i{constructor(e){this.leafClick=new ki,this.contextMenu=e}ngOnInit(){this.activeItemKeyChangeSubscription=this.contextMenu.contextMenuService.activeItemKeyChange$.pipe(function uoe(i){return ri((t,e)=>{ve(i).subscribe(ni(e,()=>e.complete(),xe)),!e.closed&&t.subscribe(e)})}(this.contextMenu.ngDestroy$)).subscribe(e=>{this.activeItemKey=e,this.isActive(this.parentItemKey)&&bn.hasClass(this.sublistViewChild.nativeElement,"p-submenu-list-active")&&this.contextMenu.positionSubmenu(this.sublistViewChild.nativeElement),this.contextMenu.cd.markForCheck()})}onItemMouseEnter(e,n,r){if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),n.disabled)this.activeItemKey=null;else{if(n.items){let s=bn.findSingle(e.currentTarget,".p-submenu-list");bn.addClass(s,"p-submenu-list-active")}this.contextMenu.contextMenuService.changeKey(r)}}onItemMouseLeave(e,n){n.disabled||this.contextMenu.el.nativeElement.contains(e.toElement)&&(n.items&&this.contextMenu.removeActiveFromSubLists(e.currentTarget),this.root||this.contextMenu.contextMenuService.changeKey(this.parentItemKey))}onItemClick(e,n,r,s){if(n.disabled)e.preventDefault();else{if(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items){let a=bn.findSingle(r,".p-submenu-list");a&&(this.isActive(s)&&bn.hasClass(a,"p-submenu-list-active")?this.contextMenu.removeActiveFromSubLists(r):bn.addClass(a,"p-submenu-list-active"),this.contextMenu.contextMenuService.changeKey(s))}n.items||this.onLeafClick()}}onLeafClick(){this.root&&this.contextMenu.hide(),this.leafClick.emit()}getKey(e){return this.root?String(e):this.parentItemKey+"_"+e}isActive(e){return this.activeItemKey&&(this.activeItemKey.startsWith(e+"_")||this.activeItemKey===e)}}return i.\u0275fac=function(e){return new(e||i)(Tn(Xr(()=>Nz)))},i.\u0275cmp=hs({type:i,selectors:[["p-contextMenuSub"]],viewQuery:function(e,n){if(1&e&&(Rs(coe,5),Rs(hoe,5)),2&e){let r;jr(r=$r())&&(n.sublistViewChild=r.first),jr(r=$r())&&(n.menuitemViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",parentItemKey:"parentItemKey"},outputs:{leafClick:"leafClick"},decls:3,vars:4,consts:[[3,"ngClass"],["sublist",""],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["pTooltip","","role","none",3,"ngClass","ngStyle","class","tooltipOptions","mouseenter","mouseleave",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["menuitem",""],["pTooltip","","role","none",3,"ngClass","ngStyle","tooltipOptions","mouseenter","mouseleave"],["pRipple","",3,"target","ngClass","click",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click",4,"ngIf"],[3,"parentItemKey","item","leafClick",4,"ngIf"],["pRipple","",3,"target","ngClass","click"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi pi-angle-right",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi","pi-angle-right"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click"],["htmlRouteLabel",""],[3,"parentItemKey","item","leafClick"]],template:function(e,n){1&e&&(Pt(0,"ul",0,1),At(2,Doe,2,2,"ng-template",2),Nt()),2&e&&(He("ngClass",yr(2,Poe,!n.root)),tt(2),He("ngForOf",n.root?n.item:n.item.items))},dependencies:[vo,Ec,wo,Ho,dC,QD,kh,Rv,i],encapsulation:2}),i})(),Nz=(()=>{class i{constructor(e,n,r,s,a,u){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.contextMenuService=a,this.config=u,this.autoZIndex=!0,this.baseZIndex=0,this.triggerEvent="contextmenu",this.onShow=new ki,this.onHide=new ki,this.ngDestroy$=new xt,this.preventDocumentDefault=!1}ngAfterViewInit(){this.global?this.triggerEventListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document",this.triggerEvent,n=>{this.show(n),n.preventDefault()}):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,this.triggerEvent,e=>{this.show(e),e.preventDefault()})),this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):bn.appendChild(this.containerViewChild.nativeElement,this.appendTo))}show(e){this.clearActiveItem(),this.position(e),this.moveOnTop(),this.containerViewChild.nativeElement.style.display="block",this.preventDocumentDefault=!0,bn.fadeIn(this.containerViewChild.nativeElement,250),this.bindGlobalListeners(),e&&e.preventDefault(),this.onShow.emit()}hide(){this.containerViewChild.nativeElement.style.display="none",this.autoZIndex&&Vu.clear(this.containerViewChild.nativeElement),this.clearActiveItem(),this.unbindGlobalListeners(),this.onHide.emit()}moveOnTop(){this.autoZIndex&&this.containerViewChild&&"block"!==this.containerViewChild.nativeElement.style.display&&Vu.set("menu",this.containerViewChild.nativeElement,this.baseZIndex+this.config.zIndex.menu)}toggle(e){this.containerViewChild.nativeElement.offsetParent?this.hide():this.show(e)}position(e){if(e){let n=e.pageX+1,r=e.pageY+1,s=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetWidth:bn.getHiddenElementOuterWidth(this.containerViewChild.nativeElement),a=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetHeight:bn.getHiddenElementOuterHeight(this.containerViewChild.nativeElement),u=bn.getViewport();n+s-document.body.scrollLeft>u.width&&(n-=s),r+a-document.body.scrollTop>u.height&&(r-=a),n<document.body.scrollLeft&&(n=document.body.scrollLeft),r<document.body.scrollTop&&(r=document.body.scrollTop),this.containerViewChild.nativeElement.style.left=n+"px",this.containerViewChild.nativeElement.style.top=r+"px"}}positionSubmenu(e){let n=e.parentElement.parentElement,r=bn.getViewport(),s=e.offsetParent?e.offsetWidth:bn.getHiddenElementOuterWidth(e),a=e.offsetHeight?e.offsetHeight:bn.getHiddenElementOuterHeight(e),u=bn.getOuterWidth(n.children[0]),h=bn.getOuterHeight(n.children[0]),m=bn.getOffset(n.parentElement);e.style.zIndex=++bn.zindex,parseInt(m.top)+h+a>r.height-bn.calculateScrollbarHeight()?(e.style.removeProperty("top"),e.style.bottom="0px"):(e.style.removeProperty("bottom"),e.style.top="0px"),e.style.left=parseInt(m.left)+u+s>r.width-bn.calculateScrollbarWidth()?-s+"px":u+"px"}isItemMatched(e){return bn.hasClass(e,"p-menuitem")&&!bn.hasClass(e.children[0],"p-disabled")}findNextItem(e,n){let r=e.nextElementSibling;if(r)return this.isItemMatched(r)?r:this.findNextItem(r,n);{let s=e.parentElement.children[0];return this.isItemMatched(s)?s:n?null:this.findNextItem(s,!0)}}findPrevItem(e,n){let r=e.previousElementSibling;if(r)return this.isItemMatched(r)?r:this.findPrevItem(r,n);{let s=e.parentElement.children[e.parentElement.children.length-1];return this.isItemMatched(s)?s:n?null:this.findPrevItem(s,!0)}}getActiveItem(){let e=this.contextMenuService.activeItemKey;return null==e?null:bn.findSingle(this.containerViewChild.nativeElement,'.p-menuitem[data-ik="'+e+'"]')}clearActiveItem(){this.contextMenuService.activeItemKey&&(this.removeActiveFromSubLists(this.containerViewChild.nativeElement),this.contextMenuService.reset())}removeActiveFromSubLists(e){let n=bn.find(e,".p-submenu-list-active");for(let r of n)bn.removeClass(r,"p-submenu-list-active")}removeActiveFromSublist(e){e&&bn.findSingle(e,".p-submenu-list")&&bn.hasClass(e,"p-submenu-list-active")&&bn.removeClass(e,"p-submenu-list-active")}bindGlobalListeners(){if(!this.documentClickListener){const e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!n.ctrlKey&&2!==n.button&&this.hide()}),this.documentTriggerListener=this.renderer.listen(e,this.triggerEvent,n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!this.preventDocumentDefault&&this.hide(),this.preventDocumentDefault=!1})}this.zone.runOutsideAngular(()=>{this.windowResizeListener||(this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener))}),this.documentKeydownListener||(this.documentKeydownListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{let r=this.getActiveItem();switch(n.key){case"ArrowDown":if(r)this.removeActiveFromSublist(r),r=this.findNextItem(r);else{let s=bn.findSingle(this.containerViewChild.nativeElement,".p-menuitem-link").parentElement;r=this.isItemMatched(s)?s:this.findNextItem(s)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowUp":if(r)this.removeActiveFromSublist(r),r=this.findPrevItem(r);else{let s=bn.findSingle(this.containerViewChild.nativeElement,"ul"),a=s.children[s.children.length-1];r=this.isItemMatched(a)?a:this.findPrevItem(a)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowRight":if(r){let s=bn.findSingle(r,".p-submenu-list");s&&(bn.addClass(s,"p-submenu-list-active"),r=bn.findSingle(s,".p-menuitem-link:not(.p-disabled)").parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"ArrowLeft":if(r){let s=r.parentElement;s&&bn.hasClass(s,"p-submenu-list-active")&&(bn.removeClass(s,"p-submenu-list-active"),r=s.parentElement.parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"Escape":this.hide(),n.preventDefault();break;case"Enter":r&&this.handleItemClick(n,this.findModelItemFromKey(this.contextMenuService.activeItemKey),r),n.preventDefault()}}))}findModelItemFromKey(e){return null!=e&&this.model?e.split("_").reduce((r,s)=>r?r.items[s]:this.model[s],null):null}handleItemClick(e,n,r){if(n&&!n.disabled){if(n.command&&n.command({originalEvent:e,item:n}),n.items){let s=bn.findSingle(r,".p-submenu-list");s&&(bn.hasClass(s,"p-submenu-list-active")?this.removeActiveFromSubLists(r):(bn.addClass(s,"p-submenu-list-active"),this.positionSubmenu(s)))}n.items||this.hide()}}unbindGlobalListeners(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null),this.documentTriggerListener&&(this.documentTriggerListener(),this.documentTriggerListener=null),this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null),this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}onWindowResize(e){this.containerViewChild.nativeElement.offsetParent&&this.hide()}isOutsideClicked(e){return!(this.containerViewChild.nativeElement.isSameNode(e.target)||this.containerViewChild.nativeElement.contains(e.target))}ngOnDestroy(){this.unbindGlobalListeners(),this.triggerEventListener&&this.triggerEventListener(),this.containerViewChild&&this.autoZIndex&&Vu.clear(this.containerViewChild.nativeElement),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement),this.ngDestroy$.next(!0),this.ngDestroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(p),Tn(Oo),Tn(Zo),Tn(KB),Tn(og))},i.\u0275cmp=hs({type:i,selectors:[["p-contextMenu"]],viewQuery:function(e,n){if(1&e&&Rs(Loe,5),2&e){let r;jr(r=$r())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",global:"global",target:"target",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",triggerEvent:"triggerEvent"},outputs:{onShow:"onShow",onHide:"onHide"},decls:3,vars:6,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"item","root"]],template:function(e,n){1&e&&(Pt(0,"div",0,1),Ri(2,"p-contextMenuSub",2),Nt()),2&e&&(Us(n.styleClass),He("ngClass","p-contextmenu p-component")("ngStyle",n.style),tt(2),He("item",n.model)("root",!0))},dependencies:[vo,Ho,koe],styles:[".p-contextmenu{position:absolute;display:none}.p-contextmenu ul{margin:0;padding:0;list-style:none}.p-contextmenu .p-submenu-list{position:absolute;min-width:100%;z-index:1;display:none}.p-contextmenu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-contextmenu .p-menuitem-text{line-height:1}.p-contextmenu .p-menuitem{position:relative}.p-contextmenu .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-contextmenu .p-menuitem-active>p-contextmenusub>.p-submenu-list.p-submenu-list-active{display:block!important}\n"],encapsulation:2,changeDetection:0}),i})(),Roe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({providers:[KB],imports:[Oa,vy,Pc,Ov,vy,Ov]}),i})(),Ooe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.ngModel=n,this.control=r,this.cd=s,this.onResize=new ki}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(e){this.autoResize&&this.resize(e)}onBlur(e){this.autoResize&&this.resize(e)}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(kv,8),Tn(Lv,8),Tn(Oo))},i.\u0275dir=Qs({type:i,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(e,n){1&e&&si("input",function(s){return n.onInput(s)})("focus",function(s){return n.onFocus(s)})("blur",function(s){return n.onBlur(s)}),2&e&&ag("p-filled",n.filled)("p-inputtextarea-resizable",n.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),i})(),Foe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();const Noe=["container"];function Boe(i,t){1&i&&Nr(0)}function zoe(i,t){if(1&i){const e=vr();Pt(0,"div",5),si("mousedown",function(r){gn(e);const s=Ze().index;return vn(Ze().onGutterMouseDown(r,s))})("touchstart",function(r){gn(e);const s=Ze().index;return vn(Ze().onGutterTouchStart(r,s))}),Ri(1,"div",6),Nt()}2&i&&He("ngStyle",Ze(2).gutterStyle())}function Voe(i,t){if(1&i&&(Pt(0,"div",0),At(1,Boe,1,0,"ng-container",3),Nt(),At(2,zoe,2,1,"div",4)),2&i){const e=t.$implicit,n=t.index,r=Ze();Us(r.panelStyleClass),He("ngClass",r.panelContainerClass())("ngStyle",r.panelStyle),tt(1),He("ngTemplateOutlet",e),tt(1),He("ngIf",n!==r.panels.length-1)}}let Bz=(()=>{class i{constructor(e,n){this.cd=e,this.el=n,this.stateStorage="session",this.stateKey=null,this.layout="horizontal",this.gutterSize=4,this.minSizes=[],this.onResizeEnd=new ki,this.onResizeStart=new ki,this.nested=!1,this.panels=[],this.dragging=!1,this.mouseMoveListener=null,this.mouseUpListener=null,this.touchMoveListener=null,this.touchEndListener=null,this.size=null,this.gutterElement=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.nextPanelSize=null,this.prevPanelSize=null,this._panelSizes=[],this.prevPanelIndex=null}get panelSizes(){return this._panelSizes}set panelSizes(e){if(this._panelSizes=e,this.el&&this.el.nativeElement&&this.panels.length>0){let n=[...this.el.nativeElement.children[0].children].filter(s=>bn.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,a)=>{let h=(this.panelSizes.length-1>=a?this.panelSizes[a]:null)||100/this.panels.length;r[a]=h,n[a].style.flexBasis="calc("+h+"% - "+(this.panels.length-1)*this.gutterSize+"px)"})}}ngOnInit(){this.nested=this.isNested()}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.panels.push(e.template)})}ngAfterViewInit(){if(this.panels&&this.panels.length){let e=!1;if(this.isStateful()&&(e=this.restoreState()),!e){let n=[...this.el.nativeElement.children[0].children].filter(s=>bn.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,a)=>{let h=(this.panelSizes.length-1>=a?this.panelSizes[a]:null)||100/this.panels.length;r[a]=h,n[a].style.flexBasis="calc("+h+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),this._panelSizes=r}}}resizeStart(e,n){this.gutterElement=e.currentTarget,this.size=this.horizontal()?bn.getWidth(this.containerViewChild.nativeElement):bn.getHeight(this.containerViewChild.nativeElement),this.dragging=!0,this.startPos=this.horizontal()?e.pageX||e.changedTouches[0].pageX:e.pageY||e.changedTouches[0].pageY,this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,this.prevPanelSize=100*(this.horizontal()?bn.getOuterWidth(this.prevPanelElement,!0):bn.getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal()?bn.getOuterWidth(this.nextPanelElement,!0):bn.getOuterHeight(this.nextPanelElement,!0))/this.size,this.prevPanelIndex=n,bn.addClass(this.gutterElement,"p-splitter-gutter-resizing"),bn.addClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.onResizeStart.emit({originalEvent:e,sizes:this._panelSizes})}onResize(e){let n;n=this.horizontal()?100*e.pageX/this.size-100*this.startPos/this.size:100*e.pageY/this.size-100*this.startPos/this.size;let r=this.prevPanelSize+n,s=this.nextPanelSize-n;this.validateResize(r,s)&&(this.prevPanelElement.style.flexBasis="calc("+r+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+s+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this._panelSizes[this.prevPanelIndex]=r,this._panelSizes[this.prevPanelIndex+1]=s)}resizeEnd(e){this.isStateful()&&this.saveState(),this.onResizeEnd.emit({originalEvent:e,sizes:this._panelSizes}),bn.removeClass(this.gutterElement,"p-splitter-gutter-resizing"),bn.removeClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.clear()}onGutterMouseDown(e,n){this.resizeStart(e,n),this.bindMouseListeners()}onGutterTouchStart(e,n){e.cancelable&&(this.resizeStart(e,n),this.bindTouchListeners(),e.preventDefault())}onGutterTouchEnd(e){this.resizeEnd(e),this.unbindTouchListeners(),e.cancelable&&e.preventDefault()}validateResize(e,n){return!(this.minSizes.length>=1&&this.minSizes[0]&&this.minSizes[0]>e||this.minSizes.length>1&&this.minSizes[1]&&this.minSizes[1]>n)}bindMouseListeners(){this.mouseMoveListener||(this.mouseMoveListener=e=>this.onResize(e),document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=e=>{this.resizeEnd(e),this.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))}bindTouchListeners(){this.touchMoveListener||(this.touchMoveListener=e=>this.onResize(e.changedTouches[0]),document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=e=>{this.resizeEnd(e),this.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))}unbindMouseListeners(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)}unbindTouchListeners(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)}clear(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null}isNested(){if(this.el.nativeElement){let e=this.el.nativeElement.parentElement;for(;e&&!bn.hasClass(e,"p-splitter");)e=e.parentElement;return null!==e}return!1}isStateful(){return null!=this.stateKey}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}saveState(){this.getStorage().setItem(this.stateKey,JSON.stringify(this._panelSizes))}restoreState(){const n=this.getStorage().getItem(this.stateKey);return!!n&&(this._panelSizes=JSON.parse(n),[...this.containerViewChild.nativeElement.children].filter(s=>bn.hasClass(s,"p-splitter-panel")).forEach((s,a)=>{s.style.flexBasis="calc("+this._panelSizes[a]+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),!0)}containerClass(){return{"p-splitter p-component":!0,"p-splitter-horizontal":"horizontal"===this.layout,"p-splitter-vertical":"vertical"===this.layout}}panelContainerClass(){return{"p-splitter-panel":!0,"p-splitter-panel-nested":!0}}gutterStyle(){return this.horizontal()?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}}horizontal(){return"horizontal"===this.layout}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo),Tn($i))},i.\u0275cmp=hs({type:i,selectors:[["p-splitter"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&Rs(Noe,5),2&e){let r;jr(r=$r())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(e,n){2&e&&ag("p-splitter-panel-nested",n.nested)},inputs:{styleClass:"styleClass",panelStyleClass:"panelStyleClass",style:"style",panelStyle:"panelStyle",stateStorage:"stateStorage",stateKey:"stateKey",layout:"layout",gutterSize:"gutterSize",minSizes:"minSizes",panelSizes:"panelSizes"},outputs:{onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],["ngFor","",3,"ngForOf"],[4,"ngTemplateOutlet"],["class","p-splitter-gutter",3,"ngStyle","mousedown","touchstart",4,"ngIf"],[1,"p-splitter-gutter",3,"ngStyle","mousedown","touchstart"],[1,"p-splitter-gutter-handle"]],template:function(e,n){1&e&&(Pt(0,"div",0,1),At(2,Voe,3,6,"ng-template",2),Nt()),2&e&&(Us(n.styleClass),He("ngClass",n.containerClass())("ngStyle",n.style),tt(2),He("ngForOf",n.panels))},dependencies:[vo,Ec,wo,hu,Ho],styles:[".p-splitter{display:flex;flex-wrap:nowrap}.p-splitter-vertical{flex-direction:column}.p-splitter-panel{flex-grow:1}.p-splitter-panel-nested{display:flex}.p-splitter-panel p-splitter{flex-grow:1}.p-splitter-panel .p-splitter{flex-grow:1;border:0 none}.p-splitter-gutter{flex-grow:0;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:col-resize}.p-splitter-horizontal.p-splitter-resizing{cursor:col-resize;-webkit-user-select:none;user-select:none}.p-splitter-horizontal>.p-splitter-gutter>.p-splitter-gutter-handle{height:24px;width:100%}.p-splitter-horizontal>.p-splitter-gutter{cursor:col-resize}.p-splitter-vertical.p-splitter-resizing{cursor:row-resize;-webkit-user-select:none;user-select:none}.p-splitter-vertical>.p-splitter-gutter{cursor:row-resize}.p-splitter-vertical>.p-splitter-gutter>.p-splitter-gutter-handle{width:24px;height:100%}\n"],encapsulation:2,changeDetection:0}),i})(),Uoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl]}),i})();function Hoe(i,t){1&i&&Nr(0)}function Goe(i,t){if(1&i&&(js(0),At(1,Hoe,1,0,"ng-container",3),$s()),2&i){const e=Ze(2);tt(1),He("ngTemplateOutlet",e.contentTemplate)}}function Woe(i,t){if(1&i&&(Pt(0,"div",1),ch(1),At(2,Goe,2,1,"ng-container",2),Nt()),2&i){const e=Ze();He("hidden",!e.selected),xs("id",e.id)("aria-hidden",!e.selected)("aria-labelledby",e.id+"-label"),tt(2),He("ngIf",e.contentTemplate&&(e.cache?e.loaded:e.selected))}}const zz=["*"],joe=["content"],$oe=["navbar"],qoe=["prevBtn"],Xoe=["nextBtn"],Yoe=["inkbar"];function Koe(i,t){if(1&i){const e=vr();Pt(0,"button",12,13),si("click",function(){return gn(e),vn(Ze().navBackward())}),Ri(2,"span",14),Nt()}}function Zoe(i,t){1&i&&Ri(0,"span",24),2&i&&He("ngClass",Ze(3).$implicit.leftIcon)}function Qoe(i,t){1&i&&Ri(0,"span",25),2&i&&He("ngClass",Ze(3).$implicit.rightIcon)}function Joe(i,t){if(1&i&&(js(0),At(1,Zoe,1,1,"span",21),Pt(2,"span",22),ur(3),Nt(),At(4,Qoe,1,1,"span",23),$s()),2&i){const e=Ze(2).$implicit;tt(1),He("ngIf",e.leftIcon),tt(2),ca(e.header),tt(1),He("ngIf",e.rightIcon)}}function ele(i,t){1&i&&Nr(0)}function tle(i,t){if(1&i){const e=vr();Pt(0,"span",26),si("click",function(r){gn(e);const s=Ze(2).$implicit;return vn(Ze().close(r,s))}),Nt()}}const nle=function(i,t){return{"p-highlight":i,"p-disabled":t}};function ile(i,t){if(1&i){const e=vr();Pt(0,"li",16)(1,"a",17),si("click",function(r){gn(e);const s=Ze().$implicit;return vn(Ze().open(r,s))})("keydown.enter",function(r){gn(e);const s=Ze().$implicit;return vn(Ze().open(r,s))}),At(2,Joe,5,3,"ng-container",18),At(3,ele,1,0,"ng-container",19),At(4,tle,1,0,"span",20),Nt()()}if(2&i){const e=Ze().$implicit;Us(e.headerStyleClass),He("ngClass",fa(16,nle,e.selected,e.disabled))("ngStyle",e.headerStyle),tt(1),He("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),xs("id",e.id+"-label")("aria-selected",e.selected)("aria-controls",e.id)("aria-selected",e.selected)("tabindex",e.disabled?null:"0"),tt(1),He("ngIf",!e.headerTemplate),tt(1),He("ngTemplateOutlet",e.headerTemplate),tt(1),He("ngIf",e.closable)}}function rle(i,t){1&i&&At(0,ile,5,19,"li",15),2&i&&He("ngIf",!t.$implicit.closed)}function sle(i,t){if(1&i){const e=vr();Pt(0,"button",27,28),si("click",function(){return gn(e),vn(Ze().navForward())}),Ri(2,"span",29),Nt()}}const ale=function(i){return{"p-tabview p-component":!0,"p-tabview-scrollable":i}};let ole=0,Vz=(()=>{class i{constructor(e,n,r){this.viewContainer=n,this.cd=r,this.cache=!0,this.tooltipPosition="top",this.tooltipPositionStyle="absolute",this.id="p-tabpanel-"+ole++,this.tabView=e}ngAfterContentInit(){this.templates.forEach(e=>{"header"===e.getType()?this.headerTemplate=e.template:this.contentTemplate=e.template})}get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||this.cd.detectChanges(),e&&(this.loaded=!0)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.tabView.cd.markForCheck()}get header(){return this._header}set header(e){this._header=e,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(e){this._leftIcon=e,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(e){this._rightIcon=e,this.tabView.cd.markForCheck()}ngOnDestroy(){this.view=null}}return i.\u0275fac=function(e){return new(e||i)(Tn(Xr(()=>Uz)),Tn(jg),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-tabPanel"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:"cache",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},ngContentSelectors:zz,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(e,n){1&e&&(Ep(),At(0,Woe,3,5,"div",0)),2&e&&He("ngIf",!n.closed)},dependencies:[wo,hu],encapsulation:2}),i})(),Uz=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.orientation="top",this.onChange=new ki,this.onClose=new ki,this.activeIndexChange=new ki,this.backwardIsDisabled=!0,this.forwardIsDisabled=!1}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(e=>{this.initTabs()})}ngAfterViewChecked(){this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe()}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}open(e,n){if(n.disabled)e&&e.preventDefault();else{if(!n.selected){let r=this.findSelectedTab();r&&(r.selected=!1),this.tabChanged=!0,n.selected=!0;let s=this.findTabIndex(n);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(s),this.onChange.emit({originalEvent:e,index:s}),this.updateScrollBar(s)}e&&e.preventDefault()}}close(e,n){this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(n),close:()=>{this.closeTab(n)}}):(this.closeTab(n),this.onClose.emit({originalEvent:e,index:this.findTabIndex(n)})),e.stopPropagation()}closeTab(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(let n=0;n<this.tabs.length;n++){let r=this.tabs[n];if(!r.closed&&!e.disabled){r.selected=!0;break}}}e.closed=!0}}findSelectedTab(){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}findTabIndex(e){let n=-1;for(let r=0;r<this.tabs.length;r++)if(this.tabs[r]==e){n=r;break}return n}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(e))}updateInkBar(){if(this.navbar){const e=bn.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!e)return;this.inkbar.nativeElement.style.width=bn.getWidth(e)+"px",this.inkbar.nativeElement.style.left=bn.getOffset(e).left-bn.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(e){this.navbar.nativeElement.children[e].scrollIntoView({block:"nearest"})}updateButtonState(){const e=this.content.nativeElement,{scrollLeft:n,scrollWidth:r}=e,s=bn.getWidth(e);this.backwardIsDisabled=0===n,this.forwardIsDisabled=parseInt(n)===r-s}onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((e,n)=>n?e+bn.getWidth(n):e,0)}navBackward(){const e=this.content.nativeElement,n=bn.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft-n;e.scrollLeft=r<=0?0:r}navForward(){const e=this.content.nativeElement,n=bn.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft+n,s=e.scrollWidth-n;e.scrollLeft=r>=s?s:r}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-tabView"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Vz,4),2&e){let s;jr(s=$r())&&(n.tabPanels=s)}},viewQuery:function(e,n){if(1&e&&(Rs(joe,5),Rs($oe,5),Rs(qoe,5),Rs(Xoe,5),Rs(Yoe,5)),2&e){let r;jr(r=$r())&&(n.content=r.first),jr(r=$r())&&(n.navbar=r.first),jr(r=$r())&&(n.prevBtn=r.first),jr(r=$r())&&(n.nextBtn=r.first),jr(r=$r())&&(n.inkbar=r.first)}},hostAttrs:[1,"p-element"],inputs:{orientation:"orientation",style:"style",styleClass:"styleClass",controlClose:"controlClose",scrollable:"scrollable",activeIndex:"activeIndex"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:zz,decls:13,vars:9,consts:[[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["content",""],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],["prevBtn",""],[1,"pi","pi-chevron-left"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown.enter"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tabview-close pi pi-times",3,"click",4,"ngIf"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-close","pi","pi-times",3,"click"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"],["nextBtn",""],[1,"pi","pi-chevron-right"]],template:function(e,n){1&e&&(Ep(),Pt(0,"div",0)(1,"div",1),At(2,Koe,3,0,"button",2),Pt(3,"div",3,4),si("scroll",function(s){return n.onScroll(s)}),Pt(5,"ul",5,6),At(7,rle,1,1,"ng-template",7),Ri(8,"li",8,9),Nt()(),At(10,sle,3,0,"button",10),Nt(),Pt(11,"div",11),ch(12),Nt()()),2&e&&(Us(n.styleClass),He("ngClass",yr(7,ale,n.scrollable))("ngStyle",n.style),tt(2),He("ngIf",n.scrollable&&!n.backwardIsDisabled),tt(5),He("ngForOf",n.tabs),tt(3),He("ngIf",n.scrollable&&!n.forwardIsDisabled))},dependencies:[vo,Ec,wo,hu,Ho,Rv,kh],styles:[".p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:flex;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),lle=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl,Ov,Pc,Pl]}),i})();const Hz=function(i){return{"p-treenode-droppoint-active":i}};function ule(i,t){if(1&i){const e=vr();Pt(0,"li",4),si("drop",function(r){return gn(e),vn(Ze(2).onDropPoint(r,-1))})("dragover",function(r){return gn(e),vn(Ze(2).onDropPointDragOver(r))})("dragenter",function(r){return gn(e),vn(Ze(2).onDropPointDragEnter(r,-1))})("dragleave",function(r){return gn(e),vn(Ze(2).onDropPointDragLeave(r))}),Nt()}if(2&i){const e=Ze(2);He("ngClass",yr(1,Hz,e.draghoverPrev))}}const cle=function(i){return{"p-checkbox-disabled":i}},hle=function(i,t){return{"p-highlight":i,"p-indeterminate":t}},dle=function(i,t){return{"pi-check":i,"pi-minus":t}};function fle(i,t){if(1&i&&(Pt(0,"div",13)(1,"div",14),Ri(2,"span",15),Nt()()),2&i){const e=Ze(3);He("ngClass",yr(4,cle,!1===e.node.selectable)),xs("aria-checked",e.isSelected()),tt(1),He("ngClass",fa(6,hle,e.isSelected(),e.node.partialSelected)),tt(1),He("ngClass",fa(9,dle,e.isSelected(),e.node.partialSelected))}}function ple(i,t){1&i&&Ri(0,"span"),2&i&&Us(Ze(3).getIcon())}function gle(i,t){if(1&i&&(Pt(0,"span"),ur(1),Nt()),2&i){const e=Ze(3);tt(1),ca(e.node.label)}}function mle(i,t){1&i&&Nr(0)}const Gz=function(i){return{$implicit:i}};function vle(i,t){if(1&i&&(Pt(0,"span"),At(1,mle,1,0,"ng-container",16),Nt()),2&i){const e=Ze(3);tt(1),He("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",yr(2,Gz,e.node))}}function _le(i,t){if(1&i&&Ri(0,"p-treeNode",19),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,a=Ze(4);He("node",e)("parentNode",a.node)("firstChild",n)("lastChild",r)("index",s)("itemSize",a.itemSize)("level",a.level+1)}}function yle(i,t){if(1&i&&(Pt(0,"ul",17),At(1,_le,1,7,"p-treeNode",18),Nt()),2&i){const e=Ze(3);bf("display",e.node.expanded?"block":"none"),tt(1),He("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const ble=function(i,t){return["p-treenode",i,t]},Wz=function(i){return{height:i}},Cle=function(i,t,e){return{"p-treenode-selectable":i,"p-treenode-dragover":t,"p-highlight":e}},wle=function(i,t){return{"pi-chevron-right":i,"pi-chevron-down":t}};function xle(i,t){if(1&i){const e=vr();Pt(0,"li",5)(1,"div",6),si("click",function(r){return gn(e),vn(Ze(2).onNodeClick(r))})("contextmenu",function(r){return gn(e),vn(Ze(2).onNodeRightClick(r))})("touchend",function(){return gn(e),vn(Ze(2).onNodeTouchEnd())})("drop",function(r){return gn(e),vn(Ze(2).onDropNode(r))})("dragover",function(r){return gn(e),vn(Ze(2).onDropNodeDragOver(r))})("dragenter",function(r){return gn(e),vn(Ze(2).onDropNodeDragEnter(r))})("dragleave",function(r){return gn(e),vn(Ze(2).onDropNodeDragLeave(r))})("dragstart",function(r){return gn(e),vn(Ze(2).onDragStart(r))})("dragend",function(r){return gn(e),vn(Ze(2).onDragStop(r))})("keydown",function(r){return gn(e),vn(Ze(2).onKeyDown(r))}),Pt(2,"button",7),si("click",function(r){return gn(e),vn(Ze(2).toggle(r))}),Ri(3,"span",8),Nt(),At(4,fle,3,12,"div",9),At(5,ple,1,2,"span",3),Pt(6,"span",10),At(7,gle,2,1,"span",11),At(8,vle,2,4,"span",11),Nt()(),At(9,yle,2,4,"ul",12),Nt()}if(2&i){const e=Ze(2);He("ngClass",fa(18,ble,e.node.styleClass||"",e.isLeaf()?"p-treenode-leaf":""))("ngStyle",yr(21,Wz,e.itemSize+"px")),tt(1),bf("padding-left",e.level*e.indentation+"rem"),He("draggable",e.tree.draggableNodes)("ngClass",Th(23,Cle,e.tree.selectionMode&&!1!==e.node.selectable,e.draghoverNode,e.isSelected())),xs("tabindex",0)("aria-posinset",e.index+1)("aria-expanded",e.node.expanded)("aria-selected",e.isSelected())("aria-label",e.node.label),tt(1),xs("aria-label",e.tree.togglerAriaLabel),tt(1),He("ngClass",fa(27,wle,!e.node.expanded,e.node.expanded)),tt(1),He("ngIf","checkbox"==e.tree.selectionMode),tt(1),He("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),tt(2),He("ngIf",!e.tree.getTemplateForNode(e.node)),tt(1),He("ngIf",e.tree.getTemplateForNode(e.node)),tt(1),He("ngIf",!e.tree.virtualScroll&&e.node.children&&e.node.expanded)}}function Ale(i,t){if(1&i){const e=vr();Pt(0,"li",4),si("drop",function(r){return gn(e),vn(Ze(2).onDropPoint(r,1))})("dragover",function(r){return gn(e),vn(Ze(2).onDropPointDragOver(r))})("dragenter",function(r){return gn(e),vn(Ze(2).onDropPointDragEnter(r,1))})("dragleave",function(r){return gn(e),vn(Ze(2).onDropPointDragLeave(r))}),Nt()}if(2&i){const e=Ze(2);He("ngClass",yr(1,Hz,e.draghoverNext))}}const jz=function(i){return{"p-treenode-connector-line":i}};function Ile(i,t){if(1&i&&(Pt(0,"td",25)(1,"table",26)(2,"tbody")(3,"tr"),Ri(4,"td",27),Nt(),Pt(5,"tr"),Ri(6,"td",27),Nt()()()()),2&i){const e=Ze(3);tt(4),He("ngClass",yr(2,jz,!e.firstChild)),tt(2),He("ngClass",yr(4,jz,!e.lastChild))}}const Sle=function(i,t){return{"pi-plus":i,"pi-minus":t}};function Ele(i,t){if(1&i){const e=vr();Pt(0,"span",28),si("click",function(r){return gn(e),vn(Ze(3).toggle(r))}),Nt()}if(2&i){const e=Ze(3);He("ngClass",fa(2,Sle,!e.node.expanded,e.node.expanded)),xs("aria-label",e.tree.togglerAriaLabel)}}function Tle(i,t){1&i&&Ri(0,"span"),2&i&&Us(Ze(3).getIcon())}function Mle(i,t){if(1&i&&(Pt(0,"span"),ur(1),Nt()),2&i){const e=Ze(3);tt(1),ca(e.node.label)}}function Dle(i,t){1&i&&Nr(0)}function Ple(i,t){if(1&i&&(Pt(0,"span"),At(1,Dle,1,0,"ng-container",16),Nt()),2&i){const e=Ze(3);tt(1),He("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",yr(2,Gz,e.node))}}function Lle(i,t){if(1&i&&Ri(0,"p-treeNode",32),2&i){const n=t.first,r=t.last;He("node",t.$implicit)("firstChild",n)("lastChild",r)}}function kle(i,t){if(1&i&&(Pt(0,"td",29)(1,"div",30),At(2,Lle,1,3,"p-treeNode",31),Nt()()),2&i){const e=Ze(3);bf("display",e.node.expanded?"table-cell":"none"),tt(2),He("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const Rle=function(i){return{"p-treenode-collapsed":i}},Ole=function(i,t){return{"p-treenode-selectable":i,"p-highlight":t}};function Fle(i,t){if(1&i){const e=vr();Pt(0,"table")(1,"tbody")(2,"tr"),At(3,Ile,7,6,"td",20),Pt(4,"td",21)(5,"div",22),si("click",function(r){return gn(e),vn(Ze(2).onNodeClick(r))})("contextmenu",function(r){return gn(e),vn(Ze(2).onNodeRightClick(r))})("touchend",function(){return gn(e),vn(Ze(2).onNodeTouchEnd())})("keydown",function(r){return gn(e),vn(Ze(2).onNodeKeydown(r))}),At(6,Ele,1,5,"span",23),At(7,Tle,1,2,"span",3),Pt(8,"span",10),At(9,Mle,2,1,"span",11),At(10,Ple,2,4,"span",11),Nt()()(),At(11,kle,3,4,"td",24),Nt()()()}if(2&i){const e=Ze(2);Us(e.node.styleClass),tt(3),He("ngIf",!e.root),tt(1),He("ngClass",yr(10,Rle,!e.node.expanded)),tt(1),He("ngClass",fa(12,Ole,e.tree.selectionMode,e.isSelected())),tt(1),He("ngIf",!e.isLeaf()),tt(1),He("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),tt(2),He("ngIf",!e.tree.getTemplateForNode(e.node)),tt(1),He("ngIf",e.tree.getTemplateForNode(e.node)),tt(1),He("ngIf",e.node.children&&e.node.expanded)}}function Nle(i,t){if(1&i&&(At(0,ule,1,3,"li",1),At(1,xle,10,30,"li",2),At(2,Ale,1,3,"li",1),At(3,Fle,12,15,"table",3)),2&i){const e=Ze();He("ngIf",e.tree.droppableNodes),tt(1),He("ngIf",!e.tree.horizontal),tt(1),He("ngIf",e.tree.droppableNodes&&e.lastChild),tt(1),He("ngIf",e.tree.horizontal)}}const Ble=["filter"],zle=["scroller"],Vle=["wrapper"];function Ule(i,t){if(1&i&&(Pt(0,"div",9),Ri(1,"i"),Nt()),2&i){const e=Ze(2);tt(1),Us("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function Hle(i,t){1&i&&Nr(0)}function Gle(i,t){if(1&i){const e=vr();Pt(0,"div",10)(1,"input",11,12),si("keydown.enter",function(r){return r.preventDefault()})("input",function(r){return gn(e),vn(Ze(2)._filter(r.target.value))}),Nt(),Ri(3,"span",13),Nt()}if(2&i){const e=Ze(2);tt(1),xs("placeholder",e.filterPlaceholder)}}function Wle(i,t){if(1&i&&Ri(0,"p-treeNode",20),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,a=Ze(2).options,u=Ze(3);He("level",e.level)("rowNode",e)("node",e.node)("firstChild",n)("lastChild",r)("index",u.getIndex(a,s))("itemSize",a.itemSize)("indentation",u.indentation)}}function jle(i,t){if(1&i&&(Pt(0,"ul",18),At(1,Wle,1,8,"p-treeNode",19),Nt()),2&i){const e=Ze(),n=e.options,r=e.$implicit,s=Ze(3);co(n.contentStyle),He("ngClass",n.contentStyleClass),xs("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledBy),tt(1),He("ngForOf",r)("ngForTrackBy",s.trackBy)}}function $le(i,t){1&i&&At(0,jle,2,7,"ul",17),2&i&&He("ngIf",t.$implicit)}function qle(i,t){1&i&&Nr(0)}const Xle=function(i){return{options:i}};function Yle(i,t){if(1&i&&At(0,qle,1,0,"ng-container",22),2&i){const e=t.options;He("ngTemplateOutlet",Ze(4).loaderTemplate)("ngTemplateOutletContext",yr(2,Xle,e))}}function Kle(i,t){1&i&&(js(0),At(1,Yle,1,4,"ng-template",21),$s())}function Zle(i,t){if(1&i){const e=vr();Pt(0,"p-scroller",14,15),si("onScroll",function(r){return gn(e),vn(Ze(2).onScroll.emit(r))})("onScrollIndexChange",function(r){return gn(e),vn(Ze(2).onScrollIndexChange.emit(r))})("onLazyLoad",function(r){return gn(e),vn(Ze(2).onLazyLoad.emit(r))}),At(2,$le,1,1,"ng-template",16),At(3,Kle,2,0,"ng-container",7),Nt()}if(2&i){const e=Ze(2);co(yr(7,Wz,e.scrollHeight)),He("items",e.serializedValue)("itemSize",e.virtualScrollItemSize||e._virtualNodeHeight)("lazy",e.lazy)("options",e.virtualScrollOptions),tt(3),He("ngIf",e.loaderTemplate)}}function Qle(i,t){if(1&i&&Ri(0,"p-treeNode",28),2&i){const n=t.first,r=t.last,s=t.index;He("node",t.$implicit)("firstChild",n)("lastChild",r)("index",s)("level",0)}}function Jle(i,t){if(1&i&&(Pt(0,"ul",26),At(1,Qle,1,5,"p-treeNode",27),Nt()),2&i){const e=Ze(3);xs("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),tt(1),He("ngForOf",e.getRootNode())("ngForTrackBy",e.trackBy)}}function eue(i,t){if(1&i&&(js(0),Pt(1,"div",23,24),At(3,Jle,2,4,"ul",25),Nt(),$s()),2&i){const e=Ze(2);tt(1),bf("max-height",e.scrollHeight),tt(2),He("ngIf",e.getRootNode())}}function tue(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(3);tt(1),cc(" ",e.emptyMessageLabel," ")}}function nue(i,t){1&i&&Nr(0,null,31)}function iue(i,t){if(1&i&&(Pt(0,"div",29),At(1,tue,2,1,"ng-container",30),At(2,nue,2,0,"ng-container",4),Nt()),2&i){const e=Ze(2);tt(1),He("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),tt(1),He("ngTemplateOutlet",e.emptyMessageTemplate)}}function rue(i,t){1&i&&Nr(0)}const sue=function(i,t,e,n){return{"p-tree p-component":!0,"p-tree-selectable":i,"p-treenode-dragover":t,"p-tree-loading":e,"p-tree-flex-scrollable":n}};function aue(i,t){if(1&i){const e=vr();Pt(0,"div",2),si("drop",function(r){return gn(e),vn(Ze().onDrop(r))})("dragover",function(r){return gn(e),vn(Ze().onDragOver(r))})("dragenter",function(){return gn(e),vn(Ze().onDragEnter())})("dragleave",function(r){return gn(e),vn(Ze().onDragLeave(r))}),At(1,Ule,2,2,"div",3),At(2,Hle,1,0,"ng-container",4),At(3,Gle,4,1,"div",5),At(4,Zle,4,9,"p-scroller",6),At(5,eue,4,3,"ng-container",7),At(6,iue,3,3,"div",8),At(7,rue,1,0,"ng-container",4),Nt()}if(2&i){const e=Ze();Us(e.styleClass),He("ngClass",ep(11,sue,e.selectionMode,e.dragHover,e.loading,"flex"===e.scrollHeight))("ngStyle",e.style),tt(1),He("ngIf",e.loading),tt(1),He("ngTemplateOutlet",e.headerTemplate),tt(1),He("ngIf",e.filter),tt(1),He("ngIf",e.virtualScroll),tt(1),He("ngIf",!e.virtualScroll),tt(1),He("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),tt(1),He("ngTemplateOutlet",e.footerTemplate)}}function oue(i,t){1&i&&Nr(0)}function lue(i,t){if(1&i&&(Pt(0,"div",34),Ri(1,"i"),Nt()),2&i){const e=Ze(2);tt(1),Us("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function uue(i,t){if(1&i&&(Pt(0,"table"),Ri(1,"p-treeNode",35),Nt()),2&i){const e=Ze(2);tt(1),He("node",e.value[0])("root",!0)}}function cue(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(3);tt(1),cc(" ",e.emptyMessageLabel," ")}}function hue(i,t){1&i&&Nr(0,null,31)}function due(i,t){if(1&i&&(Pt(0,"div",29),At(1,cue,2,1,"ng-container",30),At(2,hue,2,0,"ng-container",4),Nt()),2&i){const e=Ze(2);tt(1),He("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),tt(1),He("ngTemplateOutlet",e.emptyMessageTemplate)}}function fue(i,t){1&i&&Nr(0)}const pue=function(i){return{"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":i}};function gue(i,t){if(1&i&&(Pt(0,"div",32),At(1,oue,1,0,"ng-container",4),At(2,lue,2,2,"div",33),At(3,uue,2,2,"table",7),At(4,due,3,3,"div",8),At(5,fue,1,0,"ng-container",4),Nt()),2&i){const e=Ze();Us(e.styleClass),He("ngClass",yr(9,pue,e.selectionMode))("ngStyle",e.style),tt(1),He("ngTemplateOutlet",e.headerTemplate),tt(1),He("ngIf",e.loading),tt(1),He("ngIf",e.value&&e.value[0]),tt(1),He("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),tt(1),He("ngTemplateOutlet",e.footerTemplate)}}let mue=(()=>{class i{constructor(e){this.tree=e}ngOnInit(){this.node.parent=this.parentNode,this.parentNode&&this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value))}getIcon(){let e;return e=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children.length?this.node.expandedIcon:this.node.collapsedIcon,i.ICON_CLASS+" "+e}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(e){this.node.expanded?this.collapse(e):this.expand(e)}expand(e){this.node.expanded=!0,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeExpand.emit({originalEvent:e,node:this.node})}collapse(e){this.node.expanded=!1,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeCollapse.emit({originalEvent:e,node:this.node})}onNodeClick(e){this.tree.onNodeClick(e,this.node)}onNodeKeydown(e){13===e.which&&this.tree.onNodeClick(e,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(e){this.tree.onNodeRightClick(e,this.node)}isSelected(){return this.tree.isSelected(this.node)}onDropPoint(e,n){e.preventDefault();let r=this.tree.dragNode,u=this.tree.dragNodeTree!==this.tree||1===n||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(r,this.node,this.tree.dragNodeScope)&&u){let h={...this.createDropPointEventMetadata(n)};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index,accept:()=>{this.processPointDrop(h)}}):(this.processPointDrop(h),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(e){let n=e.dropNode.parent?e.dropNode.parent.children:this.tree.value;e.dragNodeSubNodes.splice(e.dragNodeIndex,1);let r=this.index;e.position<0?(r=e.dragNodeSubNodes===n?e.dragNodeIndex>e.index?e.index:e.index-1:e.index,n.splice(r,0,e.dragNode)):(r=n.length,n.push(e.dragNode)),this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:e.dragNodeIndex})}createDropPointEventMetadata(e){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:e}}onDropPointDragOver(e){e.dataTransfer.dropEffect="move",e.preventDefault()}onDropPointDragEnter(e,n){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(n<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(e){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(e){this.tree.draggableNodes&&!1!==this.node.draggable?(e.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):e.preventDefault()}onDragStop(e){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(e){e.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(e.preventDefault(),e.stopPropagation())}onDropNode(e){if(this.tree.droppableNodes&&!1!==this.node.droppable){let n=this.tree.dragNode;if(this.tree.allowDrop(n,this.node,this.tree.dragNodeScope)){let r={...this.createDropNodeEventMetadata()};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index,accept:()=>{this.processNodeDrop(r)}}):(this.processNodeDrop(r),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index}))}}e.preventDefault(),e.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(e){let n=e.dragNodeIndex;e.dragNodeSubNodes.splice(n,1),e.dropNode.children?e.dropNode.children.push(e.dragNode):e.dropNode.children=[e.dragNode],this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:n})}onDropNodeDragEnter(e){this.tree.droppableNodes&&!1!==this.node.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(e){if(this.tree.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>=Math.floor(n.top+n.height)||e.y<n.top)&&(this.draghoverNode=!1)}}onKeyDown(e){const n=e.target.parentElement.parentElement;if(!("P-TREENODE"!==n.nodeName||this.tree.contextMenu&&"block"===this.tree.contextMenu.containerViewChild.nativeElement.style.display))switch(e.which){case 40:const r=this.tree.droppableNodes?n.children[1].children[1]:n.children[0].children[1];if(r&&r.children.length>0)this.focusNode(r.children[0]);else{const s=n.nextElementSibling;if(s)this.focusNode(s);else{let a=this.findNextSiblingOfAncestor(n);a&&this.focusNode(a)}}e.preventDefault();break;case 38:if(n.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(n.previousElementSibling));else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 39:!this.node.expanded&&!this.tree.isNodeLeaf(this.node)&&this.expand(e),e.preventDefault();break;case 37:if(this.node.expanded)this.collapse(e);else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 13:this.tree.onNodeClick(e,this.node),e.preventDefault()}}findNextSiblingOfAncestor(e){let n=this.getParentNodeElement(e);return n?n.nextElementSibling?n.nextElementSibling:this.findNextSiblingOfAncestor(n):null}findLastVisibleDescendant(e){const r=Array.from(e.children).find(s=>bn.hasClass(s,"p-treenode")).children[1];return r&&r.children.length>0?this.findLastVisibleDescendant(r.children[r.children.length-1]):e}getParentNodeElement(e){const n=e.parentElement.parentElement.parentElement;return"P-TREENODE"===n.tagName?n:null}focusNode(e){this.tree.droppableNodes?e.children[1].children[0].focus():e.children[0].children[0].focus()}}return i.ICON_CLASS="p-treenode-icon ",i.\u0275fac=function(e){return new(e||i)(Tn(Xr(()=>$z)))},i.\u0275cmp=hs({type:i,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:"root",index:"index",firstChild:"firstChild",lastChild:"lastChild",level:"level",indentation:"indentation",itemSize:"itemSize"},decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave"],[3,"ngClass","ngStyle"],["role","treeitem",1,"p-treenode-content",3,"draggable","ngClass","click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","keydown"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[1,"p-tree-toggler-icon","pi","pi-fw",3,"ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],[4,"ngIf"],["class","p-treenode-children","style","display: none;","role","group",3,"display",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon","pi",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"p-treenode-children",2,"display","none"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"ngClass","click","contextmenu","touchend","keydown"],["class","p-tree-toggler pi pi-fw",3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"display",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[3,"ngClass"],[1,"p-tree-toggler","pi","pi-fw",3,"ngClass","click"],[1,"p-treenode-children-container"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(e,n){1&e&&At(0,Nle,4,4,"ng-template",0),2&e&&He("ngIf",n.node)},dependencies:[vo,Ec,wo,hu,Ho,kh,i],encapsulation:2}),i})(),$z=(()=>{class i{constructor(e,n,r){this.el=e,this.dragDropService=n,this.config=r,this.layout="vertical",this.metaKeySelection=!0,this.propagateSelectionUp=!0,this.propagateSelectionDown=!0,this.loadingIcon="pi pi-spinner",this.emptyMessage="",this.filterBy="label",this.filterMode="lenient",this.lazy=!1,this.indentation=1.5,this.trackBy=(s,a)=>a,this.selectionChange=new ki,this.onNodeSelect=new ki,this.onNodeUnselect=new ki,this.onNodeExpand=new ki,this.onNodeCollapse=new ki,this.onNodeContextMenuSelect=new ki,this.onNodeDrop=new ki,this.onLazyLoad=new ki,this.onScroll=new ki,this.onScrollIndexChange=new ki,this.onFilter=new ki}get virtualNodeHeight(){return this._virtualNodeHeight}set virtualNodeHeight(e){this._virtualNodeHeight=e,console.warn("The virtualNodeHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(e=>{this.dragNodeTree=e.tree,this.dragNode=e.node,this.dragNodeSubNodes=e.subNodes,this.dragNodeIndex=e.index,this.dragNodeScope=e.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(e=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(e){e.value&&this.updateSerializedValue()}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Kc.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"empty":this.emptyMessageTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;default:this.templateMap[e.name]=e.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let a of n){a.parent=e;const u={node:a,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(u),u.visible&&a.expanded&&this.serializeNodes(a,a.children,r+1,u.visible)}}onNodeClick(e,n){let r=e.target;if(!bn.hasClass(r,"p-tree-toggler")&&!bn.hasClass(r,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===n.selectable||this.hasFilteredNodes()&&!(n=this.getNodeWithKey(n.key,this.value)))return;let s=this.findIndexInSelection(n),a=s>=0;if(this.isCheckboxSelectionMode())a?(this.propagateSelectionDown?this.propagateDown(n,!1):this.selection=this.selection.filter((u,h)=>h!=s),this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown?this.propagateDown(n,!0):this.selection=[...this.selection||[],n],this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n}));else if(!this.nodeTouched&&this.metaKeySelection){let h=e.metaKey||e.ctrlKey;a&&h?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((m,w)=>w!=s),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.isMultipleSelectionMode()&&(this.selection=h&&this.selection||[],this.selection=[...this.selection,n],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:e,node:n}))}else this.isSingleSelectionMode()?a?(this.selection=null,this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=n,this.onNodeSelect.emit({originalEvent:e,node:n})):a?(this.selection=this.selection.filter((h,m)=>m!=s),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=[...this.selection||[],n],this.onNodeSelect.emit({originalEvent:e,node:n})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(e,n){if(this.contextMenu){let r=e.target;if(r.className&&0===r.className.indexOf("p-tree-toggler"))return;this.findIndexInSelection(n)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.selectionChange.emit([n])),this.contextMenu.show(e),this.onNodeContextMenuSelect.emit({originalEvent:e,node:n})}}findIndexInSelection(e){let n=-1;if(this.selectionMode&&this.selection)if(this.isSingleSelectionMode())n=this.selection.key&&this.selection.key===e.key||this.selection==e?0:-1;else for(let r=0;r<this.selection.length;r++){let s=this.selection[r];if(s.key&&s.key===e.key||s==e){n=r;break}}return n}syncNodeOption(e,n,r,s){const a=this.hasFilteredNodes()?this.getNodeWithKey(e.key,n):null;a&&(a[r]=s||e[r])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}getNodeWithKey(e,n){for(let r of n){if(r.key===e)return r;if(r.children){let s=this.getNodeWithKey(e,r.children);if(s)return s}}}propagateUp(e,n){if(e.children&&e.children.length){let s=0,a=!1;for(let u of e.children)this.isSelected(u)?s++:u.partialSelected&&(a=!0);if(n&&s==e.children.length)this.selection=[...this.selection||[],e],e.partialSelected=!1;else{if(!n){let u=this.findIndexInSelection(e);u>=0&&(this.selection=this.selection.filter((h,m)=>m!=u))}e.partialSelected=!!(a||s>0&&s!=e.children.length)}this.syncNodeOption(e,this.filteredNodes,"partialSelected")}let r=e.parent;r&&this.propagateUp(r,n)}propagateDown(e,n){let r=this.findIndexInSelection(e);if(n&&-1==r?this.selection=[...this.selection||[],e]:!n&&r>-1&&(this.selection=this.selection.filter((s,a)=>a!=r)),e.partialSelected=!1,this.syncNodeOption(e,this.filteredNodes,"partialSelected"),e.children&&e.children.length)for(let s of e.children)this.propagateDown(s,n)}isSelected(e){return-1!=this.findIndexInSelection(e)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(e){return 0!=e.leaf&&!(e.children&&e.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(e){return this.templateMap?e.type?this.templateMap[e.type]:this.templateMap.default:null}onDragOver(e){this.droppableNodes&&(!this.value||0===this.value.length)&&(e.dataTransfer.dropEffect="move",e.preventDefault())}onDrop(e){if(this.droppableNodes&&(!this.value||0===this.value.length)){e.preventDefault();let n=this.dragNode;if(this.allowDrop(n,null,this.dragNodeScope)){let r=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r,accept:()=>{this.processTreeDrop(n,r)}}):(this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r}),this.processTreeDrop(n,r))}}}processTreeDrop(e,n){this.dragNodeSubNodes.splice(n,1),this.value.push(e),this.dragDropService.stopDrag({node:e})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(e){if(this.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>n.top+n.height||e.y<n.top)&&(this.dragHover=!1)}}allowDrop(e,n,r){if(e){if(this.isValidDragScope(r)){let s=!0;if(n)if(e===n)s=!1;else{let a=n.parent;for(;null!=a;){if(a===e){s=!1;break}a=a.parent}}return s}return!1}return!1}isValidDragScope(e){let n=this.droppableScope;if(n){if("string"==typeof n){if("string"==typeof e)return n===e;if(e instanceof Array)return-1!=e.indexOf(n)}else if(n instanceof Array){if("string"==typeof e)return-1!=n.indexOf(e);if(e instanceof Array)for(let r of n)for(let s of e)if(r===s)return!0}return!1}return!0}_filter(e){let n=e;if(""===n)this.filteredNodes=null;else{this.filteredNodes=[];const r=this.filterBy.split(","),s=ns.removeAccents(n).toLocaleLowerCase(this.filterLocale),a="strict"===this.filterMode;for(let u of this.value){let h={...u},m={searchFields:r,filterText:s,isStrictMode:a};(a&&(this.findFilteredNodes(h,m)||this.isFilterMatched(h,m))||!a&&(this.isFilterMatched(h,m)||this.findFilteredNodes(h,m)))&&this.filteredNodes.push(h)}}this.updateSerializedValue(),this.onFilter.emit({filter:n,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let a of s){let u={...a};this.isFilterMatched(u,n)&&(r=!0,e.children.push(u))}}if(r)return e.expanded=!0,!0}}isFilterMatched(e,{searchFields:n,filterText:r,isStrictMode:s}){let a=!1;for(let u of n)ns.removeAccents(String(ns.resolveFieldData(e,u))).toLocaleLowerCase(this.filterLocale).indexOf(r)>-1&&(a=!0);return(!a||s&&!this.isNodeLeaf(e))&&(a=this.findFilteredNodes(e,{searchFields:n,filterText:r,isStrictMode:s})||a),a}getIndex(e,n){const r=e.getItemOptions;return r?r(n).index:n}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(dZ,8),Tn(og))},i.\u0275cmp=hs({type:i,selectors:[["p-tree"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(Ble,5),Rs(zle,5),Rs(Vle,5)),2&e){let r;jr(r=$r())&&(n.filterViewChild=r.first),jr(r=$r())&&(n.scroller=r.first),jr(r=$r())&&(n.wrapperViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:"draggableNodes",droppableNodes:"droppableNodes",metaKeySelection:"metaKeySelection",propagateSelectionUp:"propagateSelectionUp",propagateSelectionDown:"propagateSelectionDown",loading:"loading",loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:"validateDrop",filter:"filter",filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filteredNodes:"filteredNodes",filterLocale:"filterLocale",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",indentation:"indentation",trackBy:"trackBy",virtualNodeHeight:"virtualNodeHeight"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange",onFilter:"onFilter"},features:[Tl],decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle","drop","dragover","dragenter","dragleave"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],["styleClass","p-tree-wrapper",3,"items","style","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[1,"p-tree-filter-container"],["type","text","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],["filter",""],[1,"p-tree-filter-icon","pi","pi-search"],["styleClass","p-tree-wrapper",3,"items","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad"],["scroller",""],["pTemplate","content"],["class","p-tree-container","role","tree",3,"ngClass","style",4,"ngIf"],["role","tree",1,"p-tree-container",3,"ngClass"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation",4,"ngFor","ngForOf","ngForTrackBy"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation"],["pTemplate","loader"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-tree-wrapper"],["wrapper",""],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level"],[1,"p-tree-empty-message"],[4,"ngIf","ngIfElse"],["emptyFilter",""],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(e,n){1&e&&(At(0,aue,8,16,"div",0),At(1,gue,6,11,"div",1)),2&e&&(He("ngIf",!n.horizontal),tt(1),He("ngIf",n.horizontal))},dependencies:[vo,Ec,wo,hu,Ho,Kl,kx,mue],styles:[".p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex-shrink:0}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}.p-scroller .p-tree-container{overflow:visible}\n"],encapsulation:2}),i})(),vue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl,Pc,Fv,Pl,Fv]}),i})();const _ue=["container"],yue=["resizeHelper"],bue=["reorderIndicatorUp"],Cue=["reorderIndicatorDown"],wue=["table"],xue=["scrollableView"],Aue=["scrollableFrozenView"];function Iue(i,t){if(1&i&&(Pt(0,"div",12)(1,"div",13),Ri(2,"i"),Nt()()),2&i){const e=Ze();tt(2),Us("p-treetable-loading-icon pi-spin "+e.loadingIcon)}}function Sue(i,t){1&i&&Nr(0)}function Eue(i,t){if(1&i&&(Pt(0,"div",14),At(1,Sue,1,0,"ng-container",15),Nt()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.captionTemplate)}}function Tue(i,t){if(1&i){const e=vr();Pt(0,"p-paginator",16),si("onPageChange",function(r){return gn(e),vn(Ze().onPageChange(r))}),Nt()}if(2&i){const e=Ze();He("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function Mue(i,t){1&i&&Nr(0)}function Due(i,t){1&i&&Nr(0)}function Pue(i,t){1&i&&Nr(0)}const Cy=function(i){return{$implicit:i}};function Lue(i,t){if(1&i&&(Pt(0,"div",17)(1,"table",18,19),At(3,Mue,1,0,"ng-container",20),Pt(4,"thead",21),At(5,Due,1,0,"ng-container",20),Nt(),Ri(6,"tbody",22),Pt(7,"tfoot",23),At(8,Pue,1,0,"ng-container",20),Nt()()()),2&i){const e=Ze();tt(1),He("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),tt(2),He("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",yr(10,Cy,e.columns)),tt(2),He("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",yr(12,Cy,e.columns)),tt(1),He("pTreeTableBody",e.columns)("pTreeTableBodyTemplate",e.bodyTemplate),tt(2),He("ngTemplateOutlet",e.footerTemplate)("ngTemplateOutletContext",yr(14,Cy,e.columns))}}const kue=function(i){return{width:i}};function Rue(i,t){if(1&i&&Ri(0,"div",28,29),2&i){const e=Ze(2);He("ttScrollableView",e.frozenColumns)("frozen",!0)("ngStyle",yr(4,kue,e.frozenWidth))("scrollHeight",e.scrollHeight)}}const Oue=function(i,t){return{left:i,width:t}};function Fue(i,t){if(1&i&&(Pt(0,"div",24),At(1,Rue,2,6,"div",25),Ri(2,"div",26,27),Nt()),2&i){const e=Ze();tt(1),He("ngIf",e.frozenColumns||e.frozenBodyTemplate),tt(1),He("ttScrollableView",e.columns)("frozen",!1)("scrollHeight",e.scrollHeight)("ngStyle",fa(5,Oue,e.frozenWidth,"calc(100% - "+e.frozenWidth+")"))}}function Nue(i,t){if(1&i){const e=vr();Pt(0,"p-paginator",30),si("onPageChange",function(r){return gn(e),vn(Ze().onPageChange(r))}),Nt()}if(2&i){const e=Ze();He("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function Bue(i,t){1&i&&Nr(0)}function zue(i,t){if(1&i&&(Pt(0,"div",31),At(1,Bue,1,0,"ng-container",15),Nt()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.summaryTemplate)}}function Vue(i,t){1&i&&Ri(0,"div",32,33)}function Uue(i,t){1&i&&Ri(0,"span",34,35)}function Hue(i,t){1&i&&Ri(0,"span",36,37)}const Gue=function(i,t,e,n,r){return{"p-treetable p-component":!0,"p-treetable-hoverable-rows":i,"p-treetable-auto-layout":t,"p-treetable-resizable":e,"p-treetable-resizable-fit":n,"p-treetable-flex-scrollable":r}},Wue=["pTreeTableBody",""];function jue(i,t){1&i&&Nr(0)}const $ue=function(i,t,e,n){return{$implicit:i,node:t,rowData:e,columns:n}};function que(i,t){if(1&i&&(js(0),At(1,jue,1,0,"ng-container",2),$s()),2&i){const e=Ze().$implicit,n=Ze();tt(1),He("ngTemplateOutlet",n.template)("ngTemplateOutletContext",ep(2,$ue,e,e.node,e.node.data,n.columns))}}function Xue(i,t){1&i&&At(0,que,2,7,"ng-container",1),2&i&&He("ngIf",t.$implicit.visible)}function Yue(i,t){1&i&&Nr(0)}const Kue=function(i,t){return{$implicit:i,frozen:t}};function Zue(i,t){if(1&i&&(js(0),At(1,Yue,1,0,"ng-container",2),$s()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.tt.emptyMessageTemplate)("ngTemplateOutletContext",fa(2,Kue,e.columns,e.frozen))}}const Que=["scrollHeader"],Jue=["scrollHeaderBox"],ece=["scrollBody"],tce=["scrollTable"],nce=["loadingTable"],ice=["scrollFooter"],rce=["scrollFooterBox"],sce=["scrollableAligner"],ace=["scroller"],oce=["ttScrollableView",""];function lce(i,t){1&i&&Nr(0)}function uce(i,t){1&i&&Nr(0)}function cce(i,t){1&i&&Nr(0)}const qz=function(i,t){return{$implicit:i,options:t}};function hce(i,t){if(1&i&&At(0,cce,1,0,"ng-container",5),2&i){const e=t.$implicit,n=t.options;Ze(2),He("ngTemplateOutlet",_o(11))("ngTemplateOutletContext",fa(2,qz,e,n))}}function dce(i,t){1&i&&Nr(0)}const fce=function(i){return{options:i}};function pce(i,t){if(1&i&&At(0,dce,1,0,"ng-container",5),2&i){const e=t.options;He("ngTemplateOutlet",Ze(3).loaderTemplate)("ngTemplateOutletContext",yr(2,fce,e))}}function gce(i,t){1&i&&(js(0),At(1,pce,1,4,"ng-template",14),$s())}const mce=function(i){return{height:i}};function vce(i,t){if(1&i){const e=vr();Pt(0,"p-scroller",11,12),si("onLazyLoad",function(r){return gn(e),vn(Ze().tt.onLazyItemLoad(r))}),At(2,hce,1,5,"ng-template",13),At(3,gce,2,0,"ng-container",8),Nt()}if(2&i){const e=Ze();co(yr(8,mce,"flex"!==e.tt.scrollHeight?e.tt.scrollHeight:void 0)),He("items",e.tt.serializedValue)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.tt.virtualScrollItemSize||e.tt._virtualRowHeight)("lazy",e.tt.lazy)("options",e.tt.virtualScrollOptions),tt(3),He("ngIf",e.loaderTemplate)}}function _ce(i,t){1&i&&Nr(0)}const yce=function(i,t){return{"max-height":i,"overflow-y":t}},bce=function(){return{}};function Cce(i,t){if(1&i&&(js(0),Pt(1,"div",15,16),At(3,_ce,1,0,"ng-container",5),Nt(),$s()),2&i){const e=Ze(),n=_o(11);tt(1),He("ngStyle",fa(3,yce,"flex"!==e.tt.scrollHeight?e.scrollHeight:void 0,!e.frozen&&e.tt.scrollHeight?"scroll":void 0)),tt(2),He("ngTemplateOutlet",n)("ngTemplateOutletContext",fa(7,qz,e.serializedValue,mo(6,bce)))}}function wce(i,t){1&i&&Nr(0)}function xce(i,t){1&i&&Ri(0,"div",21,22)}function Ace(i,t){if(1&i&&(Pt(0,"table",17,18),At(2,wce,1,0,"ng-container",5),Ri(3,"tbody",19),Nt(),At(4,xce,2,0,"div",20)),2&i){const e=t.$implicit,n=t.options,r=Ze();co(n.contentStyle),Us(r.tt.tableStyleClass),He("ngClass",n.contentStyleClass)("ngStyle",r.tt.tableStyle),tt(2),He("ngTemplateOutlet",r.frozen&&r.tt.frozenColGroupTemplate||r.tt.colGroupTemplate)("ngTemplateOutletContext",yr(13,Cy,r.columns)),tt(1),He("pTreeTableBody",r.columns)("pTreeTableBodyTemplate",r.frozen&&r.tt.frozenBodyTemplate||r.tt.bodyTemplate)("serializedNodes",e)("frozen",r.frozen),tt(1),He("ngIf",r.frozen)}}function Ice(i,t){1&i&&Nr(0)}function Sce(i,t){1&i&&Nr(0)}function Ece(i,t){if(1&i&&(Pt(0,"div",23,24)(2,"div",25,26)(4,"table",27),At(5,Ice,1,0,"ng-container",5),Pt(6,"tfoot",28),At(7,Sce,1,0,"ng-container",5),Nt()()()()),2&i){const e=Ze();tt(4),He("ngClass",e.tt.tableStyleClass)("ngStyle",e.tt.tableStyle),tt(1),He("ngTemplateOutlet",e.frozen&&e.tt.frozenColGroupTemplate||e.tt.colGroupTemplate)("ngTemplateOutletContext",yr(6,Cy,e.columns)),tt(2),He("ngTemplateOutlet",e.frozen&&e.tt.frozenFooterTemplate||e.tt.footerTemplate)("ngTemplateOutletContext",yr(8,Cy,e.columns))}}let aP=(()=>{class i{constructor(){this.sortSource=new xt,this.selectionSource=new xt,this.contextMenuSource=new xt,this.uiUpdateSource=new xt,this.totalRecordsSource=new xt,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.uiUpdateSource$=this.uiUpdateSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onUIUpdate(e){this.uiUpdateSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),rS=(()=>{class i{constructor(e,n,r,s,a){this.el=e,this.cd=n,this.zone=r,this.tableService=s,this.filterService=a,this.lazy=!1,this.lazyLoadOnInit=!0,this.first=0,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectionChange=new ki,this.contextMenuSelectionChange=new ki,this.contextMenuSelectionMode="separate",this.compareSelectionBy="deepEquals",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.virtualScrollDelay=150,this.columnResizeMode="fit",this.rowTrackBy=(u,h)=>h,this.filters={},this.filterDelay=300,this.filterMode="lenient",this.onFilter=new ki,this.onNodeExpand=new ki,this.onNodeCollapse=new ki,this.onPage=new ki,this.onSort=new ki,this.onLazyLoad=new ki,this.sortFunction=new ki,this.onColResize=new ki,this.onColReorder=new ki,this.onNodeSelect=new ki,this.onNodeUnselect=new ki,this.onContextMenuSelect=new ki,this.onHeaderCheckboxToggle=new ki,this.onEditInit=new ki,this.onEditComplete=new ki,this.onEditCancel=new ki,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._sortOrder=1,this.selectionKeys={}}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&!this.virtualScroll&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template}})}ngOnChanges(e){e.value&&(this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&this.sortField?this.sortSingle():"multiple"==this.sortMode&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.updateSerializedValue(),this.tableService.onUIUpdate(this.value)),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}updateSerializedValue(){this.serializedValue=[],this.paginator?this.serializePageNodes():this.serializeNodes(null,this.filteredNodes||this.value,0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let a of n){a.parent=e;const u={node:a,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(u),u.visible&&a.expanded&&this.serializeNodes(a,a.children,r+1,u.visible)}}serializePageNodes(){let e=this.filteredNodes||this.value;if(this.serializedValue=[],e&&e.length){const n=this.lazy?0:this.first;for(let r=n;r<n+this.rows;r++){let s=e[r];s&&(this.serializedValue.push({node:s,parent:null,level:0,visible:!0}),this.serializeNodes(s,s.children,1,!0))}}}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(ns.resolveFieldData(e.data,this.dataKey))]=1;else this.selectionKeys[String(ns.resolveFieldData(this._selection.data,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.serializePageNodes(),this.onPage.emit({first:this.first,rows:this.rows}),this.tableService.onUIUpdate(this.value),this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.sortSingle(),this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}}sortSingle(){if(this.sortField&&this.sortOrder){this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortNodes(this.value),this.hasFilter()&&this._filter());let e={field:this.sortField,order:this.sortOrder};this.onSort.emit(e),this.tableService.onSort(e),this.updateSerializedValue()}}sortNodes(e){if(e&&0!==e.length){this.customSort?this.sortFunction.emit({data:e,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):e.sort((n,r)=>{let s=ns.resolveFieldData(n.data,this.sortField),a=ns.resolveFieldData(r.data,this.sortField),u=null;return u=null==s&&null!=a?-1:null!=s&&null==a?1:null==s&&null==a?0:"string"==typeof s&&"string"==typeof a?s.localeCompare(a,void 0,{numeric:!0}):s<a?-1:s>a?1:0,this.sortOrder*u});for(let n of e)this.sortNodes(n.children)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortMultipleNodes(this.value),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.updateSerializedValue(),this.tableService.onSort(this.multiSortMeta))}sortMultipleNodes(e){if(e&&0!==e.length){this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):e.sort((n,r)=>this.multisortField(n,r,this.multiSortMeta,0));for(let n of e)this.sortMultipleNodes(n.children)}}multisortField(e,n,r,s){let a=ns.resolveFieldData(e.data,r[s].field),u=ns.resolveFieldData(n.data,r[s].field),h=null;if(null==a&&null!=u?h=-1:null!=a&&null==u?h=1:null==a&&null==u&&(h=0),"string"==typeof a||a instanceof String){if(a.localeCompare&&a!=u)return r[s].order*a.localeCompare(u,void 0,{numeric:!0})}else h=a<u?-1:1;return a==u?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*h}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.scrollableViewChild&&this.scrollableViewChild.scrollToVirtualIndex(e),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollToVirtualIndex(e)}scrollTo(e){this.scrollableViewChild&&this.scrollableViewChild.scrollTo(e),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollTo(e)}isEmpty(){let e=this.filteredNodes||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}onColumnResizeBegin(e){let n=bn.getOffset(this.containerViewChild.nativeElement).left;this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,e.preventDefault()}onColumnResize(e){let n=bn.getOffset(this.containerViewChild.nativeElement).left;bn.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(e,n){let r=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,s=n.offsetWidth,a=s+r;if(s+r>parseInt(n.style.minWidth||15)){if("fit"===this.columnResizeMode){let h=n.nextElementSibling;for(;!h.offsetParent;)h=h.nextElementSibling;if(h){let m=h.offsetWidth-r,w=h.style.minWidth||15;if(a>15&&m>parseInt(w))if(this.scrollable){let T=this.findParentScrollableView(n),O=bn.findSingle(T,".p-treetable-scrollable-body table")||bn.findSingle(T,".p-scroller-viewport table"),W=bn.findSingle(T,"table.p-treetable-scrollable-header-table"),te=bn.findSingle(T,"table.p-treetable-scrollable-footer-table"),ue=bn.index(n);this.resizeColGroup(W,ue,a,m),this.resizeColGroup(O,ue,a,m),this.resizeColGroup(te,ue,a,m)}else n.style.width=a+"px",h&&(h.style.width=m+"px")}}else if("expand"===this.columnResizeMode)if(this.scrollable){let h=this.findParentScrollableView(n),m=bn.findSingle(h,".p-treetable-scrollable-body")||bn.findSingle(h,".p-scroller-viewport"),w=bn.findSingle(h,".p-treetable-scrollable-header"),T=bn.findSingle(h,".p-treetable-scrollable-footer"),O=bn.findSingle(h,".p-treetable-scrollable-body table")||bn.findSingle(h,".p-scroller-viewport table"),W=bn.findSingle(h,"table.p-treetable-scrollable-header-table"),te=bn.findSingle(h,"table.p-treetable-scrollable-footer-table");O.style.width=O.offsetWidth+r+"px",W.style.width=W.offsetWidth+r+"px",te&&(te.style.width=te.offsetWidth+r+"px");let ue=bn.index(n);const ce=n?O.offsetWidth+r:a,Ne=n?W.offsetWidth+r:a,et=this.containerViewChild.nativeElement.offsetWidth>=ce;let Je=(at,kt,Zt,yn)=>{at&&kt&&(at.style.width=yn?Zt+bn.calculateScrollbarWidth(m)+"px":"auto",kt.style.width=Zt+"px")};Je(m,O,ce,et),Je(w,W,Ne,et),Je(T,te,Ne,et),this.resizeColGroup(W,ue,a,null),this.resizeColGroup(O,ue,a,null),this.resizeColGroup(te,ue,a,null)}else this.tableViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.offsetWidth+r+"px",n.style.width=a+"px",this.containerViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.style.width+"px";this.onColResize.emit({element:n,delta:r})}this.resizeHelperViewChild.nativeElement.style.display="none",bn.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}findParentScrollableView(e){if(e){let n=e.parentElement;for(;n&&!bn.hasClass(n,"p-treetable-scrollable-view");)n=n.parentElement;return n}return null}resizeColGroup(e,n,r,s){if(e){let a="COLGROUP"===e.children[0].nodeName?e.children[0]:null;if(!a)throw"Scrollable tables require a colgroup to support resizable columns";{let u=a.children[n],h=u.nextElementSibling;u.style.width=r+"px",h&&s&&(h.style.width=s+"px")}}}onColumnDragStart(e,n){this.reorderIconWidth=bn.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=bn.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=bn.getOffset(this.containerViewChild.nativeElement),s=bn.getOffset(n);if(this.draggedColumn!=n){let a=s.left-r.left,h=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>h?(this.reorderIndicatorUpViewChild.nativeElement.style.left=a+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=a+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=a-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=a-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=bn.indexWithinGroup(this.draggedColumn,"ttreorderablecolumn"),s=bn.indexWithinGroup(n,"ttreorderablecolumn"),a=r!=s;a&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(a=!1),a&&s<r&&1===this.dropPosition&&(s+=1),a&&s>r&&-1===this.dropPosition&&(s-=1),a&&(ns.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}handleRowClick(e){let n=e.originalEvent.target.nodeName;if("INPUT"!=n&&"BUTTON"!=n&&"A"!=n&&!bn.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){this.preventSelectionSetterPropagation=!0;let r=e.rowNode,s=this.isSelected(r.node),a=!this.rowTouched&&this.metaKeySelection,u=this.dataKey?String(ns.resolveFieldData(r.node.data,this.dataKey)):null;if(a){let h=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(s&&h){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let m=this.findIndexInSelection(r.node);this._selection=this.selection.filter((w,T)=>T!=m),this.selectionChange.emit(this.selection),u&&delete this.selectionKeys[u]}this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})}else this.isSingleSelectionMode()?(this._selection=r.node,this.selectionChange.emit(r.node),u&&(this.selectionKeys={},this.selectionKeys[u]=1)):this.isMultipleSelectionMode()&&(h?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,r.node],this.selectionChange.emit(this.selection),u&&(this.selectionKeys[u]=1)),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex})}else if("single"===this.selectionMode)s?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})):(this._selection=r.node,this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),u&&(this.selectionKeys={},this.selectionKeys[u]=1));else if("multiple"===this.selectionMode)if(s){let h=this.findIndexInSelection(r.node);this._selection=this.selection.filter((m,w)=>w!=h),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"}),u&&delete this.selectionKeys[u]}else this._selection=this.selection?[...this.selection,r.node]:[r.node],this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),u&&(this.selectionKeys[u]=1);this.tableService.onSelectionChange()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowNode.node;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:n}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let r=this.isSelected(n),s=this.dataKey?String(ns.resolveFieldData(n.data,this.dataKey)):null;r||(this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n)):this.isMultipleSelectionMode()&&(this.selection=[n],this.selectionChange.emit(this.selection)),s&&(this.selectionKeys[s]=1)),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:n})}}}toggleNodeWithCheckbox(e){this.selection=this.selection||[],this.preventSelectionSetterPropagation=!0;let n=e.rowNode.node;this.isSelected(n)?(this.propagateSelectionDown(n,!1),e.rowNode.parent&&this.propagateSelectionUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown(n,!0),e.rowNode.parent&&this.propagateSelectionUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n})),this.tableService.onSelectionChange()}toggleNodesWithCheckbox(e,n){let r=this.filteredNodes||this.value;if(this._selection=n&&r?r.slice():[],n){if(r&&r.length)for(let s of r)this.propagateSelectionDown(s,!0)}else this._selection=[],this.selectionKeys={};this.preventSelectionSetterPropagation=!0,this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n})}propagateSelectionUp(e,n){if(e.children&&e.children.length){let s=0,a=!1,u=this.dataKey?String(ns.resolveFieldData(e.data,this.dataKey)):null;for(let h of e.children)this.isSelected(h)?s++:h.partialSelected&&(a=!0);if(n&&s==e.children.length)this._selection=[...this.selection||[],e],e.partialSelected=!1,u&&(this.selectionKeys[u]=1);else{if(!n){let h=this.findIndexInSelection(e);h>=0&&(this._selection=this.selection.filter((m,w)=>w!=h),u&&delete this.selectionKeys[u])}e.partialSelected=!!(a||s>0&&s!=e.children.length)}}let r=e.parent;r&&this.propagateSelectionUp(r,n)}propagateSelectionDown(e,n){let r=this.findIndexInSelection(e),s=this.dataKey?String(ns.resolveFieldData(e.data,this.dataKey)):null;if(n&&-1==r?(this._selection=[...this.selection||[],e],s&&(this.selectionKeys[s]=1)):!n&&r>-1&&(this._selection=this.selection.filter((a,u)=>u!=r),s&&delete this.selectionKeys[s]),e.partialSelected=!1,e.children&&e.children.length)for(let a of e.children)this.propagateSelectionDown(a,n)}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[ns.resolveFieldData(e.data,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}equals(e,n){return"equals"===this.compareSelectionBy?e===n:ns.equals(e.data,n.data,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay)}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let n;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");n=this.globalFilterFields||this.columns}this.filteredNodes=[];const r="strict"===this.filterMode;let s=!1;for(let a of this.value){let w,u={...a},h=!0,m=!1;for(let O in this.filters)if(this.filters.hasOwnProperty(O)&&"global"!==O){let W=this.filters[O];if(w={filterField:O,filterValue:W.value,filterConstraint:this.filterService.filters[W.matchMode||"startsWith"],isStrictMode:r},(r&&!(this.findFilteredNodes(u,w)||this.isFilterMatched(u,w))||!r&&!(this.isFilterMatched(u,w)||this.findFilteredNodes(u,w)))&&(h=!1),!h)break}if(this.filters.global&&!m&&n)for(let O=0;O<n.length;O++){let W={...u};w={filterField:n[O].field||n[O],filterValue:this.filters.global.value,filterConstraint:this.filterService.filters[this.filters.global.matchMode],isStrictMode:r},(r&&(this.findFilteredNodes(W,w)||this.isFilterMatched(W,w))||!r&&(this.isFilterMatched(W,w)||this.findFilteredNodes(W,w)))&&(m=!0,u=W)}let T=h;this.filters.global&&(T=h&&m),T&&this.filteredNodes.push(u),s=s||!h||m||h&&this.filteredNodes.length>0||!m&&0===this.filteredNodes.length}s||(this.filteredNodes=null),this.paginator&&(this.totalRecords=this.filteredNodes?this.filteredNodes.length:this.value?this.value.length:0)}else this.filteredNodes=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.first=0;const e=this.filteredNodes||this.value;this.onFilter.emit({filters:this.filters,filteredValue:e}),this.tableService.onUIUpdate(e),this.updateSerializedValue(),this.scrollable&&this.resetScrollTop()}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let a of s){let u={...a};this.isFilterMatched(u,n)&&(r=!0,e.children.push(u))}}if(r)return!0}}isFilterMatched(e,{filterField:n,filterValue:r,filterConstraint:s,isStrictMode:a}){let u=!1;return s(ns.resolveFieldData(e.data,n),r,this.filterLocale)&&(u=!0),(!u||a&&!this.isNodeLeaf(e))&&(u=this.findFilteredNodes(e,{filterField:n,filterValue:r,filterConstraint:s,isStrictMode:a})||u),u}isNodeLeaf(e){return!1!==e.leaf&&!(e.children&&e.children.length)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}reset(){this._sortField=null,this._sortOrder=1,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredNodes=null,this.filters={},this.first=0,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}updateEditingCell(e,n,r){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===bn.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.editingCellClick&&this.isEditingCellValid()&&(bn.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData}),this.editingCellField=null,this.editingCellData=null,this.unbindDocumentEditListener()),this.editingCellClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.editingCellField=null,this.editingCellData=null,this.initialized=null}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(Oo),Tn(Zo),Tn(aP),Tn(dx))},i.\u0275cmp=hs({type:i,selectors:[["p-treeTable"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(_ue,5),Rs(yue,5),Rs(bue,5),Rs(Cue,5),Rs(wue,5),Rs(xue,5),Rs(Aue,5)),2&e){let r;jr(r=$r())&&(n.containerViewChild=r.first),jr(r=$r())&&(n.resizeHelperViewChild=r.first),jr(r=$r())&&(n.reorderIndicatorUpViewChild=r.first),jr(r=$r())&&(n.reorderIndicatorDownViewChild=r.first),jr(r=$r())&&(n.tableViewChild=r.first),jr(r=$r())&&(n.scrollableViewChild=r.first),jr(r=$r())&&(n.scrollableFrozenViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{columns:"columns",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",autoLayout:"autoLayout",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",paginator:"paginator",rows:"rows",first:"first",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",customSort:"customSort",selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",compareSelectionBy:"compareSelectionBy",rowHover:"rowHover",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",scrollable:"scrollable",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",frozenColumns:"frozenColumns",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",contextMenu:"contextMenu",rowTrackBy:"rowTrackBy",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterMode:"filterMode",filterLocale:"filterLocale",virtualRowHeight:"virtualRowHeight",value:"value",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onFilter:"onFilter",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onPage:"onPage",onSort:"onSort",onLazyLoad:"onLazyLoad",sortFunction:"sortFunction",onColResize:"onColResize",onColReorder:"onColReorder",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onContextMenuSelect:"onContextMenuSelect",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel"},features:[Ro([aP]),Tl],decls:12,vars:20,consts:[["data-scrollselectors",".p-treetable-scrollable-body",3,"ngStyle","ngClass"],["container",""],["class","p-treetable-loading",4,"ngIf"],["class","p-treetable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-wrapper",4,"ngIf"],["class","p-treetable-scrollable-wrapper",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-treetable-reorder-indicator-up",4,"ngIf"],["class","pi pi-arrow-up p-treetable-reorder-indicator-down",4,"ngIf"],[1,"p-treetable-loading"],[1,"p-treetable-loading-overlay","p-component-overlay"],[1,"p-treetable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-treetable-wrapper"],[3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate"],[1,"p-treetable-tfoot"],[1,"p-treetable-scrollable-wrapper"],["class","p-treetable-scrollable-view p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight",4,"ngIf"],[1,"p-treetable-scrollable-view",3,"ttScrollableView","frozen","scrollHeight","ngStyle"],["scrollableView",""],[1,"p-treetable-scrollable-view","p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight"],["scrollableFrozenView",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-treetable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-treetable-reorder-indicator-up"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-treetable-reorder-indicator-down"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(Pt(0,"div",0,1),At(2,Iue,3,2,"div",2),At(3,Eue,2,1,"div",3),At(4,Tue,1,15,"p-paginator",4),At(5,Lue,9,16,"div",5),At(6,Fue,4,8,"div",6),At(7,Nue,1,15,"p-paginator",7),At(8,zue,2,1,"div",8),At(9,Vue,2,0,"div",9),At(10,Uue,2,0,"span",10),At(11,Hue,2,0,"span",11),Nt()),2&e&&(Us(n.styleClass),He("ngStyle",n.style)("ngClass",v0(14,Gue,n.rowHover||"single"===n.selectionMode||"multiple"===n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable&&"flex"===n.scrollHeight)),tt(2),He("ngIf",n.loading&&n.showLoader),tt(1),He("ngIf",n.captionTemplate),tt(1),He("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),tt(1),He("ngIf",!n.scrollable),tt(1),He("ngIf",n.scrollable),tt(1),He("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),tt(1),He("ngIf",n.summaryTemplate),tt(1),He("ngIf",n.resizableColumns),tt(1),He("ngIf",n.reorderableColumns),tt(1),He("ngIf",n.reorderableColumns))},dependencies:function(){return[vo,wo,hu,Ho,hz,Dce,Xz]},styles:[".p-treetable{position:relative}.p-treetable table{border-collapse:collapse;width:100%;table-layout:fixed}.p-treetable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-treetable .p-sortable-column .p-column-title,.p-treetable .p-sortable-column .p-sortable-column-icon,.p-treetable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-treetable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-treetable-auto-layout>.p-treetable-wrapper{overflow-x:auto}.p-treetable-auto-layout>.p-treetable-wrapper>table{table-layout:auto}.p-treetable-hoverable-rows .p-treetable-tbody>tr{cursor:pointer}.p-treetable-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;overflow:hidden;position:relative}p-treetabletoggler+p-treetablecheckbox .p-checkbox{vertical-align:middle}p-treetabletoggler+p-treetablecheckbox+span{vertical-align:middle}.p-treetable-scrollable-wrapper{position:relative}.p-treetable-scrollable-header,.p-treetable-scrollable-footer{overflow:hidden}.p-treetable-scrollable-body{overflow:auto;position:relative}.p-treetable-scrollable-body>table>.p-treetable-tbody>tr:first-child>td{border-top:0 none}.p-treetable-virtual-table{position:absolute}.p-treetable-frozen-view .p-treetable-scrollable-body{overflow:hidden}.p-treetable-frozen-view>.p-treetable-scrollable-body>table>.p-treetable-tbody>tr>td:last-child{border-right:0 none}.p-treetable-unfrozen-view{position:absolute;top:0}.p-treetable-flex-scrollable,.p-treetable-flex-scrollable .p-treetable-scrollable-wrapper,.p-treetable-flex-scrollable .p-treetable-scrollable-view{display:flex;flex-direction:column;flex:1;height:100%}.p-treetable-flex-scrollable .p-treetable-virtual-scrollable-body{flex:1}.p-treetable-resizable>.p-treetable-wrapper{overflow-x:auto}.p-treetable-resizable .p-treetable-thead>tr>th,.p-treetable-resizable .p-treetable-tfoot>tr>td,.p-treetable-resizable .p-treetable-tbody>tr>td{overflow:hidden}.p-treetable-resizable .p-resizable-column{background-clip:padding-box;position:relative}.p-treetable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-treetable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-treetable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-treetable .p-row-editor-init,.p-treetable .p-row-editor-save,.p-treetable .p-row-editor-cancel,.p-treetable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-treetable-reorder-indicator-up,.p-treetable-reorder-indicator-down{position:absolute;display:none}[ttReorderableColumn]{cursor:move}.p-treetable .p-treetable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-treetable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),Xz=(()=>{class i{constructor(e,n,r){this.tt=e,this.treeTableService=n,this.cd=r,this.subscription=this.tt.tableService.uiUpdateSource$.subscribe(()=>{this.tt.virtualScroll&&this.cd.detectChanges()})}getScrollerOption(e,n){return this.tt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.getScrollerOption("getItemOptions");return n?n(e).index:e}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn(rS),Tn(aP),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["","pTreeTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTreeTableBody","columns"],template:["pTreeTableBodyTemplate","template"],frozen:"frozen",serializedNodes:"serializedNodes",scrollerOptions:"scrollerOptions"},attrs:Wue,decls:2,vars:3,consts:[["ngFor","",3,"ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(At(0,Xue,1,1,"ng-template",0),At(1,Zue,2,5,"ng-container",1)),2&e&&(He("ngForOf",n.serializedNodes||n.tt.serializedValue)("ngForTrackBy",n.tt.rowTrackBy),tt(1),He("ngIf",n.tt.isEmpty()))},dependencies:[Ec,wo,hu],encapsulation:2}),i})(),Dce=(()=>{class i{constructor(e,n,r){this.tt=e,this.el=n,this.zone=r}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e,null!=e&&(e.includes("%")||e.includes("calc"))&&console.log('Percentage scroll height calculation is removed in favor of the more performant CSS based flex mode, use scrollHeight="flex" instead.')}ngAfterViewInit(){if(this.frozen)this.scrollableAlignerViewChild&&this.scrollableAlignerViewChild.nativeElement&&(this.scrollableAlignerViewChild.nativeElement.style.height=bn.calculateScrollbarHeight()+"px");else{(this.tt.frozenColumns||this.tt.frozenBodyTemplate)&&bn.addClass(this.el.nativeElement,"p-treetable-unfrozen-view");let e=this.el.nativeElement.previousElementSibling;e&&(this.frozenSiblingBody=bn.findSingle(e,this.tt.virtualScroll?".p-scroller-viewport":".p-treetable-scrollable-body"));let n=bn.calculateScrollbarWidth();this.scrollHeaderBoxViewChild.nativeElement.style.paddingRight=n+"px",this.scrollFooterBoxViewChild&&this.scrollFooterBoxViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.paddingRight=n+"px")}this.bindEvents()}bindEvents(){this.zone.runOutsideAngular(()=>{this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.headerScrollListener=this.onHeaderScroll.bind(this),this.scrollHeaderBoxViewChild.nativeElement.addEventListener("scroll",this.headerScrollListener)),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.footerScrollListener=this.onFooterScroll.bind(this),this.scrollFooterViewChild.nativeElement.addEventListener("scroll",this.footerScrollListener)),this.frozen||(this.bodyScrollListener=this.onBodyScroll.bind(this),this.tt.virtualScroll?this.scroller.getElementRef().nativeElement.addEventListener("scroll",this.bodyScrollListener):this.scrollBodyViewChild.nativeElement.addEventListener("scroll",this.bodyScrollListener))})}unbindEvents(){this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&this.scrollHeaderBoxViewChild.nativeElement.removeEventListener("scroll",this.headerScrollListener),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&this.scrollFooterViewChild.nativeElement.removeEventListener("scroll",this.footerScrollListener),this.scrollBodyViewChild&&this.scrollBodyViewChild.nativeElement&&this.scrollBodyViewChild.nativeElement.removeEventListener("scroll",this.bodyScrollListener),this.scroller&&this.scroller.getElementRef()&&this.scroller.getElementRef().nativeElement.removeEventListener("scroll",this.bodyScrollListener)}onHeaderScroll(){const e=this.scrollHeaderViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onFooterScroll(){const e=this.scrollFooterViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onBodyScroll(e){this.preventBodyScrollPropagation?this.preventBodyScrollPropagation=!1:(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.frozenSiblingBody&&(this.frozenSiblingBody.scrollTop=e.target.scrollTop))}scrollToVirtualIndex(e){this.scroller&&this.scroller.scrollToIndex(e)}scrollTo(e){this.scroller?this.scroller.scrollTo(e):this.scrollBodyViewChild.nativeElement.scrollTo?this.scrollBodyViewChild.nativeElement.scrollTo(e):(this.scrollBodyViewChild.nativeElement.scrollLeft=e.left,this.scrollBodyViewChild.nativeElement.scrollTop=e.top)}ngOnDestroy(){this.unbindEvents(),this.frozenSiblingBody=null}}return i.\u0275fac=function(e){return new(e||i)(Tn(rS),Tn($i),Tn(Zo))},i.\u0275cmp=hs({type:i,selectors:[["","ttScrollableView",""]],viewQuery:function(e,n){if(1&e&&(Rs(Que,5),Rs(Jue,5),Rs(ece,5),Rs(tce,5),Rs(nce,5),Rs(ice,5),Rs(rce,5),Rs(sce,5),Rs(ace,5)),2&e){let r;jr(r=$r())&&(n.scrollHeaderViewChild=r.first),jr(r=$r())&&(n.scrollHeaderBoxViewChild=r.first),jr(r=$r())&&(n.scrollBodyViewChild=r.first),jr(r=$r())&&(n.scrollTableViewChild=r.first),jr(r=$r())&&(n.scrollLoadingTableViewChild=r.first),jr(r=$r())&&(n.scrollFooterViewChild=r.first),jr(r=$r())&&(n.scrollFooterBoxViewChild=r.first),jr(r=$r())&&(n.scrollableAlignerViewChild=r.first),jr(r=$r())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{columns:["ttScrollableView","columns"],frozen:"frozen",scrollHeight:"scrollHeight"},attrs:oce,decls:13,vars:13,consts:[[1,"p-treetable-scrollable-header"],["scrollHeader",""],[1,"p-treetable-scrollable-header-box"],["scrollHeaderBox",""],[1,"p-treetable-scrollable-header-table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],["styleClass","p-treetable-scrollable-body",3,"items","style","scrollHeight","itemSize","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInItems",""],["class","p-treetable-scrollable-footer",4,"ngIf"],["styleClass","p-treetable-scrollable-body",3,"items","scrollHeight","itemSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],[1,"p-treetable-scrollable-body",3,"ngStyle"],["scrollBody",""],[3,"ngClass","ngStyle"],["scrollTable",""],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate","serializedNodes","frozen"],["style","background-color:transparent",4,"ngIf"],[2,"background-color","transparent"],["scrollableAligner",""],[1,"p-treetable-scrollable-footer"],["scrollFooter",""],[1,"p-treetable-scrollable-footer-box"],["scrollFooterBox",""],[1,"p-treetable-scrollable-footer-table",3,"ngClass","ngStyle"],[1,"p-treetable-tfoot"]],template:function(e,n){1&e&&(Pt(0,"div",0,1)(2,"div",2,3)(4,"table",4),At(5,lce,1,0,"ng-container",5),Pt(6,"thead",6),At(7,uce,1,0,"ng-container",5),Nt()()()(),At(8,vce,4,10,"p-scroller",7),At(9,Cce,4,10,"ng-container",8),At(10,Ace,5,15,"ng-template",null,9,hc),At(12,Ece,8,10,"div",10)),2&e&&(tt(4),He("ngClass",n.tt.tableStyleClass)("ngStyle",n.tt.tableStyle),tt(1),He("ngTemplateOutlet",n.frozen&&n.tt.frozenColGroupTemplate||n.tt.colGroupTemplate)("ngTemplateOutletContext",yr(9,Cy,n.columns)),tt(2),He("ngTemplateOutlet",n.frozen&&n.tt.frozenHeaderTemplate||n.tt.headerTemplate)("ngTemplateOutletContext",yr(11,Cy,n.columns)),tt(1),He("ngIf",n.tt.virtualScroll),tt(1),He("ngIf",!n.tt.virtualScroll),tt(3),He("ngIf",n.tt.footerTemplate))},dependencies:[vo,wo,hu,Ho,Kl,kx,Xz],encapsulation:2}),i})(),Pce=(()=>{class i{constructor(e){this.tt=e}onClick(e){this.rowNode.node.expanded=!this.rowNode.node.expanded,this.rowNode.node.expanded?this.tt.onNodeExpand.emit({originalEvent:e,node:this.rowNode.node}):this.tt.onNodeCollapse.emit({originalEvent:e,node:this.rowNode.node}),this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),e.preventDefault()}}return i.\u0275fac=function(e){return new(e||i)(Tn(rS))},i.\u0275cmp=hs({type:i,selectors:[["p-treeTableToggler"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode"},decls:2,vars:5,consts:[["type","button","tabindex","-1","pRipple","",1,"p-treetable-toggler","p-link",3,"click"],[3,"ngClass"]],template:function(e,n){1&e&&(Pt(0,"button",0),si("click",function(s){return n.onClick(s)}),Ri(1,"i",1),Nt()),2&e&&(bf("visibility",!1===n.rowNode.node.leaf||n.rowNode.node.children&&n.rowNode.node.children.length?"visible":"hidden")("margin-left",16*n.rowNode.level+"px"),tt(1),He("ngClass",n.rowNode.node.expanded?"pi pi-fw pi-chevron-down":"pi pi-fw pi-chevron-right"))},dependencies:[vo,kh],encapsulation:2}),i})(),Lce=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,dz,Pc,Fv,Pl,Fv]}),i})();function kce(i,t){if(1&i&&Ri(0,"span",11),2&i){const e=Ze(2).$implicit;He("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Rce(i,t){1&i&&Nr(0)}const Yz=function(i){return{"p-disabled":i}},Oce=function(){return{exact:!1}},Kz=function(i){return{$implicit:i}};function Fce(i,t){if(1&i){const e=vr();Pt(0,"a",8),si("click",function(r){gn(e);const s=Ze().$implicit;return vn(Ze().onItemClick(r,s))})("keydown.enter",function(r){gn(e);const s=Ze(),a=s.$implicit,u=s.index;return vn(Ze().onItemClick(r,a,u))}),At(1,kce,1,2,"span",9),At(2,Rce,1,0,"ng-container",10),Nt()}if(2&i){const e=Ze().$implicit,n=Ze();He("routerLink",e.routerLink)("queryParams",e.queryParams)("ngClass",yr(17,Yz,e.disabled))("routerLinkActiveOptions",e.routerLinkActiveOptions||mo(19,Oce))("target",e.target)("tooltipOptions",e.tooltipOptions)("fragment",e.fragment)("queryParamsHandling",e.queryParamsHandling)("preserveFragment",e.preserveFragment)("skipLocationChange",e.skipLocationChange)("replaceUrl",e.replaceUrl)("state",e.state),xs("id",e.id)("tabindex",e.disabled||n.readonly?null:e.tabindex?e.tabindex:"0"),tt(1),He("ngIf",e.icon&&!n.itemTemplate),tt(1),He("ngTemplateOutlet",n.itemTemplate)("ngTemplateOutletContext",yr(20,Kz,e))}}function Nce(i,t){if(1&i&&Ri(0,"span",11),2&i){const e=Ze(2).$implicit;He("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Bce(i,t){1&i&&Nr(0)}function zce(i,t){if(1&i){const e=vr();Pt(0,"a",12),si("click",function(r){gn(e);const s=Ze().$implicit;return vn(Ze().onItemClick(r,s))})("keydown.enter",function(r){gn(e);const s=Ze(),a=s.$implicit,u=s.index;return vn(Ze().onItemClick(r,a,u))}),At(1,Nce,1,2,"span",9),At(2,Bce,1,0,"ng-container",10),Nt()}if(2&i){const e=Ze(),n=e.$implicit,r=e.index,s=Ze();He("tooltipPosition",n.tooltipPosition)("tooltipOptions",n.tooltipOptions)("ngClass",yr(10,Yz,n.disabled))("target",n.target),xs("href",n.url||null,Hd)("id",n.id)("tabindex",n.disabled||r!==s.activeIndex&&s.readonly?null:n.tabindex?n.tabindex:"0"),tt(1),He("ngIf",n.icon&&!s.itemTemplate),tt(1),He("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",yr(12,Kz,n))}}function Vce(i,t){if(1&i){const e=vr();Pt(0,"li",5),si("mouseenter",function(){const s=gn(e).index;return vn(Ze().onItemMouseEnter(s))}),At(1,Fce,3,22,"a",6),At(2,zce,3,14,"ng-template",null,7,hc),Nt()}if(2&i){const e=t.$implicit,n=t.index,r=_o(3),s=Ze();He("ngClass",s.itemClass(n)),tt(1),He("ngIf",s.isClickableRouterLink(e))("ngIfElse",r)}}let Uce=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.model=null,this.position="bottom",this.currentIndex=-3}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.itemTemplate=e.template})}onListMouseLeave(){this.currentIndex=-3,this.cd.markForCheck()}onItemMouseEnter(e){this.currentIndex=e,this.cd.markForCheck()}onItemClick(e,n){n.command&&n.command({originalEvent:e,item:n})}get containerClass(){return{[`p-dock p-component  p-dock-${this.position}`]:!0}}isClickableRouterLink(e){return e.routerLink&&!e.disabled}itemClass(e){return{"p-dock-item":!0,"p-dock-item-second-prev":this.currentIndex-2===e,"p-dock-item-prev":this.currentIndex-1===e,"p-dock-item-current":this.currentIndex===e,"p-dock-item-next":this.currentIndex+1===e,"p-dock-item-second-next":this.currentIndex+2===e}}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-dock"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",model:"model",position:"position"},decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],[1,"p-dock-list-container"],["role","menu",1,"p-dock-list",3,"mouseleave"],["list",""],[3,"ngClass","mouseenter",4,"ngFor","ngForOf"],[3,"ngClass","mouseenter"],["pRipple","","class","p-dock-action","role","menuitem","pTooltip","",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter",4,"ngIf","ngIfElse"],["elseBlock",""],["pRipple","","role","menuitem","pTooltip","",1,"p-dock-action",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter"],["class","p-dock-action-icon",3,"ngClass","ngStyle",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-dock-action-icon",3,"ngClass","ngStyle"],["role","menuitem","pRipple","","pTooltip","",1,"p-dock-action",3,"tooltipPosition","tooltipOptions","ngClass","target","click","keydown.enter"]],template:function(e,n){1&e&&(Pt(0,"div",0)(1,"div",1)(2,"ul",2,3),si("mouseleave",function(){return n.onListMouseLeave()}),At(4,Vce,4,3,"li",4),Nt()()()),2&e&&(Us(n.styleClass),He("ngClass",n.containerClass)("ngStyle",n.style),xs("id",n.id),tt(4),He("ngForOf",n.model))},dependencies:[vo,Ec,wo,hu,Ho,dC,kh,Rv],styles:[".p-dock{position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dock-list-container{display:flex;pointer-events:auto}.p-dock-list{margin:0;padding:0;list-style:none;display:flex;align-items:center;justify-content:center}.p-dock-item{transition:all .2s cubic-bezier(.4,0,.2,1);will-change:transform}.p-dock-action{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;cursor:default}.p-dock-item-second-prev,.p-dock-item-second-next{transform:scale(1.2)}.p-dock-item-prev,.p-dock-item-next{transform:scale(1.4)}.p-dock-item-current{transform:scale(1.6);z-index:1}.p-dock-top{left:0;top:0;width:100%}.p-dock-top .p-dock-item{transform-origin:center top}.p-dock-bottom{left:0;bottom:0;width:100%}.p-dock-bottom .p-dock-item{transform-origin:center bottom}.p-dock-right{right:0;top:0;height:100%}.p-dock-right .p-dock-item{transform-origin:center right}.p-dock-right .p-dock-list{flex-direction:column}.p-dock-left{left:0;top:0;height:100%}.p-dock-left .p-dock-item{transform-origin:center left}.p-dock-left .p-dock-list{flex-direction:column}\n"],encapsulation:2,changeDetection:0}),i})(),Hce=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,vy,Pc,Ov,Pl,Ov,vy]}),i})();const Gce=["cb"],Wce=function(i,t,e){return{"p-checkbox-label":!0,"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function jce(i,t){if(1&i){const e=vr();Pt(0,"label",7),si("click",function(r){gn(e);const s=Ze(),a=_o(3);return vn(s.onClick(r,a,!0))}),ur(1),Nt()}if(2&i){const e=Ze();Us(e.labelStyleClass),He("ngClass",Th(5,Wce,e.checked(),e.disabled,e.focused)),xs("for",e.inputId),tt(1),ca(e.label)}}const $ce=function(i,t,e){return{"p-checkbox p-component":!0,"p-checkbox-checked":i,"p-checkbox-disabled":t,"p-checkbox-focused":e}},qce=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},Xce={provide:Mc,useExisting:Xr(()=>oP),multi:!0};let oP=(()=>{class i{constructor(e){this.cd=e,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(e,n,r){e.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(e),r&&n.focus())}updateModel(e){let n;this.binary?(n=this.checked()?this.falseValue:this.trueValue,this.model=n,this.onModelChange(n)):(n=this.checked()?this.model.filter(r=>!ns.equals(r,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(n),this.model=n,this.formControl&&this.formControl.setValue(n)),this.onChange.emit({checked:n,originalEvent:e})}handleChange(e){this.readonly||this.updateModel(e)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(e){this.model=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:ns.contains(this.value,this.model)}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-checkbox"]],viewQuery:function(e,n){if(1&e&&Rs(Gce,5),2&e){let r;jr(r=$r())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[Ro([Xce])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(e,n){if(1&e){const r=vr();Pt(0,"div",0)(1,"div",1)(2,"input",2,3),si("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("change",function(a){return n.handleChange(a)}),Nt()(),Pt(4,"div",4),si("click",function(a){gn(r);const u=_o(3);return vn(n.onClick(a,u,!0))}),Ri(5,"span",5),Nt()(),At(6,jce,2,9,"label",6)}2&e&&(Us(n.styleClass),He("ngStyle",n.style)("ngClass",Th(18,$ce,n.checked(),n.disabled,n.focused)),tt(2),He("readonly",n.readonly)("value",n.value)("checked",n.checked())("disabled",n.disabled),xs("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("aria-checked",n.checked())("required",n.required),tt(2),He("ngClass",Th(22,qce,n.checked(),n.disabled,n.focused)),tt(1),He("ngClass",n.checked()?n.checkboxIcon:null),tt(1),He("ngIf",n.label))},dependencies:[vo,wo,Ho],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),i})(),Yce=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();function Kce(i,t){if(1&i&&(Pt(0,"span",10),ur(1),Nt()),2&i){const e=Ze(2);xs("id",e.id+"_header"),tt(1),ca(e.header)}}function Zce(i,t){1&i&&Nr(0)}function Qce(i,t){}function Jce(i,t){1&i&&At(0,Qce,0,0,"ng-template")}function ehe(i,t){if(1&i){const e=vr();Pt(0,"button",11),si("click",function(r){return gn(e),vn(Ze(2).onIconClick(r))})("keydown.enter",function(r){return gn(e),vn(Ze(2).onIconClick(r))}),Ri(1,"span"),Nt()}if(2&i){const e=Ze(2);xs("aria-label","collapse button")("id",e.id+"-label")("aria-controls",e.id+"-content")("aria-expanded",!e.collapsed),tt(1),Us(e.collapsed?e.expandIcon:e.collapseIcon)}}const the=function(i,t,e){return{"p-panel-icons-start":i,"p-panel-icons-end":t,"p-panel-icons-center":e}};function nhe(i,t){if(1&i){const e=vr();Pt(0,"div",6),si("click",function(r){return gn(e),vn(Ze().onHeaderClick(r))}),At(1,Kce,2,2,"span",7),ch(2,1),At(3,Zce,1,0,"ng-container",4),Pt(4,"div",8),At(5,Jce,1,0,null,4),At(6,ehe,2,6,"button",9),Nt()()}if(2&i){const e=Ze();xs("id",e.id+"-titlebar"),tt(1),He("ngIf",e.header),tt(2),He("ngTemplateOutlet",e.headerTemplate),tt(1),He("ngClass",Th(6,the,"start"===e.iconPos,"end"===e.iconPos,"center"===e.iconPos)),tt(1),He("ngTemplateOutlet",e.iconTemplate),tt(1),He("ngIf",e.toggleable)}}function ihe(i,t){1&i&&Nr(0)}function rhe(i,t){1&i&&Nr(0)}function she(i,t){if(1&i&&(Pt(0,"div",12),ch(1,2),At(2,rhe,1,0,"ng-container",4),Nt()),2&i){const e=Ze();tt(2),He("ngTemplateOutlet",e.footerTemplate)}}const ahe=["*",[["p-header"]],[["p-footer"]]],ohe=function(i,t){return{"p-panel p-component":!0,"p-panel-toggleable":i,"p-panel-expanded":t}},lhe=function(i){return{transitionParams:i,height:"0",opacity:"0"}},uhe=function(i){return{value:"hidden",params:i}},che=function(i){return{transitionParams:i,height:"*",opacity:"1"}},hhe=function(i){return{value:"visible",params:i}},dhe=["*","p-header","p-footer"];let fhe=0,Zz=(()=>{class i{constructor(e){this.el=e,this.collapsed=!1,this.iconPos="end",this.expandIcon="pi pi-plus",this.collapseIcon="pi pi-minus",this.showHeader=!0,this.toggler="icon",this.collapsedChange=new ki,this.onBeforeToggle=new ki,this.onAfterToggle=new ki,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-panel-"+fhe++}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"icons":this.iconTemplate=e.template}})}onHeaderClick(e){"header"===this.toggler&&this.toggle(e)}onIconClick(e){"icon"===this.toggler&&this.toggle(e)}toggle(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand(e):this.collapse(e)),e.preventDefault()}expand(e){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(e){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(e){this.animating=!1,this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed})}}return i.\u0275fac=function(e){return new(e||i)(Tn($i))},i.\u0275cmp=hs({type:i,selectors:[["p-panel"]],contentQueries:function(e,n,r){if(1&e&&(Yl(r,EI,5),Yl(r,Kl,4)),2&e){let s;jr(s=$r())&&(n.footerFacet=s.first),jr(s=$r())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{toggleable:"toggleable",header:"header",collapsed:"collapsed",style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:"showHeader",toggler:"toggler",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:dhe,decls:7,vars:23,consts:[[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],["role","tablist",1,"p-panel-icons",3,"ngClass"],["type","button","class","p-panel-header-icon p-panel-toggler p-link","pRipple","","role","tab",3,"click","keydown.enter",4,"ngIf"],[1,"p-panel-title"],["type","button","pRipple","","role","tab",1,"p-panel-header-icon","p-panel-toggler","p-link",3,"click","keydown.enter"],[1,"p-panel-footer"]],template:function(e,n){1&e&&(Ep(ahe),Pt(0,"div",0),At(1,nhe,7,10,"div",1),Pt(2,"div",2),si("@panelContent.done",function(s){return n.onToggleDone(s)}),Pt(3,"div",3),ch(4),At(5,ihe,1,0,"ng-container",4),Nt(),At(6,she,3,1,"div",5),Nt()()),2&e&&(Us(n.styleClass),He("ngClass",fa(12,ohe,n.toggleable,!n.collapsed&&n.toggleable))("ngStyle",n.style),xs("id",n.id),tt(1),He("ngIf",n.showHeader),tt(1),He("@panelContent",n.collapsed?yr(17,uhe,yr(15,lhe,n.animating?n.transitionOptions:"0ms")):yr(21,hhe,yr(19,che,n.animating?n.transitionOptions:"0ms"))),xs("id",n.id+"-content")("aria-hidden",n.collapsed)("aria-labelledby",n.id+"-titlebar"),tt(3),He("ngTemplateOutlet",n.contentTemplate),tt(1),He("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[vo,wo,hu,Ho,kh],styles:[".p-panel-header{display:flex;align-items:center}.p-panel-title{line-height:1;order:1}.p-panel-header-icon{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-panel-toggleable.p-panel-expanded .p-toggleable-content:not(.ng-animating){overflow:visible}.p-panel-toggleable .p-toggleable-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[M_("panelContent",[L0("hidden",du({height:"0"})),L0("void",du({height:"{{height}}"}),{params:{height:"0"}}),L0("visible",du({height:"*"})),Lh("visible <=> hidden",[Dc("{{transitionParams}}")]),Lh("void => hidden",Dc("{{transitionParams}}")),Lh("void => visible",Dc("{{transitionParams}}"))])]},changeDetection:0}),i})(),phe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl,Pc,Pl]}),i})();function D_(){}const ghe=function(){let i=0;return function(){return i++}}();function Ll(i){return null===i||typeof i>"u"}function Uu(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function ol(i){return null!==i&&"[object Object]"===Object.prototype.toString.call(i)}const dh=i=>("number"==typeof i||i instanceof Number)&&isFinite(+i);function Kg(i,t){return dh(i)?i:t}function Eo(i,t){return typeof i>"u"?t:i}const Qz=(i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Hu(i,t,e){if(i&&"function"==typeof i.call)return i.apply(e,t)}function fu(i,t,e,n){let r,s,a;if(Uu(i))if(s=i.length,n)for(r=s-1;r>=0;r--)t.call(e,i[r],r);else for(r=0;r<s;r++)t.call(e,i[r],r);else if(ol(i))for(a=Object.keys(i),s=a.length,r=0;r<s;r++)t.call(e,i[a[r]],a[r])}function sS(i,t){let e,n,r,s;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function aS(i){if(Uu(i))return i.map(aS);if(ol(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let r=0;for(;r<n;++r)t[e[r]]=aS(i[e[r]]);return t}return i}function Jz(i){return-1===["__proto__","prototype","constructor"].indexOf(i)}function vhe(i,t,e,n){if(!Jz(i))return;const r=t[i],s=e[i];ol(r)&&ol(s)?zx(r,s,n):t[i]=aS(s)}function zx(i,t,e){const n=Uu(t)?t:[t],r=n.length;if(!ol(i))return i;const s=(e=e||{}).merger||vhe;for(let a=0;a<r;++a){if(!ol(t=n[a]))continue;const u=Object.keys(t);for(let h=0,m=u.length;h<m;++h)s(u[h],i,t,e)}return i}function Vx(i,t){return zx(i,t,{merger:_he})}function _he(i,t,e){if(!Jz(i))return;const n=t[i],r=e[i];ol(n)&&ol(r)?Vx(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=aS(r))}const eV={"":i=>i,x:i=>i.x,y:i=>i.y};function wy(i,t){return(eV[t]||(eV[t]=function yhe(i){const t=function bhe(i){const t=i.split("."),e=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}(i);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t)))(i)}function lP(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Zg=i=>typeof i<"u",xy=i=>"function"==typeof i,tV=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0},fc=Math.PI,yu=2*fc,whe=yu+fc,oS=Number.POSITIVE_INFINITY,xhe=fc/180,Zc=fc/2,Ux=fc/4,nV=2*fc/3,Qg=Math.log10,Bv=Math.sign;function iV(i){const t=Math.round(i);i=Hx(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(Qg(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function _C(i){return!isNaN(parseFloat(i))&&isFinite(i)}function Hx(i,t,e){return Math.abs(i-t)<e}function rV(i,t,e){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function jm(i){return i*(fc/180)}function uP(i){return i*(180/fc)}function sV(i){if(!dh(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function aV(i,t){const e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n);let s=Math.atan2(n,e);return s<-.5*fc&&(s+=yu),{angle:s,distance:r}}function cP(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function She(i,t){return(i-t+whe)%yu-fc}function lg(i){return(i%yu+yu)%yu}function Gx(i,t,e,n){const r=lg(i),s=lg(t),a=lg(e),u=lg(s-r),h=lg(a-r),m=lg(r-s),w=lg(r-a);return r===s||r===a||n&&s===a||u>h&&m<w}function Cd(i,t,e){return Math.max(t,Math.min(e,i))}function P_(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function hP(i,t,e){e=e||(a=>i[a]<t);let s,n=i.length-1,r=0;for(;n-r>1;)s=r+n>>1,e(s)?r=s:n=s;return{lo:r,hi:n}}const L_=(i,t,e,n)=>hP(i,e,n?r=>i[r][t]<=e:r=>i[r][t]<e),The=(i,t,e)=>hP(i,e,n=>i[n][t]>=e),oV=["push","pop","shift","splice","unshift"];function lV(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,r=n.indexOf(t);-1!==r&&n.splice(r,1),!(n.length>0)&&(oV.forEach(s=>{delete i[s]}),delete i._chartjs)}function uV(i){const t=new Set;let e,n;for(e=0,n=i.length;e<n;++e)t.add(i[e]);return t.size===n?i:Array.from(t)}const cV=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function hV(i,t,e){const n=e||(a=>Array.prototype.slice.call(a));let r=!1,s=[];return function(...a){s=n(a),r||(r=!0,cV.call(window,()=>{r=!1,i.apply(t,s)}))}}const dP=i=>"start"===i?"left":"end"===i?"right":"center",xf=(i,t,e)=>"start"===i?t:"end"===i?e:(t+e)/2;function dV(i,t,e){const n=t.length;let r=0,s=n;if(i._sorted){const{iScale:a,_parsed:u}=i,h=a.axis,{min:m,max:w,minDefined:T,maxDefined:O}=a.getUserBounds();T&&(r=Cd(Math.min(L_(u,a.axis,m).lo,e?n:L_(t,h,a.getPixelForValue(m)).lo),0,n-1)),s=O?Cd(Math.max(L_(u,a.axis,w,!0).hi+1,e?0:L_(t,h,a.getPixelForValue(w),!0).hi+1),r,n)-r:n-r}return{start:r,count:s}}function fV(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=r,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,r),s}const lS=i=>0===i||1===i,pV=(i,t,e)=>-Math.pow(2,10*(i-=1))*Math.sin((i-t)*yu/e),gV=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*yu/e)+1,Wx={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*Zc),easeOutSine:i=>Math.sin(i*Zc),easeInOutSine:i=>-.5*(Math.cos(fc*i)-1),easeInExpo:i=>0===i?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>1===i?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>lS(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>lS(i)?i:pV(i,.075,.3),easeOutElastic:i=>lS(i)?i:gV(i,.075,.3),easeInOutElastic:i=>lS(i)?i:i<.5?.5*pV(2*i,.1125,.45):.5+.5*gV(2*i-1,.1125,.45),easeInBack:i=>i*i*(2.70158*i-1.70158),easeOutBack:i=>(i-=1)*i*(2.70158*i+1.70158)+1,easeInOutBack(i){let t=1.70158;return(i/=.5)<1?i*i*((1+(t*=1.525))*i-t)*.5:.5*((i-=2)*i*((1+(t*=1.525))*i+t)+2)},easeInBounce:i=>1-Wx.easeOutBounce(1-i),easeOutBounce:i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,easeInOutBounce:i=>i<.5?.5*Wx.easeInBounce(2*i):.5*Wx.easeOutBounce(2*i-1)+.5};function jx(i){return i+.5|0}const Ay=(i,t,e)=>Math.max(Math.min(i,e),t);function $x(i){return Ay(jx(2.55*i),0,255)}function Iy(i){return Ay(jx(255*i),0,255)}function k_(i){return Ay(jx(i/2.55)/100,0,1)}function mV(i){return Ay(jx(100*i),0,100)}const Jg={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fP=[..."0123456789ABCDEF"],khe=i=>fP[15&i],Rhe=i=>fP[(240&i)>>4]+fP[15&i],uS=i=>(240&i)>>4==(15&i);const zhe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vV(i,t,e){const n=t*Math.min(e,1-e),r=(s,a=(s+i/30)%12)=>e-n*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function Vhe(i,t,e){const n=(r,s=(r+i/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function Uhe(i,t,e){const n=vV(i,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function pP(i){const e=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(e,n,r),a=Math.min(e,n,r),u=(s+a)/2;let h,m,w;return s!==a&&(w=s-a,m=u>.5?w/(2-s-a):w/(s+a),h=function Hhe(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}(e,n,r,w,s),h=60*h+.5),[0|h,m||0,u]}function gP(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(Iy)}function mP(i,t,e){return gP(vV,i,t,e)}function _V(i){return(i%360+360)%360}const yV={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bV={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let cS;const Khe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,vP=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,yC=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function hS(i,t,e){if(i){let n=pP(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,0===t?360:1)),n=mP(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function CV(i,t){return i&&Object.assign(t||{},i)}function wV(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Iy(i[3]))):(t=CV(i,{r:0,g:0,b:0,a:1})).a=Iy(t.a),t}function ede(i){return"r"===i.charAt(0)?function Zhe(i){const t=Khe.exec(i);let n,r,s,e=255;if(t){if(t[7]!==n){const a=+t[7];e=t[8]?$x(a):Ay(255*a,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?$x(n):Ay(n,0,255)),r=255&(t[4]?$x(r):Ay(r,0,255)),s=255&(t[6]?$x(s):Ay(s,0,255)),{r:n,g:r,b:s,a:e}}}(i):function jhe(i){const t=zhe.exec(i);let n,e=255;if(!t)return;t[5]!==n&&(e=t[6]?$x(+t[5]):Iy(+t[5]));const r=_V(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function Ghe(i,t,e){return gP(Uhe,i,t,e)}(r,s,a):"hsv"===t[1]?function Whe(i,t,e){return gP(Vhe,i,t,e)}(r,s,a):mP(r,s,a),{r:n[0],g:n[1],b:n[2],a:e}}(i)}class dS{constructor(t){if(t instanceof dS)return t;const e=typeof t;let n;"object"===e?n=wV(t):"string"===e&&(n=function Fhe(i){var e,t=i.length;return"#"===i[0]&&(4===t||5===t?e={r:255&17*Jg[i[1]],g:255&17*Jg[i[2]],b:255&17*Jg[i[3]],a:5===t?17*Jg[i[4]]:255}:(7===t||9===t)&&(e={r:Jg[i[1]]<<4|Jg[i[2]],g:Jg[i[3]]<<4|Jg[i[4]],b:Jg[i[5]]<<4|Jg[i[6]],a:9===t?Jg[i[7]]<<4|Jg[i[8]]:255})),e}(t)||function Yhe(i){cS||(cS=function Xhe(){const i={},t=Object.keys(bV),e=Object.keys(yV);let n,r,s,a,u;for(n=0;n<t.length;n++){for(a=u=t[n],r=0;r<e.length;r++)s=e[r],u=u.replace(s,yV[s]);s=parseInt(bV[a],16),i[u]=[s>>16&255,s>>8&255,255&s]}return i}(),cS.transparent=[0,0,0,0]);const t=cS[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||ede(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=CV(this._rgb);return t&&(t.a=k_(t.a)),t}set rgb(t){this._rgb=wV(t)}rgbString(){return this._valid?function Qhe(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${k_(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}(this._rgb):void 0}hexString(){return this._valid?function Bhe(i){var t=(i=>uS(i.r)&&uS(i.g)&&uS(i.b)&&uS(i.a))(i)?khe:Rhe;return i?"#"+t(i.r)+t(i.g)+t(i.b)+((i,t)=>i<255?t(i):"")(i.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function qhe(i){if(!i)return;const t=pP(i),e=t[0],n=mV(t[1]),r=mV(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${k_(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let s;const a=e===s?.5:e,u=2*a-1,h=n.a-r.a,m=((u*h==-1?u:(u+h)/(1+u*h))+1)/2;s=1-m,n.r=255&m*n.r+s*r.r+.5,n.g=255&m*n.g+s*r.g+.5,n.b=255&m*n.b+s*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function Jhe(i,t,e){const n=yC(k_(i.r)),r=yC(k_(i.g)),s=yC(k_(i.b));return{r:Iy(vP(n+e*(yC(k_(t.r))-n))),g:Iy(vP(r+e*(yC(k_(t.g))-r))),b:Iy(vP(s+e*(yC(k_(t.b))-s))),a:i.a+e*(t.a-i.a)}}(this._rgb,t._rgb,e)),this}clone(){return new dS(this.rgb)}alpha(t){return this._rgb.a=Iy(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=jx(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return hS(this._rgb,2,t),this}darken(t){return hS(this._rgb,2,-t),this}saturate(t){return hS(this._rgb,1,t),this}desaturate(t){return hS(this._rgb,1,-t),this}rotate(t){return function $he(i,t){var e=pP(i);e[0]=_V(e[0]+t),e=mP(e),i.r=e[0],i.g=e[1],i.b=e[2]}(this._rgb,t),this}}function xV(i){return new dS(i)}function AV(i){if(i&&"object"==typeof i){const t=i.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function IV(i){return AV(i)?i:xV(i)}function _P(i){return AV(i)?i:xV(i).saturate(.5).darken(.1).hexString()}const R0=Object.create(null),yP=Object.create(null);function qx(i,t){if(!t)return i;const e=t.split(".");for(let n=0,r=e.length;n<r;++n){const s=e[n];i=i[s]||(i[s]=Object.create(null))}return i}function bP(i,t,e){return"string"==typeof t?zx(qx(i,t),e):zx(qx(i,""),t)}var dl=new class tde{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,n)=>_P(n.backgroundColor),this.hoverBorderColor=(e,n)=>_P(n.borderColor),this.hoverColor=(e,n)=>_P(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return bP(this,t,e)}get(t){return qx(this,t)}describe(t,e){return bP(yP,t,e)}override(t,e){return bP(R0,t,e)}route(t,e,n,r){const s=qx(this,t),a=qx(this,n),u="_"+e;Object.defineProperties(s,{[u]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const h=this[u],m=a[r];return ol(h)?Object.assign({},m,h):Eo(h,m)},set(h){this[u]=h}}})}}({_scriptable:i=>!i.startsWith("on"),_indexable:i=>"events"!==i,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function fS(i,t,e,n,r){let s=t[r];return s||(s=t[r]=i.measureText(r).width,e.push(r)),s>n&&(n=s),n}function ide(i,t,e,n){let r=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),i.save(),i.font=t;let a=0;const u=e.length;let h,m,w,T,O;for(h=0;h<u;h++)if(T=e[h],null!=T&&!0!==Uu(T))a=fS(i,r,s,a,T);else if(Uu(T))for(m=0,w=T.length;m<w;m++)O=T[m],null!=O&&!Uu(O)&&(a=fS(i,r,s,a,O));i.restore();const W=s.length/2;if(W>e.length){for(h=0;h<W;h++)delete r[s[h]];s.splice(0,W)}return a}function O0(i,t,e){const n=i.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function SV(i,t){(t=t||i.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function CP(i,t,e,n){EV(i,t,e,n,null)}function EV(i,t,e,n,r){let s,a,u,h,m,w;const T=t.pointStyle,O=t.rotation,W=t.radius;let te=(O||0)*xhe;if(T&&"object"==typeof T&&(s=T.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return i.save(),i.translate(e,n),i.rotate(te),i.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),void i.restore();if(!(isNaN(W)||W<=0)){switch(i.beginPath(),T){default:r?i.ellipse(e,n,r/2,W,0,0,yu):i.arc(e,n,W,0,yu),i.closePath();break;case"triangle":i.moveTo(e+Math.sin(te)*W,n-Math.cos(te)*W),te+=nV,i.lineTo(e+Math.sin(te)*W,n-Math.cos(te)*W),te+=nV,i.lineTo(e+Math.sin(te)*W,n-Math.cos(te)*W),i.closePath();break;case"rectRounded":m=.516*W,h=W-m,a=Math.cos(te+Ux)*h,u=Math.sin(te+Ux)*h,i.arc(e-a,n-u,m,te-fc,te-Zc),i.arc(e+u,n-a,m,te-Zc,te),i.arc(e+a,n+u,m,te,te+Zc),i.arc(e-u,n+a,m,te+Zc,te+fc),i.closePath();break;case"rect":if(!O){h=Math.SQRT1_2*W,w=r?r/2:h,i.rect(e-w,n-h,2*w,2*h);break}te+=Ux;case"rectRot":a=Math.cos(te)*W,u=Math.sin(te)*W,i.moveTo(e-a,n-u),i.lineTo(e+u,n-a),i.lineTo(e+a,n+u),i.lineTo(e-u,n+a),i.closePath();break;case"crossRot":te+=Ux;case"cross":a=Math.cos(te)*W,u=Math.sin(te)*W,i.moveTo(e-a,n-u),i.lineTo(e+a,n+u),i.moveTo(e+u,n-a),i.lineTo(e-u,n+a);break;case"star":a=Math.cos(te)*W,u=Math.sin(te)*W,i.moveTo(e-a,n-u),i.lineTo(e+a,n+u),i.moveTo(e+u,n-a),i.lineTo(e-u,n+a),te+=Ux,a=Math.cos(te)*W,u=Math.sin(te)*W,i.moveTo(e-a,n-u),i.lineTo(e+a,n+u),i.moveTo(e+u,n-a),i.lineTo(e-u,n+a);break;case"line":a=r?r/2:Math.cos(te)*W,u=Math.sin(te)*W,i.moveTo(e-a,n-u),i.lineTo(e+a,n+u);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(te)*W,n+Math.sin(te)*W)}i.fill(),t.borderWidth>0&&i.stroke()}}function Xx(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function pS(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function gS(i){i.restore()}function rde(i,t,e,n,r){if(!t)return i.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;i.lineTo(s,t.y),i.lineTo(s,e.y)}else"after"===r!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function sde(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function F0(i,t,e,n,r,s={}){const a=Uu(t)?t:[t],u=s.strokeWidth>0&&""!==s.strokeColor;let h,m;for(i.save(),i.font=r.string,function ade(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),Ll(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}(i,s),h=0;h<a.length;++h)m=a[h],u&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),Ll(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(m,e,n,s.maxWidth)),i.fillText(m,e,n,s.maxWidth),ode(i,e,n,m,s),n+=r.lineHeight;i.restore()}function ode(i,t,e,n,r){if(r.strikethrough||r.underline){const s=i.measureText(n),a=t-s.actualBoundingBoxLeft,u=t+s.actualBoundingBoxRight,h=e-s.actualBoundingBoxAscent,m=e+s.actualBoundingBoxDescent,w=r.strikethrough?(h+m)/2:m;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(a,w),i.lineTo(u,w),i.stroke()}}function Yx(i,t){const{x:e,y:n,w:r,h:s,radius:a}=t;i.arc(e+a.topLeft,n+a.topLeft,a.topLeft,-Zc,fc,!0),i.lineTo(e,n+s-a.bottomLeft),i.arc(e+a.bottomLeft,n+s-a.bottomLeft,a.bottomLeft,fc,Zc,!0),i.lineTo(e+r-a.bottomRight,n+s),i.arc(e+r-a.bottomRight,n+s-a.bottomRight,a.bottomRight,Zc,0,!0),i.lineTo(e+r,n+a.topRight),i.arc(e+r-a.topRight,n+a.topRight,a.topRight,0,-Zc,!0),i.lineTo(e+a.topLeft,n)}const lde=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),ude=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function cde(i,t){const e=(""+i).match(lde);if(!e||"normal"===e[1])return 1.2*t;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100}return t*i}const hde=i=>+i||0;function wP(i,t){const e={},n=ol(t),r=n?Object.keys(t):t,s=ol(i)?n?a=>Eo(i[a],i[t[a]]):a=>i[a]:()=>i;for(const a of r)e[a]=hde(s(a));return e}function TV(i){return wP(i,{top:"y",right:"x",bottom:"y",left:"x"})}function N0(i){return wP(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Af(i){const t=TV(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function rd(i,t){let e=Eo((i=i||{}).size,(t=t||dl.font).size);"string"==typeof e&&(e=parseInt(e,10));let n=Eo(i.style,t.style);n&&!(""+n).match(ude)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const r={family:Eo(i.family,t.family),lineHeight:cde(Eo(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:Eo(i.weight,t.weight),string:""};return r.string=function nde(i){return!i||Ll(i.size)||Ll(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}(r),r}function Kx(i,t,e,n){let s,a,u,r=!0;for(s=0,a=i.length;s<a;++s)if(u=i[s],void 0!==u&&(void 0!==t&&"function"==typeof u&&(u=u(t),r=!1),void 0!==e&&Uu(u)&&(u=u[e%u.length],r=!1),void 0!==u))return n&&!r&&(n.cacheable=!1),u}function Sy(i,t){return Object.assign(Object.create(i),t)}function xP(i,t=[""],e=i,n,r=(()=>i[0])){Zg(n)||(n=kV("_fallback",i));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:e,_fallback:n,_getTarget:r,override:a=>xP([a,...i],t,e,n)};return new Proxy(s,{deleteProperty:(a,u)=>(delete a[u],delete a._keys,delete i[0][u],!0),get:(a,u)=>DV(a,u,()=>function bde(i,t,e,n){let r;for(const s of t)if(r=kV(fde(s,i),e),Zg(r))return AP(i,r)?IP(e,n,i,r):r}(u,t,i,a)),getOwnPropertyDescriptor:(a,u)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],u),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(a,u)=>RV(a).includes(u),ownKeys:a=>RV(a),set(a,u,h){const m=a._storage||(a._storage=r());return a[u]=m[u]=h,delete a._keys,!0}})}function bC(i,t,e,n){const r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:MV(i,n),setContext:s=>bC(i,s,e,n),override:s=>bC(i.override(s),t,e,n)};return new Proxy(r,{deleteProperty:(s,a)=>(delete s[a],delete i[a],!0),get:(s,a,u)=>DV(s,a,()=>function pde(i,t,e){const{_proxy:n,_context:r,_subProxy:s,_descriptors:a}=i;let u=n[t];return xy(u)&&a.isScriptable(t)&&(u=function gde(i,t,e,n){const{_proxy:r,_context:s,_subProxy:a,_stack:u}=e;if(u.has(i))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+i);return u.add(i),t=t(s,a||n),u.delete(i),AP(i,t)&&(t=IP(r._scopes,r,i,t)),t}(t,u,i,e)),Uu(u)&&u.length&&(u=function mde(i,t,e,n){const{_proxy:r,_context:s,_subProxy:a,_descriptors:u}=e;if(Zg(s.index)&&n(i))t=t[s.index%t.length];else if(ol(t[0])){const h=t,m=r._scopes.filter(w=>w!==h);t=[];for(const w of h){const T=IP(m,r,i,w);t.push(bC(T,s,a&&a[i],u))}}return t}(t,u,i,a.isIndexable)),AP(t,u)&&(u=bC(u,r,s&&s[t],a)),u}(s,a,u)),getOwnPropertyDescriptor:(s,a)=>s._descriptors.allKeys?Reflect.has(i,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,a),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(s,a)=>Reflect.has(i,a),ownKeys:()=>Reflect.ownKeys(i),set:(s,a,u)=>(i[a]=u,delete s[a],!0)})}function MV(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:xy(e)?e:()=>e,isIndexable:xy(n)?n:()=>n}}const fde=(i,t)=>i?i+lP(t):t,AP=(i,t)=>ol(t)&&"adapters"!==i&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function DV(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];const n=e();return i[t]=n,n}function PV(i,t,e){return xy(i)?i(t,e):i}const vde=(i,t)=>!0===i?t:"string"==typeof i?wy(t,i):void 0;function _de(i,t,e,n,r){for(const s of t){const a=vde(e,s);if(a){i.add(a);const u=PV(a._fallback,e,r);if(Zg(u)&&u!==e&&u!==n)return u}else if(!1===a&&Zg(n)&&e!==n)return null}return!1}function IP(i,t,e,n){const r=t._rootScopes,s=PV(t._fallback,e,n),a=[...i,...r],u=new Set;u.add(n);let h=LV(u,a,e,s||e,n);return!(null===h||Zg(s)&&s!==e&&(h=LV(u,a,s,h,n),null===h))&&xP(Array.from(u),[""],r,s,()=>function yde(i,t,e){const n=i._getTarget();t in n||(n[t]={});const r=n[t];return Uu(r)&&ol(e)?e:r}(t,e,n))}function LV(i,t,e,n,r){for(;e;)e=_de(i,t,e,n,r);return e}function kV(i,t){for(const e of t){if(!e)continue;const n=e[i];if(Zg(n))return n}}function RV(i){let t=i._keys;return t||(t=i._keys=function Cde(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}(i._scopes)),t}function OV(i,t,e,n){const{iScale:r}=i,{key:s="r"}=this._parsing,a=new Array(n);let u,h,m,w;for(u=0,h=n;u<h;++u)m=u+e,w=t[m],a[u]={r:r.parse(wy(w,s),m)};return a}const wde=Number.EPSILON||1e-14,CC=(i,t)=>t<i.length&&!i[t].skip&&i[t],FV=i=>"x"===i?"y":"x";function xde(i,t,e,n){const r=i.skip?t:i,s=t,a=e.skip?t:e,u=cP(s,r),h=cP(a,s);let m=u/(u+h),w=h/(u+h);m=isNaN(m)?0:m,w=isNaN(w)?0:w;const T=n*m,O=n*w;return{previous:{x:s.x-T*(a.x-r.x),y:s.y-T*(a.y-r.y)},next:{x:s.x+O*(a.x-r.x),y:s.y+O*(a.y-r.y)}}}function mS(i,t,e){return Math.max(Math.min(i,e),t)}function Tde(i,t,e,n,r){let s,a,u,h;if(t.spanGaps&&(i=i.filter(m=>!m.skip)),"monotone"===t.cubicInterpolationMode)!function Sde(i,t="x"){const e=FV(t),n=i.length,r=Array(n).fill(0),s=Array(n);let a,u,h,m=CC(i,0);for(a=0;a<n;++a)if(u=h,h=m,m=CC(i,a+1),h){if(m){const w=m[t]-h[t];r[a]=0!==w?(m[e]-h[e])/w:0}s[a]=u?m?Bv(r[a-1])!==Bv(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}(function Ade(i,t,e){const n=i.length;let r,s,a,u,h,m=CC(i,0);for(let w=0;w<n-1;++w)if(h=m,m=CC(i,w+1),h&&m){if(Hx(t[w],0,wde)){e[w]=e[w+1]=0;continue}r=e[w]/t[w],s=e[w+1]/t[w],u=Math.pow(r,2)+Math.pow(s,2),!(u<=9)&&(a=3/Math.sqrt(u),e[w]=r*a*t[w],e[w+1]=s*a*t[w])}})(i,r,s),function Ide(i,t,e="x"){const n=FV(e),r=i.length;let s,a,u,h=CC(i,0);for(let m=0;m<r;++m){if(a=u,u=h,h=CC(i,m+1),!u)continue;const w=u[e],T=u[n];a&&(s=(w-a[e])/3,u[`cp1${e}`]=w-s,u[`cp1${n}`]=T-s*t[m]),h&&(s=(h[e]-w)/3,u[`cp2${e}`]=w+s,u[`cp2${n}`]=T+s*t[m])}}(i,s,t)}(i,r);else{let m=n?i[i.length-1]:i[0];for(s=0,a=i.length;s<a;++s)u=i[s],h=xde(m,u,i[Math.min(s+1,a-(n?0:1))%a],t.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,m=u}t.capBezierPoints&&function Ede(i,t){let e,n,r,s,a,u=Xx(i[0],t);for(e=0,n=i.length;e<n;++e)a=s,s=u,u=e<n-1&&Xx(i[e+1],t),s&&(r=i[e],a&&(r.cp1x=mS(r.cp1x,t.left,t.right),r.cp1y=mS(r.cp1y,t.top,t.bottom)),u&&(r.cp2x=mS(r.cp2x,t.left,t.right),r.cp2y=mS(r.cp2y,t.top,t.bottom)))}(i,e)}function NV(){return typeof window<"u"&&typeof document<"u"}function SP(i){let t=i.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function vS(i,t,e){let n;return"string"==typeof i?(n=parseInt(i,10),-1!==i.indexOf("%")&&(n=n/100*t.parentNode[e])):n=i,n}const _S=i=>window.getComputedStyle(i,null),Dde=["top","right","bottom","left"];function B0(i,t,e){const n={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=Dde[r];n[s]=parseFloat(i[t+"-"+s+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function z0(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,r=_S(e),s="border-box"===r.boxSizing,a=B0(r,"padding"),u=B0(r,"border","width"),{x:h,y:m,box:w}=function Lde(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:s}=n;let u,h,a=!1;if(((i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot))(r,s,i.target))u=r,h=s;else{const m=t.getBoundingClientRect();u=n.clientX-m.left,h=n.clientY-m.top,a=!0}return{x:u,y:h,box:a}}(i,e),T=a.left+(w&&u.left),O=a.top+(w&&u.top);let{width:W,height:te}=t;return s&&(W-=a.width+u.width,te-=a.height+u.height),{x:Math.round((h-T)/W*e.width/n),y:Math.round((m-O)/te*e.height/n)}}const EP=i=>Math.round(10*i)/10;function BV(i,t,e){const n=t||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=r/n,i.width=s/n;const a=i.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${i.height}px`,a.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==n||a.height!==r||a.width!==s)&&(i.currentDevicePixelRatio=n,a.height=r,a.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0)}const Ode=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return i}();function zV(i,t){const e=function Mde(i,t){return _S(i).getPropertyValue(t)}(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function V0(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Fde(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:"middle"===n?e<.5?i.y:t.y:"after"===n?e<1?i.y:t.y:e>0?t.y:i.y}}function Nde(i,t,e,n){const r={x:i.cp2x,y:i.cp2y},s={x:t.cp1x,y:t.cp1y},a=V0(i,r,e),u=V0(r,s,e),h=V0(s,t,e),m=V0(a,u,e),w=V0(u,h,e);return V0(m,w,e)}const VV=new Map;function Zx(i,t,e){return function Bde(i,t){t=t||{};const e=i+JSON.stringify(t);let n=VV.get(e);return n||(n=new Intl.NumberFormat(i,t),VV.set(e,n)),n}(t,e).format(i)}function wC(i,t,e){return i?function(i,t){return{x:e=>i+i+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,n)=>e-n,leftForLtr:(e,n)=>e-n}}(t,e):{x:i=>i,setWidth(i){},textAlign:i=>i,xPlus:(i,t)=>i+t,leftForLtr:(i,t)=>i}}function UV(i,t){let e,n;("ltr"===t||"rtl"===t)&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function HV(i,t){void 0!==t&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function GV(i){return"angle"===i?{between:Gx,compare:She,normalize:lg}:{between:P_,compare:(t,e)=>t-e,normalize:t=>t}}function WV({start:i,end:t,count:e,loop:n,style:r}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e==0,style:r}}function jV(i,t,e){if(!e)return[i];const{property:n,start:r,end:s}=e,a=t.length,{compare:u,between:h,normalize:m}=GV(n),{start:w,end:T,loop:O,style:W}=function Ude(i,t,e){const{property:n,start:r,end:s}=e,{between:a,normalize:u}=GV(n),h=t.length;let O,W,{start:m,end:w,loop:T}=i;if(T){for(m+=h,w+=h,O=0,W=h;O<W&&a(u(t[m%h][n]),r,s);++O)m--,w--;m%=h,w%=h}return w<m&&(w+=h),{start:m,end:w,loop:T,style:i.style}}(i,t,e),te=[];let Ne,et,Je,ue=!1,ce=null;for(let zt=w,pn=w;zt<=T;++zt)et=t[zt%a],!et.skip&&(Ne=m(et[n]),Ne!==Je&&(ue=h(Ne,r,s),null===ce&&(ue||h(r,Je,Ne)&&0!==u(r,Je))&&(ce=0===u(Ne,r)?zt:pn),null!==ce&&(!ue||0===u(s,Ne)||h(s,Je,Ne))&&(te.push(WV({start:ce,end:zt,loop:O,count:a,style:W})),ce=null),pn=zt,Je=Ne));return null!==ce&&te.push(WV({start:ce,end:T,loop:O,count:a,style:W})),te}function $V(i,t){const e=[],n=i.segments;for(let r=0;r<n.length;r++){const s=jV(n[r],i.points,t);s.length&&e.push(...s)}return e}function XV(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function $de(i,t){return t&&JSON.stringify(i)!==JSON.stringify(t)}var R_=new class qde{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const a=e.duration;e.listeners[r].forEach(u=>u({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(n-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=cV.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let h,a=s.length-1,u=!1;for(;a>=0;--a)h=s[a],h._active?(h._total>n.duration&&(n.duration=h._total),h.tick(t),u=!0):(s[a]=s[s.length-1],s.pop());u&&(r.draw(),this._notify(r,n,t,"progress")),s.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const YV="transparent",Xde={boolean:(i,t,e)=>e>.5?t:i,color(i,t,e){const n=IV(i||YV),r=n.valid&&IV(t||YV);return r&&r.valid?r.mix(n,e).hexString():t},number:(i,t,e)=>i+(t-i)*e};class Yde{constructor(t,e,n,r){const s=e[n];r=Kx([t.to,r,s,t.from]);const a=Kx([t.from,s,r]);this._active=!0,this._fn=t.fn||Xde[t.type||typeof a],this._easing=Wx[t.easing]||Wx.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Kx([t.to,e,r,t.from]),this._from=Kx([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,s=this._from,a=this._loop,u=this._to;let h;if(this._active=s!==u&&(a||e<n),!this._active)return this._target[r]=u,void this._notify(!0);e<0?this._target[r]=s:(h=e/n%2,h=a&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[r]=this._fn(s,u,h))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}dl.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Qde=Object.keys(dl.animation);dl.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>"onProgress"!==i&&"onComplete"!==i&&"fn"!==i}),dl.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),dl.describe("animations",{_fallback:"animation"}),dl.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>0|i}}}});class KV{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!ol(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!ol(r))return;const s={};for(const a of Qde)s[a]=r[a];(Uu(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!e.has(a))&&e.set(a,s)})})}_animateOptions(t,e){const n=e.options,r=function efe(i,t){if(!t)return;let e=i.options;if(e)return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;i.options=t}(t,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function Jde(i,t){const e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const s=i[n[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,e){const n=this._properties,r=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),u=Date.now();let h;for(h=a.length-1;h>=0;--h){const m=a[h];if("$"===m.charAt(0))continue;if("options"===m){r.push(...this._animateOptions(t,e));continue}const w=e[m];let T=s[m];const O=n.get(m);if(T){if(O&&T.active()){T.update(O,w,u);continue}T.cancel()}O&&O.duration?(s[m]=T=new Yde(O,t,m,w),r.push(T)):t[m]=w}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(R_.add(this._chart,n),!0):void 0}}function ZV(i,t){const e=i&&i.options||{},n=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:n?s:r,end:n?r:s}}function QV(i,t){const e=[],n=i._getSortedDatasetMetas(t);let r,s;for(r=0,s=n.length;r<s;++r)e.push(n[r].index);return e}function JV(i,t,e,n={}){const r=i.keys,s="single"===n.mode;let a,u,h,m;if(null!==t){for(a=0,u=r.length;a<u;++a){if(h=+r[a],h===e){if(n.all)continue;break}m=i.values[h],dh(m)&&(s||0===t||Bv(t)===Bv(m))&&(t+=m)}return t}}function eU(i,t){const e=i&&i.options.stacked;return e||void 0===e&&void 0!==t.stack}function afe(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function tU(i,t,e,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const s=i[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function nU(i,t){const{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:u}=n,h=s.axis,m=a.axis,w=function rfe(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}(s,a,n),T=t.length;let O;for(let W=0;W<T;++W){const te=t[W],{[h]:ue,[m]:ce}=te;O=(te._stacks||(te._stacks={}))[m]=afe(r,w,ue),O[u]=ce,O._top=tU(O,a,!0,n.type),O._bottom=tU(O,a,!1,n.type)}}function TP(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function Qx(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[n]||void 0===s[n][e])return;delete s[n][e]}}}const MP=i=>"reset"===i||"none"===i,iU=(i,t)=>t?i:Object.assign({},i);let zv=(()=>{class i{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=eU(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&Qx(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(O,W,te,ue)=>"x"===O?W:"r"===O?ue:te,a=n.xAxisID=Eo(r.xAxisID,TP(e,"x")),u=n.yAxisID=Eo(r.yAxisID,TP(e,"y")),h=n.rAxisID=Eo(r.rAxisID,TP(e,"r")),m=n.indexAxis,w=n.iAxisID=s(m,a,u,h),T=n.vAxisID=s(m,u,a,h);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(u),n.rScale=this.getScaleForId(h),n.iScale=this.getScaleForId(w),n.vScale=this.getScaleForId(T)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&lV(this._data,this),e._stacked&&Qx(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ol(n))this._data=function ife(i){const t=Object.keys(i),e=new Array(t.length);let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],e[n]={x:s,y:i[s]};return e}(n);else if(r!==n){if(r){lV(r,this);const s=this._cachedMeta;Qx(s),s._parsed=[]}n&&Object.isExtensible(n)&&function Dhe(i,t){i._chartjs?i._chartjs.listeners.push(t):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),oV.forEach(e=>{const n="_onData"+lP(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...s){const a=r.apply(this,s);return i._chartjs.listeners.forEach(u=>{"function"==typeof u[n]&&u[n](...s)}),a}})}))}(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const a=n._stacked;n._stacked=eU(n.vScale,n),n.stack!==r.stack&&(s=!0,Qx(n),n.stack=r.stack),this._resyncElements(e),(s||a!==n._stacked)&&nU(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:a,_stacked:u}=r,h=a.axis;let T,O,W,m=0===e&&n===s.length||r._sorted,w=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,W=s;else{W=Uu(s[e])?this.parseArrayData(r,s,e,n):ol(s[e])?this.parseObjectData(r,s,e,n):this.parsePrimitiveData(r,s,e,n);const te=()=>null===O[h]||w&&O[h]<w[h];for(T=0;T<n;++T)r._parsed[T+e]=O=W[T],m&&(te()&&(m=!1),w=O);r._sorted=m}u&&nU(this,W)}parsePrimitiveData(e,n,r,s){const{iScale:a,vScale:u}=e,h=a.axis,m=u.axis,w=a.getLabels(),T=a===u,O=new Array(s);let W,te,ue;for(W=0,te=s;W<te;++W)ue=W+r,O[W]={[h]:T||a.parse(w[ue],ue),[m]:u.parse(n[ue],ue)};return O}parseArrayData(e,n,r,s){const{xScale:a,yScale:u}=e,h=new Array(s);let m,w,T,O;for(m=0,w=s;m<w;++m)T=m+r,O=n[T],h[m]={x:a.parse(O[0],T),y:u.parse(O[1],T)};return h}parseObjectData(e,n,r,s){const{xScale:a,yScale:u}=e,{xAxisKey:h="x",yAxisKey:m="y"}=this._parsing,w=new Array(s);let T,O,W,te;for(T=0,O=s;T<O;++T)W=T+r,te=n[W],w[T]={x:a.parse(wy(te,h),W),y:u.parse(wy(te,m),W)};return w}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const a=this._cachedMeta,u=n[e.axis];return JV({keys:QV(this.chart,!0),values:n._stacks[e.axis]},u,a.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const a=r[n.axis];let u=null===a?NaN:a;const h=s&&r._stacks[n.axis];s&&h&&(s.values=h,u=JV(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,u),e.max=Math.max(e.max,u)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,a=r._sorted&&e===r.iScale,u=s.length,h=this._getOtherScale(e),m=((i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:QV(this.chart,!0),values:null})(n,r),w={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:T,max:O}=function sfe(i){const{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(h);let W,te;function ue(){te=s[W];const ce=te[h.axis];return!dh(te[e.axis])||T>ce||O<ce}for(W=0;W<u&&(ue()||(this.updateRangeFromParsed(w,e,te,m),!a));++W);if(a)for(W=u-1;W>=0;--W)if(!ue()){this.updateRangeFromParsed(w,e,te,m);break}return w}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,a,u;for(s=0,a=n.length;s<a;++s)u=n[s][e.axis],dh(u)&&r.push(u);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=function nfe(i){let t,e,n,r;return ol(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:!1===i}}(Eo(this.options.clip,function tfe(i,t,e){if(!1===e)return!1;const n=ZV(i,e),r=ZV(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],a=this.chart.chartArea,u=[],h=this._drawStart||0,m=this._drawCount||s.length-h,w=this.options.drawActiveElementsOnTop;let T;for(r.dataset&&r.dataset.draw(e,a,h,m),T=h;T<h+m;++T){const O=s[T];O.hidden||(O.active&&w?u.push(O):O.draw(e,a))}for(T=0;T<u.length;++T)u[T].draw(e,a)}getStyle(e,n){const r=n?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const u=this._cachedMeta.data[e];a=u.$context||(u.$context=function lfe(i,t,e){return Sy(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,u)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function ofe(i,t){return Sy(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s="active"===n,a=this._cachedDataOpts,u=e+"-"+n,h=a[u],m=this.enableOptionSharing&&Zg(r);if(h)return iU(h,m);const w=this.chart.config,T=w.datasetElementScopeKeys(this._type,e),O=s?[`${e}Hover`,"hover",e,""]:[e,""],W=w.getOptionScopes(this.getDataset(),T),te=Object.keys(dl.elements[e]),ce=w.resolveNamedOptions(W,te,()=>this.getContext(r,s),O);return ce.$shared&&(ce.$shared=m,a[u]=Object.freeze(iU(ce,m))),ce}_resolveAnimations(e,n,r){const s=this.chart,a=this._cachedDataOpts,u=`animation-${n}`,h=a[u];if(h)return h;let m;if(!1!==s.options.animation){const T=this.chart.config,O=T.datasetAnimationScopeKeys(this._type,n),W=T.getOptionScopes(this.getDataset(),O);m=T.createResolver(W,this.getContext(e,r,n))}const w=new KV(s,m&&m.animations);return m&&m._cacheable&&(a[u]=Object.freeze(w)),w}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||MP(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,a=this.getSharedOptions(r),u=this.includeOptions(n,a)||a!==s;return this.updateSharedOptions(a,n,r),{sharedOptions:a,includeOptions:u}}updateElement(e,n,r,s){MP(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!MP(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const a=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[h,m,w]of this._syncList)this[h](m,w);this._syncList=[];const s=r.length,a=n.length,u=Math.min(a,s);u&&this.parse(0,u),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,n,r=!0){const s=this._cachedMeta,a=s.data,u=e+n;let h;const m=w=>{for(w.length+=n,h=w.length-1;h>=u;h--)w[h]=w[h-n]};for(m(a),h=e;h<u;++h)a[h]=new this.dataElementType;this._parsing&&m(s._parsed),this.parse(e,n),r&&this.updateElements(a,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Qx(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i.defaults={},i})();function hfe(i){const t=i.iScale,e=function cfe(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let r=0,s=e.length;r<s;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=uV(n.sort((r,s)=>r-s))}return i._cache.$bar}(t,i.type);let r,s,a,u,n=t._length;const h=()=>{32767===a||-32768===a||(Zg(u)&&(n=Math.min(n,Math.abs(a-u)||n)),u=a)};for(r=0,s=e.length;r<s;++r)a=t.getPixelForValue(e[r]),h();for(u=void 0,r=0,s=t.ticks.length;r<s;++r)a=t.getPixelForTick(r),h();return n}function rU(i,t,e,n){return Uu(i)?function pfe(i,t,e,n){const r=e.parse(i[0],n),s=e.parse(i[1],n),a=Math.min(r,s),u=Math.max(r,s);let h=a,m=u;Math.abs(a)>Math.abs(u)&&(h=u,m=a),t[e.axis]=m,t._custom={barStart:h,barEnd:m,start:r,end:s,min:a,max:u}}(i,t,e,n):t[e.axis]=e.parse(i,n),t}function sU(i,t,e,n){const r=i.iScale,s=i.vScale,a=r.getLabels(),u=r===s,h=[];let m,w,T,O;for(m=e,w=e+n;m<w;++m)O=t[m],T={},T[r.axis]=u||r.parse(a[m],m),h.push(rU(O,T,s,m));return h}function DP(i){return i&&void 0!==i.barStart&&void 0!==i.barEnd}function vfe(i,t,e,n){let r=t.borderSkipped;const s={};if(!r)return void(i.borderSkipped=s);if(!0===r)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:u,reverse:h,top:m,bottom:w}=function mfe(i){let t,e,n,r,s;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:n,reverse:t,top:r,bottom:s}}(i);"middle"===r&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=m:(e._bottom||0)===n?r=w:(s[aU(w,a,u,h)]=!0,r=m)),s[aU(r,a,u,h)]=!0,i.borderSkipped=s}function aU(i,t,e,n){return n?(i=function _fe(i,t,e){return i===t?e:i===e?t:i}(i,t,e),i=oU(i,e,t)):i=oU(i,t,e),i}function oU(i,t,e){return"start"===i?t:"end"===i?e:i}function yfe(i,{inflateAmount:t},e){i.inflateAmount="auto"===t?1===e?.33:0:t}zv.prototype.datasetElementType=null,zv.prototype.dataElementType=null;let bfe=(()=>{class i extends zv{parsePrimitiveData(e,n,r,s){return sU(e,n,r,s)}parseArrayData(e,n,r,s){return sU(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:a,vScale:u}=e,{xAxisKey:h="x",yAxisKey:m="y"}=this._parsing,w="x"===a.axis?h:m,T="x"===u.axis?h:m,O=[];let W,te,ue,ce;for(W=r,te=r+s;W<te;++W)ce=n[W],ue={},ue[a.axis]=a.parse(wy(ce,w),W),O.push(rU(wy(ce,T),ue,u,W));return O}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const a=r._custom;a&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,a=this.getParsed(e),u=a._custom,h=DP(u)?"["+u.start+", "+u.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const a="reset"===s,{index:u,_cachedMeta:{vScale:h}}=this,m=h.getBasePixel(),w=h.isHorizontal(),T=this._getRuler(),{sharedOptions:O,includeOptions:W}=this._getSharedOptions(n,s);for(let te=n;te<n+r;te++){const ue=this.getParsed(te),ce=a||Ll(ue[h.axis])?{base:m,head:m}:this._calculateBarValuePixels(te),Ne=this._calculateBarIndexPixels(te,T),et=(ue._stacks||{})[h.axis],Je={horizontal:w,base:ce.base,enableBorderRadius:!et||DP(ue._custom)||u===et._top||u===et._bottom,x:w?ce.head:Ne.center,y:w?Ne.center:ce.head,height:w?Ne.size:Math.abs(ce.size),width:w?Math.abs(ce.size):Ne.size};W&&(Je.options=O||this.resolveDataElementOptions(te,e[te].active?"active":s));const at=Je.options||e[te].options;vfe(Je,at,et,u),yfe(Je,at,T.ratio),this.updateElement(e[te],te,Je,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),a=r.options.stacked,u=[],h=m=>{const w=m.controller.getParsed(n),T=w&&w[m.vScale.axis];if(Ll(T)||isNaN(T))return!0};for(const m of s)if((void 0===n||!h(m))&&((!1===a||-1===u.indexOf(m.stack)||void 0===a&&void 0===m.stack)&&u.push(m.stack),m.index===e))break;return u.length||u.push(void 0),u}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),a=void 0!==n?s.indexOf(n):-1;return-1===a?s.length-1:a}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let a,u;for(a=0,u=n.data.length;a<u;++a)s.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));const h=e.barThickness;return{min:h||hfe(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:h?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r},options:{base:s,minBarLength:a}}=this,u=s||0,h=this.getParsed(e),m=h._custom,w=DP(m);let te,ue,T=h[n.axis],O=0,W=r?this.applyStack(n,h,r):T;W!==T&&(O=W-T,W=T),w&&(T=m.barStart,W=m.barEnd-m.barStart,0!==T&&Bv(T)!==Bv(m.barEnd)&&(O=0),O+=T);const ce=Ll(s)||w?O:s;let Ne=n.getPixelForValue(ce);if(te=this.chart.getDataVisibility(e)?n.getPixelForValue(O+W):Ne,ue=te-Ne,Math.abs(ue)<a){ue=function gfe(i,t,e){return 0!==i?Bv(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(ue,n,u)*a,T===u&&(Ne-=ue/2);const et=n.getPixelForDecimal(0),Je=n.getPixelForDecimal(1),at=Math.min(et,Je),kt=Math.max(et,Je);Ne=Math.max(Math.min(Ne,kt),at),te=Ne+ue}if(Ne===n.getPixelForValue(u)){const et=Bv(ue)*n.getLineWidthForValue(u)/2;Ne+=et,ue-=et}return{size:ue,base:Ne,head:te,center:te+ue/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,a=s.skipNull,u=Eo(s.maxBarThickness,1/0);let h,m;if(n.grouped){const w=a?this._getStackCount(e):n.stackCount,T="flex"===s.barThickness?function ffe(i,t,e,n){const r=t.pixels,s=r[i];let a=i>0?r[i-1]:null,u=i<r.length-1?r[i+1]:null;const h=e.categoryPercentage;null===a&&(a=s-(null===u?t.end-t.start:u-s)),null===u&&(u=s+s-a);const m=s-(s-Math.min(a,u))/2*h;return{chunk:Math.abs(u-a)/2*h/n,ratio:e.barPercentage,start:m}}(e,n,s,w):function dfe(i,t,e,n){const r=e.barThickness;let s,a;return Ll(r)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=r*n,a=1),{chunk:s/n,ratio:a,start:t.pixels[i]-s/2}}(e,n,s,w),O=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0);h=T.start+T.chunk*O+T.chunk/2,m=Math.min(u,T.chunk*T.ratio)}else h=r.getPixelForValue(this.getParsed(e)[r.axis],e),m=Math.min(u,n.min*n.ratio);return{base:h-m/2,head:h+m/2,center:h,size:m}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let a=0;for(;a<s;++a)null!==this.getParsed(a)[n.axis]&&r[a].draw(this._ctx)}}return i.id="bar",i.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},i.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},i})(),Cfe=(()=>{class i extends zv{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,s){const a=super.parsePrimitiveData(e,n,r,s);for(let u=0;u<a.length;u++)a[u]._custom=this.resolveDataElementOptions(u+r).radius;return a}parseArrayData(e,n,r,s){const a=super.parseArrayData(e,n,r,s);for(let u=0;u<a.length;u++)a[u]._custom=Eo(n[r+u][2],this.resolveDataElementOptions(u+r).radius);return a}parseObjectData(e,n,r,s){const a=super.parseObjectData(e,n,r,s);for(let u=0;u<a.length;u++){const h=n[r+u];a[u]._custom=Eo(h&&h.r&&+h.r,this.resolveDataElementOptions(u+r).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,{xScale:r,yScale:s}=n,a=this.getParsed(e),u=r.getLabelForValue(a.x),h=s.getLabelForValue(a.y),m=a._custom;return{label:n.label,value:"("+u+", "+h+(m?", "+m:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,s){const a="reset"===s,{iScale:u,vScale:h}=this._cachedMeta,{sharedOptions:m,includeOptions:w}=this._getSharedOptions(n,s),T=u.axis,O=h.axis;for(let W=n;W<n+r;W++){const te=e[W],ue=!a&&this.getParsed(W),ce={},Ne=ce[T]=a?u.getPixelForDecimal(.5):u.getPixelForValue(ue[T]),et=ce[O]=a?h.getBasePixel():h.getPixelForValue(ue[O]);ce.skip=isNaN(Ne)||isNaN(et),w&&(ce.options=m||this.resolveDataElementOptions(W,te.active?"active":s),a&&(ce.options.radius=0)),this.updateElement(te,W,ce,s)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const a=s.radius;return"active"!==n&&(s.radius=0),s.radius+=Eo(r&&r._custom,a),s}}return i.id="bubble",i.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},i.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},i})(),lU=(()=>{class i extends zv{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let u,h,a=m=>+r[m];if(ol(r[e])){const{key:m="value"}=this._parsing;a=w=>+wy(r[w],m)}for(u=e,h=e+n;u<h;++u)s._parsed[u]=a(u)}}_getRotation(){return jm(this.options.rotation-90)}_getCircumference(){return jm(this.options.circumference)}_getRotationExtents(){let e=yu,n=-yu;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const s=this.chart.getDatasetMeta(r).controller,a=s._getRotation(),u=s._getCircumference();e=Math.min(e,a),n=Math.max(n,a+u)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,a=s.data,u=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,h=Math.max((Math.min(r.width,r.height)-u)/2,0),m=Math.min(((i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100:i/t)(this.options.cutout,h),1),w=this._getRingWeight(this.index),{circumference:T,rotation:O}=this._getRotationExtents(),{ratioX:W,ratioY:te,offsetX:ue,offsetY:ce}=function wfe(i,t,e){let n=1,r=1,s=0,a=0;if(t<yu){const u=i,h=u+t,m=Math.cos(u),w=Math.sin(u),T=Math.cos(h),O=Math.sin(h),W=(Je,at,kt)=>Gx(Je,u,h,!0)?1:Math.max(at,at*e,kt,kt*e),te=(Je,at,kt)=>Gx(Je,u,h,!0)?-1:Math.min(at,at*e,kt,kt*e),ue=W(0,m,T),ce=W(Zc,w,O),Ne=te(fc,m,T),et=te(fc+Zc,w,O);n=(ue-Ne)/2,r=(ce-et)/2,s=-(ue+Ne)/2,a=-(ce+et)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:a}}(O,T,m),Je=Math.max(Math.min((r.width-u)/W,(r.height-u)/te)/2,0),at=Qz(this.options.radius,Je),Zt=(at-Math.max(at*m,0))/this._getVisibleDatasetWeightTotal();this.offsetX=ue*at,this.offsetY=ce*at,s.total=this.calculateTotal(),this.outerRadius=at-Zt*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Zt*w,0),this.updateElements(a,0,a.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,a=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*a/yu)}updateElements(e,n,r,s){const a="reset"===s,u=this.chart,h=u.chartArea,T=(h.left+h.right)/2,O=(h.top+h.bottom)/2,W=a&&u.options.animation.animateScale,te=W?0:this.innerRadius,ue=W?0:this.outerRadius,{sharedOptions:ce,includeOptions:Ne}=this._getSharedOptions(n,s);let Je,et=this._getRotation();for(Je=0;Je<n;++Je)et+=this._circumference(Je,a);for(Je=n;Je<n+r;++Je){const at=this._circumference(Je,a),kt=e[Je],Zt={x:T+this.offsetX,y:O+this.offsetY,startAngle:et,endAngle:et+at,circumference:at,outerRadius:ue,innerRadius:te};Ne&&(Zt.options=ce||this.resolveDataElementOptions(Je,kt.active?"active":s)),et+=at,this.updateElement(kt,Je,Zt,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s,r=0;for(s=0;s<n.length;s++){const a=e._parsed[s];null!==a&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(a))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?yu*(Math.abs(e)/n):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],a=Zx(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:a}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,a,u,h,m;if(!e)for(s=0,a=r.data.datasets.length;s<a;++s)if(r.isDatasetVisible(s)){u=r.getDatasetMeta(s),e=u.data,h=u.controller;break}if(!e)return 0;for(s=0,a=e.length;s<a;++s)m=h.resolveDataElementOptions(s),"inner"!==m.borderAlign&&(n=Math.max(n,m.borderWidth||0,m.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const a=this.resolveDataElementOptions(r);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Eo(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i.id="doughnut",i.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},i.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const u=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,lineWidth:u.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return Uu(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}},i})(),xfe=(()=>{class i extends zv{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:a}=n,u=this.chart._animationsDisabled;let{start:h,count:m}=dV(n,s,u);this._drawStart=h,this._drawCount=m,fV(n)&&(h=0,m=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=s;const w=this.resolveDatasetElementOptions(e);this.options.showLine||(w.borderWidth=0),w.segment=this.options.segment,this.updateElement(r,void 0,{animated:!u,options:w},e),this.updateElements(s,h,m,e)}updateElements(e,n,r,s){const a="reset"===s,{iScale:u,vScale:h,_stacked:m,_dataset:w}=this._cachedMeta,{sharedOptions:T,includeOptions:O}=this._getSharedOptions(n,s),W=u.axis,te=h.axis,{spanGaps:ue,segment:ce}=this.options,Ne=_C(ue)?ue:Number.POSITIVE_INFINITY,et=this.chart._animationsDisabled||a||"none"===s;let Je=n>0&&this.getParsed(n-1);for(let at=n;at<n+r;++at){const kt=e[at],Zt=this.getParsed(at),yn=et?kt:{},zt=Ll(Zt[te]),pn=yn[W]=u.getPixelForValue(Zt[W],at),Kn=yn[te]=a||zt?h.getBasePixel():h.getPixelForValue(m?this.applyStack(h,Zt,m):Zt[te],at);yn.skip=isNaN(pn)||isNaN(Kn)||zt,yn.stop=at>0&&Math.abs(Zt[W]-Je[W])>Ne,ce&&(yn.parsed=Zt,yn.raw=w.data[at]),O&&(yn.options=T||this.resolveDataElementOptions(at,kt.active?"active":s)),et||this.updateElement(kt,at,yn,s),Je=Zt}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const a=s[0].size(this.resolveDataElementOptions(0)),u=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,a,u)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i.id="line",i.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},i.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},i})(),Afe=(()=>{class i extends zv{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],a=Zx(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:a}}parseObjectData(e,n,r,s){return OV.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const a=this.getParsed(s).r;!isNaN(a)&&this.chart.getDataVisibility(s)&&(a<n.min&&(n.min=a),a>n.max&&(n.max=a))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),a=Math.max(s/2,0),h=(a-Math.max(r.cutoutPercentage?a/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-h*this.index,this.innerRadius=this.outerRadius-h}updateElements(e,n,r,s){const a="reset"===s,u=this.chart,m=u.options.animation,w=this._cachedMeta.rScale,T=w.xCenter,O=w.yCenter,W=w.getIndexAngle(0)-.5*fc;let ue,te=W;const ce=360/this.countVisibleElements();for(ue=0;ue<n;++ue)te+=this._computeAngle(ue,s,ce);for(ue=n;ue<n+r;ue++){const Ne=e[ue];let et=te,Je=te+this._computeAngle(ue,s,ce),at=u.getDataVisibility(ue)?w.getDistanceFromCenterForValue(this.getParsed(ue).r):0;te=Je,a&&(m.animateScale&&(at=0),m.animateRotate&&(et=Je=W));const kt={x:T,y:O,innerRadius:0,outerRadius:at,startAngle:et,endAngle:Je,options:this.resolveDataElementOptions(ue,Ne.active?"active":s)};this.updateElement(Ne,ue,kt,s)}}countVisibleElements(){let n=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?jm(this.resolveDataElementOptions(e,n).angle||r):0}}return i.id="polarArea",i.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const u=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,lineWidth:u.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},i})(),Ife=(()=>{class i extends lU{}return i.id="pie",i.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},i})(),Sfe=(()=>{class i extends zv{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return OV.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta,r=n.dataset,s=n.data||[],a=n.iScale.getLabels();if(r.points=s,"resize"!==e){const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:a.length===s.length,options:u},e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){const a=this._cachedMeta.rScale,u="reset"===s;for(let h=n;h<n+r;h++){const m=e[h],w=this.resolveDataElementOptions(h,m.active?"active":s),T=a.getPointPositionForValue(h,this.getParsed(h).r),O=u?a.xCenter:T.x,W=u?a.yCenter:T.y,te={x:O,y:W,angle:T.angle,skip:isNaN(O)||isNaN(W),options:w};this.updateElement(m,h,te,s)}}}return i.id="radar",i.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},i.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},i})();class $m{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return _C(this.x)&&_C(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}}$m.defaults={},$m.defaultRoutes=void 0;const uU={values:i=>Uu(i)?i:""+i,numeric(i,t,e){if(0===i)return"0";const n=this.chart.options.locale;let r,s=i;if(e.length>1){const m=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(m<1e-4||m>1e15)&&(r="scientific"),s=function Efe(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}(i,e)}const a=Qg(Math.abs(s)),u=Math.max(Math.min(-1*Math.floor(a),20),0),h={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),Zx(i,n,h)},logarithmic(i,t,e){if(0===i)return"0";const n=i/Math.pow(10,Math.floor(Qg(i)));return 1===n||2===n||5===n?uU.numeric.call(this,i,t,e):""}};var yS={formatters:uU};function bS(i,t,e,n,r){const s=Eo(n,0),a=Math.min(Eo(r,i.length),i.length);let h,m,w,u=0;for(e=Math.ceil(e),r&&(h=r-n,e=h/Math.floor(h/e)),w=s;w<0;)u++,w=Math.round(s+u*e);for(m=Math.max(s,0);m<a;m++)m===w&&(t.push(i[m]),u++,w=Math.round(s+u*e))}dl.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,t)=>t.lineWidth,tickColor:(i,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:yS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),dl.route("scale.ticks","color","","color"),dl.route("scale.grid","color","","borderColor"),dl.route("scale.grid","borderColor","","borderColor"),dl.route("scale.title","color","","color"),dl.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&"callback"!==i&&"parser"!==i,_indexable:i=>"borderDash"!==i&&"tickBorderDash"!==i}),dl.describe("scales",{_fallback:"scale"}),dl.describe("scale.ticks",{_scriptable:i=>"backdropPadding"!==i&&"callback"!==i,_indexable:i=>"backdropPadding"!==i});const cU=(i,t,e)=>"top"===t||"left"===t?i[t]+e:i[t]-e;function hU(i,t){const e=[],n=i.length/t,r=i.length;let s=0;for(;s<r;s+=n)e.push(i[Math.floor(s)]);return e}function Ofe(i,t,e){const n=i.ticks.length,r=Math.min(t,n-1),s=i._startPixel,a=i._endPixel,u=1e-6;let m,h=i.getPixelForTick(r);if(!(e&&(m=1===n?Math.max(h-s,a-h):0===t?(i.getPixelForTick(1)-h)/2:(h-i.getPixelForTick(r-1))/2,h+=r<t?m:-m,h<s-u||h>a+u)))return h}function Jx(i){return i.drawTicks?i.tickLength:0}function dU(i,t){if(!i.display)return 0;const e=rd(i.font,t),n=Af(i.padding);return(Uu(i.text)?i.text.length:1)*e.lineHeight+n.height}function zfe(i,t,e){let n=dP(i);return(e&&"right"!==t||!e&&"right"===t)&&(n=(i=>"left"===i?"right":"right"===i?"left":i)(n)),n}class U0 extends $m{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=Kg(t,Number.POSITIVE_INFINITY),e=Kg(e,Number.NEGATIVE_INFINITY),n=Kg(n,Number.POSITIVE_INFINITY),r=Kg(r,Number.NEGATIVE_INFINITY),{min:Kg(t,n),max:Kg(e,r),minDefined:dh(t),maxDefined:dh(e)}}getMinMax(t){let a,{min:e,max:n,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:n};const u=this.getMatchingVisibleMetas();for(let h=0,m=u.length;h<m;++h)a=u[h].controller.getMinMax(this,t),r||(e=Math.min(e,a.min)),s||(n=Math.max(n,a.max));return e=s&&e>n?n:e,n=r&&e>n?e:n,{min:Kg(e,Kg(n,e)),max:Kg(n,Kg(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Hu(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:s,ticks:a}=this.options,u=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function dde(i,t,e){const{min:n,max:r}=i,s=Qz(t,(r-n)/2),a=(u,h)=>e&&0===u?0:u+h;return{min:a(n,-Math.abs(s)),max:a(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?hU(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=function Tfe(i,t){const e=i.options.ticks,n=e.maxTicksLimit||function Mfe(i){const t=i.options.offset,e=i._tickSize();return Math.floor(Math.min(i._length/e+(t?0:1),i._maxLength/e))}(i),r=e.major.enabled?function Pfe(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}(t):[],s=r.length,a=r[0],u=r[s-1],h=[];if(s>n)return function Lfe(i,t,e,n){let a,r=0,s=e[0];for(n=Math.ceil(n),a=0;a<i.length;a++)a===s&&(t.push(i[a]),r++,s=e[r*n])}(t,h,r,s/n),h;const m=function Dfe(i,t,e){const n=function kfe(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}(i),r=t.length/e;if(!n)return Math.max(r,1);const s=function Ahe(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n==0&&(t.push(n),t.push(i/n));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(n);for(let a=0,u=s.length-1;a<u;a++){const h=s[a];if(h>r)return h}return Math.max(r,1)}(r,t,n);if(s>0){let w,T;const O=s>1?Math.round((u-a)/(s-1)):null;for(bS(t,h,m,Ll(O)?0:a-O,a),w=0,T=s-1;w<T;w++)bS(t,h,m,r[w],r[w+1]);return bS(t,h,m,u,Ll(O)?t.length:u+O),h}return bS(t,h,m),h}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,n,t=this.options.reverse;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Hu(this.options.afterUpdate,[this])}beforeSetDimensions(){Hu(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Hu(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Hu(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Hu(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.label=Hu(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){Hu(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Hu(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,r=e.minRotation||0,s=e.maxRotation;let u,h,m,a=r;if(!this._isVisible()||!e.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const w=this._getLabelSizes(),T=w.widest.width,O=w.highest.height,W=Cd(this.chart.width-T,0,this.maxWidth);u=t.offset?this.maxWidth/n:W/(n-1),T+6>u&&(u=W/(n-(t.offset?.5:1)),h=this.maxHeight-Jx(t.grid)-e.padding-dU(t.title,this.chart.options.font),m=Math.sqrt(T*T+O*O),a=uP(Math.min(Math.asin(Cd((w.highest.height+6)/u,-1,1)),Math.asin(Cd(h/m,-1,1))-Math.asin(Cd(O/m,-1,1)))),a=Math.max(r,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Hu(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Hu(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:s}}=this,a=this._isVisible(),u=this.isHorizontal();if(a){const h=dU(r,e.options.font);if(u?(t.width=this.maxWidth,t.height=Jx(s)+h):(t.height=this.maxHeight,t.width=Jx(s)+h),n.display&&this.ticks.length){const{first:m,last:w,widest:T,highest:O}=this._getLabelSizes(),W=2*n.padding,te=jm(this.labelRotation),ue=Math.cos(te),ce=Math.sin(te);u?t.height=Math.min(this.maxHeight,t.height+(n.mirror?0:ce*T.width+ue*O.height)+W):t.width=Math.min(this.maxWidth,t.width+(n.mirror?0:ue*T.width+ce*O.height)+W),this._calculatePadding(m,w,ce,ue)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:s,padding:a},position:u}=this.options,h=0!==this.labelRotation,m="top"!==u&&"x"===this.axis;if(this.isHorizontal()){const w=this.getPixelForTick(0)-this.left,T=this.right-this.getPixelForTick(this.ticks.length-1);let O=0,W=0;h?m?(O=r*t.width,W=n*e.height):(O=n*t.height,W=r*e.width):"start"===s?W=e.width:"end"===s?O=t.width:"inner"!==s&&(O=t.width/2,W=e.width/2),this.paddingLeft=Math.max((O-w+a)*this.width/(this.width-w),0),this.paddingRight=Math.max((W-T+a)*this.width/(this.width-T),0)}else{let w=e.height/2,T=t.height/2;"start"===s?(w=0,T=t.height):"end"===s&&(w=e.height,T=0),this.paddingTop=w+a,this.paddingBottom=T+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Hu(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Ll(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=hU(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:r}=this,s=[],a=[];let m,w,T,O,W,te,ue,ce,Ne,et,Je,u=0,h=0;for(m=0;m<e;++m){if(O=t[m].label,W=this._resolveTickFontOptions(m),n.font=te=W.string,ue=r[te]=r[te]||{data:{},gc:[]},ce=W.lineHeight,Ne=et=0,Ll(O)||Uu(O)){if(Uu(O))for(w=0,T=O.length;w<T;++w)Je=O[w],!Ll(Je)&&!Uu(Je)&&(Ne=fS(n,ue.data,ue.gc,Ne,Je),et+=ce)}else Ne=fS(n,ue.data,ue.gc,Ne,O),et=ce;s.push(Ne),a.push(et),u=Math.max(Ne,u),h=Math.max(et,h)}!function Ffe(i,t){fu(i,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(r,e);const at=s.indexOf(u),kt=a.indexOf(h),Zt=yn=>({width:s[yn]||0,height:a[yn]||0});return{first:Zt(0),last:Zt(e-1),widest:Zt(at),highest:Zt(kt),widths:s,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function Ehe(i){return Cd(i,-32768,32767)}(this._alignToPixels?O0(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function Bfe(i,t,e){return Sy(i,{tick:e,index:t,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=function Nfe(i,t){return Sy(i,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=jm(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,u=s?s.widest.width+a:0,h=s?s.highest.height+a:0;return this.isHorizontal()?h*n>u*r?u/n:h/r:h*r<u*n?h/n:u/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:s,position:a}=r,u=s.offset,h=this.isHorizontal(),w=this.ticks.length+(u?1:0),T=Jx(s),O=[],W=s.setContext(this.getContext()),te=W.drawBorder?W.borderWidth:0,ue=te/2,ce=function(Fi){return O0(n,Fi,te)};let Ne,et,Je,at,kt,Zt,yn,zt,pn,Kn,Bi,Ji;if("top"===a)Ne=ce(this.bottom),Zt=this.bottom-T,zt=Ne-ue,Kn=ce(t.top)+ue,Ji=t.bottom;else if("bottom"===a)Ne=ce(this.top),Kn=t.top,Ji=ce(t.bottom)-ue,Zt=Ne+ue,zt=this.top+T;else if("left"===a)Ne=ce(this.right),kt=this.right-T,yn=Ne-ue,pn=ce(t.left)+ue,Bi=t.right;else if("right"===a)Ne=ce(this.left),pn=t.left,Bi=ce(t.right)-ue,kt=Ne+ue,yn=this.left+T;else if("x"===e){if("center"===a)Ne=ce((t.top+t.bottom)/2+.5);else if(ol(a)){const Fi=Object.keys(a)[0];Ne=ce(this.chart.scales[Fi].getPixelForValue(a[Fi]))}Kn=t.top,Ji=t.bottom,Zt=Ne+ue,zt=Zt+T}else if("y"===e){if("center"===a)Ne=ce((t.left+t.right)/2);else if(ol(a)){const Fi=Object.keys(a)[0];Ne=ce(this.chart.scales[Fi].getPixelForValue(a[Fi]))}kt=Ne-ue,yn=kt-T,pn=t.left,Bi=t.right}const Vi=Eo(r.ticks.maxTicksLimit,w),bi=Math.max(1,Math.ceil(w/Vi));for(et=0;et<w;et+=bi){const Fi=s.setContext(this.getContext(et)),mi=Fi.lineWidth,zi=Fi.color,Oi=Fi.borderDash||[],_i=Fi.borderDashOffset,Ni=Fi.tickWidth,es=Fi.tickColor,Er=Fi.tickBorderDash||[],cs=Fi.tickBorderDashOffset;Je=Ofe(this,et,u),void 0!==Je&&(at=O0(n,Je,mi),h?kt=yn=pn=Bi=at:Zt=zt=Kn=Ji=at,O.push({tx1:kt,ty1:Zt,tx2:yn,ty2:zt,x1:pn,y1:Kn,x2:Bi,y2:Ji,width:mi,color:zi,borderDash:Oi,borderDashOffset:_i,tickWidth:Ni,tickColor:es,tickBorderDash:Er,tickBorderDashOffset:cs}))}return this._ticksLength=w,this._borderValue=Ne,O}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:s}=n,a=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:m,padding:w,mirror:T}=s,O=Jx(n.grid),W=O+w,te=T?-w:W,ue=-jm(this.labelRotation),ce=[];let Ne,et,Je,at,kt,Zt,yn,zt,pn,Kn,Bi,Ji,Vi="middle";if("top"===r)Zt=this.bottom-te,yn=this._getXAxisLabelAlignment();else if("bottom"===r)Zt=this.top+te,yn=this._getXAxisLabelAlignment();else if("left"===r){const Fi=this._getYAxisLabelAlignment(O);yn=Fi.textAlign,kt=Fi.x}else if("right"===r){const Fi=this._getYAxisLabelAlignment(O);yn=Fi.textAlign,kt=Fi.x}else if("x"===e){if("center"===r)Zt=(t.top+t.bottom)/2+W;else if(ol(r)){const Fi=Object.keys(r)[0];Zt=this.chart.scales[Fi].getPixelForValue(r[Fi])+W}yn=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)kt=(t.left+t.right)/2-W;else if(ol(r)){const Fi=Object.keys(r)[0];kt=this.chart.scales[Fi].getPixelForValue(r[Fi])}yn=this._getYAxisLabelAlignment(O).textAlign}"y"===e&&("start"===h?Vi="top":"end"===h&&(Vi="bottom"));const bi=this._getLabelSizes();for(Ne=0,et=u.length;Ne<et;++Ne){Je=u[Ne],at=Je.label;const Fi=s.setContext(this.getContext(Ne));zt=this.getPixelForTick(Ne)+s.labelOffset,pn=this._resolveTickFontOptions(Ne),Kn=pn.lineHeight,Bi=Uu(at)?at.length:1;const mi=Bi/2,zi=Fi.color,Oi=Fi.textStrokeColor,_i=Fi.textStrokeWidth;let es,Ni=yn;if(a?(kt=zt,"inner"===yn&&(Ni=Ne===et-1?this.options.reverse?"left":"right":0===Ne?this.options.reverse?"right":"left":"center"),Ji="top"===r?"near"===m||0!==ue?-Bi*Kn+Kn/2:"center"===m?-bi.highest.height/2-mi*Kn+Kn:Kn/2-bi.highest.height:"near"===m||0!==ue?Kn/2:"center"===m?bi.highest.height/2-mi*Kn:bi.highest.height-Bi*Kn,T&&(Ji*=-1)):(Zt=zt,Ji=(1-Bi)*Kn/2),Fi.showLabelBackdrop){const Er=Af(Fi.backdropPadding),cs=bi.heights[Ne],ys=bi.widths[Ne];let Fa=Zt+Ji-Er.top,Dr=kt-Er.left;switch(Vi){case"middle":Fa-=cs/2;break;case"bottom":Fa-=cs}switch(yn){case"center":Dr-=ys/2;break;case"right":Dr-=ys}es={left:Dr,top:Fa,width:ys+Er.width,height:cs+Er.height,color:Fi.backdropColor}}ce.push({rotation:ue,label:at,font:pn,color:zi,strokeColor:Oi,strokeWidth:_i,textOffset:Ji,textAlign:Ni,textBaseline:Vi,translation:[kt,Zt],backdrop:es})}return ce}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-jm(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,u=t+s,h=this._getLabelSizes().widest.width;let m,w;return"left"===e?r?(w=this.right+s,"near"===n?m="left":"center"===n?(m="center",w+=h/2):(m="right",w+=h)):(w=this.right-u,"near"===n?m="right":"center"===n?(m="center",w-=h/2):(m="left",w=this.left)):"right"===e?r?(w=this.left+s,"near"===n?m="right":"center"===n?(m="center",w-=h/2):(m="left",w-=h)):(w=this.left+u,"near"===n?m="left":"center"===n?(m="center",w+=h/2):(m="right",w=this.right)):m="right",{textAlign:m,x:w}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const u=(h,m,w)=>{!w.width||!w.color||(n.save(),n.lineWidth=w.width,n.strokeStyle=w.color,n.setLineDash(w.borderDash||[]),n.lineDashOffset=w.borderDashOffset,n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(m.x,m.y),n.stroke(),n.restore())};if(e.display)for(s=0,a=r.length;s<a;++s){const h=r[s];e.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),e.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,r=n.setContext(this.getContext()),s=n.drawBorder?r.borderWidth:0;if(!s)return;const a=n.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,m,w,T;this.isHorizontal()?(h=O0(t,this.left,s)-s/2,m=O0(t,this.right,a)+a/2,w=T=u):(w=O0(t,this.top,s)-s/2,T=O0(t,this.bottom,a)+a/2,h=m=u),e.save(),e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(h,w),e.lineTo(m,T),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&pS(n,r);const s=this._labelItems||(this._labelItems=this._computeLabelItems(t));let a,u;for(a=0,u=s.length;a<u;++a){const h=s[a],m=h.font,w=h.label;h.backdrop&&(n.fillStyle=h.backdrop.color,n.fillRect(h.backdrop.left,h.backdrop.top,h.backdrop.width,h.backdrop.height)),F0(n,w,0,h.textOffset,m,h)}r&&gS(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const s=rd(n.font),a=Af(n.padding),u=n.align;let h=s.lineHeight/2;"bottom"===e||"center"===e||ol(e)?(h+=a.bottom,Uu(n.text)&&(h+=s.lineHeight*(n.text.length-1))):h+=a.top;const{titleX:m,titleY:w,maxWidth:T,rotation:O}=function Vfe(i,t,e,n){const{top:r,left:s,bottom:a,right:u,chart:h}=i,{chartArea:m,scales:w}=h;let O,W,te,T=0;const ue=a-r,ce=u-s;if(i.isHorizontal()){if(W=xf(n,s,u),ol(e)){const Ne=Object.keys(e)[0];te=w[Ne].getPixelForValue(e[Ne])+ue-t}else te="center"===e?(m.bottom+m.top)/2+ue-t:cU(i,e,t);O=u-s}else{if(ol(e)){const Ne=Object.keys(e)[0];W=w[Ne].getPixelForValue(e[Ne])-ce+t}else W="center"===e?(m.left+m.right)/2-ce+t:cU(i,e,t);te=xf(n,a,r),T="left"===e?-Zc:Zc}return{titleX:W,titleY:te,maxWidth:O,rotation:T}}(this,h,e,u);F0(t,n.text,0,0,s,{color:n.color,maxWidth:T,rotation:O,textAlign:zfe(u,e,r),textBaseline:"middle",translation:[m,w]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Eo(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===U0.prototype.draw?[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]:[{z:e,draw:r=>{this.draw(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,a;for(s=0,a=e.length;s<a;++s){const u=e[s];u[n]===this.id&&(!t||u.type===t)&&r.push(u)}return r}_resolveTickFontOptions(t){return rd(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class CS{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function Gfe(i){return"id"in i&&"defaults"in i})(e)&&(n=this.register(e));const r=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function Ufe(i,t,e){const n=zx(Object.create(null),[e?dl.get(e):{},dl.get(t),i.defaults]);dl.set(t,n),i.defaultRoutes&&function Hfe(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),r=n.pop(),s=[i].concat(n).join("."),a=t[e].split("."),u=a.pop(),h=a.join(".");dl.route(s,r,h,u)})}(t,i.defaultRoutes),i.descriptors&&dl.describe(t,i.descriptors)}(t,a,n),this.override&&dl.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in dl[r]&&(delete dl[r][n],this.override&&delete R0[n])}}var Vv=new class Wfe{constructor(){this.controllers=new CS(zv,"datasets",!0),this.elements=new CS($m,"elements"),this.plugins=new CS(Object,"plugins"),this.scales=new CS(U0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{const s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):fu(r,a=>{const u=n||this._getRegistryForType(a);this._exec(t,u,a)})})}_exec(t,e,n){const r=lP(t);Hu(n["before"+r],[],n),e[t](n),Hu(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}},jfe=Object.freeze({__proto__:null,BarController:bfe,BubbleController:Cfe,DoughnutController:lU,LineController:xfe,PolarAreaController:Afe,PieController:Ife,RadarController:Sfe,ScatterController:(()=>{class i extends zv{update(e){const n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled;let{start:a,count:u}=dV(n,r,s);if(this._drawStart=a,this._drawCount=u,fV(n)&&(a=0,u=r.length),this.options.showLine){const{dataset:h,_dataset:m}=n;h._chart=this.chart,h._datasetIndex=this.index,h._decimated=!!m._decimated,h.points=r;const w=this.resolveDatasetElementOptions(e);w.segment=this.options.segment,this.updateElement(h,void 0,{animated:!s,options:w},e)}this.updateElements(r,a,u,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=Vv.getElement("line")),super.addElements()}updateElements(e,n,r,s){const a="reset"===s,{iScale:u,vScale:h,_stacked:m,_dataset:w}=this._cachedMeta,T=this.resolveDataElementOptions(n,s),O=this.getSharedOptions(T),W=this.includeOptions(s,O),te=u.axis,ue=h.axis,{spanGaps:ce,segment:Ne}=this.options,et=_C(ce)?ce:Number.POSITIVE_INFINITY,Je=this.chart._animationsDisabled||a||"none"===s;let at=n>0&&this.getParsed(n-1);for(let kt=n;kt<n+r;++kt){const Zt=e[kt],yn=this.getParsed(kt),zt=Je?Zt:{},pn=Ll(yn[ue]),Kn=zt[te]=u.getPixelForValue(yn[te],kt),Bi=zt[ue]=a||pn?h.getBasePixel():h.getPixelForValue(m?this.applyStack(h,yn,m):yn[ue],kt);zt.skip=isNaN(Kn)||isNaN(Bi)||pn,zt.stop=kt>0&&Math.abs(yn[te]-at[te])>et,Ne&&(zt.parsed=yn,zt.raw=w.data[kt]),W&&(zt.options=O||this.resolveDataElementOptions(kt,Zt.active?"active":s)),Je||this.updateElement(Zt,kt,zt,s),at=yn}this.updateSharedOptions(O,s,T)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let h=0;for(let m=n.length-1;m>=0;--m)h=Math.max(h,n[m].size(this.resolveDataElementOptions(m))/2);return h>0&&h}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;const a=n[0].size(this.resolveDataElementOptions(0)),u=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,a,u)/2}}return i.id="scatter",i.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},i.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},i})()});function H0(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var $fe={_date:(()=>{class i{constructor(e){this.options=e||{}}init(e){}formats(){return H0()}parse(e,n){return H0()}format(e,n){return H0()}add(e,n,r){return H0()}diff(e,n,r){return H0()}startOf(e,n,r){return H0()}endOf(e,n){return H0()}}return i.override=function(t){Object.assign(i.prototype,t)},i})()};function qfe(i,t,e,n){const{controller:r,data:s,_sorted:a}=i,u=r._cachedMeta.iScale;if(u&&t===u.axis&&"r"!==t&&a&&s.length){const h=u._reversePixels?The:L_;if(!n)return h(s,t,e);if(r._sharedOptions){const m=s[0],w="function"==typeof m.getRange&&m.getRange(t);if(w){const T=h(s,t,e-w),O=h(s,t,e+w);return{lo:T.lo,hi:O.hi}}}}return{lo:0,hi:s.length-1}}function e1(i,t,e,n,r){const s=i.getSortedVisibleDatasetMetas(),a=e[t];for(let u=0,h=s.length;u<h;++u){const{index:m,data:w}=s[u],{lo:T,hi:O}=qfe(s[u],t,a,r);for(let W=T;W<=O;++W){const te=w[W];te.skip||n(te,m,W)}}}function PP(i,t,e,n,r){const s=[];return!r&&!i.isPointInArea(t)||e1(i,e,t,function(u,h,m){!r&&!Xx(u,i.chartArea,0)||u.inRange(t.x,t.y,n)&&s.push({element:u,datasetIndex:h,index:m})},!0),s}function LP(i,t,e,n,r,s){return s||i.isPointInArea(t)?"r"!==e||n?function Kfe(i,t,e,n,r,s){let a=[];const u=function Xfe(i){const t=-1!==i.indexOf("x"),e=-1!==i.indexOf("y");return function(n,r){const s=t?Math.abs(n.x-r.x):0,a=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}(e);let h=Number.POSITIVE_INFINITY;return e1(i,e,t,function m(w,T,O){const W=w.inRange(t.x,t.y,r);if(n&&!W)return;const te=w.getCenterPoint(r);if(!s&&!i.isPointInArea(te)&&!W)return;const ce=u(t,te);ce<h?(a=[{element:w,datasetIndex:T,index:O}],h=ce):ce===h&&a.push({element:w,datasetIndex:T,index:O})}),a}(i,t,e,n,r,s):function Yfe(i,t,e,n){let r=[];return e1(i,e,t,function s(a,u,h){const{startAngle:m,endAngle:w}=a.getProps(["startAngle","endAngle"],n),{angle:T}=aV(a,{x:t.x,y:t.y});Gx(T,m,w)&&r.push({element:a,datasetIndex:u,index:h})}),r}(i,t,e,r):[]}function fU(i,t,e,n,r){const s=[],a="x"===e?"inXRange":"inYRange";let u=!1;return e1(i,e,t,(h,m,w)=>{h[a](t[e],r)&&(s.push({element:h,datasetIndex:m,index:w}),u=u||h.inRange(t.x,t.y,r))}),n&&!u?[]:s}var Zfe={evaluateInteractionItems:e1,modes:{index(i,t,e,n){const r=z0(t,i),s=e.axis||"x",a=e.includeInvisible||!1,u=e.intersect?PP(i,r,s,n,a):LP(i,r,s,!1,n,a),h=[];return u.length?(i.getSortedVisibleDatasetMetas().forEach(m=>{const w=u[0].index,T=m.data[w];T&&!T.skip&&h.push({element:T,datasetIndex:m.index,index:w})}),h):[]},dataset(i,t,e,n){const r=z0(t,i),s=e.axis||"xy",a=e.includeInvisible||!1;let u=e.intersect?PP(i,r,s,n,a):LP(i,r,s,!1,n,a);if(u.length>0){const h=u[0].datasetIndex,m=i.getDatasetMeta(h).data;u=[];for(let w=0;w<m.length;++w)u.push({element:m[w],datasetIndex:h,index:w})}return u},point:(i,t,e,n)=>PP(i,z0(t,i),e.axis||"xy",n,e.includeInvisible||!1),nearest:(i,t,e,n)=>LP(i,z0(t,i),e.axis||"xy",e.intersect,n,e.includeInvisible||!1),x:(i,t,e,n)=>fU(i,z0(t,i),"x",e.intersect,n),y:(i,t,e,n)=>fU(i,z0(t,i),"y",e.intersect,n)}};const pU=["left","top","right","bottom"];function t1(i,t){return i.filter(e=>e.pos===t)}function gU(i,t){return i.filter(e=>-1===pU.indexOf(e.pos)&&e.box.axis===t)}function n1(i,t){return i.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function mU(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function vU(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function npe(i,t,e,n){const{pos:r,box:s}=e,a=i.maxPadding;if(!ol(r)){e.size&&(i[r]-=e.size);const T=n[e.stack]||{size:0,count:1};T.size=Math.max(T.size,e.horizontal?s.height:s.width),e.size=T.size/T.count,i[r]+=e.size}s.getPadding&&vU(a,s.getPadding());const u=Math.max(0,t.outerWidth-mU(a,i,"left","right")),h=Math.max(0,t.outerHeight-mU(a,i,"top","bottom")),m=u!==i.w,w=h!==i.h;return i.w=u,i.h=h,e.horizontal?{same:m,other:w}:{same:w,other:m}}function rpe(i,t){const e=t.maxPadding;return function n(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}(i?["left","right"]:["top","bottom"])}function r1(i,t,e,n){const r=[];let s,a,u,h,m,w;for(s=0,a=i.length,m=0;s<a;++s){u=i[s],h=u.box,h.update(u.width||t.w,u.height||t.h,rpe(u.horizontal,t));const{same:T,other:O}=npe(t,e,u,n);m|=T&&r.length,w=w||O,h.fullSize||r.push(u)}return m&&r1(r,t,e,n)||w}function wS(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function _U(i,t,e,n){const r=e.padding;let{x:s,y:a}=t;for(const u of i){const h=u.box,m=n[u.stack]||{count:1,placed:0,weight:1},w=u.stackWeight/m.weight||1;if(u.horizontal){const T=t.w*w,O=m.size||h.height;Zg(m.start)&&(a=m.start),h.fullSize?wS(h,r.left,a,e.outerWidth-r.right-r.left,O):wS(h,t.left+m.placed,a,T,O),m.start=a,m.placed+=T,a=h.bottom}else{const T=t.h*w,O=m.size||h.width;Zg(m.start)&&(s=m.start),h.fullSize?wS(h,s,r.top,O,e.outerHeight-r.bottom-r.top):wS(h,s,t.top+m.placed,O,T),m.start=s,m.placed+=T,s=h.right}}t.x=s,t.y=a}dl.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var If={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;-1!==e&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const r=Af(i.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(e-r.height,0),u=function tpe(i){const t=function Qfe(i){const t=[];let e,n,r,s,a,u;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],({position:s,options:{stack:a,stackWeight:u=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:u});return t}(i),e=n1(t.filter(m=>m.box.fullSize),!0),n=n1(t1(t,"left"),!0),r=n1(t1(t,"right")),s=n1(t1(t,"top"),!0),a=n1(t1(t,"bottom")),u=gU(t,"x"),h=gU(t,"y");return{fullSize:e,leftAndTop:n.concat(s),rightAndBottom:r.concat(h).concat(a).concat(u),chartArea:t1(t,"chartArea"),vertical:n.concat(r).concat(h),horizontal:s.concat(a).concat(u)}}(i.boxes),h=u.vertical,m=u.horizontal;fu(i.boxes,ue=>{"function"==typeof ue.beforeLayout&&ue.beforeLayout()});const w=h.reduce((ue,ce)=>ce.box.options&&!1===ce.box.options.display?ue:ue+1,0)||1,T=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/w,hBoxMaxHeight:a/2}),O=Object.assign({},r);vU(O,Af(n));const W=Object.assign({maxPadding:O,w:s,h:a,x:r.left,y:r.top},r),te=function epe(i,t){const e=function Jfe(i){const t={};for(const e of i){const{stack:n,pos:r,stackWeight:s}=e;if(!n||!pU.includes(r))continue;const a=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let s,a,u;for(s=0,a=i.length;s<a;++s){u=i[s];const{fullSize:h}=u.box,m=e[u.stack],w=m&&u.stackWeight/m.weight;u.horizontal?(u.width=w?w*n:h&&t.availableWidth,u.height=r):(u.width=n,u.height=w?w*r:h&&t.availableHeight)}return e}(h.concat(m),T);r1(u.fullSize,W,T,te),r1(h,W,T,te),r1(m,W,T,te)&&r1(h,W,T,te),function ipe(i){const t=i.maxPadding;function e(n){const r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}(W),_U(u.leftAndTop,W,T,te),W.x+=W.w,W.y+=W.h,_U(u.rightAndBottom,W,T,te),i.chartArea={left:W.left,top:W.top,right:W.left+W.w,bottom:W.top+W.h,height:W.h,width:W.w},fu(u.chartArea,ue=>{const ce=ue.box;Object.assign(ce,i.chartArea),ce.update(W.w,W.h,{left:0,top:0,right:0,bottom:0})})}};class yU{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class spe extends yU{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const xS="$chartjs",ape={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bU=i=>null===i||""===i,CU=!!Ode&&{passive:!0};function upe(i,t,e){i.canvas.removeEventListener(t,e,CU)}function AS(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function hpe(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let a=!1;for(const u of s)a=a||AS(u.addedNodes,n),a=a&&!AS(u.removedNodes,n);a&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function dpe(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let a=!1;for(const u of s)a=a||AS(u.removedNodes,n),a=a&&!AS(u.addedNodes,n);a&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const s1=new Map;let wU=0;function xU(){const i=window.devicePixelRatio;i!==wU&&(wU=i,s1.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function gpe(i,t,e){const n=i.canvas,r=n&&SP(n);if(!r)return;const s=hV((u,h)=>{const m=r.clientWidth;e(u,h),m<r.clientWidth&&e()},window),a=new ResizeObserver(u=>{const h=u[0],m=h.contentRect.width,w=h.contentRect.height;0===m&&0===w||s(m,w)});return a.observe(r),function fpe(i,t){s1.size||window.addEventListener("resize",xU),s1.set(i,t)}(i,s),a}function kP(i,t,e){e&&e.disconnect(),"resize"===t&&function ppe(i){s1.delete(i),s1.size||window.removeEventListener("resize",xU)}(i)}function mpe(i,t,e){const n=i.canvas,r=hV(s=>{null!==i.ctx&&e(function cpe(i,t){const e=ape[i.type]||i.type,{x:n,y:r}=z0(i,t);return{type:e,chart:t,native:i,x:void 0!==n?n:null,y:void 0!==r?r:null}}(s,i))},i,s=>{const a=s[0];return[a,a.offsetX,a.offsetY]});return function lpe(i,t,e){i.addEventListener(t,e,CU)}(n,t,r),r}class vpe extends yU{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function ope(i,t){const e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[xS]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",bU(r)){const s=zV(i,"width");void 0!==s&&(i.width=s)}if(bU(n))if(""===i.style.height)i.height=i.width/(t||2);else{const s=zV(i,"height");void 0!==s&&(i.height=s)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[xS])return!1;const n=e[xS].initial;["height","width"].forEach(s=>{const a=n[s];Ll(a)?e.removeAttribute(s):e.setAttribute(s,a)});const r=n.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[xS],!0}addEventListener(t,e,n){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:hpe,detach:dpe,resize:gpe}[e]||mpe)(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];r&&(({attach:kP,detach:kP,resize:kP}[e]||upe)(t,e,r),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return function Rde(i,t,e,n){const r=_S(i),s=B0(r,"margin"),a=vS(r.maxWidth,i,"clientWidth")||oS,u=vS(r.maxHeight,i,"clientHeight")||oS,h=function kde(i,t,e){let n,r;if(void 0===t||void 0===e){const s=SP(i);if(s){const a=s.getBoundingClientRect(),u=_S(s),h=B0(u,"border","width"),m=B0(u,"padding");t=a.width-m.width-h.width,e=a.height-m.height-h.height,n=vS(u.maxWidth,s,"clientWidth"),r=vS(u.maxHeight,s,"clientHeight")}else t=i.clientWidth,e=i.clientHeight}return{width:t,height:e,maxWidth:n||oS,maxHeight:r||oS}}(i,t,e);let{width:m,height:w}=h;if("content-box"===r.boxSizing){const T=B0(r,"border","width"),O=B0(r,"padding");m-=O.width+T.width,w-=O.height+T.height}return m=Math.max(0,m-s.width),w=Math.max(0,n?Math.floor(m/n):w-s.height),m=EP(Math.min(m,a,h.maxWidth)),w=EP(Math.min(w,u,h.maxHeight)),m&&!w&&(w=EP(m/2)),{width:m,height:w}}(t,e,n,r)}isAttached(t){const e=SP(t);return!(!e||!e.isConnected)}}class ype{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(s,t,e,n);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,n,r){r=r||{};for(const s of t){const a=s.plugin;if(!1===Hu(a[n],[e,r,s.options],a)&&r.cancelable)return!1}return!0}invalidate(){Ll(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=Eo(n.options&&n.options.plugins,{}),s=function bpe(i){const t={},e=[],n=Object.keys(Vv.plugins.items);for(let s=0;s<n.length;s++)e.push(Vv.getPlugin(n[s]));const r=i.plugins||[];for(let s=0;s<r.length;s++){const a=r[s];-1===e.indexOf(a)&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}(n);return!1!==r||e?function wpe(i,{plugins:t,localIds:e},n,r){const s=[],a=i.getContext();for(const u of t){const h=u.id,m=Cpe(n[h],r);null!==m&&s.push({plugin:u,options:xpe(i.config,{plugin:u,local:e[h]},m,a)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(s,a)=>s.filter(u=>!a.some(h=>u.plugin.id===h.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function Cpe(i,t){return t||!1!==i?!0===i?{}:i:null}function xpe(i,{plugin:t,local:e},n,r){const s=i.pluginScopeKeys(t),a=i.getOptionScopes(n,s);return e&&t.defaults&&a.push(t.defaults),i.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function RP(i,t){return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||(dl.datasets[i]||{}).indexAxis||"x"}function OP(i,t){return"x"===i||"y"===i?i:t.axis||function Spe(i){return"top"===i||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0}(t.position)||i.charAt(0).toLowerCase()}function AU(i){const t=i.options||(i.options={});t.plugins=Eo(t.plugins,{}),t.scales=function Epe(i,t){const e=R0[i.type]||{scales:{}},n=t.scales||{},r=RP(i.type,t),s=Object.create(null),a=Object.create(null);return Object.keys(n).forEach(u=>{const h=n[u];if(!ol(h))return console.error(`Invalid scale configuration for scale: ${u}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const m=OP(u,h),w=function Ipe(i,t){return i===t?"_index_":"_value_"}(m,r),T=e.scales||{};s[m]=s[m]||u,a[u]=Vx(Object.create(null),[{axis:m},h,T[m],T[w]])}),i.data.datasets.forEach(u=>{const h=u.type||i.type,m=u.indexAxis||RP(h,t),T=(R0[h]||{}).scales||{};Object.keys(T).forEach(O=>{const W=function Ape(i,t){let e=i;return"_index_"===i?e=t:"_value_"===i&&(e="x"===t?"y":"x"),e}(O,m),te=u[W+"AxisID"]||s[W]||W;a[te]=a[te]||Object.create(null),Vx(a[te],[{axis:W},n[te],T[O]])})}),Object.keys(a).forEach(u=>{const h=a[u];Vx(h,[dl.scales[h.type],dl.scale])}),a}(i,t)}function IU(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}const SU=new Map,EU=new Set;function IS(i,t){let e=SU.get(i);return e||(e=t(),SU.set(i,e),EU.add(e)),e}const a1=(i,t,e)=>{const n=wy(t,e);void 0!==n&&i.add(n)};class Mpe{constructor(t){this._config=function Tpe(i){return(i=i||{}).data=IU(i.data),AU(i),i}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=IU(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),AU(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return IS(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return IS(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return IS(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return IS(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:s}=this,a=this._cachedScopes(t,n),u=a.get(e);if(u)return u;const h=new Set;e.forEach(w=>{t&&(h.add(t),w.forEach(T=>a1(h,t,T))),w.forEach(T=>a1(h,r,T)),w.forEach(T=>a1(h,R0[s]||{},T)),w.forEach(T=>a1(h,dl,T)),w.forEach(T=>a1(h,yP,T))});const m=Array.from(h);return 0===m.length&&m.push(Object.create(null)),EU.has(e)&&a.set(e,m),m}chartOptionScopes(){const{options:t,type:e}=this;return[t,R0[e]||{},dl.datasets[e]||{},{type:e},dl,yP]}resolveNamedOptions(t,e,n,r=[""]){const s={$shared:!0},{resolver:a,subPrefixes:u}=TU(this._resolverCache,t,r);let h=a;(function Ppe(i,t){const{isScriptable:e,isIndexable:n}=MV(i);for(const r of t){const s=e(r),a=n(r),u=(a||s)&&i[r];if(s&&(xy(u)||Dpe(u))||a&&Uu(u))return!0}return!1})(a,e)&&(s.$shared=!1,h=bC(a,n=xy(n)?n():n,this.createResolver(t,n,u)));for(const m of e)s[m]=h[m];return s}createResolver(t,e,n=[""],r){const{resolver:s}=TU(this._resolverCache,t,n);return ol(e)?bC(s,e,void 0,r):s}}function TU(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const r=e.join();let s=n.get(r);return s||(s={resolver:xP(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},n.set(r,s)),s}const Dpe=i=>ol(i)&&Object.getOwnPropertyNames(i).reduce((t,e)=>t||xy(i[e]),!1),kpe=["top","bottom","left","right","chartArea"];function MU(i,t){return"top"===i||"bottom"===i||-1===kpe.indexOf(i)&&"x"===t}function DU(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function PU(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Hu(e&&e.onComplete,[i],t)}function Rpe(i){const t=i.chart,e=t.options.animation;Hu(e&&e.onProgress,[i],t)}function LU(i){return NV()&&"string"==typeof i?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const SS={},kU=i=>{const t=LU(i);return Object.values(SS).filter(e=>e.canvas===t).pop()};function Ope(i,t,e){const n=Object.keys(i);for(const r of n){const s=+r;if(s>=t){const a=i[r];delete i[r],(e>0||s>t)&&(i[s+e]=a)}}}class ES{constructor(t,e){const n=this.config=new Mpe(e),r=LU(t),s=kU(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function _pe(i){return!NV()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?spe:vpe}(r)),this.platform.updateConfig(n);const u=this.platform.acquireContext(r,a.aspectRatio),h=u&&u.canvas,m=h&&h.height,w=h&&h.width;this.id=ghe(),this.ctx=u,this.canvas=h,this.width=w,this.height=m,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ype,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Phe(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}(T=>this.update(T),a.resizeDelay||0),this._dataChanges=[],SS[this.id]=this,u&&h?(R_.listen(this,"complete",PU),R_.listen(this,"progress",Rpe),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:s}=this;return Ll(t)?e&&s?s:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():BV(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return SV(this.canvas,this.ctx),this}stop(){return R_.stop(this),this}resize(t,e){R_.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,a=this.platform.getMaximumSize(this.canvas,t,e,n.maintainAspectRatio&&this.aspectRatio),u=n.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,BV(this,u,!0)&&(this.notifyPlugins("resize",{size:a}),Hu(n.onResize,[this,a],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){fu(this.options.scales||{},(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((a,u)=>(a[u]=!1,a),{});let s=[];e&&(s=s.concat(Object.keys(e).map(a=>{const u=e[a],h=OP(a,u),m="r"===h,w="x"===h;return{options:u,dposition:m?"chartArea":w?"bottom":"left",dtype:m?"radialLinear":w?"category":"linear"}}))),fu(s,a=>{const u=a.options,h=u.id,m=OP(h,u),w=Eo(u.type,a.dtype);(void 0===u.position||MU(u.position,m)!==MU(a.dposition))&&(u.position=a.dposition),r[h]=!0;let T=null;h in n&&n[h].type===w?T=n[h]:(T=new(Vv.getScale(w))({id:h,type:w,ctx:this.ctx,chart:this}),n[T.id]=T),T.init(u,t)}),fu(r,(a,u)=>{a||delete n[u]}),fu(n,a=>{If.configure(this,a,a.options),If.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((r,s)=>r.index-s.index),n>e){for(let r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(DU("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,r)=>{0===e.filter(s=>s===n._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const s=e[n];let a=this.getDatasetMeta(n);const u=s.type||this.config.type;if(a.type&&a.type!==u&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=u,a.indexAxis=s.indexAxis||RP(u,this.options),a.order=s.order||0,a.index=n,a.label=""+s.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const h=Vv.getController(u),{datasetElementType:m,dataElementType:w}=dl.datasets[u];Object.assign(h.prototype,{dataElementType:Vv.getElement(w),datasetElementType:m&&Vv.getElement(m)}),a.controller=new h(this,n),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){fu(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let m=0,w=this.data.datasets.length;m<w;m++){const{controller:T}=this.getDatasetMeta(m),O=!r&&-1===s.indexOf(T);T.buildOrUpdateElements(O),a=Math.max(+T.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||fu(s,m=>{m.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(DU("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){fu(this.scales,t=>{If.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!tV(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of e)Ope(t,r,"_removeElements"===n?-s:s)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=s=>new Set(t.filter(a=>a[0]===s).map((a,u)=>u+","+a.splice(1).join(","))),r=n(0);for(let s=1;s<e;s++)if(!tV(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;If.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],fu(this.boxes,r=>{n&&"chartArea"===r.position||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,xy(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(R_.has(this)?this.attached&&!R_.running(this)&&R_.start(this):(this.draw(),PU({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,s;for(r=0,s=e.length;r<s;++r){const a=e[r];(!t||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,s=this.chartArea,a={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(r&&pS(e,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?this.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?this.height:s.bottom+n.bottom}),t.controller.draw(),r&&gS(e),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Xx(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const s=Zfe.modes[e];return"function"==typeof s?s(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Sy(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,r);Zg(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),a.update(s,{visible:n}),this.update(u=>u.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),R_.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),SV(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete SS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(s,a)=>{e.addEventListener(this,s,a),t[s]=a},r=(s,a,u)=>{s.offsetX=a,s.offsetY=u,this._eventHandler(s)};fu(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(h,m)=>{e.addEventListener(this,h,m),t[h]=m},r=(h,m)=>{t[h]&&(e.removeEventListener(this,h,m),delete t[h])},s=(h,m)=>{this.canvas&&this.resize(h,m)};let a;const u=()=>{r("attach",u),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",u)},e.isAttached(this.canvas)?u():a()}unbindEvents(){fu(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},fu(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let s,a,u,h;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),u=0,h=t.length;u<h;++u){a=t[u];const m=a&&this.getDatasetMeta(a.datasetIndex).controller;m&&m[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:s,index:a})=>{const u=this.getDatasetMeta(s);if(!u)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:u.data[a],index:a}});!sS(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const r=this.options.hover,s=(h,m)=>h.filter(w=>!m.some(T=>w.datasetIndex===T.datasetIndex&&w.index===T.index)),a=s(e,t),u=n?t:s(t,e);a.length&&this.updateHoverStyle(a,r.mode,!1),u.length&&r.mode&&this.updateHoverStyle(u,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=a=>(a.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:s}=this,u=this._getActiveElements(t,r,n,e),h=function Che(i){return"mouseup"===i.type||"click"===i.type||"contextmenu"===i.type}(t),m=function Fpe(i,t,e,n){return e&&"mouseout"!==i.type?n?t:i:null}(t,this._lastEvent,n,h);n&&(this._lastEvent=null,Hu(s.onHover,[t,u,this],this),h&&Hu(s.onClick,[t,u,this],this));const w=!sS(u,r);return(w||e)&&(this._active=u,this._updateHoverStyles(u,r,e)),this._lastEvent=m,w}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}const RU=()=>fu(ES.instances,i=>i._plugins.invalidate()),Ey=!0;function OU(i,t,e){const{startAngle:n,pixelMargin:r,x:s,y:a,outerRadius:u,innerRadius:h}=t;let m=r/u;i.beginPath(),i.arc(s,a,u,n-m,e+m),h>r?(m=r/h,i.arc(s,a,h,e+m,n-m,!0)):i.arc(s,a,r,e+Zc,n-Zc),i.closePath(),i.clip()}function xC(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function FP(i,t,e,n,r,s){const{x:a,y:u,startAngle:h,pixelMargin:m,innerRadius:w}=t,T=Math.max(t.outerRadius+n+e-m,0),O=w>0?w+n+e+m:0;let W=0;const te=r-h;if(n){const zi=((w>0?w-n:0)+(T>0?T-n:0))/2;W=(te-(0!==zi?te*zi/(zi+n):te))/2}const ce=(te-Math.max(.001,te*T-e/fc)/T)/2,Ne=h+ce+W,et=r-ce-W,{outerStart:Je,outerEnd:at,innerStart:kt,innerEnd:Zt}=function Bpe(i,t,e,n){const r=function Npe(i){return wP(i,["outerStart","outerEnd","innerStart","innerEnd"])}(i.options.borderRadius),s=(e-t)/2,a=Math.min(s,n*t/2),u=h=>{const m=(e-Math.min(s,h))*n/2;return Cd(h,0,Math.min(s,m))};return{outerStart:u(r.outerStart),outerEnd:u(r.outerEnd),innerStart:Cd(r.innerStart,0,a),innerEnd:Cd(r.innerEnd,0,a)}}(t,O,T,et-Ne),yn=T-Je,zt=T-at,pn=Ne+Je/yn,Kn=et-at/zt,Bi=O+kt,Ji=O+Zt,Vi=Ne+kt/Bi,bi=et-Zt/Ji;if(i.beginPath(),s){if(i.arc(a,u,T,pn,Kn),at>0){const zi=xC(zt,Kn,a,u);i.arc(zi.x,zi.y,at,Kn,et+Zc)}const Fi=xC(Ji,et,a,u);if(i.lineTo(Fi.x,Fi.y),Zt>0){const zi=xC(Ji,bi,a,u);i.arc(zi.x,zi.y,Zt,et+Zc,bi+Math.PI)}if(i.arc(a,u,O,et-Zt/O,Ne+kt/O,!0),kt>0){const zi=xC(Bi,Vi,a,u);i.arc(zi.x,zi.y,kt,Vi+Math.PI,Ne-Zc)}const mi=xC(yn,Ne,a,u);if(i.lineTo(mi.x,mi.y),Je>0){const zi=xC(yn,pn,a,u);i.arc(zi.x,zi.y,Je,Ne-Zc,pn)}}else{i.moveTo(a,u);const Fi=Math.cos(pn)*T+a,mi=Math.sin(pn)*T+u;i.lineTo(Fi,mi);const zi=Math.cos(Kn)*T+a,Oi=Math.sin(Kn)*T+u;i.lineTo(zi,Oi)}i.closePath()}Object.defineProperties(ES,{defaults:{enumerable:Ey,value:dl},instances:{enumerable:Ey,value:SS},overrides:{enumerable:Ey,value:R0},registry:{enumerable:Ey,value:Vv},version:{enumerable:Ey,value:"3.9.1"},getChart:{enumerable:Ey,value:kU},register:{enumerable:Ey,value:(...i)=>{Vv.add(...i),RU()}},unregister:{enumerable:Ey,value:(...i)=>{Vv.remove(...i),RU()}}});class TS extends $m{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:s,distance:a}=aV(r,{x:t,y:e}),{startAngle:u,endAngle:h,innerRadius:m,outerRadius:w,circumference:T}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),O=this.options.spacing/2,te=Eo(T,h-u)>=yu||Gx(s,u,h),ue=P_(a,m+O,w+O);return te&&ue}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:s,innerRadius:a,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:h,spacing:m}=this.options,w=(r+s)/2,T=(a+u+m+h)/2;return{x:e+Math.cos(w)*T,y:n+Math.sin(w)*T}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/2,s=(e.spacing||0)/2,a=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>yu?Math.floor(n/yu):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let u=0;if(r){u=r/2;const m=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(m)*u,Math.sin(m)*u),this.circumference>=fc&&(u=r)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const h=function zpe(i,t,e,n,r){const{fullCircles:s,startAngle:a,circumference:u}=t;let h=t.endAngle;if(s){FP(i,t,e,n,a+yu,r);for(let m=0;m<s;++m)i.fill();isNaN(u)||(h=a+u%yu,u%yu==0&&(h+=yu))}return FP(i,t,e,n,h,r),i.fill(),h}(t,this,u,s,a);(function Upe(i,t,e,n,r,s){const{options:a}=t,{borderWidth:u,borderJoinStyle:h}=a,m="inner"===a.borderAlign;!u||(m?(i.lineWidth=2*u,i.lineJoin=h||"round"):(i.lineWidth=u,i.lineJoin=h||"bevel"),t.fullCircles&&function Vpe(i,t,e){const{x:n,y:r,startAngle:s,pixelMargin:a,fullCircles:u}=t,h=Math.max(t.outerRadius-a,0),m=t.innerRadius+a;let w;for(e&&OU(i,t,s+yu),i.beginPath(),i.arc(n,r,m,s+yu,s,!0),w=0;w<u;++w)i.stroke();for(i.beginPath(),i.arc(n,r,h,s,s+yu),w=0;w<u;++w)i.stroke()}(i,t,m),m&&OU(i,t,r),FP(i,t,e,n,r,s),i.stroke())})(t,this,u,s,h,a),t.restore()}}function FU(i,t,e=t){i.lineCap=Eo(e.borderCapStyle,t.borderCapStyle),i.setLineDash(Eo(e.borderDash,t.borderDash)),i.lineDashOffset=Eo(e.borderDashOffset,t.borderDashOffset),i.lineJoin=Eo(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=Eo(e.borderWidth,t.borderWidth),i.strokeStyle=Eo(e.borderColor,t.borderColor)}function Hpe(i,t,e){i.lineTo(e.x,e.y)}function NU(i,t,e={}){const n=i.length,{start:r=0,end:s=n-1}=e,{start:a,end:u}=t,h=Math.max(r,a),m=Math.min(s,u);return{count:n,start:h,loop:t.loop,ilen:m<h&&!(r<a&&s<a||r>u&&s>u)?n+m-h:m-h}}function Wpe(i,t,e,n){const{points:r,options:s}=t,{count:a,start:u,loop:h,ilen:m}=NU(r,e,n),w=function Gpe(i){return i.stepped?rde:i.tension||"monotone"===i.cubicInterpolationMode?sde:Hpe}(s);let W,te,ue,{move:T=!0,reverse:O}=n||{};for(W=0;W<=m;++W)te=r[(u+(O?m-W:W))%a],!te.skip&&(T?(i.moveTo(te.x,te.y),T=!1):w(i,ue,te,O,s.stepped),ue=te);return h&&(te=r[(u+(O?m:0))%a],w(i,ue,te,O,s.stepped)),!!h}function jpe(i,t,e,n){const r=t.points,{count:s,start:a,ilen:u}=NU(r,e,n),{move:h=!0,reverse:m}=n||{};let O,W,te,ue,ce,Ne,w=0,T=0;const et=at=>(a+(m?u-at:at))%s,Je=()=>{ue!==ce&&(i.lineTo(w,ce),i.lineTo(w,ue),i.lineTo(w,Ne))};for(h&&(W=r[et(0)],i.moveTo(W.x,W.y)),O=0;O<=u;++O){if(W=r[et(O)],W.skip)continue;const at=W.x,kt=W.y,Zt=0|at;Zt===te?(kt<ue?ue=kt:kt>ce&&(ce=kt),w=(T*w+at)/++T):(Je(),i.lineTo(at,kt),te=Zt,T=0,ue=ce=kt),Ne=kt}Je()}function NP(i){const t=i.options;return i._decimated||i._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?Wpe:jpe}TS.id="arc",TS.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},TS.defaultRoutes={backgroundColor:"backgroundColor"};const Ype="function"==typeof Path2D;let MS=(()=>{class i extends $m{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(Tde(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,n),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function Wde(i,t){const e=i.points,n=i.options.spanGaps,r=e.length;if(!r)return[];const s=!!i._loop,{start:a,end:u}=function Hde(i,t,e,n){let r=0,s=t-1;if(e&&!n)for(;r<t&&!i[r].skip;)r++;for(;r<t&&i[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&i[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,n);return function qV(i,t,e,n){return n&&n.setContext&&e?function jde(i,t,e,n){const r=i._chart.getContext(),s=XV(i.options),{_datasetIndex:a,options:{spanGaps:u}}=i,h=e.length,m=[];let w=s,T=t[0].start,O=T;function W(te,ue,ce,Ne){const et=u?-1:1;if(te!==ue){for(te+=h;e[te%h].skip;)te-=et;for(;e[ue%h].skip;)ue+=et;te%h!=ue%h&&(m.push({start:te%h,end:ue%h,loop:ce,style:Ne}),w=Ne,T=ue%h)}}for(const te of t){T=u?T:te.start;let ce,ue=e[T%h];for(O=T+1;O<=te.end;O++){const Ne=e[O%h];ce=XV(n.setContext(Sy(r,{type:"segment",p0:ue,p1:Ne,p0DataIndex:(O-1)%h,p1DataIndex:O%h,datasetIndex:a}))),$de(ce,w)&&W(T,O-1,te.loop,w),ue=Ne,w=ce}T<O-1&&W(T,O-1,te.loop,w)}return m}(i,t,e,n):t}(i,!0===n?[{start:a,end:u,loop:s}]:function Gde(i,t,e,n){const r=i.length,s=[];let h,a=t,u=i[t];for(h=t+1;h<=e;++h){const m=i[h%r];m.skip||m.stop?u.skip||(s.push({start:t%r,end:(h-1)%r,loop:n=!1}),t=a=m.stop?h:null):(a=h,u.skip&&(t=h)),u=m}return null!==a&&s.push({start:t%r,end:a%r,loop:n}),s}(e,a,u<a?u+r:u,!!i._fullLoop&&0===a&&u===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],a=this.points,u=$V(this,{property:n,start:s,end:s});if(!u.length)return;const h=[],m=function $pe(i){return i.stepped?Fde:i.tension||"monotone"===i.cubicInterpolationMode?Nde:V0}(r);let w,T;for(w=0,T=u.length;w<T;++w){const{start:O,end:W}=u[w],te=a[O],ue=a[W];if(te===ue){h.push(te);continue}const Ne=m(te,ue,Math.abs((s-te[n])/(ue[n]-te[n])),r.stepped);Ne[n]=e[n],h.push(Ne)}return 1===h.length?h[0]:h}pathSegment(e,n,r){return NP(this)(e,this,n,r)}path(e,n,r){const s=this.segments,a=NP(this);let u=this._loop;n=n||0,r=r||this.points.length-n;for(const h of s)u&=a(e,this,h,{start:n,end:n+r-1});return!!u}draw(e,n,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function Kpe(i,t,e,n){Ype&&!t.options.segment?function qpe(i,t,e,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,n)&&r.closePath()),FU(i,t.options),i.stroke(r)}(i,t,e,n):function Xpe(i,t,e,n){const{segments:r,options:s}=t,a=NP(t);for(const u of r)FU(i,s,u.style),i.beginPath(),a(i,t,u,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}(i,t,e,n)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i.id="line",i.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t},i})();function BU(i,t,e,n){const r=i.options,{[e]:s}=i.getProps([e],n);return Math.abs(t-s)<r.radius+r.hitRadius}let Zpe=(()=>{class i extends $m{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:a,y:u}=this.getProps(["x","y"],r);return Math.pow(e-a,2)+Math.pow(n-u,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return BU(this,e,"x",n)}inYRange(e,n){return BU(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){let n=(e=e||this.options||{}).radius||0;return n=Math.max(n,n&&e.hoverRadius||0),2*(n+(n&&e.borderWidth||0))}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Xx(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,CP(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return i.id="point",i.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i})();function zU(i,t){const{x:e,y:n,base:r,width:s,height:a}=i.getProps(["x","y","base","width","height"],t);let u,h,m,w,T;return i.horizontal?(T=a/2,u=Math.min(e,r),h=Math.max(e,r),m=n-T,w=n+T):(T=s/2,u=e-T,h=e+T,m=Math.min(n,r),w=Math.max(n,r)),{left:u,top:m,right:h,bottom:w}}function Ty(i,t,e,n){return i?0:Cd(t,e,n)}function BP(i,t,e,n){const r=null===t,s=null===e,u=i&&!(r&&s)&&zU(i,n);return u&&(r||P_(t,u.left,u.right))&&(s||P_(e,u.top,u.bottom))}function nge(i,t){i.rect(t.x,t.y,t.w,t.h)}function zP(i,t,e={}){const n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0;return{x:i.x+n,y:i.y+r,w:i.w+((i.x+i.w!==e.x+e.w?t:0)-n),h:i.h+((i.y+i.h!==e.y+e.h?t:0)-r),radius:i.radius}}class DS extends $m{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:a}=function ege(i){const t=zU(i),e=t.right-t.left,n=t.bottom-t.top,r=function Qpe(i,t,e){const r=i.borderSkipped,s=TV(i.options.borderWidth);return{t:Ty(r.top,s.top,0,e),r:Ty(r.right,s.right,0,t),b:Ty(r.bottom,s.bottom,0,e),l:Ty(r.left,s.left,0,t)}}(i,e/2,n/2),s=function Jpe(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=N0(r),a=Math.min(t,e),u=i.borderSkipped,h=n||ol(r);return{topLeft:Ty(!h||u.top||u.left,s.topLeft,0,a),topRight:Ty(!h||u.top||u.right,s.topRight,0,a),bottomLeft:Ty(!h||u.bottom||u.left,s.bottomLeft,0,a),bottomRight:Ty(!h||u.bottom||u.right,s.bottomRight,0,a)}}(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),u=function tge(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}(a.radius)?Yx:nge;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),u(t,zP(a,e,s)),t.clip(),u(t,zP(s,-e,a)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),u(t,zP(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return BP(this,t,e,n)}inXRange(t,e){return BP(this,t,null,e)}inYRange(t,e){return BP(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}DS.id="bar",DS.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},DS.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var ige=Object.freeze({__proto__:null,ArcElement:TS,LineElement:MS,PointElement:Zpe,BarElement:DS});function VU(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:t})}}function UU(i){i.data.datasets.forEach(t=>{VU(t)})}var oge={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled)return void UU(i);const n=i.width;i.data.datasets.forEach((r,s)=>{const{_data:a,indexAxis:u}=r,h=i.getDatasetMeta(s),m=a||r.data;if("y"===Kx([u,i.options.indexAxis])||!h.controller.supportsDecimation)return;const w=i.scales[h.xAxisID];if("linear"!==w.type&&"time"!==w.type||i.options.parsing)return;let te,{start:T,count:O}=function age(i,t){const e=t.length;let r,n=0;const{iScale:s}=i,{min:a,max:u,minDefined:h,maxDefined:m}=s.getUserBounds();return h&&(n=Cd(L_(t,s.axis,a).lo,0,e-1)),r=m?Cd(L_(t,s.axis,u).hi+1,n,e)-n:e-n,{start:n,count:r}}(h,m);if(O<=(e.threshold||4*n))VU(r);else{switch(Ll(a)&&(r._data=m,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(ue){this._data=ue}})),e.algorithm){case"lttb":te=function rge(i,t,e,n,r){const s=r.samples||n;if(s>=e)return i.slice(t,t+e);const a=[],u=(e-2)/(s-2);let h=0;const m=t+e-1;let T,O,W,te,ue,w=t;for(a[h++]=i[w],T=0;T<s-2;T++){let et,ce=0,Ne=0;const Je=Math.floor((T+1)*u)+1+t,at=Math.min(Math.floor((T+2)*u)+1,e)+t,kt=at-Je;for(et=Je;et<at;et++)ce+=i[et].x,Ne+=i[et].y;ce/=kt,Ne/=kt;const Zt=Math.floor(T*u)+1+t,yn=Math.min(Math.floor((T+1)*u)+1,e)+t,{x:zt,y:pn}=i[w];for(W=te=-1,et=Zt;et<yn;et++)te=.5*Math.abs((zt-ce)*(i[et].y-pn)-(zt-i[et].x)*(Ne-pn)),te>W&&(W=te,O=i[et],ue=et);a[h++]=O,w=ue}return a[h++]=i[m],a}(m,T,O,n,e);break;case"min-max":te=function sge(i,t,e,n){let a,u,h,m,w,T,O,W,te,ue,r=0,s=0;const ce=[],et=i[t].x,at=i[t+e-1].x-et;for(a=t;a<t+e;++a){u=i[a],h=(u.x-et)/at*n,m=u.y;const kt=0|h;if(kt===w)m<te?(te=m,T=a):m>ue&&(ue=m,O=a),r=(s*r+u.x)/++s;else{const Zt=a-1;if(!Ll(T)&&!Ll(O)){const yn=Math.min(T,O),zt=Math.max(T,O);yn!==W&&yn!==Zt&&ce.push({...i[yn],x:r}),zt!==W&&zt!==Zt&&ce.push({...i[zt],x:r})}a>0&&Zt!==W&&ce.push(i[Zt]),ce.push(u),w=kt,s=0,te=ue=m,T=O=W=a}}return ce}(m,T,O,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=te}})},destroy(i){UU(i)}};function VP(i,t,e,n){if(n)return;let r=t[i],s=e[i];return"angle"===i&&(r=lg(r),s=lg(s)),{property:i,start:r,end:s}}function UP(i,t,e){for(;t>i;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function HU(i,t,e,n){return i&&t?n(i[e],t[e]):i?i[e]:t?t[e]:0}function GU(i,t){let e=[],n=!1;return Uu(i)?(n=!0,e=i):e=function uge(i,t){const{x:e=null,y:n=null}=i||{},r=t.points,s=[];return t.segments.forEach(({start:a,end:u})=>{u=UP(a,u,r);const h=r[a],m=r[u];null!==n?(s.push({x:h.x,y:n}),s.push({x:m.x,y:n})):null!==e&&(s.push({x:e,y:h.y}),s.push({x:e,y:m.y}))}),s}(i,t),e.length?new MS({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function WU(i){return i&&!1!==i.fill}function cge(i,t,e){let r=i[t].fill;const s=[t];let a;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!dh(r))return r;if(a=i[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function hge(i,t,e){const n=function gge(i){const t=i.options,e=t.fill;let n=Eo(e&&e.target,e);return void 0===n&&(n=!!t.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(i);if(ol(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return dh(r)&&Math.floor(r)===r?function dge(i,t,e,n){return("-"===i||"+"===i)&&(e=t+e),!(e===t||e<0||e>=n)&&e}(n[0],t,r,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function _ge(i,t,e){const n=[];for(let r=0;r<e.length;r++){const s=e[r],{first:a,last:u,point:h}=yge(s,t,"x");if(!(!h||a&&u))if(a)n.unshift(h);else if(i.push(h),!u)break}i.push(...n)}function yge(i,t,e){const n=i.interpolate(t,e);if(!n)return{};const r=n[e],s=i.segments,a=i.points;let u=!1,h=!1;for(let m=0;m<s.length;m++){const w=s[m],T=a[w.start][e],O=a[w.end][e];if(P_(r,T,O)){u=r===T,h=r===O;break}}return{first:u,last:h,point:n}}class jU{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:s,radius:a}=this;return t.arc(r,s,a,(e=e||{start:0,end:yu}).end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function HP(i,t,e){const n=function bge(i){const{chart:t,fill:e,line:n}=i;if(dh(e))return function Cge(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function mge(i){const{scale:t,index:e,line:n}=i,r=[],s=n.segments,a=n.points,u=function vge(i,t){const e=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const s=n[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);u.push(GU({x:null,y:t.bottom},n));for(let h=0;h<s.length;h++){const m=s[h];for(let w=m.start;w<=m.end;w++)_ge(r,a[w],u)}return new MS({points:r,options:{}})}(i);if("shape"===e)return!0;const r=function wge(i){return(i.scale||{}).getPointPositionForValue?function Age(i){const{scale:t,fill:e}=i,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,a=function pge(i,t,e){let n;return n="start"===i?e:"end"===i?t.options.reverse?t.min:t.max:ol(i)?i.value:t.getBaseValue(),n}(e,t,s),u=[];if(n.grid.circular){const h=t.getPointPositionForValue(0,s);return new jU({x:h.x,y:h.y,radius:t.getDistanceFromCenterForValue(a)})}for(let h=0;h<r;++h)u.push(t.getPointPositionForValue(h,a));return u}(i):function xge(i){const{scale:t={},fill:e}=i,n=function fge(i,t){let e=null;return"start"===i?e=t.bottom:"end"===i?e=t.top:ol(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(dh(n)){const r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}(i)}(i);return r instanceof jU?r:GU(r,n)}(t),{line:r,scale:s,axis:a}=t,u=r.options,h=u.fill,m=u.backgroundColor,{above:w=m,below:T=m}=h||{};n&&r.points.length&&(pS(i,e),function Ige(i,t){const{line:e,target:n,above:r,below:s,area:a,scale:u}=t,h=e._loop?"angle":t.axis;i.save(),"x"===h&&s!==r&&($U(i,n,a.top),qU(i,{line:e,target:n,color:r,scale:u,property:h}),i.restore(),i.save(),$U(i,n,a.bottom)),qU(i,{line:e,target:n,color:s,scale:u,property:h}),i.restore()}(i,{line:r,target:n,above:w,below:T,area:e,scale:s,axis:a}),gS(i))}function $U(i,t,e){const{segments:n,points:r}=t;let s=!0,a=!1;i.beginPath();for(const u of n){const{start:h,end:m}=u,w=r[h],T=r[UP(h,m,r)];s?(i.moveTo(w.x,w.y),s=!1):(i.lineTo(w.x,e),i.lineTo(w.x,w.y)),a=!!t.pathSegment(i,u,{move:a}),a?i.closePath():i.lineTo(T.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function qU(i,t){const{line:e,target:n,property:r,color:s,scale:a}=t,u=function lge(i,t,e){const n=i.segments,r=i.points,s=t.points,a=[];for(const u of n){let{start:h,end:m}=u;m=UP(h,m,r);const w=VP(e,r[h],r[m],u.loop);if(!t.segments){a.push({source:u,target:w,start:r[h],end:r[m]});continue}const T=$V(t,w);for(const O of T){const W=VP(e,s[O.start],s[O.end],O.loop),te=jV(u,r,W);for(const ue of te)a.push({source:ue,target:O,start:{[e]:HU(w,W,"start",Math.max)},end:{[e]:HU(w,W,"end",Math.min)}})}}return a}(e,n,r);for(const{source:h,target:m,start:w,end:T}of u){const{style:{backgroundColor:O=s}={}}=h,W=!0!==n;i.save(),i.fillStyle=O,Sge(i,a,W&&VP(r,w,T)),i.beginPath();const te=!!e.pathSegment(i,h);let ue;if(W){te?i.closePath():XU(i,n,T,r);const ce=!!n.pathSegment(i,m,{move:te,reverse:!0});ue=te&&ce,ue||XU(i,n,w,r)}i.closePath(),i.fill(ue?"evenodd":"nonzero"),i.restore()}}function Sge(i,t,e){const{top:n,bottom:r}=t.chart.chartArea,{property:s,start:a,end:u}=e||{};"x"===s&&(i.beginPath(),i.rect(a,n,u-a,r-n),i.clip())}function XU(i,t,e,n){const r=t.interpolate(e,n);r&&i.lineTo(r.x,r.y)}var Ege={id:"filler",afterDatasetsUpdate(i,t,e){const n=(i.data.datasets||[]).length,r=[];let s,a,u,h;for(a=0;a<n;++a)s=i.getDatasetMeta(a),u=s.dataset,h=null,u&&u.options&&u instanceof MS&&(h={visible:i.isDatasetVisible(a),index:a,fill:hge(u,a,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:u}),s.$filler=h,r.push(h);for(a=0;a<n;++a)h=r[a],h&&!1!==h.fill&&(h.fill=cge(r,a,e.propagate))},beforeDraw(i,t,e){const n="beforeDraw"===e.drawTime,r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let a=r.length-1;a>=0;--a){const u=r[a].$filler;!u||(u.line.updateControlPoints(s,u.axis),n&&u.fill&&HP(i.ctx,u,s))}},beforeDatasetsDraw(i,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const s=n[r].$filler;WU(s)&&HP(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,t,e){const n=t.meta.$filler;!WU(n)||"beforeDatasetDraw"!==e.drawTime||HP(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const YU=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}};class KU extends $m{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Hu(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=rd(n.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=YU(n,s);let m,w;e.font=r.string,this.isHorizontal()?(m=this.maxWidth,w=this._fitRows(a,s,u,h)+10):(w=this.maxHeight,m=this._fitCols(a,s,u,h)+10),this.width=Math.min(m,t.maxWidth||this.maxWidth),this.height=Math.min(w,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:s,maxWidth:a,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],m=this.lineWidths=[0],w=r+u;let T=t;s.textAlign="left",s.textBaseline="middle";let O=-1,W=-w;return this.legendItems.forEach((te,ue)=>{const ce=n+e/2+s.measureText(te.text).width;(0===ue||m[m.length-1]+ce+2*u>a)&&(T+=w,m[m.length-(ue>0?0:1)]=0,W+=w,O++),h[ue]={left:0,top:W,row:O,width:ce,height:r},m[m.length-1]+=ce+u}),T}_fitCols(t,e,n,r){const{ctx:s,maxHeight:a,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],m=this.columnSizes=[],w=a-t;let T=u,O=0,W=0,te=0,ue=0;return this.legendItems.forEach((ce,Ne)=>{const et=n+e/2+s.measureText(ce.text).width;Ne>0&&W+r+2*u>w&&(T+=O+u,m.push({width:O,height:W}),te+=O+u,ue++,O=W=0),h[Ne]={left:te,top:W,col:ue,width:et,height:r},O=Math.max(O,et),W+=r+u}),T+=O,m.push({width:O,height:W}),T}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:s}}=this,a=wC(s,this.left,this.width);if(this.isHorizontal()){let u=0,h=xf(n,this.left+r,this.right-this.lineWidths[u]);for(const m of e)u!==m.row&&(u=m.row,h=xf(n,this.left+r,this.right-this.lineWidths[u])),m.top+=this.top+t+r,m.left=a.leftForLtr(a.x(h),m.width),h+=m.width+r}else{let u=0,h=xf(n,this.top+t+r,this.bottom-this.columnSizes[u].height);for(const m of e)m.col!==u&&(u=m.col,h=xf(n,this.top+t+r,this.bottom-this.columnSizes[u].height)),m.top=h,m.left+=this.left+r,m.left=a.leftForLtr(a.x(m.left),m.width),h+=m.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;pS(t,this),this._draw(),gS(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:s,labels:a}=t,u=dl.color,h=wC(t.rtl,this.left,this.width),m=rd(a.font),{color:w,padding:T}=a,O=m.size,W=O/2;let te;this.drawTitle(),r.textAlign=h.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=m.string;const{boxWidth:ue,boxHeight:ce,itemHeight:Ne}=YU(a,O),at=this.isHorizontal(),kt=this._computeTitleHeight();te=at?{x:xf(s,this.left+T,this.right-n[0]),y:this.top+T+kt,line:0}:{x:this.left+T,y:xf(s,this.top+kt+T,this.bottom-e[0].height),line:0},UV(this.ctx,t.textDirection);const Zt=Ne+T;this.legendItems.forEach((yn,zt)=>{r.strokeStyle=yn.fontColor||w,r.fillStyle=yn.fontColor||w;const pn=r.measureText(yn.text).width,Kn=h.textAlign(yn.textAlign||(yn.textAlign=a.textAlign)),Bi=ue+W+pn;let Ji=te.x,Vi=te.y;h.setWidth(this.width),at?zt>0&&Ji+Bi+T>this.right&&(Vi=te.y+=Zt,te.line++,Ji=te.x=xf(s,this.left+T,this.right-n[te.line])):zt>0&&Vi+Zt>this.bottom&&(Ji=te.x=Ji+e[te.line].width+T,te.line++,Vi=te.y=xf(s,this.top+kt+T,this.bottom-e[te.line].height)),function(yn,zt,pn){if(isNaN(ue)||ue<=0||isNaN(ce)||ce<0)return;r.save();const Kn=Eo(pn.lineWidth,1);if(r.fillStyle=Eo(pn.fillStyle,u),r.lineCap=Eo(pn.lineCap,"butt"),r.lineDashOffset=Eo(pn.lineDashOffset,0),r.lineJoin=Eo(pn.lineJoin,"miter"),r.lineWidth=Kn,r.strokeStyle=Eo(pn.strokeStyle,u),r.setLineDash(Eo(pn.lineDash,[])),a.usePointStyle){const Bi={radius:ce*Math.SQRT2/2,pointStyle:pn.pointStyle,rotation:pn.rotation,borderWidth:Kn},Ji=h.xPlus(yn,ue/2);EV(r,Bi,Ji,zt+W,a.pointStyleWidth&&ue)}else{const Bi=zt+Math.max((O-ce)/2,0),Ji=h.leftForLtr(yn,ue),Vi=N0(pn.borderRadius);r.beginPath(),Object.values(Vi).some(bi=>0!==bi)?Yx(r,{x:Ji,y:Bi,w:ue,h:ce,radius:Vi}):r.rect(Ji,Bi,ue,ce),r.fill(),0!==Kn&&r.stroke()}r.restore()}(h.x(Ji),Vi,yn),Ji=((i,t,e,n)=>i===(n?"left":"right")?e:"center"===i?(t+e)/2:t)(Kn,Ji+ue+W,at?Ji+Bi:this.right,t.rtl),function(yn,zt,pn){F0(r,pn.text,yn,zt+Ne/2,m,{strikethrough:pn.hidden,textAlign:h.textAlign(pn.textAlign)})}(h.x(Ji),Vi,yn),at?te.x+=Bi+T:te.y+=Zt}),HV(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=rd(e.font),r=Af(e.padding);if(!e.display)return;const s=wC(t.rtl,this.left,this.width),a=this.ctx,u=e.position,m=r.top+n.size/2;let w,T=this.left,O=this.width;if(this.isHorizontal())O=Math.max(...this.lineWidths),w=this.top+m,T=xf(t.align,T,this.right-O);else{const te=this.columnSizes.reduce((ue,ce)=>Math.max(ue,ce.height),0);w=m+xf(t.align,this.top,this.bottom-te-t.labels.padding-this._computeTitleHeight())}const W=xf(u,T,T+O);a.textAlign=s.textAlign(dP(u)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=n.string,F0(a,e.text,W,w,n)}_computeTitleHeight(){const t=this.options.title,e=rd(t.font),n=Af(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,s;if(P_(t,this.left,this.right)&&P_(e,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],P_(t,r.left,r.left+r.width)&&P_(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function Mge(i,t){return!(("mousemove"!==i&&"mouseout"!==i||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==i&&"mouseup"!==i))}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((i,t)=>null!==i&&null!==t&&i.datasetIndex===t.datasetIndex&&i.index===t.index)(r,n);r&&!s&&Hu(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!s&&Hu(e.onHover,[t,n,this],this)}else n&&Hu(e.onClick,[t,n,this],this)}}var Dge={id:"legend",_element:KU,start(i,t,e){const n=i.legend=new KU({ctx:i.ctx,options:e,chart:i});If.configure(i,n,e),If.addBox(i,n)},stop(i){If.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;If.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:s}}=i.legend.options;return i._getSortedDatasetMetas().map(a=>{const u=a.controller.getStyle(e?0:void 0),h=Af(u.borderWidth);return{text:t[a.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!a.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:0,datasetIndex:a.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class GP extends $m{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Uu(n.text)?n.text.length:1;this._padding=Af(n.padding);const s=r*rd(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:s,options:a}=this,u=a.align;let m,w,T,h=0;return this.isHorizontal()?(w=xf(u,n,s),T=e+t,m=s-n):("left"===a.position?(w=n+t,T=xf(u,r,e),h=-.5*fc):(w=s-t,T=xf(u,e,r),h=.5*fc),m=r-e),{titleX:w,titleY:T,maxWidth:m,rotation:h}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=rd(e.font),s=n.lineHeight/2+this._padding.top,{titleX:a,titleY:u,maxWidth:h,rotation:m}=this._drawArgs(s);F0(t,e.text,0,0,n,{color:e.color,maxWidth:h,rotation:m,textAlign:dP(e.align),textBaseline:"middle",translation:[a,u]})}}var Lge={id:"title",_element:GP,start(i,t,e){!function Pge(i,t){const e=new GP({ctx:i.ctx,options:t,chart:i});If.configure(i,e,t),If.addBox(i,e),i.titleBlock=e}(i,e)},stop(i){If.removeBox(i,i.titleBlock),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;If.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const PS=new WeakMap;var kge={id:"subtitle",start(i,t,e){const n=new GP({ctx:i.ctx,options:e,chart:i});If.configure(i,n,e),If.addBox(i,n),PS.set(i,n)},stop(i){If.removeBox(i,PS.get(i)),PS.delete(i)},beforeUpdate(i,t,e){const n=PS.get(i);If.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const o1={average(i){if(!i.length)return!1;let t,e,n=0,r=0,s=0;for(t=0,e=i.length;t<e;++t){const a=i[t].element;if(a&&a.hasValue()){const u=a.tooltipPosition();n+=u.x,r+=u.y,++s}}return{x:n/s,y:r/s}},nearest(i,t){if(!i.length)return!1;let s,a,u,e=t.x,n=t.y,r=Number.POSITIVE_INFINITY;for(s=0,a=i.length;s<a;++s){const h=i[s].element;if(h&&h.hasValue()){const w=cP(t,h.getCenterPoint());w<r&&(r=w,u=h)}}if(u){const h=u.tooltipPosition();e=h.x,n=h.y}return{x:e,y:n}}};function Uv(i,t){return t&&(Uu(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function O_(i){return("string"==typeof i||i instanceof String)&&i.indexOf("\n")>-1?i.split("\n"):i}function Rge(i,t){const{element:e,datasetIndex:n,index:r}=t,s=i.getDatasetMeta(n).controller,{label:a,value:u}=s.getLabelAndValue(r);return{chart:i,label:a,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:u,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function ZU(i,t){const e=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:a,boxHeight:u}=t,h=rd(t.bodyFont),m=rd(t.titleFont),w=rd(t.footerFont),T=s.length,O=r.length,W=n.length,te=Af(t.padding);let ue=te.height,ce=0,Ne=n.reduce((at,kt)=>at+kt.before.length+kt.lines.length+kt.after.length,0);Ne+=i.beforeBody.length+i.afterBody.length,T&&(ue+=T*m.lineHeight+(T-1)*t.titleSpacing+t.titleMarginBottom),Ne&&(ue+=W*(t.displayColors?Math.max(u,h.lineHeight):h.lineHeight)+(Ne-W)*h.lineHeight+(Ne-1)*t.bodySpacing),O&&(ue+=t.footerMarginTop+O*w.lineHeight+(O-1)*t.footerSpacing);let et=0;const Je=function(at){ce=Math.max(ce,e.measureText(at).width+et)};return e.save(),e.font=m.string,fu(i.title,Je),e.font=h.string,fu(i.beforeBody.concat(i.afterBody),Je),et=t.displayColors?a+2+t.boxPadding:0,fu(n,at=>{fu(at.before,Je),fu(at.lines,Je),fu(at.after,Je)}),et=0,e.font=w.string,fu(i.footer,Je),e.restore(),ce+=te.width,{width:ce,height:ue}}function Nge(i,t,e,n){const{x:r,width:s}=e,{width:a,chartArea:{left:u,right:h}}=i;let m="center";return"center"===n?m=r<=(u+h)/2?"left":"right":r<=s/2?m="left":r>=a-s/2&&(m="right"),function Fge(i,t,e,n){const{x:r,width:s}=n,a=e.caretSize+e.caretPadding;if("left"===i&&r+s+a>t.width||"right"===i&&r-s-a<0)return!0}(m,i,t,e)&&(m="center"),m}function QU(i,t,e){const n=e.yAlign||t.yAlign||function Oge(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}(i,e);return{xAlign:e.xAlign||t.xAlign||Nge(i,t,e,n),yAlign:n}}function JU(i,t,e,n){const{caretSize:r,caretPadding:s,cornerRadius:a}=i,{xAlign:u,yAlign:h}=e,m=r+s,{topLeft:w,topRight:T,bottomLeft:O,bottomRight:W}=N0(a);let te=function Bge(i,t){let{x:e,width:n}=i;return"right"===t?e-=n:"center"===t&&(e-=n/2),e}(t,u);const ue=function zge(i,t,e){let{y:n,height:r}=i;return"top"===t?n+=e:n-="bottom"===t?r+e:r/2,n}(t,h,m);return"center"===h?"left"===u?te+=m:"right"===u&&(te-=m):"left"===u?te-=Math.max(w,O)+r:"right"===u&&(te+=Math.max(T,W)+r),{x:Cd(te,0,n.width-t.width),y:Cd(ue,0,n.height-t.height)}}function LS(i,t,e){const n=Af(e.padding);return"center"===t?i.x+i.width/2:"right"===t?i.x+i.width-n.right:i.x+n.left}function e8(i){return Uv([],O_(i))}function t8(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}let n8=(()=>{class i extends $m{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,a=new KV(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=function Vge(i,t,e){return Sy(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=r.beforeTitle.apply(this,[e]),a=r.title.apply(this,[e]),u=r.afterTitle.apply(this,[e]);let h=[];return h=Uv(h,O_(s)),h=Uv(h,O_(a)),h=Uv(h,O_(u)),h}getBeforeBody(e,n){return e8(n.callbacks.beforeBody.apply(this,[e]))}getBody(e,n){const{callbacks:r}=n,s=[];return fu(e,a=>{const u={before:[],lines:[],after:[]},h=t8(r,a);Uv(u.before,O_(h.beforeLabel.call(this,a))),Uv(u.lines,h.label.call(this,a)),Uv(u.after,O_(h.afterLabel.call(this,a))),s.push(u)}),s}getAfterBody(e,n){return e8(n.callbacks.afterBody.apply(this,[e]))}getFooter(e,n){const{callbacks:r}=n,s=r.beforeFooter.apply(this,[e]),a=r.footer.apply(this,[e]),u=r.afterFooter.apply(this,[e]);let h=[];return h=Uv(h,O_(s)),h=Uv(h,O_(a)),h=Uv(h,O_(u)),h}_createItems(e){const n=this._active,r=this.chart.data,s=[],a=[],u=[];let m,w,h=[];for(m=0,w=n.length;m<w;++m)h.push(Rge(this.chart,n[m]));return e.filter&&(h=h.filter((T,O,W)=>e.filter(T,O,W,r))),e.itemSort&&(h=h.sort((T,O)=>e.itemSort(T,O,r))),fu(h,T=>{const O=t8(e.callbacks,T);s.push(O.labelColor.call(this,T)),a.push(O.labelPointStyle.call(this,T)),u.push(O.labelTextColor.call(this,T))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=u,this.dataPoints=h,h}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let a,u=[];if(s.length){const h=o1[r.position].call(this,s,this._eventPosition);u=this._createItems(r),this.title=this.getTitle(u,r),this.beforeBody=this.getBeforeBody(u,r),this.body=this.getBody(u,r),this.afterBody=this.getAfterBody(u,r),this.footer=this.getFooter(u,r);const m=this._size=ZU(this,r),w=Object.assign({},h,m),T=QU(this.chart,r,w),O=JU(r,w,T,this.chart);this.xAlign=T.xAlign,this.yAlign=T.yAlign,a={opacity:1,x:O.x,y:O.y,width:m.width,height:m.height,caretX:h.x,caretY:h.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=u,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const a=this.getCaretPosition(e,r,s);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:a}=this,{caretSize:u,cornerRadius:h}=r,{topLeft:m,topRight:w,bottomLeft:T,bottomRight:O}=N0(h),{x:W,y:te}=e,{width:ue,height:ce}=n;let Ne,et,Je,at,kt,Zt;return"center"===a?(kt=te+ce/2,"left"===s?(Ne=W,et=Ne-u,at=kt+u,Zt=kt-u):(Ne=W+ue,et=Ne+u,at=kt-u,Zt=kt+u),Je=Ne):(et="left"===s?W+Math.max(m,T)+u:"right"===s?W+ue-Math.max(w,O)-u:this.caretX,"top"===a?(at=te,kt=at-u,Ne=et-u,Je=et+u):(at=te+ce,kt=at+u,Ne=et+u,Je=et-u),Zt=at),{x1:Ne,x2:et,x3:Je,y1:at,y2:kt,y3:Zt}}drawTitle(e,n,r){const s=this.title,a=s.length;let u,h,m;if(a){const w=wC(r.rtl,this.x,this.width);for(e.x=LS(this,r.titleAlign,r),n.textAlign=w.textAlign(r.titleAlign),n.textBaseline="middle",u=rd(r.titleFont),h=r.titleSpacing,n.fillStyle=r.titleColor,n.font=u.string,m=0;m<a;++m)n.fillText(s[m],w.x(e.x),e.y+u.lineHeight/2),e.y+=u.lineHeight+h,m+1===a&&(e.y+=r.titleMarginBottom-h)}}_drawColorBox(e,n,r,s,a){const u=this.labelColors[r],h=this.labelPointStyles[r],{boxHeight:m,boxWidth:w,boxPadding:T}=a,O=rd(a.bodyFont),W=LS(this,"left",a),te=s.x(W),ce=n.y+(m<O.lineHeight?(O.lineHeight-m)/2:0);if(a.usePointStyle){const Ne={radius:Math.min(w,m)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},et=s.leftForLtr(te,w)+w/2,Je=ce+m/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,CP(e,Ne,et,Je),e.strokeStyle=u.borderColor,e.fillStyle=u.backgroundColor,CP(e,Ne,et,Je)}else{e.lineWidth=ol(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,e.strokeStyle=u.borderColor,e.setLineDash(u.borderDash||[]),e.lineDashOffset=u.borderDashOffset||0;const Ne=s.leftForLtr(te,w-T),et=s.leftForLtr(s.xPlus(te,1),w-T-2),Je=N0(u.borderRadius);Object.values(Je).some(at=>0!==at)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Yx(e,{x:Ne,y:ce,w,h:m,radius:Je}),e.fill(),e.stroke(),e.fillStyle=u.backgroundColor,e.beginPath(),Yx(e,{x:et,y:ce+1,w:w-2,h:m-2,radius:Je}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(Ne,ce,w,m),e.strokeRect(Ne,ce,w,m),e.fillStyle=u.backgroundColor,e.fillRect(et,ce+1,w-2,m-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:a,bodyAlign:u,displayColors:h,boxHeight:m,boxWidth:w,boxPadding:T}=r,O=rd(r.bodyFont);let W=O.lineHeight,te=0;const ue=wC(r.rtl,this.x,this.width),ce=function(pn){n.fillText(pn,ue.x(e.x+te),e.y+W/2),e.y+=W+a},Ne=ue.textAlign(u);let et,Je,at,kt,Zt,yn,zt;for(n.textAlign=u,n.textBaseline="middle",n.font=O.string,e.x=LS(this,Ne,r),n.fillStyle=r.bodyColor,fu(this.beforeBody,ce),te=h&&"right"!==Ne?"center"===u?w/2+T:w+2+T:0,kt=0,yn=s.length;kt<yn;++kt){for(et=s[kt],Je=this.labelTextColors[kt],n.fillStyle=Je,fu(et.before,ce),at=et.lines,h&&at.length&&(this._drawColorBox(n,e,kt,ue,r),W=Math.max(O.lineHeight,m)),Zt=0,zt=at.length;Zt<zt;++Zt)ce(at[Zt]),W=O.lineHeight;fu(et.after,ce)}te=0,W=O.lineHeight,fu(this.afterBody,ce),e.y-=a}drawFooter(e,n,r){const s=this.footer,a=s.length;let u,h;if(a){const m=wC(r.rtl,this.x,this.width);for(e.x=LS(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=m.textAlign(r.footerAlign),n.textBaseline="middle",u=rd(r.footerFont),n.fillStyle=r.footerColor,n.font=u.string,h=0;h<a;++h)n.fillText(s[h],m.x(e.x),e.y+u.lineHeight/2),e.y+=u.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:a,yAlign:u}=this,{x:h,y:m}=e,{width:w,height:T}=r,{topLeft:O,topRight:W,bottomLeft:te,bottomRight:ue}=N0(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(h+O,m),"top"===u&&this.drawCaret(e,n,r,s),n.lineTo(h+w-W,m),n.quadraticCurveTo(h+w,m,h+w,m+W),"center"===u&&"right"===a&&this.drawCaret(e,n,r,s),n.lineTo(h+w,m+T-ue),n.quadraticCurveTo(h+w,m+T,h+w-ue,m+T),"bottom"===u&&this.drawCaret(e,n,r,s),n.lineTo(h+te,m+T),n.quadraticCurveTo(h,m+T,h,m+T-te),"center"===u&&"left"===a&&this.drawCaret(e,n,r,s),n.lineTo(h,m+O),n.quadraticCurveTo(h,m,h+O,m),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,a=r&&r.y;if(s||a){const u=o1[e.position].call(this,this._active,this._eventPosition);if(!u)return;const h=this._size=ZU(this,e),m=Object.assign({},u,this._size),w=QU(n,e,m),T=JU(e,m,w,n);(s._to!==T.x||a._to!==T.y)&&(this.xAlign=w.xAlign,this.yAlign=w.yAlign,this.width=h.width,this.height=h.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,T))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const u=Af(n.padding);n.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,s,n),UV(e,n.textDirection),a.y+=u.top,this.drawTitle(a,e,n),this.drawBody(a,e,n),this.drawFooter(a,e,n),HV(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:h,index:m})=>{const w=this.chart.getDatasetMeta(h);if(!w)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:w.data[m],index:m}}),a=!sS(r,s),u=this._positionChanged(s,n);(a||u)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],u=this._getActiveElements(e,a,n,r),h=this._positionChanged(u,e),m=n||!sS(u,a)||h;return m&&(this._active=u,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),m}_getActiveElements(e,n,r,s){const a=this.options;if("mouseout"===e.type)return[];if(!s)return n;const u=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&u.reverse(),u}_positionChanged(e,n){const{caretX:r,caretY:s,options:a}=this,u=o1[a.position].call(this,e,n);return!1!==u&&(r!==u.x||s!==u.y)}}return i.positioners=o1,i})();var Hge=Object.freeze({__proto__:null,Decimation:oge,Filler:Ege,Legend:Dge,SubTitle:kge,Title:Lge,Tooltip:{id:"tooltip",_element:n8,positioners:o1,afterInit(i,t,e){e&&(i.tooltip=new n8({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===i.notifyPlugins("beforeTooltipDraw",e))return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){i.tooltip&&i.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:D_,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:D_,beforeBody:D_,beforeLabel:D_,label(i){if(this&&this.options&&"dataset"===this.options.mode)return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return Ll(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:D_,afterBody:D_,beforeFooter:D_,footer:D_,afterFooter:D_}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>"filter"!==i&&"itemSort"!==i&&"external"!==i,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class kS extends U0{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:r,label:s}of e)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ll(t))return null;const n=this.getLabels();return((i,t)=>null===i?null:Cd(Math.round(i),0,t))(e=isFinite(e)&&n[e]===t?e:function Wge(i,t,e,n){const r=i.indexOf(t);return-1===r?((i,t,e,n)=>("string"==typeof t?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(i,t,e,n):r!==i.lastIndexOf(t)?e:r}(n,t,Eo(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=t;a<=e;a++)r.push({value:a});return r}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function r8(i,t,{horizontal:e,minRotation:n}){const r=jm(n),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+i).length)}kS.id="category",kS.defaults={ticks:{callback:kS.prototype.getLabelForValue}};class RS extends U0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ll(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const a=h=>r=e?r:h,u=h=>s=n?s:h;if(t){const h=Bv(r),m=Bv(s);h<0&&m<0?u(0):h>0&&m>0&&a(0)}if(r===s){let h=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(h=Math.abs(.05*s)),u(s+h),t||a(r-h)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:n}=t;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const a=function $ge(i,t){const e=[],{bounds:r,step:s,min:a,max:u,precision:h,count:m,maxTicks:w,maxDigits:T,includeBounds:O}=i,W=s||1,te=w-1,{min:ue,max:ce}=t,Ne=!Ll(a),et=!Ll(u),Je=!Ll(m),at=(ce-ue)/(T+1);let Zt,yn,zt,pn,kt=iV((ce-ue)/te/W)*W;if(kt<1e-14&&!Ne&&!et)return[{value:ue},{value:ce}];pn=Math.ceil(ce/kt)-Math.floor(ue/kt),pn>te&&(kt=iV(pn*kt/te/W)*W),Ll(h)||(Zt=Math.pow(10,h),kt=Math.ceil(kt*Zt)/Zt),"ticks"===r?(yn=Math.floor(ue/kt)*kt,zt=Math.ceil(ce/kt)*kt):(yn=ue,zt=ce),Ne&&et&&s&&function Ihe(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}((u-a)/s,kt/1e3)?(pn=Math.round(Math.min((u-a)/kt,w)),kt=(u-a)/pn,yn=a,zt=u):Je?(yn=Ne?a:yn,zt=et?u:zt,pn=m-1,kt=(zt-yn)/pn):(pn=(zt-yn)/kt,pn=Hx(pn,Math.round(pn),kt/1e3)?Math.round(pn):Math.ceil(pn));const Kn=Math.max(sV(kt),sV(yn));Zt=Math.pow(10,Ll(h)?Kn:h),yn=Math.round(yn*Zt)/Zt,zt=Math.round(zt*Zt)/Zt;let Bi=0;for(Ne&&(O&&yn!==a?(e.push({value:a}),yn<a&&Bi++,Hx(Math.round((yn+Bi*kt)*Zt)/Zt,a,r8(a,at,i))&&Bi++):yn<a&&Bi++);Bi<pn;++Bi)e.push({value:Math.round((yn+Bi*kt)*Zt)/Zt});return et&&O&&zt!==u?e.length&&Hx(e[e.length-1].value,u,r8(u,at,i))?e[e.length-1].value=u:e.push({value:u}):(!et||zt===u)&&e.push({value:zt}),e}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&rV(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Zx(t,this.chart.options.locale,this.options.ticks.format)}}class WP extends RS{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=dh(t)?t:0,this.max=dh(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=jm(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function s8(i){return i/Math.pow(10,Math.floor(Qg(i)))==1}WP.id="linear",WP.defaults={ticks:{callback:yS.formatters.numeric}};class jP extends U0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=RS.prototype.parse.apply(this,[t,e]);if(0!==n)return dh(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=dh(t)?Math.max(0,t):null,this.max=dh(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const s=h=>n=t?n:h,a=h=>r=e?r:h,u=(h,m)=>Math.pow(10,Math.floor(Qg(h))+m);n===r&&(n<=0?(s(1),a(10)):(s(u(n,-1)),a(u(r,1)))),n<=0&&s(u(r,-1)),r<=0&&a(u(n,1)),this._zero&&this.min!==this._suggestedMin&&n===u(this.min,0)&&s(u(n,-1)),this.min=n,this.max=r}buildTicks(){const t=this.options,n=function qge(i,t){const e=Math.floor(Qg(t.max)),n=Math.ceil(t.max/Math.pow(10,e)),r=[];let s=Kg(i.min,Math.pow(10,Math.floor(Qg(t.min)))),a=Math.floor(Qg(s)),u=Math.floor(s/Math.pow(10,a)),h=a<0?Math.pow(10,Math.abs(a)):1;do{r.push({value:s,major:s8(s)}),++u,10===u&&(u=1,++a,h=a>=0?1:h),s=Math.round(u*Math.pow(10,a)*h)/h}while(a<e||a===e&&u<n);const m=Kg(i.max,s);return r.push({value:m,major:s8(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&rV(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":Zx(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Qg(t),this._valueRange=Qg(this.max)-Qg(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Qg(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function $P(i){const t=i.ticks;if(t.display&&i.display){const e=Af(t.backdropPadding);return Eo(t.font&&t.font.size,dl.font.size)+e.height}return 0}function Xge(i,t,e){return e=Uu(e)?e:[e],{w:ide(i,t.string,e),h:e.length*t.lineHeight}}function a8(i,t,e,n,r){return i===n||i===r?{start:t-e/2,end:t+e/2}:i<n||i>r?{start:t-e,end:t}:{start:t,end:t+e}}function Kge(i,t,e,n,r){const s=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e));let u=0,h=0;n.start<t.l?(u=(t.l-n.start)/s,i.l=Math.min(i.l,t.l-u)):n.end>t.r&&(u=(n.end-t.r)/s,i.r=Math.max(i.r,t.r+u)),r.start<t.t?(h=(t.t-r.start)/a,i.t=Math.min(i.t,t.t-h)):r.end>t.b&&(h=(r.end-t.b)/a,i.b=Math.max(i.b,t.b+h))}function Qge(i){return 0===i||180===i?"center":i<180?"left":"right"}function Jge(i,t,e){return"right"===e?i-=t:"center"===e&&(i-=t/2),i}function eme(i,t,e){return 90===e||270===e?i-=t/2:(e>270||e<90)&&(i-=t),i}function o8(i,t,e,n){const{ctx:r}=i;if(e)r.arc(i.xCenter,i.yCenter,t,0,yu);else{let s=i.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let a=1;a<n;a++)s=i.getPointPosition(a,t),r.lineTo(s.x,s.y)}}jP.id="logarithmic",jP.defaults={ticks:{callback:yS.formatters.logarithmic,major:{enabled:!0}}};class l1 extends RS{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Af($P(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=dh(t)&&!isNaN(t)?t:0,this.max=dh(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/$P(this.options))}generateTickLabels(t){RS.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const r=Hu(this.options.pointLabels.callback,[e,n],this);return r||0===r?r:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?function Yge(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),n=[],r=[],s=i._pointLabels.length,a=i.options.pointLabels,u=a.centerPointLabels?fc/s:0;for(let h=0;h<s;h++){const m=a.setContext(i.getPointLabelContext(h));r[h]=m.padding;const w=i.getPointPosition(h,i.drawingArea+r[h],u),T=rd(m.font),O=Xge(i.ctx,T,i._pointLabels[h]);n[h]=O;const W=lg(i.getIndexAngle(h)+u),te=Math.round(uP(W));Kge(e,t,W,a8(te,w.x,O.w,0,180),a8(te,w.y,O.h,90,270))}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=function Zge(i,t,e){const n=[],r=i._pointLabels.length,s=i.options,a=$P(s)/2,u=i.drawingArea,h=s.pointLabels.centerPointLabels?fc/r:0;for(let m=0;m<r;m++){const w=i.getPointPosition(m,u+a+e[m],h),T=Math.round(uP(lg(w.angle+Zc))),O=t[m],W=eme(w.y,O.h,T),te=Qge(T),ue=Jge(w.x,O.w,te);n.push({x:w.x,y:W,textAlign:te,left:ue,top:W,right:ue+O.w,bottom:W+O.h})}return n}(i,n,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return lg(t*(yu/(this._pointLabels.length||1))+jm(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Ll(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ll(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function ime(i,t,e){return Sy(i,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-Zc+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),o8(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r}=e,s=this._pointLabels.length;let a,u,h;if(e.pointLabels.display&&function tme(i,t){const{ctx:e,options:{pointLabels:n}}=i;for(let r=t-1;r>=0;r--){const s=n.setContext(i.getPointLabelContext(r)),a=rd(s.font),{x:u,y:h,textAlign:m,left:w,top:T,right:O,bottom:W}=i._pointLabelItems[r],{backdropColor:te}=s;if(!Ll(te)){const ue=N0(s.borderRadius),ce=Af(s.backdropPadding);e.fillStyle=te;const Ne=w-ce.left,et=T-ce.top,Je=O-w+ce.width,at=W-T+ce.height;Object.values(ue).some(kt=>0!==kt)?(e.beginPath(),Yx(e,{x:Ne,y:et,w:Je,h:at,radius:ue}),e.fill()):e.fillRect(Ne,et,Je,at)}F0(e,i._pointLabels[r],u,h+a.lineHeight/2,a,{color:s.color,textAlign:m,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((m,w)=>{0!==w&&(u=this.getDistanceFromCenterForValue(m.value),function nme(i,t,e,n){const r=i.ctx,s=t.circular,{color:a,lineWidth:u}=t;!s&&!n||!a||!u||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=u,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),o8(i,e,s,n),r.closePath(),r.stroke(),r.restore())}(this,r.setContext(this.getContext(w-1)),u,s))}),n.display){for(t.save(),a=s-1;a>=0;a--){const m=n.setContext(this.getPointLabelContext(a)),{color:w,lineWidth:T}=m;!T||!w||(t.lineWidth=T,t.strokeStyle=w,t.setLineDash(m.borderDash),t.lineDashOffset=m.borderDashOffset,u=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),h=this.getPointPosition(a,u),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((u,h)=>{if(0===h&&!e.reverse)return;const m=n.setContext(this.getContext(h)),w=rd(m.font);if(s=this.getDistanceFromCenterForValue(this.ticks[h].value),m.showLabelBackdrop){t.font=w.string,a=t.measureText(u.label).width,t.fillStyle=m.backdropColor;const T=Af(m.backdropPadding);t.fillRect(-a/2-T.left,-s-w.size/2-T.top,a+T.width,w.size+T.height)}F0(t,u.label,0,-s,w,{color:m.color})}),t.restore()}drawTitle(){}}l1.id="radialLinear",l1.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:yS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:i=>i,padding:5,centerPointLabels:!1}},l1.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},l1.descriptors={angleLines:{_fallback:"grid"}};const OS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Dp=Object.keys(OS);function rme(i,t){return i-t}function l8(i,t){if(Ll(t))return null;const e=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts;let a=t;return"function"==typeof n&&(a=n(a)),dh(a)||(a="string"==typeof n?e.parse(a,n):e.parse(a)),null===a?null:(r&&(a="week"!==r||!_C(s)&&!0!==s?e.startOf(a,r):e.startOf(a,"isoWeek",s)),+a)}function u8(i,t,e,n){const r=Dp.length;for(let s=Dp.indexOf(i);s<r-1;++s){const a=OS[Dp[s]],u=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(u*a.size))<=n)return Dp[s]}return Dp[r-1]}function c8(i,t,e){if(e){if(e.length){const{lo:n,hi:r}=hP(e,t);i[e[n]>=t?e[n]:e[r]]=!0}}else i[t]=!0}function h8(i,t,e){const n=[],r={},s=t.length;let a,u;for(a=0;a<s;++a)u=t[a],r[u]=a,n.push({value:u,major:!1});return 0!==s&&e?function ome(i,t,e,n){const r=i._adapter,s=+r.startOf(t[0].value,n),a=t[t.length-1].value;let u,h;for(u=s;u<=a;u=+r.add(u,1,n))h=e[u],h>=0&&(t[h].major=!0);return t}(i,n,r,e):n}let qP=(()=>{class i extends U0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n){const r=e.time||(e.time={}),s=this._adapter=new $fe._date(e.adapters.date);s.init(n),Vx(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return void 0===e?null:l8(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:a,minDefined:u,maxDefined:h}=this.getUserBounds();function m(w){!u&&!isNaN(w.min)&&(s=Math.min(s,w.min)),!h&&!isNaN(w.max)&&(a=Math.max(a,w.max))}(!u||!h)&&(m(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&m(this.getMinMax(!1))),s=dh(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),a=dh(a)&&!isNaN(a)?a:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,h=function Mhe(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}(s,a,this.max);return this._unit=n.unit||(r.autoSkip?u8(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):function sme(i,t,e,n,r){for(let s=Dp.length-1;s>=Dp.indexOf(e);s--){const a=Dp[s];if(OS[a].common&&i._adapter.diff(r,n,a)>=t-1)return a}return Dp[e?Dp.indexOf(e):0]}(this,h.length,n.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function ame(i){for(let t=Dp.indexOf(i)+1,e=Dp.length;t<e;++t)if(OS[Dp[t]].common)return Dp[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&h.reverse(),h8(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let s,a,n=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),n=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,a=this.getDecimalForValue(e[e.length-1]),r=1===e.length?a:(a-this.getDecimalForValue(e[e.length-2]))/2);const u=e.length<3?.5:.25;n=Cd(n,0,u),r=Cd(r,0,u),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,a=s.time,u=a.unit||u8(a.minUnit,n,r,this._getLabelCapacity(n)),h=Eo(a.stepSize,1),m="week"===u&&a.isoWeekday,w=_C(m)||!0===m,T={};let W,te,O=n;if(w&&(O=+e.startOf(O,"isoWeek",m)),O=+e.startOf(O,w?"day":u),e.diff(r,n,u)>1e5*h)throw new Error(n+" and "+r+" are too far apart with stepSize of "+h+" "+u);const ue="data"===s.ticks.source&&this.getDataTimestamps();for(W=O,te=0;W<r;W=+e.add(W,h,u),te++)c8(T,W,ue);return(W===r||"ticks"===s.bounds||1===te)&&c8(T,W,ue),Object.keys(T).sort((ce,Ne)=>ce-Ne).map(ce=>+ce)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}_tickFormatFunction(e,n,r,s){const a=this.options,u=a.time.displayFormats,h=this._unit,m=this._majorUnit,T=m&&u[m],O=r[n],te=this._adapter.format(e,s||(m&&T&&O&&O.major?T:h&&u[h])),ue=a.ticks.callback;return ue?Hu(ue,[te,n,r],this):te}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=jm(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(s),u=Math.sin(s),h=this._resolveTickFontOptions(0).size;return{w:r*a+h*u,h:r*u+h*a}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,a=this._tickFormatFunction(e,0,h8(this,[e],this._majorUnit),s),u=this._getLabelSize(a),h=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return h>0?h:1}getDataTimestamps(){let n,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(l8(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return uV(e.sort(rme))}}return i.id="time",i.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},i})();function FS(i,t,e){let s,a,u,h,n=0,r=i.length-1;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=L_(i,"pos",t)),({pos:s,time:u}=i[n]),({pos:a,time:h}=i[r])):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=L_(i,"time",t)),({time:s,pos:u}=i[n]),({time:a,pos:h}=i[r]));const m=a-s;return m?u+(h-u)*(t-s)/m:u}class XP extends qP{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=FS(e,this.min),this._tableRange=FS(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],s=[];let a,u,h,m,w;for(a=0,u=t.length;a<u;++a)m=t[a],m>=e&&m<=n&&r.push(m);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(a=0,u=r.length;a<u;++a)w=r[a+1],h=r[a-1],m=r[a],Math.round((w+h)/2)!==m&&s.push({time:m,pos:a/(u-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(FS(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return FS(this._table,n*this._tableRange+this._minPos,!0)}}XP.id="timeseries",XP.defaults=qP.defaults,ES.register(jfe,ige,Hge,Object.freeze({__proto__:null,CategoryScale:kS,LinearScale:WP,LogarithmicScale:jP,RadialLinearScale:l1,TimeScale:qP,TimeSeriesScale:XP}));const cme=ES;let hme=(()=>{class i{constructor(e){this.el=e,this.plugins=[],this.responsive=!0,this.onDataSelect=new ki,this._options={}}get data(){return this._data}set data(e){this._data=e,this.reinit()}get options(){return this._options}set options(e){this._options=e,this.reinit()}ngAfterViewInit(){this.initChart(),this.initialized=!0}onCanvasClick(e){if(this.chart){const n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&r&&this.onDataSelect.emit({originalEvent:e,element:n[0],dataset:r})}}initChart(){let e=this.options||{};e.responsive=this.responsive,e.responsive&&(this.height||this.width)&&(e.maintainAspectRatio=!1),this.chart=new cme(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})}getCanvas(){return this.el.nativeElement.children[0].children[0]}getBase64Image(){return this.chart.toBase64Image()}generateLegend(){if(this.chart)return this.chart.generateLegend()}refresh(){this.chart&&this.chart.update()}reinit(){this.chart&&(this.chart.destroy(),this.initChart())}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)}}return i.\u0275fac=function(e){return new(e||i)(Tn($i))},i.\u0275cmp=hs({type:i,selectors:[["p-chart"]],hostAttrs:[1,"p-element"],inputs:{type:"type",plugins:"plugins",width:"width",height:"height",responsive:"responsive",data:"data",options:"options"},outputs:{onDataSelect:"onDataSelect"},decls:2,vars:6,consts:[[2,"position","relative"],[3,"click"]],template:function(e,n){1&e&&(Pt(0,"div",0)(1,"canvas",1),si("click",function(s){return n.onCanvasClick(s)}),Nt()()),2&e&&(bf("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height),tt(1),xs("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height))},encapsulation:2,changeDetection:0}),i})(),dme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();const fme=function(i,t){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t}};function pme(i,t){if(1&i&&Ri(0,"span",3),2&i){const e=Ze();Us(e.checked?e.onIcon:e.offIcon),He("ngClass",fa(3,fme,"left"===e.iconPos,"right"===e.iconPos))}}const gme=function(i,t,e){return{"p-button p-togglebutton p-component":!0,"p-button-icon-only":i,"p-highlight":t,"p-disabled":e}},mme={provide:Mc,useExisting:Xr(()=>d8),multi:!0};let d8=(()=>{class i{constructor(e){this.cd=e,this.iconPos="left",this.onChange=new ki,this.checked=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}toggle(e){this.disabled||(this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:e,checked:this.checked}),this.cd.markForCheck())}onBlur(){this.onModelTouched()}writeValue(e){this.checked=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get hasOnLabel(){return this.onLabel&&this.onLabel.length>0}get hasOffLabel(){return this.onLabel&&this.onLabel.length>0}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-toggleButton"]],hostAttrs:[1,"p-element"],inputs:{onLabel:"onLabel",offLabel:"offLabel",onIcon:"onIcon",offIcon:"offIcon",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",style:"style",styleClass:"styleClass",inputId:"inputId",tabindex:"tabindex",iconPos:"iconPos"},outputs:{onChange:"onChange"},features:[Ro([mme])],decls:4,vars:12,consts:[["role","checkbox","pRipple","",3,"ngClass","ngStyle","click","keydown.enter"],[3,"class","ngClass",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"]],template:function(e,n){1&e&&(Pt(0,"div",0),si("click",function(s){return n.toggle(s)})("keydown.enter",function(s){return n.toggle(s)}),At(1,pme,1,6,"span",1),Pt(2,"span",2),ur(3),Nt()()),2&e&&(Us(n.styleClass),He("ngClass",Th(8,gme,n.onIcon&&n.offIcon&&!n.hasOnLabel&&!n.hasOffLabel,n.checked,n.disabled))("ngStyle",n.style),xs("tabindex",n.disabled?null:"0")("aria-checked",n.checked),tt(1),He("ngIf",n.onIcon||n.offIcon),tt(2),ca(n.checked?n.hasOnLabel?n.onLabel:"":n.hasOffLabel?n.offLabel:""))},dependencies:[vo,wo,Ho,kh],styles:[".p-button[_ngcontent-%COMP%]{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label[_ngcontent-%COMP%]{flex:1 1 auto}.p-button-icon-right[_ngcontent-%COMP%]{order:1}.p-button[_ngcontent-%COMP%]:disabled{cursor:default}.p-button-icon-only[_ngcontent-%COMP%]{justify-content:center}.p-button-icon-only[_ngcontent-%COMP%]   .p-button-label[_ngcontent-%COMP%]{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical[_ngcontent-%COMP%]{flex-direction:column}.p-button-icon-bottom[_ngcontent-%COMP%]{order:2}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{margin:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child){border-right:0 none}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:focus{position:relative;z-index:1}"],changeDetection:0}),i})(),vme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pc]}),i})(),_me=(()=>{class i{constructor(e){this.el=e,this.iconPos="left"}ngAfterViewInit(){this.id=fC()+"_badge";let e=-1!=this.el.nativeElement.nodeName.indexOf("-")?this.el.nativeElement.firstChild:this.el.nativeElement,n=document.createElement("span");n.id=this.id,n.className="p-badge p-component",this.severity&&bn.addClass(n,"p-badge-"+this.severity),null!=this.value?(n.appendChild(document.createTextNode(this.value)),1===String(this.value).length&&bn.addClass(n,"p-badge-no-gutter")):bn.addClass(n,"p-badge-dot"),bn.addClass(e,"p-overlay-badge"),e.appendChild(n),this.initialized=!0}get value(){return this._value}set value(e){if(e!==this._value&&(this._value=e,this.initialized)){let n=document.getElementById(this.id);this._value?(bn.hasClass(n,"p-badge-dot")&&bn.removeClass(n,"p-badge-dot"),1===String(this._value).length?bn.addClass(n,"p-badge-no-gutter"):bn.removeClass(n,"p-badge-no-gutter")):!this._value&&!bn.hasClass(n,"p-badge-dot")&&bn.addClass(n,"p-badge-dot"),n.innerHTML="",n.appendChild(document.createTextNode(this._value))}}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(Tn($i))},i.\u0275dir=Qs({type:i,selectors:[["","pBadge",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",value:"value",severity:"severity"}}),i})(),yme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl]}),i})(),NS=(()=>{class i{constructor(){this.fileDropped=new ki}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1}ondrop(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1;let n=e.dataTransfer.files;n.length>0&&this.fileDropped.emit(n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=Qs({type:i,selectors:[["","dropZoneDirective",""]],hostVars:2,hostBindings:function(e,n){1&e&&si("dragover",function(s){return n.onDragOver(s)})("dragleave",function(s){return n.onDragLeave(s)})("drop",function(s){return n.ondrop(s)}),2&e&&ag("fileover",n.fileOver)},outputs:{fileDropped:"fileDropped"}}),i})();const bme=["myCytoscape"],Cme=["myPng"],wme=["myTreeTable"];function xme(i,t){if(1&i&&Ri(0,"img",52),2&i){const e=t.$implicit;He("src",e.icon,Hd)("alt",e.label)}}function Ame(i,t){if(1&i&&Ri(0,"img",52),2&i){const e=t.$implicit;He("src",e.icon,Hd)("alt",e.label)}}function Ime(i,t){if(1&i&&Ri(0,"img",52),2&i){const e=t.$implicit;He("src",e.icon,Hd)("alt",e.label)}}const u1=function(){return{width:"100%"}};function Sme(i,t){if(1&i){const e=vr();Pt(0,"div",26)(1,"div",27)(2,"div",53)(3,"span",54),Ri(4,"i",55),Nt(),Pt(5,"input",56),si("ngModelChange",function(r){return gn(e),vn(Ze().captureData.clone=r)}),Nt(),Pt(6,"p-button",57),si("click",function(){gn(e);const r=Ze();return vn(r.applyLabelize(r.captureData))}),Nt()()(),Pt(7,"div",27)(8,"div",53)(9,"span",54),Ri(10,"i",58),Nt(),Pt(11,"input",56),si("ngModelChange",function(r){return gn(e),vn(Ze().captureData.label=r)}),Nt()()(),Pt(12,"div",27)(13,"div",59)(14,"p-dropdown",60),si("ngModelChange",function(r){return gn(e),vn(Ze().captureData.alias=r)}),Nt()()(),Pt(15,"div",27)(16,"div",61)(17,"p-dropdown",62),si("ngModelChange",function(r){return gn(e),vn(Ze().captureData.tag=r)}),Nt()()(),Pt(18,"div",27)(19,"div",53)(20,"span",54),Ri(21,"i",63),Nt(),Pt(22,"input",56),si("ngModelChange",function(r){return gn(e),vn(Ze().captureData.group=r)}),Nt()()(),Pt(23,"div",27)(24,"div",53)(25,"span",64)(26,"p-checkbox",65),si("ngModelChange",function(r){return gn(e),vn(Ze()._lockedElement=r)})("onChange",function(r){return gn(e),vn(Ze().handleChangeLock(r))}),Nt()(),Ri(27,"input",66),Nt()()()}if(2&i){const e=Ze();tt(5),He("ngModel",e.captureData.clone),tt(6),He("ngModel",e.captureData.label),tt(3),co(mo(17,u1)),He("options",e.allNodes)("ngModel",e.captureData.alias)("filter",!0)("showClear",!0),tt(3),co(mo(18,u1)),He("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),tt(5),He("ngModel",e.captureData.group),tt(4),He("ngModel",e._lockedElement)("binary",!0)}}function Eme(i,t){if(1&i){const e=vr();Pt(0,"p-button",67),si("click",function(){gn(e);const r=Ze();return vn(r.applyNodeUpdate(r.captureData))}),Nt()}}function Tme(i,t){if(1&i){const e=vr();Pt(0,"div",26)(1,"div",27)(2,"div",53)(3,"span",54),Ri(4,"i",58),Nt(),Pt(5,"input",56),si("ngModelChange",function(r){return gn(e),vn(Ze().captureData.label=r)}),Nt()()(),Pt(6,"div",27)(7,"div",61)(8,"p-dropdown",62),si("ngModelChange",function(r){return gn(e),vn(Ze().captureData.tag=r)}),Nt()()(),Pt(9,"div",27)(10,"div",53)(11,"span",54),Ri(12,"i",68),Nt(),Pt(13,"input",69),si("ngModelChange",function(r){return gn(e),vn(Ze().currentSelectedEdge.data()._source=r)}),Nt()()(),Pt(14,"div",27)(15,"div",53)(16,"span",54),Ri(17,"i",70),Nt(),Pt(18,"input",69),si("ngModelChange",function(r){return gn(e),vn(Ze().currentSelectedEdge.data()._target=r)}),Nt()()()()}if(2&i){const e=Ze();tt(5),He("ngModel",e.captureData.label),tt(3),co(mo(9,u1)),He("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),tt(5),He("ngModel",e.currentSelectedEdge.data()._source),tt(5),He("ngModel",e.currentSelectedEdge.data()._target)}}function Mme(i,t){if(1&i){const e=vr();Pt(0,"p-button",67),si("click",function(){gn(e);const r=Ze();return vn(r.applyEdgeUpdate(r.captureData))}),Nt()}}function Dme(i,t){if(1&i){const e=vr();Pt(0,"p-button",67),si("click",function(){gn(e);const r=Ze();return vn(r.applyChangeProperties(r.captureData))}),Nt()}}const Pme=function(){return{width:"100%",height:"100%"}};function Lme(i,t){if(1&i){const e=vr();Pt(0,"textarea",72),si("keyup",function(){gn(e);const r=Ze(2);return vn(r.previewNewCData(r.captureData))})("ngModelChange",function(r){return gn(e),vn(Ze(2).captureData.selectElementRawCdata=r)}),Nt()}if(2&i){const e=Ze(2);co(mo(3,Pme)),He("ngModel",e.captureData.selectElementRawCdata)}}function kme(i,t){1&i&&Ri(0,"div",73),2&i&&He("innerHTML",Ze(2).captureData.selectElementCdata,zl)}const f8=function(){return{height:"100%"}};function Rme(i,t){1&i&&(Pt(0,"p-splitter"),At(1,Lme,1,4,"ng-template",71),At(2,kme,1,1,"ng-template",71),Nt()),2&i&&co(mo(2,f8))}function Ome(i,t){1&i&&Ri(0,"div",73),2&i&&He("innerHTML",Ze(2).captureData.selectElementCdata,zl)}function Fme(i,t){1&i&&(Pt(0,"p-splitter"),At(1,Ome,1,1,"ng-template",71),Nt()),2&i&&co(mo(2,f8))}function Nme(i,t){if(1&i){const e=vr();Pt(0,"p-toggleButton",76),si("ngModelChange",function(r){return gn(e),vn(Ze(2).captureData.editable=r)}),Nt()}if(2&i){const e=Ze(2);p0("onIcon",e.onIcon),He("ngModel",e.captureData.editable)}}function Bme(i,t){if(1&i){const e=vr();Pt(0,"p-button",77),si("click",function(){gn(e);const r=Ze(2);return vn(r.applyNewCData(r.captureData))}),Nt()}}function zme(i,t){if(1&i&&(At(0,Nme,1,2,"p-toggleButton",74),At(1,Bme,1,0,"p-button",75)),2&i){const e=Ze();He("ngIf",!e.captureData.isAlias),tt(1),He("ngIf",!e.captureData.isAlias)}}function Vme(i,t){1&i&&(Pt(0,"tr")(1,"th",78),ur(2,"#Id"),Nt(),Pt(3,"th",79),ur(4,"Label"),Nt(),Pt(5,"th",80),ur(6,"Ok"),Nt(),Pt(7,"th",80),ur(8,"Ko"),Nt(),Pt(9,"th",80),ur(10,"Sel."),Nt()())}function Ume(i,t){1&i&&(Pt(0,"td"),Ri(1,"i",84),Nt())}function Hme(i,t){1&i&&Ri(0,"td")}function Gme(i,t){1&i&&Ri(0,"td")}function Wme(i,t){1&i&&(Pt(0,"td"),Ri(1,"i",85),Nt())}function jme(i,t){if(1&i&&(Pt(0,"td"),ur(1),Nt()),2&i){const e=Ze().rowData;tt(1),cc(" ",e.success.length," ")}}function $me(i,t){if(1&i&&(Pt(0,"td"),ur(1),Nt()),2&i){const e=Ze().rowData;tt(1),cc(" ",e.fail.length," ")}}function qme(i,t){1&i&&Ri(0,"td")}function Xme(i,t){if(1&i){const e=vr();Pt(0,"td",86),si("click",function(){gn(e);const r=Ze().$implicit;return vn(Ze().onSelectItem(r))}),Ri(1,"i",87),Nt()}}function Yme(i,t){if(1&i&&(Pt(0,"tr")(1,"td"),Ri(2,"p-treeTableToggler",81),ur(3),Nt(),Pt(4,"td"),ur(5),Nt(),At(6,Ume,2,0,"td",82),At(7,Hme,1,0,"td",82),At(8,Gme,1,0,"td",82),At(9,Wme,2,0,"td",82),At(10,jme,2,1,"td",82),At(11,$me,2,1,"td",82),At(12,qme,1,0,"td",82),At(13,Xme,2,0,"td",83),Nt()),2&i){const e=t.$implicit,n=t.rowData;tt(2),He("rowNode",e),tt(1),cc(" ",n.id," "),tt(2),ca(n.label),tt(1),He("ngIf",!n.fail&&n.valid),tt(1),He("ngIf",!n.fail&&n.valid),tt(1),He("ngIf",!n.fail&&!n.valid),tt(1),He("ngIf",!n.fail&&!n.valid),tt(1),He("ngIf",n.success),tt(1),He("ngIf",n.fail),tt(1),He("ngIf",n.fail),tt(1),He("ngIf",!n.fail)}}function Kme(i,t){if(1&i&&(Pt(0,"li"),ur(1),Nt()),2&i){const e=t.$implicit;tt(1),uM("",e.action," : #",e.target," (",e.label,") ")}}function Zme(i,t){if(1&i){const e=vr();Pt(0,"ul")(1,"li"),ur(2),Pt(3,"i",90),si("click",function(){const s=gn(e).$implicit;return vn(Ze(2).nodeSummarySelect(s.key))}),Nt()(),Pt(4,"ul"),At(5,Kme,2,3,"li",89),Nt()()}if(2&i){const e=t.$implicit;tt(2),Bw("#",e.id," : ",e.label," "),tt(3),He("ngForOf",e.links)}}function Qme(i,t){if(1&i&&(Pt(0,"p-panel",88),At(1,Zme,6,3,"ul",89),Nt()),2&i){const e=t.$implicit,n=t.index,r=Ze();Fw("header","Tag analysis for [",e,"]"),tt(1),He("ngForOf",r.markdownSummary[n])}}const Jme=function(){return{height:"89vh"}},eve=function(){return{width:"100vw",height:"42vw"}},tve=function(){return{width:"100vw",height:"32vw"}},nve=function(){return{width:"45vw",height:"45vw"}},p8=function(){return{width:"60vw",height:"50vw"}},g8=function(){return{width:"40vw",height:"45vw"}},m8=function(){return{width:"40%"}},ive=function(){return{width:"55vw",height:"55vw"}},v8=function(){return{width:"65vw",height:"55vw"}};var YP=ae(4826)(),rve=ae(2960);iS.use(rve);var sve=ae(4147);iS.use(sve),ae(9050)(iS);let ove=(()=>{class i{constructor(e,n,r,s,a,u,h,m,w,T,O){this.graphsService=e,this.styleService=n,this.rulesService=r,this.preferenceService=s,this.clipboardService=a,this.router=u,this.logger=h,this.messageService=m,this.base16=w,this.store=T,this.route=O,this.displaySelectionNode=!1,this.displaySelectionEdge=!1,this.displaySummary=!1,this.displayChangeProperties=!1,this.onIcon="pi pi-check",this.displayFinder=!1,this.displayMarkdown=!1,this.displaySidebar=!1,this.subscriptions=[],this.displayExportPng=!1,this.displayTool=!0,this.searchNode="",this.graphs=[],this.jsonRules=[],this.alias=[],this.allNodes=[],this.tagsSummary=[],this.markdownSummary=[],this.cols=[{field:"label",header:"Label"}],this.breadFirstLayoutOptions=new ooe,this.concentricLayoutOptions=new aoe,this.circleLayoutOptions=new soe,this.gridLayoutOptions={name:"grid",avoidOverlapPadding:50,condense:!0,rows:20,cols:5},this.coseLayoutOptions=new loe,this.firstLoad=!1,this.currentStyleCounter=0,this.items=[],this.currentRulesCounter=0,this.currentRulesFail=0,this.currentRulesSuccess=0,this.selectorDisplay="",this.rules=[],this.preventDispatchZoom=!0,this.graph$=this.store.select(PI),this.graphs$=this.store.select(y2),this.menu$=this.store.select(Pz),this.parameter$=this.store.select(tP),this._lockedElement=!1,this.dockRightItems=[{label:"Export JSONDATA to build rules",tooltipOptions:{tooltipLabel:"Export JSONDATA to build rules",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-jsondata.png",command:()=>{let te=this.buildFacts();this.clipboardService.copyTextToClipboard(JSON.stringify(te)),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store JSONDATA in clipboard"})}},{label:"Export GEXF to clipboard",tooltipOptions:{tooltipLabel:"Export GEXF to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-gexf.png",command:()=>{this.id&&(this.gexf(this.id,this.id,this.currentStyle,this.currentRules),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GEXF in clipboard"}))}},{label:"Export GRAPHML to clipboard",tooltipOptions:{tooltipLabel:"Export GRAPHML to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-graphml.png",command:()=>{this.id&&(this.graphml(this.id,this.id,this.currentStyle,this.currentRules),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GRAPHML in clipboard"}))}},{label:"Export PNG",tooltipOptions:{tooltipLabel:"Export PNG",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-png.png",command:()=>{if(document){let te=this.cy?.png({bg:"white",full:this.preferences.full,maxWidth:this.preferences.maxWidth?Number(this.preferences.maxWidth):1024,maxHeight:this.preferences.maxHeight?Number(this.preferences.maxHeight):768})||"";this.logger.info(`PNG ${this.preferences.full} ${this.preferences.maxWidth} ${this.preferences.maxHeight}`),this.myPng?.nativeElement.setAttribute("src",te)}this.displayExportPng=!0}},{label:"Save",tooltipOptions:{tooltipLabel:"Save current diagram in local storage",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/save.png",command:()=>{if(this.id){this.logger.info("SAVE/META",this.currentStyle,this.currentRules);let te=this.toSysGraph(this.id,this.id,this.currentStyle,this.currentRules);this.logger.info("SAVE",te),this.graphsService.store(te,ue=>{ue.label=te.label,ue.style=te.style,ue.rules=te.rules,ue.nodes=te.nodes,ue.edges=te.edges}),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:`Save graph ${this.id}`})}}}],this.dockLeftItems=[{label:"Finder",tooltipOptions:{tooltipLabel:"Find node(s) or edges(s) and center on it",tooltipPosition:"right",positionTop:-15,positionLeft:15},icon:"assets/dock/find-element.png",command:()=>{let te=Br.filter(Br.map(this.cy?.elements("node"),ce=>({alias:ce.data().alias,label:ce.data().label,id:this.base16.decode(ce.data().id)})),ce=>ce.alias),ue={};Br.each(te,ce=>{let Ne=this.base16.encode(ce.alias),et=this.cy?.$(`#${Ne}`);et&&et.length>0?(ce.target={id:ce.alias,label:et[0].data().label},ue[Ne]?ue[Ne].aliases.push(ce):ue[Ne]={label:et[0].data().label,aliases:[ce]}):this.raiseError("Unknown target",ce.alias)}),this.alias=[],Br.each(ue,(ce,Ne)=>{let et={key:Ne,label:`${ce.label} #${this.base16.decode(Ne)}`,data:{id:this.base16.decode(Ne),label:ce.label},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:[]};Br.each(ce.aliases,Je=>{et.children?.push({key:this.base16.encode(Je.id),label:`${Je.label} #${Je.id}`,leaf:!0,icon:"pi pi-fw pi-clone",data:{id:Je.id,label:Je.label}})}),this.alias.push(et)}),this.displayFinder=!0}}],this.dockBottomItems=[],this.responsiveOptions=[{breakpoint:"1024px",numVisible:3},{breakpoint:"768px",numVisible:2},{breakpoint:"560px",numVisible:1}],this.nodeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedNode||this.cy?.$(`#${this.currentSelectedNode.data().id}`).remove()}},{label:"Clone",icon:"pi pi-clone",command:()=>{this.onCloneNode(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedNode||!this.currentStyle)return;let te=Br.uniq(Br.map(Br.filter(this.styleService.findOne(this.currentStyle)?.tags,ce=>ce.label&&"node"==ce.selector),ce=>({label:ce.label,value:ce.label})));te.unshift({label:"",value:""});let ue=this.currentSelectedNode.data().clone?this.currentSelectedNode.data().clone:this.currentSelectedNode.data().id;this.captureData={id:this.currentSelectedNode.data().id,clone:this.base16.decode(ue),label:this.currentSelectedNode.data().label,alias:this.currentSelectedNode.data().alias,tag:this.currentSelectedNode.data().tag,group:this.currentSelectedNode.data().group,tags:te},setTimeout(()=>{this.captureData.tag=this.currentSelectedNode.data().tag},100),this.displaySelectionNode=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}},{label:"Link to node",icon:"pi pi-upload",command:()=>{this.edgehandles=this.cy.edgehandles(),this.edgehandles.start(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Goto to alias",icon:"pi pi-arrow-right",command:()=>{this.onSelectAlias(this.currentSelectedNode)}}],this.edgeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedEdge||this.cy?.$(`#${this.currentSelectedEdge.data().id}`).remove()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedEdge||!this.currentStyle)return;let te=Br.uniq(Br.map(Br.filter(this.styleService.findOne(this.currentStyle)?.tags,ue=>ue.label&&"edge"==ue.selector),ue=>({label:ue.label,value:ue.label})));te.unshift({label:"",value:""}),this.captureData={id:this.currentSelectedEdge.data().id,label:this.currentSelectedEdge.data().label,tag:this.currentSelectedEdge.data().tag,tags:te},setTimeout(()=>{this.captureData.tag=this.currentSelectedEdge.data().tag},100),this.displaySelectionEdge=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}}],this.coreItem=[{label:"Fit",icon:"pi pi-globe",command:()=>{this.cy?.fit()}}],this.captureData={},this.currentSelectedNode=void 0,this.currentSelectedEdge=void 0,this.dataGroupStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayGroupStatistic=!1,this.dataTagStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayTagStatistic=!1,this.config={dark:!1};let W=this.preferenceService.findOne("default");W&&(this.preferences=W,this.preferenceService.apply()),this.subscriptions.push(this.parameter$.subscribe(te=>{this.logger.info(`Parameter: ${te}`),Br.each(this.rules,te.groupMode?ue=>{ue.enable()}:ue=>{ue.disable()}),this.edgehandles&&(te.drawMode?this.edgehandles.enableDrawMode():this.edgehandles.disableDrawMode()),te.zoom&&(this.preventDispatchZoom=!0,this.cy?.zoom(te.zoom),this.preventDispatchZoom=!1),this.onClearAnySelection()})),this.subscriptions.push(this.menu$.subscribe(te=>{switch(te.id){case Tu.graph_apply_rules:this.applyRuleset(!0,!1);break;case Tu.graph_change_properties:this.changeProperties();break;case Tu.graph_add_new_node:this.createNewNode();break;case Tu.statistics_groups:{let ue=Br.sortBy(Br.filter(Br.map(this.cy?.nodes(),Ne=>Ne.data().group),Ne=>Ne&&""!==Ne)),ce={};Br.each(ue,Ne=>{ce[Ne]?ce[Ne]+=1:ce[Ne]=1}),this.dataGroupStatistics={datasets:[{data:Br.map(ce,(Ne,et)=>Ne),backgroundColor:Br.map(ce,(Ne,et)=>{switch(Ne){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:Br.map(ce,(Ne,et)=>et)},this.displayGroupStatistic=!0}break;case Tu.statistics_tags:{let ue=Br.sortBy(Br.filter(Br.map(this.cy?.nodes(),Ne=>Ne.data().tag),Ne=>Ne&&""!==Ne&&void 0===Ne.alias)),ce={};Br.each(ue,Ne=>{ce[Ne]?ce[Ne]+=1:ce[Ne]=1}),this.dataTagStatistics={datasets:[{data:Br.map(ce,(Ne,et)=>Ne),backgroundColor:Br.map(ce,(Ne,et)=>{switch(Ne){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:Br.map(ce,(Ne,et)=>et)},this.displayTagStatistic=!0}break;case Tu.statistics_summary:{let ue=Br.map(this.cy?.nodes(),et=>et.data().tag);this.tagsSummary=Br.uniq(ue);let ce=this.buildFacts(),Ne=Br.map(this.cy?.nodes(),et=>({id:this.base16.decode(et.data().id),key:et.data().id,label:et.data().label,tag:et.data().tag,alias:void 0!==et.data().alias,rawAlias:et.data().alias}));this.markdownSummary=[],Br.each(this.tagsSummary,et=>{let Je=[],at=Br.sortBy(Br.map(Br.filter(ce,Zt=>"edges"===Zt.element.type&&(Zt.element.data.source?.tag===et||Zt.element.data.target?.tag===et)),Zt=>({id:Zt.element.data.source?.tag===et?Zt.element.data.source.id:Zt.element.data.target.id,label:Zt.element.data.label,source:Zt.element.data.source.id,target:Zt.element.data.target.id})),Zt=>Zt.id),kt=Br.sortBy(Br.filter(Ne,Zt=>!Zt.alias),Zt=>Zt.id);Br.each(Br.filter(kt,Zt=>Zt.tag===et),Zt=>{let yn={id:`${Zt.id}`,key:`${Zt.key}`,label:`${Zt.label}`,links:[]};Je.push(yn),Br.each(Br.filter(at,zt=>zt.id===Zt.id),zt=>{yn.links.push(Zt.id===zt.source?{action:"IN",label:`${zt.label}`,target:`${zt.target}`}:{action:"OUT",label:`${zt.label}`,target:`${zt.source}`})})}),this.markdownSummary.push(Je)}),this.displaySummary=!0}break;case Tu.graph_layout_bread_first:this.breadFirstLayoutOptions&&this.cy?.layout(this.breadFirstLayoutOptions).run(),this.onClearAnySelection();break;case Tu.graph_layout_concentric:this.concentricLayoutOptions&&this.cy?.layout(this.concentricLayoutOptions).run(),this.onClearAnySelection();break;case Tu.graph_layout_circle:this.circleLayoutOptions&&this.cy?.layout(this.circleLayoutOptions).run(),this.onClearAnySelection();break;case Tu.graph_layout_grid:this.gridLayoutOptions&&this.cy?.layout(this.gridLayoutOptions).run(),this.onClearAnySelection();break;case Tu.graph_layout_cose:this.coseLayoutOptions&&this.cy?.layout(this.coseLayoutOptions).run(),this.onClearAnySelection()}})),this.subscriptions.push(this.graph$.subscribe(te=>{if(te){if(this.firstLoad=!1,this.cy?.startBatch(),this.cy?.boxSelectionEnabled(this.boxSelectionEnabled),this.cy?.nodes().remove(),this.cy?.edges().remove(),h.info("graph",te),this.applyChangeProperties({style:te.style,rule:te.rules}),this.graphs=[],te.nodes&&(this.graphs.push(this.buildChildNodes(te)),this.allNodes=Br.map(te.nodes,ue=>({label:this.base16.decode(ue.id),value:this.base16.decode(ue.id)})),this.allNodes.unshift({label:"",value:""}),this.cy?.add(Br.map(te.nodes,ue=>{let ce={data:{id:ue.id,label:ue.label,cdata:ue.cdata,alias:ue.alias,group:ue.group,tag:ue.tag},position:{x:ue.x,y:ue.y}};return ue.parent&&(ce.data.parent=ue.parent),ce}))),te.edges){this.graphs.push(this.buildChildEdges(te));let ue={};this.cy?.add(Br.map(te.edges,ce=>({data:{id:this.base16.encode(this.graphsService.buildId(ue,{source:this.base16.decode(ce.source),target:this.base16.decode(ce.target)})),label:ce.label,cdata:ce.cdata,source:ce.source||"",target:ce.target||"",_source:w.decode(ce.source||""),_target:w.decode(ce.target||""),tag:ce.tag}})))}if(this.cy){this.edgehandles&&this.edgehandles.destroy(),Br.each(this.rules,Ne=>{Ne.destroy()}),this.rules=[];let ue=Br.uniq(Br.map(Br.filter(te.nodes,Ne=>""!==Ne.group),Ne=>Ne.group)),ce=this.cy;this.edgehandles=ce.edgehandles(),Br.each(ue,Ne=>{let et=this.cy?.$(`[group = "${Ne}"]`);this.rules.push(ce.automove({nodesMatching:et,reposition:"drag",dragWith:et}))})}this.cy?.endBatch(),this.cy?.fit(),this.route.queryParams.subscribe(ue=>{if(this.activeQueryParams=ue,this.activeQueryParams.zoom){let ce=Number(this.activeQueryParams.zoom);this.cy?.zoom(ce)}this.activeQueryParams.nodeId&&this.selectGraphItem({nodeId:this.activeQueryParams.nodeId},this.coreItem,!1),this.activeQueryParams.edgeId&&this.selectGraphItem({nodeId:this.activeQueryParams.edgeId},this.coreItem,!1)}),this.preferences.applyRules&&setTimeout(()=>{this.applyRuleset(!1,!0)},1)}}))}ngOnInit(){this.items=this.coreItem}ngAfterViewInit(){this.cy=iS({container:this.myGraph?.nativeElement,layout:{name:"preset"},motionBlur:!0,selectionType:"single",boxSelectionEnabled:!1}),this.preferences.grid&&this.cy?.snapToGrid(),this.cy.on("mouseover",e=>{this.logger.debug(e)}),this.cy.on("mouseout",e=>{this.logger.debug(e)}),this.cy.on("zoom",e=>{let n=this.cy?.zoom();n&&!this.preventDispatchZoom&&this.store.dispatch(sP({message:n})),this.activeQueryParams={nodeId:this.activeQueryParams.nodeId,edgeId:this.activeQueryParams.edgeId,zoom:n},this.router.navigate([this.activeRoute],{queryParams:this.activeQueryParams})}),this.cy.on("dblclick","node",e=>{this.onDblClickNode(e,e.target.id(),this.nodeItem)}),this.cy.on("dblclick","edge",e=>{this.onDblClickEdge(e,e.target.id(),this.edgeItem)}),this.cy.on("cxttap","node",e=>{this.onRightClickNode(e,e.target.id(),this.nodeItem)}),this.cy.on("cxttap","edge",e=>{this.onRightClickEdge(e,e.target.id(),this.edgeItem)}),this.cy.on("click",e=>{this.onClearAnySelection()}),this.cy.on("click","node",e=>{this.onLeftClickNode(e,e.target.id(),this.nodeItem)}),this.cy.on("click","edge",e=>{this.onLeftClickEdge(e,e.target.id(),this.edgeItem)}),this.cy.on("mouseover",e=>{}),this.route.url.subscribe(e=>{this.activeRoute=e.join("/")}),this.route.queryParams.subscribe(e=>{this.activeQueryParams=e}),this.route.params.subscribe(e=>{this.id=e.label;let n=this.graphsService.findOne(this.id+"");n&&this.store.dispatch(_x({graph:n}))}),setTimeout(()=>{this.store.dispatch(iP({message:!1})),this.store.dispatch(rP({message:!0}))})}selectGraphItem(e,n,r){if(e.nodeId&&(this.selectorDisplay=e.nodeId,this.activeQueryParams={nodeId:e.nodeId,zoom:this.cy?.zoom()},!this.firstLoad)){let s=this.cy?.$(`#${this.base16.encode(e.nodeId)}`);this.logger.info("Center on node",e.nodeId,s),this.cy?.center(s),this.firstLoad=!0}if(e.edgeId&&(this.selectorDisplay=e.edgeId,this.activeQueryParams={edgeId:e.edgeId,zoom:this.cy?.zoom()},!this.firstLoad)){let s=this.cy?.$(`#${this.base16.encode(e.edgeId)}`);this.logger.info("Center on node",e.edgeId,s),this.cy?.center(s),this.firstLoad=!0}n&&(this.items=n),r&&this.router.navigate([this.activeRoute],{queryParams:this.activeQueryParams})}onSelectAlias(e){if(e.data()&&e.data().alias){let n=this.cy?.$(`#${this.base16.encode(e.data().alias)}`);this.logger.info("Alias",e.data().alias,n),this.cy?.center(n)}}findNode(e){if(void 0!==e.clone&&""!=e.clone){let n=this.cy?.$(`#${this.base16.encode(e.clone)}`);if(e.id!==this.base16.encode(e.clone)&&n&&n.length>0)return void this.raiseError("While checking unicity of",e.clone)}return this.cy?.$(`#${e.id}`)}applyNodeUpdate(e){this.findNode(e)?.data("clone",this.base16.encode(e.clone)).data("alias",e.alias).data("group",e.group?e.group:"").data("label",e.label).data("tag",e.tag),this.displaySelectionNode=!1,this.preferences.applyRules&&this.applyRuleset(!1,!1)}applyLabelize(e){let n=e.label.toLowerCase();n=Br.kebabCase(n),e.clone=`${e.tag}/${n}`}applyEdgeUpdate(e){this.cy?.$(`#${e.id}`).data("label",e.label).data("tag",e.tag),this.displaySelectionEdge=!1,this.preferences.applyRules&&this.applyRuleset(!1,!1)}applyChangeProperties(e){this.cy?.style(this.retrieveStyle(e.style)),setTimeout(()=>{this.logger.info(`Apply style ${e.style}`),this.currentStyle=e.style;let n=this.styleService.findOne(this.currentStyle)?.tags.length;n&&(this.currentStyleCounter=n),this.logger.info("Apply ruleset",e.rule),this.currentRules=e.rule;let r=this.rulesService.findOne(this.currentRules)?.rules.length;r?this.currentRulesCounter=r:this.logger.warn(`Ruleset ${e.rules} empty`),this.displayChangeProperties=!1},1)}buildFacts(){let e=Br.map(this.cy?.nodes(),s=>({element:{type:"node",data:{id:this.base16.decode(s.data().id),label:s.data().label,tag:s.data().tag,alias:s.data().alias}}})),n=Br.map(this.cy?.edges(),s=>({element:{type:"edges",data:{id:this.base16.decode(s.data().id),label:s.data().label,tag:s.data().tag,source:{id:this.base16.decode(s.source().id()),tag:s.source().data().tag},target:{id:this.base16.decode(s.target().id()),tag:s.target().data().tag}}}})),r=[];return Br.each(e,s=>{r.push(s)}),Br.each(n,s=>{r.push(s)}),r}applyRuleset(e,n){let r=this.buildFacts();this.logger.debug("Execute",this.currentRules,r),n?this.rulesService.jsondataEngine(this.currentRules,r,!1,!1).then(s=>{this.logger.info(s),this.jsonRules=s.treenodes,this.currentRulesFail=s.failure.length,this.currentRulesSuccess=s.success.length,this.displaySidebar=e}):this.rulesService.jsondataEngine(this.currentRules,r,!1,!0).then(s=>{this.logger.info(s),this.jsonRules=s.treenodes,this.currentRulesFail=s.failure.length,this.currentRulesSuccess=s.success.length,this.displaySidebar=e})}onSelectCurrentAlias(e){let n=this.cy?.$(`#${this.selectedAlias.key}`);this.logger.info(`Center on alias ${this.selectedAlias.key}`),this.cy?.center(n),this.displayFinder=!1}onSelectItem(e){this.logger.info("SELECT/ITEM",e),this.logger.info(`Center on item ${e.node.data.uid}`);let n=this.cy?.$(`#${e.node.data.uid}`);this.cy?.center(n),this.displaySidebar=!1}ngOnDestroy(){this.subscriptions&&Br.each(this.subscriptions,e=>{e.unsubscribe()})}onHide(){this.onClearAnySelection()}createNewNode(){let e=this.base16.encode(`default@${Mz()}`);this.cy?.add([{data:{id:e,label:"default",cdata:"TODO ...",tag:""},position:{x:0,y:0}}]);let n=this.cy?.$(`#${e}`);this.logger.info(`Center on created node ${e}`),this.cy?.center(n)}changeProperties(){this.captureData={styles:Br.map(this.styleService.findAll(),e=>e.id),style:"default",rules:Br.map(this.rulesService.findAll(),e=>e.id),rule:"default"},this.displayChangeProperties=!0}nodeSelect(e){let r=this.cy?.$(`#${this.selectedNode.key}`);this.logger.info(`Center on select node ${this.selectedNode.key}`),this.cy?.center(r),this.displayFinder=!1}nodeSummarySelect(e){let n=this.cy?.$(`#${e}`);this.logger.info(`Center on select node ${e}`),this.cy?.center(n),this.displaySummary=!1}buildChildNodes(e){return{key:"1",label:"Nodes",data:{uid:1,label:"Nodes"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:Br.map(e.nodes,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,label:n.label},icon:"pi pi-fw pi-clone",children:[]}))}}buildChildEdges(e){return{key:"1",label:"Edges",data:{uid:2,label:"Edges"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:Br.map(e.edges,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,_source:n.source,_target:n.target,label:n.label},icon:"pi pi-fw pi-share-alt",children:[]}))}}onFileDropped(e){let n=e[0].name;this.id&&n.startsWith("style")&&n.endsWith(".json")?this.onFileStyleDropped(e):this.id&&n.startsWith("rule")&&n.endsWith(".json")?this.onFileRuleDropped(e):this.id&&n.endsWith(".gexf")&&this.onFileGexfDropped(e)}onFileGexfDropped(e){this.messageService.add({key:"bc",severity:"info",summary:"Upload/GEXF",detail:`Filename ${e[0].name}`}),this.id&&this.graphsService.uploadHandler(e[0],this.id,this.id).then(n=>{this.graphsService.store(n,r=>{r.label=n.label,r.style=n.style,r.rules=n.rules,r.nodes=n.nodes,r.edges=n.edges}),this.store.dispatch(_x({graph:n}))})}onFileStyleDropped(e){var n=this;let r=e[0].name;this.currentStyle=r,this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${e[0].name}`});let s=new FileReader;s.addEventListener("loadend",A_(function*(){let a={id:r,tags:JSON.parse(s.result+"")};n.styleService.store(a,u=>{u.tags=a.tags}),n.applyChangeProperties({style:n.currentStyle,rule:n.currentRules}),n.store.dispatch(Dz({style:a}))})),s.readAsText(e[0])}onFileRuleDropped(e){var n=this;let r=e[0].name;this.currentRules=r,this.messageService.add({key:"bc",severity:"info",summary:"Upload/Rule",detail:`Filename ${r}`});let s=new FileReader;s.addEventListener("loadend",A_(function*(){n.rulesService.load(r,JSON.parse(s.result+"")),n.applyChangeProperties({style:n.currentStyle,rule:n.currentRules})})),s.readAsText(e[0])}onRightClickNode(e,n,r){this.selectGraphItem({nodeId:this.base16.decode(n)},r,!0),this.logger.info("[NODE] rclick",e)}onRightClickEdge(e,n,r){this.selectGraphItem({edgeId:this.base16.decode(n)},r,!0),this.logger.info("[EDGE] rclick",e)}onDblClickNode(e,n,r){this.selectGraphItem({nodeId:this.base16.decode(n)},r,!0),this.logger.info("[NODE] dblclick",e)}onDblClickEdge(e,n,r){this.selectGraphItem({edgeId:this.base16.decode(n)},r,!0),this.logger.info("[EDGE] dblclick",e)}onLeftClickNode(e,n,r){this.selectGraphItem({nodeId:this.base16.decode(n)},r,!0),this.logger.info("[NODE] lclick",e),this.currentSelectedEdge=void 0,this.currentSelectedNode=e.target[0];let s="";if(this.currentSelectedNode.data().cdata&&(s=this.currentSelectedNode.data().cdata,this.currentSelectedNode.data().alias)){let a=this.base16.encode(this.currentSelectedNode.data().alias),u=this.cy?.$(`#${a}`);u&&(s=u[0].data().cdata)}this.captureData=this.currentSelectedNode.data().cdata?{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:YP.render(s),selectElementRawCdata:s}:{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:"",selectElementRawCdata:s},this._lockedElement=this.currentSelectedNode.locked()}onLeftClickEdge(e,n,r){this.selectGraphItem({edgeId:this.base16.decode(n)},r,!0),this.logger.info("[EDGE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.currentSelectedNode=void 0,this.currentSelectedEdge=e.target[0],this.captureData=this.currentSelectedEdge.data().cdata?{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:YP.render(this.currentSelectedEdge.data().cdata),selectElementRawCdata:this.currentSelectedEdge.data().cdata}:{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:"",selectElementRawCdata:this.currentSelectedEdge.data().cdata}}previewNewCData(e){e.selectElementCdata=YP.render(e.selectElementRawCdata)}applyNewCData(e){this.logger.info("Apply new data on id",this.base16.decode(e.selectElementId)),this.cy?.$(`#${e.selectElementId}`).data("cdata",e.selectElementRawCdata),this.displayMarkdown=!1}onCloneNode(e){1===e.length&&e[0].isNode()&&this.cy?.add(Br.map(e,n=>{let s=`${this.base16.decode(n.data()?.id).split("@")[0]}@${Mz()}`,a={data:{id:this.base16.encode(s),label:n.data()?.label,alias:this.base16.decode(n.data()?.id),cdata:"TODO ...",group:"",tag:n.data()?.tag},position:{x:n.position().x+50,y:n.position().y+50}};return n.data()?.parent&&(a.data.parent=n.data()?.parent),this.logger.info("Clone node",a),a}))}onCloneEdge(e){}onClearAnySelection(){this.logger.info("Clear selection"),this.selectorDisplay="",this.currentSelectedEdge=void 0,this.currentSelectedNode=void 0,this.items=this.coreItem}retrieveStyle(e){let n=this.styleService.findOne(e)?.tags,r=[];Br.each(n,a=>{if(a.label)r.push({selector:`${a.selector}[tag = '${a.label}']`,css:a.style?.css?a.style?.css:{}});else{let u={selector:`${a.selector}`,css:a.style?.css?a.style?.css:{}};void 0===u.css.content&&(u.css.content=h=>{let m=h.data().cdata?"*":"",w=h.data().alias?"@":"";return h.data().label&&h.data().group?`${h.data().label} (${h.data().group}) ${m} ${w}`:h.data().label?`${h.data().label} ${m} ${w}`:""}),r.push(u)}});let s=[];return Br.each(r,a=>{s.push(a)}),s}handleChangeLock(e){if(!this.currentSelectedNode)return;this.logger.info("lock",this.currentSelectedNode.data().id);let n=this.cy?.$(`#${this.currentSelectedNode.data().id}`);this.logger.info("lock",n),e.checked?(n?.lock(),n?.animate({style:{opacity:.2}},{duration:1e3})):(n?.animate({style:{opacity:1}},{duration:1e3}),n?.unlock())}resolveClonedId(e){let n=this.cy?.$(`#${e}`)[0];return n?.data().clone||n?.data().id||void 0}toSysGraph(e,n,r,s){let a={};return this.logger.info(`toSysGraph style: ${r}`),{id:e,style:r||"default",rules:s||"default",label:n,nodes:Br.map(this.cy?.nodes(),u=>{let h={id:u.data().clone||u.data().id||"",label:u.data().label||"",x:u.position().x||0,y:u.position().y||0,size:10,color:"0",group:u.data().group,tag:u.data().tag};return a[u.data().id||""]=h,u.data().alias&&(h.alias=u.data().alias),u.data().cdata&&(h.cdata=u.data().cdata),u.data().parent&&(h.parent=u.data().parent),h}),edges:Br.map(this.cy?.edges(),u=>{let h=this.resolveClonedId(u.data().source),m=this.resolveClonedId(u.data().target);if(void 0===h||void 0===m)throw this.logger.error("Internal error while resolving source and target"),new String("Internal error while resolving source and target");let w={id:u.data().id||"",label:u.data().label||"",source:h,target:m,cdata:u.data().cdata,tag:u.data().tag};return u.data().cdata&&(w.cdata=u.data().cdata),w})}}gexf(e,n,r,s){let a=this.toSysGraph(e,n,r,s);this.clipboardService.copyTextToClipboard(this.graphsService.toGexf(a).join("\n"))}graphml(e,n,r,s){let a=this.toSysGraph(e,n,r,s);this.clipboardService.copyTextToClipboard(this.graphsService.toGraphml(a).join("\n"))}raiseError(e,n){this.messageService.add({key:"lc",severity:"error",summary:e,detail:n})}updateChartOptions(){this.chartOptions=this.config&&this.config.dark?this.getDarkTheme():this.getLightTheme()}getLightTheme(){return{plugins:{legend:{labels:{color:"#495057"}}},scales:{r:{grid:{color:"#ebedef"}}}}}getDarkTheme(){return{plugins:{legend:{labels:{color:"#ebedef"}}},scales:{r:{grid:{color:"rgba(255,255,255,0.2)"}}}}}}return i.\u0275fac=function(e){return new(e||i)(Tn(Sx),Tn(Lz),Tn(Rz),Tn(Oz),Tn(BI),Tn(Ph),Tn(qd),Tn(Hm),Tn(NI),Tn(Gm),Tn(w_))},i.\u0275cmp=hs({type:i,selectors:[["app-graph-cytoscape"]],viewQuery:function(e,n){if(1&e&&(Rs(bme,5),Rs(Cme,5),Rs(wme,5)),2&e){let r;jr(r=$r())&&(n.myGraph=r.first),jr(r=$r())&&(n.myPng=r.first),jr(r=$r())&&(n.myTreeTable=r.first)}},decls:81,vars:119,consts:[[3,"target","model"],["cm",""],["position","bottom-center","key","bc"],["position","left-center","key","lc"],[1,"dock-window"],["position","left",3,"model"],["pTemplate","item"],["position","right",3,"model"],["position","bottom",3,"model"],["area",""],[1,"flex"],["dropZoneDirective","",1,"w-12",3,"fileDropped"],["id","cytoscape",1,"cytoscape-container"],["myCytoscape",""],[1,"flex","flex-wrap"],[1,"grid-inputgroup-left","flex","flex-wrap"],[1,"flex",3,"click"],["pBadge","","pTooltip","Successful ruleset","severity","success",1,"pi","pi-thumbs-up","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Fail ruleset","severity","danger",1,"pi","pi-thumbs-down","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Global ruleset counter","severity","success",1,"pi","pi-briefcase","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Tags",1,"pi","pi-book","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["header","Current node",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["class","grid p-fluid",4,"ngIf"],["pTemplate","footer"],["header","Current edge",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["header","Change graph properties",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[1,"grid","p-fluid"],[1,"col-12"],["pTooltip","Styles","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a style","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Rules","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a ruleset","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["header","Documentation",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[3,"style",4,"ngIf"],["header","Group statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["type","polarArea",3,"data","options"],["header","Tag statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["header","Png file to export","header","Png export",3,"modal","visible","visibleChange"],["src",""],["myPng",""],["header","Find element(s)",3,"modal","visible","visibleChange"],["header","Node(s) and edges(s)"],["selectionMode","single","filterMode","strict",3,"value","selection","filter","selectionChange","onNodeSelect"],["myTree",""],["header","Alias"],["myTreeAlias",""],["header","Ruleset report",3,"modal","visible","visibleChange"],["styleClass","p-treetable-sm",3,"value"],["pTemplate","header"],["pTemplate","body"],["header","Sumary",3,"modal","visible","visibleChange"],[3,"header",4,"ngFor","ngForOf"],["width","100%",3,"src","alt"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["pTooltip","Internal ID to override current ID on next save or diagram export","tooltipPosition","top",1,"pi","pi-bookmark"],["type","text","pInputText","","placeholder","",3,"ngModel","ngModelChange"],["icon","pi pi-check","label","Labelize","styleClass","p-button-text","pTooltip","Rebuild id with tag and label","tooltipPosition","top",3,"click"],["pTooltip","Label","tooltipPosition","top",1,"pi","pi-hashtag"],["pTooltip","Alias","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select an alias","filterBy","label",1,"p-col",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Tags","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a tag","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Group","tooltipPosition","top",1,"pi","pi-clone"],["pTooltip","Locked item ?","tooltipPosition","top",1,"p-inputgroup-addon"],["inputId","binary",3,"ngModel","binary","ngModelChange","onChange"],["type","text","pInputText","","placeholder","Locked","readonly","true"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"],["pTooltip","Source","tooltipPosition","top",1,"pi","pi-cog"],["type","text","pInputText","","placeholder","","readonly","true",3,"ngModel","ngModelChange"],["pTooltip","Target","tooltipPosition","top",1,"pi","pi-cog"],["pTemplate",""],["pInputTextarea","",3,"ngModel","keyup","ngModelChange"],[3,"innerHTML"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","offIcon","pi pi-times",3,"ngModel","onIcon","ngModelChange",4,"ngIf"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click",4,"ngIf"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","offIcon","pi pi-times",3,"ngModel","onIcon","ngModelChange"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click"],[2,"width","65%"],[2,"width","20%"],[2,"width","5%"],[3,"rowNode"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"pi","pi-check"],[1,"pi","pi-times"],[3,"click"],[1,"pi","pi-search"],[3,"header"],[4,"ngFor","ngForOf"],[1,"pi","pi-search",3,"click"]],template:function(e,n){1&e&&(Ri(0,"p-contextMenu",0,1)(2,"p-toast",2)(3,"p-toast",3),Pt(4,"div",4)(5,"p-dock",5),At(6,xme,1,2,"ng-template",6),Nt(),Pt(7,"p-dock",7),At(8,Ame,1,2,"ng-template",6),Nt(),Pt(9,"p-dock",8),At(10,Ime,1,2,"ng-template",6),Nt()(),Pt(11,"div",null,9)(13,"div",10)(14,"div",11),si("fileDropped",function(s){return n.onFileDropped(s)}),Ri(15,"div",12,13),Nt()(),Pt(17,"div")(18,"div",14)(19,"div",15)(20,"div",16),si("click",function(){return n.applyRuleset(!0,!1)}),Ri(21,"i",17),Nt(),Pt(22,"div",16),si("click",function(){return n.applyRuleset(!0,!0)}),Ri(23,"i",18),Nt(),Pt(24,"div",10),Ri(25,"i",19),Nt(),Pt(26,"div",10),ur(27),Nt(),Pt(28,"div"),ur(29,"\xa0\xa0\xa0"),Nt(),Pt(30,"div",10),Ri(31,"i",20),Nt(),Pt(32,"div"),ur(33,"\xa0\xa0\xa0"),Nt(),Pt(34,"div",10),ur(35),Nt(),Pt(36,"div"),ur(37,"\xa0\xa0\xa0"),Nt(),Pt(38,"div",10),ur(39),Nt()()()()(),Pt(40,"p-dialog",21),si("visibleChange",function(s){return n.displaySelectionNode=s})("onHide",function(){return n.onHide()}),At(41,Sme,28,19,"div",22),At(42,Eme,1,0,"ng-template",23),Nt(),Pt(43,"p-dialog",24),si("visibleChange",function(s){return n.displaySelectionEdge=s})("onHide",function(){return n.onHide()}),At(44,Tme,19,10,"div",22),At(45,Mme,1,0,"ng-template",23),Nt(),Pt(46,"p-dialog",25),si("visibleChange",function(s){return n.displayChangeProperties=s})("onHide",function(){return n.onHide()}),Pt(47,"div",26)(48,"div",27)(49,"div",28)(50,"p-dropdown",29),si("ngModelChange",function(s){return n.captureData.style=s}),Nt()()(),Pt(51,"div",27)(52,"div",30)(53,"p-dropdown",31),si("ngModelChange",function(s){return n.captureData.rule=s}),Nt()()()(),At(54,Dme,1,0,"ng-template",23),Nt(),Pt(55,"p-dialog",32),si("visibleChange",function(s){return n.displayMarkdown=s})("onHide",function(){return n.onHide()}),At(56,Rme,3,3,"p-splitter",33),At(57,Fme,2,3,"p-splitter",33),At(58,zme,2,2,"ng-template",23),Nt(),Pt(59,"p-dialog",34),si("visibleChange",function(s){return n.displayGroupStatistic=s}),Ri(60,"p-chart",35),Nt(),Pt(61,"p-dialog",36),si("visibleChange",function(s){return n.displayTagStatistic=s}),Ri(62,"p-chart",35),Nt(),Pt(63,"p-dialog",37),si("visibleChange",function(s){return n.displayExportPng=s}),Ri(64,"img",38,39)(66,"img"),Nt(),Pt(67,"p-dialog",40),si("visibleChange",function(s){return n.displayFinder=s}),Pt(68,"p-tabView")(69,"p-tabPanel",41)(70,"p-tree",42,43),si("selectionChange",function(s){return n.selectedNode=s})("onNodeSelect",function(s){return n.nodeSelect(s)}),Nt()(),Pt(72,"p-tabPanel",44)(73,"p-tree",42,45),si("selectionChange",function(s){return n.selectedAlias=s})("onNodeSelect",function(s){return n.onSelectCurrentAlias(s)}),Nt()()()(),Pt(75,"p-dialog",46),si("visibleChange",function(s){return n.displaySidebar=s}),Pt(76,"p-treeTable",47),At(77,Vme,11,0,"ng-template",48),At(78,Yme,14,11,"ng-template",49),Nt()(),Pt(79,"p-dialog",50),si("visibleChange",function(s){return n.displaySummary=s}),At(80,Qme,2,2,"p-panel",51),Nt()),2&e&&(He("target",_o(12))("model",n.items),tt(5),He("model",n.dockLeftItems),tt(2),He("model",n.dockRightItems),tt(2),He("model",n.dockBottomItems),tt(5),co(mo(104,Jme)),tt(7),p0("value",n.currentRulesSuccess),tt(2),p0("value",n.currentRulesFail),tt(2),p0("value",n.currentRulesCounter),tt(2),cc("Ruleset: ",n.currentRules,""),tt(4),p0("value",n.currentStyleCounter),tt(4),cc("Style: ",n.currentStyle,""),tt(4),cc("Current selection: ",n.selectorDisplay,""),tt(1),co(mo(105,eve)),He("visible",n.displaySelectionNode)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),tt(1),He("ngIf",n.currentSelectedNode),tt(2),co(mo(106,tve)),He("visible",n.displaySelectionEdge)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),tt(1),He("ngIf",n.currentSelectedEdge),tt(2),co(mo(107,nve)),He("visible",n.displayChangeProperties)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),tt(4),co(mo(108,u1)),He("options",n.captureData.styles)("ngModel",n.captureData.style)("filter",!0)("showClear",!0),tt(3),co(mo(109,u1)),He("options",n.captureData.rules)("ngModel",n.captureData.rule)("filter",!0)("showClear",!0),tt(2),co(mo(110,p8)),He("visible",n.displayMarkdown)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),tt(1),He("ngIf",!n.captureData.isAlias&&n.captureData.editable),tt(1),He("ngIf",n.captureData.isAlias||!n.captureData.editable),tt(2),co(mo(111,g8)),He("visible",n.displayGroupStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),tt(1),co(mo(112,m8)),He("data",n.dataGroupStatistics)("options",n.chartOptions),tt(1),co(mo(113,g8)),He("visible",n.displayTagStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),tt(1),co(mo(114,m8)),He("data",n.dataTagStatistics)("options",n.chartOptions),tt(1),co(mo(115,p8)),He("modal",!0)("visible",n.displayExportPng),tt(4),co(mo(116,ive)),He("modal",!0)("visible",n.displayFinder),tt(3),He("value",n.graphs)("selection",n.selectedNode)("filter",!0),tt(3),He("value",n.alias)("selection",n.selectedAlias)("filter",!0),tt(2),co(mo(117,v8)),He("modal",!0)("visible",n.displaySidebar),tt(1),He("value",n.jsonRules),tt(3),co(mo(118,v8)),He("modal",!0)("visible",n.displaySummary),tt(1),He("ngForOf",n.tagsSummary))},dependencies:[Ec,wo,Kl,KI,tS,Nz,Rv,W2,Nx,vC,Ooe,Bz,M0,D0,kv,Uz,Vz,$z,rS,Pce,Uce,oP,Zz,hme,d8,_me,NS],styles:[".cytoscape-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}.grid-inputgroup-left[_ngcontent-%COMP%]{justify-content:left;align-items:left}.grid-inputgroup-right[_ngcontent-%COMP%]{justify-content:right;align-items:right}"]}),i})(),lve=(()=>{class i{constructor(){}uploadHandler(e){return new Promise(n=>{let r=new FileReader;r.addEventListener("loadend",A_(function*(){for(var s=new Uint8Array(r.result),a=s.length,u=[];a--;)u[a]=String.fromCharCode(s[a]);var h=window.btoa(u.join(""));n(h)})),r.readAsArrayBuffer(e)})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const uve=["myImg"];function cve(i,t){1&i&&(Pt(0,"pre"),ur(1,"Drop here"),Nt())}function hve(i,t){1&i&&Ri(0,"img",2,3),2&i&&He("src",Ze().viewer,Hd)}const dve=function(){return{height:"256px"}};let fve=(()=>{class i{constructor(e,n,r,s){this.logger=e,this.messageService=n,this.clipboardService=r,this.converterService=s,this.viewer="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAgAElEQVR4nO3dT8hsW3rX8edUvfd27unb/iFR9NJpK90d2+hInAiJKHrVBjmke6Akk0hwboYOVFicQzqSIIZGBEVQcKLQoFwjIgYRB04jUTCgkmijgkZDHCR0MB73es9blV1v7T9rV63az289+7tgD5K367PqWWtX/Z573npX2ccf/5H3u+u97rJrRn7c0+Pf7114eHh4eHh4yl6oYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw5v2Hh4evrLb7f52/+p+9LeuvZ5bt3r5+SmvHx4eXoWhXgweXkRvv9+/efHixdvj1f3o6qvv1PLy81NePzw8vGHPdXI8PLx5r98AmFj4P2sAJNcPDw9v2HOdHA8Pb947NgAmGP69BkB2/fDw8IY918nx8PDmvd1u99pEwz9f+fkprx8eHt6w5zo5Hh7evNf9KJlo+D95qWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeLW8j7vri8LPb0teMt3wn20ABNZvK15+vX4s/Pzw1LxQxeDV8v5Ed/1qd33TnjUBIs9va14y3fCfbABE1m8L3qG7fr67vtVdrwSfH56iF6oYvBreMfyPb+6nJkDk+W3RS6Yb/qMNgND6RfcO9i78j/sx2AQEqhevlheqGLxbvefhf2oCuiD4osDz26qXTDf8BxsAsfWL7B3sPPwHm4BA9eLV9EIVg3eLNxb+x3D45suXH3xPoHpb8pLphv9FAyC4flG9gw2H/1kTEKhevNpeqGLw7hX+x+vYBLReb2teMt3wP2sARNcvonew6fA/NQEPDw9fCVAv3j28UMXg3TP8T01A/nXAis8Pr9cACIb/qQEQXr9o3sHKwv+4p9967733vtpwvXj38kIVg3fv8D/+7OKvA+70/PDejWS64f/YAIivXyTvYMvC/9QEPP1LwL2fH16DnuvkeE2F/+ImQKTeZr1uJOHwPzYAsusXyDvYdeF/3N/JPxEUrBdvBc91crwmw7+4CRCpt2lvt9u9Fg7/t/n5Ka9fEO9gt4X/8VrUBARaP7xbh3oxeKuG/2wTIFJv895+v3+jGv758fn5Ka9fAO9gdcJ/URMQaP3wRjzXyfGaD//RJkCk3hBevwEwsfB/1gBIrl/j3sHqhn9RExBo/fAmPNfJ8Vb17hX+F02ASL1hvGMDYILh32sAZNevYe9g9wn/ySYg0PrhzXiuk+Ot5t07/E9NwAtODKzu5d+xm2j45+vpMwDV6lXfj5W8g903/AebgEDrh1fguU6Ot4q3VvgfPU4MrOxZ4dcBD10r/fVAqlmv+n6s4B1snfA/awICrR9eoReqGLyLsXb4Hy9ODKzrJdMN/6sagMb3457ewdYN/1MTwImB2/NCFYN3NrzC/9QEvODEwFpeMt3wX9wABNiPe3kH8wn/o8GJgVv3QhWzXc87/I8/48TAOl4y3fBf1AAE2Y97eAfzDf9TE8CJgRv1QhWzXU8l/Bc3ASLrp+gl0w3/4gYg0H7U9g6mEf5HjxMDt+aFKma7nlr4FzcBIuun6iXTCYerGoBg+1HTO5hW+B8vTgzciheqmO16quE/2wSIrJ+yl0wrHBY1AALrp+odTDP8FzUBgfZje16oYrbrqYf/aBMgsn7qXjK9cChqAETWT9E7mHb4FzUBgfZjm16oYrbptRL+F02AyPq14CXT3t9Uud7BEcg7WBvhP9kEBNqP7Xqhitme11r4n5qAF5wYuMRLpr2/qXK9FyOQd7C2wn+wCQi0H9v2QhWzLa/V8D96nBhY7iXT3t9Uud6zEcg7WJvhf9YEBNoPvFDFbMdrPfyPFycGlo1k2vubKtd7GoG8g7Ud/qcmgBMDA3mhitmGFyX8T03AC04MnBvJtPc3Va7XgnkHixH+R4MTA6N4oYqJ70UL/+PPODFweiTT3t8kvn6Ef32PEwMDea6T4xV5X7KY4b+4CRDZj9W8biTx/U3K6+fo5fs539eKr7caXn4/+tId1w9vBc91crxF3huL8+YxdHFi4IC32+1eK+9vfn7K6+fkHSzmf/n3vZ+44/rhreC5To53lXfWBDT85rG4CRDdj7t7+/3+jfL+5uenvH6EP+GPN+y5To53tffYBDT85rG4CRDfj7t6/QbABPe31wBIrh/hT/jjDXuuk+Nd7+12ux9t9M1jcRPQwn7c0zs2ACa6v08NgOz6Ef6EP96w5zo53m1e98b7tcbePBY3AS84MfD9/Dt209iPQe/pMwDV6lXfD8L/LuuH5+C5To53u5f/JcDaePO41tv8iYFW+HXAQ9dK+5tq1qu+H4R/9fXDc/JCFbNhb/CvA+auht6Mtn5iYDKt/Xjupcr1Lh6EP+GPt9wLVczGvUVNQINvRls+MTCZ3n70f54q17toEP6EP14lL1Qx2/OKmoCG34y2emJgMs39WNwABNmPPA5G+N+yfnhqXqhitutNNgENvxktbgJE9qOGl0x3P4obgED7cTDC/5b1w1PzQhWDx4mBWvtxq5dMez9S5XpnB+FP+ONV8kIVg3ccnBiotR+3eMm09yNVrndyEP6EP14lL1QxeM8HJwZq7ce1XjLt/UiV6x0dhD/hj1fRC1UM3oXHiYFa+3Gll0x7P1LlegcH4U/441X2QhWDN+hxYuBt6yfgJdPej1S53otB+BP+eHfwQhWDN+pxYuBt6+fsJdPej1S53rNB+BP+eHfyQhWDN+dxYuBt6+flJdPej1S53tMg/Al/vDt6oYrBK/E4MfC29fPwkmnvR6pcrzl7ByP8b1k/vFa8UMXglXqcGHjb+q3tJdPejyS+foQ/4Y9Xa6gXg1fkcWLgbeu3mteNJL4fSXn9CH/CH6/SUC8Gb5HHiYFa+zHo7Xa718r7kZ+f8voR/oQ/XoWhXgzeVR4nBmrtx4W33+/fKO9Hfn7K60f4E/54w57r5HgyHicGau3HmddvAArrXXU/eg2A5PoR/oQ/3rDnOjmejseJgVr70feODcDCelfbj6cGQHb9CP+7rR9e457r5HhaHicG3rZ+9/Ly79ivrHeV/Xj6DEC1egl/wh9vHc91cjw9jxMDb1u/e3hW+HXAI/WusR+pZr2EP+GPt44Xqhi8ah4nBt62frW9dGO9996PVLnexYPwJ/zxlnuhisGr6nFi4G3rV9NLFeq9536kyvUuGoQ/4Y9XyQtVDN6tHicG3rZ+tbxUqd577UeqXG/xIPwJf7xKXqhi8Gp5nBh42/rV8FLFeu+xH6lyvUWD8Cf88Sp5oYrBq+1xYqDvfqTK9dZev1S53tlB+BP+eJW8UMXg3cvjxEC//Uji65cq1zs5CH/CH6+SF6oYvHt7nBjosx9JfP1S5XpHB+FP+ONV9EIVg3d3jxMDXfYjia9fqlzv4CD8CX+8yl6oYvBW8Tgx8Lb1u8JL4uuXKtd7MQh/wh/vDl6oYvBW8zgx8Lb1W+gl8fVLles9G4Q/4Y93Jy9UMXhre5wYeNv6lY60Ur3XeqlyvadB+BP+eHf0QhWD5+FxYuBt61cy0or1XuOkyvXaQu9ghP8t64e3VS9UMXheHicG3rZ+cyOJr18i/Al/vHY918nxQnicGHjb+k2NJL5+ifAn/PHa9FwnxwvlcWLgHfZjt9u9Vl6//PwIf8Ifrz3PdXK8kB4nBlbej/1+/0Z5/fLzI/wJf7z2PNfJ8cJ6nBhYcT/6DYDi+vUaAMKf8MdryHOdHC+ux4mB9fbj2ACort9TA0D4E/54jXmuk+PF9jgx8Lb1O175d+wi9Q56T58BqFYv4X+X9cPDu/BcJ8eL73Fi4G3r9/G7f6ZLQvUOealmvYR/9fXDwxv0QhWDJ+txYuBt65fE6n3upcr19sfBCP9b1g8Pb+o/LuIUgyftcWLg9euXBOvt/zxVrvc4Dkb437J+eHjLvFDF4Kl5nBh43fol0XoXNwCEP+GPJ+qFKgZP1ePEwOXrl4TrLW4ACH/CH0/UC1UMnrrHiYHL1i+J15umal1Y78EI/1vWDw+P8MeT9zgxsHz9kni9aeyJL6z3YIT/LeuHh0f44zXjcWJg2fol8XrT2BMn/Al/PGEvVDF4zXmcGFi0fkm83jS2v4Q/4Y8n7IUqBq9JjxMDZ0cSrzdN7S/hT/jjiXqhisFr1uPEwMmRxOtNc/tL+JePFl+/eI16oYrBa93jxMDhkcTrTYX72x8HI/wvRuOvX7zWvFDF4EXwODHwciTxevPzI/wJf7zWvFDF4EXxODHwfCTxehPhT/jjteu5To6HNzA4MfA3RhKvNxH+hD9em57r5Hh4E4MTAz9+/FPJ18r15udH+BP+eO15rpPj4RWMzZ8YuN/v3yjXm58f4U/447XnuU6Oh1c4Nn1iYL8BUKy31wAQ/oVD/PWGtxHPdXI8vFJvyycGHhsA1XqfGgDCv3C08HrD24bnOjke3hJvqycG5t+xizy/Qe/pMwDPt+5ghP/FaOn1hhffc50cD2+pt8UTA63w64Ad603Ptu5ghP/FaPH1hhfbC1UM3ma8rZ0YmMSe33Mv9bbuYIT/xWj89YYX1AtVDN6mvC2dGJgEn1//5+npeR6M8L8YQV5veFvwQhWDF93byomBSfT59RuAgxH+FyPY6w0vsheqGLyteFs4MfDrws8vXz9phP/FEHl94OER/nihvegnBv6y+PP7JfHnR/jj4RH+eIG96CcG4hH+eHh1vVDF4G3di35iIB7hj4dXzwtVDN7mvQ2cGIhH+OPh1fFCFYOH9/EmTgzEI/zx8G73QhWDh/d0beDEQDzCHw/vNi9UMXh45170EwPxCH88vOu9UMXg4V160U8MxCP88fCu80IVg4c37EU/MRCP8MfDu9pznRwPbwUv+omBeIQ/Ht59h3oxeHgTI/qJgXiEPx7efYZ6MXh4BYMTA/EIfzy8JY9roRg8vMLBiYHb9gh/PLzu8a6T4+F5eZwYuFmP8MfDe/JcJ8fD8/Q4MXBzHuGPh9fzXCfHw/P2ODFwMx7hj4f3zAtVDB7elR4nBsb2CH88vAEvVDF4eDd4nBgY0yP88fBKvVDF4OEt8zgxMJZH+OPhEf54eMXej5lGeOHd5v3Y1CYPDZH7Dw+P8MfDc/Q4MbBtj//yx8Mj/PHwrvY4MbBNj/DHwyP88fBu9jgxsC2P8MfDW+KFKgYPr7LHiYHNeIQ/Ht5SL1QxeHh38DgxUN4j/PHwrvFCFYOHdyePEwNlPcIfD+9aL1QxeHj39TgxUMsj/PHwbvFCFYOHd3+PEwM1PMIfD+9WL1QxeHjreJwYSPjj4YXxXCfHw2vQm2wCGg5XdY/wx8Mj/PHw3D1ODCT88fCa9Vwnx8ML4HFiIOGPh9ek5zo5Hl4QjxMDCX88vOY818nx8KJ4nBhI+OPhtea5To6HF8nb73c/3li4qnt8pS8e3h0918nx8KJ5nBjIf/nj4bXihSoGD0/E48RAwh8PT94LVQwenpDHiYGEPx5eW16oYvDwfD1ODCT88fDa8EIVg4en4XFiIOGPh6fthSoGD0/L48RAwh8PT9MLVQwenqbHiYGEPx6elidazEfd9aeP18PDww901w/2rh/o/3zpVcH73sr1ngZeaI8TAwl/vNu9/P675vv9Uu+jyvUWj8We6M3wyrTf3D6pXK/hbcPjxEDCH+9mL7//qt3P/etV5XqLxlWe6M3w2AAIv7l9IrF5eE16+/3+a2L3M+GP15JX1AA4vj5mGwCZ/VC8GbrxSvzN7ROJzcNr1tvwiYGEP96t3mwD4Pz6mGwABNbv7MFyN8PDw8NXlN/cujfvfyyxeXite1s7MZDwx6vhTTYAAq+P0QZAZP3OALmboRtfVX5ze9YAyK0fXlPeVk4MJPzxanmjDYDI62OwARBav3PEbfIRr98AmOCbW68BiPBiwvP38rfeKYV1bY9v9cOr6Q02AEKvj4sGQGz9bhv3LubYAJjom9tTAyCzeXghvKgnBvJf/ni1vYsGQOz1cdYACK7f9WONYvJnAEz4ze2pAahWr9LNgOfqRTsxkPDHu4d31gAIvj5ODYDo+l031irGeucALL1Wuhk+qVmvys2AJ+FFOTGQ8Me7l3dqAERfH68q12v38lwnn/CuagBWvBkWNwAt3Ax4Ml7rJwYS/nj39B4bAOHXxyvx9Tt5rpNPeIsbgJVvhkUNQCs3A56O1/CJgYQ/3l29bnwiHP7HBkB2/fqe6+QT3qIGwOFmKG4A1F9MeLpegycGEv54d/fyZ7CEw/9t/gyb8vr1PdfJJ7ziBsCpEyxqAFp4MeFpew2dGEj4463iPW8ATOz1kf+KTXn9+p7r5BNeUQPg+M9Asw1AKy8mvCY89RMDCX+81bx+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/vHie6omBhD/eqt6xATDB8O81ALLrN+mJ3AyTDYDAB0BGGwCR9cOL6RU1AYQ/XmQvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDieionBhL+eC6eFX4d8NC10utj9uuAl9S7yn6I3QyDDYBI+A82AGLrhxfb8z4xkPDH8/SuagBWfH0sbgBc90PwZrhoAITC/6IBEFw/vPie14mBhD+et7e4AVg5PxY1AK77IXoznDUAYuF/1ri61v4AABCHSURBVACIrh/eNry1Twwk/PEUvEUNgEN+FDcA7vshejOcGgDB8D81AO6bh7d5b8UTAwl/PBWvuAFwyo+iBkBiP0RvhscGQDT8HxsAic3Dw/t4lRMDCX88Ja+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4T9cdTwwk/PHUvNkGwDk/JhsAgfU7e7DczZD/jlI4/N/mv0OV2Dw8vHOv9omBhD+eojfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64W3aq3ViIOGPp+qNNgAC4T/aAAit3zniNvmI128ATCz8nzUAEV5MePG8W08MJPzxlL3BBkAk/AcbALH1u23cu5hjA2CC4d9rAGQ2Dw9vYFx7YiDhj6fuXTQAQuF/0QAIrt/1Y41i8mcATDT8ew1AtXqVbga8UN7SEwMJf7wWvLMGQCz8zxoA0fW7bqxVjBV+HfDQtdLNMPt1wEvqVbkZ8EJ6pScGEv54rXinBkAw/E8NgPD6nTzXySe8qxqAFW+GxQ1ACzcDXlhv7sRAwh+vJe+xARAN/8cGQHz9Tp7r5BPe4gZg5ZthUQPQys2AF9ebODGQ8MdryuvGJ8Lhf2wAZNev77lOPuEtagAcbobiBkD9xYS3HW/gxEDCH685L38GSzj83+bPsCmvX99znXzCK24AnDrBogaghRcT3ra83omBhD9ek97zBsCEwj8/Pv8Vm/L69T3XySe8ogbA8Z+BZhuAVl5MeJv0viz+/PDwRr1+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/PDw8vJDesQEwwfDvNQCy6zfpidwMkw2AwAdARhsAkfXDw8PDC+nlBsBEwz9fT58BqFbvavshdDOMNgAC4T/aAAitHx4eHl5Izwq/DnjoWik/Zr8OeEm9q+yH2M0w2ACIhP9gAyC2fnh4eHhRvasagBXzY3ED4LofgjfDRQMgFP4XDYDg+uHh4eFF9RY3ACvnx6IGwHU/RG+GswZALPzPGgDR9cPDw8OL6i1qABzyo7gBcN8P0Zvh1AAIhv+pAXDfPDw8PLztecUNgFN+FDUAEvshejM8NgCi4f/YAEhsHh4eHt72vKIGwDE/ZhsAmf1QvBm68Uo4/I8NgP/m4eHh4W3Pm20AnPNjsgEQWL+zB8vdDPnvKIXD/23+O1SJzcPDw8PbnjfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64eHh4QX2RhsAgfAfbQCE1u8ccZt8xOs3ACYW/s8agAgvJjw8PLyWvMEGQCT8BxsAsfW7bdy7mGMDYILh32sAZDYPDw8Pb0PeRQMgFP4XDYDg+l0/1igmfwbARMO/1wBUq1fpZsDDw8MT984aALHwP2sARNfvurFWMVb4dcBD10o3w+zXAS+pV+VmwMPDw2vAOzUAguF/agCE1+/kuU4+4V3VAKx4MyxuAFq4GfDw8PAa8B4bANHwf2wAxNfv5LlOPuEtbgBWvhkWNQCt3Ax4eHh46l43PhEO/2MDILt+fc918glvUQPgcDMUNwDqLyY8PDy8lrz8GSzh8H+bP8OmvH59z3XyCa+4AXDqBIsagBZeTHh4eHgtec8bABMK//z4/FdsyuvX91wnn/CKGgDHfwaabQBaeTHh4eHhteT1GwATC/9nDYDk+vU918knvNkGwPl3QJMNgMD64eHh4YX0jg2ACYZ/rwGQXb9JT+RmmGwABD4AMtoAiKwfHh4eXkgvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDw8PBCelb4dcBD10r5Mft1wEvqXWU/xG6GwQZAJPwHGwCx9cPDw8OL6l3VAKyYH4sbANf9ELwZLhoAofC/aAAE1w8PDw8vqre4AVg5PxY1AK77IXoznDUAYuF/1gCIrh8eHh5eVG9RA+CQH8UNgPt+iN4MpwZAMPxPDYD75uHh4eFtzytuAJzyo6gBkNgP0ZvhsQEQDf/HBkBi8/Dw8PC25xU1AI75MdsAyOyH4s3QjVfC4X9sAPw3Dw8PD2973mwD4Jwfkw2AwPqdPVjuZsh/Rykc/m/z36FKbB4eHh7e9rzJBkDgPx5HGwCR9TsD5G6GfJKSavjnxz9rAOTWDw8PDy+wN9oACIT/aAMgtH7niNvkI16/ATCx8H/WAER4MeHh4eG15A02ACLhP9gAiK3fbePexRwbABMM/14DILN5eHh4eBvyLhoAofC/aAAE1+/6sUYx+TMAJhr+vQagWr1KNwMeHh6euHfWAIiF/1kDILp+1421irHCrwMeula6GWa/DnhJvSo3Ax4eHl4D3qkBEAz/UwMgvH4nz3XyCe+qBmDFm2FxA9DCzYCHh4fXgPfYAIiG/2MDIL5+J8918glvcQOw8s2wqAFo5WbAw8PDU/e68Ylw+B8bANn163uuk094ixoAh5uhuAFQfzHh4eHhteTlz2AJh//b/Bk25fXre66TT3jFDYBTJ1jUALTwYsLDw8NryXveAJhQ+OfH579iU16/vuc6+YRX1AA4/jPQbAPQyosJDw8PryWv3wCYWPg/awAk16/vuU4+4c02AM6/A5psAATWDw8PDy+kd2wATDD8ew2A7PpNeiI3w2QDIPABkNEGQGT98PDw8EJ6uQEw0fDP19NnAKrVu9p+CN0Mow2AQPiPNgBC64eHh4cX0rPCrwMeulbKj9mvA15S7yr7IXYzDDYAIuE/2ACIrR8eHh5eVO+qBmDF/FjcALjuh+DNcNEACIX/RQMguH54eHh4Ub3FDcDK+bGoAXDdD9Gb4awBEAv/swZAdP3w8PDwonqLGgCH/ChuANz3Q/RmODUAguF/agDcNw8PDw9ve15xA+CUH0UNgMR+iN4Mjw2AaPg/NgASm4eHh4e3Pa+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4eHjb82YbAOf8mGwABNbv7MFyN0P+O0rh8H+b/w5VYvPw8PDwtudNNgAC//E42gCIrN8ZIHczdOP7VcM/P75rAP6JxObh4eHhbc/7KdMN/3z9qcr1Do4qnuLN0I0/phr+7xqAFz8jsXl4eHh42/P+jemGf77+cOV6L0Ztz3Xy596nPvWpP6ga/k/X//30p19+QWXz8PDw8DbiHbrr1003/PP1+yvWezFqe66TD3kffPBtv9d0w//o/b1a9SrdDHh4eHjC3t837fDP1xeF1+/6sVYxu93ud5p2+B+vv6S4fnh4eHjBvBfdlUw//PP12wXXb9BznXzCy1/48GumHf7H65921/d1115o/fDw8PAiePl99Q911z8zjff7uSvn1oPQ+k16rpPPeD9n+uHfv361u/5Ld/2noat7/MU19r8tufDw8PCCe/n9NL+vKr7fj13/vpXwz47r5DOe+nGPeHh4eHh4/esfthL+sw2AcyfzE9b+zYCHh4eHtxFvt9v9eCvhP9kACPwzxg9b4zcDHh4eHt52vIeHhz/XSviPfgZAIPzz+G5r/GbAw8PDw9uO9/Llyy+1Ev6Dnkj4H8cvWMM3Ax4eHh7eZrz/TPjX9f6utXsz4OHh4eFtxNvtdn+H8K/r/Vlr9GbAw8PDw9uO9/Cw/yHCv6737d31LWvwZsDDw8PD24z3rf1+l/Nq8SD8p8c/avBmwMPDw8PbjvcNu2K4569y+OfHPTw8/JkGbwY8PDw8vO14328Lh3v4Pz1INvzz47/whe/6sFvkX2zsZsDDw8PD24b3i901f6xub0iE/9MDZcP/aO33u7/W0M2Ah4eHh7cdL59aWzxkwv/pwdLhn6/PfObD7+x+9CvWxs2Ah4eHh7cNL39Z0UdWOKTC/wmQDv+e9zdM/2bAw8PDw9uO93UrHHLhf0TcJl/mfc6e/iSw9Apwc+Hh4eHhaXq/1l2/ywqGZPhfOxyL+eumezPg4eHh4W3H+0krGIR/Pe83ddd/M82bAQ8PDw9vG95/767fYjOD8K/v/ZDp3Qx4eHh4eNvxftBmhkheTnquk1/pveiuf2laNwMeHh4e3ja8n7aZIZSXk57r5Dd439Vdv2QaNwMeHh4e3ja8/91dB5sYgnk56rlOfqP3qrv+n8W6ufDw8PDwNL2cN1+1iSGcl4Oe6+S3et34eqCbCw8PDw9P1/urNjHU83LIa7qYz33uOz/c7Xb/OsjNhYeHh4en6f0rmzjvv4W8HPKaL+Y7vuPbf9tu9+JnG7+58PDw8PA0vX/XXb/VRkZLeTnrtVjMhx9++tD96BeszZsLDw8PD0/T+2Z35e+iGRwt5mWo8O9539Nd/8Paurnw8PDw8DS9nCe/x0ZG43kpNHk97/Pd9R+sjZsLDw8PD0/T+/nu+pKNjCB5KTB5fe93dNfPmPbNhYeHh4en6f3b7vqsjYxQeRmqmN8Y+Yzmf2GaNxceHh4enqb3z7vrN9vIEMm3el6oYs7HvrtSd/266dxceHh4eHh6Xj7k56/Yu9wYHGL5VscLVczw+KP27pubIt2seHh4eHh1vPxhvz9pE0M4327zQhUzMna73Ufd9Y0gNyseHh4eXh3vH9i7z42NDvV8u8kLVcyM9/777/3x3e7FzzV8s+Lh4eHh3e79x+76ss2MlvLtKi9UMQXeZz/70We6H/1le/ZtgqVXkJsfDw8Pb4ve/+quv9hd32Yzo8V8W+yFKmaZ92F3/Yg9fT6g5Apw8+Ph4eFt0fuf9u5D4fkvxGZHgHy731AvZqH3aXvXCPys6dyseHh4eHi3e/l9/c9310srHMHyre5QL+ZG7/fZuz8FOftXgYZvfjw8PLytefmf+f9md32fLRxieXR3z3VyYS//Legf6K6/sNvtfqq7oX65oZsfDw8Pb0ver3Tv0z+93+/fvPfee19++fKD4a+5nRnCeXQ3z3XyVrzD4XOf+dSn3v/e7gb74e5HX+uub9i74yL/a3f9H4v1YsLDw8NT8/L7bH6/ze+7+f33R/P7cX5fzu/Pyvmh7LlOHszLHy7JXxv5+edXd6N//oMPPvjdL1++/NLxyv93/v8P/e/nLjw8PLwNePn99OJDeyLv9yE818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDK/P+P4jnb7D01hqeAAAAAElFTkSuQmCC"}ngOnInit(){}onFileDropped(e){this.converterService.uploadHandler(e[0]).then(n=>{this.logger.info(n),n.startsWith("PHN2Z")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/SVG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/svg+xml;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/svg+xml;base64,"+n)),n.startsWith("iVBOR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/PNG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/png;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/png;base64,"+n)),n.startsWith("UklGR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/WEBP",detail:`Filename ${e[0].name}`}),this.viewer="data:image/webp;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/webp;base64,"+n))})}}return i.\u0275fac=function(e){return new(e||i)(Tn(qd),Tn(Hm),Tn(BI),Tn(lve))},i.\u0275cmp=hs({type:i,selectors:[["app-converter"]],viewQuery:function(e,n){if(1&e&&Rs(uve,5),2&e){let r;jr(r=$r())&&(n.myImg=r.first)}},decls:4,vars:3,consts:[["dropZoneDirective","",3,"fileDropped"],["pTemplate",""],["alt","drop here",3,"src"],["myImg",""]],template:function(e,n){1&e&&(Ri(0,"p-toast"),Pt(1,"p-splitter",0),si("fileDropped",function(s){return n.onFileDropped(s)}),At(2,cve,2,0,"ng-template",1),At(3,hve,2,1,"ng-template",1),Nt()),2&e&&(tt(1),co(mo(2,dve)))},dependencies:[Kl,Nx,Bz,NS]}),i})();const pve=function(i,t,e){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":i,"p-disabled":t,"p-focus":e}},gve={provide:Mc,useExisting:Xr(()=>_8),multi:!0};let _8=(()=>{class i{constructor(e){this.cd=e,this.trueValue=!0,this.falseValue=!1,this.onChange=new ki,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(e.preventDefault(),this.toggle(e),n.focus())}onInputChange(e){this.readonly||this.updateModel(e,e.target.checked)}toggle(e){this.updateModel(e,!this.checked())}updateModel(e,n){this.modelValue=n?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue})}onFocus(e){this.focused=!0}onBlur(e){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[Ro([gve])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(e,n){if(1&e){const r=vr();Pt(0,"div",0),si("click",function(a){gn(r);const u=_o(3);return vn(n.onClick(a,u))}),Pt(1,"div",1)(2,"input",2,3),si("change",function(a){return n.onInputChange(a)})("focus",function(a){return n.onFocus(a)})("blur",function(a){return n.onBlur(a)}),Nt()(),Ri(4,"span",4),Nt()}2&e&&(Us(n.styleClass),He("ngClass",Th(12,pve,n.checked(),n.disabled,n.focused))("ngStyle",n.style),tt(2),He("checked",n.checked())("disabled",n.disabled),xs("aria-label",n.ariaLabel)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-checked",n.checked())("aria-labelledby",n.ariaLabelledBy))},dependencies:[vo,Ho],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),i})(),mve=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})(),vve=(()=>{class i{constructor(e,n){this._logger=e,this.preferenceService=n;let r=this.preferenceService.findOne("default");r&&(this.preferences=r)}ngOnInit(){}handleChange(e){this.preferenceService.store(this.preferences,n=>{n.full=this.preferences.full,n.grid=this.preferences.grid,n.applyRules=this.preferences.applyRules,n.debug=this.preferences.debug,n.info=this.preferences.info,n.maxHeight=this.preferences.maxHeight,n.maxWidth=this.preferences.maxWidth}),this.preferenceService.apply()}}return i.\u0275fac=function(e){return new(e||i)(Tn(qd),Tn(Oz))},i.\u0275cmp=hs({type:i,selectors:[["app-preference"]],decls:31,vars:8,consts:[["header","Render",3,"toggleable"],[1,"field-checkbox"],[3,"ngModel","ngModelChange","onChange"],["for","ny"],[1,"p-float-label"],["type","text","id","inputtext","pInputText","",3,"ngModel","ngModelChange","keyup"],["for","inputtext"]],template:function(e,n){1&e&&(Pt(0,"p-panel",0)(1,"div",1)(2,"p-inputSwitch",2),si("ngModelChange",function(s){return n.preferences.grid=s})("onChange",function(s){return n.handleChange(s)}),Nt(),Pt(3,"label",3),ur(4,"Apply grid"),Nt()(),Pt(5,"div",1)(6,"p-inputSwitch",2),si("ngModelChange",function(s){return n.preferences.info=s})("onChange",function(s){return n.handleChange(s)}),Nt(),Pt(7,"label",3),ur(8,"Apply display info"),Nt()(),Pt(9,"div",1)(10,"p-inputSwitch",2),si("ngModelChange",function(s){return n.preferences.applyRules=s})("onChange",function(s){return n.handleChange(s)}),Nt(),Pt(11,"label",3),ur(12,"Run ruleset on each modification"),Nt()(),Pt(13,"div",1)(14,"p-inputSwitch",2),si("ngModelChange",function(s){return n.preferences.debug=s})("onChange",function(s){return n.handleChange(s)}),Nt(),Pt(15,"label",3),ur(16,"Debug mode"),Nt()(),Pt(17,"div",1)(18,"p-inputSwitch",2),si("ngModelChange",function(s){return n.preferences.full=s})("onChange",function(s){return n.handleChange(s)}),Nt(),Pt(19,"label",3),ur(20,"Export full graph"),Nt()(),Pt(21,"div",1)(22,"span",4)(23,"input",5),si("ngModelChange",function(s){return n.preferences.maxWidth=s})("keyup",function(s){return n.handleChange(s)}),Nt(),Pt(24,"label",6),ur(25,"Max width for image export"),Nt()()(),Pt(26,"div",1)(27,"span",4)(28,"input",5),si("ngModelChange",function(s){return n.preferences.maxHeight=s})("keyup",function(s){return n.handleChange(s)}),Nt(),Pt(29,"label",6),ur(30,"Max height for image export"),Nt()()()()),2&e&&(He("toggleable",!0),tt(2),He("ngModel",n.preferences.grid),tt(4),He("ngModel",n.preferences.info),tt(4),He("ngModel",n.preferences.applyRules),tt(4),He("ngModel",n.preferences.debug),tt(4),He("ngModel",n.preferences.full),tt(5),He("ngModel",n.preferences.maxWidth),tt(5),He("ngModel",n.preferences.maxHeight))},dependencies:[vC,_8,M0,D0,kv,Zz]}),i})();var _ve=ae(4826)();let yve=(()=>{class i{constructor(e){this.http=e}ngOnInit(){this.http.get("assets/about/about.md",{responseType:"text"}).subscribe(e=>{this.about=_ve.render(e)})}}return i.\u0275fac=function(e){return new(e||i)(Tn(aI))},i.\u0275cmp=hs({type:i,selectors:[["app-about"]],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&Ri(0,"div",0),2&e&&He("innerHTML",n.about,zl)}}),i})();const ip=1001,sd=1003,Rh=1006,j0=1009,$0=1014,Py=1015,d1=1016,TC=1020,tm=1023,q0=1026,MC=1027,X0=3e3,Qc=3001,N_="srgb",K0="srgb-linear";class LC{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,t);t.target=null}}}const Sf=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Z0=Math.PI/180,f1=180/Math.PI;function ug(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Sf[255&i]+Sf[i>>8&255]+Sf[i>>16&255]+Sf[i>>24&255]+"-"+Sf[255&t]+Sf[t>>8&255]+"-"+Sf[t>>16&15|64]+Sf[t>>24&255]+"-"+Sf[63&e|128]+Sf[e>>8&255]+"-"+Sf[e>>16&255]+Sf[e>>24&255]+Sf[255&n]+Sf[n>>8&255]+Sf[n>>16&255]+Sf[n>>24&255]).toLowerCase()}function fh(i,t,e){return Math.max(t,Math.min(e,i))}function p1(i,t,e){return(1-e)*i+e*t}function cL(i){return 0==(i&i-1)&&0!==i}function qS(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function B_(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Mu(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}class Jr{constructor(t=0,e=0){Jr.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,a=this.y-t.y;return this.x=s*n-a*r+t.x,this.y=s*r+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class cg{constructor(){cg.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,s,a,u,h,m){const w=this.elements;return w[0]=t,w[1]=r,w[2]=u,w[3]=e,w[4]=s,w[5]=h,w[6]=n,w[7]=a,w[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,a=n[0],u=n[3],h=n[6],m=n[1],w=n[4],T=n[7],O=n[2],W=n[5],te=n[8],ue=r[0],ce=r[3],Ne=r[6],et=r[1],Je=r[4],at=r[7],kt=r[2],Zt=r[5],yn=r[8];return s[0]=a*ue+u*et+h*kt,s[3]=a*ce+u*Je+h*Zt,s[6]=a*Ne+u*at+h*yn,s[1]=m*ue+w*et+T*kt,s[4]=m*ce+w*Je+T*Zt,s[7]=m*Ne+w*at+T*yn,s[2]=O*ue+W*et+te*kt,s[5]=O*ce+W*Je+te*Zt,s[8]=O*Ne+W*at+te*yn,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],a=t[4],u=t[5],h=t[6],m=t[7],w=t[8];return e*a*w-e*u*m-n*s*w+n*u*h+r*s*m-r*a*h}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],a=t[4],u=t[5],h=t[6],m=t[7],w=t[8],T=w*a-u*m,O=u*h-w*s,W=m*s-a*h,te=e*T+n*O+r*W;if(0===te)return this.set(0,0,0,0,0,0,0,0,0);const ue=1/te;return t[0]=T*ue,t[1]=(r*m-w*n)*ue,t[2]=(u*n-r*a)*ue,t[3]=O*ue,t[4]=(w*e-r*h)*ue,t[5]=(r*s-u*e)*ue,t[6]=W*ue,t[7]=(n*h-m*e)*ue,t[8]=(a*e-n*s)*ue,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,a,u){const h=Math.cos(s),m=Math.sin(s);return this.set(n*h,n*m,-n*(h*a+m*u)+a+t,-r*m,r*h,-r*(-m*a+h*u)+u+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,s=r[0],a=r[3],u=r[6],h=r[1],m=r[4],w=r[7];return r[0]=e*s+n*h,r[3]=e*a+n*m,r[6]=e*u+n*w,r[1]=-n*s+e*h,r[4]=-n*a+e*m,r[7]=-n*u+e*w,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function t6(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function g1(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Q0(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function XS(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const hL={[N_]:{[K0]:Q0},[K0]:{[N_]:XS}},qm={legacyMode:!0,get workingColorSpace(){return K0},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,t,e){if(this.legacyMode||t===e||!t||!e)return i;if(hL[t]&&void 0!==hL[t][e]){const n=hL[t][e];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,t){return this.convert(i,this.workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this.workingColorSpace)}},n6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ad={r:0,g:0,b:0},Xm={h:0,s:0,l:0},YS={h:0,s:0,l:0};function dL(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}function KS(i,t){return t.r=i.r,t.g=i.g,t.b=i.b,t}let RC,la=(()=>{class i{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=N_){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,qm.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=K0){return this.r=e,this.g=n,this.b=r,qm.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=K0){if(e=function uL(i,t){return(i%t+t)%t}(e,1),n=fh(n,0,1),r=fh(r,0,1),0===n)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+n):r+n-r*n,u=2*r-a;this.r=dL(u,a,e+1/3),this.g=dL(u,a,e),this.b=dL(u,a,e-1/3)}return qm.toWorkingColorSpace(this,s),this}setStyle(e,n=N_){function r(a){void 0!==a&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let a;const h=s[2];switch(s[1]){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,qm.toWorkingColorSpace(this,n),r(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,qm.toWorkingColorSpace(this,n),r(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h)){const m=parseFloat(a[1])/360,w=parseFloat(a[2])/100,T=parseFloat(a[3])/100;return r(a[4]),this.setHSL(m,w,T,n)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],u=a.length;if(3===u)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,qm.toWorkingColorSpace(this,n),this;if(6===u)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,qm.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=N_){const r=n6[e.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Q0(e.r),this.g=Q0(e.g),this.b=Q0(e.b),this}copyLinearToSRGB(e){return this.r=XS(e.r),this.g=XS(e.g),this.b=XS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=N_){return qm.fromWorkingColorSpace(KS(this,ad),e),fh(255*ad.r,0,255)<<16^fh(255*ad.g,0,255)<<8^fh(255*ad.b,0,255)<<0}getHexString(e=N_){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=K0){qm.fromWorkingColorSpace(KS(this,ad),n);const r=ad.r,s=ad.g,a=ad.b,u=Math.max(r,s,a),h=Math.min(r,s,a);let m,w;const T=(h+u)/2;if(h===u)m=0,w=0;else{const O=u-h;switch(w=T<=.5?O/(u+h):O/(2-u-h),u){case r:m=(s-a)/O+(s<a?6:0);break;case s:m=(a-r)/O+2;break;case a:m=(r-s)/O+4}m/=6}return e.h=m,e.s=w,e.l=T,e}getRGB(e,n=K0){return qm.fromWorkingColorSpace(KS(this,ad),n),e.r=ad.r,e.g=ad.g,e.b=ad.b,e}getStyle(e=N_){return qm.fromWorkingColorSpace(KS(this,ad),e),e!==N_?`color(${e} ${ad.r} ${ad.g} ${ad.b})`:`rgb(${255*ad.r|0},${255*ad.g|0},${255*ad.b|0})`}offsetHSL(e,n,r){return this.getHSL(Xm),Xm.h+=e,Xm.s+=n,Xm.l+=r,this.setHSL(Xm.h,Xm.s,Xm.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Xm),e.getHSL(YS);const r=p1(Xm.h,YS.h,n),s=p1(Xm.s,YS.s,n),a=p1(Xm.l,YS.l,n);return this.setHSL(r,s,a),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return i.NAMES=n6,i})();class r6{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===RC&&(RC=g1("canvas")),RC.width=t.width,RC.height=t.height;const n=RC.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=RC}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=g1("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=255*Q0(s[a]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*Q0(e[n]/255)):Q0(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class OC{constructor(t=null){this.isSource=!0,this.uuid=ug(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let a=0,u=r.length;a<u;a++)s.push(fL(r[a].isDataTexture?r[a].image:r[a]))}else s=fL(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function fL(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?r6.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let L_e=0,Ly=(()=>{class i extends LC{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=ip,s=ip,a=Rh,u=1008,h=tm,m=j0,w=1,T=X0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:L_e++}),this.uuid=ug(),this.name="",this.source=new OC(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=s,this.magFilter=a,this.minFilter=u,this.anisotropy=w,this.format=h,this.internalFormat=null,this.type=m,this.offset=new Jr(0,0),this.repeat=new Jr(1,1),this.center=new Jr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cg,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=T,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case ip:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case ip:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i})();class bu{constructor(t=0,e=0,n=0,r=1){bu.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*e+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*e+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*e+a[7]*n+a[11]*r+a[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const h=t.elements,m=h[0],w=h[4],T=h[8],O=h[1],W=h[5],te=h[9],ue=h[2],ce=h[6],Ne=h[10];if(Math.abs(w-O)<.01&&Math.abs(T-ue)<.01&&Math.abs(te-ce)<.01){if(Math.abs(w+O)<.1&&Math.abs(T+ue)<.1&&Math.abs(te+ce)<.1&&Math.abs(m+W+Ne-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const Je=(m+1)/2,at=(W+1)/2,kt=(Ne+1)/2,Zt=(w+O)/4,yn=(T+ue)/4,zt=(te+ce)/4;return Je>at&&Je>kt?Je<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(Je),r=Zt/n,s=yn/n):at>kt?at<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(at),n=Zt/r,s=zt/r):kt<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(kt),n=yn/s,r=zt/s),this.set(n,r,s,e),this}let et=Math.sqrt((ce-te)*(ce-te)+(T-ue)*(T-ue)+(O-w)*(O-w));return Math.abs(et)<.001&&(et=1),this.x=(ce-te)/et,this.y=(T-ue)/et,this.z=(O-w)/et,this.w=Math.acos((m+W+Ne-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class J0 extends LC{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new bu(0,0,t,e),this.scissorTest=!1,this.viewport=new bu(0,0,t,e),this.texture=new Ly({width:t,height:e,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Rh,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new OC(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class pL extends Ly{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=sd,this.minFilter=sd,this.wrapR=ip,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class s6 extends Ly{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=sd,this.minFilter=sd,this.wrapR=ip,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hg{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,a,u){let h=n[r+0],m=n[r+1],w=n[r+2],T=n[r+3];const O=s[a+0],W=s[a+1],te=s[a+2],ue=s[a+3];if(0===u)return t[e+0]=h,t[e+1]=m,t[e+2]=w,void(t[e+3]=T);if(1===u)return t[e+0]=O,t[e+1]=W,t[e+2]=te,void(t[e+3]=ue);if(T!==ue||h!==O||m!==W||w!==te){let ce=1-u;const Ne=h*O+m*W+w*te+T*ue,et=Ne>=0?1:-1,Je=1-Ne*Ne;if(Je>Number.EPSILON){const kt=Math.sqrt(Je),Zt=Math.atan2(kt,Ne*et);ce=Math.sin(ce*Zt)/kt,u=Math.sin(u*Zt)/kt}const at=u*et;if(h=h*ce+O*at,m=m*ce+W*at,w=w*ce+te*at,T=T*ce+ue*at,ce===1-u){const kt=1/Math.sqrt(h*h+m*m+w*w+T*T);h*=kt,m*=kt,w*=kt,T*=kt}}t[e]=h,t[e+1]=m,t[e+2]=w,t[e+3]=T}static multiplyQuaternionsFlat(t,e,n,r,s,a){const u=n[r],h=n[r+1],m=n[r+2],w=n[r+3],T=s[a],O=s[a+1],W=s[a+2],te=s[a+3];return t[e]=u*te+w*T+h*W-m*O,t[e+1]=h*te+w*O+m*T-u*W,t[e+2]=m*te+w*W+u*O-h*T,t[e+3]=w*te-u*T-h*O-m*W,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,s=t._z,a=t._order,u=Math.cos,h=Math.sin,m=u(n/2),w=u(r/2),T=u(s/2),O=h(n/2),W=h(r/2),te=h(s/2);switch(a){case"XYZ":this._x=O*w*T+m*W*te,this._y=m*W*T-O*w*te,this._z=m*w*te+O*W*T,this._w=m*w*T-O*W*te;break;case"YXZ":this._x=O*w*T+m*W*te,this._y=m*W*T-O*w*te,this._z=m*w*te-O*W*T,this._w=m*w*T+O*W*te;break;case"ZXY":this._x=O*w*T-m*W*te,this._y=m*W*T+O*w*te,this._z=m*w*te+O*W*T,this._w=m*w*T-O*W*te;break;case"ZYX":this._x=O*w*T-m*W*te,this._y=m*W*T+O*w*te,this._z=m*w*te-O*W*T,this._w=m*w*T+O*W*te;break;case"YZX":this._x=O*w*T+m*W*te,this._y=m*W*T+O*w*te,this._z=m*w*te-O*W*T,this._w=m*w*T-O*W*te;break;case"XZY":this._x=O*w*T-m*W*te,this._y=m*W*T-O*w*te,this._z=m*w*te+O*W*T,this._w=m*w*T+O*W*te;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],a=e[1],u=e[5],h=e[9],m=e[2],w=e[6],T=e[10],O=n+u+T;if(O>0){const W=.5/Math.sqrt(O+1);this._w=.25/W,this._x=(w-h)*W,this._y=(s-m)*W,this._z=(a-r)*W}else if(n>u&&n>T){const W=2*Math.sqrt(1+n-u-T);this._w=(w-h)/W,this._x=.25*W,this._y=(r+a)/W,this._z=(s+m)/W}else if(u>T){const W=2*Math.sqrt(1+u-n-T);this._w=(s-m)/W,this._x=(r+a)/W,this._y=.25*W,this._z=(h+w)/W}else{const W=2*Math.sqrt(1+T-n-u);this._w=(a-r)/W,this._x=(s+m)/W,this._y=(h+w)/W,this._z=.25*W}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(fh(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,a=t._w,u=e._x,h=e._y,m=e._z,w=e._w;return this._x=n*w+a*u+r*m-s*h,this._y=r*w+a*h+s*u-n*m,this._z=s*w+a*m+n*h-r*u,this._w=a*w-n*u-r*h-s*m,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,a=this._w;let u=a*t._w+n*t._x+r*t._y+s*t._z;if(u<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,u=-u):this.copy(t),u>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const h=1-u*u;if(h<=Number.EPSILON){const W=1-e;return this._w=W*a+e*this._w,this._x=W*n+e*this._x,this._y=W*r+e*this._y,this._z=W*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const m=Math.sqrt(h),w=Math.atan2(m,u),T=Math.sin((1-e)*w)/m,O=Math.sin(e*w)/m;return this._w=a*T+this._w*O,this._x=n*T+this._x*O,this._y=r*T+this._y*O,this._z=s*T+this._z*O,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(s),n*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vn{constructor(t=0,e=0,n=0){Vn.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(a6.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(a6.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,a=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,a=t.y,u=t.z,h=t.w,m=h*e+a*r-u*n,w=h*n+u*e-s*r,T=h*r+s*n-a*e,O=-s*e-a*n-u*r;return this.x=m*h+O*-s+w*-u-T*-a,this.y=w*h+O*-a+T*-s-m*-u,this.z=T*h+O*-u+m*-a-w*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,a=e.x,u=e.y,h=e.z;return this.x=r*h-s*u,this.y=s*a-n*h,this.z=n*u-r*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return gL.copy(this).projectOnVector(t),this.sub(gL)}reflect(t){return this.sub(gL.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(fh(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gL=new Vn,a6=new hg;class ky{constructor(t=new Vn(1/0,1/0,1/0),e=new Vn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,s=-1/0,a=-1/0,u=-1/0;for(let h=0,m=t.length;h<m;h+=3){const w=t[h],T=t[h+1],O=t[h+2];w<e&&(e=w),T<n&&(n=T),O<r&&(r=O),w>s&&(s=w),T>a&&(a=T),O>u&&(u=O)}return this.min.set(e,n,r),this.max.set(s,a,u),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,s=-1/0,a=-1/0,u=-1/0;for(let h=0,m=t.count;h<m;h++){const w=t.getX(h),T=t.getY(h),O=t.getZ(h);w<e&&(e=w),T<n&&(n=T),O<r&&(r=O),w>s&&(s=w),T>a&&(a=T),O>u&&(u=O)}return this.min.set(e,n,r),this.max.set(s,a,u),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=eb.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const s=n.attributes.position;for(let a=0,u=s.count;a<u;a++)eb.fromBufferAttribute(s,a).applyMatrix4(t.matrixWorld),this.expandByPoint(eb)}else null===n.boundingBox&&n.computeBoundingBox(),mL.copy(n.boundingBox),mL.applyMatrix4(t.matrixWorld),this.union(mL);const r=t.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,eb),eb.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(m1),ZS.subVectors(this.max,m1),FC.subVectors(t.a,m1),NC.subVectors(t.b,m1),BC.subVectors(t.c,m1),Ry.subVectors(NC,FC),Oy.subVectors(BC,NC),tb.subVectors(FC,BC);let e=[0,-Ry.z,Ry.y,0,-Oy.z,Oy.y,0,-tb.z,tb.y,Ry.z,0,-Ry.x,Oy.z,0,-Oy.x,tb.z,0,-tb.x,-Ry.y,Ry.x,0,-Oy.y,Oy.x,0,-tb.y,tb.x,0];return!(!vL(e,FC,NC,BC,ZS)||(e=[1,0,0,0,1,0,0,0,1],!vL(e,FC,NC,BC,ZS)))&&(QS.crossVectors(Ry,Oy),e=[QS.x,QS.y,QS.z],vL(e,FC,NC,BC,ZS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return eb.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(eb).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(z_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),z_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),z_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),z_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),z_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),z_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),z_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),z_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(z_)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const z_=[new Vn,new Vn,new Vn,new Vn,new Vn,new Vn,new Vn,new Vn],eb=new Vn,mL=new ky,FC=new Vn,NC=new Vn,BC=new Vn,Ry=new Vn,Oy=new Vn,tb=new Vn,m1=new Vn,ZS=new Vn,QS=new Vn,nb=new Vn;function vL(i,t,e,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){nb.fromArray(i,s);const u=r.x*Math.abs(nb.x)+r.y*Math.abs(nb.y)+r.z*Math.abs(nb.z),h=t.dot(nb),m=e.dot(nb),w=n.dot(nb);if(Math.max(-Math.max(h,m,w),Math.min(h,m,w))>u)return!1}return!0}const k_e=new ky,v1=new Vn,_L=new Vn;class zC{constructor(t=new Vn,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):k_e.setFromPoints(t).getCenter(n);let r=0;for(let s=0,a=t.length;s<a;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;v1.subVectors(t,this.center);const e=v1.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(v1,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(_L.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(v1.copy(t.center).add(_L)),this.expandByPoint(v1.copy(t.center).sub(_L))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const V_=new Vn,yL=new Vn,JS=new Vn,Fy=new Vn,bL=new Vn,eE=new Vn,CL=new Vn;class tE{constructor(t=new Vn,e=new Vn(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,V_)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=V_.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(V_.copy(this.direction).multiplyScalar(e).add(this.origin),V_.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){yL.copy(t).add(e).multiplyScalar(.5),JS.copy(e).sub(t).normalize(),Fy.copy(this.origin).sub(yL);const s=.5*t.distanceTo(e),a=-this.direction.dot(JS),u=Fy.dot(this.direction),h=-Fy.dot(JS),m=Fy.lengthSq(),w=Math.abs(1-a*a);let T,O,W,te;if(w>0)if(T=a*h-u,O=a*u-h,te=s*w,T>=0)if(O>=-te)if(O<=te){const ue=1/w;T*=ue,O*=ue,W=T*(T+a*O+2*u)+O*(a*T+O+2*h)+m}else O=s,T=Math.max(0,-(a*O+u)),W=-T*T+O*(O+2*h)+m;else O=-s,T=Math.max(0,-(a*O+u)),W=-T*T+O*(O+2*h)+m;else O<=-te?(T=Math.max(0,-(-a*s+u)),O=T>0?-s:Math.min(Math.max(-s,-h),s),W=-T*T+O*(O+2*h)+m):O<=te?(T=0,O=Math.min(Math.max(-s,-h),s),W=O*(O+2*h)+m):(T=Math.max(0,-(a*s+u)),O=T>0?s:Math.min(Math.max(-s,-h),s),W=-T*T+O*(O+2*h)+m);else O=a>0?-s:s,T=Math.max(0,-(a*O+u)),W=-T*T+O*(O+2*h)+m;return n&&n.copy(this.direction).multiplyScalar(T).add(this.origin),r&&r.copy(JS).multiplyScalar(O).add(yL),W}intersectSphere(t,e){V_.subVectors(t.center,this.origin);const n=V_.dot(this.direction),r=V_.dot(V_)-n*n,s=t.radius*t.radius;if(r>s)return null;const a=Math.sqrt(s-r),u=n-a,h=n+a;return u<0&&h<0?null:this.at(u<0?h:u,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,a,u,h;const m=1/this.direction.x,w=1/this.direction.y,T=1/this.direction.z,O=this.origin;return m>=0?(n=(t.min.x-O.x)*m,r=(t.max.x-O.x)*m):(n=(t.max.x-O.x)*m,r=(t.min.x-O.x)*m),w>=0?(s=(t.min.y-O.y)*w,a=(t.max.y-O.y)*w):(s=(t.max.y-O.y)*w,a=(t.min.y-O.y)*w),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),T>=0?(u=(t.min.z-O.z)*T,h=(t.max.z-O.z)*T):(u=(t.max.z-O.z)*T,h=(t.min.z-O.z)*T),n>h||u>r)||((u>n||n!=n)&&(n=u),(h<r||r!=r)&&(r=h),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,V_)}intersectTriangle(t,e,n,r,s){bL.subVectors(e,t),eE.subVectors(n,t),CL.crossVectors(bL,eE);let u,a=this.direction.dot(CL);if(a>0){if(r)return null;u=1}else{if(!(a<0))return null;u=-1,a=-a}Fy.subVectors(this.origin,t);const h=u*this.direction.dot(eE.crossVectors(Fy,eE));if(h<0)return null;const m=u*this.direction.dot(bL.cross(Fy));if(m<0||h+m>a)return null;const w=-u*Fy.dot(CL);return w<0?null:this.at(w/a,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class To{constructor(){To.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,s,a,u,h,m,w,T,O,W,te,ue,ce){const Ne=this.elements;return Ne[0]=t,Ne[4]=e,Ne[8]=n,Ne[12]=r,Ne[1]=s,Ne[5]=a,Ne[9]=u,Ne[13]=h,Ne[2]=m,Ne[6]=w,Ne[10]=T,Ne[14]=O,Ne[3]=W,Ne[7]=te,Ne[11]=ue,Ne[15]=ce,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new To).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/VC.setFromMatrixColumn(t,0).length(),s=1/VC.setFromMatrixColumn(t,1).length(),a=1/VC.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,a=Math.cos(n),u=Math.sin(n),h=Math.cos(r),m=Math.sin(r),w=Math.cos(s),T=Math.sin(s);if("XYZ"===t.order){const O=a*w,W=a*T,te=u*w,ue=u*T;e[0]=h*w,e[4]=-h*T,e[8]=m,e[1]=W+te*m,e[5]=O-ue*m,e[9]=-u*h,e[2]=ue-O*m,e[6]=te+W*m,e[10]=a*h}else if("YXZ"===t.order){const O=h*w,W=h*T,te=m*w,ue=m*T;e[0]=O+ue*u,e[4]=te*u-W,e[8]=a*m,e[1]=a*T,e[5]=a*w,e[9]=-u,e[2]=W*u-te,e[6]=ue+O*u,e[10]=a*h}else if("ZXY"===t.order){const O=h*w,W=h*T,te=m*w,ue=m*T;e[0]=O-ue*u,e[4]=-a*T,e[8]=te+W*u,e[1]=W+te*u,e[5]=a*w,e[9]=ue-O*u,e[2]=-a*m,e[6]=u,e[10]=a*h}else if("ZYX"===t.order){const O=a*w,W=a*T,te=u*w,ue=u*T;e[0]=h*w,e[4]=te*m-W,e[8]=O*m+ue,e[1]=h*T,e[5]=ue*m+O,e[9]=W*m-te,e[2]=-m,e[6]=u*h,e[10]=a*h}else if("YZX"===t.order){const O=a*h,W=a*m,te=u*h,ue=u*m;e[0]=h*w,e[4]=ue-O*T,e[8]=te*T+W,e[1]=T,e[5]=a*w,e[9]=-u*w,e[2]=-m*w,e[6]=W*T+te,e[10]=O-ue*T}else if("XZY"===t.order){const O=a*h,W=a*m,te=u*h,ue=u*m;e[0]=h*w,e[4]=-T,e[8]=m*w,e[1]=O*T+ue,e[5]=a*w,e[9]=W*T-te,e[2]=te*T-W,e[6]=u*w,e[10]=ue*T+O}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(R_e,t,O_e)}lookAt(t,e,n){const r=this.elements;return dg.subVectors(t,e),0===dg.lengthSq()&&(dg.z=1),dg.normalize(),Ny.crossVectors(n,dg),0===Ny.lengthSq()&&(1===Math.abs(n.z)?dg.x+=1e-4:dg.z+=1e-4,dg.normalize(),Ny.crossVectors(n,dg)),Ny.normalize(),nE.crossVectors(dg,Ny),r[0]=Ny.x,r[4]=nE.x,r[8]=dg.x,r[1]=Ny.y,r[5]=nE.y,r[9]=dg.y,r[2]=Ny.z,r[6]=nE.z,r[10]=dg.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,a=n[0],u=n[4],h=n[8],m=n[12],w=n[1],T=n[5],O=n[9],W=n[13],te=n[2],ue=n[6],ce=n[10],Ne=n[14],et=n[3],Je=n[7],at=n[11],kt=n[15],Zt=r[0],yn=r[4],zt=r[8],pn=r[12],Kn=r[1],Bi=r[5],Ji=r[9],Vi=r[13],bi=r[2],Fi=r[6],mi=r[10],zi=r[14],Oi=r[3],_i=r[7],Ni=r[11],es=r[15];return s[0]=a*Zt+u*Kn+h*bi+m*Oi,s[4]=a*yn+u*Bi+h*Fi+m*_i,s[8]=a*zt+u*Ji+h*mi+m*Ni,s[12]=a*pn+u*Vi+h*zi+m*es,s[1]=w*Zt+T*Kn+O*bi+W*Oi,s[5]=w*yn+T*Bi+O*Fi+W*_i,s[9]=w*zt+T*Ji+O*mi+W*Ni,s[13]=w*pn+T*Vi+O*zi+W*es,s[2]=te*Zt+ue*Kn+ce*bi+Ne*Oi,s[6]=te*yn+ue*Bi+ce*Fi+Ne*_i,s[10]=te*zt+ue*Ji+ce*mi+Ne*Ni,s[14]=te*pn+ue*Vi+ce*zi+Ne*es,s[3]=et*Zt+Je*Kn+at*bi+kt*Oi,s[7]=et*yn+Je*Bi+at*Fi+kt*_i,s[11]=et*zt+Je*Ji+at*mi+kt*Ni,s[15]=et*pn+Je*Vi+at*zi+kt*es,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],a=t[1],u=t[5],h=t[9],m=t[13],w=t[2],T=t[6],O=t[10],W=t[14];return t[3]*(+s*h*T-r*m*T-s*u*O+n*m*O+r*u*W-n*h*W)+t[7]*(+e*h*W-e*m*O+s*a*O-r*a*W+r*m*w-s*h*w)+t[11]*(+e*m*T-e*u*W-s*a*T+n*a*W+s*u*w-n*m*w)+t[15]*(-r*u*w-e*h*T+e*u*O+r*a*T-n*a*O+n*h*w)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],a=t[4],u=t[5],h=t[6],m=t[7],w=t[8],T=t[9],O=t[10],W=t[11],te=t[12],ue=t[13],ce=t[14],Ne=t[15],et=T*ce*m-ue*O*m+ue*h*W-u*ce*W-T*h*Ne+u*O*Ne,Je=te*O*m-w*ce*m-te*h*W+a*ce*W+w*h*Ne-a*O*Ne,at=w*ue*m-te*T*m+te*u*W-a*ue*W-w*u*Ne+a*T*Ne,kt=te*T*h-w*ue*h-te*u*O+a*ue*O+w*u*ce-a*T*ce,Zt=e*et+n*Je+r*at+s*kt;if(0===Zt)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const yn=1/Zt;return t[0]=et*yn,t[1]=(ue*O*s-T*ce*s-ue*r*W+n*ce*W+T*r*Ne-n*O*Ne)*yn,t[2]=(u*ce*s-ue*h*s+ue*r*m-n*ce*m-u*r*Ne+n*h*Ne)*yn,t[3]=(T*h*s-u*O*s-T*r*m+n*O*m+u*r*W-n*h*W)*yn,t[4]=Je*yn,t[5]=(w*ce*s-te*O*s+te*r*W-e*ce*W-w*r*Ne+e*O*Ne)*yn,t[6]=(te*h*s-a*ce*s-te*r*m+e*ce*m+a*r*Ne-e*h*Ne)*yn,t[7]=(a*O*s-w*h*s+w*r*m-e*O*m-a*r*W+e*h*W)*yn,t[8]=at*yn,t[9]=(te*T*s-w*ue*s-te*n*W+e*ue*W+w*n*Ne-e*T*Ne)*yn,t[10]=(a*ue*s-te*u*s+te*n*m-e*ue*m-a*n*Ne+e*u*Ne)*yn,t[11]=(w*u*s-a*T*s-w*n*m+e*T*m+a*n*W-e*u*W)*yn,t[12]=kt*yn,t[13]=(w*ue*r-te*T*r+te*n*O-e*ue*O-w*n*ce+e*T*ce)*yn,t[14]=(te*u*r-a*ue*r-te*n*h+e*ue*h+a*n*ce-e*u*ce)*yn,t[15]=(a*T*r-w*u*r+w*n*h-e*T*h-a*n*O+e*u*O)*yn,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,a=t.x,u=t.y,h=t.z,m=s*a,w=s*u;return this.set(m*a+n,m*u-r*h,m*h+r*u,0,m*u+r*h,w*u+n,w*h-r*a,0,m*h-r*u,w*h+r*a,s*h*h+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,a){return this.set(1,n,s,0,t,1,a,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,a=e._y,u=e._z,h=e._w,m=s+s,w=a+a,T=u+u,O=s*m,W=s*w,te=s*T,ue=a*w,ce=a*T,Ne=u*T,et=h*m,Je=h*w,at=h*T,kt=n.x,Zt=n.y,yn=n.z;return r[0]=(1-(ue+Ne))*kt,r[1]=(W+at)*kt,r[2]=(te-Je)*kt,r[3]=0,r[4]=(W-at)*Zt,r[5]=(1-(O+Ne))*Zt,r[6]=(ce+et)*Zt,r[7]=0,r[8]=(te+Je)*yn,r[9]=(ce-et)*yn,r[10]=(1-(O+ue))*yn,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=VC.set(r[0],r[1],r[2]).length();const a=VC.set(r[4],r[5],r[6]).length(),u=VC.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],Ym.copy(this);const m=1/s,w=1/a,T=1/u;return Ym.elements[0]*=m,Ym.elements[1]*=m,Ym.elements[2]*=m,Ym.elements[4]*=w,Ym.elements[5]*=w,Ym.elements[6]*=w,Ym.elements[8]*=T,Ym.elements[9]*=T,Ym.elements[10]*=T,e.setFromRotationMatrix(Ym),n.x=s,n.y=a,n.z=u,this}makePerspective(t,e,n,r,s,a){const u=this.elements,m=2*s/(n-r),w=(e+t)/(e-t),T=(n+r)/(n-r),O=-(a+s)/(a-s),W=-2*a*s/(a-s);return u[0]=2*s/(e-t),u[4]=0,u[8]=w,u[12]=0,u[1]=0,u[5]=m,u[9]=T,u[13]=0,u[2]=0,u[6]=0,u[10]=O,u[14]=W,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,n,r,s,a){const u=this.elements,h=1/(e-t),m=1/(n-r),w=1/(a-s),T=(e+t)*h,O=(n+r)*m,W=(a+s)*w;return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-T,u[1]=0,u[5]=2*m,u[9]=0,u[13]=-O,u[2]=0,u[6]=0,u[10]=-2*w,u[14]=-W,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const VC=new Vn,Ym=new To,R_e=new Vn(0,0,0),O_e=new Vn(1,1,1),Ny=new Vn,nE=new Vn,dg=new Vn,o6=new To,l6=new hg;let F_e=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,a=s[0],u=s[4],h=s[8],m=s[1],w=s[5],T=s[9],O=s[2],W=s[6],te=s[10];switch(n){case"XYZ":this._y=Math.asin(fh(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-T,te),this._z=Math.atan2(-u,a)):(this._x=Math.atan2(W,w),this._z=0);break;case"YXZ":this._x=Math.asin(-fh(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(h,te),this._z=Math.atan2(m,w)):(this._y=Math.atan2(-O,a),this._z=0);break;case"ZXY":this._x=Math.asin(fh(W,-1,1)),Math.abs(W)<.9999999?(this._y=Math.atan2(-O,te),this._z=Math.atan2(-u,w)):(this._y=0,this._z=Math.atan2(m,a));break;case"ZYX":this._y=Math.asin(-fh(O,-1,1)),Math.abs(O)<.9999999?(this._x=Math.atan2(W,te),this._z=Math.atan2(m,a)):(this._x=0,this._z=Math.atan2(-u,w));break;case"YZX":this._z=Math.asin(fh(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-T,w),this._y=Math.atan2(-O,a)):(this._x=0,this._y=Math.atan2(h,te));break;case"XZY":this._z=Math.asin(-fh(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(W,w),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-T,te),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return o6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(o6,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return l6.setFromEuler(this),this.setFromQuaternion(l6,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return i.DefaultOrder="XYZ",i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i})();class wL{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let N_e=0;const u6=new Vn,UC=new hg,U_=new To,iE=new Vn,_1=new Vn,B_e=new Vn,z_e=new hg,c6=new Vn(1,0,0),h6=new Vn(0,1,0),d6=new Vn(0,0,1),V_e={type:"added"},f6={type:"removed"};let Pp=(()=>{class i extends LC{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:N_e++}),this.uuid=ug(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DefaultUp.clone();const e=new Vn,n=new F_e,r=new hg,s=new Vn(1,1,1);n._onChange(function a(){r.setFromEuler(n,!1)}),r._onChange(function u(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new To},normalMatrix:{value:new cg}}),this.matrix=new To,this.matrixWorld=new To,this.matrixAutoUpdate=i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DefaultMatrixWorldAutoUpdate,this.layers=new wL,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return UC.setFromAxisAngle(e,n),this.quaternion.multiply(UC),this}rotateOnWorldAxis(e,n){return UC.setFromAxisAngle(e,n),this.quaternion.premultiply(UC),this}rotateX(e){return this.rotateOnAxis(c6,e)}rotateY(e){return this.rotateOnAxis(h6,e)}rotateZ(e){return this.rotateOnAxis(d6,e)}translateOnAxis(e,n){return u6.copy(e).applyQuaternion(this.quaternion),this.position.add(u6.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(c6,e)}translateY(e){return this.translateOnAxis(h6,e)}translateZ(e){return this.translateOnAxis(d6,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(U_.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?iE.copy(e):iE.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),_1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?U_.lookAt(_1,iE,this.up):U_.lookAt(iE,_1,this.up),this.quaternion.setFromRotationMatrix(U_),s&&(U_.extractRotation(s.matrixWorld),UC.setFromRotationMatrix(U_),this.quaternion.premultiply(UC.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(V_e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(f6)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(f6)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),U_.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),U_.multiply(e.parent.matrixWorld)),e.applyMatrix4(U_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const u=this.children[r].getObjectByProperty(e,n);if(void 0!==u)return u}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_1,e,B_e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_1,z_e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const a=n[r];(!0===a.matrixWorldAutoUpdate||!0===e)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let a=0,u=s.length;a<u;a++){const h=s[a];!0===h.matrixWorldAutoUpdate&&h.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function a(h,m){return void 0===h[m.uuid]&&(h[m.uuid]=m.toJSON(e)),m.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const h=this.geometry.parameters;if(void 0!==h&&void 0!==h.shapes){const m=h.shapes;if(Array.isArray(m))for(let w=0,T=m.length;w<T;w++)a(e.shapes,m[w]);else a(e.shapes,m)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const h=[];for(let m=0,w=this.material.length;m<w;m++)h.push(a(e.materials,this.material[m]));s.material=h}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let h=0;h<this.children.length;h++)s.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let h=0;h<this.animations.length;h++)s.animations.push(a(e.animations,this.animations[h]))}if(n){const h=u(e.geometries),m=u(e.materials),w=u(e.textures),T=u(e.images),O=u(e.shapes),W=u(e.skeletons),te=u(e.animations),ue=u(e.nodes);h.length>0&&(r.geometries=h),m.length>0&&(r.materials=m),w.length>0&&(r.textures=w),T.length>0&&(r.images=T),O.length>0&&(r.shapes=O),W.length>0&&(r.skeletons=W),te.length>0&&(r.animations=te),ue.length>0&&(r.nodes=ue)}return r.object=s,r;function u(h){const m=[];for(const w in h){const T=h[w];delete T.metadata,m.push(T)}return m}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DefaultUp=new Vn(0,1,0),i.DefaultMatrixAutoUpdate=!0,i.DefaultMatrixWorldAutoUpdate=!0,i})();const Km=new Vn,H_=new Vn,xL=new Vn,G_=new Vn,HC=new Vn,GC=new Vn,p6=new Vn,AL=new Vn,IL=new Vn,SL=new Vn;class Zm{constructor(t=new Vn,e=new Vn,n=new Vn){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),Km.subVectors(t,e),r.cross(Km);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){Km.subVectors(r,e),H_.subVectors(n,e),xL.subVectors(t,e);const a=Km.dot(Km),u=Km.dot(H_),h=Km.dot(xL),m=H_.dot(H_),w=H_.dot(xL),T=a*m-u*u;if(0===T)return s.set(-2,-1,-1);const O=1/T,W=(m*h-u*w)*O,te=(a*w-u*h)*O;return s.set(1-W-te,te,W)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,G_),G_.x>=0&&G_.y>=0&&G_.x+G_.y<=1}static getUV(t,e,n,r,s,a,u,h){return this.getBarycoord(t,e,n,r,G_),h.set(0,0),h.addScaledVector(s,G_.x),h.addScaledVector(a,G_.y),h.addScaledVector(u,G_.z),h}static isFrontFacing(t,e,n,r){return Km.subVectors(n,e),H_.subVectors(t,e),Km.cross(H_).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Km.subVectors(this.c,this.b),H_.subVectors(this.a,this.b),.5*Km.cross(H_).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Zm.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Zm.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,s){return Zm.getUV(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return Zm.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Zm.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let a,u;HC.subVectors(r,n),GC.subVectors(s,n),AL.subVectors(t,n);const h=HC.dot(AL),m=GC.dot(AL);if(h<=0&&m<=0)return e.copy(n);IL.subVectors(t,r);const w=HC.dot(IL),T=GC.dot(IL);if(w>=0&&T<=w)return e.copy(r);const O=h*T-w*m;if(O<=0&&h>=0&&w<=0)return a=h/(h-w),e.copy(n).addScaledVector(HC,a);SL.subVectors(t,s);const W=HC.dot(SL),te=GC.dot(SL);if(te>=0&&W<=te)return e.copy(s);const ue=W*m-h*te;if(ue<=0&&m>=0&&te<=0)return u=m/(m-te),e.copy(n).addScaledVector(GC,u);const ce=w*te-W*T;if(ce<=0&&T-w>=0&&W-te>=0)return p6.subVectors(s,r),u=(T-w)/(T-w+(W-te)),e.copy(r).addScaledVector(p6,u);const Ne=1/(ce+ue+O);return a=ue*Ne,u=O*Ne,e.copy(n).addScaledVector(HC,a).addScaledVector(GC,u)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let U_e=0;class ib extends LC{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:U_e++}),this.uuid=ug(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const a=[];for(const u in s){const h=s[u];delete h.metadata,a.push(h)}return a}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const s=r(t.textures),a=r(t.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class rb extends ib{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new la(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Oh=new Vn,rE=new Jr;class wd{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)rE.fromBufferAttribute(this,e),rE.applyMatrix3(t),this.setXY(e,rE.x,rE.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Oh.fromBufferAttribute(this,e),Oh.applyMatrix3(t),this.setXYZ(e,Oh.x,Oh.y,Oh.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Oh.fromBufferAttribute(this,e),Oh.applyMatrix4(t),this.setXYZ(e,Oh.x,Oh.y,Oh.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Oh.fromBufferAttribute(this,e),Oh.applyNormalMatrix(t),this.setXYZ(e,Oh.x,Oh.y,Oh.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Oh.fromBufferAttribute(this,e),Oh.transformDirection(t),this.setXYZ(e,Oh.x,Oh.y,Oh.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=B_(e,this.array)),e}setX(t,e){return this.normalized&&(e=Mu(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=B_(e,this.array)),e}setY(t,e){return this.normalized&&(e=Mu(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=B_(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Mu(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=B_(e,this.array)),e}setW(t,e){return this.normalized&&(e=Mu(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Mu(e,this.array),n=Mu(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=Mu(e,this.array),n=Mu(n,this.array),r=Mu(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=Mu(e,this.array),n=Mu(n,this.array),r=Mu(r,this.array),s=Mu(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class g6 extends wd{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class m6 extends wd{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class va extends wd{constructor(t,e,n){super(new Float32Array(t),e,n)}}let H_e=0;const nm=new To,EL=new Pp,WC=new Vn,fg=new ky,y1=new ky,xd=new Vn;class Jo extends LC{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:H_e++}),this.uuid=ug(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(t6(t)?m6:g6)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new cg).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return nm.makeRotationFromQuaternion(t),this.applyMatrix4(nm),this}rotateX(t){return nm.makeRotationX(t),this.applyMatrix4(nm),this}rotateY(t){return nm.makeRotationY(t),this.applyMatrix4(nm),this}rotateZ(t){return nm.makeRotationZ(t),this.applyMatrix4(nm),this}translate(t,e,n){return nm.makeTranslation(t,e,n),this.applyMatrix4(nm),this}scale(t,e,n){return nm.makeScale(t,e,n),this.applyMatrix4(nm),this}lookAt(t){return EL.lookAt(t),EL.updateMatrix(),this.applyMatrix4(EL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(WC).negate(),this.translate(WC.x,WC.y,WC.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new va(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ky);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Vn(-1/0,-1/0,-1/0),new Vn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)fg.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(xd.addVectors(this.boundingBox.min,fg.min),this.boundingBox.expandByPoint(xd),xd.addVectors(this.boundingBox.max,fg.max),this.boundingBox.expandByPoint(xd)):(this.boundingBox.expandByPoint(fg.min),this.boundingBox.expandByPoint(fg.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zC);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Vn,1/0);if(t){const n=this.boundingSphere.center;if(fg.setFromBufferAttribute(t),e)for(let s=0,a=e.length;s<a;s++)y1.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(xd.addVectors(fg.min,y1.min),fg.expandByPoint(xd),xd.addVectors(fg.max,y1.max),fg.expandByPoint(xd)):(fg.expandByPoint(y1.min),fg.expandByPoint(y1.max));fg.getCenter(n);let r=0;for(let s=0,a=t.count;s<a;s++)xd.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(xd));if(e)for(let s=0,a=e.length;s<a;s++){const u=e[s],h=this.morphTargetsRelative;for(let m=0,w=u.count;m<w;m++)xd.fromBufferAttribute(u,m),h&&(WC.fromBufferAttribute(t,m),xd.add(WC)),r=Math.max(r,n.distanceToSquared(xd))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,s=e.normal.array,a=e.uv.array,u=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new wd(new Float32Array(4*u),4));const h=this.getAttribute("tangent").array,m=[],w=[];for(let Kn=0;Kn<u;Kn++)m[Kn]=new Vn,w[Kn]=new Vn;const T=new Vn,O=new Vn,W=new Vn,te=new Jr,ue=new Jr,ce=new Jr,Ne=new Vn,et=new Vn;function Je(Kn,Bi,Ji){T.fromArray(r,3*Kn),O.fromArray(r,3*Bi),W.fromArray(r,3*Ji),te.fromArray(a,2*Kn),ue.fromArray(a,2*Bi),ce.fromArray(a,2*Ji),O.sub(T),W.sub(T),ue.sub(te),ce.sub(te);const Vi=1/(ue.x*ce.y-ce.x*ue.y);!isFinite(Vi)||(Ne.copy(O).multiplyScalar(ce.y).addScaledVector(W,-ue.y).multiplyScalar(Vi),et.copy(W).multiplyScalar(ue.x).addScaledVector(O,-ce.x).multiplyScalar(Vi),m[Kn].add(Ne),m[Bi].add(Ne),m[Ji].add(Ne),w[Kn].add(et),w[Bi].add(et),w[Ji].add(et))}let at=this.groups;0===at.length&&(at=[{start:0,count:n.length}]);for(let Kn=0,Bi=at.length;Kn<Bi;++Kn){const Ji=at[Kn],Vi=Ji.start;for(let Fi=Vi,mi=Vi+Ji.count;Fi<mi;Fi+=3)Je(n[Fi+0],n[Fi+1],n[Fi+2])}const kt=new Vn,Zt=new Vn,yn=new Vn,zt=new Vn;function pn(Kn){yn.fromArray(s,3*Kn),zt.copy(yn);const Bi=m[Kn];kt.copy(Bi),kt.sub(yn.multiplyScalar(yn.dot(Bi))).normalize(),Zt.crossVectors(zt,Bi);const Vi=Zt.dot(w[Kn])<0?-1:1;h[4*Kn]=kt.x,h[4*Kn+1]=kt.y,h[4*Kn+2]=kt.z,h[4*Kn+3]=Vi}for(let Kn=0,Bi=at.length;Kn<Bi;++Kn){const Ji=at[Kn],Vi=Ji.start;for(let Fi=Vi,mi=Vi+Ji.count;Fi<mi;Fi+=3)pn(n[Fi+0]),pn(n[Fi+1]),pn(n[Fi+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new wd(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let O=0,W=n.count;O<W;O++)n.setXYZ(O,0,0,0);const r=new Vn,s=new Vn,a=new Vn,u=new Vn,h=new Vn,m=new Vn,w=new Vn,T=new Vn;if(t)for(let O=0,W=t.count;O<W;O+=3){const te=t.getX(O+0),ue=t.getX(O+1),ce=t.getX(O+2);r.fromBufferAttribute(e,te),s.fromBufferAttribute(e,ue),a.fromBufferAttribute(e,ce),w.subVectors(a,s),T.subVectors(r,s),w.cross(T),u.fromBufferAttribute(n,te),h.fromBufferAttribute(n,ue),m.fromBufferAttribute(n,ce),u.add(w),h.add(w),m.add(w),n.setXYZ(te,u.x,u.y,u.z),n.setXYZ(ue,h.x,h.y,h.z),n.setXYZ(ce,m.x,m.y,m.z)}else for(let O=0,W=e.count;O<W;O+=3)r.fromBufferAttribute(e,O+0),s.fromBufferAttribute(e,O+1),a.fromBufferAttribute(e,O+2),w.subVectors(a,s),T.subVectors(r,s),w.cross(T),n.setXYZ(O+0,w.x,w.y,w.z),n.setXYZ(O+1,w.x,w.y,w.z),n.setXYZ(O+2,w.x,w.y,w.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)xd.fromBufferAttribute(t,e),xd.normalize(),t.setXYZ(e,xd.x,xd.y,xd.z)}toNonIndexed(){function t(u,h){const m=u.array,w=u.itemSize,T=u.normalized,O=new m.constructor(h.length*w);let W=0,te=0;for(let ue=0,ce=h.length;ue<ce;ue++){W=u.isInterleavedBufferAttribute?h[ue]*u.data.stride+u.offset:h[ue]*w;for(let Ne=0;Ne<w;Ne++)O[te++]=m[W++]}return new wd(O,w,T)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Jo,n=this.index.array,r=this.attributes;for(const u in r){const m=t(r[u],n);e.setAttribute(u,m)}const s=this.morphAttributes;for(const u in s){const h=[],m=s[u];for(let w=0,T=m.length;w<T;w++){const W=t(m[w],n);h.push(W)}e.morphAttributes[u]=h}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let u=0,h=a.length;u<h;u++){const m=a[u];e.addGroup(m.start,m.count,m.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const h=this.parameters;for(const m in h)void 0!==h[m]&&(t[m]=h[m]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const h in n)t.data.attributes[h]=n[h].toJSON(t.data);const r={};let s=!1;for(const h in this.morphAttributes){const m=this.morphAttributes[h],w=[];for(let T=0,O=m.length;T<O;T++)w.push(m[T].toJSON(t.data));w.length>0&&(r[h]=w,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const m in r)this.setAttribute(m,r[m].clone(e));const s=t.morphAttributes;for(const m in s){const w=[],T=s[m];for(let O=0,W=T.length;O<W;O++)w.push(T[O].clone(e));this.morphAttributes[m]=w}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let m=0,w=a.length;m<w;m++){const T=a[m];this.addGroup(T.start,T.count,T.materialIndex)}const u=t.boundingBox;null!==u&&(this.boundingBox=u.clone());const h=t.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const v6=new To,jC=new tE,TL=new zC,By=new Vn,zy=new Vn,Vy=new Vn,ML=new Vn,DL=new Vn,PL=new Vn,sE=new Vn,aE=new Vn,oE=new Vn,lE=new Jr,uE=new Jr,cE=new Jr,LL=new Vn,hE=new Vn;class Ef extends Pp{constructor(t=new Jo,e=new rb){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}raycast(t,e){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),TL.copy(n.boundingSphere),TL.applyMatrix4(s),!1===t.ray.intersectsSphere(TL))||(v6.copy(s).invert(),jC.copy(t.ray).applyMatrix4(v6),null!==n.boundingBox&&!1===jC.intersectsBox(n.boundingBox)))return;let a;const u=n.index,h=n.attributes.position,m=n.morphAttributes.position,w=n.morphTargetsRelative,T=n.attributes.uv,O=n.attributes.uv2,W=n.groups,te=n.drawRange;if(null!==u)if(Array.isArray(r))for(let ue=0,ce=W.length;ue<ce;ue++){const Ne=W[ue],et=r[Ne.materialIndex];for(let kt=Math.max(Ne.start,te.start),Zt=Math.min(u.count,Math.min(Ne.start+Ne.count,te.start+te.count));kt<Zt;kt+=3){const yn=u.getX(kt),zt=u.getX(kt+1),pn=u.getX(kt+2);a=dE(this,et,t,jC,h,m,w,T,O,yn,zt,pn),a&&(a.faceIndex=Math.floor(kt/3),a.face.materialIndex=Ne.materialIndex,e.push(a))}}else for(let Ne=Math.max(0,te.start),et=Math.min(u.count,te.start+te.count);Ne<et;Ne+=3){const Je=u.getX(Ne),at=u.getX(Ne+1),kt=u.getX(Ne+2);a=dE(this,r,t,jC,h,m,w,T,O,Je,at,kt),a&&(a.faceIndex=Math.floor(Ne/3),e.push(a))}else if(void 0!==h)if(Array.isArray(r))for(let ue=0,ce=W.length;ue<ce;ue++){const Ne=W[ue],et=r[Ne.materialIndex];for(let kt=Math.max(Ne.start,te.start),Zt=Math.min(h.count,Math.min(Ne.start+Ne.count,te.start+te.count));kt<Zt;kt+=3)a=dE(this,et,t,jC,h,m,w,T,O,kt,kt+1,kt+2),a&&(a.faceIndex=Math.floor(kt/3),a.face.materialIndex=Ne.materialIndex,e.push(a))}else for(let Ne=Math.max(0,te.start),et=Math.min(h.count,te.start+te.count);Ne<et;Ne+=3)a=dE(this,r,t,jC,h,m,w,T,O,Ne,Ne+1,Ne+2),a&&(a.faceIndex=Math.floor(Ne/3),e.push(a))}}function dE(i,t,e,n,r,s,a,u,h,m,w,T){By.fromBufferAttribute(r,m),zy.fromBufferAttribute(r,w),Vy.fromBufferAttribute(r,T);const O=i.morphTargetInfluences;if(s&&O){sE.set(0,0,0),aE.set(0,0,0),oE.set(0,0,0);for(let te=0,ue=s.length;te<ue;te++){const ce=O[te],Ne=s[te];0!==ce&&(ML.fromBufferAttribute(Ne,m),DL.fromBufferAttribute(Ne,w),PL.fromBufferAttribute(Ne,T),a?(sE.addScaledVector(ML,ce),aE.addScaledVector(DL,ce),oE.addScaledVector(PL,ce)):(sE.addScaledVector(ML.sub(By),ce),aE.addScaledVector(DL.sub(zy),ce),oE.addScaledVector(PL.sub(Vy),ce)))}By.add(sE),zy.add(aE),Vy.add(oE)}i.isSkinnedMesh&&(i.boneTransform(m,By),i.boneTransform(w,zy),i.boneTransform(T,Vy));const W=function G_e(i,t,e,n,r,s,a,u){let h;if(h=1===t.side?n.intersectTriangle(a,s,r,!0,u):n.intersectTriangle(r,s,a,2!==t.side,u),null===h)return null;hE.copy(u),hE.applyMatrix4(i.matrixWorld);const m=e.ray.origin.distanceTo(hE);return m<e.near||m>e.far?null:{distance:m,point:hE.clone(),object:i}}(i,t,e,n,By,zy,Vy,LL);if(W){u&&(lE.fromBufferAttribute(u,m),uE.fromBufferAttribute(u,w),cE.fromBufferAttribute(u,T),W.uv=Zm.getUV(LL,By,zy,Vy,lE,uE,cE,new Jr)),h&&(lE.fromBufferAttribute(h,m),uE.fromBufferAttribute(h,w),cE.fromBufferAttribute(h,T),W.uv2=Zm.getUV(LL,By,zy,Vy,lE,uE,cE,new Jr));const te={a:m,b:w,c:T,normal:new Vn,materialIndex:0};Zm.getNormal(By,zy,Vy,te.normal),W.face=te}return W}class Uy extends Jo{constructor(t=1,e=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};const u=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const h=[],m=[],w=[],T=[];let O=0,W=0;function te(ue,ce,Ne,et,Je,at,kt,Zt,yn,zt,pn){const Kn=at/yn,Bi=kt/zt,Ji=at/2,Vi=kt/2,bi=Zt/2,Fi=yn+1,mi=zt+1;let zi=0,Oi=0;const _i=new Vn;for(let Ni=0;Ni<mi;Ni++){const es=Ni*Bi-Vi;for(let Er=0;Er<Fi;Er++)_i[ue]=(Er*Kn-Ji)*et,_i[ce]=es*Je,_i[Ne]=bi,m.push(_i.x,_i.y,_i.z),_i[ue]=0,_i[ce]=0,_i[Ne]=Zt>0?1:-1,w.push(_i.x,_i.y,_i.z),T.push(Er/yn),T.push(1-Ni/zt),zi+=1}for(let Ni=0;Ni<zt;Ni++)for(let es=0;es<yn;es++){const cs=O+es+Fi*(Ni+1),ys=O+(es+1)+Fi*(Ni+1),Fa=O+(es+1)+Fi*Ni;h.push(O+es+Fi*Ni,cs,Fa),h.push(cs,ys,Fa),Oi+=6}u.addGroup(W,Oi,pn),W+=Oi,O+=zi}te("z","y","x",-1,-1,n,e,t,a,s,0),te("z","y","x",1,-1,n,e,-t,a,s,1),te("x","z","y",1,1,t,n,e,r,a,2),te("x","z","y",1,-1,t,n,-e,r,a,3),te("x","y","z",1,-1,t,e,n,r,s,4),te("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(h),this.setAttribute("position",new va(m,3)),this.setAttribute("normal",new va(w,3)),this.setAttribute("uv",new va(T,2))}static fromJSON(t){return new Uy(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function $C(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];t[e][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function rp(i){const t={};for(let e=0;e<i.length;e++){const n=$C(i[e]);for(const r in n)t[r]=n[r]}return t}const j_e={clone:$C,merge:rp};class Hy extends ib{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=$C(t.uniforms),this.uniformsGroups=function W_e(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;e.uniforms[r]=a&&a.isTexture?{type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?{type:"c",value:a.getHex()}:a&&a.isVector2?{type:"v2",value:a.toArray()}:a&&a.isVector3?{type:"v3",value:a.toArray()}:a&&a.isVector4?{type:"v4",value:a.toArray()}:a&&a.isMatrix3?{type:"m3",value:a.toArray()}:a&&a.isMatrix4?{type:"m4",value:a.toArray()}:{value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class kL extends Pp{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new To,this.projectionMatrix=new To,this.projectionMatrixInverse=new To}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Yd extends kL{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*f1*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Z0*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*f1*Math.atan(Math.tan(.5*Z0*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,s,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Z0*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const h=a.fullWidth,m=a.fullHeight;s+=a.offsetX*r/h,e-=a.offsetY*n/m,r*=a.width/h,n*=a.height/m}const u=this.filmOffset;0!==u&&(s+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class X_e extends Pp{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Yd(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Vn(1,0,0)),this.add(r);const s=new Yd(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Vn(-1,0,0)),this.add(s);const a=new Yd(90,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Vn(0,1,0)),this.add(a);const u=new Yd(90,1,t,e);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(new Vn(0,-1,0)),this.add(u);const h=new Yd(90,1,t,e);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Vn(0,0,1)),this.add(h);const m=new Yd(90,1,t,e);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new Vn(0,0,-1)),this.add(m)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,a,u,h,m]=this.children,w=t.getRenderTarget(),T=t.toneMapping,O=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const W=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,u),t.setRenderTarget(n,4),t.render(e,h),n.texture.generateMipmaps=W,t.setRenderTarget(n,5),t.render(e,m),t.setRenderTarget(w),t.toneMapping=T,t.xr.enabled=O,n.texture.needsPMREMUpdate=!0}}class fE extends Ly{constructor(t,e,n,r,s,a,u,h,m,w){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,s,a,u,h,m,w),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Y_e extends J0{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new fE([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Rh}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Uy(5,5,5),s=new Hy({name:"CubemapFromEquirect",uniforms:$C(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=e;const a=new Ef(r,s),u=e.minFilter;return 1008===e.minFilter&&(e.minFilter=Rh),new X_e(1,10,this).update(t,a),e.minFilter=u,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,r);t.setRenderTarget(s)}}const RL=new Vn,K_e=new Vn,Z_e=new cg;class sb{constructor(t=new Vn(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=RL.subVectors(n,e).cross(K_e.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(RL),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Z_e.getNormalMatrix(t),r=this.coplanarPoint(RL).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const YC=new zC,pE=new Vn;class OL{constructor(t=new sb,e=new sb,n=new sb,r=new sb,s=new sb,a=new sb){this.planes=[t,e,n,r,s,a]}set(t,e,n,r,s,a){const u=this.planes;return u[0].copy(t),u[1].copy(e),u[2].copy(n),u[3].copy(r),u[4].copy(s),u[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],s=n[1],a=n[2],u=n[3],h=n[4],m=n[5],w=n[6],T=n[7],O=n[8],W=n[9],te=n[10],ue=n[11],ce=n[12],Ne=n[13],et=n[14],Je=n[15];return e[0].setComponents(u-r,T-h,ue-O,Je-ce).normalize(),e[1].setComponents(u+r,T+h,ue+O,Je+ce).normalize(),e[2].setComponents(u+s,T+m,ue+W,Je+Ne).normalize(),e[3].setComponents(u-s,T-m,ue-W,Je-Ne).normalize(),e[4].setComponents(u-a,T-w,ue-te,Je-et).normalize(),e[5].setComponents(u+a,T+w,ue+te,Je+et).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),YC.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(YC)}intersectsSprite(t){return YC.center.set(0,0,0),YC.radius=.7071067811865476,YC.applyMatrix4(t.matrixWorld),this.intersectsSphere(YC)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(pE.x=r.normal.x>0?t.max.x:t.min.x,pE.y=r.normal.y>0?t.max.y:t.min.y,pE.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(pE)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function _6(){let i=null,t=!1,e=null,n=null;function r(s,a){e(s,a),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function Q_e(i,t){const e=t.isWebGL2,n=new WeakMap;return{get:function a(m){return m.isInterleavedBufferAttribute&&(m=m.data),n.get(m)},remove:function u(m){m.isInterleavedBufferAttribute&&(m=m.data);const w=n.get(m);w&&(i.deleteBuffer(w.buffer),n.delete(m))},update:function h(m,w){if(m.isGLBufferAttribute){const O=n.get(m);return void((!O||O.version<m.version)&&n.set(m,{buffer:m.buffer,type:m.type,bytesPerElement:m.elementSize,version:m.version}))}m.isInterleavedBufferAttribute&&(m=m.data);const T=n.get(m);void 0===T?n.set(m,function r(m,w){const T=m.array,O=m.usage,W=i.createBuffer();let te;if(i.bindBuffer(w,W),i.bufferData(w,T,O),m.onUploadCallback(),T instanceof Float32Array)te=5126;else if(T instanceof Uint16Array)if(m.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");te=5131}else te=5123;else if(T instanceof Int16Array)te=5122;else if(T instanceof Uint32Array)te=5125;else if(T instanceof Int32Array)te=5124;else if(T instanceof Int8Array)te=5120;else if(T instanceof Uint8Array)te=5121;else{if(!(T instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+T);te=5121}return{buffer:W,type:te,bytesPerElement:T.BYTES_PER_ELEMENT,version:m.version}}(m,w)):T.version<m.version&&(function s(m,w,T){const O=w.array,W=w.updateRange;i.bindBuffer(T,m),-1===W.count?i.bufferSubData(T,0,O):(e?i.bufferSubData(T,W.offset*O.BYTES_PER_ELEMENT,O,W.offset,W.count):i.bufferSubData(T,W.offset*O.BYTES_PER_ELEMENT,O.subarray(W.offset,W.offset+W.count)),W.count=-1)}(T.buffer,m,w),T.version=m.version)}}}class gE extends Jo{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,a=e/2,u=Math.floor(n),h=Math.floor(r),m=u+1,w=h+1,T=t/u,O=e/h,W=[],te=[],ue=[],ce=[];for(let Ne=0;Ne<w;Ne++){const et=Ne*O-a;for(let Je=0;Je<m;Je++)te.push(Je*T-s,-et,0),ue.push(0,0,1),ce.push(Je/u),ce.push(1-Ne/h)}for(let Ne=0;Ne<h;Ne++)for(let et=0;et<u;et++){const at=et+m*(Ne+1),kt=et+1+m*(Ne+1),Zt=et+1+m*Ne;W.push(et+m*Ne,at,Zt),W.push(at,kt,Zt)}this.setIndex(W),this.setAttribute("position",new va(te,3)),this.setAttribute("normal",new va(ue,3)),this.setAttribute("uv",new va(ce,2))}static fromJSON(t){return new gE(t.width,t.height,t.widthSegments,t.heightSegments)}}const Wo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Fs={common:{diffuse:{value:new la(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new cg},uv2Transform:{value:new cg},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Jr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new la(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new la(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new cg}},sprite:{diffuse:{value:new la(16777215)},opacity:{value:1},center:{value:new Jr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new cg}}},Hv={basic:{uniforms:rp([Fs.common,Fs.specularmap,Fs.envmap,Fs.aomap,Fs.lightmap,Fs.fog]),vertexShader:Wo.meshbasic_vert,fragmentShader:Wo.meshbasic_frag},lambert:{uniforms:rp([Fs.common,Fs.specularmap,Fs.envmap,Fs.aomap,Fs.lightmap,Fs.emissivemap,Fs.bumpmap,Fs.normalmap,Fs.displacementmap,Fs.fog,Fs.lights,{emissive:{value:new la(0)}}]),vertexShader:Wo.meshlambert_vert,fragmentShader:Wo.meshlambert_frag},phong:{uniforms:rp([Fs.common,Fs.specularmap,Fs.envmap,Fs.aomap,Fs.lightmap,Fs.emissivemap,Fs.bumpmap,Fs.normalmap,Fs.displacementmap,Fs.fog,Fs.lights,{emissive:{value:new la(0)},specular:{value:new la(1118481)},shininess:{value:30}}]),vertexShader:Wo.meshphong_vert,fragmentShader:Wo.meshphong_frag},standard:{uniforms:rp([Fs.common,Fs.envmap,Fs.aomap,Fs.lightmap,Fs.emissivemap,Fs.bumpmap,Fs.normalmap,Fs.displacementmap,Fs.roughnessmap,Fs.metalnessmap,Fs.fog,Fs.lights,{emissive:{value:new la(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wo.meshphysical_vert,fragmentShader:Wo.meshphysical_frag},toon:{uniforms:rp([Fs.common,Fs.aomap,Fs.lightmap,Fs.emissivemap,Fs.bumpmap,Fs.normalmap,Fs.displacementmap,Fs.gradientmap,Fs.fog,Fs.lights,{emissive:{value:new la(0)}}]),vertexShader:Wo.meshtoon_vert,fragmentShader:Wo.meshtoon_frag},matcap:{uniforms:rp([Fs.common,Fs.bumpmap,Fs.normalmap,Fs.displacementmap,Fs.fog,{matcap:{value:null}}]),vertexShader:Wo.meshmatcap_vert,fragmentShader:Wo.meshmatcap_frag},points:{uniforms:rp([Fs.points,Fs.fog]),vertexShader:Wo.points_vert,fragmentShader:Wo.points_frag},dashed:{uniforms:rp([Fs.common,Fs.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wo.linedashed_vert,fragmentShader:Wo.linedashed_frag},depth:{uniforms:rp([Fs.common,Fs.displacementmap]),vertexShader:Wo.depth_vert,fragmentShader:Wo.depth_frag},normal:{uniforms:rp([Fs.common,Fs.bumpmap,Fs.normalmap,Fs.displacementmap,{opacity:{value:1}}]),vertexShader:Wo.meshnormal_vert,fragmentShader:Wo.meshnormal_frag},sprite:{uniforms:rp([Fs.sprite,Fs.fog]),vertexShader:Wo.sprite_vert,fragmentShader:Wo.sprite_frag},background:{uniforms:{uvTransform:{value:new cg},t2D:{value:null}},vertexShader:Wo.background_vert,fragmentShader:Wo.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Wo.backgroundCube_vert,fragmentShader:Wo.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wo.cube_vert,fragmentShader:Wo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wo.equirect_vert,fragmentShader:Wo.equirect_frag},distanceRGBA:{uniforms:rp([Fs.common,Fs.displacementmap,{referencePosition:{value:new Vn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wo.distanceRGBA_vert,fragmentShader:Wo.distanceRGBA_frag},shadow:{uniforms:rp([Fs.lights,Fs.fog,{color:{value:new la(0)},opacity:{value:1}}]),vertexShader:Wo.shadow_vert,fragmentShader:Wo.shadow_frag}};function Z0e(i,t,e,n,r,s,a){const u=new la(0);let m,w,h=!0===s?0:1,T=null,O=0,W=null;function ue(ce,Ne){n.buffers.color.setClear(ce.r,ce.g,ce.b,Ne,a)}return{getClearColor:function(){return u},setClearColor:function(ce,Ne=1){u.set(ce),h=Ne,ue(u,h)},getClearAlpha:function(){return h},setClearAlpha:function(ce){h=ce,ue(u,h)},render:function te(ce,Ne){let et=!1,Je=!0===Ne.isScene?Ne.background:null;Je&&Je.isTexture&&(Je=(Ne.backgroundBlurriness>0?e:t).get(Je));const at=i.xr,kt=at.getSession&&at.getSession();kt&&"additive"===kt.environmentBlendMode&&(Je=null),null===Je?ue(u,h):Je&&Je.isColor&&(ue(Je,1),et=!0),(i.autoClear||et)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),Je&&(Je.isCubeTexture||306===Je.mapping)?(void 0===w&&(w=new Ef(new Uy(1,1,1),new Hy({name:"BackgroundCubeMaterial",uniforms:$C(Hv.backgroundCube.uniforms),vertexShader:Hv.backgroundCube.vertexShader,fragmentShader:Hv.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),w.geometry.deleteAttribute("normal"),w.geometry.deleteAttribute("uv"),w.onBeforeRender=function(Zt,yn,zt){this.matrixWorld.copyPosition(zt.matrixWorld)},Object.defineProperty(w.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(w)),w.material.uniforms.envMap.value=Je,w.material.uniforms.flipEnvMap.value=Je.isCubeTexture&&!1===Je.isRenderTargetTexture?-1:1,w.material.uniforms.backgroundBlurriness.value=Ne.backgroundBlurriness,(T!==Je||O!==Je.version||W!==i.toneMapping)&&(w.material.needsUpdate=!0,T=Je,O=Je.version,W=i.toneMapping),w.layers.enableAll(),ce.unshift(w,w.geometry,w.material,0,0,null)):Je&&Je.isTexture&&(void 0===m&&(m=new Ef(new gE(2,2),new Hy({name:"BackgroundMaterial",uniforms:$C(Hv.background.uniforms),vertexShader:Hv.background.vertexShader,fragmentShader:Hv.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(m)),m.material.uniforms.t2D.value=Je,!0===Je.matrixAutoUpdate&&Je.updateMatrix(),m.material.uniforms.uvTransform.value.copy(Je.matrix),(T!==Je||O!==Je.version||W!==i.toneMapping)&&(m.material.needsUpdate=!0,T=Je,O=Je.version,W=i.toneMapping),m.layers.enableAll(),ce.unshift(m,m.geometry,m.material,0,0,null))}}}function Q0e(i,t,e,n){const r=i.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),a=n.isWebGL2||null!==s,u={},h=ce(null);let m=h,w=!1;function W(bi){return n.isWebGL2?i.bindVertexArray(bi):s.bindVertexArrayOES(bi)}function te(bi){return n.isWebGL2?i.deleteVertexArray(bi):s.deleteVertexArrayOES(bi)}function ce(bi){const Fi=[],mi=[],zi=[];for(let Oi=0;Oi<r;Oi++)Fi[Oi]=0,mi[Oi]=0,zi[Oi]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Fi,enabledAttributes:mi,attributeDivisors:zi,object:bi,attributes:{},index:null}}function Je(){const bi=m.newAttributes;for(let Fi=0,mi=bi.length;Fi<mi;Fi++)bi[Fi]=0}function at(bi){kt(bi,0)}function kt(bi,Fi){const zi=m.enabledAttributes,Oi=m.attributeDivisors;m.newAttributes[bi]=1,0===zi[bi]&&(i.enableVertexAttribArray(bi),zi[bi]=1),Oi[bi]!==Fi&&((n.isWebGL2?i:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](bi,Fi),Oi[bi]=Fi)}function Zt(){const bi=m.newAttributes,Fi=m.enabledAttributes;for(let mi=0,zi=Fi.length;mi<zi;mi++)Fi[mi]!==bi[mi]&&(i.disableVertexAttribArray(mi),Fi[mi]=0)}function yn(bi,Fi,mi,zi,Oi,_i){!0!==n.isWebGL2||5124!==mi&&5125!==mi?i.vertexAttribPointer(bi,Fi,mi,zi,Oi,_i):i.vertexAttribIPointer(bi,Fi,mi,Oi,_i)}function Ji(){Vi(),w=!0,m!==h&&(m=h,W(m.object))}function Vi(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:function T(bi,Fi,mi,zi,Oi){let _i=!1;if(a){const Ni=function ue(bi,Fi,mi){const zi=!0===mi.wireframe;let Oi=u[bi.id];void 0===Oi&&(Oi={},u[bi.id]=Oi);let _i=Oi[Fi.id];void 0===_i&&(_i={},Oi[Fi.id]=_i);let Ni=_i[zi];return void 0===Ni&&(Ni=ce(function O(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),_i[zi]=Ni),Ni}(zi,mi,Fi);m!==Ni&&(m=Ni,W(m.object)),_i=function Ne(bi,Fi,mi,zi){const Oi=m.attributes,_i=Fi.attributes;let Ni=0;const es=mi.getAttributes();for(const Er in es)if(es[Er].location>=0){const ys=Oi[Er];let Fa=_i[Er];if(void 0===Fa&&("instanceMatrix"===Er&&bi.instanceMatrix&&(Fa=bi.instanceMatrix),"instanceColor"===Er&&bi.instanceColor&&(Fa=bi.instanceColor)),void 0===ys||ys.attribute!==Fa||Fa&&ys.data!==Fa.data)return!0;Ni++}return m.attributesNum!==Ni||m.index!==zi}(bi,zi,mi,Oi),_i&&function et(bi,Fi,mi,zi){const Oi={},_i=Fi.attributes;let Ni=0;const es=mi.getAttributes();for(const Er in es)if(es[Er].location>=0){let ys=_i[Er];void 0===ys&&("instanceMatrix"===Er&&bi.instanceMatrix&&(ys=bi.instanceMatrix),"instanceColor"===Er&&bi.instanceColor&&(ys=bi.instanceColor));const Fa={};Fa.attribute=ys,ys&&ys.data&&(Fa.data=ys.data),Oi[Er]=Fa,Ni++}m.attributes=Oi,m.attributesNum=Ni,m.index=zi}(bi,zi,mi,Oi)}else{const Ni=!0===Fi.wireframe;(m.geometry!==zi.id||m.program!==mi.id||m.wireframe!==Ni)&&(m.geometry=zi.id,m.program=mi.id,m.wireframe=Ni,_i=!0)}null!==Oi&&e.update(Oi,34963),(_i||w)&&(w=!1,function zt(bi,Fi,mi,zi){if(!1===n.isWebGL2&&(bi.isInstancedMesh||zi.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;Je();const Oi=zi.attributes,_i=mi.getAttributes(),Ni=Fi.defaultAttributeValues;for(const es in _i){const Er=_i[es];if(Er.location>=0){let cs=Oi[es];if(void 0===cs&&("instanceMatrix"===es&&bi.instanceMatrix&&(cs=bi.instanceMatrix),"instanceColor"===es&&bi.instanceColor&&(cs=bi.instanceColor)),void 0!==cs){const ys=cs.normalized,Fa=cs.itemSize,Dr=e.get(cs);if(void 0===Dr)continue;const Ma=Dr.buffer,wa=Dr.type,xa=Dr.bytesPerElement;if(cs.isInterleavedBufferAttribute){const Vs=cs.data,Fo=Vs.stride,qr=cs.offset;if(Vs.isInstancedInterleavedBuffer){for(let zr=0;zr<Er.locationSize;zr++)kt(Er.location+zr,Vs.meshPerAttribute);!0!==bi.isInstancedMesh&&void 0===zi._maxInstanceCount&&(zi._maxInstanceCount=Vs.meshPerAttribute*Vs.count)}else for(let zr=0;zr<Er.locationSize;zr++)at(Er.location+zr);i.bindBuffer(34962,Ma);for(let zr=0;zr<Er.locationSize;zr++)yn(Er.location+zr,Fa/Er.locationSize,wa,ys,Fo*xa,(qr+Fa/Er.locationSize*zr)*xa)}else{if(cs.isInstancedBufferAttribute){for(let Vs=0;Vs<Er.locationSize;Vs++)kt(Er.location+Vs,cs.meshPerAttribute);!0!==bi.isInstancedMesh&&void 0===zi._maxInstanceCount&&(zi._maxInstanceCount=cs.meshPerAttribute*cs.count)}else for(let Vs=0;Vs<Er.locationSize;Vs++)at(Er.location+Vs);i.bindBuffer(34962,Ma);for(let Vs=0;Vs<Er.locationSize;Vs++)yn(Er.location+Vs,Fa/Er.locationSize,wa,ys,Fa*xa,Fa/Er.locationSize*Vs*xa)}}else if(void 0!==Ni){const ys=Ni[es];if(void 0!==ys)switch(ys.length){case 2:i.vertexAttrib2fv(Er.location,ys);break;case 3:i.vertexAttrib3fv(Er.location,ys);break;case 4:i.vertexAttrib4fv(Er.location,ys);break;default:i.vertexAttrib1fv(Er.location,ys)}}}}Zt()}(bi,Fi,mi,zi),null!==Oi&&i.bindBuffer(34963,e.get(Oi).buffer))},reset:Ji,resetDefaultState:Vi,dispose:function pn(){Ji();for(const bi in u){const Fi=u[bi];for(const mi in Fi){const zi=Fi[mi];for(const Oi in zi)te(zi[Oi].object),delete zi[Oi];delete Fi[mi]}delete u[bi]}},releaseStatesOfGeometry:function Kn(bi){if(void 0===u[bi.id])return;const Fi=u[bi.id];for(const mi in Fi){const zi=Fi[mi];for(const Oi in zi)te(zi[Oi].object),delete zi[Oi];delete Fi[mi]}delete u[bi.id]},releaseStatesOfProgram:function Bi(bi){for(const Fi in u){const mi=u[Fi];if(void 0===mi[bi.id])continue;const zi=mi[bi.id];for(const Oi in zi)te(zi[Oi].object),delete zi[Oi];delete mi[bi.id]}},initAttributes:Je,enableAttribute:at,disableUnusedAttributes:Zt}}function J0e(i,t,e,n){const r=n.isWebGL2;let s;this.setMode=function a(m){s=m},this.render=function u(m,w){i.drawArrays(s,m,w),e.update(w,s,1)},this.renderInstances=function h(m,w,T){if(0===T)return;let O,W;if(r)O=i,W="drawArraysInstanced";else if(O=t.get("ANGLE_instanced_arrays"),W="drawArraysInstancedANGLE",null===O)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");O[W](s,m,w,T),e.update(w,s,T)}}function ebe(i,t,e){let n;function s(yn){if("highp"===yn){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";yn="mediump"}return"mediump"===yn&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let u=void 0!==e.precision?e.precision:"highp";const h=s(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const m=a||t.has("WEBGL_draw_buffers"),w=!0===e.logarithmicDepthBuffer,T=i.getParameter(34930),O=i.getParameter(35660),W=i.getParameter(3379),te=i.getParameter(34076),ue=i.getParameter(34921),ce=i.getParameter(36347),Ne=i.getParameter(36348),et=i.getParameter(36349),Je=O>0,at=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:m,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const yn=t.get("EXT_texture_filter_anisotropic");n=i.getParameter(yn.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:u,logarithmicDepthBuffer:w,maxTextures:T,maxVertexTextures:O,maxTextureSize:W,maxCubemapSize:te,maxAttributes:ue,maxVertexUniforms:ce,maxVaryings:Ne,maxFragmentUniforms:et,vertexTextures:Je,floatFragmentTextures:at,floatVertexTextures:Je&&at,maxSamples:a?i.getParameter(36183):0}}function tbe(i){const t=this;let e=null,n=0,r=!1,s=!1;const a=new sb,u=new cg,h={value:null,needsUpdate:!1};function m(){h.value!==e&&(h.value=e,h.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function w(T,O,W,te){const ue=null!==T?T.length:0;let ce=null;if(0!==ue){if(ce=h.value,!0!==te||null===ce){const Ne=W+4*ue,et=O.matrixWorldInverse;u.getNormalMatrix(et),(null===ce||ce.length<Ne)&&(ce=new Float32Array(Ne));for(let Je=0,at=W;Je!==ue;++Je,at+=4)a.copy(T[Je]).applyMatrix4(et,u),a.normal.toArray(ce,at),ce[at+3]=a.constant}h.value=ce,h.needsUpdate=!0}return t.numPlanes=ue,t.numIntersection=0,ce}this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(T,O,W){const te=0!==T.length||O||0!==n||r;return r=O,e=w(T,W,0),n=T.length,te},this.beginShadows=function(){s=!0,w(null)},this.endShadows=function(){s=!1,m()},this.setState=function(T,O,W){const te=T.clippingPlanes,ue=T.clipIntersection,ce=T.clipShadows,Ne=i.get(T);if(!r||null===te||0===te.length||s&&!ce)s?w(null):m();else{const et=s?0:n,Je=4*et;let at=Ne.clippingState||null;h.value=at,at=w(te,O,Je,W);for(let kt=0;kt!==Je;++kt)at[kt]=e[kt];Ne.clippingState=at,this.numIntersection=ue?this.numPlanes:0,this.numPlanes+=et}}}function nbe(i){let t=new WeakMap;function e(a,u){return 303===u?a.mapping=301:304===u&&(a.mapping=302),a}function r(a){const u=a.target;u.removeEventListener("dispose",r);const h=t.get(u);void 0!==h&&(t.delete(u),h.dispose())}return{get:function n(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const u=a.mapping;if(303===u||304===u){if(t.has(a))return e(t.get(a).texture,a.mapping);{const h=a.image;if(h&&h.height>0){const m=new Y_e(h.height/2);return m.fromEquirectangularTexture(i,a),t.set(a,m),a.addEventListener("dispose",r),e(m.texture,a.mapping)}return null}}}return a},dispose:function s(){t=new WeakMap}}}Hv.physical={uniforms:rp([Hv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Jr(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new la(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Jr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new la(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new la(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Wo.meshphysical_vert,fragmentShader:Wo.meshphysical_frag};class FL extends kL{constructor(t=-1,e=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,a=n+t,u=r+e,h=r-e;if(null!==this.view&&this.view.enabled){const m=(this.right-this.left)/this.view.fullWidth/this.zoom,w=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=m*this.view.offsetX,a=s+m*this.view.width,u-=w*this.view.offsetY,h=u-w*this.view.height}this.projectionMatrix.makeOrthographic(s,a,u,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const y6=[.125,.215,.35,.446,.526,.582],NL=new FL,b6=new la;let BL=null;const ob=(1+Math.sqrt(5))/2,ZC=1/ob,C6=[new Vn(1,1,1),new Vn(-1,1,1),new Vn(1,1,-1),new Vn(-1,1,-1),new Vn(0,ob,ZC),new Vn(0,ob,-ZC),new Vn(ZC,0,ob),new Vn(-ZC,0,ob),new Vn(ob,ZC,0),new Vn(-ob,ZC,0)];class w6{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){BL=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=I6(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=A6(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(BL),t.scissorTest=!1,mE(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),BL=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Rh,minFilter:Rh,generateMipmaps:!1,type:d1,format:tm,encoding:X0,depthBuffer:!1},r=x6(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=x6(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function ibe(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+y6.length;for(let a=0;a<s;a++){const u=Math.pow(2,r);e.push(u);let h=1/u;a>i-4?h=y6[a-i+4-1]:0===a&&(h=0),n.push(h);const m=1/(u-2),w=-m,T=1+m,O=[w,w,T,w,T,T,w,w,T,T,w,T],W=6,te=6,ue=3,ce=2,Ne=1,et=new Float32Array(ue*te*W),Je=new Float32Array(ce*te*W),at=new Float32Array(Ne*te*W);for(let Zt=0;Zt<W;Zt++){const yn=Zt%3*2/3-1,zt=Zt>2?0:-1;et.set([yn,zt,0,yn+2/3,zt,0,yn+2/3,zt+1,0,yn,zt,0,yn+2/3,zt+1,0,yn,zt+1,0],ue*te*Zt),Je.set(O,ce*te*Zt),at.set([Zt,Zt,Zt,Zt,Zt,Zt],Ne*te*Zt)}const kt=new Jo;kt.setAttribute("position",new wd(et,ue)),kt.setAttribute("uv",new wd(Je,ce)),kt.setAttribute("faceIndex",new wd(at,Ne)),t.push(kt),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function rbe(i,t,e){const n=new Float32Array(20),r=new Vn(0,1,0);return new Hy({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Ef(this._lodPlanes[0],t);this._renderer.compile(e,NL)}_sceneToCubeUV(t,e,n,r){const u=new Yd(90,1,e,n),h=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],w=this._renderer,T=w.autoClear,O=w.toneMapping;w.getClearColor(b6),w.toneMapping=0,w.autoClear=!1;const W=new rb({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),te=new Ef(new Uy,W);let ue=!1;const ce=t.background;ce?ce.isColor&&(W.color.copy(ce),t.background=null,ue=!0):(W.color.copy(b6),ue=!0);for(let Ne=0;Ne<6;Ne++){const et=Ne%3;0===et?(u.up.set(0,h[Ne],0),u.lookAt(m[Ne],0,0)):1===et?(u.up.set(0,0,h[Ne]),u.lookAt(0,m[Ne],0)):(u.up.set(0,h[Ne],0),u.lookAt(0,0,m[Ne]));const Je=this._cubeSize;mE(r,et*Je,Ne>2?Je:0,Je,Je),w.setRenderTarget(r),ue&&w.render(te,u),w.render(t,u)}te.geometry.dispose(),te.material.dispose(),w.toneMapping=O,w.autoClear=T,t.background=ce}_textureToCubeUV(t,e){const n=this._renderer,r=301===t.mapping||302===t.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=I6()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=A6());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Ef(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const h=this._cubeSize;mE(e,0,0,3*h,2*h),n.setRenderTarget(e),n.render(a,NL)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,C6[(r-1)%C6.length])}e.autoClear=n}_blur(t,e,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,r,"latitudinal",s),this._halfBlur(a,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,a,u){const h=this._renderer,m=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const T=new Ef(this._lodPlanes[r],m),O=m.uniforms,W=this._sizeLods[n]-1,te=isFinite(s)?Math.PI/(2*W):2*Math.PI/39,ue=s/te,ce=isFinite(s)?1+Math.floor(3*ue):20;ce>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${ce} samples when the maximum is set to 20`);const Ne=[];let et=0;for(let yn=0;yn<20;++yn){const zt=yn/ue,pn=Math.exp(-zt*zt/2);Ne.push(pn),0===yn?et+=pn:yn<ce&&(et+=2*pn)}for(let yn=0;yn<Ne.length;yn++)Ne[yn]=Ne[yn]/et;O.envMap.value=t.texture,O.samples.value=ce,O.weights.value=Ne,O.latitudinal.value="latitudinal"===a,u&&(O.poleAxis.value=u);const{_lodMax:Je}=this;O.dTheta.value=te,O.mipInt.value=Je-n;const at=this._sizeLods[r];mE(e,3*at*(r>Je-4?r-Je+4:0),4*(this._cubeSize-at),3*at,2*at),h.setRenderTarget(e),h.render(T,NL)}}function x6(i,t,e){const n=new J0(i,t,e);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function mE(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function A6(){return new Hy({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function I6(){return new Hy({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function sbe(i){let t=new WeakMap,e=null;function s(u){const h=u.target;h.removeEventListener("dispose",s);const m=t.get(h);void 0!==m&&(t.delete(h),m.dispose())}return{get:function n(u){if(u&&u.isTexture){const h=u.mapping,m=303===h||304===h,w=301===h||302===h;if(m||w){if(u.isRenderTargetTexture&&!0===u.needsPMREMUpdate){u.needsPMREMUpdate=!1;let T=t.get(u);return null===e&&(e=new w6(i)),T=m?e.fromEquirectangular(u,T):e.fromCubemap(u,T),t.set(u,T),T.texture}if(t.has(u))return t.get(u).texture;{const T=u.image;if(m&&T&&T.height>0||w&&T&&function r(u){let h=0;for(let w=0;w<6;w++)void 0!==u[w]&&h++;return 6===h}(T)){null===e&&(e=new w6(i));const O=m?e.fromEquirectangular(u):e.fromCubemap(u);return t.set(u,O),u.addEventListener("dispose",s),O.texture}return null}}}return u},dispose:function a(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function abe(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function obe(i,t,e,n){const r={},s=new WeakMap;function a(T){const O=T.target;null!==O.index&&t.remove(O.index);for(const te in O.attributes)t.remove(O.attributes[te]);O.removeEventListener("dispose",a),delete r[O.id];const W=s.get(O);W&&(t.remove(W),s.delete(O)),n.releaseStatesOfGeometry(O),!0===O.isInstancedBufferGeometry&&delete O._maxInstanceCount,e.memory.geometries--}function m(T){const O=[],W=T.index,te=T.attributes.position;let ue=0;if(null!==W){const et=W.array;ue=W.version;for(let Je=0,at=et.length;Je<at;Je+=3){const kt=et[Je+0],Zt=et[Je+1],yn=et[Je+2];O.push(kt,Zt,Zt,yn,yn,kt)}}else{ue=te.version;for(let Je=0,at=te.array.length/3-1;Je<at;Je+=3){const kt=Je+0,Zt=Je+1,yn=Je+2;O.push(kt,Zt,Zt,yn,yn,kt)}}const ce=new(t6(O)?m6:g6)(O,1);ce.version=ue;const Ne=s.get(T);Ne&&t.remove(Ne),s.set(T,ce)}return{get:function u(T,O){return!0===r[O.id]||(O.addEventListener("dispose",a),r[O.id]=!0,e.memory.geometries++),O},update:function h(T){const O=T.attributes;for(const te in O)t.update(O[te],34962);const W=T.morphAttributes;for(const te in W){const ue=W[te];for(let ce=0,Ne=ue.length;ce<Ne;ce++)t.update(ue[ce],34962)}},getWireframeAttribute:function w(T){const O=s.get(T);if(O){const W=T.index;null!==W&&O.version<W.version&&m(T)}else m(T);return s.get(T)}}}function lbe(i,t,e,n){const r=n.isWebGL2;let s,u,h;this.setMode=function a(O){s=O},this.setIndex=function m(O){u=O.type,h=O.bytesPerElement},this.render=function w(O,W){i.drawElements(s,W,u,O*h),e.update(W,s,1)},this.renderInstances=function T(O,W,te){if(0===te)return;let ue,ce;if(r)ue=i,ce="drawElementsInstanced";else if(ue=t.get("ANGLE_instanced_arrays"),ce="drawElementsInstancedANGLE",null===ue)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");ue[ce](s,W,u,O*h,te),e.update(W,s,te)}}function ube(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,a,u){switch(e.calls++,a){case 4:e.triangles+=u*(s/3);break;case 1:e.lines+=u*(s/2);break;case 3:e.lines+=u*(s-1);break;case 2:e.lines+=u*s;break;case 0:e.points+=u*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}function cbe(i,t){return i[0]-t[0]}function hbe(i,t){return Math.abs(t[1])-Math.abs(i[1])}function dbe(i,t,e){const n={},r=new Float32Array(8),s=new WeakMap,a=new bu,u=[];for(let m=0;m<8;m++)u[m]=[m,0];return{update:function h(m,w,T,O){const W=m.morphTargetInfluences;if(!0===t.isWebGL2){const te=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,ue=void 0!==te?te.length:0;let ce=s.get(w);if(void 0===ce||ce.count!==ue){let Fi=function(){Vi.dispose(),s.delete(w),w.removeEventListener("dispose",Fi)};void 0!==ce&&ce.texture.dispose();const Je=void 0!==w.morphAttributes.position,at=void 0!==w.morphAttributes.normal,kt=void 0!==w.morphAttributes.color,Zt=w.morphAttributes.position||[],yn=w.morphAttributes.normal||[],zt=w.morphAttributes.color||[];let pn=0;!0===Je&&(pn=1),!0===at&&(pn=2),!0===kt&&(pn=3);let Kn=w.attributes.position.count*pn,Bi=1;Kn>t.maxTextureSize&&(Bi=Math.ceil(Kn/t.maxTextureSize),Kn=t.maxTextureSize);const Ji=new Float32Array(Kn*Bi*4*ue),Vi=new pL(Ji,Kn,Bi,ue);Vi.type=Py,Vi.needsUpdate=!0;const bi=4*pn;for(let mi=0;mi<ue;mi++){const zi=Zt[mi],Oi=yn[mi],_i=zt[mi],Ni=Kn*Bi*4*mi;for(let es=0;es<zi.count;es++){const Er=es*bi;!0===Je&&(a.fromBufferAttribute(zi,es),Ji[Ni+Er+0]=a.x,Ji[Ni+Er+1]=a.y,Ji[Ni+Er+2]=a.z,Ji[Ni+Er+3]=0),!0===at&&(a.fromBufferAttribute(Oi,es),Ji[Ni+Er+4]=a.x,Ji[Ni+Er+5]=a.y,Ji[Ni+Er+6]=a.z,Ji[Ni+Er+7]=0),!0===kt&&(a.fromBufferAttribute(_i,es),Ji[Ni+Er+8]=a.x,Ji[Ni+Er+9]=a.y,Ji[Ni+Er+10]=a.z,Ji[Ni+Er+11]=4===_i.itemSize?a.w:1)}}ce={count:ue,texture:Vi,size:new Jr(Kn,Bi)},s.set(w,ce),w.addEventListener("dispose",Fi)}let Ne=0;for(let Je=0;Je<W.length;Je++)Ne+=W[Je];const et=w.morphTargetsRelative?1:1-Ne;O.getUniforms().setValue(i,"morphTargetBaseInfluence",et),O.getUniforms().setValue(i,"morphTargetInfluences",W),O.getUniforms().setValue(i,"morphTargetsTexture",ce.texture,e),O.getUniforms().setValue(i,"morphTargetsTextureSize",ce.size)}else{const te=void 0===W?0:W.length;let ue=n[w.id];if(void 0===ue||ue.length!==te){ue=[];for(let at=0;at<te;at++)ue[at]=[at,0];n[w.id]=ue}for(let at=0;at<te;at++){const kt=ue[at];kt[0]=at,kt[1]=W[at]}ue.sort(hbe);for(let at=0;at<8;at++)at<te&&ue[at][1]?(u[at][0]=ue[at][0],u[at][1]=ue[at][1]):(u[at][0]=Number.MAX_SAFE_INTEGER,u[at][1]=0);u.sort(cbe);const ce=w.morphAttributes.position,Ne=w.morphAttributes.normal;let et=0;for(let at=0;at<8;at++){const kt=u[at],Zt=kt[0],yn=kt[1];Zt!==Number.MAX_SAFE_INTEGER&&yn?(ce&&w.getAttribute("morphTarget"+at)!==ce[Zt]&&w.setAttribute("morphTarget"+at,ce[Zt]),Ne&&w.getAttribute("morphNormal"+at)!==Ne[Zt]&&w.setAttribute("morphNormal"+at,Ne[Zt]),r[at]=yn,et+=yn):(ce&&!0===w.hasAttribute("morphTarget"+at)&&w.deleteAttribute("morphTarget"+at),Ne&&!0===w.hasAttribute("morphNormal"+at)&&w.deleteAttribute("morphNormal"+at),r[at]=0)}const Je=w.morphTargetsRelative?1:1-et;O.getUniforms().setValue(i,"morphTargetBaseInfluence",Je),O.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function fbe(i,t,e,n){let r=new WeakMap;function u(h){const m=h.target;m.removeEventListener("dispose",u),e.remove(m.instanceMatrix),null!==m.instanceColor&&e.remove(m.instanceColor)}return{update:function s(h){const m=n.render.frame,T=t.get(h,h.geometry);return r.get(T)!==m&&(t.update(T),r.set(T,m)),h.isInstancedMesh&&(!1===h.hasEventListener("dispose",u)&&h.addEventListener("dispose",u),e.update(h.instanceMatrix,34962),null!==h.instanceColor&&e.update(h.instanceColor,34962)),T},dispose:function a(){r=new WeakMap}}}const S6=new Ly,E6=new pL,T6=new s6,M6=new fE,D6=[],P6=[],L6=new Float32Array(16),k6=new Float32Array(9),R6=new Float32Array(4);function QC(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=D6[r];if(void 0===s&&(s=new Float32Array(r),D6[r]=s),0!==t){n.toArray(s,0);for(let a=1,u=0;a!==t;++a)u+=e,i[a].toArray(s,u)}return s}function od(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function ld(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function vE(i,t){let e=P6[t];void 0===e&&(e=new Int32Array(t),P6[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function pbe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function gbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(od(e,t))return;i.uniform2fv(this.addr,t),ld(e,t)}}function mbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(od(e,t))return;i.uniform3fv(this.addr,t),ld(e,t)}}function vbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(od(e,t))return;i.uniform4fv(this.addr,t),ld(e,t)}}function _be(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(od(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),ld(e,t)}else{if(od(e,n))return;R6.set(n),i.uniformMatrix2fv(this.addr,!1,R6),ld(e,n)}}function ybe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(od(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),ld(e,t)}else{if(od(e,n))return;k6.set(n),i.uniformMatrix3fv(this.addr,!1,k6),ld(e,n)}}function bbe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(od(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),ld(e,t)}else{if(od(e,n))return;L6.set(n),i.uniformMatrix4fv(this.addr,!1,L6),ld(e,n)}}function Cbe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function wbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(od(e,t))return;i.uniform2iv(this.addr,t),ld(e,t)}}function xbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(od(e,t))return;i.uniform3iv(this.addr,t),ld(e,t)}}function Abe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(od(e,t))return;i.uniform4iv(this.addr,t),ld(e,t)}}function Ibe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function Sbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(od(e,t))return;i.uniform2uiv(this.addr,t),ld(e,t)}}function Ebe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(od(e,t))return;i.uniform3uiv(this.addr,t),ld(e,t)}}function Tbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(od(e,t))return;i.uniform4uiv(this.addr,t),ld(e,t)}}function Mbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||S6,r)}function Dbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||T6,r)}function Pbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||M6,r)}function Lbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||E6,r)}function Rbe(i,t){i.uniform1fv(this.addr,t)}function Obe(i,t){const e=QC(t,this.size,2);i.uniform2fv(this.addr,e)}function Fbe(i,t){const e=QC(t,this.size,3);i.uniform3fv(this.addr,e)}function Nbe(i,t){const e=QC(t,this.size,4);i.uniform4fv(this.addr,e)}function Bbe(i,t){const e=QC(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function zbe(i,t){const e=QC(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function Vbe(i,t){const e=QC(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function Ube(i,t){i.uniform1iv(this.addr,t)}function Hbe(i,t){i.uniform2iv(this.addr,t)}function Gbe(i,t){i.uniform3iv(this.addr,t)}function Wbe(i,t){i.uniform4iv(this.addr,t)}function jbe(i,t){i.uniform1uiv(this.addr,t)}function $be(i,t){i.uniform2uiv(this.addr,t)}function qbe(i,t){i.uniform3uiv(this.addr,t)}function Xbe(i,t){i.uniform4uiv(this.addr,t)}function Ybe(i,t,e){const n=this.cache,r=t.length,s=vE(e,r);od(n,s)||(i.uniform1iv(this.addr,s),ld(n,s));for(let a=0;a!==r;++a)e.setTexture2D(t[a]||S6,s[a])}function Kbe(i,t,e){const n=this.cache,r=t.length,s=vE(e,r);od(n,s)||(i.uniform1iv(this.addr,s),ld(n,s));for(let a=0;a!==r;++a)e.setTexture3D(t[a]||T6,s[a])}function Zbe(i,t,e){const n=this.cache,r=t.length,s=vE(e,r);od(n,s)||(i.uniform1iv(this.addr,s),ld(n,s));for(let a=0;a!==r;++a)e.setTextureCube(t[a]||M6,s[a])}function Qbe(i,t,e){const n=this.cache,r=t.length,s=vE(e,r);od(n,s)||(i.uniform1iv(this.addr,s),ld(n,s));for(let a=0;a!==r;++a)e.setTexture2DArray(t[a]||E6,s[a])}class eCe{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function kbe(i){switch(i){case 5126:return pbe;case 35664:return gbe;case 35665:return mbe;case 35666:return vbe;case 35674:return _be;case 35675:return ybe;case 35676:return bbe;case 5124:case 35670:return Cbe;case 35667:case 35671:return wbe;case 35668:case 35672:return xbe;case 35669:case 35673:return Abe;case 5125:return Ibe;case 36294:return Sbe;case 36295:return Ebe;case 36296:return Tbe;case 35678:case 36198:case 36298:case 36306:case 35682:return Mbe;case 35679:case 36299:case 36307:return Dbe;case 35680:case 36300:case 36308:case 36293:return Pbe;case 36289:case 36303:case 36311:case 36292:return Lbe}}(e.type)}}class tCe{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function Jbe(i){switch(i){case 5126:return Rbe;case 35664:return Obe;case 35665:return Fbe;case 35666:return Nbe;case 35674:return Bbe;case 35675:return zbe;case 35676:return Vbe;case 5124:case 35670:return Ube;case 35667:case 35671:return Hbe;case 35668:case 35672:return Gbe;case 35669:case 35673:return Wbe;case 5125:return jbe;case 36294:return $be;case 36295:return qbe;case 36296:return Xbe;case 35678:case 36198:case 36298:case 36306:case 35682:return Ybe;case 35679:case 36299:case 36307:return Kbe;case 35680:case 36300:case 36308:case 36293:return Zbe;case 36289:case 36303:case 36311:case 36292:return Qbe}}(e.type)}}class nCe{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const u=r[s];u.setValue(t,e[u.id],n)}}}const VL=/(\w+)(\])?(\[|\.)?/g;function O6(i,t){i.seq.push(t),i.map[t.id]=t}function iCe(i,t,e){const n=i.name,r=n.length;for(VL.lastIndex=0;;){const s=VL.exec(n),a=VL.lastIndex;let u=s[1];const m=s[3];if("]"===s[2]&&(u|=0),void 0===m||"["===m&&a+2===r){O6(e,void 0===m?new eCe(u,i,t):new tCe(u,i,t));break}{let T=e.map[u];void 0===T&&(T=new nCe(u),O6(e,T)),e=T}}}class _E{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);iCe(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,a=e.length;s!==a;++s){const u=e[s],h=n[u.id];!1!==h.needsUpdate&&u.setValue(t,h.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const a=t[r];a.id in e&&n.push(a)}return n}}function F6(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}let rCe=0;function N6(i,t,e){const n=i.getShaderParameter(t,35713),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function sCe(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let a=r;a<s;a++){const u=a+1;n.push(`${u===t?">":" "} ${u}: ${e[a]}`)}return n.join("\n")}(i.getShaderSource(t),a)}return r}function oCe(i,t){const e=function aCe(i){switch(i){case X0:return["Linear","( value )"];case Qc:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(t);return"vec4 "+i+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function lCe(i,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function b1(i){return""!==i}function B6(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function z6(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const dCe=/^[ \t]*#include +<([\w\d./]+)>/gm;function UL(i){return i.replace(dCe,fCe)}function fCe(i,t){const e=Wo[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return UL(e)}const pCe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function V6(i){return i.replace(pCe,gCe)}function gCe(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function U6(i){let t="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function CCe(i,t,e,n){const r=i.getContext(),s=e.defines;let a=e.vertexShader,u=e.fragmentShader;const h=function mCe(i){let t="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),m=function vCe(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),w=function _Ce(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),T=function yCe(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),O=function bCe(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),W=e.isWebGL2?"":function uCe(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(b1).join("\n")}(e),te=function cCe(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),ue=r.createProgram();let ce,Ne,et=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(ce=[te].filter(b1).join("\n"),ce.length>0&&(ce+="\n"),Ne=[W,te].filter(b1).join("\n"),Ne.length>0&&(Ne+="\n")):(ce=[U6(e),"#define SHADER_NAME "+e.shaderName,te,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+w:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+h:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(b1).join("\n"),Ne=[W,U6(e),"#define SHADER_NAME "+e.shaderName,te,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+m:"",e.envMap?"#define "+w:"",e.envMap?"#define "+T:"",O?"#define CUBEUV_TEXEL_WIDTH "+O.texelWidth:"",O?"#define CUBEUV_TEXEL_HEIGHT "+O.texelHeight:"",O?"#define CUBEUV_MAX_MIP "+O.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+h:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?Wo.tonemapping_pars_fragment:"",0!==e.toneMapping?lCe("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Wo.encodings_pars_fragment,oCe("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(b1).join("\n")),a=UL(a),a=B6(a,e),a=z6(a,e),u=UL(u),u=B6(u,e),u=z6(u,e),a=V6(a),u=V6(u),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(et="#version 300 es\n",ce=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+ce,Ne=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Ne);const at=et+Ne+u,kt=F6(r,35633,et+ce+a),Zt=F6(r,35632,at);if(r.attachShader(ue,kt),r.attachShader(ue,Zt),void 0!==e.index0AttributeName?r.bindAttribLocation(ue,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(ue,0,"position"),r.linkProgram(ue),i.debug.checkShaderErrors){const pn=r.getProgramInfoLog(ue).trim(),Kn=r.getShaderInfoLog(kt).trim(),Bi=r.getShaderInfoLog(Zt).trim();let Ji=!0,Vi=!0;if(!1===r.getProgramParameter(ue,35714)){Ji=!1;const bi=N6(r,kt,"vertex"),Fi=N6(r,Zt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(ue,35715)+"\n\nProgram Info Log: "+pn+"\n"+bi+"\n"+Fi)}else""!==pn?console.warn("THREE.WebGLProgram: Program Info Log:",pn):(""===Kn||""===Bi)&&(Vi=!1);Vi&&(this.diagnostics={runnable:Ji,programLog:pn,vertexShader:{log:Kn,prefix:ce},fragmentShader:{log:Bi,prefix:Ne}})}let yn,zt;return r.deleteShader(kt),r.deleteShader(Zt),this.getUniforms=function(){return void 0===yn&&(yn=new _E(r,ue)),yn},this.getAttributes=function(){return void 0===zt&&(zt=function hCe(i,t){const e={},n=i.getProgramParameter(t,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),a=s.name;let u=1;35674===s.type&&(u=2),35675===s.type&&(u=3),35676===s.type&&(u=4),e[a]={type:s.type,location:i.getAttribLocation(t,a),locationSize:u}}return e}(r,ue)),zt},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(ue),this.program=void 0},this.name=e.shaderName,this.id=rCe++,this.cacheKey=t,this.usedTimes=1,this.program=ue,this.vertexShader=kt,this.fragmentShader=Zt,this}let wCe=0;class xCe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(s)&&(a.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new ACe(t),e.set(t,n)),n}}class ACe{constructor(t){this.id=wCe++,this.code=t,this.usedTimes=0}}function ICe(i,t,e,n,r,s,a){const u=new wL,h=new xCe,m=[],w=r.isWebGL2,T=r.logarithmicDepthBuffer,O=r.vertexTextures;let W=r.precision;const te={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function ue(zt,pn,Kn,Bi,Ji){const Vi=Bi.fog,bi=Ji.geometry,mi=(zt.isMeshStandardMaterial?e:t).get(zt.envMap||(zt.isMeshStandardMaterial?Bi.environment:null)),zi=mi&&306===mi.mapping?mi.image.height:null,Oi=te[zt.type];null!==zt.precision&&(W=r.getMaxPrecision(zt.precision),W!==zt.precision&&console.warn("THREE.WebGLProgram.getParameters:",zt.precision,"not supported, using",W,"instead."));const _i=bi.morphAttributes.position||bi.morphAttributes.normal||bi.morphAttributes.color,Ni=void 0!==_i?_i.length:0;let Er,cs,ys,Fa,es=0;if(void 0!==bi.morphAttributes.position&&(es=1),void 0!==bi.morphAttributes.normal&&(es=2),void 0!==bi.morphAttributes.color&&(es=3),Oi){const Fo=Hv[Oi];Er=Fo.vertexShader,cs=Fo.fragmentShader}else Er=zt.vertexShader,cs=zt.fragmentShader,h.update(zt),ys=h.getVertexShaderID(zt),Fa=h.getFragmentShaderID(zt);const Dr=i.getRenderTarget(),wa=zt.clearcoat>0,xa=zt.iridescence>0;return{isWebGL2:w,shaderID:Oi,shaderName:zt.type,vertexShader:Er,fragmentShader:cs,defines:zt.defines,customVertexShaderID:ys,customFragmentShaderID:Fa,isRawShaderMaterial:!0===zt.isRawShaderMaterial,glslVersion:zt.glslVersion,precision:W,instancing:!0===Ji.isInstancedMesh,instancingColor:!0===Ji.isInstancedMesh&&null!==Ji.instanceColor,supportsVertexTextures:O,outputEncoding:null===Dr?i.outputEncoding:!0===Dr.isXRRenderTarget?Dr.texture.encoding:X0,map:!!zt.map,matcap:!!zt.matcap,envMap:!!mi,envMapMode:mi&&mi.mapping,envMapCubeUVHeight:zi,lightMap:!!zt.lightMap,aoMap:!!zt.aoMap,emissiveMap:!!zt.emissiveMap,bumpMap:!!zt.bumpMap,normalMap:!!zt.normalMap,objectSpaceNormalMap:1===zt.normalMapType,tangentSpaceNormalMap:0===zt.normalMapType,decodeVideoTexture:!!zt.map&&!0===zt.map.isVideoTexture&&zt.map.encoding===Qc,clearcoat:wa,clearcoatMap:wa&&!!zt.clearcoatMap,clearcoatRoughnessMap:wa&&!!zt.clearcoatRoughnessMap,clearcoatNormalMap:wa&&!!zt.clearcoatNormalMap,iridescence:xa,iridescenceMap:xa&&!!zt.iridescenceMap,iridescenceThicknessMap:xa&&!!zt.iridescenceThicknessMap,displacementMap:!!zt.displacementMap,roughnessMap:!!zt.roughnessMap,metalnessMap:!!zt.metalnessMap,specularMap:!!zt.specularMap,specularIntensityMap:!!zt.specularIntensityMap,specularColorMap:!!zt.specularColorMap,opaque:!1===zt.transparent&&1===zt.blending,alphaMap:!!zt.alphaMap,alphaTest:zt.alphaTest>0,gradientMap:!!zt.gradientMap,sheen:zt.sheen>0,sheenColorMap:!!zt.sheenColorMap,sheenRoughnessMap:!!zt.sheenRoughnessMap,transmission:zt.transmission>0,transmissionMap:!!zt.transmissionMap,thicknessMap:!!zt.thicknessMap,combine:zt.combine,vertexTangents:!!zt.normalMap&&!!bi.attributes.tangent,vertexColors:zt.vertexColors,vertexAlphas:!0===zt.vertexColors&&!!bi.attributes.color&&4===bi.attributes.color.itemSize,vertexUvs:!!(zt.map||zt.bumpMap||zt.normalMap||zt.specularMap||zt.alphaMap||zt.emissiveMap||zt.roughnessMap||zt.metalnessMap||zt.clearcoatMap||zt.clearcoatRoughnessMap||zt.clearcoatNormalMap||zt.iridescenceMap||zt.iridescenceThicknessMap||zt.displacementMap||zt.transmissionMap||zt.thicknessMap||zt.specularIntensityMap||zt.specularColorMap||zt.sheenColorMap||zt.sheenRoughnessMap),uvsVertexOnly:!(zt.map||zt.bumpMap||zt.normalMap||zt.specularMap||zt.alphaMap||zt.emissiveMap||zt.roughnessMap||zt.metalnessMap||zt.clearcoatNormalMap||zt.iridescenceMap||zt.iridescenceThicknessMap||zt.transmission>0||zt.transmissionMap||zt.thicknessMap||zt.specularIntensityMap||zt.specularColorMap||zt.sheen>0||zt.sheenColorMap||zt.sheenRoughnessMap||!zt.displacementMap),fog:!!Vi,useFog:!0===zt.fog,fogExp2:Vi&&Vi.isFogExp2,flatShading:!!zt.flatShading,sizeAttenuation:zt.sizeAttenuation,logarithmicDepthBuffer:T,skinning:!0===Ji.isSkinnedMesh,morphTargets:void 0!==bi.morphAttributes.position,morphNormals:void 0!==bi.morphAttributes.normal,morphColors:void 0!==bi.morphAttributes.color,morphTargetsCount:Ni,morphTextureStride:es,numDirLights:pn.directional.length,numPointLights:pn.point.length,numSpotLights:pn.spot.length,numSpotLightMaps:pn.spotLightMap.length,numRectAreaLights:pn.rectArea.length,numHemiLights:pn.hemi.length,numDirLightShadows:pn.directionalShadowMap.length,numPointLightShadows:pn.pointShadowMap.length,numSpotLightShadows:pn.spotShadowMap.length,numSpotLightShadowsWithMaps:pn.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:zt.dithering,shadowMapEnabled:i.shadowMap.enabled&&Kn.length>0,shadowMapType:i.shadowMap.type,toneMapping:zt.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:zt.premultipliedAlpha,doubleSided:2===zt.side,flipSided:1===zt.side,useDepthPacking:!!zt.depthPacking,depthPacking:zt.depthPacking||0,index0AttributeName:zt.index0AttributeName,extensionDerivatives:zt.extensions&&zt.extensions.derivatives,extensionFragDepth:zt.extensions&&zt.extensions.fragDepth,extensionDrawBuffers:zt.extensions&&zt.extensions.drawBuffers,extensionShaderTextureLOD:zt.extensions&&zt.extensions.shaderTextureLOD,rendererExtensionFragDepth:w||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:w||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:w||n.has("EXT_shader_texture_lod"),customProgramCacheKey:zt.customProgramCacheKey()}},getProgramCacheKey:function ce(zt){const pn=[];if(zt.shaderID?pn.push(zt.shaderID):(pn.push(zt.customVertexShaderID),pn.push(zt.customFragmentShaderID)),void 0!==zt.defines)for(const Kn in zt.defines)pn.push(Kn),pn.push(zt.defines[Kn]);return!1===zt.isRawShaderMaterial&&(function Ne(zt,pn){zt.push(pn.precision),zt.push(pn.outputEncoding),zt.push(pn.envMapMode),zt.push(pn.envMapCubeUVHeight),zt.push(pn.combine),zt.push(pn.vertexUvs),zt.push(pn.fogExp2),zt.push(pn.sizeAttenuation),zt.push(pn.morphTargetsCount),zt.push(pn.morphAttributeCount),zt.push(pn.numDirLights),zt.push(pn.numPointLights),zt.push(pn.numSpotLights),zt.push(pn.numSpotLightMaps),zt.push(pn.numHemiLights),zt.push(pn.numRectAreaLights),zt.push(pn.numDirLightShadows),zt.push(pn.numPointLightShadows),zt.push(pn.numSpotLightShadows),zt.push(pn.numSpotLightShadowsWithMaps),zt.push(pn.shadowMapType),zt.push(pn.toneMapping),zt.push(pn.numClippingPlanes),zt.push(pn.numClipIntersection),zt.push(pn.depthPacking)}(pn,zt),function et(zt,pn){u.disableAll(),pn.isWebGL2&&u.enable(0),pn.supportsVertexTextures&&u.enable(1),pn.instancing&&u.enable(2),pn.instancingColor&&u.enable(3),pn.map&&u.enable(4),pn.matcap&&u.enable(5),pn.envMap&&u.enable(6),pn.lightMap&&u.enable(7),pn.aoMap&&u.enable(8),pn.emissiveMap&&u.enable(9),pn.bumpMap&&u.enable(10),pn.normalMap&&u.enable(11),pn.objectSpaceNormalMap&&u.enable(12),pn.tangentSpaceNormalMap&&u.enable(13),pn.clearcoat&&u.enable(14),pn.clearcoatMap&&u.enable(15),pn.clearcoatRoughnessMap&&u.enable(16),pn.clearcoatNormalMap&&u.enable(17),pn.iridescence&&u.enable(18),pn.iridescenceMap&&u.enable(19),pn.iridescenceThicknessMap&&u.enable(20),pn.displacementMap&&u.enable(21),pn.specularMap&&u.enable(22),pn.roughnessMap&&u.enable(23),pn.metalnessMap&&u.enable(24),pn.gradientMap&&u.enable(25),pn.alphaMap&&u.enable(26),pn.alphaTest&&u.enable(27),pn.vertexColors&&u.enable(28),pn.vertexAlphas&&u.enable(29),pn.vertexUvs&&u.enable(30),pn.vertexTangents&&u.enable(31),pn.uvsVertexOnly&&u.enable(32),zt.push(u.mask),u.disableAll(),pn.fog&&u.enable(0),pn.useFog&&u.enable(1),pn.flatShading&&u.enable(2),pn.logarithmicDepthBuffer&&u.enable(3),pn.skinning&&u.enable(4),pn.morphTargets&&u.enable(5),pn.morphNormals&&u.enable(6),pn.morphColors&&u.enable(7),pn.premultipliedAlpha&&u.enable(8),pn.shadowMapEnabled&&u.enable(9),pn.physicallyCorrectLights&&u.enable(10),pn.doubleSided&&u.enable(11),pn.flipSided&&u.enable(12),pn.useDepthPacking&&u.enable(13),pn.dithering&&u.enable(14),pn.specularIntensityMap&&u.enable(15),pn.specularColorMap&&u.enable(16),pn.transmission&&u.enable(17),pn.transmissionMap&&u.enable(18),pn.thicknessMap&&u.enable(19),pn.sheen&&u.enable(20),pn.sheenColorMap&&u.enable(21),pn.sheenRoughnessMap&&u.enable(22),pn.decodeVideoTexture&&u.enable(23),pn.opaque&&u.enable(24),zt.push(u.mask)}(pn,zt),pn.push(i.outputEncoding)),pn.push(zt.customProgramCacheKey),pn.join()},getUniforms:function Je(zt){const pn=te[zt.type];let Kn;return Kn=pn?j_e.clone(Hv[pn].uniforms):zt.uniforms,Kn},acquireProgram:function at(zt,pn){let Kn;for(let Bi=0,Ji=m.length;Bi<Ji;Bi++){const Vi=m[Bi];if(Vi.cacheKey===pn){Kn=Vi,++Kn.usedTimes;break}}return void 0===Kn&&(Kn=new CCe(i,pn,zt,s),m.push(Kn)),Kn},releaseProgram:function kt(zt){if(0==--zt.usedTimes){const pn=m.indexOf(zt);m[pn]=m[m.length-1],m.pop(),zt.destroy()}},releaseShaderCache:function Zt(zt){h.remove(zt)},programs:m,dispose:function yn(){h.dispose()}}}function SCe(){let i=new WeakMap;return{get:function t(s){let a=i.get(s);return void 0===a&&(a={},i.set(s,a)),a},remove:function e(s){i.delete(s)},update:function n(s,a,u){i.get(s)[a]=u},dispose:function r(){i=new WeakMap}}}function ECe(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function H6(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function G6(){const i=[];let t=0;const e=[],n=[],r=[];function a(T,O,W,te,ue,ce){let Ne=i[t];return void 0===Ne?(Ne={id:T.id,object:T,geometry:O,material:W,groupOrder:te,renderOrder:T.renderOrder,z:ue,group:ce},i[t]=Ne):(Ne.id=T.id,Ne.object=T,Ne.geometry=O,Ne.material=W,Ne.groupOrder=te,Ne.renderOrder=T.renderOrder,Ne.z=ue,Ne.group=ce),t++,Ne}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function u(T,O,W,te,ue,ce){const Ne=a(T,O,W,te,ue,ce);W.transmission>0?n.push(Ne):!0===W.transparent?r.push(Ne):e.push(Ne)},unshift:function h(T,O,W,te,ue,ce){const Ne=a(T,O,W,te,ue,ce);W.transmission>0?n.unshift(Ne):!0===W.transparent?r.unshift(Ne):e.unshift(Ne)},finish:function w(){for(let T=t,O=i.length;T<O;T++){const W=i[T];if(null===W.id)break;W.id=null,W.object=null,W.geometry=null,W.material=null,W.group=null}},sort:function m(T,O){e.length>1&&e.sort(T||ECe),n.length>1&&n.sort(O||H6),r.length>1&&r.sort(O||H6)}}}function TCe(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let a;return void 0===s?(a=new G6,i.set(n,[a])):r>=s.length?(a=new G6,s.push(a)):a=s[r],a},dispose:function e(){i=new WeakMap}}}function MCe(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new Vn,color:new la};break;case"SpotLight":e={position:new Vn,direction:new Vn,color:new la,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new Vn,color:new la,distance:0,decay:0};break;case"HemisphereLight":e={direction:new Vn,skyColor:new la,groundColor:new la};break;case"RectAreaLight":e={color:new la,position:new Vn,halfWidth:new Vn,halfHeight:new Vn}}return i[t.id]=e,e}}}let PCe=0;function LCe(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function kCe(i,t){const e=new MCe,n=function DCe(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jr};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jr,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let w=0;w<9;w++)r.probe.push(new Vn);const s=new Vn,a=new To,u=new To;return{setup:function h(w,T){let O=0,W=0,te=0;for(let Bi=0;Bi<9;Bi++)r.probe[Bi].set(0,0,0);let ue=0,ce=0,Ne=0,et=0,Je=0,at=0,kt=0,Zt=0,yn=0,zt=0;w.sort(LCe);const pn=!0!==T?Math.PI:1;for(let Bi=0,Ji=w.length;Bi<Ji;Bi++){const Vi=w[Bi],bi=Vi.color,Fi=Vi.intensity,mi=Vi.distance,zi=Vi.shadow&&Vi.shadow.map?Vi.shadow.map.texture:null;if(Vi.isAmbientLight)O+=bi.r*Fi*pn,W+=bi.g*Fi*pn,te+=bi.b*Fi*pn;else if(Vi.isLightProbe)for(let Oi=0;Oi<9;Oi++)r.probe[Oi].addScaledVector(Vi.sh.coefficients[Oi],Fi);else if(Vi.isDirectionalLight){const Oi=e.get(Vi);if(Oi.color.copy(Vi.color).multiplyScalar(Vi.intensity*pn),Vi.castShadow){const _i=Vi.shadow,Ni=n.get(Vi);Ni.shadowBias=_i.bias,Ni.shadowNormalBias=_i.normalBias,Ni.shadowRadius=_i.radius,Ni.shadowMapSize=_i.mapSize,r.directionalShadow[ue]=Ni,r.directionalShadowMap[ue]=zi,r.directionalShadowMatrix[ue]=Vi.shadow.matrix,at++}r.directional[ue]=Oi,ue++}else if(Vi.isSpotLight){const Oi=e.get(Vi);Oi.position.setFromMatrixPosition(Vi.matrixWorld),Oi.color.copy(bi).multiplyScalar(Fi*pn),Oi.distance=mi,Oi.coneCos=Math.cos(Vi.angle),Oi.penumbraCos=Math.cos(Vi.angle*(1-Vi.penumbra)),Oi.decay=Vi.decay,r.spot[Ne]=Oi;const _i=Vi.shadow;if(Vi.map&&(r.spotLightMap[yn]=Vi.map,yn++,_i.updateMatrices(Vi),Vi.castShadow&&zt++),r.spotLightMatrix[Ne]=_i.matrix,Vi.castShadow){const Ni=n.get(Vi);Ni.shadowBias=_i.bias,Ni.shadowNormalBias=_i.normalBias,Ni.shadowRadius=_i.radius,Ni.shadowMapSize=_i.mapSize,r.spotShadow[Ne]=Ni,r.spotShadowMap[Ne]=zi,Zt++}Ne++}else if(Vi.isRectAreaLight){const Oi=e.get(Vi);Oi.color.copy(bi).multiplyScalar(Fi),Oi.halfWidth.set(.5*Vi.width,0,0),Oi.halfHeight.set(0,.5*Vi.height,0),r.rectArea[et]=Oi,et++}else if(Vi.isPointLight){const Oi=e.get(Vi);if(Oi.color.copy(Vi.color).multiplyScalar(Vi.intensity*pn),Oi.distance=Vi.distance,Oi.decay=Vi.decay,Vi.castShadow){const _i=Vi.shadow,Ni=n.get(Vi);Ni.shadowBias=_i.bias,Ni.shadowNormalBias=_i.normalBias,Ni.shadowRadius=_i.radius,Ni.shadowMapSize=_i.mapSize,Ni.shadowCameraNear=_i.camera.near,Ni.shadowCameraFar=_i.camera.far,r.pointShadow[ce]=Ni,r.pointShadowMap[ce]=zi,r.pointShadowMatrix[ce]=Vi.shadow.matrix,kt++}r.point[ce]=Oi,ce++}else if(Vi.isHemisphereLight){const Oi=e.get(Vi);Oi.skyColor.copy(Vi.color).multiplyScalar(Fi*pn),Oi.groundColor.copy(Vi.groundColor).multiplyScalar(Fi*pn),r.hemi[Je]=Oi,Je++}}et>0&&(t.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Fs.LTC_FLOAT_1,r.rectAreaLTC2=Fs.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Fs.LTC_HALF_1,r.rectAreaLTC2=Fs.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=O,r.ambient[1]=W,r.ambient[2]=te;const Kn=r.hash;(Kn.directionalLength!==ue||Kn.pointLength!==ce||Kn.spotLength!==Ne||Kn.rectAreaLength!==et||Kn.hemiLength!==Je||Kn.numDirectionalShadows!==at||Kn.numPointShadows!==kt||Kn.numSpotShadows!==Zt||Kn.numSpotMaps!==yn)&&(r.directional.length=ue,r.spot.length=Ne,r.rectArea.length=et,r.point.length=ce,r.hemi.length=Je,r.directionalShadow.length=at,r.directionalShadowMap.length=at,r.pointShadow.length=kt,r.pointShadowMap.length=kt,r.spotShadow.length=Zt,r.spotShadowMap.length=Zt,r.directionalShadowMatrix.length=at,r.pointShadowMatrix.length=kt,r.spotLightMatrix.length=Zt+yn-zt,r.spotLightMap.length=yn,r.numSpotLightShadowsWithMaps=zt,Kn.directionalLength=ue,Kn.pointLength=ce,Kn.spotLength=Ne,Kn.rectAreaLength=et,Kn.hemiLength=Je,Kn.numDirectionalShadows=at,Kn.numPointShadows=kt,Kn.numSpotShadows=Zt,Kn.numSpotMaps=yn,r.version=PCe++)},setupView:function m(w,T){let O=0,W=0,te=0,ue=0,ce=0;const Ne=T.matrixWorldInverse;for(let et=0,Je=w.length;et<Je;et++){const at=w[et];if(at.isDirectionalLight){const kt=r.directional[O];kt.direction.setFromMatrixPosition(at.matrixWorld),s.setFromMatrixPosition(at.target.matrixWorld),kt.direction.sub(s),kt.direction.transformDirection(Ne),O++}else if(at.isSpotLight){const kt=r.spot[te];kt.position.setFromMatrixPosition(at.matrixWorld),kt.position.applyMatrix4(Ne),kt.direction.setFromMatrixPosition(at.matrixWorld),s.setFromMatrixPosition(at.target.matrixWorld),kt.direction.sub(s),kt.direction.transformDirection(Ne),te++}else if(at.isRectAreaLight){const kt=r.rectArea[ue];kt.position.setFromMatrixPosition(at.matrixWorld),kt.position.applyMatrix4(Ne),u.identity(),a.copy(at.matrixWorld),a.premultiply(Ne),u.extractRotation(a),kt.halfWidth.set(.5*at.width,0,0),kt.halfHeight.set(0,.5*at.height,0),kt.halfWidth.applyMatrix4(u),kt.halfHeight.applyMatrix4(u),ue++}else if(at.isPointLight){const kt=r.point[W];kt.position.setFromMatrixPosition(at.matrixWorld),kt.position.applyMatrix4(Ne),W++}else if(at.isHemisphereLight){const kt=r.hemi[ce];kt.direction.setFromMatrixPosition(at.matrixWorld),kt.direction.transformDirection(Ne),ce++}}},state:r}}function W6(i,t){const e=new kCe(i,t),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:e},setupLights:function h(T){e.setup(n,T)},setupLightsView:function m(T){e.setupView(n,T)},pushLight:function a(T){n.push(T)},pushShadow:function u(T){r.push(T)}}}function RCe(i,t){let e=new WeakMap;return{get:function n(s,a=0){const u=e.get(s);let h;return void 0===u?(h=new W6(i,t),e.set(s,[h])):a>=u.length?(h=new W6(i,t),u.push(h)):h=u[a],h},dispose:function r(){e=new WeakMap}}}class j6 extends ib{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class $6 extends ib{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vn,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function NCe(i,t,e){let n=new OL;const r=new Jr,s=new Jr,a=new bu,u=new j6({depthPacking:3201}),h=new $6,m={},w=e.maxTextureSize,T={0:1,1:0,2:2},O=new Hy({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Jr},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),W=O.clone();W.defines.HORIZONTAL_PASS=1;const te=new Jo;te.setAttribute("position",new wd(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ue=new Ef(te,O),ce=this;function Ne(at,kt){const Zt=t.update(ue);O.defines.VSM_SAMPLES!==at.blurSamples&&(O.defines.VSM_SAMPLES=at.blurSamples,W.defines.VSM_SAMPLES=at.blurSamples,O.needsUpdate=!0,W.needsUpdate=!0),null===at.mapPass&&(at.mapPass=new J0(r.x,r.y)),O.uniforms.shadow_pass.value=at.map.texture,O.uniforms.resolution.value=at.mapSize,O.uniforms.radius.value=at.radius,i.setRenderTarget(at.mapPass),i.clear(),i.renderBufferDirect(kt,null,Zt,O,ue,null),W.uniforms.shadow_pass.value=at.mapPass.texture,W.uniforms.resolution.value=at.mapSize,W.uniforms.radius.value=at.radius,i.setRenderTarget(at.map),i.clear(),i.renderBufferDirect(kt,null,Zt,W,ue,null)}function et(at,kt,Zt,yn,zt,pn){let Kn=null;const Bi=!0===Zt.isPointLight?at.customDistanceMaterial:at.customDepthMaterial;if(Kn=void 0!==Bi?Bi:!0===Zt.isPointLight?h:u,i.localClippingEnabled&&!0===kt.clipShadows&&Array.isArray(kt.clippingPlanes)&&0!==kt.clippingPlanes.length||kt.displacementMap&&0!==kt.displacementScale||kt.alphaMap&&kt.alphaTest>0){const Ji=Kn.uuid,Vi=kt.uuid;let bi=m[Ji];void 0===bi&&(bi={},m[Ji]=bi);let Fi=bi[Vi];void 0===Fi&&(Fi=Kn.clone(),bi[Vi]=Fi),Kn=Fi}return Kn.visible=kt.visible,Kn.wireframe=kt.wireframe,Kn.side=3===pn?null!==kt.shadowSide?kt.shadowSide:kt.side:null!==kt.shadowSide?kt.shadowSide:T[kt.side],Kn.alphaMap=kt.alphaMap,Kn.alphaTest=kt.alphaTest,Kn.clipShadows=kt.clipShadows,Kn.clippingPlanes=kt.clippingPlanes,Kn.clipIntersection=kt.clipIntersection,Kn.displacementMap=kt.displacementMap,Kn.displacementScale=kt.displacementScale,Kn.displacementBias=kt.displacementBias,Kn.wireframeLinewidth=kt.wireframeLinewidth,Kn.linewidth=kt.linewidth,!0===Zt.isPointLight&&!0===Kn.isMeshDistanceMaterial&&(Kn.referencePosition.setFromMatrixPosition(Zt.matrixWorld),Kn.nearDistance=yn,Kn.farDistance=zt),Kn}function Je(at,kt,Zt,yn,zt){if(!1===at.visible)return;if(at.layers.test(kt.layers)&&(at.isMesh||at.isLine||at.isPoints)&&(at.castShadow||at.receiveShadow&&3===zt)&&(!at.frustumCulled||n.intersectsObject(at))){at.modelViewMatrix.multiplyMatrices(Zt.matrixWorldInverse,at.matrixWorld);const Bi=t.update(at),Ji=at.material;if(Array.isArray(Ji)){const Vi=Bi.groups;for(let bi=0,Fi=Vi.length;bi<Fi;bi++){const mi=Vi[bi],zi=Ji[mi.materialIndex];if(zi&&zi.visible){const Oi=et(at,zi,yn,Zt.near,Zt.far,zt);i.renderBufferDirect(Zt,null,Bi,Oi,at,mi)}}}else if(Ji.visible){const Vi=et(at,Ji,yn,Zt.near,Zt.far,zt);i.renderBufferDirect(Zt,null,Bi,Vi,at,null)}}const Kn=at.children;for(let Bi=0,Ji=Kn.length;Bi<Ji;Bi++)Je(Kn[Bi],kt,Zt,yn,zt)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(at,kt,Zt){if(!1===ce.enabled||!1===ce.autoUpdate&&!1===ce.needsUpdate||0===at.length)return;const yn=i.getRenderTarget(),zt=i.getActiveCubeFace(),pn=i.getActiveMipmapLevel(),Kn=i.state;Kn.setBlending(0),Kn.buffers.color.setClear(1,1,1,1),Kn.buffers.depth.setTest(!0),Kn.setScissorTest(!1);for(let Bi=0,Ji=at.length;Bi<Ji;Bi++){const Vi=at[Bi],bi=Vi.shadow;if(void 0===bi){console.warn("THREE.WebGLShadowMap:",Vi,"has no shadow.");continue}if(!1===bi.autoUpdate&&!1===bi.needsUpdate)continue;r.copy(bi.mapSize);const Fi=bi.getFrameExtents();r.multiply(Fi),s.copy(bi.mapSize),(r.x>w||r.y>w)&&(r.x>w&&(s.x=Math.floor(w/Fi.x),r.x=s.x*Fi.x,bi.mapSize.x=s.x),r.y>w&&(s.y=Math.floor(w/Fi.y),r.y=s.y*Fi.y,bi.mapSize.y=s.y)),null===bi.map&&(bi.map=new J0(r.x,r.y,3!==this.type?{minFilter:sd,magFilter:sd}:{}),bi.map.texture.name=Vi.name+".shadowMap",bi.camera.updateProjectionMatrix()),i.setRenderTarget(bi.map),i.clear();const mi=bi.getViewportCount();for(let zi=0;zi<mi;zi++){const Oi=bi.getViewport(zi);a.set(s.x*Oi.x,s.y*Oi.y,s.x*Oi.z,s.y*Oi.w),Kn.viewport(a),bi.updateMatrices(Vi,zi),n=bi.getFrustum(),Je(kt,Zt,bi.camera,Vi,this.type)}!0!==bi.isPointLightShadow&&3===this.type&&Ne(bi,Zt),bi.needsUpdate=!1}ce.needsUpdate=!1,i.setRenderTarget(yn,zt,pn)}}function BCe(i,t,e){const n=e.isWebGL2,u=new function r(){let Ii=!1;const Ir=new bu;let ms=null;const ra=new bu(0,0,0,0);return{setMask:function(Da){ms!==Da&&!Ii&&(i.colorMask(Da,Da,Da,Da),ms=Da)},setLocked:function(Da){Ii=Da},setClear:function(Da,su,Id,Tf,yb){!0===yb&&(Da*=Tf,su*=Tf,Id*=Tf),Ir.set(Da,su,Id,Tf),!1===ra.equals(Ir)&&(i.clearColor(Da,su,Id,Tf),ra.copy(Ir))},reset:function(){Ii=!1,ms=null,ra.set(-1,0,0,0)}}},h=new function s(){let Ii=!1,Ir=null,ms=null,ra=null;return{setTest:function(Da){Da?Ma(2929):wa(2929)},setMask:function(Da){Ir!==Da&&!Ii&&(i.depthMask(Da),Ir=Da)},setFunc:function(Da){if(ms!==Da){switch(Da){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}ms=Da}},setLocked:function(Da){Ii=Da},setClear:function(Da){ra!==Da&&(i.clearDepth(Da),ra=Da)},reset:function(){Ii=!1,Ir=null,ms=null,ra=null}}},m=new function a(){let Ii=!1,Ir=null,ms=null,ra=null,Da=null,su=null,Id=null,Tf=null,yb=null;return{setTest:function(gc){Ii||(gc?Ma(2960):wa(2960))},setMask:function(gc){Ir!==gc&&!Ii&&(i.stencilMask(gc),Ir=gc)},setFunc:function(gc,X_,am){(ms!==gc||ra!==X_||Da!==am)&&(i.stencilFunc(gc,X_,am),ms=gc,ra=X_,Da=am)},setOp:function(gc,X_,am){(su!==gc||Id!==X_||Tf!==am)&&(i.stencilOp(gc,X_,am),su=gc,Id=X_,Tf=am)},setLocked:function(gc){Ii=gc},setClear:function(gc){yb!==gc&&(i.clearStencil(gc),yb=gc)},reset:function(){Ii=!1,Ir=null,ms=null,ra=null,Da=null,su=null,Id=null,Tf=null,yb=null}}},w=new WeakMap,T=new WeakMap;let O={},W={},te=new WeakMap,ue=[],ce=null,Ne=!1,et=null,Je=null,at=null,kt=null,Zt=null,yn=null,zt=null,pn=!1,Kn=null,Bi=null,Ji=null,Vi=null,bi=null;const Fi=i.getParameter(35661);let mi=!1,zi=0;const Oi=i.getParameter(7938);-1!==Oi.indexOf("WebGL")?(zi=parseFloat(/^WebGL (\d)/.exec(Oi)[1]),mi=zi>=1):-1!==Oi.indexOf("OpenGL ES")&&(zi=parseFloat(/^OpenGL ES (\d)/.exec(Oi)[1]),mi=zi>=2);let _i=null,Ni={};const es=i.getParameter(3088),Er=i.getParameter(2978),cs=(new bu).fromArray(es),ys=(new bu).fromArray(Er);function Fa(Ii,Ir,ms){const ra=new Uint8Array(4),Da=i.createTexture();i.bindTexture(Ii,Da),i.texParameteri(Ii,10241,9728),i.texParameteri(Ii,10240,9728);for(let su=0;su<ms;su++)i.texImage2D(Ir+su,0,6408,1,1,0,6408,5121,ra);return Da}const Dr={};function Ma(Ii){!0!==O[Ii]&&(i.enable(Ii),O[Ii]=!0)}function wa(Ii){!1!==O[Ii]&&(i.disable(Ii),O[Ii]=!1)}Dr[3553]=Fa(3553,3553,1),Dr[34067]=Fa(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),m.setClear(0),Ma(2929),h.setFunc(3),Hs(!1),Mo(1),Ma(2884),Ls(0);const qr={100:32774,101:32778,102:32779};if(n)qr[103]=32775,qr[104]=32776;else{const Ii=t.get("EXT_blend_minmax");null!==Ii&&(qr[103]=Ii.MIN_EXT,qr[104]=Ii.MAX_EXT)}const zr={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Ls(Ii,Ir,ms,ra,Da,su,Id,Tf){if(0!==Ii){if(!1===Ne&&(Ma(3042),Ne=!0),5===Ii)Da=Da||Ir,su=su||ms,Id=Id||ra,(Ir!==Je||Da!==Zt)&&(i.blendEquationSeparate(qr[Ir],qr[Da]),Je=Ir,Zt=Da),(ms!==at||ra!==kt||su!==yn||Id!==zt)&&(i.blendFuncSeparate(zr[ms],zr[ra],zr[su],zr[Id]),at=ms,kt=ra,yn=su,zt=Id),et=Ii,pn=null;else if(Ii!==et||Tf!==pn){if((100!==Je||100!==Zt)&&(i.blendEquation(32774),Je=100,Zt=100),Tf)switch(Ii){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ii)}else switch(Ii){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ii)}at=null,kt=null,yn=null,zt=null,et=Ii,pn=Tf}}else!0===Ne&&(wa(3042),Ne=!1)}function Hs(Ii){Kn!==Ii&&(i.frontFace(Ii?2304:2305),Kn=Ii)}function Mo(Ii){0!==Ii?(Ma(2884),Ii!==Bi&&i.cullFace(1===Ii?1029:2===Ii?1028:1032)):wa(2884),Bi=Ii}function Ka(Ii,Ir,ms){Ii?(Ma(32823),(Vi!==Ir||bi!==ms)&&(i.polygonOffset(Ir,ms),Vi=Ir,bi=ms)):wa(32823)}return{buffers:{color:u,depth:h,stencil:m},enable:Ma,disable:wa,bindFramebuffer:function xa(Ii,Ir){return W[Ii]!==Ir&&(i.bindFramebuffer(Ii,Ir),W[Ii]=Ir,n&&(36009===Ii&&(W[36160]=Ir),36160===Ii&&(W[36009]=Ir)),!0)},drawBuffers:function Vs(Ii,Ir){let ms=ue,ra=!1;if(Ii)if(ms=te.get(Ir),void 0===ms&&(ms=[],te.set(Ir,ms)),Ii.isWebGLMultipleRenderTargets){const Da=Ii.texture;if(ms.length!==Da.length||36064!==ms[0]){for(let su=0,Id=Da.length;su<Id;su++)ms[su]=36064+su;ms.length=Da.length,ra=!0}}else 36064!==ms[0]&&(ms[0]=36064,ra=!0);else 1029!==ms[0]&&(ms[0]=1029,ra=!0);ra&&(e.isWebGL2?i.drawBuffers(ms):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(ms))},useProgram:function Fo(Ii){return ce!==Ii&&(i.useProgram(Ii),ce=Ii,!0)},setBlending:Ls,setMaterial:function ya(Ii,Ir){2===Ii.side?wa(2884):Ma(2884);let ms=1===Ii.side;Ir&&(ms=!ms),Hs(ms),1===Ii.blending&&!1===Ii.transparent?Ls(0):Ls(Ii.blending,Ii.blendEquation,Ii.blendSrc,Ii.blendDst,Ii.blendEquationAlpha,Ii.blendSrcAlpha,Ii.blendDstAlpha,Ii.premultipliedAlpha),h.setFunc(Ii.depthFunc),h.setTest(Ii.depthTest),h.setMask(Ii.depthWrite),u.setMask(Ii.colorWrite);const ra=Ii.stencilWrite;m.setTest(ra),ra&&(m.setMask(Ii.stencilWriteMask),m.setFunc(Ii.stencilFunc,Ii.stencilRef,Ii.stencilFuncMask),m.setOp(Ii.stencilFail,Ii.stencilZFail,Ii.stencilZPass)),Ka(Ii.polygonOffset,Ii.polygonOffsetFactor,Ii.polygonOffsetUnits),!0===Ii.alphaToCoverage?Ma(32926):wa(32926)},setFlipSided:Hs,setCullFace:Mo,setLineWidth:function so(Ii){Ii!==Ji&&(mi&&i.lineWidth(Ii),Ji=Ii)},setPolygonOffset:Ka,setScissorTest:function nc(Ii){Ii?Ma(3089):wa(3089)},activeTexture:function Du(Ii){void 0===Ii&&(Ii=33984+Fi-1),_i!==Ii&&(i.activeTexture(Ii),_i=Ii)},bindTexture:function Zn(Ii,Ir,ms){void 0===ms&&(ms=null===_i?33984+Fi-1:_i);let ra=Ni[ms];void 0===ra&&(ra={type:void 0,texture:void 0},Ni[ms]=ra),(ra.type!==Ii||ra.texture!==Ir)&&(_i!==ms&&(i.activeTexture(ms),_i=ms),i.bindTexture(Ii,Ir||Dr[Ii]),ra.type=Ii,ra.texture=Ir)},unbindTexture:function Dn(){const Ii=Ni[_i];void 0!==Ii&&void 0!==Ii.type&&(i.bindTexture(Ii.type,null),Ii.type=void 0,Ii.texture=void 0)},compressedTexImage2D:function cr(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},compressedTexImage3D:function _s(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},texImage2D:function ao(){try{i.texImage2D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},texImage3D:function Aa(){try{i.texImage3D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},updateUBOMapping:function Vl(Ii,Ir){let ms=T.get(Ir);void 0===ms&&(ms=new WeakMap,T.set(Ir,ms));let ra=ms.get(Ii);void 0===ra&&(ra=i.getUniformBlockIndex(Ir,Ii.name),ms.set(Ii,ra))},uniformBlockBinding:function pc(Ii,Ir){const ra=T.get(Ir).get(Ii);w.get(Ii)!==ra&&(i.uniformBlockBinding(Ir,ra,Ii.__bindingPointIndex),w.set(Ii,ra))},texStorage2D:function Vr(){try{i.texStorage2D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},texStorage3D:function za(){try{i.texStorage3D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},texSubImage2D:function Ms(){try{i.texSubImage2D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},texSubImage3D:function Ks(){try{i.texSubImage3D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},compressedTexSubImage2D:function fo(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},compressedTexSubImage3D:function ea(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Ii){console.error("THREE.WebGLState:",Ii)}},scissor:function Qa(Ii){!1===cs.equals(Ii)&&(i.scissor(Ii.x,Ii.y,Ii.z,Ii.w),cs.copy(Ii))},viewport:function Va(Ii){!1===ys.equals(Ii)&&(i.viewport(Ii.x,Ii.y,Ii.z,Ii.w),ys.copy(Ii))},reset:function Ad(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),O={},_i=null,Ni={},W={},te=new WeakMap,ue=[],ce=null,Ne=!1,et=null,Je=null,at=null,kt=null,Zt=null,yn=null,zt=null,pn=!1,Kn=null,Bi=null,Ji=null,Vi=null,bi=null,cs.set(0,0,i.canvas.width,i.canvas.height),ys.set(0,0,i.canvas.width,i.canvas.height),u.reset(),h.reset(),m.reset()}}}function zCe(i,t,e,n,r,s,a){const u=r.isWebGL2,h=r.maxTextures,m=r.maxCubemapSize,w=r.maxTextureSize,T=r.maxSamples,O=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,W=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),te=new WeakMap;let ue;const ce=new WeakMap;let Ne=!1;try{Ne=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function et(Zn,Dn){return Ne?new OffscreenCanvas(Zn,Dn):g1("canvas")}function Je(Zn,Dn,cr,_s){let Ms=1;if((Zn.width>_s||Zn.height>_s)&&(Ms=_s/Math.max(Zn.width,Zn.height)),Ms<1||!0===Dn){if(typeof HTMLImageElement<"u"&&Zn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Zn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Zn instanceof ImageBitmap){const Ks=Dn?qS:Math.floor,fo=Ks(Ms*Zn.width),ea=Ks(Ms*Zn.height);void 0===ue&&(ue=et(fo,ea));const Vr=cr?et(fo,ea):ue;return Vr.width=fo,Vr.height=ea,Vr.getContext("2d").drawImage(Zn,0,0,fo,ea),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Zn.width+"x"+Zn.height+") to ("+fo+"x"+ea+")."),Vr}return"data"in Zn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Zn.width+"x"+Zn.height+")."),Zn}return Zn}function at(Zn){return cL(Zn.width)&&cL(Zn.height)}function Zt(Zn,Dn){return Zn.generateMipmaps&&Dn&&Zn.minFilter!==sd&&Zn.minFilter!==Rh}function yn(Zn){i.generateMipmap(Zn)}function zt(Zn,Dn,cr,_s,Ms=!1){if(!1===u)return Dn;if(null!==Zn){if(void 0!==i[Zn])return i[Zn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Zn+"'")}let Ks=Dn;return 6403===Dn&&(5126===cr&&(Ks=33326),5131===cr&&(Ks=33325),5121===cr&&(Ks=33321)),33319===Dn&&(5126===cr&&(Ks=33328),5131===cr&&(Ks=33327),5121===cr&&(Ks=33323)),6408===Dn&&(5126===cr&&(Ks=34836),5131===cr&&(Ks=34842),5121===cr&&(Ks=_s===Qc&&!1===Ms?35907:32856),32819===cr&&(Ks=32854),32820===cr&&(Ks=32855)),(33325===Ks||33326===Ks||33327===Ks||33328===Ks||34842===Ks||34836===Ks)&&t.get("EXT_color_buffer_float"),Ks}function pn(Zn,Dn,cr){return!0===Zt(Zn,cr)||Zn.isFramebufferTexture&&Zn.minFilter!==sd&&Zn.minFilter!==Rh?Math.log2(Math.max(Dn.width,Dn.height))+1:void 0!==Zn.mipmaps&&Zn.mipmaps.length>0?Zn.mipmaps.length:Zn.isCompressedTexture&&Array.isArray(Zn.image)?Dn.mipmaps.length:1}function Kn(Zn){return Zn===sd||1004===Zn||1005===Zn?9728:9729}function Bi(Zn){const Dn=Zn.target;Dn.removeEventListener("dispose",Bi),function Vi(Zn){const Dn=n.get(Zn);if(void 0===Dn.__webglInit)return;const cr=Zn.source,_s=ce.get(cr);if(_s){const Ms=_s[Dn.__cacheKey];Ms.usedTimes--,0===Ms.usedTimes&&bi(Zn),0===Object.keys(_s).length&&ce.delete(cr)}n.remove(Zn)}(Dn),Dn.isVideoTexture&&te.delete(Dn)}function Ji(Zn){const Dn=Zn.target;Dn.removeEventListener("dispose",Ji),function Fi(Zn){const Dn=Zn.texture,cr=n.get(Zn),_s=n.get(Dn);if(void 0!==_s.__webglTexture&&(i.deleteTexture(_s.__webglTexture),a.memory.textures--),Zn.depthTexture&&Zn.depthTexture.dispose(),Zn.isWebGLCubeRenderTarget)for(let Ms=0;Ms<6;Ms++)i.deleteFramebuffer(cr.__webglFramebuffer[Ms]),cr.__webglDepthbuffer&&i.deleteRenderbuffer(cr.__webglDepthbuffer[Ms]);else{if(i.deleteFramebuffer(cr.__webglFramebuffer),cr.__webglDepthbuffer&&i.deleteRenderbuffer(cr.__webglDepthbuffer),cr.__webglMultisampledFramebuffer&&i.deleteFramebuffer(cr.__webglMultisampledFramebuffer),cr.__webglColorRenderbuffer)for(let Ms=0;Ms<cr.__webglColorRenderbuffer.length;Ms++)cr.__webglColorRenderbuffer[Ms]&&i.deleteRenderbuffer(cr.__webglColorRenderbuffer[Ms]);cr.__webglDepthRenderbuffer&&i.deleteRenderbuffer(cr.__webglDepthRenderbuffer)}if(Zn.isWebGLMultipleRenderTargets)for(let Ms=0,Ks=Dn.length;Ms<Ks;Ms++){const fo=n.get(Dn[Ms]);fo.__webglTexture&&(i.deleteTexture(fo.__webglTexture),a.memory.textures--),n.remove(Dn[Ms])}n.remove(Dn),n.remove(Zn)}(Dn)}function bi(Zn){const Dn=n.get(Zn);i.deleteTexture(Dn.__webglTexture),delete ce.get(Zn.source)[Dn.__cacheKey],a.memory.textures--}let mi=0;function Ni(Zn,Dn){const cr=n.get(Zn);if(Zn.isVideoTexture&&function nc(Zn){const Dn=a.render.frame;te.get(Zn)!==Dn&&(te.set(Zn,Dn),Zn.update())}(Zn),!1===Zn.isRenderTargetTexture&&Zn.version>0&&cr.__version!==Zn.version){const _s=Zn.image;if(null===_s)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==_s.complete)return void wa(cr,Zn,Dn);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(3553,cr.__webglTexture,33984+Dn)}const ys={1e3:10497,[ip]:33071,1002:33648},Fa={[sd]:9728,1004:9984,1005:9986,[Rh]:9729,1007:9985,1008:9987};function Dr(Zn,Dn,cr){if(cr?(i.texParameteri(Zn,10242,ys[Dn.wrapS]),i.texParameteri(Zn,10243,ys[Dn.wrapT]),(32879===Zn||35866===Zn)&&i.texParameteri(Zn,32882,ys[Dn.wrapR]),i.texParameteri(Zn,10240,Fa[Dn.magFilter]),i.texParameteri(Zn,10241,Fa[Dn.minFilter])):(i.texParameteri(Zn,10242,33071),i.texParameteri(Zn,10243,33071),(32879===Zn||35866===Zn)&&i.texParameteri(Zn,32882,33071),(Dn.wrapS!==ip||Dn.wrapT!==ip)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(Zn,10240,Kn(Dn.magFilter)),i.texParameteri(Zn,10241,Kn(Dn.minFilter)),Dn.minFilter!==sd&&Dn.minFilter!==Rh&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const _s=t.get("EXT_texture_filter_anisotropic");if(Dn.type===Py&&!1===t.has("OES_texture_float_linear")||!1===u&&Dn.type===d1&&!1===t.has("OES_texture_half_float_linear"))return;(Dn.anisotropy>1||n.get(Dn).__currentAnisotropy)&&(i.texParameterf(Zn,_s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Dn.anisotropy,r.getMaxAnisotropy())),n.get(Dn).__currentAnisotropy=Dn.anisotropy)}}function Ma(Zn,Dn){let cr=!1;void 0===Zn.__webglInit&&(Zn.__webglInit=!0,Dn.addEventListener("dispose",Bi));const _s=Dn.source;let Ms=ce.get(_s);void 0===Ms&&(Ms={},ce.set(_s,Ms));const Ks=function _i(Zn){const Dn=[];return Dn.push(Zn.wrapS),Dn.push(Zn.wrapT),Dn.push(Zn.wrapR||0),Dn.push(Zn.magFilter),Dn.push(Zn.minFilter),Dn.push(Zn.anisotropy),Dn.push(Zn.internalFormat),Dn.push(Zn.format),Dn.push(Zn.type),Dn.push(Zn.generateMipmaps),Dn.push(Zn.premultiplyAlpha),Dn.push(Zn.flipY),Dn.push(Zn.unpackAlignment),Dn.push(Zn.encoding),Dn.join()}(Dn);if(Ks!==Zn.__cacheKey){void 0===Ms[Ks]&&(Ms[Ks]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,cr=!0),Ms[Ks].usedTimes++;const fo=Ms[Zn.__cacheKey];void 0!==fo&&(Ms[Zn.__cacheKey].usedTimes--,0===fo.usedTimes&&bi(Dn)),Zn.__cacheKey=Ks,Zn.__webglTexture=Ms[Ks].texture}return cr}function wa(Zn,Dn,cr){let _s=3553;(Dn.isDataArrayTexture||Dn.isCompressedArrayTexture)&&(_s=35866),Dn.isData3DTexture&&(_s=32879);const Ms=Ma(Zn,Dn),Ks=Dn.source;e.bindTexture(_s,Zn.__webglTexture,33984+cr);const fo=n.get(Ks);if(Ks.version!==fo.__version||!0===Ms){e.activeTexture(33984+cr),i.pixelStorei(37440,Dn.flipY),i.pixelStorei(37441,Dn.premultiplyAlpha),i.pixelStorei(3317,Dn.unpackAlignment),i.pixelStorei(37443,0);const ea=function kt(Zn){return!u&&(Zn.wrapS!==ip||Zn.wrapT!==ip||Zn.minFilter!==sd&&Zn.minFilter!==Rh)}(Dn)&&!1===at(Dn.image);let Vr=Je(Dn.image,ea,!1,w);Vr=Du(Dn,Vr);const za=at(Vr)||u,ao=s.convert(Dn.format,Dn.encoding);let Va,Aa=s.convert(Dn.type),Qa=zt(Dn.internalFormat,ao,Aa,Dn.encoding,Dn.isVideoTexture);Dr(_s,Dn,za);const Vl=Dn.mipmaps,pc=u&&!0!==Dn.isVideoTexture,Ad=void 0===fo.__version||!0===Ms,Ii=pn(Dn,Vr,za);if(Dn.isDepthTexture)Qa=6402,u?Qa=Dn.type===Py?36012:Dn.type===$0?33190:Dn.type===TC?35056:33189:Dn.type===Py&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Dn.format===q0&&6402===Qa&&1012!==Dn.type&&Dn.type!==$0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Dn.type=$0,Aa=s.convert(Dn.type)),Dn.format===MC&&6402===Qa&&(Qa=34041,Dn.type!==TC&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Dn.type=TC,Aa=s.convert(Dn.type))),Ad&&(pc?e.texStorage2D(3553,1,Qa,Vr.width,Vr.height):e.texImage2D(3553,0,Qa,Vr.width,Vr.height,0,ao,Aa,null));else if(Dn.isDataTexture)if(Vl.length>0&&za){pc&&Ad&&e.texStorage2D(3553,Ii,Qa,Vl[0].width,Vl[0].height);for(let Ir=0,ms=Vl.length;Ir<ms;Ir++)Va=Vl[Ir],pc?e.texSubImage2D(3553,Ir,0,0,Va.width,Va.height,ao,Aa,Va.data):e.texImage2D(3553,Ir,Qa,Va.width,Va.height,0,ao,Aa,Va.data);Dn.generateMipmaps=!1}else pc?(Ad&&e.texStorage2D(3553,Ii,Qa,Vr.width,Vr.height),e.texSubImage2D(3553,0,0,0,Vr.width,Vr.height,ao,Aa,Vr.data)):e.texImage2D(3553,0,Qa,Vr.width,Vr.height,0,ao,Aa,Vr.data);else if(Dn.isCompressedTexture)if(Dn.isCompressedArrayTexture){pc&&Ad&&e.texStorage3D(35866,Ii,Qa,Vl[0].width,Vl[0].height,Vr.depth);for(let Ir=0,ms=Vl.length;Ir<ms;Ir++)Va=Vl[Ir],Dn.format!==tm?null!==ao?pc?e.compressedTexSubImage3D(35866,Ir,0,0,0,Va.width,Va.height,Vr.depth,ao,Va.data,0,0):e.compressedTexImage3D(35866,Ir,Qa,Va.width,Va.height,Vr.depth,0,Va.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pc?e.texSubImage3D(35866,Ir,0,0,0,Va.width,Va.height,Vr.depth,ao,Aa,Va.data):e.texImage3D(35866,Ir,Qa,Va.width,Va.height,Vr.depth,0,ao,Aa,Va.data)}else{pc&&Ad&&e.texStorage2D(3553,Ii,Qa,Vl[0].width,Vl[0].height);for(let Ir=0,ms=Vl.length;Ir<ms;Ir++)Va=Vl[Ir],Dn.format!==tm?null!==ao?pc?e.compressedTexSubImage2D(3553,Ir,0,0,Va.width,Va.height,ao,Va.data):e.compressedTexImage2D(3553,Ir,Qa,Va.width,Va.height,0,Va.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pc?e.texSubImage2D(3553,Ir,0,0,Va.width,Va.height,ao,Aa,Va.data):e.texImage2D(3553,Ir,Qa,Va.width,Va.height,0,ao,Aa,Va.data)}else if(Dn.isDataArrayTexture)pc?(Ad&&e.texStorage3D(35866,Ii,Qa,Vr.width,Vr.height,Vr.depth),e.texSubImage3D(35866,0,0,0,0,Vr.width,Vr.height,Vr.depth,ao,Aa,Vr.data)):e.texImage3D(35866,0,Qa,Vr.width,Vr.height,Vr.depth,0,ao,Aa,Vr.data);else if(Dn.isData3DTexture)pc?(Ad&&e.texStorage3D(32879,Ii,Qa,Vr.width,Vr.height,Vr.depth),e.texSubImage3D(32879,0,0,0,0,Vr.width,Vr.height,Vr.depth,ao,Aa,Vr.data)):e.texImage3D(32879,0,Qa,Vr.width,Vr.height,Vr.depth,0,ao,Aa,Vr.data);else if(Dn.isFramebufferTexture){if(Ad)if(pc)e.texStorage2D(3553,Ii,Qa,Vr.width,Vr.height);else{let Ir=Vr.width,ms=Vr.height;for(let ra=0;ra<Ii;ra++)e.texImage2D(3553,ra,Qa,Ir,ms,0,ao,Aa,null),Ir>>=1,ms>>=1}}else if(Vl.length>0&&za){pc&&Ad&&e.texStorage2D(3553,Ii,Qa,Vl[0].width,Vl[0].height);for(let Ir=0,ms=Vl.length;Ir<ms;Ir++)Va=Vl[Ir],pc?e.texSubImage2D(3553,Ir,0,0,ao,Aa,Va):e.texImage2D(3553,Ir,Qa,ao,Aa,Va);Dn.generateMipmaps=!1}else pc?(Ad&&e.texStorage2D(3553,Ii,Qa,Vr.width,Vr.height),e.texSubImage2D(3553,0,0,0,ao,Aa,Vr)):e.texImage2D(3553,0,Qa,ao,Aa,Vr);Zt(Dn,za)&&yn(_s),fo.__version=Ks.version,Dn.onUpdate&&Dn.onUpdate(Dn)}Zn.__version=Dn.version}function Vs(Zn,Dn,cr,_s,Ms){const Ks=s.convert(cr.format,cr.encoding),fo=s.convert(cr.type),ea=zt(cr.internalFormat,Ks,fo,cr.encoding);n.get(Dn).__hasExternalTextures||(32879===Ms||35866===Ms?e.texImage3D(Ms,0,ea,Dn.width,Dn.height,Dn.depth,0,Ks,fo,null):e.texImage2D(Ms,0,ea,Dn.width,Dn.height,0,Ks,fo,null)),e.bindFramebuffer(36160,Zn),Ka(Dn)?O.framebufferTexture2DMultisampleEXT(36160,_s,Ms,n.get(cr).__webglTexture,0,so(Dn)):(3553===Ms||Ms>=34069&&Ms<=34074)&&i.framebufferTexture2D(36160,_s,Ms,n.get(cr).__webglTexture,0),e.bindFramebuffer(36160,null)}function Fo(Zn,Dn,cr){if(i.bindRenderbuffer(36161,Zn),Dn.depthBuffer&&!Dn.stencilBuffer){let _s=33189;if(cr||Ka(Dn)){const Ms=Dn.depthTexture;Ms&&Ms.isDepthTexture&&(Ms.type===Py?_s=36012:Ms.type===$0&&(_s=33190));const Ks=so(Dn);Ka(Dn)?O.renderbufferStorageMultisampleEXT(36161,Ks,_s,Dn.width,Dn.height):i.renderbufferStorageMultisample(36161,Ks,_s,Dn.width,Dn.height)}else i.renderbufferStorage(36161,_s,Dn.width,Dn.height);i.framebufferRenderbuffer(36160,36096,36161,Zn)}else if(Dn.depthBuffer&&Dn.stencilBuffer){const _s=so(Dn);cr&&!1===Ka(Dn)?i.renderbufferStorageMultisample(36161,_s,35056,Dn.width,Dn.height):Ka(Dn)?O.renderbufferStorageMultisampleEXT(36161,_s,35056,Dn.width,Dn.height):i.renderbufferStorage(36161,34041,Dn.width,Dn.height),i.framebufferRenderbuffer(36160,33306,36161,Zn)}else{const _s=!0===Dn.isWebGLMultipleRenderTargets?Dn.texture:[Dn.texture];for(let Ms=0;Ms<_s.length;Ms++){const Ks=_s[Ms],fo=s.convert(Ks.format,Ks.encoding),ea=s.convert(Ks.type),Vr=zt(Ks.internalFormat,fo,ea,Ks.encoding),za=so(Dn);cr&&!1===Ka(Dn)?i.renderbufferStorageMultisample(36161,za,Vr,Dn.width,Dn.height):Ka(Dn)?O.renderbufferStorageMultisampleEXT(36161,za,Vr,Dn.width,Dn.height):i.renderbufferStorage(36161,Vr,Dn.width,Dn.height)}}i.bindRenderbuffer(36161,null)}function zr(Zn){const Dn=n.get(Zn),cr=!0===Zn.isWebGLCubeRenderTarget;if(Zn.depthTexture&&!Dn.__autoAllocateDepthBuffer){if(cr)throw new Error("target.depthTexture not supported in Cube render targets");!function qr(Zn,Dn){if(Dn&&Dn.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,Zn),!Dn.depthTexture||!Dn.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(Dn.depthTexture).__webglTexture||Dn.depthTexture.image.width!==Dn.width||Dn.depthTexture.image.height!==Dn.height)&&(Dn.depthTexture.image.width=Dn.width,Dn.depthTexture.image.height=Dn.height,Dn.depthTexture.needsUpdate=!0),Ni(Dn.depthTexture,0);const _s=n.get(Dn.depthTexture).__webglTexture,Ms=so(Dn);if(Dn.depthTexture.format===q0)Ka(Dn)?O.framebufferTexture2DMultisampleEXT(36160,36096,3553,_s,0,Ms):i.framebufferTexture2D(36160,36096,3553,_s,0);else{if(Dn.depthTexture.format!==MC)throw new Error("Unknown depthTexture format");Ka(Dn)?O.framebufferTexture2DMultisampleEXT(36160,33306,3553,_s,0,Ms):i.framebufferTexture2D(36160,33306,3553,_s,0)}}(Dn.__webglFramebuffer,Zn)}else if(cr){Dn.__webglDepthbuffer=[];for(let _s=0;_s<6;_s++)e.bindFramebuffer(36160,Dn.__webglFramebuffer[_s]),Dn.__webglDepthbuffer[_s]=i.createRenderbuffer(),Fo(Dn.__webglDepthbuffer[_s],Zn,!1)}else e.bindFramebuffer(36160,Dn.__webglFramebuffer),Dn.__webglDepthbuffer=i.createRenderbuffer(),Fo(Dn.__webglDepthbuffer,Zn,!1);e.bindFramebuffer(36160,null)}function so(Zn){return Math.min(T,Zn.samples)}function Ka(Zn){const Dn=n.get(Zn);return u&&Zn.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==Dn.__useRenderToTexture}function Du(Zn,Dn){const cr=Zn.encoding,_s=Zn.format,Ms=Zn.type;return!0===Zn.isCompressedTexture||!0===Zn.isVideoTexture||1035===Zn.format||cr!==X0&&(cr===Qc?!1===u?!0===t.has("EXT_sRGB")&&_s===tm?(Zn.format=1035,Zn.minFilter=Rh,Zn.generateMipmaps=!1):Dn=r6.sRGBToLinear(Dn):(_s!==tm||Ms!==j0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",cr)),Dn}this.allocateTextureUnit=function Oi(){const Zn=mi;return Zn>=h&&console.warn("THREE.WebGLTextures: Trying to use "+Zn+" texture units while this GPU supports only "+h),mi+=1,Zn},this.resetTextureUnits=function zi(){mi=0},this.setTexture2D=Ni,this.setTexture2DArray=function es(Zn,Dn){const cr=n.get(Zn);Zn.version>0&&cr.__version!==Zn.version?wa(cr,Zn,Dn):e.bindTexture(35866,cr.__webglTexture,33984+Dn)},this.setTexture3D=function Er(Zn,Dn){const cr=n.get(Zn);Zn.version>0&&cr.__version!==Zn.version?wa(cr,Zn,Dn):e.bindTexture(32879,cr.__webglTexture,33984+Dn)},this.setTextureCube=function cs(Zn,Dn){const cr=n.get(Zn);Zn.version>0&&cr.__version!==Zn.version?function xa(Zn,Dn,cr){if(6!==Dn.image.length)return;const _s=Ma(Zn,Dn),Ms=Dn.source;e.bindTexture(34067,Zn.__webglTexture,33984+cr);const Ks=n.get(Ms);if(Ms.version!==Ks.__version||!0===_s){e.activeTexture(33984+cr),i.pixelStorei(37440,Dn.flipY),i.pixelStorei(37441,Dn.premultiplyAlpha),i.pixelStorei(3317,Dn.unpackAlignment),i.pixelStorei(37443,0);const fo=Dn.isCompressedTexture||Dn.image[0].isCompressedTexture,ea=Dn.image[0]&&Dn.image[0].isDataTexture,Vr=[];for(let Ir=0;Ir<6;Ir++)Vr[Ir]=fo||ea?ea?Dn.image[Ir].image:Dn.image[Ir]:Je(Dn.image[Ir],!1,!0,m),Vr[Ir]=Du(Dn,Vr[Ir]);const za=Vr[0],ao=at(za)||u,Aa=s.convert(Dn.format,Dn.encoding),Qa=s.convert(Dn.type),Va=zt(Dn.internalFormat,Aa,Qa,Dn.encoding),Vl=u&&!0!==Dn.isVideoTexture,pc=void 0===Ks.__version||!0===_s;let Ii,Ad=pn(Dn,za,ao);if(Dr(34067,Dn,ao),fo){Vl&&pc&&e.texStorage2D(34067,Ad,Va,za.width,za.height);for(let Ir=0;Ir<6;Ir++){Ii=Vr[Ir].mipmaps;for(let ms=0;ms<Ii.length;ms++){const ra=Ii[ms];Dn.format!==tm?null!==Aa?Vl?e.compressedTexSubImage2D(34069+Ir,ms,0,0,ra.width,ra.height,Aa,ra.data):e.compressedTexImage2D(34069+Ir,ms,Va,ra.width,ra.height,0,ra.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Vl?e.texSubImage2D(34069+Ir,ms,0,0,ra.width,ra.height,Aa,Qa,ra.data):e.texImage2D(34069+Ir,ms,Va,ra.width,ra.height,0,Aa,Qa,ra.data)}}}else{Ii=Dn.mipmaps,Vl&&pc&&(Ii.length>0&&Ad++,e.texStorage2D(34067,Ad,Va,Vr[0].width,Vr[0].height));for(let Ir=0;Ir<6;Ir++)if(ea){Vl?e.texSubImage2D(34069+Ir,0,0,0,Vr[Ir].width,Vr[Ir].height,Aa,Qa,Vr[Ir].data):e.texImage2D(34069+Ir,0,Va,Vr[Ir].width,Vr[Ir].height,0,Aa,Qa,Vr[Ir].data);for(let ms=0;ms<Ii.length;ms++){const Da=Ii[ms].image[Ir].image;Vl?e.texSubImage2D(34069+Ir,ms+1,0,0,Da.width,Da.height,Aa,Qa,Da.data):e.texImage2D(34069+Ir,ms+1,Va,Da.width,Da.height,0,Aa,Qa,Da.data)}}else{Vl?e.texSubImage2D(34069+Ir,0,0,0,Aa,Qa,Vr[Ir]):e.texImage2D(34069+Ir,0,Va,Aa,Qa,Vr[Ir]);for(let ms=0;ms<Ii.length;ms++){const ra=Ii[ms];Vl?e.texSubImage2D(34069+Ir,ms+1,0,0,Aa,Qa,ra.image[Ir]):e.texImage2D(34069+Ir,ms+1,Va,Aa,Qa,ra.image[Ir])}}}Zt(Dn,ao)&&yn(34067),Ks.__version=Ms.version,Dn.onUpdate&&Dn.onUpdate(Dn)}Zn.__version=Dn.version}(cr,Zn,Dn):e.bindTexture(34067,cr.__webglTexture,33984+Dn)},this.rebindTextures=function Ls(Zn,Dn,cr){const _s=n.get(Zn);void 0!==Dn&&Vs(_s.__webglFramebuffer,Zn,Zn.texture,36064,3553),void 0!==cr&&zr(Zn)},this.setupRenderTarget=function ya(Zn){const Dn=Zn.texture,cr=n.get(Zn),_s=n.get(Dn);Zn.addEventListener("dispose",Ji),!0!==Zn.isWebGLMultipleRenderTargets&&(void 0===_s.__webglTexture&&(_s.__webglTexture=i.createTexture()),_s.__version=Dn.version,a.memory.textures++);const Ms=!0===Zn.isWebGLCubeRenderTarget,Ks=!0===Zn.isWebGLMultipleRenderTargets,fo=at(Zn)||u;if(Ms){cr.__webglFramebuffer=[];for(let ea=0;ea<6;ea++)cr.__webglFramebuffer[ea]=i.createFramebuffer()}else{if(cr.__webglFramebuffer=i.createFramebuffer(),Ks)if(r.drawBuffers){const ea=Zn.texture;for(let Vr=0,za=ea.length;Vr<za;Vr++){const ao=n.get(ea[Vr]);void 0===ao.__webglTexture&&(ao.__webglTexture=i.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&Zn.samples>0&&!1===Ka(Zn)){const ea=Ks?Dn:[Dn];cr.__webglMultisampledFramebuffer=i.createFramebuffer(),cr.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,cr.__webglMultisampledFramebuffer);for(let Vr=0;Vr<ea.length;Vr++){const za=ea[Vr];cr.__webglColorRenderbuffer[Vr]=i.createRenderbuffer(),i.bindRenderbuffer(36161,cr.__webglColorRenderbuffer[Vr]);const ao=s.convert(za.format,za.encoding),Aa=s.convert(za.type),Qa=zt(za.internalFormat,ao,Aa,za.encoding,!0===Zn.isXRRenderTarget),Va=so(Zn);i.renderbufferStorageMultisample(36161,Va,Qa,Zn.width,Zn.height),i.framebufferRenderbuffer(36160,36064+Vr,36161,cr.__webglColorRenderbuffer[Vr])}i.bindRenderbuffer(36161,null),Zn.depthBuffer&&(cr.__webglDepthRenderbuffer=i.createRenderbuffer(),Fo(cr.__webglDepthRenderbuffer,Zn,!0)),e.bindFramebuffer(36160,null)}}if(Ms){e.bindTexture(34067,_s.__webglTexture),Dr(34067,Dn,fo);for(let ea=0;ea<6;ea++)Vs(cr.__webglFramebuffer[ea],Zn,Dn,36064,34069+ea);Zt(Dn,fo)&&yn(34067),e.unbindTexture()}else if(Ks){const ea=Zn.texture;for(let Vr=0,za=ea.length;Vr<za;Vr++){const ao=ea[Vr],Aa=n.get(ao);e.bindTexture(3553,Aa.__webglTexture),Dr(3553,ao,fo),Vs(cr.__webglFramebuffer,Zn,ao,36064+Vr,3553),Zt(ao,fo)&&yn(3553)}e.unbindTexture()}else{let ea=3553;(Zn.isWebGL3DRenderTarget||Zn.isWebGLArrayRenderTarget)&&(u?ea=Zn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(ea,_s.__webglTexture),Dr(ea,Dn,fo),Vs(cr.__webglFramebuffer,Zn,Dn,36064,ea),Zt(Dn,fo)&&yn(ea),e.unbindTexture()}Zn.depthBuffer&&zr(Zn)},this.updateRenderTargetMipmap=function Hs(Zn){const Dn=at(Zn)||u,cr=!0===Zn.isWebGLMultipleRenderTargets?Zn.texture:[Zn.texture];for(let _s=0,Ms=cr.length;_s<Ms;_s++){const Ks=cr[_s];if(Zt(Ks,Dn)){const fo=Zn.isWebGLCubeRenderTarget?34067:3553,ea=n.get(Ks).__webglTexture;e.bindTexture(fo,ea),yn(fo),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function Mo(Zn){if(u&&Zn.samples>0&&!1===Ka(Zn)){const Dn=Zn.isWebGLMultipleRenderTargets?Zn.texture:[Zn.texture],cr=Zn.width,_s=Zn.height;let Ms=16384;const Ks=[],fo=Zn.stencilBuffer?33306:36096,ea=n.get(Zn),Vr=!0===Zn.isWebGLMultipleRenderTargets;if(Vr)for(let za=0;za<Dn.length;za++)e.bindFramebuffer(36160,ea.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+za,36161,null),e.bindFramebuffer(36160,ea.__webglFramebuffer),i.framebufferTexture2D(36009,36064+za,3553,null,0);e.bindFramebuffer(36008,ea.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,ea.__webglFramebuffer);for(let za=0;za<Dn.length;za++){Ks.push(36064+za),Zn.depthBuffer&&Ks.push(fo);const ao=void 0!==ea.__ignoreDepthValues&&ea.__ignoreDepthValues;if(!1===ao&&(Zn.depthBuffer&&(Ms|=256),Zn.stencilBuffer&&(Ms|=1024)),Vr&&i.framebufferRenderbuffer(36008,36064,36161,ea.__webglColorRenderbuffer[za]),!0===ao&&(i.invalidateFramebuffer(36008,[fo]),i.invalidateFramebuffer(36009,[fo])),Vr){const Aa=n.get(Dn[za]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,Aa,0)}i.blitFramebuffer(0,0,cr,_s,0,0,cr,_s,Ms,9728),W&&i.invalidateFramebuffer(36008,Ks)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),Vr)for(let za=0;za<Dn.length;za++){e.bindFramebuffer(36160,ea.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+za,36161,ea.__webglColorRenderbuffer[za]);const ao=n.get(Dn[za]).__webglTexture;e.bindFramebuffer(36160,ea.__webglFramebuffer),i.framebufferTexture2D(36009,36064+za,3553,ao,0)}e.bindFramebuffer(36009,ea.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=zr,this.setupFrameBufferTexture=Vs,this.useMultisampledRTT=Ka}function VCe(i,t,e){const n=e.isWebGL2;return{convert:function r(s,a=null){let u;if(s===j0)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===$0)return 5125;if(s===Py)return 5126;if(s===d1)return n?5131:(u=t.get("OES_texture_half_float"),null!==u?u.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===tm)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===q0)return 6402;if(s===MC)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return u=t.get("EXT_sRGB"),null!==u?u.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(a===Qc){if(u=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===u)return null;if(33776===s)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(u=t.get("WEBGL_compressed_texture_s3tc"),null===u)return null;if(33776===s)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(u=t.get("WEBGL_compressed_texture_pvrtc"),null===u)return null;if(35840===s)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return u=t.get("WEBGL_compressed_texture_etc1"),null!==u?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(u=t.get("WEBGL_compressed_texture_etc"),null===u)return null;if(37492===s)return a===Qc?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(37496===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(u=t.get("WEBGL_compressed_texture_astc"),null===u)return null;if(37808===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return a===Qc?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(u=t.get("EXT_texture_compression_bptc"),null===u)return null;if(36492===s)return a===Qc?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===TC?n?34042:(u=t.get("WEBGL_depth_texture"),null!==u?u.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class UCe extends Yd{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class JC extends Pp{constructor(){super(),this.isGroup=!0,this.type="Group"}}const HCe={type:"move"};class HL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new JC,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new JC,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new JC,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vn),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,a=null;const u=this._targetRay,h=this._grip,m=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(m&&t.hand){a=!0;for(const ue of t.hand.values()){const ce=e.getJointPose(ue,n);if(void 0===m.joints[ue.jointName]){const et=new JC;et.matrixAutoUpdate=!1,et.visible=!1,m.joints[ue.jointName]=et,m.add(et)}const Ne=m.joints[ue.jointName];null!==ce&&(Ne.matrix.fromArray(ce.transform.matrix),Ne.matrix.decompose(Ne.position,Ne.rotation,Ne.scale),Ne.jointRadius=ce.radius),Ne.visible=null!==ce}const O=m.joints["index-finger-tip"].position.distanceTo(m.joints["thumb-tip"].position),W=.02,te=.005;m.inputState.pinching&&O>W+te?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!m.inputState.pinching&&O<=W-te&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==h&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1));null!==u&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(HCe)))}return null!==u&&(u.visible=null!==r),null!==h&&(h.visible=null!==s),null!==m&&(m.visible=null!==a),this}}class GCe extends Ly{constructor(t,e,n,r,s,a,u,h,m,w){if((w=void 0!==w?w:q0)!==q0&&w!==MC)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&w===q0&&(n=$0),void 0===n&&w===MC&&(n=TC),super(null,r,s,a,u,h,w,n,m),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==u?u:sd,this.minFilter=void 0!==h?h:sd,this.flipY=!1,this.generateMipmaps=!1}}class WCe extends LC{constructor(t,e){super();const n=this;let r=null,s=1,a=null,u="local-floor",h=null,m=null,w=null,T=null,O=null,W=null;const te=e.getContextAttributes();let ue=null,ce=null;const Ne=[],et=[],Je=new Yd;Je.layers.enable(1),Je.viewport=new bu;const at=new Yd;at.layers.enable(2),at.viewport=new bu;const kt=[Je,at],Zt=new UCe;Zt.layers.enable(1),Zt.layers.enable(2);let yn=null,zt=null;function pn(_i){const Ni=et.indexOf(_i.inputSource);if(-1===Ni)return;const es=Ne[Ni];void 0!==es&&es.dispatchEvent({type:_i.type,data:_i.inputSource})}function Kn(){r.removeEventListener("select",pn),r.removeEventListener("selectstart",pn),r.removeEventListener("selectend",pn),r.removeEventListener("squeeze",pn),r.removeEventListener("squeezestart",pn),r.removeEventListener("squeezeend",pn),r.removeEventListener("end",Kn),r.removeEventListener("inputsourceschange",Bi);for(let _i=0;_i<Ne.length;_i++){const Ni=et[_i];null!==Ni&&(et[_i]=null,Ne[_i].disconnect(Ni))}yn=null,zt=null,t.setRenderTarget(ue),O=null,T=null,w=null,r=null,ce=null,Oi.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function Bi(_i){for(let Ni=0;Ni<_i.removed.length;Ni++){const es=_i.removed[Ni],Er=et.indexOf(es);Er>=0&&(et[Er]=null,Ne[Er].dispatchEvent({type:"disconnected",data:es}))}for(let Ni=0;Ni<_i.added.length;Ni++){const es=_i.added[Ni];let Er=et.indexOf(es);if(-1===Er){for(let ys=0;ys<Ne.length;ys++){if(ys>=et.length){et.push(es),Er=ys;break}if(null===et[ys]){et[ys]=es,Er=ys;break}}if(-1===Er)break}const cs=Ne[Er];cs&&cs.dispatchEvent({type:"connected",data:es})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(_i){let Ni=Ne[_i];return void 0===Ni&&(Ni=new HL,Ne[_i]=Ni),Ni.getTargetRaySpace()},this.getControllerGrip=function(_i){let Ni=Ne[_i];return void 0===Ni&&(Ni=new HL,Ne[_i]=Ni),Ni.getGripSpace()},this.getHand=function(_i){let Ni=Ne[_i];return void 0===Ni&&(Ni=new HL,Ne[_i]=Ni),Ni.getHandSpace()},this.setFramebufferScaleFactor=function(_i){s=_i,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(_i){u=_i,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(_i){h=_i},this.getBaseLayer=function(){return null!==T?T:O},this.getBinding=function(){return w},this.getFrame=function(){return W},this.getSession=function(){return r},this.setSession=function(){var _i=A_(function*(Ni){if(r=Ni,null!==r){if(ue=t.getRenderTarget(),r.addEventListener("select",pn),r.addEventListener("selectstart",pn),r.addEventListener("selectend",pn),r.addEventListener("squeeze",pn),r.addEventListener("squeezestart",pn),r.addEventListener("squeezeend",pn),r.addEventListener("end",Kn),r.addEventListener("inputsourceschange",Bi),!0!==te.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)O=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||te.antialias,alpha:te.alpha,depth:te.depth,stencil:te.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:O}),ce=new J0(O.framebufferWidth,O.framebufferHeight,{format:tm,type:j0,encoding:t.outputEncoding,stencilBuffer:te.stencil});else{let es=null,Er=null,cs=null;te.depth&&(cs=te.stencil?35056:33190,es=te.stencil?MC:q0,Er=te.stencil?TC:$0);const ys={colorFormat:32856,depthFormat:cs,scaleFactor:s};w=new XRWebGLBinding(r,e),T=w.createProjectionLayer(ys),r.updateRenderState({layers:[T]}),ce=new J0(T.textureWidth,T.textureHeight,{format:tm,type:j0,depthTexture:new GCe(T.textureWidth,T.textureHeight,Er,void 0,void 0,void 0,void 0,void 0,void 0,es),stencilBuffer:te.stencil,encoding:t.outputEncoding,samples:te.antialias?4:0}),t.properties.get(ce).__ignoreDepthValues=T.ignoreDepthValues}ce.isXRRenderTarget=!0,this.setFoveation(1),h=null,a=yield r.requestReferenceSpace(u),Oi.setContext(r),Oi.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Ni){return _i.apply(this,arguments)}}();const Ji=new Vn,Vi=new Vn;function Fi(_i,Ni){null===Ni?_i.matrixWorld.copy(_i.matrix):_i.matrixWorld.multiplyMatrices(Ni.matrixWorld,_i.matrix),_i.matrixWorldInverse.copy(_i.matrixWorld).invert()}this.updateCamera=function(_i){if(null===r)return;Zt.near=at.near=Je.near=_i.near,Zt.far=at.far=Je.far=_i.far,(yn!==Zt.near||zt!==Zt.far)&&(r.updateRenderState({depthNear:Zt.near,depthFar:Zt.far}),yn=Zt.near,zt=Zt.far);const Ni=_i.parent,es=Zt.cameras;Fi(Zt,Ni);for(let cs=0;cs<es.length;cs++)Fi(es[cs],Ni);Zt.matrixWorld.decompose(Zt.position,Zt.quaternion,Zt.scale),_i.matrix.copy(Zt.matrix),_i.matrix.decompose(_i.position,_i.quaternion,_i.scale);const Er=_i.children;for(let cs=0,ys=Er.length;cs<ys;cs++)Er[cs].updateMatrixWorld(!0);2===es.length?function bi(_i,Ni,es){Ji.setFromMatrixPosition(Ni.matrixWorld),Vi.setFromMatrixPosition(es.matrixWorld);const Er=Ji.distanceTo(Vi),cs=Ni.projectionMatrix.elements,ys=es.projectionMatrix.elements,Fa=cs[14]/(cs[10]-1),Dr=cs[14]/(cs[10]+1),Ma=(cs[9]+1)/cs[5],wa=(cs[9]-1)/cs[5],xa=(cs[8]-1)/cs[0],Vs=(ys[8]+1)/ys[0],Fo=Fa*xa,qr=Fa*Vs,zr=Er/(-xa+Vs),Ls=zr*-xa;Ni.matrixWorld.decompose(_i.position,_i.quaternion,_i.scale),_i.translateX(Ls),_i.translateZ(zr),_i.matrixWorld.compose(_i.position,_i.quaternion,_i.scale),_i.matrixWorldInverse.copy(_i.matrixWorld).invert();const ya=Fa+zr,Hs=Dr+zr;_i.projectionMatrix.makePerspective(Fo-Ls,qr+(Er-Ls),Ma*Dr/Hs*ya,wa*Dr/Hs*ya,ya,Hs)}(Zt,Je,at):Zt.projectionMatrix.copy(Je.projectionMatrix)},this.getCamera=function(){return Zt},this.getFoveation=function(){return null!==T?T.fixedFoveation:null!==O?O.fixedFoveation:void 0},this.setFoveation=function(_i){null!==T&&(T.fixedFoveation=_i),null!==O&&void 0!==O.fixedFoveation&&(O.fixedFoveation=_i)};let mi=null;const Oi=new _6;Oi.setAnimationLoop(function zi(_i,Ni){if(m=Ni.getViewerPose(h||a),W=Ni,null!==m){const es=m.views;null!==O&&(t.setRenderTargetFramebuffer(ce,O.framebuffer),t.setRenderTarget(ce));let Er=!1;es.length!==Zt.cameras.length&&(Zt.cameras.length=0,Er=!0);for(let cs=0;cs<es.length;cs++){const ys=es[cs];let Fa=null;if(null!==O)Fa=O.getViewport(ys);else{const Ma=w.getViewSubImage(T,ys);Fa=Ma.viewport,0===cs&&(t.setRenderTargetTextures(ce,Ma.colorTexture,T.ignoreDepthValues?void 0:Ma.depthStencilTexture),t.setRenderTarget(ce))}let Dr=kt[cs];void 0===Dr&&(Dr=new Yd,Dr.layers.enable(cs),Dr.viewport=new bu,kt[cs]=Dr),Dr.matrix.fromArray(ys.transform.matrix),Dr.projectionMatrix.fromArray(ys.projectionMatrix),Dr.viewport.set(Fa.x,Fa.y,Fa.width,Fa.height),0===cs&&Zt.matrix.copy(Dr.matrix),!0===Er&&Zt.cameras.push(Dr)}}for(let es=0;es<Ne.length;es++){const Er=et[es],cs=Ne[es];null!==Er&&void 0!==cs&&cs.update(Er,Ni,h||a)}mi&&mi(_i,Ni),W=null}),this.setAnimationLoop=function(_i){mi=_i},this.dispose=function(){}}}function jCe(i,t){function r(ue,ce){ue.opacity.value=ce.opacity,ce.color&&ue.diffuse.value.copy(ce.color),ce.emissive&&ue.emissive.value.copy(ce.emissive).multiplyScalar(ce.emissiveIntensity),ce.map&&(ue.map.value=ce.map),ce.alphaMap&&(ue.alphaMap.value=ce.alphaMap),ce.bumpMap&&(ue.bumpMap.value=ce.bumpMap,ue.bumpScale.value=ce.bumpScale,1===ce.side&&(ue.bumpScale.value*=-1)),ce.displacementMap&&(ue.displacementMap.value=ce.displacementMap,ue.displacementScale.value=ce.displacementScale,ue.displacementBias.value=ce.displacementBias),ce.emissiveMap&&(ue.emissiveMap.value=ce.emissiveMap),ce.normalMap&&(ue.normalMap.value=ce.normalMap,ue.normalScale.value.copy(ce.normalScale),1===ce.side&&ue.normalScale.value.negate()),ce.specularMap&&(ue.specularMap.value=ce.specularMap),ce.alphaTest>0&&(ue.alphaTest.value=ce.alphaTest);const Ne=t.get(ce).envMap;if(Ne&&(ue.envMap.value=Ne,ue.flipEnvMap.value=Ne.isCubeTexture&&!1===Ne.isRenderTargetTexture?-1:1,ue.reflectivity.value=ce.reflectivity,ue.ior.value=ce.ior,ue.refractionRatio.value=ce.refractionRatio),ce.lightMap){ue.lightMap.value=ce.lightMap;const at=!0!==i.physicallyCorrectLights?Math.PI:1;ue.lightMapIntensity.value=ce.lightMapIntensity*at}let et,Je;ce.aoMap&&(ue.aoMap.value=ce.aoMap,ue.aoMapIntensity.value=ce.aoMapIntensity),ce.map?et=ce.map:ce.specularMap?et=ce.specularMap:ce.displacementMap?et=ce.displacementMap:ce.normalMap?et=ce.normalMap:ce.bumpMap?et=ce.bumpMap:ce.roughnessMap?et=ce.roughnessMap:ce.metalnessMap?et=ce.metalnessMap:ce.alphaMap?et=ce.alphaMap:ce.emissiveMap?et=ce.emissiveMap:ce.clearcoatMap?et=ce.clearcoatMap:ce.clearcoatNormalMap?et=ce.clearcoatNormalMap:ce.clearcoatRoughnessMap?et=ce.clearcoatRoughnessMap:ce.iridescenceMap?et=ce.iridescenceMap:ce.iridescenceThicknessMap?et=ce.iridescenceThicknessMap:ce.specularIntensityMap?et=ce.specularIntensityMap:ce.specularColorMap?et=ce.specularColorMap:ce.transmissionMap?et=ce.transmissionMap:ce.thicknessMap?et=ce.thicknessMap:ce.sheenColorMap?et=ce.sheenColorMap:ce.sheenRoughnessMap&&(et=ce.sheenRoughnessMap),void 0!==et&&(et.isWebGLRenderTarget&&(et=et.texture),!0===et.matrixAutoUpdate&&et.updateMatrix(),ue.uvTransform.value.copy(et.matrix)),ce.aoMap?Je=ce.aoMap:ce.lightMap&&(Je=ce.lightMap),void 0!==Je&&(Je.isWebGLRenderTarget&&(Je=Je.texture),!0===Je.matrixAutoUpdate&&Je.updateMatrix(),ue.uv2Transform.value.copy(Je.matrix))}return{refreshFogUniforms:function e(ue,ce){ue.fogColor.value.copy(ce.color),ce.isFog?(ue.fogNear.value=ce.near,ue.fogFar.value=ce.far):ce.isFogExp2&&(ue.fogDensity.value=ce.density)},refreshMaterialUniforms:function n(ue,ce,Ne,et,Je){ce.isMeshBasicMaterial||ce.isMeshLambertMaterial?r(ue,ce):ce.isMeshToonMaterial?(r(ue,ce),function w(ue,ce){ce.gradientMap&&(ue.gradientMap.value=ce.gradientMap)}(ue,ce)):ce.isMeshPhongMaterial?(r(ue,ce),function m(ue,ce){ue.specular.value.copy(ce.specular),ue.shininess.value=Math.max(ce.shininess,1e-4)}(ue,ce)):ce.isMeshStandardMaterial?(r(ue,ce),function T(ue,ce){ue.roughness.value=ce.roughness,ue.metalness.value=ce.metalness,ce.roughnessMap&&(ue.roughnessMap.value=ce.roughnessMap),ce.metalnessMap&&(ue.metalnessMap.value=ce.metalnessMap),t.get(ce).envMap&&(ue.envMapIntensity.value=ce.envMapIntensity)}(ue,ce),ce.isMeshPhysicalMaterial&&function O(ue,ce,Ne){ue.ior.value=ce.ior,ce.sheen>0&&(ue.sheenColor.value.copy(ce.sheenColor).multiplyScalar(ce.sheen),ue.sheenRoughness.value=ce.sheenRoughness,ce.sheenColorMap&&(ue.sheenColorMap.value=ce.sheenColorMap),ce.sheenRoughnessMap&&(ue.sheenRoughnessMap.value=ce.sheenRoughnessMap)),ce.clearcoat>0&&(ue.clearcoat.value=ce.clearcoat,ue.clearcoatRoughness.value=ce.clearcoatRoughness,ce.clearcoatMap&&(ue.clearcoatMap.value=ce.clearcoatMap),ce.clearcoatRoughnessMap&&(ue.clearcoatRoughnessMap.value=ce.clearcoatRoughnessMap),ce.clearcoatNormalMap&&(ue.clearcoatNormalScale.value.copy(ce.clearcoatNormalScale),ue.clearcoatNormalMap.value=ce.clearcoatNormalMap,1===ce.side&&ue.clearcoatNormalScale.value.negate())),ce.iridescence>0&&(ue.iridescence.value=ce.iridescence,ue.iridescenceIOR.value=ce.iridescenceIOR,ue.iridescenceThicknessMinimum.value=ce.iridescenceThicknessRange[0],ue.iridescenceThicknessMaximum.value=ce.iridescenceThicknessRange[1],ce.iridescenceMap&&(ue.iridescenceMap.value=ce.iridescenceMap),ce.iridescenceThicknessMap&&(ue.iridescenceThicknessMap.value=ce.iridescenceThicknessMap)),ce.transmission>0&&(ue.transmission.value=ce.transmission,ue.transmissionSamplerMap.value=Ne.texture,ue.transmissionSamplerSize.value.set(Ne.width,Ne.height),ce.transmissionMap&&(ue.transmissionMap.value=ce.transmissionMap),ue.thickness.value=ce.thickness,ce.thicknessMap&&(ue.thicknessMap.value=ce.thicknessMap),ue.attenuationDistance.value=ce.attenuationDistance,ue.attenuationColor.value.copy(ce.attenuationColor)),ue.specularIntensity.value=ce.specularIntensity,ue.specularColor.value.copy(ce.specularColor),ce.specularIntensityMap&&(ue.specularIntensityMap.value=ce.specularIntensityMap),ce.specularColorMap&&(ue.specularColorMap.value=ce.specularColorMap)}(ue,ce,Je)):ce.isMeshMatcapMaterial?(r(ue,ce),function W(ue,ce){ce.matcap&&(ue.matcap.value=ce.matcap)}(ue,ce)):ce.isMeshDepthMaterial?r(ue,ce):ce.isMeshDistanceMaterial?(r(ue,ce),function te(ue,ce){ue.referencePosition.value.copy(ce.referencePosition),ue.nearDistance.value=ce.nearDistance,ue.farDistance.value=ce.farDistance}(ue,ce)):ce.isMeshNormalMaterial?r(ue,ce):ce.isLineBasicMaterial?(function s(ue,ce){ue.diffuse.value.copy(ce.color),ue.opacity.value=ce.opacity}(ue,ce),ce.isLineDashedMaterial&&function a(ue,ce){ue.dashSize.value=ce.dashSize,ue.totalSize.value=ce.dashSize+ce.gapSize,ue.scale.value=ce.scale}(ue,ce)):ce.isPointsMaterial?function u(ue,ce,Ne,et){let Je;ue.diffuse.value.copy(ce.color),ue.opacity.value=ce.opacity,ue.size.value=ce.size*Ne,ue.scale.value=.5*et,ce.map&&(ue.map.value=ce.map),ce.alphaMap&&(ue.alphaMap.value=ce.alphaMap),ce.alphaTest>0&&(ue.alphaTest.value=ce.alphaTest),ce.map?Je=ce.map:ce.alphaMap&&(Je=ce.alphaMap),void 0!==Je&&(!0===Je.matrixAutoUpdate&&Je.updateMatrix(),ue.uvTransform.value.copy(Je.matrix))}(ue,ce,Ne,et):ce.isSpriteMaterial?function h(ue,ce){let Ne;ue.diffuse.value.copy(ce.color),ue.opacity.value=ce.opacity,ue.rotation.value=ce.rotation,ce.map&&(ue.map.value=ce.map),ce.alphaMap&&(ue.alphaMap.value=ce.alphaMap),ce.alphaTest>0&&(ue.alphaTest.value=ce.alphaTest),ce.map?Ne=ce.map:ce.alphaMap&&(Ne=ce.alphaMap),void 0!==Ne&&(!0===Ne.matrixAutoUpdate&&Ne.updateMatrix(),ue.uvTransform.value.copy(Ne.matrix))}(ue,ce):ce.isShadowMaterial?(ue.color.value.copy(ce.color),ue.opacity.value=ce.opacity):ce.isShaderMaterial&&(ce.uniformsNeedUpdate=!1)}}}function $Ce(i,t,e,n){let r={},s={},a=[];const u=e.isWebGL2?i.getParameter(35375):0;function W(et,Je,at){const kt=et.value;if(void 0===at[Je])return at[Je]="number"==typeof kt?kt:kt.clone(),!0;if("number"==typeof kt){if(at[Je]!==kt)return at[Je]=kt,!0}else{const Zt=at[Je];if(!1===Zt.equals(kt))return Zt.copy(kt),!0}return!1}function ue(et){const Je=et.value,at={boundary:0,storage:0};return"number"==typeof Je?(at.boundary=4,at.storage=4):Je.isVector2?(at.boundary=8,at.storage=8):Je.isVector3||Je.isColor?(at.boundary=16,at.storage=12):Je.isVector4?(at.boundary=16,at.storage=16):Je.isMatrix3?(at.boundary=48,at.storage=48):Je.isMatrix4?(at.boundary=64,at.storage=64):Je.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Je),at}function ce(et){const Je=et.target;Je.removeEventListener("dispose",ce);const at=a.indexOf(Je.__bindingPointIndex);a.splice(at,1),i.deleteBuffer(r[Je.id]),delete r[Je.id],delete s[Je.id]}return{bind:function h(et,Je){n.uniformBlockBinding(et,Je.program)},update:function m(et,Je){let at=r[et.id];void 0===at&&(function te(et){const Je=et.uniforms;let at=0;let Zt=0;for(let yn=0,zt=Je.length;yn<zt;yn++){const pn=Je[yn],Kn=ue(pn);if(pn.__data=new Float32Array(Kn.storage/Float32Array.BYTES_PER_ELEMENT),pn.__offset=at,yn>0){Zt=at%16;const Bi=16-Zt;0!==Zt&&Bi-Kn.boundary<0&&(at+=16-Zt,pn.__offset=at)}at+=Kn.storage}Zt=at%16,Zt>0&&(at+=16-Zt),et.__size=at,et.__cache={}}(et),at=function w(et){const Je=function T(){for(let et=0;et<u;et++)if(-1===a.indexOf(et))return a.push(et),et;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();et.__bindingPointIndex=Je;const at=i.createBuffer(),kt=et.__size,Zt=et.usage;return i.bindBuffer(35345,at),i.bufferData(35345,kt,Zt),i.bindBuffer(35345,null),i.bindBufferBase(35345,Je,at),at}(et),r[et.id]=at,et.addEventListener("dispose",ce)),n.updateUBOMapping(et,Je.program);const Zt=t.render.frame;s[et.id]!==Zt&&(function O(et){const at=et.uniforms,kt=et.__cache;i.bindBuffer(35345,r[et.id]);for(let Zt=0,yn=at.length;Zt<yn;Zt++){const zt=at[Zt];if(!0===W(zt,Zt,kt)){const pn=zt.value,Kn=zt.__offset;"number"==typeof pn?(zt.__data[0]=pn,i.bufferSubData(35345,Kn,zt.__data)):(zt.value.isMatrix3?(zt.__data[0]=zt.value.elements[0],zt.__data[1]=zt.value.elements[1],zt.__data[2]=zt.value.elements[2],zt.__data[3]=zt.value.elements[0],zt.__data[4]=zt.value.elements[3],zt.__data[5]=zt.value.elements[4],zt.__data[6]=zt.value.elements[5],zt.__data[7]=zt.value.elements[0],zt.__data[8]=zt.value.elements[6],zt.__data[9]=zt.value.elements[7],zt.__data[10]=zt.value.elements[8],zt.__data[11]=zt.value.elements[0]):pn.toArray(zt.__data),i.bufferSubData(35345,Kn,zt.__data))}}i.bindBuffer(35345,null)}(et),s[et.id]=Zt)},dispose:function Ne(){for(const et in r)i.deleteBuffer(r[et]);a=[],r={},s={}}}}function q6(i={}){this.isWebGLRenderer=!0;const t=void 0!==i.canvas?i.canvas:function qCe(){const i=g1("canvas");return i.style.display="block",i}(),e=void 0!==i.context?i.context:null,n=void 0===i.depth||i.depth,r=void 0===i.stencil||i.stencil,s=void 0!==i.antialias&&i.antialias,a=void 0===i.premultipliedAlpha||i.premultipliedAlpha,u=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,h=void 0!==i.powerPreference?i.powerPreference:"default",m=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let w;w=null!==e?e.getContextAttributes().alpha:void 0!==i.alpha&&i.alpha;let T=null,O=null;const W=[],te=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=X0,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const ue=this;let ce=!1,Ne=0,et=0,Je=null,at=-1,kt=null;const Zt=new bu,yn=new bu;let zt=null,pn=t.width,Kn=t.height,Bi=1,Ji=null,Vi=null;const bi=new bu(0,0,pn,Kn),Fi=new bu(0,0,pn,Kn);let mi=!1;const zi=new OL;let Oi=!1,_i=!1,Ni=null;const es=new To,Er=new Jr,cs=new Vn,ys={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Fa(){return null===Je?Bi:1}let wa,xa,Vs,Fo,qr,zr,Ls,ya,Hs,Mo,so,Ka,nc,Du,Zn,Dn,cr,_s,Ms,Ks,fo,ea,Vr,za,Dr=e;function Ma(Wn,Zi){for(let Cr=0;Cr<Wn.length;Cr++){const Fr=t.getContext(Wn[Cr],Zi);if(null!==Fr)return Fr}return null}try{const Wn={alpha:!0,depth:n,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r146"),t.addEventListener("webglcontextlost",Qa,!1),t.addEventListener("webglcontextrestored",Va,!1),t.addEventListener("webglcontextcreationerror",Vl,!1),null===Dr){const Zi=["webgl2","webgl","experimental-webgl"];if(!0===ue.isWebGL1Renderer&&Zi.shift(),Dr=Ma(Zi,Wn),null===Dr)throw Ma(Zi)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Dr.getShaderPrecisionFormat&&(Dr.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Wn){throw console.error("THREE.WebGLRenderer: "+Wn.message),Wn}function ao(){wa=new abe(Dr),xa=new ebe(Dr,wa,i),wa.init(xa),ea=new VCe(Dr,wa,xa),Vs=new BCe(Dr,wa,xa),Fo=new ube,qr=new SCe,zr=new zCe(Dr,wa,Vs,qr,xa,ea,Fo),Ls=new nbe(ue),ya=new sbe(ue),Hs=new Q_e(Dr,xa),Vr=new Q0e(Dr,wa,Hs,xa),Mo=new obe(Dr,Hs,Fo,Vr),so=new fbe(Dr,Mo,Hs,Fo),Ms=new dbe(Dr,xa,zr),Dn=new tbe(qr),Ka=new ICe(ue,Ls,ya,wa,xa,Vr,Dn),nc=new jCe(ue,qr),Du=new TCe,Zn=new RCe(wa,xa),_s=new Z0e(ue,Ls,ya,Vs,so,w,a),cr=new NCe(ue,so,xa),za=new $Ce(Dr,Fo,xa,Vs),Ks=new J0e(Dr,wa,Fo,xa),fo=new lbe(Dr,wa,Fo,xa),Fo.programs=Ka.programs,ue.capabilities=xa,ue.extensions=wa,ue.properties=qr,ue.renderLists=Du,ue.shadowMap=cr,ue.state=Vs,ue.info=Fo}ao();const Aa=new WCe(ue,Dr);function Qa(Wn){Wn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ce=!0}function Va(){console.log("THREE.WebGLRenderer: Context Restored."),ce=!1;const Wn=Fo.autoReset,Zi=cr.enabled,Cr=cr.autoUpdate,Hi=cr.needsUpdate,Fr=cr.type;ao(),Fo.autoReset=Wn,cr.enabled=Zi,cr.autoUpdate=Cr,cr.needsUpdate=Hi,cr.type=Fr}function Vl(Wn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Wn.statusMessage)}function pc(Wn){const Zi=Wn.target;Zi.removeEventListener("dispose",pc),function Ad(Wn){(function Ii(Wn){const Zi=qr.get(Wn).programs;void 0!==Zi&&(Zi.forEach(function(Cr){Ka.releaseProgram(Cr)}),Wn.isShaderMaterial&&Ka.releaseShaderCache(Wn))})(Wn),qr.remove(Wn)}(Zi)}this.xr=Aa,this.getContext=function(){return Dr},this.getContextAttributes=function(){return Dr.getContextAttributes()},this.forceContextLoss=function(){const Wn=wa.get("WEBGL_lose_context");Wn&&Wn.loseContext()},this.forceContextRestore=function(){const Wn=wa.get("WEBGL_lose_context");Wn&&Wn.restoreContext()},this.getPixelRatio=function(){return Bi},this.setPixelRatio=function(Wn){void 0!==Wn&&(Bi=Wn,this.setSize(pn,Kn,!1))},this.getSize=function(Wn){return Wn.set(pn,Kn)},this.setSize=function(Wn,Zi,Cr){Aa.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(pn=Wn,Kn=Zi,t.width=Math.floor(Wn*Bi),t.height=Math.floor(Zi*Bi),!1!==Cr&&(t.style.width=Wn+"px",t.style.height=Zi+"px"),this.setViewport(0,0,Wn,Zi))},this.getDrawingBufferSize=function(Wn){return Wn.set(pn*Bi,Kn*Bi).floor()},this.setDrawingBufferSize=function(Wn,Zi,Cr){pn=Wn,Kn=Zi,Bi=Cr,t.width=Math.floor(Wn*Cr),t.height=Math.floor(Zi*Cr),this.setViewport(0,0,Wn,Zi)},this.getCurrentViewport=function(Wn){return Wn.copy(Zt)},this.getViewport=function(Wn){return Wn.copy(bi)},this.setViewport=function(Wn,Zi,Cr,Hi){Wn.isVector4?bi.set(Wn.x,Wn.y,Wn.z,Wn.w):bi.set(Wn,Zi,Cr,Hi),Vs.viewport(Zt.copy(bi).multiplyScalar(Bi).floor())},this.getScissor=function(Wn){return Wn.copy(Fi)},this.setScissor=function(Wn,Zi,Cr,Hi){Wn.isVector4?Fi.set(Wn.x,Wn.y,Wn.z,Wn.w):Fi.set(Wn,Zi,Cr,Hi),Vs.scissor(yn.copy(Fi).multiplyScalar(Bi).floor())},this.getScissorTest=function(){return mi},this.setScissorTest=function(Wn){Vs.setScissorTest(mi=Wn)},this.setOpaqueSort=function(Wn){Ji=Wn},this.setTransparentSort=function(Wn){Vi=Wn},this.getClearColor=function(Wn){return Wn.copy(_s.getClearColor())},this.setClearColor=function(){_s.setClearColor.apply(_s,arguments)},this.getClearAlpha=function(){return _s.getClearAlpha()},this.setClearAlpha=function(){_s.setClearAlpha.apply(_s,arguments)},this.clear=function(Wn=!0,Zi=!0,Cr=!0){let Hi=0;Wn&&(Hi|=16384),Zi&&(Hi|=256),Cr&&(Hi|=1024),Dr.clear(Hi)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Qa,!1),t.removeEventListener("webglcontextrestored",Va,!1),t.removeEventListener("webglcontextcreationerror",Vl,!1),Du.dispose(),Zn.dispose(),qr.dispose(),Ls.dispose(),ya.dispose(),so.dispose(),Vr.dispose(),za.dispose(),Ka.dispose(),Aa.dispose(),Aa.removeEventListener("sessionstart",ra),Aa.removeEventListener("sessionend",Da),Ni&&(Ni.dispose(),Ni=null),su.stop()},this.renderBufferDirect=function(Wn,Zi,Cr,Hi,Fr,ja){null===Zi&&(Zi=ys);const yo=Fr.isMesh&&Fr.matrixWorld.determinant()<0,el=function xMe(Wn,Zi,Cr,Hi,Fr){!0!==Zi.isScene&&(Zi=ys),zr.resetTextureUnits();const ja=Zi.fog,el=null===Je?ue.outputEncoding:!0===Je.isXRRenderTarget?Je.texture.encoding:X0,jo=(Hi.isMeshStandardMaterial?ya:Ls).get(Hi.envMap||(Hi.isMeshStandardMaterial?Zi.environment:null)),au=!0===Hi.vertexColors&&!!Cr.attributes.color&&4===Cr.attributes.color.itemSize,ll=!!Hi.normalMap&&!!Cr.attributes.tangent,kl=!!Cr.morphAttributes.position,eh=!!Cr.morphAttributes.normal,bb=!!Cr.morphAttributes.color,hw=Hi.toneMapped?ue.toneMapping:0,dw=Cr.morphAttributes.position||Cr.morphAttributes.normal||Cr.morphAttributes.color,$v=void 0!==dw?dw.length:0,ou=qr.get(Hi),fw=O.state.lights;!0!==Oi||!0!==_i&&Wn===kt||Dn.setState(Hi,Wn,Wn===kt&&Hi.id===at);let Nh=!1;Hi.version===ou.__version?(ou.needsLights&&ou.lightsStateVersion!==fw.state.version||ou.outputEncoding!==el||Fr.isInstancedMesh&&!1===ou.instancing||!Fr.isInstancedMesh&&!0===ou.instancing||Fr.isSkinnedMesh&&!1===ou.skinning||!Fr.isSkinnedMesh&&!0===ou.skinning||ou.envMap!==jo||!0===Hi.fog&&ou.fog!==ja||void 0!==ou.numClippingPlanes&&(ou.numClippingPlanes!==Dn.numPlanes||ou.numIntersection!==Dn.numIntersection)||ou.vertexAlphas!==au||ou.vertexTangents!==ll||ou.morphTargets!==kl||ou.morphNormals!==eh||ou.morphColors!==bb||ou.toneMapping!==hw||!0===xa.isWebGL2&&ou.morphTargetsCount!==$v)&&(Nh=!0):(Nh=!0,ou.__version=Hi.version);let om=ou.currentProgram;!0===Nh&&(om=am(Hi,Zi,Fr));let qy=!1,U1=!1,tR=!1;const ap=om.getUniforms(),Cb=ou.uniforms;if(Vs.useProgram(om.program)&&(qy=!0,U1=!0,tR=!0),Hi.id!==at&&(at=Hi.id,U1=!0),qy||kt!==Wn){if(ap.setValue(Dr,"projectionMatrix",Wn.projectionMatrix),xa.logarithmicDepthBuffer&&ap.setValue(Dr,"logDepthBufFC",2/(Math.log(Wn.far+1)/Math.LN2)),kt!==Wn&&(kt=Wn,U1=!0,tR=!0),Hi.isShaderMaterial||Hi.isMeshPhongMaterial||Hi.isMeshToonMaterial||Hi.isMeshStandardMaterial||Hi.envMap){const mg=ap.map.cameraPosition;void 0!==mg&&mg.setValue(Dr,cs.setFromMatrixPosition(Wn.matrixWorld))}(Hi.isMeshPhongMaterial||Hi.isMeshToonMaterial||Hi.isMeshLambertMaterial||Hi.isMeshBasicMaterial||Hi.isMeshStandardMaterial||Hi.isShaderMaterial)&&ap.setValue(Dr,"isOrthographic",!0===Wn.isOrthographicCamera),(Hi.isMeshPhongMaterial||Hi.isMeshToonMaterial||Hi.isMeshLambertMaterial||Hi.isMeshBasicMaterial||Hi.isMeshStandardMaterial||Hi.isShaderMaterial||Hi.isShadowMaterial||Fr.isSkinnedMesh)&&ap.setValue(Dr,"viewMatrix",Wn.matrixWorldInverse)}if(Fr.isSkinnedMesh){ap.setOptional(Dr,Fr,"bindMatrix"),ap.setOptional(Dr,Fr,"bindMatrixInverse");const mg=Fr.skeleton;mg&&(xa.floatVertexTextures?(null===mg.boneTexture&&mg.computeBoneTexture(),ap.setValue(Dr,"boneTexture",mg.boneTexture,zr),ap.setValue(Dr,"boneTextureSize",mg.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const nR=Cr.morphAttributes;if((void 0!==nR.position||void 0!==nR.normal||void 0!==nR.color&&!0===xa.isWebGL2)&&Ms.update(Fr,Cr,Hi,om),(U1||ou.receiveShadow!==Fr.receiveShadow)&&(ou.receiveShadow=Fr.receiveShadow,ap.setValue(Dr,"receiveShadow",Fr.receiveShadow)),Hi.isMeshGouraudMaterial&&null!==Hi.envMap&&(Cb.envMap.value=jo,Cb.flipEnvMap.value=jo.isCubeTexture&&!1===jo.isRenderTargetTexture?-1:1),U1&&(ap.setValue(Dr,"toneMappingExposure",ue.toneMappingExposure),ou.needsLights&&function AMe(Wn,Zi){Wn.ambientLightColor.needsUpdate=Zi,Wn.lightProbe.needsUpdate=Zi,Wn.directionalLights.needsUpdate=Zi,Wn.directionalLightShadows.needsUpdate=Zi,Wn.pointLights.needsUpdate=Zi,Wn.pointLightShadows.needsUpdate=Zi,Wn.spotLights.needsUpdate=Zi,Wn.spotLightShadows.needsUpdate=Zi,Wn.rectAreaLights.needsUpdate=Zi,Wn.hemisphereLights.needsUpdate=Zi}(Cb,tR),ja&&!0===Hi.fog&&nc.refreshFogUniforms(Cb,ja),nc.refreshMaterialUniforms(Cb,Hi,Bi,Kn,Ni),_E.upload(Dr,ou.uniformsList,Cb,zr)),Hi.isShaderMaterial&&!0===Hi.uniformsNeedUpdate&&(_E.upload(Dr,ou.uniformsList,Cb,zr),Hi.uniformsNeedUpdate=!1),Hi.isSpriteMaterial&&ap.setValue(Dr,"center",Fr.center),ap.setValue(Dr,"modelViewMatrix",Fr.modelViewMatrix),ap.setValue(Dr,"normalMatrix",Fr.normalMatrix),ap.setValue(Dr,"modelMatrix",Fr.matrixWorld),Hi.isShaderMaterial||Hi.isRawShaderMaterial){const mg=Hi.uniformsGroups;for(let iR=0,SMe=mg.length;iR<SMe;iR++)if(xa.isWebGL2){const n9=mg[iR];za.update(n9,om),za.bind(n9,om)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return om}(Wn,Zi,Cr,Hi,Fr);Vs.setMaterial(Hi,yo);let jo=Cr.index;const au=Cr.attributes.position;if(null===jo){if(void 0===au||0===au.count)return}else if(0===jo.count)return;let ll=1;!0===Hi.wireframe&&(jo=Mo.getWireframeAttribute(Cr),ll=2),Vr.setup(Fr,Hi,el,Cr,jo);let kl,eh=Ks;null!==jo&&(kl=Hs.get(jo),eh=fo,eh.setIndex(kl));const bb=null!==jo?jo.count:au.count,hw=Cr.drawRange.start*ll,dw=Cr.drawRange.count*ll,$v=null!==ja?ja.start*ll:0,ou=null!==ja?ja.count*ll:1/0,fw=Math.max(hw,$v),Nh=Math.min(bb,hw+dw,$v+ou)-1,om=Math.max(0,Nh-fw+1);if(0!==om){if(Fr.isMesh)!0===Hi.wireframe?(Vs.setLineWidth(Hi.wireframeLinewidth*Fa()),eh.setMode(1)):eh.setMode(4);else if(Fr.isLine){let qy=Hi.linewidth;void 0===qy&&(qy=1),Vs.setLineWidth(qy*Fa()),eh.setMode(Fr.isLineSegments?1:Fr.isLineLoop?2:3)}else Fr.isPoints?eh.setMode(0):Fr.isSprite&&eh.setMode(4);if(Fr.isInstancedMesh)eh.renderInstances(fw,om,Fr.count);else if(Cr.isInstancedBufferGeometry){const qy=Math.min(Cr.instanceCount,Cr._maxInstanceCount);eh.renderInstances(fw,om,qy)}else eh.render(fw,om)}},this.compile=function(Wn,Zi){function Cr(Hi,Fr,ja){!0===Hi.transparent&&2===Hi.side?(Hi.side=1,Hi.needsUpdate=!0,am(Hi,Fr,ja),Hi.side=0,Hi.needsUpdate=!0,am(Hi,Fr,ja),Hi.side=2):am(Hi,Fr,ja)}O=Zn.get(Wn),O.init(),te.push(O),Wn.traverseVisible(function(Hi){Hi.isLight&&Hi.layers.test(Zi.layers)&&(O.pushLight(Hi),Hi.castShadow&&O.pushShadow(Hi))}),O.setupLights(ue.physicallyCorrectLights),Wn.traverse(function(Hi){const Fr=Hi.material;if(Fr)if(Array.isArray(Fr))for(let ja=0;ja<Fr.length;ja++)Cr(Fr[ja],Wn,Hi);else Cr(Fr,Wn,Hi)}),te.pop(),O=null};let Ir=null;function ra(){su.stop()}function Da(){su.start()}const su=new _6;function Id(Wn,Zi,Cr,Hi){if(!1===Wn.visible)return;if(Wn.layers.test(Zi.layers))if(Wn.isGroup)Cr=Wn.renderOrder;else if(Wn.isLOD)!0===Wn.autoUpdate&&Wn.update(Zi);else if(Wn.isLight)O.pushLight(Wn),Wn.castShadow&&O.pushShadow(Wn);else if(Wn.isSprite){if(!Wn.frustumCulled||zi.intersectsSprite(Wn)){Hi&&cs.setFromMatrixPosition(Wn.matrixWorld).applyMatrix4(es);const yo=so.update(Wn),el=Wn.material;el.visible&&T.push(Wn,yo,el,Cr,cs.z,null)}}else if((Wn.isMesh||Wn.isLine||Wn.isPoints)&&(Wn.isSkinnedMesh&&Wn.skeleton.frame!==Fo.render.frame&&(Wn.skeleton.update(),Wn.skeleton.frame=Fo.render.frame),!Wn.frustumCulled||zi.intersectsObject(Wn))){Hi&&cs.setFromMatrixPosition(Wn.matrixWorld).applyMatrix4(es);const yo=so.update(Wn),el=Wn.material;if(Array.isArray(el)){const jo=yo.groups;for(let au=0,ll=jo.length;au<ll;au++){const kl=jo[au],eh=el[kl.materialIndex];eh&&eh.visible&&T.push(Wn,yo,eh,Cr,cs.z,kl)}}else el.visible&&T.push(Wn,yo,el,Cr,cs.z,null)}const ja=Wn.children;for(let yo=0,el=ja.length;yo<el;yo++)Id(ja[yo],Zi,Cr,Hi)}function Tf(Wn,Zi,Cr,Hi){const Fr=Wn.opaque,ja=Wn.transmissive,yo=Wn.transparent;O.setupLightsView(Cr),ja.length>0&&function yb(Wn,Zi,Cr){const Hi=xa.isWebGL2;null===Ni&&(Ni=new J0(1,1,{generateMipmaps:!0,type:wa.has("EXT_color_buffer_half_float")?d1:j0,minFilter:1008,samples:Hi&&!0===s?4:0})),ue.getDrawingBufferSize(Er),Hi?Ni.setSize(Er.x,Er.y):Ni.setSize(qS(Er.x),qS(Er.y));const Fr=ue.getRenderTarget();ue.setRenderTarget(Ni),ue.clear();const ja=ue.toneMapping;ue.toneMapping=0,gc(Wn,Zi,Cr),ue.toneMapping=ja,zr.updateMultisampleRenderTarget(Ni),zr.updateRenderTargetMipmap(Ni),ue.setRenderTarget(Fr)}(Fr,Zi,Cr),Hi&&Vs.viewport(Zt.copy(Hi)),Fr.length>0&&gc(Fr,Zi,Cr),ja.length>0&&gc(ja,Zi,Cr),yo.length>0&&gc(yo,Zi,Cr),Vs.buffers.depth.setTest(!0),Vs.buffers.depth.setMask(!0),Vs.buffers.color.setMask(!0),Vs.setPolygonOffset(!1)}function gc(Wn,Zi,Cr){const Hi=!0===Zi.isScene?Zi.overrideMaterial:null;for(let Fr=0,ja=Wn.length;Fr<ja;Fr++){const yo=Wn[Fr],el=yo.object,jo=yo.geometry,au=null===Hi?yo.material:Hi,ll=yo.group;el.layers.test(Cr.layers)&&X_(el,Zi,Cr,jo,au,ll)}}function X_(Wn,Zi,Cr,Hi,Fr,ja){Wn.onBeforeRender(ue,Zi,Cr,Hi,Fr,ja),Wn.modelViewMatrix.multiplyMatrices(Cr.matrixWorldInverse,Wn.matrixWorld),Wn.normalMatrix.getNormalMatrix(Wn.modelViewMatrix),Fr.onBeforeRender(ue,Zi,Cr,Hi,Wn,ja),!0===Fr.transparent&&2===Fr.side?(Fr.side=1,Fr.needsUpdate=!0,ue.renderBufferDirect(Cr,Zi,Hi,Fr,Wn,ja),Fr.side=0,Fr.needsUpdate=!0,ue.renderBufferDirect(Cr,Zi,Hi,Fr,Wn,ja),Fr.side=2):ue.renderBufferDirect(Cr,Zi,Hi,Fr,Wn,ja),Wn.onAfterRender(ue,Zi,Cr,Hi,Fr,ja)}function am(Wn,Zi,Cr){!0!==Zi.isScene&&(Zi=ys);const Hi=qr.get(Wn),Fr=O.state.lights,yo=Fr.state.version,el=Ka.getParameters(Wn,Fr.state,O.state.shadowsArray,Zi,Cr),jo=Ka.getProgramCacheKey(el);let au=Hi.programs;Hi.environment=Wn.isMeshStandardMaterial?Zi.environment:null,Hi.fog=Zi.fog,Hi.envMap=(Wn.isMeshStandardMaterial?ya:Ls).get(Wn.envMap||Hi.environment),void 0===au&&(Wn.addEventListener("dispose",pc),au=new Map,Hi.programs=au);let ll=au.get(jo);if(void 0!==ll){if(Hi.currentProgram===ll&&Hi.lightsStateVersion===yo)return t9(Wn,el),ll}else el.uniforms=Ka.getUniforms(Wn),Wn.onBuild(Cr,el,ue),Wn.onBeforeCompile(el,ue),ll=Ka.acquireProgram(el,jo),au.set(jo,ll),Hi.uniforms=el.uniforms;const kl=Hi.uniforms;(!Wn.isShaderMaterial&&!Wn.isRawShaderMaterial||!0===Wn.clipping)&&(kl.clippingPlanes=Dn.uniform),t9(Wn,el),Hi.needsLights=function IMe(Wn){return Wn.isMeshLambertMaterial||Wn.isMeshToonMaterial||Wn.isMeshPhongMaterial||Wn.isMeshStandardMaterial||Wn.isShadowMaterial||Wn.isShaderMaterial&&!0===Wn.lights}(Wn),Hi.lightsStateVersion=yo,Hi.needsLights&&(kl.ambientLightColor.value=Fr.state.ambient,kl.lightProbe.value=Fr.state.probe,kl.directionalLights.value=Fr.state.directional,kl.directionalLightShadows.value=Fr.state.directionalShadow,kl.spotLights.value=Fr.state.spot,kl.spotLightShadows.value=Fr.state.spotShadow,kl.rectAreaLights.value=Fr.state.rectArea,kl.ltc_1.value=Fr.state.rectAreaLTC1,kl.ltc_2.value=Fr.state.rectAreaLTC2,kl.pointLights.value=Fr.state.point,kl.pointLightShadows.value=Fr.state.pointShadow,kl.hemisphereLights.value=Fr.state.hemi,kl.directionalShadowMap.value=Fr.state.directionalShadowMap,kl.directionalShadowMatrix.value=Fr.state.directionalShadowMatrix,kl.spotShadowMap.value=Fr.state.spotShadowMap,kl.spotLightMatrix.value=Fr.state.spotLightMatrix,kl.spotLightMap.value=Fr.state.spotLightMap,kl.pointShadowMap.value=Fr.state.pointShadowMap,kl.pointShadowMatrix.value=Fr.state.pointShadowMatrix);const eh=ll.getUniforms(),bb=_E.seqWithValue(eh.seq,kl);return Hi.currentProgram=ll,Hi.uniformsList=bb,ll}function t9(Wn,Zi){const Cr=qr.get(Wn);Cr.outputEncoding=Zi.outputEncoding,Cr.instancing=Zi.instancing,Cr.skinning=Zi.skinning,Cr.morphTargets=Zi.morphTargets,Cr.morphNormals=Zi.morphNormals,Cr.morphColors=Zi.morphColors,Cr.morphTargetsCount=Zi.morphTargetsCount,Cr.numClippingPlanes=Zi.numClippingPlanes,Cr.numIntersection=Zi.numClipIntersection,Cr.vertexAlphas=Zi.vertexAlphas,Cr.vertexTangents=Zi.vertexTangents,Cr.toneMapping=Zi.toneMapping}su.setAnimationLoop(function ms(Wn){Ir&&Ir(Wn)}),typeof self<"u"&&su.setContext(self),this.setAnimationLoop=function(Wn){Ir=Wn,Aa.setAnimationLoop(Wn),null===Wn?su.stop():su.start()},Aa.addEventListener("sessionstart",ra),Aa.addEventListener("sessionend",Da),this.render=function(Wn,Zi){if(void 0===Zi||!0===Zi.isCamera){if(!0!==ce){if(!0===Wn.matrixWorldAutoUpdate&&Wn.updateMatrixWorld(),null===Zi.parent&&!0===Zi.matrixWorldAutoUpdate&&Zi.updateMatrixWorld(),!0===Aa.enabled&&!0===Aa.isPresenting&&(!0===Aa.cameraAutoUpdate&&Aa.updateCamera(Zi),Zi=Aa.getCamera()),!0===Wn.isScene&&Wn.onBeforeRender(ue,Wn,Zi,Je),O=Zn.get(Wn,te.length),O.init(),te.push(O),es.multiplyMatrices(Zi.projectionMatrix,Zi.matrixWorldInverse),zi.setFromProjectionMatrix(es),_i=this.localClippingEnabled,Oi=Dn.init(this.clippingPlanes,_i,Zi),T=Du.get(Wn,W.length),T.init(),W.push(T),Id(Wn,Zi,0,ue.sortObjects),T.finish(),!0===ue.sortObjects&&T.sort(Ji,Vi),!0===Oi&&Dn.beginShadows(),cr.render(O.state.shadowsArray,Wn,Zi),!0===Oi&&Dn.endShadows(),!0===this.info.autoReset&&this.info.reset(),_s.render(T,Wn),O.setupLights(ue.physicallyCorrectLights),Zi.isArrayCamera){const Hi=Zi.cameras;for(let Fr=0,ja=Hi.length;Fr<ja;Fr++){const yo=Hi[Fr];Tf(T,Wn,yo,yo.viewport)}}else Tf(T,Wn,Zi);null!==Je&&(zr.updateMultisampleRenderTarget(Je),zr.updateRenderTargetMipmap(Je)),!0===Wn.isScene&&Wn.onAfterRender(ue,Wn,Zi),Vr.resetDefaultState(),at=-1,kt=null,te.pop(),O=te.length>0?te[te.length-1]:null,W.pop(),T=W.length>0?W[W.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return Ne},this.getActiveMipmapLevel=function(){return et},this.getRenderTarget=function(){return Je},this.setRenderTargetTextures=function(Wn,Zi,Cr){qr.get(Wn.texture).__webglTexture=Zi,qr.get(Wn.depthTexture).__webglTexture=Cr;const Hi=qr.get(Wn);Hi.__hasExternalTextures=!0,Hi.__hasExternalTextures&&(Hi.__autoAllocateDepthBuffer=void 0===Cr,Hi.__autoAllocateDepthBuffer||!0===wa.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Hi.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Wn,Zi){const Cr=qr.get(Wn);Cr.__webglFramebuffer=Zi,Cr.__useDefaultFramebuffer=void 0===Zi},this.setRenderTarget=function(Wn,Zi=0,Cr=0){Je=Wn,Ne=Zi,et=Cr;let Hi=!0,Fr=null,ja=!1,yo=!1;if(Wn){const jo=qr.get(Wn);void 0!==jo.__useDefaultFramebuffer?(Vs.bindFramebuffer(36160,null),Hi=!1):void 0===jo.__webglFramebuffer?zr.setupRenderTarget(Wn):jo.__hasExternalTextures&&zr.rebindTextures(Wn,qr.get(Wn.texture).__webglTexture,qr.get(Wn.depthTexture).__webglTexture);const au=Wn.texture;(au.isData3DTexture||au.isDataArrayTexture||au.isCompressedArrayTexture)&&(yo=!0);const ll=qr.get(Wn).__webglFramebuffer;Wn.isWebGLCubeRenderTarget?(Fr=ll[Zi],ja=!0):Fr=xa.isWebGL2&&Wn.samples>0&&!1===zr.useMultisampledRTT(Wn)?qr.get(Wn).__webglMultisampledFramebuffer:ll,Zt.copy(Wn.viewport),yn.copy(Wn.scissor),zt=Wn.scissorTest}else Zt.copy(bi).multiplyScalar(Bi).floor(),yn.copy(Fi).multiplyScalar(Bi).floor(),zt=mi;if(Vs.bindFramebuffer(36160,Fr)&&xa.drawBuffers&&Hi&&Vs.drawBuffers(Wn,Fr),Vs.viewport(Zt),Vs.scissor(yn),Vs.setScissorTest(zt),ja){const jo=qr.get(Wn.texture);Dr.framebufferTexture2D(36160,36064,34069+Zi,jo.__webglTexture,Cr)}else if(yo){const jo=qr.get(Wn.texture);Dr.framebufferTextureLayer(36160,36064,jo.__webglTexture,Cr||0,Zi||0)}at=-1},this.readRenderTargetPixels=function(Wn,Zi,Cr,Hi,Fr,ja,yo){if(!Wn||!Wn.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let el=qr.get(Wn).__webglFramebuffer;if(Wn.isWebGLCubeRenderTarget&&void 0!==yo&&(el=el[yo]),el){Vs.bindFramebuffer(36160,el);try{const jo=Wn.texture,au=jo.format,ll=jo.type;if(au!==tm&&ea.convert(au)!==Dr.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const kl=ll===d1&&(wa.has("EXT_color_buffer_half_float")||xa.isWebGL2&&wa.has("EXT_color_buffer_float"));if(!(ll===j0||ea.convert(ll)===Dr.getParameter(35738)||ll===Py&&(xa.isWebGL2||wa.has("OES_texture_float")||wa.has("WEBGL_color_buffer_float"))||kl))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Zi>=0&&Zi<=Wn.width-Hi&&Cr>=0&&Cr<=Wn.height-Fr&&Dr.readPixels(Zi,Cr,Hi,Fr,ea.convert(au),ea.convert(ll),ja)}finally{const jo=null!==Je?qr.get(Je).__webglFramebuffer:null;Vs.bindFramebuffer(36160,jo)}}},this.copyFramebufferToTexture=function(Wn,Zi,Cr=0){const Hi=Math.pow(2,-Cr),Fr=Math.floor(Zi.image.width*Hi),ja=Math.floor(Zi.image.height*Hi);zr.setTexture2D(Zi,0),Dr.copyTexSubImage2D(3553,Cr,0,0,Wn.x,Wn.y,Fr,ja),Vs.unbindTexture()},this.copyTextureToTexture=function(Wn,Zi,Cr,Hi=0){const Fr=Zi.image.width,ja=Zi.image.height,yo=ea.convert(Cr.format),el=ea.convert(Cr.type);zr.setTexture2D(Cr,0),Dr.pixelStorei(37440,Cr.flipY),Dr.pixelStorei(37441,Cr.premultiplyAlpha),Dr.pixelStorei(3317,Cr.unpackAlignment),Zi.isDataTexture?Dr.texSubImage2D(3553,Hi,Wn.x,Wn.y,Fr,ja,yo,el,Zi.image.data):Zi.isCompressedTexture?Dr.compressedTexSubImage2D(3553,Hi,Wn.x,Wn.y,Zi.mipmaps[0].width,Zi.mipmaps[0].height,yo,Zi.mipmaps[0].data):Dr.texSubImage2D(3553,Hi,Wn.x,Wn.y,yo,el,Zi.image),0===Hi&&Cr.generateMipmaps&&Dr.generateMipmap(3553),Vs.unbindTexture()},this.copyTextureToTexture3D=function(Wn,Zi,Cr,Hi,Fr=0){if(ue.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ja=Wn.max.x-Wn.min.x+1,yo=Wn.max.y-Wn.min.y+1,el=Wn.max.z-Wn.min.z+1,jo=ea.convert(Hi.format),au=ea.convert(Hi.type);let ll;if(Hi.isData3DTexture)zr.setTexture3D(Hi,0),ll=32879;else{if(!Hi.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");zr.setTexture2DArray(Hi,0),ll=35866}Dr.pixelStorei(37440,Hi.flipY),Dr.pixelStorei(37441,Hi.premultiplyAlpha),Dr.pixelStorei(3317,Hi.unpackAlignment);const kl=Dr.getParameter(3314),eh=Dr.getParameter(32878),bb=Dr.getParameter(3316),hw=Dr.getParameter(3315),dw=Dr.getParameter(32877),$v=Cr.isCompressedTexture?Cr.mipmaps[0]:Cr.image;Dr.pixelStorei(3314,$v.width),Dr.pixelStorei(32878,$v.height),Dr.pixelStorei(3316,Wn.min.x),Dr.pixelStorei(3315,Wn.min.y),Dr.pixelStorei(32877,Wn.min.z),Cr.isDataTexture||Cr.isData3DTexture?Dr.texSubImage3D(ll,Fr,Zi.x,Zi.y,Zi.z,ja,yo,el,jo,au,$v.data):Cr.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Dr.compressedTexSubImage3D(ll,Fr,Zi.x,Zi.y,Zi.z,ja,yo,el,jo,$v.data)):Dr.texSubImage3D(ll,Fr,Zi.x,Zi.y,Zi.z,ja,yo,el,jo,au,$v),Dr.pixelStorei(3314,kl),Dr.pixelStorei(32878,eh),Dr.pixelStorei(3316,bb),Dr.pixelStorei(3315,hw),Dr.pixelStorei(32877,dw),0===Fr&&Hi.generateMipmaps&&Dr.generateMipmap(ll),Vs.unbindTexture()},this.initTexture=function(Wn){Wn.isCubeTexture?zr.setTextureCube(Wn,0):Wn.isData3DTexture?zr.setTexture3D(Wn,0):Wn.isDataArrayTexture||Wn.isCompressedArrayTexture?zr.setTexture2DArray(Wn,0):zr.setTexture2D(Wn,0),Vs.unbindTexture()},this.resetState=function(){Ne=0,et=0,Je=null,Vs.reset(),Vr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class XCe extends q6{}).prototype.isWebGL1Renderer=!0;class X6 extends Pp{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Lp extends ib{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new la(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const uH=new Vn,cH=new Vn,hH=new To,qL=new tE,AE=new zC;class E1 extends Pp{constructor(t=new Jo,e=new Lp){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)uH.fromBufferAttribute(e,r-1),cH.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=uH.distanceTo(cH);t.setAttribute("lineDistance",new va(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),AE.copy(n.boundingSphere),AE.applyMatrix4(r),AE.radius+=s,!1===t.ray.intersectsSphere(AE))return;hH.copy(r).invert(),qL.copy(t.ray).applyMatrix4(hH);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,m=new Vn,w=new Vn,T=new Vn,O=new Vn,W=this.isLineSegments?2:1,te=n.index,ce=n.attributes.position;if(null!==te)for(let Je=Math.max(0,a.start),at=Math.min(te.count,a.start+a.count)-1;Je<at;Je+=W){const kt=te.getX(Je),Zt=te.getX(Je+1);if(m.fromBufferAttribute(ce,kt),w.fromBufferAttribute(ce,Zt),qL.distanceSqToSegment(m,w,O,T)>h)continue;O.applyMatrix4(this.matrixWorld);const zt=t.ray.origin.distanceTo(O);zt<t.near||zt>t.far||e.push({distance:zt,point:T.clone().applyMatrix4(this.matrixWorld),index:Je,face:null,faceIndex:null,object:this})}else for(let Je=Math.max(0,a.start),at=Math.min(ce.count,a.start+a.count)-1;Je<at;Je+=W){if(m.fromBufferAttribute(ce,Je),w.fromBufferAttribute(ce,Je+1),qL.distanceSqToSegment(m,w,O,T)>h)continue;O.applyMatrix4(this.matrixWorld);const Zt=t.ray.origin.distanceTo(O);Zt<t.near||Zt>t.far||e.push({distance:Zt,point:T.clone().applyMatrix4(this.matrixWorld),index:Je,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}}class Gv{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let a;a=e||t*n[s-1];let m,u=0,h=s-1;for(;u<=h;)if(r=Math.floor(u+(h-u)/2),m=n[r]-a,m<0)u=r+1;else{if(!(m>0)){h=r;break}h=r-1}if(r=h,n[r]===a)return r/(s-1);const w=n[r];return(r+(a-w)/(n[r+1]-w))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),u=this.getPoint(s),h=e||(a.isVector2?new Jr:new Vn);return h.copy(u).sub(a).normalize(),h}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Vn,r=[],s=[],a=[],u=new Vn,h=new To;for(let W=0;W<=t;W++)r[W]=this.getTangentAt(W/t,new Vn);s[0]=new Vn,a[0]=new Vn;let m=Number.MAX_VALUE;const w=Math.abs(r[0].x),T=Math.abs(r[0].y),O=Math.abs(r[0].z);w<=m&&(m=w,n.set(1,0,0)),T<=m&&(m=T,n.set(0,1,0)),O<=m&&n.set(0,0,1),u.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],u),a[0].crossVectors(r[0],s[0]);for(let W=1;W<=t;W++){if(s[W]=s[W-1].clone(),a[W]=a[W-1].clone(),u.crossVectors(r[W-1],r[W]),u.length()>Number.EPSILON){u.normalize();const te=Math.acos(fh(r[W-1].dot(r[W]),-1,1));s[W].applyMatrix4(h.makeRotationAxis(u,te))}a[W].crossVectors(r[W],s[W])}if(!0===e){let W=Math.acos(fh(s[0].dot(s[t]),-1,1));W/=t,r[0].dot(u.crossVectors(s[0],s[t]))>0&&(W=-W);for(let te=1;te<=t;te++)s[te].applyMatrix4(h.makeRotationAxis(r[te],W*te)),a[te].crossVectors(r[te],s[te])}return{tangents:r,normals:s,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class YL extends Gv{constructor(t=0,e=0,n=1,r=1,s=0,a=2*Math.PI,u=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=u,this.aRotation=h}getPoint(t,e){const n=e||new Jr,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=a?0:r),!0===this.aClockwise&&!a&&(s===r?s=-r:s-=r);const u=this.aStartAngle+t*s;let h=this.aX+this.xRadius*Math.cos(u),m=this.aY+this.yRadius*Math.sin(u);if(0!==this.aRotation){const w=Math.cos(this.aRotation),T=Math.sin(this.aRotation),O=h-this.aX,W=m-this.aY;h=O*w-W*T+this.aX,m=O*T+W*w+this.aY}return n.set(h,m)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function KL(){let i=0,t=0,e=0,n=0;function r(s,a,u,h){i=s,t=u,e=-3*s+3*a-2*u-h,n=2*s-2*a+u+h}return{initCatmullRom:function(s,a,u,h,m){r(a,u,m*(u-s),m*(h-a))},initNonuniformCatmullRom:function(s,a,u,h,m,w,T){let O=(a-s)/m-(u-s)/(m+w)+(u-a)/w,W=(u-a)/w-(h-a)/(w+T)+(h-u)/T;O*=w,W*=w,r(a,u,O,W)},calc:function(s){const a=s*s;return i+t*s+e*a+n*(a*s)}}}const EE=new Vn,ZL=new KL,QL=new KL,JL=new KL;function _H(i,t,e,n,r){const s=.5*(n-t),a=.5*(r-e),u=i*i;return(2*e-2*n+s+a)*(i*u)+(-3*e+3*n-2*s-a)*u+s*i+e}function T1(i,t,e,n){return function owe(i,t){const e=1-i;return e*e*t}(i,t)+function lwe(i,t){return 2*(1-i)*i*t}(i,e)+function uwe(i,t){return i*i*t}(i,n)}function M1(i,t,e,n,r){return function cwe(i,t){const e=1-i;return e*e*e*t}(i,t)+function hwe(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function dwe(i,t){return 3*(1-i)*i*i*t}(i,n)+function fwe(i,t){return i*i*i*t}(i,r)}class yH extends Gv{constructor(t=new Jr,e=new Jr,n=new Jr,r=new Jr){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Jr){const n=e,r=this.v0,s=this.v1,a=this.v2,u=this.v3;return n.set(M1(t,r.x,s.x,a.x,u.x),M1(t,r.y,s.y,a.y,u.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class ek extends Gv{constructor(t=new Jr,e=new Jr){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Jr){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Jr;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class bH extends Gv{constructor(t=new Jr,e=new Jr,n=new Jr){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Jr){const n=e,r=this.v0,s=this.v1,a=this.v2;return n.set(T1(t,r.x,s.x,a.x),T1(t,r.y,s.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class wH extends Gv{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Jr){const n=e,r=this.points,s=(r.length-1)*t,a=Math.floor(s),u=s-a,h=r[0===a?a:a-1],m=r[a],w=r[a>r.length-2?r.length-1:a+1],T=r[a>r.length-3?r.length-1:a+2];return n.set(_H(u,h.x,m.x,w.x,T.x),_H(u,h.y,m.y,w.y,T.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new Jr).fromArray(r))}return this}}var tk=Object.freeze({__proto__:null,ArcCurve:class swe extends YL{constructor(t,e,n,r,s,a){super(t,e,n,n,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class awe extends Gv{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new Vn){const n=e,r=this.points,s=r.length,a=(s-(this.closed?0:1))*t;let m,w,u=Math.floor(a),h=a-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/s)+1)*s:0===h&&u===s-1&&(u=s-2,h=1),this.closed||u>0?m=r[(u-1)%s]:(EE.subVectors(r[0],r[1]).add(r[0]),m=EE);const T=r[u%s],O=r[(u+1)%s];if(this.closed||u+2<s?w=r[(u+2)%s]:(EE.subVectors(r[s-1],r[s-2]).add(r[s-1]),w=EE),"centripetal"===this.curveType||"chordal"===this.curveType){const W="chordal"===this.curveType?.5:.25;let te=Math.pow(m.distanceToSquared(T),W),ue=Math.pow(T.distanceToSquared(O),W),ce=Math.pow(O.distanceToSquared(w),W);ue<1e-4&&(ue=1),te<1e-4&&(te=ue),ce<1e-4&&(ce=ue),ZL.initNonuniformCatmullRom(m.x,T.x,O.x,w.x,te,ue,ce),QL.initNonuniformCatmullRom(m.y,T.y,O.y,w.y,te,ue,ce),JL.initNonuniformCatmullRom(m.z,T.z,O.z,w.z,te,ue,ce)}else"catmullrom"===this.curveType&&(ZL.initCatmullRom(m.x,T.x,O.x,w.x,this.tension),QL.initCatmullRom(m.y,T.y,O.y,w.y,this.tension),JL.initCatmullRom(m.z,T.z,O.z,w.z,this.tension));return n.set(ZL.calc(h),QL.calc(h),JL.calc(h)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new Vn).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:yH,CubicBezierCurve3:class pwe extends Gv{constructor(t=new Vn,e=new Vn,n=new Vn,r=new Vn){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Vn){const n=e,r=this.v0,s=this.v1,a=this.v2,u=this.v3;return n.set(M1(t,r.x,s.x,a.x,u.x),M1(t,r.y,s.y,a.y,u.y),M1(t,r.z,s.z,a.z,u.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:YL,LineCurve:ek,LineCurve3:class gwe extends Gv{constructor(t=new Vn,e=new Vn){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new Vn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:bH,QuadraticBezierCurve3:class CH extends Gv{constructor(t=new Vn,e=new Vn,n=new Vn){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Vn){const n=e,r=this.v0,s=this.v1,a=this.v2;return n.set(T1(t,r.x,s.x,a.x),T1(t,r.y,s.y,a.y),T1(t,r.z,s.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:wH});class mwe extends Gv{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new ek(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const a=r[s]-n,u=this.curves[s],h=u.getLength();return u.getPointAt(0===h?0:1-a/h,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],h=a.getPoints(a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t);for(let m=0;m<h.length;m++){const w=h[m];n&&n.equals(w)||(e.push(w),n=w)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new tk[r.type]).fromJSON(r))}return this}}class TE extends mwe{constructor(t){super(),this.type="Path",this.currentPoint=new Jr,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new ek(this.currentPoint.clone(),new Jr(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new bH(this.currentPoint.clone(),new Jr(t,e),new Jr(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,a){const u=new yH(this.currentPoint.clone(),new Jr(t,e),new Jr(n,r),new Jr(s,a));return this.curves.push(u),this.currentPoint.set(s,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new wH(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,a){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,a),this}absarc(t,e,n,r,s,a){return this.absellipse(t,e,n,n,r,s,a),this}ellipse(t,e,n,r,s,a,u,h){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,a,u,h),this}absellipse(t,e,n,r,s,a,u,h){const m=new YL(t,e,n,r,s,a,u,h);if(this.curves.length>0){const T=m.getPoint(0);T.equals(this.currentPoint)||this.lineTo(T.x,T.y)}this.curves.push(m);const w=m.getPoint(1);return this.currentPoint.copy(w),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class sw extends TE{constructor(t){super(t),this.uuid=ug(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new TE).fromJSON(r))}return this}}function xH(i,t,e,n,r){let s,a;if(r===function Rwe(i,t,e,n){let r=0;for(let s=t,a=e-n;s<e;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}(i,t,e,n)>0)for(s=t;s<e;s+=n)a=SH(s,i[s],i[s+1],a);else for(s=e-n;s>=t;s-=n)a=SH(s,i[s],i[s+1],a);return a&&kE(a,a.next)&&(k1(a),a=a.next),a}function ub(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!kE(e,e.next)&&0!==Lc(e.prev,e,e.next))e=e.next;else{if(k1(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function P1(i,t,e,n,r,s,a){if(!i)return;!a&&s&&function Twe(i,t,e,n){let r=i;do{0===r.z&&(r.z=ok(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function Mwe(i){let t,e,n,r,s,a,u,h,m=1;do{for(e=i,i=null,s=null,a=0;e;){for(a++,n=e,u=0,t=0;t<m&&(u++,n=n.nextZ,n);t++);for(h=m;u>0||h>0&&n;)0!==u&&(0===h||!n||e.z<=n.z)?(r=e,e=e.nextZ,u--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;e=n}s.nextZ=null,m*=2}while(a>1)}(r)}(i,n,r,s);let h,m,u=i;for(;i.prev!==i.next;)if(h=i.prev,m=i.next,s?bwe(i,n,r,s):ywe(i))t.push(h.i/e|0),t.push(i.i/e|0),t.push(m.i/e|0),k1(i),i=m.next,u=m.next;else if((i=m)===u){a?1===a?P1(i=Cwe(ub(i),t,e),t,e,n,r,s,2):2===a&&wwe(i,t,e,n,r,s):P1(ub(i),t,e,n,r,s,1);break}}function ywe(i){const t=i.prev,e=i,n=i.next;if(Lc(t,e,n)>=0)return!1;const r=t.x,s=e.x,a=n.x,u=t.y,h=e.y,m=n.y,w=r<s?r<a?r:a:s<a?s:a,T=u<h?u<m?u:m:h<m?h:m,O=r>s?r>a?r:a:s>a?s:a,W=u>h?u>m?u:m:h>m?h:m;let te=n.next;for(;te!==t;){if(te.x>=w&&te.x<=O&&te.y>=T&&te.y<=W&&aw(r,u,s,h,a,m,te.x,te.y)&&Lc(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function bwe(i,t,e,n){const r=i.prev,s=i,a=i.next;if(Lc(r,s,a)>=0)return!1;const u=r.x,h=s.x,m=a.x,w=r.y,T=s.y,O=a.y,W=u<h?u<m?u:m:h<m?h:m,te=w<T?w<O?w:O:T<O?T:O,ue=u>h?u>m?u:m:h>m?h:m,ce=w>T?w>O?w:O:T>O?T:O,Ne=ok(W,te,t,e,n),et=ok(ue,ce,t,e,n);let Je=i.prevZ,at=i.nextZ;for(;Je&&Je.z>=Ne&&at&&at.z<=et;){if(Je.x>=W&&Je.x<=ue&&Je.y>=te&&Je.y<=ce&&Je!==r&&Je!==a&&aw(u,w,h,T,m,O,Je.x,Je.y)&&Lc(Je.prev,Je,Je.next)>=0||(Je=Je.prevZ,at.x>=W&&at.x<=ue&&at.y>=te&&at.y<=ce&&at!==r&&at!==a&&aw(u,w,h,T,m,O,at.x,at.y)&&Lc(at.prev,at,at.next)>=0))return!1;at=at.nextZ}for(;Je&&Je.z>=Ne;){if(Je.x>=W&&Je.x<=ue&&Je.y>=te&&Je.y<=ce&&Je!==r&&Je!==a&&aw(u,w,h,T,m,O,Je.x,Je.y)&&Lc(Je.prev,Je,Je.next)>=0)return!1;Je=Je.prevZ}for(;at&&at.z<=et;){if(at.x>=W&&at.x<=ue&&at.y>=te&&at.y<=ce&&at!==r&&at!==a&&aw(u,w,h,T,m,O,at.x,at.y)&&Lc(at.prev,at,at.next)>=0)return!1;at=at.nextZ}return!0}function Cwe(i,t,e){let n=i;do{const r=n.prev,s=n.next.next;!kE(r,s)&&AH(r,n,n.next,s)&&L1(r,s)&&L1(s,r)&&(t.push(r.i/e|0),t.push(n.i/e|0),t.push(s.i/e|0),k1(n),k1(n.next),n=i=s),n=n.next}while(n!==i);return ub(n)}function wwe(i,t,e,n,r,s){let a=i;do{let u=a.next.next;for(;u!==a.prev;){if(a.i!==u.i&&Pwe(a,u)){let h=IH(a,u);return a=ub(a,a.next),h=ub(h,h.next),P1(a,t,e,n,r,s,0),void P1(h,t,e,n,r,s,0)}u=u.next}a=a.next}while(a!==i)}function Awe(i,t){return i.x-t.x}function Iwe(i,t){const e=function Swe(i,t){let r,e=t,n=-1/0;const s=i.x,a=i.y;do{if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const O=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(O<=s&&O>n&&(n=O,r=e.x<e.next.x?e:e.next,O===s))return r}e=e.next}while(e!==t);if(!r)return null;const u=r,h=r.x,m=r.y;let T,w=1/0;e=r;do{s>=e.x&&e.x>=h&&s!==e.x&&aw(a<m?s:n,a,h,m,a<m?n:s,a,e.x,e.y)&&(T=Math.abs(a-e.y)/(s-e.x),L1(e,i)&&(T<w||T===w&&(e.x>r.x||e.x===r.x&&Ewe(r,e)))&&(r=e,w=T)),e=e.next}while(e!==u);return r}(i,t);if(!e)return t;const n=IH(e,i);return ub(n,n.next),ub(e,e.next)}function Ewe(i,t){return Lc(i.prev,i,t.prev)<0&&Lc(t.next,i,i.next)<0}function ok(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-e)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Dwe(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function aw(i,t,e,n,r,s,a,u){return(r-a)*(t-u)>=(i-a)*(s-u)&&(i-a)*(n-u)>=(e-a)*(t-u)&&(e-a)*(s-u)>=(r-a)*(n-u)}function Pwe(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function Lwe(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&AH(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(L1(i,t)&&L1(t,i)&&function kwe(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,s=(i.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(Lc(i.prev,i,t.prev)||Lc(i,t.prev,t))||kE(i,t)&&Lc(i.prev,i,i.next)>0&&Lc(t.prev,t,t.next)>0)}function Lc(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function kE(i,t){return i.x===t.x&&i.y===t.y}function AH(i,t,e,n){const r=OE(Lc(i,t,e)),s=OE(Lc(i,t,n)),a=OE(Lc(e,n,i)),u=OE(Lc(e,n,t));return!!(r!==s&&a!==u||0===r&&RE(i,e,t)||0===s&&RE(i,n,t)||0===a&&RE(e,i,n)||0===u&&RE(e,t,n))}function RE(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function OE(i){return i>0?1:i<0?-1:0}function L1(i,t){return Lc(i.prev,i,i.next)<0?Lc(i,t,i.next)>=0&&Lc(i,i.prev,t)>=0:Lc(i,t,i.prev)<0||Lc(i,i.next,t)<0}function IH(i,t){const e=new lk(i.i,i.x,i.y),n=new lk(t.i,t.x,t.y),r=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function SH(i,t,e,n){const r=new lk(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function k1(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function lk(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class W_{static area(t){const e=t.length;let n=0;for(let r=e-1,s=0;s<e;r=s++)n+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*n}static isClockWise(t){return W_.area(t)<0}static triangulateShape(t,e){const n=[],r=[],s=[];EH(t),TH(n,t);let a=t.length;e.forEach(EH);for(let h=0;h<e.length;h++)r.push(a),a+=e[h].length,TH(n,e[h]);const u=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let s=xH(i,0,r,e,!0);const a=[];if(!s||s.next===s.prev)return a;let u,h,m,w,T,O,W;if(n&&(s=function xwe(i,t,e,n){const r=[];let s,a,u,h,m;for(s=0,a=t.length;s<a;s++)u=t[s]*n,h=s<a-1?t[s+1]*n:i.length,m=xH(i,u,h,n,!1),m===m.next&&(m.steiner=!0),r.push(Dwe(m));for(r.sort(Awe),s=0;s<r.length;s++)e=Iwe(r[s],e);return e}(i,t,s,e)),i.length>80*e){u=m=i[0],h=w=i[1];for(let te=e;te<r;te+=e)T=i[te],O=i[te+1],T<u&&(u=T),O<h&&(h=O),T>m&&(m=T),O>w&&(w=O);W=Math.max(m-u,w-h),W=0!==W?32767/W:0}return P1(s,a,e,u,h,W,0),a}(n,r);for(let h=0;h<u.length;h+=3)s.push(u.slice(h,h+3));return s}}function EH(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function TH(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class FE extends Jo{constructor(t=new sw([new Jr(.5,.5),new Jr(-.5,.5),new Jr(-.5,-.5),new Jr(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],s=[];for(let u=0,h=t.length;u<h;u++)a(t[u]);function a(u){const h=[],m=void 0!==e.curveSegments?e.curveSegments:12,w=void 0!==e.steps?e.steps:1,T=void 0!==e.depth?e.depth:1;let O=void 0===e.bevelEnabled||e.bevelEnabled,W=void 0!==e.bevelThickness?e.bevelThickness:.2,te=void 0!==e.bevelSize?e.bevelSize:W-.1,ue=void 0!==e.bevelOffset?e.bevelOffset:0,ce=void 0!==e.bevelSegments?e.bevelSegments:3;const Ne=e.extrudePath,et=void 0!==e.UVGenerator?e.UVGenerator:Owe;let Je,kt,Zt,yn,zt,at=!1;Ne&&(Je=Ne.getSpacedPoints(w),at=!0,O=!1,kt=Ne.computeFrenetFrames(w,!1),Zt=new Vn,yn=new Vn,zt=new Vn),O||(ce=0,W=0,te=0,ue=0);const pn=u.extractPoints(m);let Kn=pn.shape;const Bi=pn.holes;if(!W_.isClockWise(Kn)){Kn=Kn.reverse();for(let qr=0,zr=Bi.length;qr<zr;qr++){const Ls=Bi[qr];W_.isClockWise(Ls)&&(Bi[qr]=Ls.reverse())}}const Vi=W_.triangulateShape(Kn,Bi),bi=Kn;for(let qr=0,zr=Bi.length;qr<zr;qr++)Kn=Kn.concat(Bi[qr]);function Fi(qr,zr,Ls){return zr||console.error("THREE.ExtrudeGeometry: vec does not exist"),zr.clone().multiplyScalar(Ls).add(qr)}const mi=Kn.length,zi=Vi.length;function Oi(qr,zr,Ls){let ya,Hs,Mo;const so=qr.x-zr.x,Ka=qr.y-zr.y,nc=Ls.x-qr.x,Du=Ls.y-qr.y,Zn=so*so+Ka*Ka;if(Math.abs(so*Du-Ka*nc)>Number.EPSILON){const cr=Math.sqrt(Zn),_s=Math.sqrt(nc*nc+Du*Du),Ms=zr.x-Ka/cr,Ks=zr.y+so/cr,Vr=((Ls.x-Du/_s-Ms)*Du-(Ls.y+nc/_s-Ks)*nc)/(so*Du-Ka*nc);ya=Ms+so*Vr-qr.x,Hs=Ks+Ka*Vr-qr.y;const za=ya*ya+Hs*Hs;if(za<=2)return new Jr(ya,Hs);Mo=Math.sqrt(za/2)}else{let cr=!1;so>Number.EPSILON?nc>Number.EPSILON&&(cr=!0):so<-Number.EPSILON?nc<-Number.EPSILON&&(cr=!0):Math.sign(Ka)===Math.sign(Du)&&(cr=!0),cr?(ya=-Ka,Hs=so,Mo=Math.sqrt(Zn)):(ya=so,Hs=Ka,Mo=Math.sqrt(Zn/2))}return new Jr(ya/Mo,Hs/Mo)}const _i=[];for(let qr=0,zr=bi.length,Ls=zr-1,ya=qr+1;qr<zr;qr++,Ls++,ya++)Ls===zr&&(Ls=0),ya===zr&&(ya=0),_i[qr]=Oi(bi[qr],bi[Ls],bi[ya]);const Ni=[];let es,Er=_i.concat();for(let qr=0,zr=Bi.length;qr<zr;qr++){const Ls=Bi[qr];es=[];for(let ya=0,Hs=Ls.length,Mo=Hs-1,so=ya+1;ya<Hs;ya++,Mo++,so++)Mo===Hs&&(Mo=0),so===Hs&&(so=0),es[ya]=Oi(Ls[ya],Ls[Mo],Ls[so]);Ni.push(es),Er=Er.concat(es)}for(let qr=0;qr<ce;qr++){const zr=qr/ce,Ls=W*Math.cos(zr*Math.PI/2),ya=te*Math.sin(zr*Math.PI/2)+ue;for(let Hs=0,Mo=bi.length;Hs<Mo;Hs++){const so=Fi(bi[Hs],_i[Hs],ya);Ma(so.x,so.y,-Ls)}for(let Hs=0,Mo=Bi.length;Hs<Mo;Hs++){const so=Bi[Hs];es=Ni[Hs];for(let Ka=0,nc=so.length;Ka<nc;Ka++){const Du=Fi(so[Ka],es[Ka],ya);Ma(Du.x,Du.y,-Ls)}}}const cs=te+ue;for(let qr=0;qr<mi;qr++){const zr=O?Fi(Kn[qr],Er[qr],cs):Kn[qr];at?(yn.copy(kt.normals[0]).multiplyScalar(zr.x),Zt.copy(kt.binormals[0]).multiplyScalar(zr.y),zt.copy(Je[0]).add(yn).add(Zt),Ma(zt.x,zt.y,zt.z)):Ma(zr.x,zr.y,0)}for(let qr=1;qr<=w;qr++)for(let zr=0;zr<mi;zr++){const Ls=O?Fi(Kn[zr],Er[zr],cs):Kn[zr];at?(yn.copy(kt.normals[qr]).multiplyScalar(Ls.x),Zt.copy(kt.binormals[qr]).multiplyScalar(Ls.y),zt.copy(Je[qr]).add(yn).add(Zt),Ma(zt.x,zt.y,zt.z)):Ma(Ls.x,Ls.y,T/w*qr)}for(let qr=ce-1;qr>=0;qr--){const zr=qr/ce,Ls=W*Math.cos(zr*Math.PI/2),ya=te*Math.sin(zr*Math.PI/2)+ue;for(let Hs=0,Mo=bi.length;Hs<Mo;Hs++){const so=Fi(bi[Hs],_i[Hs],ya);Ma(so.x,so.y,T+Ls)}for(let Hs=0,Mo=Bi.length;Hs<Mo;Hs++){const so=Bi[Hs];es=Ni[Hs];for(let Ka=0,nc=so.length;Ka<nc;Ka++){const Du=Fi(so[Ka],es[Ka],ya);at?Ma(Du.x,Du.y+Je[w-1].y,Je[w-1].x+Ls):Ma(Du.x,Du.y,T+Ls)}}}function Dr(qr,zr){let Ls=qr.length;for(;--Ls>=0;){const ya=Ls;let Hs=Ls-1;Hs<0&&(Hs=qr.length-1);for(let Mo=0,so=w+2*ce;Mo<so;Mo++){const Ka=mi*Mo,nc=mi*(Mo+1);xa(zr+ya+Ka,zr+Hs+Ka,zr+Hs+nc,zr+ya+nc)}}}function Ma(qr,zr,Ls){h.push(qr),h.push(zr),h.push(Ls)}function wa(qr,zr,Ls){Vs(qr),Vs(zr),Vs(Ls);const ya=r.length/3,Hs=et.generateTopUV(n,r,ya-3,ya-2,ya-1);Fo(Hs[0]),Fo(Hs[1]),Fo(Hs[2])}function xa(qr,zr,Ls,ya){Vs(qr),Vs(zr),Vs(ya),Vs(zr),Vs(Ls),Vs(ya);const Hs=r.length/3,Mo=et.generateSideWallUV(n,r,Hs-6,Hs-3,Hs-2,Hs-1);Fo(Mo[0]),Fo(Mo[1]),Fo(Mo[3]),Fo(Mo[1]),Fo(Mo[2]),Fo(Mo[3])}function Vs(qr){r.push(h[3*qr+0]),r.push(h[3*qr+1]),r.push(h[3*qr+2])}function Fo(qr){s.push(qr.x),s.push(qr.y)}(function ys(){const qr=r.length/3;if(O){let zr=0,Ls=mi*zr;for(let ya=0;ya<zi;ya++){const Hs=Vi[ya];wa(Hs[2]+Ls,Hs[1]+Ls,Hs[0]+Ls)}zr=w+2*ce,Ls=mi*zr;for(let ya=0;ya<zi;ya++){const Hs=Vi[ya];wa(Hs[0]+Ls,Hs[1]+Ls,Hs[2]+Ls)}}else{for(let zr=0;zr<zi;zr++){const Ls=Vi[zr];wa(Ls[2],Ls[1],Ls[0])}for(let zr=0;zr<zi;zr++){const Ls=Vi[zr];wa(Ls[0]+mi*w,Ls[1]+mi*w,Ls[2]+mi*w)}}n.addGroup(qr,r.length/3-qr,0)})(),function Fa(){const qr=r.length/3;let zr=0;Dr(bi,zr),zr+=bi.length;for(let Ls=0,ya=Bi.length;Ls<ya;Ls++){const Hs=Bi[Ls];Dr(Hs,zr),zr+=Hs.length}n.addGroup(qr,r.length/3-qr,1)}()}this.setAttribute("position",new va(r,3)),this.setAttribute("uv",new va(s,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function Fwe(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)e.shapes.push(i[n].uuid);else e.shapes.push(i.uuid);return e.options=Object.assign({},t),void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let s=0,a=t.shapes.length;s<a;s++)n.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new tk[r.type]).fromJSON(r)),new FE(n,t.options)}}const Owe={generateTopUV:function(i,t,e,n,r){const u=t[3*n],h=t[3*n+1],m=t[3*r],w=t[3*r+1];return[new Jr(t[3*e],t[3*e+1]),new Jr(u,h),new Jr(m,w)]},generateSideWallUV:function(i,t,e,n,r,s){const a=t[3*e],u=t[3*e+1],h=t[3*e+2],m=t[3*n],w=t[3*n+1],T=t[3*n+2],O=t[3*r],W=t[3*r+1],te=t[3*r+2],ue=t[3*s],ce=t[3*s+1],Ne=t[3*s+2];return Math.abs(u-w)<Math.abs(a-m)?[new Jr(a,1-h),new Jr(m,1-T),new Jr(O,1-te),new Jr(ue,1-Ne)]:[new Jr(u,1-h),new Jr(w,1-T),new Jr(W,1-te),new Jr(ce,1-Ne)]}};class zE extends ib{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new la(16777215),this.specular=new la(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new la(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Jr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function im(i,t,e){return mk(i)?new i.constructor(i.subarray(t,void 0!==e?e:i.length)):i.slice(t,e)}function cb(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function mk(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}class VE{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let a;n:{i:if(!(t<r)){for(let u=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===u)break;if(s=r,r=e[++n],t<r)break t}a=e.length;break n}if(t>=s)break e;{const u=e[1];t<u&&(n=2,s=u);for(let h=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===h)break;if(r=s,s=e[--n-1],t>=s)break t}a=n,n=0}}for(;n<a;){const u=n+a>>>1;t<e[u]?a=u:n=u+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let a=0;a!==r;++a)e[a]=n[s+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Kwe extends VE{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,a=t+1,u=r[s],h=r[a];if(void 0===u)switch(this.getSettings_().endingStart){case 2401:s=t,u=2*e-n;break;case 2402:s=r.length-2,u=e+r[s]-r[s+1];break;default:s=t,u=n}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:a=t,h=2*n-e;break;case 2402:a=1,h=n+r[1]-r[0];break;default:a=t-1,h=e}const m=.5*(n-e),w=this.valueSize;this._weightPrev=m/(e-u),this._weightNext=m/(h-n),this._offsetPrev=s*w,this._offsetNext=a*w}interpolate_(t,e,n,r){const s=this.resultBuffer,a=this.sampleValues,u=this.valueSize,h=t*u,m=h-u,w=this._offsetPrev,T=this._offsetNext,O=this._weightPrev,W=this._weightNext,te=(n-e)/(r-e),ue=te*te,ce=ue*te,Ne=-O*ce+2*O*ue-O*te,et=(1+O)*ce+(-1.5-2*O)*ue+(-.5+O)*te+1,Je=(-1-W)*ce+(1.5+W)*ue+.5*te,at=W*ce-W*ue;for(let kt=0;kt!==u;++kt)s[kt]=Ne*a[w+kt]+et*a[m+kt]+Je*a[h+kt]+at*a[T+kt];return s}}class LH extends VE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,a=this.sampleValues,u=this.valueSize,h=t*u,m=h-u,w=(n-e)/(r-e),T=1-w;for(let O=0;O!==u;++O)s[O]=a[m+O]*T+a[h+O]*w;return s}}class Zwe extends VE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Wv{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=cb(e,this.TimeBufferType),this.values=cb(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:cb(t.times,Array),values:cb(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Zwe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new LH(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Kwe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,a=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==s||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const u=this.getValueSize();this.times=im(n,s,a),this.values=im(this.values,s*u,a*u)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let u=0;u!==s;u++){const h=n[u];if("number"==typeof h&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),t=!1;break}if(null!==a&&a>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,a),t=!1;break}a=h}if(void 0!==r&&mk(r))for(let u=0,h=r.length;u!==h;++u){const m=r[u];if(isNaN(m)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,m),t=!1;break}}return t}optimize(){const t=im(this.times),e=im(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let a=1;for(let u=1;u<s;++u){let h=!1;const m=t[u];if(m!==t[u+1]&&(1!==u||m!==t[0]))if(r)h=!0;else{const T=u*n,O=T-n,W=T+n;for(let te=0;te!==n;++te){const ue=e[T+te];if(ue!==e[O+te]||ue!==e[W+te]){h=!0;break}}}if(h){if(u!==a){t[a]=t[u];const T=u*n,O=a*n;for(let W=0;W!==n;++W)e[O+W]=e[T+W]}++a}}if(s>0){t[a]=t[s];for(let u=s*n,h=a*n,m=0;m!==n;++m)e[h+m]=e[u+m];++a}return a!==t.length?(this.times=im(t,0,a),this.values=im(e,0,a*n)):(this.times=t,this.values=e),this}clone(){const t=im(this.times,0),e=im(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}Wv.prototype.TimeBufferType=Float32Array,Wv.prototype.ValueBufferType=Float32Array,Wv.prototype.DefaultInterpolation=2301;class ow extends Wv{}ow.prototype.ValueTypeName="bool",ow.prototype.ValueBufferType=Array,ow.prototype.DefaultInterpolation=2300,ow.prototype.InterpolantFactoryMethodLinear=void 0,ow.prototype.InterpolantFactoryMethodSmooth=void 0;(class kH extends Wv{}).prototype.ValueTypeName="color";(class UE extends Wv{}).prototype.ValueTypeName="number";class Qwe extends VE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,a=this.sampleValues,u=this.valueSize,h=(n-e)/(r-e);let m=t*u;for(let w=m+u;m!==w;m+=4)hg.slerpFlat(s,0,a,m-u,a,m,h);return s}}class R1 extends Wv{InterpolantFactoryMethodLinear(t){return new Qwe(this.times,this.values,this.getValueSize(),t)}}R1.prototype.ValueTypeName="quaternion",R1.prototype.DefaultInterpolation=2301,R1.prototype.InterpolantFactoryMethodSmooth=void 0;class lw extends Wv{}lw.prototype.ValueTypeName="string",lw.prototype.ValueBufferType=Array,lw.prototype.DefaultInterpolation=2300,lw.prototype.InterpolantFactoryMethodLinear=void 0,lw.prototype.InterpolantFactoryMethodSmooth=void 0;(class HE extends Wv{}).prototype.ValueTypeName="vector";const uw={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class RH{constructor(t,e,n){const r=this;let h,s=!1,a=0,u=0;const m=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(w){u++,!1===s&&void 0!==r.onStart&&r.onStart(w,a,u),s=!0},this.itemEnd=function(w){a++,void 0!==r.onProgress&&r.onProgress(w,a,u),a===u&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(w){void 0!==r.onError&&r.onError(w)},this.resolveURL=function(w){return h?h(w):w},this.setURLModifier=function(w){return h=w,this},this.addHandler=function(w,T){return m.push(w,T),this},this.removeHandler=function(w){const T=m.indexOf(w);return-1!==T&&m.splice(T,2),this},this.getHandler=function(w){for(let T=0,O=m.length;T<O;T+=2){const W=m[T],te=m[T+1];if(W.global&&(W.lastIndex=0),W.test(w))return te}return null}}}const txe=new RH;class OH{constructor(t){this.manager=void 0!==t?t:txe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,s){n.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const j_={};class nxe extends Error{constructor(t,e){super(t),this.response=e}}class $_ extends OH{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=uw.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==j_[t])return void j_[t].push({onLoad:e,onProgress:n,onError:r});j_[t]=[],j_[t].push({onLoad:e,onProgress:n,onError:r});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(a).then(m=>{if(200===m.status||0===m.status){if(0===m.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===m.body||void 0===m.body.getReader)return m;const w=j_[t],T=m.body.getReader(),O=m.headers.get("Content-Length"),W=O?parseInt(O):0,te=0!==W;let ue=0;const ce=new ReadableStream({start(Ne){!function et(){T.read().then(({done:Je,value:at})=>{if(Je)Ne.close();else{ue+=at.byteLength;const kt=new ProgressEvent("progress",{lengthComputable:te,loaded:ue,total:W});for(let Zt=0,yn=w.length;Zt<yn;Zt++){const zt=w[Zt];zt.onProgress&&zt.onProgress(kt)}Ne.enqueue(at),et()}})}()}});return new Response(ce)}throw new nxe(`fetch for "${m.url}" responded with ${m.status}: ${m.statusText}`,m)}).then(m=>{switch(h){case"arraybuffer":return m.arrayBuffer();case"blob":return m.blob();case"document":return m.text().then(w=>(new DOMParser).parseFromString(w,u));case"json":return m.json();default:if(void 0===u)return m.text();{const T=/charset="?([^;"\s]*)"?/i.exec(u),O=T&&T[1]?T[1].toLowerCase():void 0,W=new TextDecoder(O);return m.arrayBuffer().then(te=>W.decode(te))}}}).then(m=>{uw.add(t,m);const w=j_[t];delete j_[t];for(let T=0,O=w.length;T<O;T++){const W=w[T];W.onLoad&&W.onLoad(m)}}).catch(m=>{const w=j_[t];if(void 0===w)throw this.manager.itemError(t),m;delete j_[t];for(let T=0,O=w.length;T<O;T++){const W=w[T];W.onError&&W.onError(m)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class yk extends Pp{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new la(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const bk=new To,FH=new Vn,NH=new Vn;class BH{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Jr(512,512),this.map=null,this.mapPass=null,this.matrix=new To,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new OL,this._frameExtents=new Jr(1,1),this._viewportCount=1,this._viewports=[new bu(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;FH.setFromMatrixPosition(t.matrixWorld),e.position.copy(FH),NH.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(NH),e.updateMatrixWorld(),bk.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bk),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(bk)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class rxe extends BH{constructor(){super(new Yd(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*f1*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class zH extends yk{constructor(t,e,n=0,r=Math.PI/3,s=0,a=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Pp.DefaultUp),this.updateMatrix(),this.target=new Pp,this.distance=n,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new rxe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class oxe extends BH{constructor(){super(new FL(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class UH extends yk{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Pp.DefaultUp),this.updateMatrix(),this.target=new Pp,this.shadow=new oxe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class HH extends yk{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}const xk="\\[\\]\\.:\\/",_xe=new RegExp("["+xk+"]","g"),Ak="[^"+xk+"]",yxe="[^"+xk.replace("\\.","")+"]",Axe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ak)+/(WCOD+)?/.source.replace("WCOD",yxe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ak)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ak)+"$"),Ixe=["material","materials","bones","map"];class Sxe{constructor(t,e,n){const r=n||tc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let tc=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_xe,"")}static parseTrackName(e){const n=Axe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const a=r.nodeName.substring(s+1);-1!==Ixe.indexOf(a)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=a)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(a){for(let u=0;u<a.length;u++){const h=a[u];if(h.name===n||h.uuid===n)return h;const m=r(h.children);if(m)return m}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let a=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let w=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let T=0;T<e.length;T++)if(e[T].name===w){w=T;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==w){if(void 0===e[w])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[w]}}const u=e[s];if(void 0===u)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let h=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?h=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(h=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[a]&&(a=e.morphTargetDictionary[a])}m=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(m=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(m=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=s;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=Sxe,i})();tc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},tc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},tc.prototype.GetterByBindingType=[tc.prototype._getValue_direct,tc.prototype._getValue_array,tc.prototype._getValue_arrayElement,tc.prototype._getValue_toArray],tc.prototype.SetterByBindingTypeAndVersioning=[[tc.prototype._setValue_direct,tc.prototype._setValue_direct_setNeedsUpdate,tc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[tc.prototype._setValue_array,tc.prototype._setValue_array_setNeedsUpdate,tc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[tc.prototype._setValue_arrayElement,tc.prototype._setValue_arrayElement_setNeedsUpdate,tc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[tc.prototype._setValue_fromArray,tc.prototype._setValue_fromArray_setNeedsUpdate,tc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class Pxe{constructor(){this.type="ShapePath",this.color=new la,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new TE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,s,a){return this.currentPath.bezierCurveTo(t,e,n,r,s,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(Ne,et){const Je=et.length;let at=!1;for(let kt=Je-1,Zt=0;Zt<Je;kt=Zt++){let yn=et[kt],zt=et[Zt],pn=zt.x-yn.x,Kn=zt.y-yn.y;if(Math.abs(Kn)>Number.EPSILON){if(Kn<0&&(yn=et[Zt],pn=-pn,zt=et[kt],Kn=-Kn),Ne.y<yn.y||Ne.y>zt.y)continue;if(Ne.y===yn.y){if(Ne.x===yn.x)return!0}else{const Bi=Kn*(Ne.x-yn.x)-pn*(Ne.y-yn.y);if(0===Bi)return!0;if(Bi<0)continue;at=!at}}else{if(Ne.y!==yn.y)continue;if(zt.x<=Ne.x&&Ne.x<=yn.x||yn.x<=Ne.x&&Ne.x<=zt.x)return!0}}return at}const r=W_.isClockWise,s=this.subPaths;if(0===s.length)return[];let a,u,h;const m=[];if(1===s.length)return u=s[0],h=new sw,h.curves=u.curves,m.push(h),m;let w=!r(s[0].getPoints());w=t?!w:w;const T=[],O=[];let ue,ce,W=[],te=0;O[te]=void 0,W[te]=[];for(let Ne=0,et=s.length;Ne<et;Ne++)u=s[Ne],ue=u.getPoints(),a=r(ue),a=t?!a:a,a?(!w&&O[te]&&te++,O[te]={s:new sw,p:ue},O[te].s.curves=u.curves,w&&te++,W[te]=[]):W[te].push({h:u,p:ue[0]});if(!O[0])return function e(Ne){const et=[];for(let Je=0,at=Ne.length;Je<at;Je++){const kt=Ne[Je],Zt=new sw;Zt.curves=kt.curves,et.push(Zt)}return et}(s);if(O.length>1){let Ne=!1,et=0;for(let Je=0,at=O.length;Je<at;Je++)T[Je]=[];for(let Je=0,at=O.length;Je<at;Je++){const kt=W[Je];for(let Zt=0;Zt<kt.length;Zt++){const yn=kt[Zt];let zt=!0;for(let pn=0;pn<O.length;pn++)n(yn.p,O[pn].p)&&(Je!==pn&&et++,zt?(zt=!1,T[pn].push(yn)):Ne=!0);zt&&T[Je].push(yn)}}et>0&&!1===Ne&&(W=T)}for(let Ne=0,et=O.length;Ne<et;Ne++){h=O[Ne].s,m.push(h),ce=W[Ne];for(let Je=0,at=ce.length;Je<at;Je++)h.holes.push(ce[Je].h)}return m}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"146"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="146");var Oxe=ae(5570);class Fxe extends OH{constructor(t){super(t)}load(t,e,n,r){const s=this,a=new $_(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(u){const h=s.parse(JSON.parse(u));e&&e(h)},n,r)}parse(t){return new Nxe(t)}}class Nxe{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=function Bxe(i,t,e){const n=Array.from(i),r=t/e.resolution,s=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,a=[];let u=0,h=0;for(let m=0;m<n.length;m++){const w=n[m];if("\n"===w)u=0,h-=s;else{const T=zxe(w,r,u,h,e);T&&(u+=T.offsetX,a.push(T.path))}}return a}(t,e,this.data);for(let s=0,a=r.length;s<a;s++)n.push(...r[s].toShapes(!1));return n}}function zxe(i,t,e,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");const a=new Pxe;let u,h,m,w,T,O,W,te;if(s.o){const ue=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let ce=0,Ne=ue.length;ce<Ne;)switch(ue[ce++]){case"m":u=ue[ce++]*t+e,h=ue[ce++]*t+n,a.moveTo(u,h);break;case"l":u=ue[ce++]*t+e,h=ue[ce++]*t+n,a.lineTo(u,h);break;case"q":m=ue[ce++]*t+e,w=ue[ce++]*t+n,T=ue[ce++]*t+e,O=ue[ce++]*t+n,a.quadraticCurveTo(T,O,m,w);break;case"b":m=ue[ce++]*t+e,w=ue[ce++]*t+n,T=ue[ce++]*t+e,O=ue[ce++]*t+n,W=ue[ce++]*t+e,te=ue[ce++]*t+n,a.bezierCurveTo(T,O,W,te,m,w)}}return{offsetX:s.ha*t,path:a}}class Vxe extends FE{constructor(t,e={}){const n=e.font;if(void 0===n)super();else{const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e)}this.type="TextGeometry"}}const Uxe=["canvas"];let Hxe=(()=>{class i{constructor(e,n,r,s){this.graphsService=e,this.logger=n,this.store=r,this.route=s,this.rotationSpeedX=.05,this.rotationSpeedY=.01,this.size=200,this.frustumSize=600,this.texture="/assets/texture.jpg",this.cameraZ=1,this.fieldOfView=1,this.nearClippingPlane=150,this.farClippingPlane=1e3,this.scene=new X6,this.group=new JC,this.graph$=this.store.select(PI),this.subscriptions=[],this.subscriptions.push(this.graph$.subscribe(a=>{!a||(this.group.clear(),this.loadGraph(a,this.scene))}))}get canvas(){return this.canvasRef?.nativeElement}ngOnInit(){}ngAfterViewInit(){this.route.params.subscribe(e=>{this.id=e.label,this.clearScene(),this.startRenderingLoop();let n=this.graphsService.findOne(this.id+"");n&&this.store.dispatch(_x({graph:n}))})}ngOnDestroy(){this.subscriptions&&Br.each(this.subscriptions,e=>{e.unsubscribe()})}clearScene(){this.scene.add(this.group),this.camera=new Yd(45,this.getAspectRatio(),1,1e3),this.camera.position.set(0,15,35);let e=new zE({color:16711680,shininess:150,specular:2236962}),n=new Uy(1e3,.15,1e3);e=new zE({color:10530223,shininess:150,specular:1118481});const r=new Ef(n,e);r.scale.multiplyScalar(3),r.castShadow=!1,r.receiveShadow=!0,this.scene.add(r),this.scene.add(new HH(4210752));let s=new zH(4210752);s.name="Spot Light",s.angle=Math.PI/5,s.penumbra=.3,s.position.set(5,5,5),s.castShadow=!0,s.shadow.camera.near=8,s.shadow.camera.far=30,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,this.scene.add(s),this.scene.add(s.shadow.camera);let a=new UH(16777215,1);a.name="Dir. Light",a.position.set(0,10,0),a.castShadow=!0,a.shadow.camera.near=1,a.shadow.camera.far=10,a.shadow.camera.right=15,a.shadow.camera.left=-15,a.shadow.camera.top=15,a.shadow.camera.bottom=-15,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,this.scene.add(a),this.scene.add(a.shadow.camera)}getAspectRatio(){return this.canvas.clientWidth/this.canvas.clientHeight}loadGraph(e,n){let r={};if(e){this.logger.info("Load",e);let s=new Vn(1,0,0);Br.each(e.nodes,h=>{let m=new Uy(1,.1,1),w=new zE({color:16711680,shininess:150,specular:2236962}),T=new Ef(m,w);T.name=h.id,r[h.id]={x:h.x,y:h.y},T.position.set(h.x/50,2,h.y/50),T.castShadow=!0,T.receiveShadow=!0,n.add(T),this.group.add(T),(new Fxe).load("assets/fonts/helvetiker_regular.typeface.json",W=>{const te=new Vxe(h.label,{font:W,size:.3,height:.1,curveSegments:5,bevelEnabled:!1,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:0});te.computeBoundingBox(),te.boundingBox||new ky;let Ne=new Ef(te,w);Ne.position.set(h.x/50,2,h.y/50),Ne.rotateOnAxis(s,-Math.PI/2),n.add(Ne),this.group.add(Ne)})}),Br.each(e.edges,h=>{let m=r[h.source],w=r[h.target];const T=new Lp({color:255}),O=[];O.push(new Vn(m.x/50,2,m.y/50)),O.push(new Vn(w.x/50,2,w.y/50));const W=(new Jo).setFromPoints(O),te=new E1(W,T);n.add(te),this.group.add(te)});let u=(new ky).setFromObject(this.group).getSize(new Vn);this.group.translateX(-u.x/2),this.group.translateZ(-u.z/2),this.logger.info("Loaded",this.group.children.length,u)}}startRenderingLoop(){this.renderer=new q6({canvas:this.canvas}),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=0;let e=this;const n=new Oxe.OrbitControls(this.camera,this.renderer.domElement);n.autoRotate=!0,n.enableZoom=!0,n.enablePan=!1,n.minDistance=20,n.enableDamping=!0,n.dampingFactor=.2,n.enableKeys=!0,n.update(),function r(){requestAnimationFrame(r),e.renderer.render(e.scene,e.camera)}()}}return i.\u0275fac=function(e){return new(e||i)(Tn(Sx),Tn(qd),Tn(Gm),Tn(w_))},i.\u0275cmp=hs({type:i,selectors:[["app-threejs"]],viewQuery:function(e,n){if(1&e&&Rs(Uxe,5),2&e){let r;jr(r=$r())&&(n.canvasRef=r.first)}},inputs:{rotationSpeedX:"rotationSpeedX",rotationSpeedY:"rotationSpeedY",size:"size",frustumSize:"frustumSize",texture:"texture",cameraZ:"cameraZ",fieldOfView:"fieldOfView",nearClippingPlane:["nearClipping","nearClippingPlane"],farClippingPlane:["farClipping","farClippingPlane"]},decls:2,vars:0,consts:[["id","canvas",2,"height","100%","width","100%"],["canvas",""]],template:function(e,n){1&e&&Ri(0,"canvas",0,1)}}),i})();const Gxe=I0("styles"),Wxe=I0("style");function jxe(i,t){if(1&i){const e=vr();Pt(0,"span",12)(1,"input",13),si("ngModelChange",function(r){return gn(e),vn(Ze().newStyle=r)}),Nt(),Pt(2,"label",14),ur(3,"Name"),Nt(),Pt(4,"button",15),si("click",function(){gn(e);const r=Ze();return vn(r.openNew(r.newStyle))}),Nt()()}if(2&i){const e=Ze();tt(1),He("ngModel",e.newStyle)}}function $xe(i,t){}function qxe(i,t){1&i&&(Pt(0,"div",16)(1,"h5",17),ur(2,"Manage Styles"),Nt(),Pt(3,"span",18),Ri(4,"i",19)(5,"input",20),Nt()())}function Xxe(i,t){1&i&&(Pt(0,"tr")(1,"th",21),Ri(2,"p-tableHeaderCheckbox"),Nt(),Pt(3,"th",22),ur(4,"Label "),Ri(5,"p-sortIcon",23),Nt(),Pt(6,"th"),ur(7,"Action(s) "),Nt()())}function Yxe(i,t){if(1&i){const e=vr();Pt(0,"tr")(1,"td"),Ri(2,"p-tableCheckbox",24),Nt(),Pt(3,"td"),ur(4),Nt(),Pt(5,"td")(6,"button",25),si("click",function(){const s=gn(e).$implicit;return vn(Ze().selectStyle(s))}),Nt(),Pt(7,"span"),ur(8,"\xa0"),Nt(),Pt(9,"button",26),si("click",function(r){const a=gn(e).$implicit;return vn(Ze().confirm(r,a))}),Nt(),Pt(10,"span"),ur(11,"\xa0"),Nt()()()}if(2&i){const e=t.$implicit;tt(2),He("value",e),tt(2),ca(e.id)}}const Kxe=function(){return["label"]},Zxe=function(){return{width:"60vw",height:"50vw"}};let Qxe=(()=>{class i{constructor(e,n,r,s,a,u,h){this.router=e,this.logger=n,this.styleService=r,this.clipboardService=s,this.confirmationService=a,this.messageService=u,this.store=h,this.style=void 0,this.styles=[],this.displayStyle=!1,this.style$=this.store.select(Wxe),this.styles$=this.store.select(Gxe),this.style$.subscribe(m=>{!m||(this.style=m)}),this.styles$.subscribe(m=>{!m||(this.styles=Br.map(m,w=>({id:w.id,tags:w.tags})))})}ngOnInit(){let e=this.styleService.findAll();this.store.dispatch(Bx({styles:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteStyle(n)},reject:()=>{}})}selectStyle(e){this.selectedStyle=this.styleService.findOne(e.id),this.logger.info(this.selectedStyle),this.displayStyle=!0}deleteStyle(e){let n=this.styleService.delete(e.id);this.store.dispatch(Bx({styles:n}))}openNew(e){if(e){this.styleService.store({id:e,tags:[]},r=>{r.tags=[]});let n=this.styleService.findAll();this.logger.info(n),this.store.dispatch(Bx({styles:n}))}}onFileDropped(e){e[0].name.endsWith(".json")&&this.onFileStyleDropped(e)}onFileStyleDropped(e){var n=this;let r=e[0].name;this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${r}`});let s=new FileReader;s.addEventListener("loadend",A_(function*(){let a=JSON.parse(s.result+"");n.styleService.store({id:r,tags:a},h=>{h.tags=a});let u=n.styleService.findAll();n.store.dispatch(Bx({styles:u}))})),s.readAsText(e[0])}}return i.\u0275fac=function(e){return new(e||i)(Tn(Ph),Tn(qd),Tn(Lz),Tn(BI),Tn(hx),Tn(Hm),Tn(Gm))},i.\u0275cmp=hs({type:i,selectors:[["app-style-selector"]],decls:16,vars:18,consts:[["dropZoneDirective","",1,"card",3,"fileDropped"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["mystyles",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["position","bottom-center","key","bc"],["header","Drag and drop file to update style",3,"modal","visible","maximizable","draggable","resizable","visibleChange"],["dropZoneDirective","",3,"fileDropped"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","pRipple","","pTooltip","Select this style","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Remove this style","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(e,n){1&e&&(Pt(0,"div",0),si("fileDropped",function(s){return n.onFileDropped(s)}),Pt(1,"p-toolbar",1),At(2,jxe,5,1,"ng-template",2),At(3,$xe,0,0,"ng-template",3),Nt(),Ri(4,"p-toast"),Pt(5,"p-table",4,5),At(7,qxe,6,0,"ng-template",6),At(8,Xxe,8,0,"ng-template",7),At(9,Yxe,12,2,"ng-template",8),Nt()(),Ri(10,"p-confirmPopup")(11,"p-toast",9),Pt(12,"p-dialog",10),si("visibleChange",function(s){return n.displayStyle=s}),Pt(13,"pre",11),si("fileDropped",function(s){return n.onFileDropped(s)}),ur(14),function A3(i,t){const e=Na();let n;const r=i+22;e.firstCreatePass?(n=function ZW(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=Rp(n.type)),a=Wu(Tn);try{const u=rf(!1),h=s();return rf(u),function Z9(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,br(),r,h),h}finally{Wu(a)}}(15,"json"),Nt()()),2&e&&(tt(5),He("value",n.styles)("rows",10)("paginator",!0)("globalFilterFields",mo(16,Kxe))("rowHover",!0)("showCurrentPageReport",!0),tt(7),co(mo(17,Zxe)),He("modal",!0)("visible",n.displayStyle)("maximizable",!0)("draggable",!1)("resizable",!1),tt(2),ca(function I3(i,t,e){const n=i+22,r=br(),s=xu(r,n);return function Ww(i,t){return i[1].data[t].pure}(r,n)?y3(r,Yo(),t,s.transform,e,s):s.transform(e)}(15,14,n.selectedStyle)))},dependencies:[by,Kl,q2,X2,Y2,K2,k0,tS,Rv,Nx,vC,Q2,M0,D0,kv,J2,NS,KF]}),i})();function Jxe(i,t){}function e1e(i,t){}function t1e(i,t){1&i&&(Pt(0,"div",11)(1,"h5",12),ur(2,"Manage Rulesets"),Nt(),Pt(3,"span",13),Ri(4,"i",14)(5,"input",15),Nt()())}function n1e(i,t){1&i&&(Pt(0,"tr")(1,"th",16),Ri(2,"p-tableHeaderCheckbox"),Nt(),Pt(3,"th",17),ur(4,"Id "),Ri(5,"p-sortIcon",18),Nt(),Pt(6,"th",19),ur(7,"Type "),Ri(8,"p-sortIcon",20),Nt(),Pt(9,"th",21),ur(10,"Size "),Ri(11,"p-sortIcon",22),Nt(),Pt(12,"th"),ur(13,"Action(s) "),Nt()())}function i1e(i,t){if(1&i){const e=vr();Pt(0,"tr")(1,"td"),Ri(2,"p-tableCheckbox",23),Nt(),Pt(3,"td"),ur(4),Nt(),Pt(5,"td"),ur(6),Nt(),Pt(7,"td"),ur(8),Nt(),Pt(9,"td")(10,"button",24),si("click",function(r){const a=gn(e).$implicit;return vn(Ze().confirm(r,a))}),Nt(),Pt(11,"span"),ur(12,"\xa0"),Nt()()()}if(2&i){const e=t.$implicit;tt(2),He("value",e),tt(2),ca(e.id),tt(2),ca(e.type),tt(2),ca(e.size)}}const r1e=function(){return["label"]};let s1e=(()=>{class i{constructor(e,n,r,s,a){this.router=e,this.logger=n,this.messageService=r,this.confirmationService=s,this.rulesService=a,this.rules=this.rulesService.findAll()}ngOnInit(){}onFileDropped(e){var n=this;let r=e[0].name;this.logger.info("Load file",r);let s="";r.endsWith(".json")&&(s="json"),r.endsWith(".csv")&&(s="csv");let a=new FileReader;a.addEventListener("loadend",A_(function*(){n.messageService.add({key:"bc",severity:"info",summary:"Drop",detail:`Filename ${r}`}),n.logger.info("UPDATE",r,JSON.parse(a.result+"")),n.rulesService.load(r,JSON.parse(a.result+"")),n.logger.info("REFRESH"),n.rules=n.rulesService.findAll()})),a.readAsText(e[0])}select(e){this.router.navigate(["rules",e.id])}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.rules=this.rulesService.delete(n.id)},reject:()=>{}})}}return i.\u0275fac=function(e){return new(e||i)(Tn(Ph),Tn(qd),Tn(Hm),Tn(hx),Tn(Rz))},i.\u0275cmp=hs({type:i,selectors:[["app-rule-selector"]],decls:12,vars:7,consts:[["dropZoneDirective","",1,"card",3,"fileDropped"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["position","bottom-center","key","bc"],["position","left-center","key","lc"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["myDataset",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","id"],["field","id"],["pSortableColumn","type"],["field","type"],["pSortableColumn","size"],["field","size"],[3,"value"],["pButton","","pRipple","","pTooltip","Remove this rule","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(e,n){1&e&&(Pt(0,"div",0),si("fileDropped",function(s){return n.onFileDropped(s)}),Pt(1,"p-toolbar",1),At(2,Jxe,0,0,"ng-template",2),At(3,e1e,0,0,"ng-template",3),Nt(),Ri(4,"p-toast",4)(5,"p-toast",5),Pt(6,"p-table",6,7),At(8,t1e,6,0,"ng-template",8),At(9,n1e,14,0,"ng-template",9),At(10,i1e,13,4,"ng-template",10),Nt()(),Ri(11,"p-confirmPopup")),2&e&&(tt(6),He("value",n.rules)("rows",10)("paginator",!0)("globalFilterFields",mo(6,r1e))("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[by,Kl,q2,X2,Y2,K2,k0,Rv,Nx,vC,Q2,J2,NS]}),i})();var Fh=ae(8946),QE=ae(2956);const a1e=["canvas"],o1e=[{path:"graphs",component:Wae},{path:"graphs/sigma/:label",component:Jae},{path:"graphs/cytoscape/:label",component:ove},{path:"graphs/paper/:label",component:(()=>{class i{constructor(e,n,r,s,a,u,h){this.graphsService=e,this.router=n,this.logger=r,this.messageService=s,this.base16=a,this.store=u,this.route=h,this.oldZoom=1,this.zoom=1,this.subscriptions=[],this.graph$=this.store.select(PI),this.parameter$=this.store.select(tP),this.scope=new Fh.PaperScope,this.subscriptions.push(this.parameter$.subscribe(T=>{T.zoom&&(console.log(T.zoom),this.setZoom(T.zoom))})),this.subscriptions.push(this.graph$.subscribe(T=>{if(!T||!this.project)return;this.project.activeLayer.removeChildren();let O={},W=Br.map(T.nodes,ce=>{let Ne={data:{id:ce.id,label:ce.label,tag:ce.tag},position:{x:ce.x,y:ce.y}};return O[ce.id]=Ne,Ne}),te={},ue=Br.map(T.edges,ce=>({data:{id:this.base16.encode(this.graphsService.buildId(te,{source:this.base16.decode(ce.source),target:this.base16.decode(ce.target)})),label:ce.label,source:ce.source,target:ce.target,_source:a.decode(ce.source||""),_target:a.decode(ce.target||""),tag:ce.tag}}));this.drawAxis(),this.drawGrid(100,100,2,1),Br.each(W,ce=>{new this.scope.Path.Circle({center:[ce.position.x/2,ce.position.y/2],radius:10,fillColor:"red",strokeColor:"black"}),new this.scope.PointText({content:`${ce.position.x} x ${ce.position.y}`,point:new QE.Point(ce.position.x/2+15,ce.position.y/2-15),strokeWidth:.01,fillColor:"red",strokeColor:"black"})}),Br.each(ue,ce=>{let Ne=O[ce.data.source],et=O[ce.data.target];new this.scope.Path.Line(new QE.Point(Ne.position.x/2,Ne.position.y/2),new QE.Point(et.position.x/2,et.position.y/2)).strokeColor=new QE.Color("black")}),this.scope.project.activeLayer.fitBounds(this.scope.view.bounds)}));let w,m=new Fh.Tool;m.onMouseDown=T=>{!0===T.event.shiftKey&&(w=T.point)},m.onMouseUp=T=>{if(console.log(T),w){let O=new Fh.Rectangle([w.x,w.y],[500,500]);console.log(O),this.scope.project.activeLayer.fitBounds(O)}w=void 0},m.onMouseDrag=T=>{if(!1===T.event.shiftKey){let O=T.point.subtract(T.downPoint);this.scope.view.center=this.scope.view.center.subtract(O)}}}ngOnInit(){}ngAfterViewInit(){this.route.params.subscribe(e=>{this.project=new Fh.Project(this.canvasRef?.nativeElement),this.project.activate(),this.scope.setup(this.canvasRef?.nativeElement),this.project.view.scale(this.zoom,this.zoom),this.id=e.label;let s=this.graphsService.findOne(this.id+"");s&&this.store.dispatch(_x({graph:s}))})}zoomTo(e){const n=this.project.view;n.center=e.center,n.zoom=Math.min(n.viewSize.height/e.height,n.viewSize.width/e.width)}setZoom(e){this.scope.view.scale(1/this.oldZoom,1/this.oldZoom),this.scope.view.scale(2*e,2*e),this.oldZoom=e,this.zoom=e;const n=this.canvasRef?.nativeElement.offsetHeight,r=this.canvasRef?.nativeElement.offsetWidth;this.scope.view.center=new Fh.Point(r/2,n/2)}drawAxis(){let e=new this.scope.Path;e.closed=!0,e.add([0,0],[100,0],[100,-5],[120,0],[100,5],[100,0]),e.strokeColor="red";let n=new this.scope.Path;n.closed=!0,n.add([0,0],[0,100],[-5,100],[0,120],[5,100],[0,100]),n.strokeColor="blue"}drawGrid(e,n,r,s){new Fh.Path.Rectangle(new Fh.Point(0,0),new Fh.Point(e,n)),new Fh.Path.Line({from:new Fh.Point(0,-n),to:new Fh.Point(0,n),strokeColor:"red",strokeWidth:1}),new Fh.Path.Line({from:new Fh.Point(-e,0),to:new Fh.Point(e,0),strokeColor:"blue",strokeWidth:1});for(let m=-e;m<e;m+=s)new Fh.Path.Line({from:new Fh.Point(m,0),to:new Fh.Point(m,n),strokeColor:"lightblue",strokeWidth:m%r==0?.2:.1});for(let m=-n;m<n;m+=s)new Fh.Path.Line({from:new Fh.Point(0,m),to:new Fh.Point(n,m),strokeColor:"lightblue",strokeWidth:m%r==0?.2:.1})}}return i.\u0275fac=function(e){return new(e||i)(Tn(Sx),Tn(Ph),Tn(qd),Tn(Hm),Tn(NI),Tn(Gm),Tn(w_))},i.\u0275cmp=hs({type:i,selectors:[["app-graph-paper"]],viewQuery:function(e,n){if(1&e&&Rs(a1e,5),2&e){let r;jr(r=$r())&&(n.canvasRef=r.first)}},decls:4,vars:0,consts:[["id","myCanvas","resize","",2,"height","800px","width","1024px"],["canvas",""]],template:function(e,n){1&e&&(Pt(0,"p"),ur(1,"graph-paper works!"),Nt(),Ri(2,"canvas",0,1))},styles:["canvas[resize][_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})()},{path:"graphs/threejs/:label",component:Hxe},{path:"rules",component:s1e},{path:"styles",component:Qxe},{path:"converters/images",component:fve},{path:"preferences",component:vve},{path:"about",component:yve}];let l1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[vy.forRoot(o1e,{useHash:!0}),vy]}),i})(),u1e=(()=>{class i{constructor(e){this.store=e}dispatch(e){this.store.dispatch(nP({message:{id:e}})),this.store.dispatch(nP({message:{id:Tu.default}}))}}return i.\u0275fac=function(e){return new(e||i)(ji(Gm))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const c1e=["sliderHandle"],h1e=["sliderHandleStart"],d1e=["sliderHandleEnd"],f1e=function(i,t){return{left:i,width:t}};function p1e(i,t){if(1&i&&Ri(0,"span",4),2&i){const e=Ze();He("ngStyle",fa(1,f1e,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const g1e=function(i,t){return{bottom:i,height:t}};function m1e(i,t){if(1&i&&Ri(0,"span",4),2&i){const e=Ze();He("ngStyle",fa(1,g1e,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const v1e=function(i){return{height:i}};function _1e(i,t){if(1&i&&Ri(0,"span",4),2&i){const e=Ze();He("ngStyle",yr(1,v1e,e.handleValue+"%"))}}const y1e=function(i){return{width:i}};function b1e(i,t){if(1&i&&Ri(0,"span",4),2&i){const e=Ze();He("ngStyle",yr(1,y1e,e.handleValue+"%"))}}const Tk=function(i,t){return{left:i,bottom:t}};function C1e(i,t){if(1&i){const e=vr();Pt(0,"span",5,6),si("keydown",function(r){return gn(e),vn(Ze().onHandleKeydown(r))})("mousedown",function(r){return gn(e),vn(Ze().onMouseDown(r))})("touchstart",function(r){return gn(e),vn(Ze().onTouchStart(r))})("touchmove",function(r){return gn(e),vn(Ze().onTouchMove(r))})("touchend",function(r){return gn(e),vn(Ze().onTouchEnd(r))}),Nt()}if(2&i){const e=Ze();bf("transition",e.dragging?"none":null),He("ngStyle",fa(8,Tk,"horizontal"==e.orientation?e.handleValue+"%":null,"vertical"==e.orientation?e.handleValue+"%":null)),xs("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const uG=function(i){return{"p-slider-handle-active":i}};function w1e(i,t){if(1&i){const e=vr();Pt(0,"span",7,8),si("keydown",function(r){return gn(e),vn(Ze().onHandleKeydown(r,0))})("mousedown",function(r){return gn(e),vn(Ze().onMouseDown(r,0))})("touchstart",function(r){return gn(e),vn(Ze().onTouchStart(r,0))})("touchmove",function(r){return gn(e),vn(Ze().onTouchMove(r,0))})("touchend",function(r){return gn(e),vn(Ze().onTouchEnd(r))}),Nt()}if(2&i){const e=Ze();bf("transition",e.dragging?"none":null),He("ngStyle",fa(9,Tk,e.rangeStartLeft,e.rangeStartBottom))("ngClass",yr(12,uG,0==e.handleIndex)),xs("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[0]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}function x1e(i,t){if(1&i){const e=vr();Pt(0,"span",7,9),si("keydown",function(r){return gn(e),vn(Ze().onHandleKeydown(r,1))})("mousedown",function(r){return gn(e),vn(Ze().onMouseDown(r,1))})("touchstart",function(r){return gn(e),vn(Ze().onTouchStart(r,1))})("touchmove",function(r){return gn(e),vn(Ze().onTouchMove(r,1))})("touchend",function(r){return gn(e),vn(Ze().onTouchEnd(r))}),Nt()}if(2&i){const e=Ze();bf("transition",e.dragging?"none":null),He("ngStyle",fa(9,Tk,e.rangeEndLeft,e.rangeEndBottom))("ngClass",yr(12,uG,1==e.handleIndex)),xs("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[1]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const A1e=function(i,t,e,n){return{"p-slider p-component":!0,"p-disabled":i,"p-slider-horizontal":t,"p-slider-vertical":e,"p-slider-animate":n}},I1e={provide:Mc,useExisting:Xr(()=>cG),multi:!0};let cG=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.ngZone=r,this.cd=s,this.min=0,this.max=100,this.orientation="horizontal",this.tabindex=0,this.onChange=new ki,this.onSlideEnd=new ki,this.handleValues=[],this.onModelChange=()=>{},this.onModelTouched=()=>{},this.handleIndex=0}onMouseDown(e,n){this.disabled||(this.dragging=!0,this.updateDomData(),this.sliderHandleClick=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,this.bindDragListeners(),e.target.focus(),e.preventDefault(),this.animate&&bn.removeClass(this.el.nativeElement.children[0],"p-slider-animate"))}onTouchStart(e,n){if(!this.disabled){var r=e.changedTouches[0];this.startHandleValue=this.range?this.handleValues[n]:this.handleValue,this.dragging=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,"horizontal"===this.orientation?(this.startx=parseInt(r.clientX,10),this.barWidth=this.el.nativeElement.children[0].offsetWidth):(this.starty=parseInt(r.clientY,10),this.barHeight=this.el.nativeElement.children[0].offsetHeight),this.animate&&bn.removeClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault()}}onTouchMove(e,n){if(!this.disabled){var s,r=e.changedTouches[0];s="horizontal"===this.orientation?Math.floor(100*(parseInt(r.clientX,10)-this.startx)/this.barWidth)+this.startHandleValue:Math.floor(100*(this.starty-parseInt(r.clientY,10))/this.barHeight)+this.startHandleValue,this.setValueFromHandle(e,s),e.preventDefault()}}onTouchEnd(e,n){this.disabled||(this.dragging=!1,this.onSlideEnd.emit(this.range?{originalEvent:e,values:this.values}:{originalEvent:e,value:this.value}),this.animate&&bn.addClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault())}onBarClick(e){this.disabled||(this.sliderHandleClick||(this.updateDomData(),this.handleChange(e)),this.sliderHandleClick=!1)}onHandleKeydown(e,n){this.disabled||(38==e.which||39==e.which?this.spin(e,1,n):(37==e.which||40==e.which)&&this.spin(e,-1,n))}spin(e,n,r){let s=(this.step||1)*n;this.range?(this.handleIndex=r,this.updateValue(this.values[this.handleIndex]+s),this.updateHandleValue()):(this.updateValue(this.value+s),this.updateHandleValue()),e.preventDefault()}handleChange(e){let n=this.calculateHandleValue(e);this.setValueFromHandle(e,n)}bindDragListeners(){this.ngZone.runOutsideAngular(()=>{const e=this.el?this.el.nativeElement.ownerDocument:"document";this.dragListener||(this.dragListener=this.renderer.listen(e,"mousemove",n=>{this.dragging&&this.ngZone.run(()=>{this.handleChange(n)})})),this.mouseupListener||(this.mouseupListener=this.renderer.listen(e,"mouseup",n=>{this.dragging&&(this.dragging=!1,this.ngZone.run(()=>{this.onSlideEnd.emit(this.range?{originalEvent:n,values:this.values}:{originalEvent:n,value:this.value}),this.animate&&bn.addClass(this.el.nativeElement.children[0],"p-slider-animate")}))}))})}unbindDragListeners(){this.dragListener&&this.dragListener(),this.mouseupListener&&this.mouseupListener()}setValueFromHandle(e,n){this.sliderHandleClick=!1;let r=this.getValueFromHandle(n);this.range?this.step?this.handleStepChange(r,this.values[this.handleIndex]):(this.handleValues[this.handleIndex]=n,this.updateValue(r,e)):this.step?this.handleStepChange(r,this.value):(this.handleValue=n,this.updateValue(r,e)),this.cd.markForCheck()}handleStepChange(e,n){let r=e-n,s=n;r<0?s=n+Math.ceil(e/this.step-n/this.step)*this.step:r>0&&(s=n+Math.floor(e/this.step-n/this.step)*this.step),this.updateValue(s),this.updateHandleValue()}writeValue(e){this.range?this.values=e||[0,0]:this.value=e||0,this.updateHandleValue(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get rangeStartLeft(){return this.isVertical()?null:this.handleValues[0]+"%"}get rangeStartBottom(){return this.isVertical()?this.handleValues[0]+"%":"auto"}get rangeEndLeft(){return this.isVertical()?null:this.handleValues[1]+"%"}get rangeEndBottom(){return this.isVertical()?this.handleValues[1]+"%":"auto"}isVertical(){return"vertical"===this.orientation}updateDomData(){let e=this.el.nativeElement.children[0].getBoundingClientRect();this.initX=e.left+bn.getWindowScrollLeft(),this.initY=e.top+bn.getWindowScrollTop(),this.barWidth=this.el.nativeElement.children[0].offsetWidth,this.barHeight=this.el.nativeElement.children[0].offsetHeight}calculateHandleValue(e){return"horizontal"===this.orientation?100*(e.pageX-this.initX)/this.barWidth:100*(this.initY+this.barHeight-e.pageY)/this.barHeight}updateHandleValue(){this.range?(this.handleValues[0]=100*(this.values[0]<this.min?0:this.values[0]-this.min)/(this.max-this.min),this.handleValues[1]=100*(this.values[1]>this.max?100:this.values[1]-this.min)/(this.max-this.min)):this.handleValue=this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)}updateValue(e,n){if(this.range){let r=e;0==this.handleIndex?(r<this.min?(r=this.min,this.handleValues[0]=0):r>this.values[1]&&(r>this.max&&(r=this.max,this.handleValues[0]=100),this.handleValues[0]=r),this.sliderHandleStart.nativeElement.focus()):(r>this.max?(r=this.max,this.handleValues[1]=100,this.offset=this.handleValues[1]):r<this.min?(r=this.min,this.handleValues[1]=r):r<this.values[0]&&(this.offset=this.handleValues[1]),this.sliderHandleEnd.nativeElement.focus()),this.diff=Math.abs(this.handleValues[0]-this.handleValues[1]),this.offset=Math.min(this.handleValues[0],this.handleValues[1]),this.values[this.handleIndex]=this.getNormalizedValue(r),this.onModelChange([this.minVal,this.maxVal]),this.onChange.emit({event:n,values:this.values})}else e<this.min?(e=this.min,this.handleValue=0):e>this.max&&(e=this.max,this.handleValue=100),this.value=this.getNormalizedValue(e),this.onModelChange(this.value),this.onChange.emit({event:n,value:this.value}),this.sliderHandle.nativeElement.focus()}getValueFromHandle(e){return e/100*(this.max-this.min)+this.min}getDecimalsCount(e){return e&&Math.floor(e)!==e&&e.toString().split(".")[1].length||0}getNormalizedValue(e){let n=this.getDecimalsCount(this.step);return n>0?+e.toFixed(n):Math.floor(e)}ngOnDestroy(){this.unbindDragListeners()}get minVal(){return Math.min(this.values[1],this.values[0])}get maxVal(){return Math.max(this.values[1],this.values[0])}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(p),Tn(Zo),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-slider"]],viewQuery:function(e,n){if(1&e&&(Rs(c1e,5),Rs(h1e,5),Rs(d1e,5)),2&e){let r;jr(r=$r())&&(n.sliderHandle=r.first),jr(r=$r())&&(n.sliderHandleStart=r.first),jr(r=$r())&&(n.sliderHandleEnd=r.first)}},hostAttrs:[1,"p-element"],inputs:{animate:"animate",disabled:"disabled",min:"min",max:"max",orientation:"orientation",step:"step",range:"range",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex"},outputs:{onChange:"onChange",onSlideEnd:"onSlideEnd"},features:[Ro([I1e])],decls:8,vars:16,consts:[[3,"ngStyle","ngClass","click"],["class","p-slider-range",3,"ngStyle",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],[1,"p-slider-range",3,"ngStyle"],[1,"p-slider-handle",3,"ngStyle","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandle",""],[1,"p-slider-handle",3,"ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandleStart",""],["sliderHandleEnd",""]],template:function(e,n){1&e&&(Pt(0,"div",0),si("click",function(s){return n.onBarClick(s)}),At(1,p1e,1,4,"span",1),At(2,m1e,1,4,"span",1),At(3,_1e,1,3,"span",1),At(4,b1e,1,3,"span",1),At(5,C1e,2,11,"span",2),At(6,w1e,2,14,"span",3),At(7,x1e,2,14,"span",3),Nt()),2&e&&(Us(n.styleClass),He("ngStyle",n.style)("ngClass",ep(11,A1e,n.disabled,"horizontal"==n.orientation,"vertical"==n.orientation,n.animate)),tt(1),He("ngIf",n.range&&"horizontal"==n.orientation),tt(1),He("ngIf",n.range&&"vertical"==n.orientation),tt(1),He("ngIf",!n.range&&"vertical"==n.orientation),tt(1),He("ngIf",!n.range&&"horizontal"==n.orientation),tt(1),He("ngIf",!n.range),tt(1),He("ngIf",n.range),tt(1),He("ngIf",n.range))},dependencies:[vo,wo,Ho],styles:[".p-slider{position:relative}.p-slider .p-slider-handle{position:absolute;cursor:grab;touch-action:none;display:block}.p-slider-range{position:absolute;display:block}.p-slider-horizontal .p-slider-range{top:0;left:0;height:100%}.p-slider-horizontal .p-slider-handle{top:50%}.p-slider-vertical{height:100px}.p-slider-vertical .p-slider-handle{left:50%}.p-slider-vertical .p-slider-range{bottom:0;left:0;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),S1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();const E1e=function(i){return{"p-hidden":i}};function T1e(i,t){if(1&i&&Ri(0,"li",4),2&i){const e=Ze().$implicit;He("ngClass",yr(1,E1e,!1===e.visible))}}function M1e(i,t){if(1&i&&Ri(0,"span",16),2&i){const e=Ze(3).$implicit;He("ngClass",e.icon)("ngStyle",e.iconStyle)}}function D1e(i,t){if(1&i&&(Pt(0,"span",17),ur(1),Nt()),2&i){const e=Ze(3).$implicit;tt(1),ca(e.label)}}function P1e(i,t){1&i&&Ri(0,"span",18),2&i&&He("innerHTML",Ze(3).$implicit.label,zl)}function L1e(i,t){if(1&i&&(Pt(0,"span",19),ur(1),Nt()),2&i){const e=Ze(3).$implicit;He("ngClass",e.badgeStyleClass),tt(1),ca(e.badge)}}const hG=function(i,t){return{"pi-angle-down":i,"pi-angle-right":t}};function k1e(i,t){if(1&i&&Ri(0,"span",20),2&i){const e=Ze(4);He("ngClass",fa(1,hG,e.root,!e.root))}}const dG=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function R1e(i,t){if(1&i){const e=vr();Pt(0,"a",10),si("click",function(r){gn(e);const s=Ze(2).$implicit;return vn(Ze().onItemClick(r,s))})("mouseenter",function(r){gn(e);const s=Ze(2).$implicit;return vn(Ze().onItemMouseEnter(r,s))}),At(1,M1e,1,2,"span",11),At(2,D1e,2,1,"span",12),At(3,P1e,1,1,"ng-template",null,13,hc),At(5,L1e,2,2,"span",14),At(6,k1e,1,4,"span",15),Nt()}if(2&i){const e=_o(4),n=Ze(2).$implicit,r=Ze();He("target",n.target)("ngClass",yr(14,dG,n.disabled)),xs("href",n.url,Hd)("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0")("aria-haspopup",null!=r.item.items)("aria-expanded",r.item===r.activeItem),tt(1),He("ngIf",n.icon),tt(1),He("ngIf",!1!==n.escape)("ngIfElse",e),tt(3),He("ngIf",n.badge),tt(1),He("ngIf",n.items)}}function O1e(i,t){if(1&i&&Ri(0,"span",16),2&i){const e=Ze(3).$implicit;He("ngClass",e.icon)("ngStyle",e.iconStyle)}}function F1e(i,t){if(1&i&&(Pt(0,"span",17),ur(1),Nt()),2&i){const e=Ze(3).$implicit;tt(1),ca(e.label)}}function N1e(i,t){1&i&&Ri(0,"span",18),2&i&&He("innerHTML",Ze(3).$implicit.label,zl)}function B1e(i,t){if(1&i&&(Pt(0,"span",19),ur(1),Nt()),2&i){const e=Ze(3).$implicit;He("ngClass",e.badgeStyleClass),tt(1),ca(e.badge)}}function z1e(i,t){if(1&i&&Ri(0,"span",20),2&i){const e=Ze(4);He("ngClass",fa(1,hG,e.root,!e.root))}}const V1e=function(){return{exact:!1}};function U1e(i,t){if(1&i){const e=vr();Pt(0,"a",21),si("click",function(r){gn(e);const s=Ze(2).$implicit;return vn(Ze().onItemClick(r,s))})("mouseenter",function(r){gn(e);const s=Ze(2).$implicit;return vn(Ze().onItemMouseEnter(r,s))}),At(1,O1e,1,2,"span",11),At(2,F1e,2,1,"span",12),At(3,N1e,1,1,"ng-template",null,22,hc),At(5,B1e,2,2,"span",14),At(6,z1e,1,4,"span",15),Nt()}if(2&i){const e=_o(4),n=Ze(2).$implicit;He("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||mo(21,V1e))("target",n.target)("ngClass",yr(22,dG,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),xs("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),tt(1),He("ngIf",n.icon),tt(1),He("ngIf",!1!==n.escape)("ngIfElse",e),tt(3),He("ngIf",n.badge),tt(1),He("ngIf",n.items)}}function H1e(i,t){if(1&i){const e=vr();Pt(0,"p-menubarSub",23),si("leafClick",function(){return gn(e),vn(Ze(3).onLeafClick())}),Nt()}if(2&i){const e=Ze(2).$implicit,n=Ze();He("parentActive",e===n.activeItem)("item",e)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay)}}const G1e=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function W1e(i,t){if(1&i&&(Pt(0,"li",5,6),At(2,R1e,7,16,"a",7),At(3,U1e,7,24,"a",8),At(4,H1e,1,4,"p-menubarSub",9),Nt()),2&i){const e=Ze().$implicit,n=Ze();Us(e.styleClass),He("ngClass",fa(8,G1e,e===n.activeItem,!1===e.visible))("ngStyle",e.style)("tooltipOptions",e.tooltipOptions),tt(2),He("ngIf",!e.routerLink),tt(1),He("ngIf",e.routerLink),tt(1),He("ngIf",e.items)}}function j1e(i,t){if(1&i&&(At(0,T1e,1,3,"li",2),At(1,W1e,5,11,"li",3)),2&i){const e=t.$implicit;He("ngIf",e.separator),tt(1),He("ngIf",!e.separator)}}const $1e=function(i,t){return{"p-submenu-list":i,"p-menubar-root-list":t}},q1e=["menubutton"],X1e=["rootmenu"];function Y1e(i,t){1&i&&Nr(0)}function K1e(i,t){if(1&i&&(Pt(0,"div",9),At(1,Y1e,1,0,"ng-container",10),Nt()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.startTemplate)}}function Z1e(i,t){1&i&&Nr(0)}function Q1e(i,t){if(1&i&&(Pt(0,"div",11),At(1,Z1e,1,0,"ng-container",10),Nt()),2&i){const e=Ze();tt(1),He("ngTemplateOutlet",e.endTemplate)}}function J1e(i,t){1&i&&(Pt(0,"div",11),ch(1),Nt())}const eAe=function(i){return{"p-menubar p-component":!0,"p-menubar-mobile-active":i}},tAe=["*"];let nAe=(()=>{class i{constructor(e,n,r){this.el=e,this.renderer=n,this.cd=r,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new ki,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(e){this.root||(this._parentActive=e,e||(this.activeItem=null))}onItemClick(e,n){n.disabled?e.preventDefault():(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items&&(this.activeItem&&n===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=n,this.root&&this.bindDocumentClickListener())),n.items||this.onLeafClick())}onItemMouseEnter(e,n){n.disabled||this.mobileActive?e.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=n,this.bindDocumentClickListener()):(this.activeItem=n,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=e=>{this.el&&!this.el.nativeElement.contains(e.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))}unbindDocumentClickListener(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)}ngOnDestroy(){this.unbindDocumentClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(p),Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(e,n){1&e&&(Pt(0,"ul",0),At(1,j1e,2,2,"ng-template",1),Nt()),2&e&&(He("ngClass",fa(3,$1e,!n.root,n.root)),xs("role",n.root?"menubar":"menu"),tt(1),He("ngForOf",n.root?n.item:n.item.items))},dependencies:[vo,Ec,wo,Ho,dC,QD,kh,Rv,i],encapsulation:2}),i})(),iAe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.cd=r,this.config=s,this.autoZIndex=!0,this.baseZIndex=0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template}})}toggle(e){this.mobileActive?(this.hide(),Vu.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,Vu.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),e.preventDefault()}bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.mobileActive&&this.rootmenu.el.nativeElement!==e.target&&!this.rootmenu.el.nativeElement.contains(e.target)&&this.menubutton.nativeElement!==e.target&&!this.menubutton.nativeElement.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))}hide(){this.mobileActive=!1,this.cd.markForCheck(),Vu.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}ngOnDestroy(){this.unbindOutsideClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(p),Tn(Oo),Tn(og))},i.\u0275cmp=hs({type:i,selectors:[["p-menubar"]],contentQueries:function(e,n,r){if(1&e&&Yl(r,Kl,4),2&e){let s;jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(q1e,5),Rs(X1e,5)),2&e){let r;jr(r=$r())&&(n.menubutton=r.first),jr(r=$r())&&(n.rootmenu=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay"},ngContentSelectors:tAe,decls:10,vars:14,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],[1,"p-menubar-end"]],template:function(e,n){if(1&e&&(Ep(),Pt(0,"div",0),At(1,K1e,2,1,"div",1),Pt(2,"a",2,3),si("click",function(s){return n.toggle(s)}),Ri(4,"i",4),Nt(),Pt(5,"p-menubarSub",5,6),si("leafClick",function(){return n.onLeafClick()}),Nt(),At(7,Q1e,2,1,"div",7),At(8,J1e,2,0,"ng-template",null,8,hc),Nt()),2&e){const r=_o(9);Us(n.styleClass),He("ngClass",yr(12,eAe,n.mobileActive))("ngStyle",n.style),tt(1),He("ngIf",n.startTemplate),tt(4),He("item",n.model)("baseZIndex",n.baseZIndex)("autoZIndex",n.autoZIndex)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay),tt(2),He("ngIf",n.endTemplate)("ngIfElse",r)}},dependencies:[vo,wo,hu,Ho,nAe],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:1}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),i})(),rAe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,vy,Pc,Ov,Pl,vy,Ov,Pl]}),i})();function sAe(i,t){1&i&&Ri(0,"img",3)}const aAe=function(){return{width:"100px"}};function oAe(i,t){if(1&i){const e=vr();Pt(0,"div",4)(1,"div")(2,"label"),ur(3),Nt()(),ur(4," \xa0 \xa0 \xa0 "),Pt(5,"div")(6,"p-slider",5),si("ngModelChange",function(r){return gn(e),vn(Ze().zoom=r)})("onChange",function(r){return gn(e),vn(Ze().onChangeZoom(r))}),Nt()(),ur(7," \xa0 \xa0 \xa0 "),Pt(8,"div")(9,"p-checkbox",6),si("ngModelChange",function(r){return gn(e),vn(Ze().drawMode=r)})("onChange",function(r){return gn(e),vn(Ze().onChangeDrawMode(r))}),Nt(),Pt(10,"label",7),ur(11,"\xa0Draw\xa0"),Nt()(),ur(12," \xa0 "),Pt(13,"div")(14,"p-checkbox",8),si("ngModelChange",function(r){return gn(e),vn(Ze().groupMode=r)})("onChange",function(r){return gn(e),vn(Ze().onChangeGroupMode(r))}),Nt(),Pt(15,"label",9),ur(16,"\xa0Group\xa0"),Nt()()()}if(2&i){const e=Ze();tt(3),cc("Zoom: ",e.zoom,""),tt(3),co(mo(11,aAe)),He("ngModel",e.zoom)("min",.1)("max",5)("step",.1),tt(3),He("ngModel",e.drawMode)("binary",!0),tt(5),He("ngModel",e.groupMode)("binary",!0)}}let lAe=(()=>{class i{constructor(e,n,r){this.title=e,this.menuService=n,this.store=r,this.items=[],this.subscriptions=[],this.zoom=1,this.drawMode=!1,this.groupMode=!1,this.menu$=this.store.select(Pz),this.parameter$=this.store.select(tP),this.title.setTitle("MySystem 1.2.4"),this.subscriptions.push(this.parameter$.subscribe(s=>{this.drawMode=s.drawMode,this.groupMode=s.groupMode,this.zoom=s.zoom}))}ngOnInit(){this.items=[{label:"Graph",icon:"pi pi-fw pi-box",items:[{label:"Graph(s)",icon:"pi pi-fw pi-book",routerLink:"/graphs"},{label:"Apply",icon:"pi pi-sitemap",items:[{label:"Apply rules",icon:"pi pi-map",command:()=>{this.menuService.dispatch(Tu.graph_apply_rules)}},{label:"Apply properties",icon:"pi pi-wallet",command:()=>{this.menuService.dispatch(Tu.graph_change_properties)}},{label:"Add new node",icon:"pi pi-plus",command:()=>{this.menuService.dispatch(Tu.graph_add_new_node)}}]},{label:"Graph",icon:"pi pi-sitemap",items:[{label:"Bread First Layout",icon:"pi pi-ellipsis-h",command:()=>{this.menuService.dispatch(Tu.graph_layout_bread_first)}},{label:"Concentric Layout",icon:"pi pi-ellipsis-h",command:()=>{this.menuService.dispatch(Tu.graph_layout_concentric)}},{label:"Circle Layout",icon:"pi pi-ellipsis-h",command:()=>{this.menuService.dispatch(Tu.graph_layout_circle)}},{label:"Grid Layout",icon:"pi pi-ellipsis-h",command:()=>{this.menuService.dispatch(Tu.graph_layout_grid)}},{label:"Cose Layout",icon:"pi pi-ellipsis-h",command:()=>{this.menuService.dispatch(Tu.graph_layout_cose)}}]}]},{label:"Rule",icon:"pi pi-fw pi-box",items:[{label:"Rule(s)",icon:"pi pi-fw pi-book",routerLink:"/rules"}]},{label:"Style",icon:"pi pi-fw pi-box",items:[{label:"Style(s)",icon:"pi pi-fw pi-book",routerLink:"/styles"}]},{label:"Misc",icon:"pi pi-fw pi-cog",items:[{label:"Preferences",icon:"pi pi-fw pi-database",routerLink:"/preferences"},{label:"Images",icon:"pi pi-fw pi-cloud-upload",routerLink:"/converters/images"},{label:"About",icon:"pi pi-fw pi-at",routerLink:"/about"}]},{label:"Statistics",icon:"pi pi-chart-pie",items:[{label:"Groups",icon:"pi pi-chart-pie",command:()=>{this.menuService.dispatch(Tu.statistics_groups)}},{label:"Tags",icon:"pi pi-chart-pie",command:()=>{this.menuService.dispatch(Tu.statistics_tags)}},{label:"Summary",icon:"pi pi-chart-pie",command:()=>{this.menuService.dispatch(Tu.statistics_summary)}}]}]}onChangeZoom(e){this.store.dispatch(sP({message:this.zoom}))}onChangeDrawMode(e){this.store.dispatch(iP({message:this.drawMode}))}onChangeGroupMode(e){this.store.dispatch(rP({message:this.groupMode}))}ngOnDestroy(){this.subscriptions&&Br.each(this.subscriptions,e=>{e.unsubscribe()})}}return i.\u0275fac=function(e){return new(e||i)(Tn(fD),Tn(u1e),Tn(Gm))},i.\u0275cmp=hs({type:i,selectors:[["app-root"]],decls:4,vars:1,consts:[[3,"model"],["pTemplate","start"],["pTemplate","end"],["src","assets/favicon.png","height","40",1,"mr-2"],[1,"grid-inputgroup"],[3,"ngModel","min","max","step","ngModelChange","onChange"],["inputId","draw",3,"ngModel","binary","ngModelChange","onChange"],["for","draw"],["inputId","group",3,"ngModel","binary","ngModelChange","onChange"],["for","group"]],template:function(e,n){1&e&&(Pt(0,"p-menubar",0),At(1,sAe,1,0,"ng-template",1),At(2,oAe,17,12,"ng-template",2),Nt(),Ri(3,"router-outlet")),2&e&&He("model",n.items)},dependencies:[VD,Kl,cG,iAe,D0,kv,oP],styles:[".grid-inputgroup[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),i})();function fG(i){return new Qi(3e3,!1)}function GAe(){return typeof window<"u"&&typeof window.document<"u"}function Mk(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Wy(i){switch(i.length){case 0:return new Px;case 1:return i[0];default:return new iz(i)}}function pG(i,t,e,n,r=new Map,s=new Map){const a=[],u=[];let h=-1,m=null;if(n.forEach(w=>{const T=w.get("offset"),O=T==h,W=O&&m||new Map;w.forEach((te,ue)=>{let ce=ue,Ne=te;if("offset"!==ue)switch(ce=t.normalizePropertyName(ce,a),Ne){case"!":Ne=r.get(ue);break;case T_:Ne=s.get(ue);break;default:Ne=t.normalizeStyleValue(ue,ce,Ne,a)}W.set(ce,Ne)}),O||u.push(W),m=W,h=T}),a.length)throw function PAe(i){return new Qi(3502,!1)}();return u}function Dk(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&Pk(e,"start",i)));break;case"done":i.onDone(()=>n(e&&Pk(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&Pk(e,"destroy",i)))}}function Pk(i,t,e){const s=Lk(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),a=i._data;return null!=a&&(s._data=a),s}function Lk(i,t,e,n,r="",s=0,a){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!a}}function pg(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function gG(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let kk=(i,t)=>!1,mG=(i,t,e)=>[],vG=null;function Rk(i){const t=i.parentNode||i.host;return t===vG?null:t}(Mk()||typeof Element<"u")&&(GAe()?(vG=(()=>document.documentElement)(),kk=(i,t)=>{for(;t;){if(t===i)return!0;t=Rk(t)}return!1}):kk=(i,t)=>i.contains(t),mG=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let mb=null,_G=!1;const yG=kk,bG=mG;let CG=(()=>{class i{validateStyleProperty(e){return function jAe(i){mb||(mb=function $Ae(){return typeof document<"u"?document.body:null}()||{},_G=!!mb.style&&"WebkitAppearance"in mb.style);let t=!0;return mb.style&&!function WAe(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in mb.style,!t&&_G&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in mb.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return yG(e,n)}getParentElement(e){return Rk(e)}query(e,n,r){return bG(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,a,u=[],h){return new Px(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})(),Ok=(()=>{class i{}return i.NOOP=new CG,i})();const Fk="ng-enter",JE="ng-leave",eT="ng-trigger",tT=".ng-trigger",xG="ng-animating",Nk=".ng-animating";function jy(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Bk(parseFloat(t[1]),t[2])}function Bk(i,t){return"s"===t?1e3*i:i}function nT(i,t,e){return i.hasOwnProperty("duration")?i:function YAe(i,t,e){let r,s=0,a="";if("string"==typeof i){const u=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===u)return t.push(fG()),{duration:0,delay:0,easing:""};r=Bk(parseFloat(u[1]),u[2]);const h=u[3];null!=h&&(s=Bk(parseFloat(h),u[4]));const m=u[5];m&&(a=m)}else r=i;if(!e){let u=!1,h=t.length;r<0&&(t.push(function uAe(){return new Qi(3100,!1)}()),u=!0),s<0&&(t.push(function cAe(){return new Qi(3101,!1)}()),u=!0),u&&t.splice(h,0,fG())}return{duration:r,delay:s,easing:a}}(i,t,e)}function F1(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function AG(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function $y(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function SG(i,t,e){return e?t+":"+e+";":""}function EG(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=SG(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=SG(0,JAe(e),i.style[e]));i.setAttribute("style",t)}function jv(i,t,e){i.style&&(t.forEach((n,r)=>{const s=Vk(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),Mk()&&EG(i))}function vb(i,t){i.style&&(t.forEach((e,n)=>{const r=Vk(n);i.style[r]=""}),Mk()&&EG(i))}function N1(i){return Array.isArray(i)?1==i.length?i[0]:ez(i):i}const zk=new RegExp("{{\\s*(.+?)\\s*}}","g");function TG(i){let t=[];if("string"==typeof i){let e;for(;e=zk.exec(i);)t.push(e[1]);zk.lastIndex=0}return t}function iT(i,t,e){const n=i.toString(),r=n.replace(zk,(s,a)=>{let u=t[a];return null==u&&(e.push(function dAe(i){return new Qi(3003,!1)}()),u=""),u.toString()});return r==n?i:r}function rT(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const QAe=/-+([a-z0-9])/g;function Vk(i){return i.replace(QAe,(...t)=>t[1].toUpperCase())}function JAe(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function gg(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function fAe(i){return new Qi(3004,!1)}()}}function MG(i,t){return window.getComputedStyle(i)[t]}function sIe(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function aIe(i,t,e){if(":"==i[0]){const h=function oIe(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function EAe(i){return new Qi(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof h)return void t.push(h);i=h}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function SAe(i){return new Qi(3015,!1)}()),t;const r=n[1],s=n[2],a=n[3];t.push(DG(r,a));"<"==s[0]&&!("*"==r&&"*"==a)&&t.push(DG(a,r))}(n,e,t)):e.push(i),e}const lT=new Set(["true","1"]),uT=new Set(["false","0"]);function DG(i,t){const e=lT.has(i)||uT.has(i),n=lT.has(t)||uT.has(t);return(r,s)=>{let a="*"==i||i==r,u="*"==t||t==s;return!a&&e&&"boolean"==typeof r&&(a=r?lT.has(i):uT.has(i)),!u&&n&&"boolean"==typeof s&&(u=s?lT.has(t):uT.has(t)),a&&u}}const lIe=new RegExp("s*:selfs*,?","g");function Uk(i,t,e,n){return new uIe(i).build(t,e,n)}class uIe{constructor(t){this._driver=t}build(t,e,n){const r=new dIe(e);return this._resetContextStyleTimingState(r),gg(this,N1(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push(function gAe(){return new Qi(3006,!1)}()),t.definitions.forEach(u=>{if(this._resetContextStyleTimingState(e),0==u.type){const h=u,m=h.name;m.toString().split(/\s*,\s*/).forEach(w=>{h.name=w,s.push(this.visitState(h,e))}),h.name=m}else if(1==u.type){const h=this.visitTransition(u,e);n+=h.queryCount,r+=h.depCount,a.push(h)}else e.errors.push(function mAe(){return new Qi(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:a,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,a=r||{};n.styles.forEach(u=>{u instanceof Map&&u.forEach(h=>{TG(h).forEach(m=>{a.hasOwnProperty(m)||s.add(m)})})}),s.size&&(rT(s.values()),e.errors.push(function vAe(i,t){return new Qi(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=gg(this,N1(t.animation),e);return{type:1,matchers:sIe(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:_b(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>gg(this,n,e)),options:_b(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(a=>{e.currentTime=n;const u=gg(this,a,e);return r=Math.max(r,e.currentTime),u});return e.currentTime=r,{type:3,steps:s,options:_b(t.options)}}visitAnimate(t,e){const n=function pIe(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return Hk(nT(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Hk(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=nT(e,t);return Hk(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:du({});if(5==s.type)r=this.visitKeyframes(s,e);else{let a=t.styles,u=!1;if(!a){u=!0;const m={};n.easing&&(m.easing=n.easing),a=du(m)}e.currentTime+=n.duration+n.delay;const h=this.visitStyle(a,e);h.isEmptyStep=u,r=h}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let u of r)"string"==typeof u?u===T_?n.push(u):e.errors.push(new Qi(3002,!1)):n.push(AG(u));let s=!1,a=null;return n.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(a=u.get("easing"),u.delete("easing")),!s))for(let h of u.values())if(h.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:a,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(a=>{"string"!=typeof a&&a.forEach((u,h)=>{const m=e.collectedStyles.get(e.currentQuerySelector),w=m.get(h);let T=!0;w&&(s!=r&&s>=w.startTime&&r<=w.endTime&&(e.errors.push(function yAe(i,t,e,n,r){return new Qi(3010,!1)}()),T=!1),s=w.startTime),T&&m.set(h,{startTime:s,endTime:r}),e.options&&function ZAe(i,t,e){const n=t.params||{},r=TG(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function hAe(i){return new Qi(3001,!1)}())})}(u,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function bAe(){return new Qi(3011,!1)}()),n;let s=0;const a=[];let u=!1,h=!1,m=0;const w=t.steps.map(Ne=>{const et=this._makeStyleAst(Ne,e);let Je=null!=et.offset?et.offset:function fIe(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(et.styles),at=0;return null!=Je&&(s++,at=et.offset=Je),h=h||at<0||at>1,u=u||at<m,m=at,a.push(at),et});h&&e.errors.push(function CAe(){return new Qi(3012,!1)}()),u&&e.errors.push(function wAe(){return new Qi(3200,!1)}());const T=t.steps.length;let O=0;s>0&&s<T?e.errors.push(function xAe(){return new Qi(3202,!1)}()):0==s&&(O=1/(T-1));const W=T-1,te=e.currentTime,ue=e.currentAnimateTimings,ce=ue.duration;return w.forEach((Ne,et)=>{const Je=O>0?et==W?1:O*et:a[et],at=Je*ce;e.currentTime=te+ue.delay+at,ue.duration=at,this._validateStyleAst(Ne,e),Ne.offset=Je,n.styles.push(Ne)}),n}visitReference(t,e){return{type:8,animation:gg(this,N1(t.animation),e),options:_b(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:_b(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:_b(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,a]=function cIe(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(lIe,"")),i=i.replace(/@\*/g,tT).replace(/@\w+/g,e=>tT+"-"+e.slice(1)).replace(/:animating/g,Nk),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,pg(e.collectedStyles,e.currentQuerySelector,new Map);const u=gg(this,N1(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:u,originalSelector:t.selector,options:_b(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function AAe(){return new Qi(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:nT(t.timings,e.errors,!0);return{type:12,animation:gg(this,N1(t.animation),e),timings:n,options:null}}}class dIe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function _b(i){return i?(i=F1(i)).params&&(i.params=function hIe(i){return i?F1(i):null}(i.params)):i={},i}function Hk(i,t,e){return{duration:i,delay:t,easing:e}}function Gk(i,t,e,n,r,s,a=null,u=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:a,subTimeline:u}}class cT{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const vIe=new RegExp(":enter","g"),yIe=new RegExp(":leave","g");function Wk(i,t,e,n,r,s=new Map,a=new Map,u,h,m=[]){return(new bIe).buildKeyframes(i,t,e,n,r,s,a,u,h,m)}class bIe{buildKeyframes(t,e,n,r,s,a,u,h,m,w=[]){m=m||new cT;const T=new jk(t,e,m,r,s,w,[]);T.options=h;const O=h.delay?jy(h.delay):0;T.currentTimeline.delayNextStep(O),T.currentTimeline.setStyles([a],null,T.errors,h),gg(this,n,T);const W=T.timelines.filter(te=>te.containsAnimation());if(W.length&&u.size){let te;for(let ue=W.length-1;ue>=0;ue--){const ce=W[ue];if(ce.element===e){te=ce;break}}te&&!te.allowOnlyTimelineStyles()&&te.setStyles([u],null,T.errors,h)}return W.length?W.map(te=>te.buildKeyframes()):[Gk(e,[],[],[],0,O,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,a=this._visitSubInstructions(n,r,r.options);s!=a&&e.transformIntoNewTimeline(a)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const a=null!=n.duration?jy(n.duration):null,u=null!=n.delay?jy(n.delay):null;return 0!==a&&t.forEach(h=>{const m=e.appendInstructionToTimeline(h,a,u);s=Math.max(s,m.duration+m.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),gg(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=hT);const a=jy(s.delay);r.delayNextStep(a)}t.steps.length&&(t.steps.forEach(a=>gg(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?jy(t.options.delay):0;t.steps.forEach(a=>{const u=e.createSubContext(t.options);s&&u.delayNextStep(s),gg(this,a,u),r=Math.max(r,u.currentTimeline.currentTime),n.push(u.currentTimeline)}),n.forEach(a=>e.currentTimeline.mergeTimelineCollectedStyles(a)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return nT(e.params?iT(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,u=e.createSubContext().currentTimeline;u.easing=n.easing,t.styles.forEach(h=>{u.forwardTime((h.offset||0)*s),u.setStyles(h.styles,h.easing,e.errors,e.options),u.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(u),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?jy(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=hT);let a=n;const u=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=u.length;let h=null;u.forEach((m,w)=>{e.currentQueryIndex=w;const T=e.createSubContext(t.options,m);s&&T.delayNextStep(s),m===e.element&&(h=T.currentTimeline),gg(this,t.animation,T),T.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,T.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),h&&(e.currentTimeline.mergeTimelineCollectedStyles(h),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,a=Math.abs(s.duration),u=a*(e.currentQueryTotal-1);let h=a*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":h=u-h;break;case"full":h=n.currentStaggerTime}const w=e.currentTimeline;h&&w.delayNextStep(h);const T=w.currentTime;gg(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-T+(r.startTime-n.currentTimeline.startTime)}}const hT={};class jk{constructor(t,e,n,r,s,a,u,h){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=a,this.timelines=u,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=h||new dT(this._driver,e,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=jy(n.duration)),null!=n.delay&&(r.delay=jy(n.delay));const s=n.params;if(s){let a=r.params;a||(a=this.options.params={}),Object.keys(s).forEach(u=>{(!e||!a.hasOwnProperty(u))&&(a[u]=iT(s[u],a,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new jk(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=hT,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new CIe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,a){let u=[];if(r&&u.push(this.element),t.length>0){t=(t=t.replace(vIe,"."+this._enterClassName)).replace(yIe,"."+this._leaveClassName);let m=this._driver.query(this.element,t,1!=n);0!==n&&(m=n<0?m.slice(m.length+n,m.length):m.slice(0,n)),u.push(...m)}return!s&&0==u.length&&a.push(function IAe(i){return new Qi(3014,!1)}()),u}}class dT{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new dT(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||T_),this._currentKeyframe.set(e,T_);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},a=function wIe(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,T_)}else $y(r,e)}),e}(t,this._globalTimelineStyles);for(let[u,h]of a){const m=iT(h,s,n);this._pendingStyles.set(u,m),this._localTimelineStyles.has(u)||this._backFill.set(u,this._globalTimelineStyles.get(u)??T_),this._updateStyle(u,m)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((u,h)=>{const m=$y(u,new Map,this._backFill);m.forEach((w,T)=>{"!"===w?t.add(T):w===T_&&e.add(T)}),n||m.set("offset",h/this.duration),r.push(m)});const s=t.size?rT(t.values()):[],a=e.size?rT(e.values()):[];if(n){const u=r[0],h=new Map(u);u.set("offset",0),h.set("offset",1),r=[u,h]}return Gk(this.element,r,s,a,this.duration,this.startTime,this.easing,!1)}}class CIe extends dT{constructor(t,e,n,r,s,a,u=!1){super(t,e,a.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=u,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],a=n+e,u=e/a,h=$y(t[0]);h.set("offset",0),s.push(h);const m=$y(t[0]);m.set("offset",kG(u)),s.push(m);const w=t.length-1;for(let T=1;T<=w;T++){let O=$y(t[T]);const W=O.get("offset");O.set("offset",kG((e+W*n)/a)),s.push(O)}n=a,e=0,r="",t=s}return Gk(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function kG(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class $k{}const xIe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class AIe extends $k{normalizePropertyName(t,e){return Vk(t)}normalizeStyleValue(t,e,n,r){let s="";const a=n.toString().trim();if(xIe.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const u=n.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&0==u[1].length&&r.push(function pAe(i,t){return new Qi(3005,!1)}())}return a+s}}function RG(i,t,e,n,r,s,a,u,h,m,w,T,O){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:a,timelines:u,queriedElements:h,preStyleProps:m,postStyleProps:w,totalTime:T,errors:O}}const qk={};class OG{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function IIe(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,a,u,h,m,w){const T=[],O=this.ast.options&&this.ast.options.params||qk,te=this.buildStyles(n,u&&u.params||qk,T),ue=h&&h.params||qk,ce=this.buildStyles(r,ue,T),Ne=new Set,et=new Map,Je=new Map,at="void"===r,kt={params:SIe(ue,O),delay:this.ast.options?.delay},Zt=w?[]:Wk(t,e,this.ast.animation,s,a,te,ce,kt,m,T);let yn=0;if(Zt.forEach(pn=>{yn=Math.max(pn.duration+pn.delay,yn)}),T.length)return RG(e,this._triggerName,n,r,at,te,ce,[],[],et,Je,yn,T);Zt.forEach(pn=>{const Kn=pn.element,Bi=pg(et,Kn,new Set);pn.preStyleProps.forEach(Vi=>Bi.add(Vi));const Ji=pg(Je,Kn,new Set);pn.postStyleProps.forEach(Vi=>Ji.add(Vi)),Kn!==e&&Ne.add(Kn)});const zt=rT(Ne.values());return RG(e,this._triggerName,n,r,at,te,ce,Zt,zt,et,Je,yn)}}function SIe(i,t){const e=F1(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class EIe{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=F1(this.defaultParams);return Object.keys(t).forEach(s=>{const a=t[s];null!==a&&(r[s]=a)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,u)=>{a&&(a=iT(a,r,e));const h=this.normalizer.normalizePropertyName(u,e);a=this.normalizer.normalizeStyleValue(u,h,a,e),n.set(h,a)})}),n}}class MIe{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new EIe(r.style,r.options&&r.options.params||{},n))}),FG(this.states,"true","1"),FG(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new OG(t,r,this.states))}),this.fallbackTransition=function DIe(i,t,e){return new OG(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,u)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(a=>a.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function FG(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const PIe=new cT;class LIe{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],s=Uk(this._driver,e,n,[]);if(n.length)throw function LAe(i){return new Qi(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=pG(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let a;const u=new Map;if(s?(a=Wk(this._driver,e,s,Fk,JE,new Map,new Map,n,PIe,r),a.forEach(w=>{const T=pg(u,w.element,new Map);w.postStyleProps.forEach(O=>T.set(O,null))})):(r.push(function kAe(){return new Qi(3300,!1)}()),a=[]),r.length)throw function RAe(i){return new Qi(3504,!1)}();u.forEach((w,T)=>{w.forEach((O,W)=>{w.set(W,this._driver.computeStyle(T,W,T_))})});const m=Wy(a.map(w=>{const T=u.get(w.element);return this._buildPlayer(w,new Map,T)}));return this._playersById.set(t,m),m.onDestroy(()=>this.destroy(t)),this.players.push(m),m}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function OAe(i){return new Qi(3301,!1)}();return e}listen(t,e,n,r){const s=Lk(e,"","","");return Dk(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const NG="ng-animate-queued",Xk="ng-animate-disabled",NIe=[],BG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},BIe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},rm="__ng_removed";class Yk{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function HIe(i){return i??null}(n?t.value:t),n){const s=F1(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const B1="void",Kk=new Yk(B1);class zIe{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,sm(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function FAe(i,t){return new Qi(3302,!1)}();if(null==n||0==n.length)throw function NAe(i){return new Qi(3303,!1)}();if(!function GIe(i){return"start"==i||"done"==i}(n))throw function BAe(i,t){return new Qi(3400,!1)}();const s=pg(this._elementListeners,t,[]),a={name:e,phase:n,callback:r};s.push(a);const u=pg(this._engine.statesByElement,t,new Map);return u.has(e)||(sm(t,eT),sm(t,eT+"-"+e),u.set(e,Kk)),()=>{this._engine.afterFlush(()=>{const h=s.indexOf(a);h>=0&&s.splice(h,1),this._triggers.has(e)||u.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function zAe(i){return new Qi(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),a=new Zk(this.id,e,t);let u=this._engine.statesByElement.get(t);u||(sm(t,eT),sm(t,eT+"-"+e),this._engine.statesByElement.set(t,u=new Map));let h=u.get(e);const m=new Yk(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&h&&m.absorbOptions(h.options),u.set(e,m),h||(h=Kk),m.value!==B1&&h.value===m.value){if(!function $Ie(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(h.params,m.params)){const ue=[],ce=s.matchStyles(h.value,h.params,ue),Ne=s.matchStyles(m.value,m.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{vb(t,ce),jv(t,Ne)})}return}const O=pg(this._engine.playersByElement,t,[]);O.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==e&&ue.queued&&ue.destroy()});let W=s.matchTransition(h.value,m.value,t,m.params),te=!1;if(!W){if(!r)return;W=s.fallbackTransition,te=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:W,fromState:h,toState:m,player:a,isFallbackTransition:te}),te||(sm(t,NG),a.onStart(()=>{cw(t,NG)})),a.onDone(()=>{let ue=this.players.indexOf(a);ue>=0&&this.players.splice(ue,1);const ce=this._engine.playersByElement.get(t);if(ce){let Ne=ce.indexOf(a);Ne>=0&&ce.splice(Ne,1)}}),this.players.push(a),O.push(a),a}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,tT,!0);n.forEach(r=>{if(r[rm])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(a=>a.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),a=new Map;if(s){const u=[];if(s.forEach((h,m)=>{if(a.set(m,h.value),this._triggers.has(m)){const w=this.trigger(t,m,B1,r);w&&u.push(w)}}),u.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,a),n&&Wy(u).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const a=s.name;if(r.has(a))return;r.add(a);const h=this._triggers.get(a).fallbackTransition,m=n.get(a)||Kk,w=new Yk(B1),T=new Zk(this.id,a,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:a,transition:h,fromState:m,toState:w,player:T,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let a=t;for(;a=a.parentNode;)if(n.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[rm];(!s||s===BG)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){sm(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,a=this._elementListeners.get(s);a&&a.forEach(u=>{if(u.name==n.triggerName){const h=Lk(s,n.triggerName,n.fromState.value,n.toState.value);h._data=t,Dk(n.player,u.phase,h,u.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,a=r.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class VIe{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new zIe(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let a=!1,u=this.driver.getParentElement(e);for(;u;){const h=r.get(u);if(h){const m=n.indexOf(h);n.splice(m+1,0,t),a=!0;break}u=this.driver.getParentElement(u)}a||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(fT(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!fT(e))return;const s=e[rm];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(e);a>=0&&this.collectedLeaveElements.splice(a,1)}if(t){const a=this._fetchNamespace(t);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),sm(t,Xk)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),cw(t,Xk))}removeNode(t,e,n,r){if(fT(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const a=this.namespacesByHostElement.get(e);a&&a.id!==t&&a.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[rm]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return fT(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,tT,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Nk,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Wy(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[rm];if(e&&e.setForRemoval){if(t[rm]=BG,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Xk)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)sm(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?Wy(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function VAe(i){return new Qi(3402,!1)}()}_flushAnimations(t,e){const n=new cT,r=[],s=new Map,a=[],u=new Map,h=new Map,m=new Map,w=new Set;this.disabledNodes.forEach(mi=>{w.add(mi);const zi=this.driver.query(mi,".ng-animate-queued",!0);for(let Oi=0;Oi<zi.length;Oi++)w.add(zi[Oi])});const T=this.bodyNode,O=Array.from(this.statesByElement.keys()),W=UG(O,this.collectedEnterElements),te=new Map;let ue=0;W.forEach((mi,zi)=>{const Oi=Fk+ue++;te.set(zi,Oi),mi.forEach(_i=>sm(_i,Oi))});const ce=[],Ne=new Set,et=new Set;for(let mi=0;mi<this.collectedLeaveElements.length;mi++){const zi=this.collectedLeaveElements[mi],Oi=zi[rm];Oi&&Oi.setForRemoval&&(ce.push(zi),Ne.add(zi),Oi.hasAnimation?this.driver.query(zi,".ng-star-inserted",!0).forEach(_i=>Ne.add(_i)):et.add(zi))}const Je=new Map,at=UG(O,Array.from(Ne));at.forEach((mi,zi)=>{const Oi=JE+ue++;Je.set(zi,Oi),mi.forEach(_i=>sm(_i,Oi))}),t.push(()=>{W.forEach((mi,zi)=>{const Oi=te.get(zi);mi.forEach(_i=>cw(_i,Oi))}),at.forEach((mi,zi)=>{const Oi=Je.get(zi);mi.forEach(_i=>cw(_i,Oi))}),ce.forEach(mi=>{this.processLeaveNode(mi)})});const kt=[],Zt=[];for(let mi=this._namespaceList.length-1;mi>=0;mi--)this._namespaceList[mi].drainQueuedTransitions(e).forEach(Oi=>{const _i=Oi.player,Ni=Oi.element;if(kt.push(_i),this.collectedEnterElements.length){const Ma=Ni[rm];if(Ma&&Ma.setForMove){if(Ma.previousTriggersValues&&Ma.previousTriggersValues.has(Oi.triggerName)){const wa=Ma.previousTriggersValues.get(Oi.triggerName),xa=this.statesByElement.get(Oi.element);if(xa&&xa.has(Oi.triggerName)){const Vs=xa.get(Oi.triggerName);Vs.value=wa,xa.set(Oi.triggerName,Vs)}}return void _i.destroy()}}const es=!T||!this.driver.containsElement(T,Ni),Er=Je.get(Ni),cs=te.get(Ni),ys=this._buildInstruction(Oi,n,cs,Er,es);if(ys.errors&&ys.errors.length)return void Zt.push(ys);if(es)return _i.onStart(()=>vb(Ni,ys.fromStyles)),_i.onDestroy(()=>jv(Ni,ys.toStyles)),void r.push(_i);if(Oi.isFallbackTransition)return _i.onStart(()=>vb(Ni,ys.fromStyles)),_i.onDestroy(()=>jv(Ni,ys.toStyles)),void r.push(_i);const Fa=[];ys.timelines.forEach(Ma=>{Ma.stretchStartingKeyframe=!0,this.disabledNodes.has(Ma.element)||Fa.push(Ma)}),ys.timelines=Fa,n.append(Ni,ys.timelines),a.push({instruction:ys,player:_i,element:Ni}),ys.queriedElements.forEach(Ma=>pg(u,Ma,[]).push(_i)),ys.preStyleProps.forEach((Ma,wa)=>{if(Ma.size){let xa=h.get(wa);xa||h.set(wa,xa=new Set),Ma.forEach((Vs,Fo)=>xa.add(Fo))}}),ys.postStyleProps.forEach((Ma,wa)=>{let xa=m.get(wa);xa||m.set(wa,xa=new Set),Ma.forEach((Vs,Fo)=>xa.add(Fo))})});if(Zt.length){const mi=[];Zt.forEach(zi=>{mi.push(function UAe(i,t){return new Qi(3505,!1)}())}),kt.forEach(zi=>zi.destroy()),this.reportError(mi)}const yn=new Map,zt=new Map;a.forEach(mi=>{const zi=mi.element;n.has(zi)&&(zt.set(zi,zi),this._beforeAnimationBuild(mi.player.namespaceId,mi.instruction,yn))}),r.forEach(mi=>{const zi=mi.element;this._getPreviousPlayers(zi,!1,mi.namespaceId,mi.triggerName,null).forEach(_i=>{pg(yn,zi,[]).push(_i),_i.destroy()})});const pn=ce.filter(mi=>GG(mi,h,m)),Kn=new Map;VG(Kn,this.driver,et,m,T_).forEach(mi=>{GG(mi,h,m)&&pn.push(mi)});const Ji=new Map;W.forEach((mi,zi)=>{VG(Ji,this.driver,new Set(mi),h,"!")}),pn.forEach(mi=>{const zi=Kn.get(mi),Oi=Ji.get(mi);Kn.set(mi,new Map([...Array.from(zi?.entries()??[]),...Array.from(Oi?.entries()??[])]))});const Vi=[],bi=[],Fi={};a.forEach(mi=>{const{element:zi,player:Oi,instruction:_i}=mi;if(n.has(zi)){if(w.has(zi))return Oi.onDestroy(()=>jv(zi,_i.toStyles)),Oi.disabled=!0,Oi.overrideTotalTime(_i.totalTime),void r.push(Oi);let Ni=Fi;if(zt.size>1){let Er=zi;const cs=[];for(;Er=Er.parentNode;){const ys=zt.get(Er);if(ys){Ni=ys;break}cs.push(Er)}cs.forEach(ys=>zt.set(ys,Ni))}const es=this._buildAnimation(Oi.namespaceId,_i,yn,s,Ji,Kn);if(Oi.setRealPlayer(es),Ni===Fi)Vi.push(Oi);else{const Er=this.playersByElement.get(Ni);Er&&Er.length&&(Oi.parentPlayer=Wy(Er)),r.push(Oi)}}else vb(zi,_i.fromStyles),Oi.onDestroy(()=>jv(zi,_i.toStyles)),bi.push(Oi),w.has(zi)&&r.push(Oi)}),bi.forEach(mi=>{const zi=s.get(mi.element);if(zi&&zi.length){const Oi=Wy(zi);mi.setRealPlayer(Oi)}}),r.forEach(mi=>{mi.parentPlayer?mi.syncPlayerEvents(mi.parentPlayer):mi.destroy()});for(let mi=0;mi<ce.length;mi++){const zi=ce[mi],Oi=zi[rm];if(cw(zi,JE),Oi&&Oi.hasAnimation)continue;let _i=[];if(u.size){let es=u.get(zi);es&&es.length&&_i.push(...es);let Er=this.driver.query(zi,Nk,!0);for(let cs=0;cs<Er.length;cs++){let ys=u.get(Er[cs]);ys&&ys.length&&_i.push(...ys)}}const Ni=_i.filter(es=>!es.destroyed);Ni.length?WIe(this,zi,Ni):this.processLeaveNode(zi)}return ce.length=0,Vi.forEach(mi=>{this.players.push(mi),mi.onDone(()=>{mi.destroy();const zi=this.players.indexOf(mi);this.players.splice(zi,1)}),mi.play()}),Vi}elementContainsData(t,e){let n=!1;const r=e[rm];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let a=[];if(e){const u=this.playersByQueriedElement.get(t);u&&(a=u)}else{const u=this.playersByElement.get(t);if(u){const h=!s||s==B1;u.forEach(m=>{m.queued||!h&&m.triggerName!=r||a.push(m)})}}return(n||r)&&(a=a.filter(u=>!(n&&n!=u.namespaceId||r&&r!=u.triggerName))),a}_beforeAnimationBuild(t,e,n){const s=e.element,a=e.isRemovalTransition?void 0:t,u=e.isRemovalTransition?void 0:e.triggerName;for(const h of e.timelines){const m=h.element,w=m!==s,T=pg(n,m,[]);this._getPreviousPlayers(m,w,a,u,e.toState).forEach(W=>{const te=W.getRealPlayer();te.beforeDestroy&&te.beforeDestroy(),W.destroy(),T.push(W)})}vb(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,a){const u=e.triggerName,h=e.element,m=[],w=new Set,T=new Set,O=e.timelines.map(te=>{const ue=te.element;w.add(ue);const ce=ue[rm];if(ce&&ce.removedBeforeQueried)return new Px(te.duration,te.delay);const Ne=ue!==h,et=function jIe(i){const t=[];return HG(i,t),t}((n.get(ue)||NIe).map(yn=>yn.getRealPlayer())).filter(yn=>!!yn.element&&yn.element===ue),Je=s.get(ue),at=a.get(ue),kt=pG(0,this._normalizer,0,te.keyframes,Je,at),Zt=this._buildPlayer(te,kt,et);if(te.subTimeline&&r&&T.add(ue),Ne){const yn=new Zk(t,u,ue);yn.setRealPlayer(Zt),m.push(yn)}return Zt});m.forEach(te=>{pg(this.playersByQueriedElement,te.element,[]).push(te),te.onDone(()=>function UIe(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,te.element,te))}),w.forEach(te=>sm(te,xG));const W=Wy(O);return W.onDestroy(()=>{w.forEach(te=>cw(te,xG)),jv(h,e.toStyles)}),T.forEach(te=>{pg(r,te,[]).push(W)}),W}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Px(t.duration,t.delay)}}class Zk{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Px,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>Dk(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){pg(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function fT(i){return i&&1===i.nodeType}function zG(i,t){const e=i.style.display;return i.style.display=t??"none",e}function VG(i,t,e,n,r){const s=[];e.forEach(h=>s.push(zG(h)));const a=[];n.forEach((h,m)=>{const w=new Map;h.forEach(T=>{const O=t.computeStyle(m,T,r);w.set(T,O),(!O||0==O.length)&&(m[rm]=BIe,a.push(m))}),i.set(m,w)});let u=0;return e.forEach(h=>zG(h,s[u++])),a}function UG(i,t){const e=new Map;if(i.forEach(u=>e.set(u,[])),0==t.length)return e;const r=new Set(t),s=new Map;function a(u){if(!u)return 1;let h=s.get(u);if(h)return h;const m=u.parentNode;return h=e.has(m)?m:r.has(m)?1:a(m),s.set(u,h),h}return t.forEach(u=>{const h=a(u);1!==h&&e.get(h).push(u)}),e}function sm(i,t){i.classList?.add(t)}function cw(i,t){i.classList?.remove(t)}function WIe(i,t,e){Wy(e).onDone(()=>i.processLeaveNode(t))}function HG(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof iz?HG(n.players,t):t.push(n)}}function GG(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class pT{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new VIe(t,e,n),this._timelineEngine=new LIe(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const a=t+"-"+r;let u=this._triggerCache[a];if(!u){const h=[],w=Uk(this._driver,s,h,[]);if(h.length)throw function DAe(i,t){return new Qi(3404,!1)}();u=function TIe(i,t,e){return new MIe(i,t,e)}(r,w,this._normalizer),this._triggerCache[a]=u}this._transitionEngine.registerTrigger(e,r,u)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,a]=gG(n);this._timelineEngine.command(s,e,a,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[a,u]=gG(n);return this._timelineEngine.listen(a,e,u,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let XIe=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&jv(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(jv(this._element,this._initialStyles),this._endStyles&&(jv(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(vb(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(vb(this._element,this._endStyles),this._endStyles=null),jv(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function Qk(i){let t=null;return i.forEach((e,n)=>{(function YIe(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class WG{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:MG(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class KIe{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return yG(t,e)}getParentElement(t){return Rk(t)}query(t,e,n){return bG(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,a=[]){const h={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(h.easing=s);const m=new Map,w=a.filter(W=>W instanceof WG);(function eIe(i,t){return 0===i||0===t})(n,r)&&w.forEach(W=>{W.currentSnapshot.forEach((te,ue)=>m.set(ue,te))});let T=function KAe(i){return i.length?i[0]instanceof Map?i:i.map(t=>AG(t)):[]}(e).map(W=>$y(W));T=function tIe(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,a)=>{n.has(a)||r.push(a),n.set(a,s)}),r.length)for(let s=1;s<t.length;s++){let a=t[s];r.forEach(u=>a.set(u,MG(i,u)))}}return t}(t,T,m);const O=function qIe(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=Qk(t[0]),t.length>1&&(n=Qk(t[t.length-1]))):t instanceof Map&&(e=Qk(t)),e||n?new XIe(i,e,n):null}(t,T);return new WG(t,T,h,O)}}let ZIe=(()=>{class i extends J5{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:fl.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?ez(e):e;return jG(this._renderer,null,n,"register",[r]),new QIe(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(ji(c),ji(nd))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();class QIe extends class HJ{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new JIe(this._id,t,e||{},this._renderer)}}class JIe{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return jG(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function jG(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const $G="@.disabled";let eSe=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,a)=>{const u=a?.parentNode(s);u&&a.removeChild(u,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let w=this._rendererCache.get(s);return w||(w=new qG("",s,this.engine),this._rendererCache.set(s,w)),w}const a=n.id,u=n.id+"-"+this._currentId;this._currentId++,this.engine.register(u,e);const h=w=>{Array.isArray(w)?w.forEach(h):this.engine.registerTrigger(a,u,e,w.name,w)};return n.data.animation.forEach(h),new tSe(this,u,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,u]=s;a(u)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(ji(c),ji(pT),ji(Zo))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})();class qG{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==$G?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class tSe extends qG{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==$G?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function nSe(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),a="";return"@"!=s.charAt(0)&&([s,a]=function iSe(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,a,u=>{this.factory.scheduleListenerCallback(u._data||-1,n,u)})}return this.delegate.listen(t,e,n)}}const XG=[{provide:J5,useClass:ZIe},{provide:$k,useFactory:function sSe(){return new AIe}},{provide:pT,useClass:(()=>{class i extends pT{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(ji(nd),ji(Ok),ji($k),ji(Xw))},i.\u0275prov=Zr({token:i,factory:i.\u0275fac}),i})()},{provide:c,useFactory:function aSe(i,t,e){return new eSe(i,t,e)},deps:[iI,pT,Zo]}],Jk=[{provide:Ok,useFactory:()=>new KIe},{provide:tF,useValue:"BrowserAnimations"},...XG],YG=[{provide:Ok,useClass:CG},{provide:tF,useValue:"NoopAnimations"},...XG];let oSe=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?YG:Jk}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({providers:Jk,imports:[mN]}),i})();function lSe(i,t){if(1&i&&(Pt(0,"span"),ur(1),Nt()),2&i){const e=Ze();tt(1),ca(e.label)}}function uSe(i,t){1&i&&Nr(0)}const z1=function(i){return{height:i}},cSe=function(i,t){return{"p-highlight":i,"p-disabled":t}},hSe=function(i){return{"p-highlight":i}},KG=function(i){return{"pi pi-check":i}},V1=function(i){return{$implicit:i}},dSe=["container"],fSe=["filterInput"],pSe=["in"],gSe=["items"],mSe=["scroller"];function vSe(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(2);tt(1),ca(e.valuesAsString||"empty")}}function _Se(i,t){if(1&i){const e=vr();Pt(0,"span",18),si("click",function(r){gn(e);const s=Ze().$implicit;return vn(Ze(3).removeChip(s,r))}),Nt()}}function ySe(i,t){if(1&i&&(Pt(0,"div",14,15)(2,"span",16),ur(3),Nt(),At(4,_Se,1,0,"span",17),Nt()),2&i){const e=t.$implicit,n=Ze(3);tt(3),ca(n.findLabelByValue(e)),tt(1),He("ngIf",!n.disabled)}}function bSe(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(3);tt(1),ca(e.placeholder||e.defaultLabel||"empty")}}function CSe(i,t){if(1&i&&(js(0),At(1,ySe,5,2,"div",13),At(2,bSe,2,1,"ng-container",7),$s()),2&i){const e=Ze(2);tt(1),He("ngForOf",e.value),tt(1),He("ngIf",!e.value||0===e.value.length)}}function wSe(i,t){if(1&i&&(js(0),At(1,vSe,2,1,"ng-container",7),At(2,CSe,3,2,"ng-container",7),$s()),2&i){const e=Ze();tt(1),He("ngIf","comma"===e.display),tt(1),He("ngIf","chip"===e.display)}}function xSe(i,t){1&i&&Nr(0)}function ASe(i,t){if(1&i){const e=vr();Pt(0,"i",19),si("click",function(r){return gn(e),vn(Ze().clear(r))}),Nt()}}function ISe(i,t){1&i&&Nr(0)}function SSe(i,t){1&i&&Nr(0)}const ZG=function(i){return{options:i}};function ESe(i,t){if(1&i&&(js(0),At(1,SSe,1,0,"ng-container",8),$s()),2&i){const e=Ze(3);tt(1),He("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",yr(2,ZG,e.filterOptions))}}const TSe=function(i){return{"p-checkbox-disabled":i}},MSe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}};function DSe(i,t){if(1&i){const e=vr();Pt(0,"div",34)(1,"div",2)(2,"input",35),si("focus",function(){return gn(e),vn(Ze(4).onHeaderCheckboxFocus())})("blur",function(){return gn(e),vn(Ze(4).onHeaderCheckboxBlur())})("keydown.space",function(r){return gn(e),vn(Ze(4).toggleAll(r))}),Nt()(),Pt(3,"div",36),si("click",function(r){return gn(e),vn(Ze(4).toggleAll(r))}),Ri(4,"span",37),Nt()()}if(2&i){const e=Ze(4);He("ngClass",yr(6,TSe,e.disabled||e.toggleAllDisabled)),tt(2),He("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),tt(1),He("ngClass",Th(8,MSe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),xs("aria-checked",e.allChecked),tt(1),He("ngClass",yr(12,KG,e.allChecked))}}function PSe(i,t){if(1&i){const e=vr();Pt(0,"div",38)(1,"input",39,40),si("input",function(r){return gn(e),vn(Ze(4).onFilterInputChange(r))}),Nt(),Ri(3,"span",41),Nt()}if(2&i){const e=Ze(4);tt(1),He("value",e.filterValue||"")("disabled",e.disabled),xs("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function LSe(i,t){if(1&i){const e=vr();At(0,DSe,5,14,"div",30),At(1,PSe,4,5,"div",31),Pt(2,"button",32),si("click",function(r){return gn(e),vn(Ze(3).close(r))}),Ri(3,"span",33),Nt()}if(2&i){const e=Ze(3);He("ngIf",e.showToggleAll&&!e.selectionLimit),tt(1),He("ngIf",e.filter)}}function kSe(i,t){if(1&i&&(Pt(0,"div",26),ch(1),At(2,ISe,1,0,"ng-container",27),At(3,ESe,2,4,"ng-container",28),At(4,LSe,4,2,"ng-template",null,29,hc),Nt()),2&i){const e=_o(5),n=Ze(2);tt(2),He("ngTemplateOutlet",n.headerTemplate),tt(1),He("ngIf",n.filterTemplate)("ngIfElse",e)}}function RSe(i,t){1&i&&Nr(0)}const QG=function(i,t){return{$implicit:i,options:t}};function OSe(i,t){if(1&i&&At(0,RSe,1,0,"ng-container",8),2&i){const e=t.$implicit,n=t.options;Ze(2),He("ngTemplateOutlet",_o(6))("ngTemplateOutletContext",fa(2,QG,e,n))}}function FSe(i,t){1&i&&Nr(0)}function NSe(i,t){if(1&i&&At(0,FSe,1,0,"ng-container",8),2&i){const e=t.options;He("ngTemplateOutlet",Ze(4).loaderTemplate)("ngTemplateOutletContext",yr(2,ZG,e))}}function BSe(i,t){1&i&&(js(0),At(1,NSe,1,4,"ng-template",45),$s())}function zSe(i,t){if(1&i){const e=vr();Pt(0,"p-scroller",42,43),si("onLazyLoad",function(r){return gn(e),vn(Ze(2).onLazyLoad.emit(r))}),At(2,OSe,1,5,"ng-template",44),At(3,BSe,2,0,"ng-container",7),Nt()}if(2&i){const e=Ze(2);co(yr(9,z1,e.scrollHeight)),He("items",e.optionsToRender)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),tt(3),He("ngIf",e.loaderTemplate)}}function VSe(i,t){1&i&&Nr(0)}const USe=function(){return{}};function HSe(i,t){if(1&i&&(js(0),At(1,VSe,1,0,"ng-container",8),$s()),2&i){Ze();const e=_o(6),n=Ze();tt(1),He("ngTemplateOutlet",e)("ngTemplateOutletContext",fa(3,QG,n.optionsToRender,mo(2,USe)))}}function GSe(i,t){if(1&i&&(Pt(0,"span"),ur(1),Nt()),2&i){const e=Ze().$implicit,n=Ze(4);tt(1),ca(n.getOptionGroupLabel(e)||"empty")}}function WSe(i,t){1&i&&Nr(0)}function jSe(i,t){1&i&&Nr(0)}function $Se(i,t){if(1&i&&(Pt(0,"li",51),At(1,GSe,2,1,"span",7),At(2,WSe,1,0,"ng-container",8),Nt(),At(3,jSe,1,0,"ng-container",8)),2&i){const e=t.$implicit,n=Ze(2).options,r=_o(5),s=Ze(2);He("ngStyle",yr(6,z1,n.itemSize+"px")),tt(1),He("ngIf",!s.groupTemplate),tt(1),He("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",yr(8,V1,e)),tt(1),He("ngTemplateOutlet",r)("ngTemplateOutletContext",yr(10,V1,s.getOptionGroupChildren(e)))}}function qSe(i,t){if(1&i&&(js(0),At(1,$Se,4,12,"ng-template",50),$s()),2&i){const e=Ze().$implicit;tt(1),He("ngForOf",e)}}function XSe(i,t){1&i&&Nr(0)}function YSe(i,t){if(1&i&&(js(0),At(1,XSe,1,0,"ng-container",8),$s()),2&i){const e=Ze().$implicit,n=_o(5);tt(1),He("ngTemplateOutlet",n)("ngTemplateOutletContext",yr(2,V1,e))}}function KSe(i,t){if(1&i){const e=vr();Pt(0,"p-multiSelectItem",52),si("onClick",function(r){return gn(e),vn(Ze(4).onOptionClick(r))})("onKeydown",function(r){return gn(e),vn(Ze(4).onOptionKeydown(r))}),Nt()}if(2&i){const e=t.$implicit,n=Ze(2).options,r=Ze(2);He("option",e)("selected",r.isSelected(e))("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)("itemSize",n.itemSize)}}function ZSe(i,t){1&i&&At(0,KSe,1,6,"ng-template",50),2&i&&He("ngForOf",t.$implicit)}function QSe(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(4);tt(1),cc(" ",e.emptyFilterMessageLabel," ")}}function JSe(i,t){1&i&&Nr(0,null,54)}function eEe(i,t){if(1&i&&(Pt(0,"li",53),At(1,QSe,2,1,"ng-container",28),At(2,JSe,2,0,"ng-container",27),Nt()),2&i){const e=Ze().options,n=Ze(2);He("ngStyle",yr(4,z1,e.itemSize+"px")),tt(1),He("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),tt(1),He("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function tEe(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(4);tt(1),cc(" ",e.emptyMessageLabel," ")}}function nEe(i,t){1&i&&Nr(0,null,55)}function iEe(i,t){if(1&i&&(Pt(0,"li",53),At(1,tEe,2,1,"ng-container",28),At(2,nEe,2,0,"ng-container",27),Nt()),2&i){const e=Ze().options,n=Ze(2);He("ngStyle",yr(4,z1,e.itemSize+"px")),tt(1),He("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),tt(1),He("ngTemplateOutlet",n.emptyTemplate)}}function rEe(i,t){if(1&i&&(Pt(0,"ul",46,47),At(2,qSe,2,1,"ng-container",7),At(3,YSe,2,4,"ng-container",7),At(4,ZSe,1,1,"ng-template",null,48,hc),At(6,eEe,3,6,"li",49),At(7,iEe,3,6,"li",49),Nt()),2&i){const e=t.options,n=Ze(2);co(e.contentStyle),He("ngClass",e.contentStyleClass),tt(2),He("ngIf",n.group),tt(1),He("ngIf",!n.group),tt(3),He("ngIf",n.hasFilter()&&n.isEmpty()),tt(1),He("ngIf",!n.hasFilter()&&n.isEmpty())}}function sEe(i,t){1&i&&Nr(0)}function aEe(i,t){if(1&i&&(Pt(0,"div",56),ch(1,1),At(2,sEe,1,0,"ng-container",27),Nt()),2&i){const e=Ze(2);tt(2),He("ngTemplateOutlet",e.footerTemplate)}}const oEe=function(){return["p-multiselect-panel p-component"]},lEe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},uEe=function(i){return{value:"visible",params:i}};function cEe(i,t){if(1&i){const e=vr();Pt(0,"div",20),si("@overlayAnimation.start",function(r){return gn(e),vn(Ze().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return gn(e),vn(Ze().onOverlayAnimationEnd(r))})("keydown",function(r){return gn(e),vn(Ze().onKeydown(r))})("click",function(r){return gn(e),vn(Ze().onOverlayClick(r))}),At(1,kSe,6,3,"div",21),Pt(2,"div",22),At(3,zSe,4,11,"p-scroller",23),At(4,HSe,2,6,"ng-container",7),At(5,rEe,8,7,"ng-template",null,24,hc),Nt(),At(7,aEe,3,1,"div",25),Nt()}if(2&i){const e=Ze();Us(e.panelStyleClass),He("ngClass",mo(11,oEe))("@overlayAnimation",yr(15,uEe,fa(12,lEe,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),tt(1),He("ngIf",e.showHeader),tt(1),bf("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),tt(1),He("ngIf",e.virtualScroll),tt(1),He("ngIf",!e.virtualScroll),tt(3),He("ngIf",e.footerFacet||e.footerTemplate)}}const hEe=[[["p-header"]],[["p-footer"]]],dEe=function(i,t,e,n){return{"p-multiselect p-component":!0,"p-multiselect-open":i,"p-multiselect-chip":t,"p-focus":e,"p-disabled":n}},fEe=function(i,t){return{"p-placeholder":i,"p-multiselect-label-empty":t}},pEe=function(){return{"p-multiselect-trigger":!0}},gEe=["p-header","p-footer"],mEe={provide:Mc,useExisting:Xr(()=>_Ee),multi:!0};let vEe=(()=>{class i{constructor(){this.onClick=new ki,this.onKeydown=new ki}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}onOptionKeydown(e){this.onKeydown.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=hs({type:i,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Pt(0,"li",0),si("click",function(s){return n.onOptionClick(s)})("keydown",function(s){return n.onOptionKeydown(s)}),Pt(1,"div",1)(2,"div",2),Ri(3,"span",3),Nt()(),At(4,lSe,2,1,"span",4),At(5,uSe,1,0,"ng-container",5),Nt()),2&e&&(He("ngStyle",yr(9,z1,n.itemSize+"px"))("ngClass",fa(11,cSe,n.selected,n.disabled)),xs("aria-label",n.label)("tabindex",n.disabled?null:"0"),tt(2),He("ngClass",yr(14,hSe,n.selected)),tt(1),He("ngClass",yr(16,KG,n.selected)),tt(1),He("ngIf",!n.template),tt(1),He("ngTemplateOutlet",n.template)("ngTemplateOutletContext",yr(18,V1,n.option)))},dependencies:[vo,wo,hu,Ho,kh],encapsulation:2}),i})(),_Ee=(()=>{class i{constructor(e,n,r,s,a,u){this.el=e,this.renderer=n,this.cd=r,this.filterService=s,this.config=a,this.overlayService=u,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.scrollHeight="200px",this.lazy=!1,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.showClear=!1,this.onChange=new ki,this.onFilter=new ki,this.onFocus=new ki,this.onBlur=new ki,this.onClick=new ki,this.onClear=new ki,this.onPanelShow=new ki,this.onPanelHide=new ki,this.onLazyLoad=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(e){this._defaultLabel=e,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder=e,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(e){this._options=e,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(e){return this.optionLabel?ns.resolveFieldData(e,this.optionLabel):e&&null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ns.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?ns.resolveFieldData(e,this.optionGroupLabel):e&&null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ns.resolveFieldData(e,this.optionGroupChildren):e.items}isOptionDisabled(e){return(this.optionDisabled?ns.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}writeValue(e){this.value=e,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e){let n=e.option;if(this.isOptionDisabled(n))return;let r=this.getOptionValue(n),s=this.findSelectionIndex(r);-1!=s?(this.value=this.value.filter((a,u)=>u!=s),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],r]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:e.originalEvent,value:this.value,itemValue:r}),this.updateLabel(),this.updateFilledState()}isSelected(e){return-1!=this.findSelectionIndex(this.getOptionValue(e))}findSelectionIndex(e){let n=-1;if(this.value)for(let r=0;r<this.value.length;r++)if(ns.equals(this.value[r],e,this.dataKey)){n=r;break}return n}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateFilledState(),this.updateLabel(),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(a=>{let u=this.isOptionDisabled(a);(!u||u&&this.isSelected(a))&&n.push(this.getOptionValue(a))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Vu.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(e){"void"===e.toState&&Vu.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):bn.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=bn.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?bn.absolutePosition(this.overlay,this.containerViewChild.nativeElement):bn.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateLabel(),this.updateFilledState(),this.onClear.emit(),this.onModelChange(this.value),e.stopPropagation()}onMouseclick(e,n){this.disabled||this.readonly||e.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(e),!this.isOverlayClick(e)&&!bn.hasClass(e.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(n.focus(),this.show())))}removeChip(e,n){this.value=this.value.filter(r=>!ns.equals(r,e,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:n,value:this.value,itemValue:e}),this.updateLabel(),this.updateFilledState()}isOverlayClick(e){let n=e.target;return!!this.overlay&&(this.overlay.isSameNode(n)||this.overlay.contains(n))}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.isOverlayClick(e))}onInputFocus(e){this.focus=!0,this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focus=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(e){if(!this.readonly)switch(e.originalEvent.which){case 40:var n=this.findNextItem(e.originalEvent.target.parentElement);n&&n.focus(),e.originalEvent.preventDefault();break;case 38:var r=this.findPrevItem(e.originalEvent.target.parentElement);r&&r.focus(),e.originalEvent.preventDefault();break;case 13:this.onOptionClick(e),e.originalEvent.preventDefault();break;case 9:this.hide()}}findNextItem(e){let n=e.nextElementSibling;return n?bn.hasClass(n.children[0],"p-disabled")||bn.isHidden(n.children[0])||bn.hasClass(n,"p-multiselect-item-group")?this.findNextItem(n):n.children[0]:null}findPrevItem(e){let n=e.previousElementSibling;return n?bn.hasClass(n.children[0],"p-disabled")||bn.isHidden(n.children[0])||bn.hasClass(n,"p-multiselect-item-group")?this.findPrevItem(n):n.children[0]:null}onKeydown(e){switch(e.which){case 40:!this.overlayVisible&&e.altKey&&(this.show(),e.preventDefault());break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let e="";for(let n=0;n<this.value.length;n++){let r=this.findLabelByValue(this.value[n]);r&&(e.length>0&&(e+=", "),e+=r)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=e;else{let n=/{(.*?)}/;this.valuesAsString=n.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(n)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(e){if(this.group){let n=null;for(let r=0;r<this.options.length;r++){let s=this.getOptionGroupChildren(this.options[r]);if(s&&(n=this.searchLabelByValue(e,s),n))break}return n}return this.searchLabelByValue(e,this.options)}searchLabelByValue(e,n){let r=null;for(let s=0;s<n.length;s++){let a=n[s],u=this.getOptionValue(a);if(null==e&&null==u||ns.equals(e,u,this.dataKey)){r=this.getOptionLabel(a);break}}return r}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,a=this.group?0:this.optionsToRender.length;for(let u of e)if(this.group)for(let h of this.getOptionGroupChildren(u)){let m=this.isOptionDisabled(h),w=this.isSelected(h);if(m)w?n++:r++;else{if(!w)return!1;s++}a++}else{let h=this.isOptionDisabled(u),m=this.isSelected(u);if(h)m?n++:r++;else{if(!m)return!1;s++}}return a===n||a===s||s&&a===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Kc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Kc.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(e){this._filterValue=e.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:e,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&this.hide(),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!bn.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Lx(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Vu.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(p),Tn(Oo),Tn(dx),Tn(og),Tn(fx))},i.\u0275cmp=hs({type:i,selectors:[["p-multiSelect"]],contentQueries:function(e,n,r){if(1&e&&(Yl(r,EI,5),Yl(r,e2,5),Yl(r,Kl,4)),2&e){let s;jr(s=$r())&&(n.footerFacet=s.first),jr(s=$r())&&(n.headerFacet=s.first),jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(dSe,5),Rs(fSe,5),Rs(pSe,5),Rs(gSe,5),Rs(mSe,5)),2&e){let r;jr(r=$r())&&(n.containerViewChild=r.first),jr(r=$r())&&(n.filterInputChild=r.first),jr(r=$r())&&(n.accessibleViewChild=r.first),jr(r=$r())&&(n.itemsViewChild=r.first),jr(r=$r())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&ag("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus||n.overlayVisible)("p-multiselect-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad"},features:[Ro([mEe])],ngContentSelectors:gEe,decls:13,vars:34,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-multiselect-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],[1,"p-multiselect-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(e,n){if(1&e){const r=vr();Ep(hEe),Pt(0,"div",0,1),si("click",function(a){gn(r);const u=_o(4);return vn(n.onMouseclick(a,u))}),Pt(2,"div",2)(3,"input",3,4),si("focus",function(a){return n.onInputFocus(a)})("blur",function(a){return n.onInputBlur(a)})("keydown",function(a){return n.onKeydown(a)}),Nt()(),Pt(5,"div",5)(6,"div",6),At(7,wSe,3,2,"ng-container",7),At(8,xSe,1,0,"ng-container",8),Nt(),At(9,ASe,1,0,"i",9),Nt(),Pt(10,"div",10),Ri(11,"span",11),Nt(),At(12,cEe,8,17,"div",12),Nt()}2&e&&(Us(n.styleClass),He("ngClass",ep(23,dEe,n.overlayVisible,"chip"===n.display,n.focus,n.disabled))("ngStyle",n.style),tt(3),He("disabled",n.disabled),xs("label",n.label)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-expanded",n.overlayVisible)("aria-labelledby",n.ariaLabelledBy),tt(2),He("pTooltip",n.tooltip)("tooltipPosition",n.tooltipPosition)("positionStyle",n.tooltipPositionStyle)("tooltipStyleClass",n.tooltipStyleClass),tt(1),He("ngClass",fa(28,fEe,n.valuesAsString===(n.defaultLabel||n.placeholder),!(null!=n.valuesAsString&&0!==n.valuesAsString.length||null!=n.placeholder&&0!==n.placeholder.length))),tt(1),He("ngIf",!n.selectedItemsTemplate),tt(1),He("ngTemplateOutlet",n.selectedItemsTemplate)("ngTemplateOutletContext",yr(31,V1,n.value)),tt(1),He("ngIf",null!=n.value&&n.filled&&!n.disabled&&n.showClear),tt(1),He("ngClass",mo(33,pEe)),tt(1),He("ngClass",n.dropdownIcon),tt(1),He("ngIf",n.overlayVisible))},dependencies:[vo,Ec,wo,hu,Ho,Kl,Rv,kh,kx,vEe],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}\n"],encapsulation:2,data:{animation:[M_("overlayAnimation",[Lh(":enter",[du({opacity:0,transform:"scaleY(0.8)"}),Dc("{{showTransitionParams}}")]),Lh(":leave",[Dc("{{hideTransitionParams}}",du({opacity:0}))])])]},changeDetection:0}),i})(),yEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl,Ov,Pc,Fv,Pl,Fv]}),i})();function bEe(i,t){if(1&i){const e=vr();Pt(0,"span",3),si("click",function(r){return gn(e),vn(Ze().clear(r))})("keydown.enter",function(r){return gn(e),vn(Ze().clear(r))}),Nt()}if(2&i){const e=Ze();He("ngClass",e.iconCancelClass)("ngStyle",e.iconCancelStyle),xs("tabindex",e.disabled||e.readonly?null:"0")}}function CEe(i,t){if(1&i){const e=vr();Pt(0,"span",4),si("click",function(r){const a=gn(e).index;return vn(Ze().rate(r,a))})("keydown.enter",function(r){const a=gn(e).index;return vn(Ze().rate(r,a))}),Nt()}if(2&i){const e=t.index,n=Ze();He("ngClass",!n.value||e>=n.value?n.iconOffClass:n.iconOnClass)("ngStyle",!n.value||e>=n.value?n.iconOffStyle:n.iconOnStyle),xs("tabindex",n.disabled||n.readonly?null:"0")}}const wEe=function(i,t){return{"p-readonly":i,"p-disabled":t}},xEe={provide:Mc,useExisting:Xr(()=>AEe),multi:!0};let AEe=(()=>{class i{constructor(e){this.cd=e,this.stars=5,this.cancel=!0,this.iconOnClass="pi pi-star-fill",this.iconOffClass="pi pi-star",this.iconCancelClass="pi pi-ban",this.onRate=new ki,this.onCancel=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.starsArray=[];for(let e=0;e<this.stars;e++)this.starsArray[e]=e}rate(e,n){!this.readonly&&!this.disabled&&(this.value=n+1,this.onModelChange(this.value),this.onModelTouched(),this.onRate.emit({originalEvent:e,value:n+1})),e.preventDefault()}clear(e){!this.readonly&&!this.disabled&&(this.value=null,this.onModelChange(this.value),this.onModelTouched(),this.onCancel.emit(e)),e.preventDefault()}writeValue(e){this.value=e,this.cd.detectChanges()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo))},i.\u0275cmp=hs({type:i,selectors:[["p-rating"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",readonly:"readonly",stars:"stars",cancel:"cancel",iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle"},outputs:{onRate:"onRate",onCancel:"onCancel"},features:[Ro([xEe])],decls:3,vars:6,consts:[[1,"p-rating",3,"ngClass"],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter"],[1,"p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter"]],template:function(e,n){1&e&&(Pt(0,"div",0),At(1,bEe,1,3,"span",1),At(2,CEe,1,3,"span",2),Nt()),2&e&&(He("ngClass",fa(3,wEe,n.readonly,n.disabled)),tt(1),He("ngIf",n.cancel),tt(1),He("ngForOf",n.starsArray))},dependencies:[vo,Ec,wo,Ho],styles:[".p-rating-icon{cursor:pointer}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}\n"],encapsulation:2,changeDetection:0}),i})(),IEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();const SEe=["rb"],EEe=function(i,t,e){return{"p-radiobutton-label":!0,"p-radiobutton-label-active":i,"p-disabled":t,"p-radiobutton-label-focus":e}};function TEe(i,t){if(1&i){const e=vr();Pt(0,"label",4),si("click",function(r){return gn(e),vn(Ze().select(r))}),ur(1),Nt()}if(2&i){const e=Ze(),n=_o(3);Us(e.labelStyleClass),He("ngClass",Th(5,EEe,n.checked,e.disabled,e.focused)),xs("for",e.inputId),tt(1),ca(e.label)}}const MEe=function(i,t,e){return{"p-radiobutton p-component":!0,"p-radiobutton-checked":i,"p-radiobutton-disabled":t,"p-radiobutton-focused":e}},DEe=function(i,t,e){return{"p-radiobutton-box":!0,"p-highlight":i,"p-disabled":t,"p-focus":e}},PEe={provide:Mc,useExisting:Xr(()=>kEe),multi:!0};let LEe=(()=>{class i{constructor(){this.accessors=[]}add(e,n){this.accessors.push([e,n])}remove(e){this.accessors=this.accessors.filter(n=>n[1]!==e)}select(e){this.accessors.forEach(n=>{this.isSameGroup(n,e)&&n[1]!==e&&n[1].writeValue(e.value)})}isSameGroup(e,n){return!!e[0].control&&e[0].control.root===n.control.control.root&&e[1].name===n.name}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),kEe=(()=>{class i{constructor(e,n,r){this.cd=e,this.injector=n,this.registry=r,this.onClick=new ki,this.onFocus=new ki,this.onBlur=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.control=this.injector.get(Lv),this.checkName(),this.registry.add(this.control,this)}handleClick(e,n,r){e.preventDefault(),!this.disabled&&(this.select(e),r&&n.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit(e))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error('\n          If you define both a name and a formControlName attribute on your radio button, their values\n          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>\n        ')}}return i.\u0275fac=function(e){return new(e||i)(Tn(Oo),Tn(Eh),Tn(LEe))},i.\u0275cmp=hs({type:i,selectors:[["p-radioButton"]],viewQuery:function(e,n){if(1&e&&Rs(SEe,5),2&e){let r;jr(r=$r())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[Ro([PEe])],decls:7,vars:23,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio",3,"checked","disabled","change","focus","blur"],["rb",""],[3,"ngClass","click"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"]],template:function(e,n){if(1&e){const r=vr();Pt(0,"div",0)(1,"div",1)(2,"input",2,3),si("change",function(a){return n.onChange(a)})("focus",function(a){return n.onInputFocus(a)})("blur",function(a){return n.onInputBlur(a)}),Nt()(),Pt(4,"div",4),si("click",function(a){gn(r);const u=_o(3);return vn(n.handleClick(a,u,!0))}),Ri(5,"span",5),Nt()(),At(6,TEe,2,9,"label",6)}2&e&&(Us(n.styleClass),He("ngStyle",n.style)("ngClass",Th(15,MEe,n.checked,n.disabled,n.focused)),tt(2),He("checked",n.checked)("disabled",n.disabled),xs("id",n.inputId)("name",n.name)("value",n.value)("tabindex",n.tabindex)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy),tt(2),He("ngClass",Th(19,DEe,n.checked,n.disabled,n.focused)),tt(2),He("ngIf",n.label))},dependencies:[vo,wo,Ho],encapsulation:2,changeDetection:0}),i})(),REe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();mC([du({transform:"{{transform}}",opacity:0}),Dc("{{transition}}",du({transform:"none",opacity:1}))]),mC([Dc("{{transition}}",du({transform:"{{transform}}",opacity:0}))]);let ZEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Nv,Pc,Nv,Pl]}),i})(),QEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})(),iTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pc,Pl,Pl]}),i})(),rTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})(),uTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pc,Pl]}),i})();const cTe=S0([],x_(vx,(i,{graphs:t})=>t)),hTe=S0({id:"default",label:"default",style:"default",rules:"default",nodes:[],edges:[]},x_(_x,(i,{graph:t})=>t)),dTe=["headerchkbox"],fTe=["filter"];function pTe(i,t){1&i&&Nr(0)}function gTe(i,t){if(1&i&&(Pt(0,"div",7),ch(1),At(2,pTe,1,0,"ng-container",8),Nt()),2&i){const e=Ze();tt(2),He("ngTemplateOutlet",e.headerTemplate)}}const JG=function(i){return{"p-checkbox-disabled":i}},mTe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}},e9=function(i){return{"pi pi-check":i}};function vTe(i,t){if(1&i){const e=vr();Pt(0,"div",12)(1,"div",13)(2,"input",14),si("focus",function(){return gn(e),vn(Ze(2).onHeaderCheckboxFocus())})("blur",function(){return gn(e),vn(Ze(2).onHeaderCheckboxBlur())})("keydown.space",function(r){return gn(e),vn(Ze(2).toggleAll(r))}),Nt()(),Pt(3,"div",15,16),si("click",function(r){return gn(e),vn(Ze(2).toggleAll(r))}),Ri(5,"span",17),Nt()()}if(2&i){const e=Ze(2);He("ngClass",yr(5,JG,e.disabled||e.toggleAllDisabled)),tt(2),He("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),tt(1),He("ngClass",Th(7,mTe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),tt(2),He("ngClass",yr(11,e9,e.allChecked))}}function _Te(i,t){1&i&&Nr(0)}const yTe=function(i){return{options:i}};function bTe(i,t){if(1&i&&(js(0),At(1,_Te,1,0,"ng-container",18),$s()),2&i){const e=Ze(2);tt(1),He("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",yr(2,yTe,e.filterOptions))}}function CTe(i,t){if(1&i){const e=vr();Pt(0,"div",20)(1,"input",21,22),si("input",function(r){return gn(e),vn(Ze(3).onFilter(r))}),Nt(),Ri(3,"span",23),Nt()}if(2&i){const e=Ze(3);tt(1),He("value",e.filterValue||"")("disabled",e.disabled),xs("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function wTe(i,t){1&i&&At(0,CTe,4,4,"div",19),2&i&&He("ngIf",Ze(2).filter)}function xTe(i,t){if(1&i&&(Pt(0,"div",7),At(1,vTe,6,13,"div",9),At(2,bTe,2,4,"ng-container",10),At(3,wTe,1,1,"ng-template",null,11,hc),Nt()),2&i){const e=_o(4),n=Ze();tt(1),He("ngIf",n.checkbox&&n.multiple&&n.showToggleAll),tt(1),He("ngIf",n.filterTemplate)("ngIfElse",e)}}function ATe(i,t){if(1&i&&(Pt(0,"span"),ur(1),Nt()),2&i){const e=Ze().$implicit,n=Ze(2);tt(1),ca(n.getOptionGroupLabel(e)||"empty")}}function ITe(i,t){1&i&&Nr(0)}function STe(i,t){1&i&&Nr(0)}const eR=function(i){return{$implicit:i}};function ETe(i,t){if(1&i&&(Pt(0,"li",25),At(1,ATe,2,1,"span",3),At(2,ITe,1,0,"ng-container",18),Nt(),At(3,STe,1,0,"ng-container",18)),2&i){const e=t.$implicit,n=Ze(2),r=_o(8);tt(1),He("ngIf",!n.groupTemplate),tt(1),He("ngTemplateOutlet",n.groupTemplate)("ngTemplateOutletContext",yr(5,eR,e)),tt(1),He("ngTemplateOutlet",r)("ngTemplateOutletContext",yr(7,eR,n.getOptionGroupChildren(e)))}}function TTe(i,t){if(1&i&&(js(0),At(1,ETe,4,9,"ng-template",24),$s()),2&i){const e=Ze();tt(1),He("ngForOf",e.optionsToRender)}}function MTe(i,t){1&i&&Nr(0)}function DTe(i,t){if(1&i&&(js(0),At(1,MTe,1,0,"ng-container",18),$s()),2&i){const e=Ze(),n=_o(8);tt(1),He("ngTemplateOutlet",n)("ngTemplateOutletContext",yr(2,eR,e.optionsToRender))}}const PTe=function(i){return{"p-highlight":i}};function LTe(i,t){if(1&i&&(Pt(0,"div",12)(1,"div",28),Ri(2,"span",17),Nt()()),2&i){const e=Ze().$implicit,n=Ze(2);He("ngClass",yr(3,JG,n.disabled||n.isOptionDisabled(e))),tt(1),He("ngClass",yr(5,PTe,n.isSelected(e))),tt(1),He("ngClass",yr(7,e9,n.isSelected(e)))}}function kTe(i,t){if(1&i&&(Pt(0,"span"),ur(1),Nt()),2&i){const e=Ze().$implicit,n=Ze(2);tt(1),ca(n.getOptionLabel(e))}}function RTe(i,t){1&i&&Nr(0)}const OTe=function(i,t){return{"p-listbox-item":!0,"p-highlight":i,"p-disabled":t}},FTe=function(i,t){return{$implicit:i,index:t}};function NTe(i,t){if(1&i){const e=vr();Pt(0,"li",27),si("click",function(r){const a=gn(e).$implicit;return vn(Ze(2).onOptionClick(r,a))})("dblclick",function(r){const a=gn(e).$implicit;return vn(Ze(2).onOptionDoubleClick(r,a))})("touchend",function(){const s=gn(e).$implicit;return vn(Ze(2).onOptionTouchEnd(s))})("keydown",function(r){const a=gn(e).$implicit;return vn(Ze(2).onOptionKeyDown(r,a))}),At(1,LTe,3,9,"div",9),At(2,kTe,2,1,"span",3),At(3,RTe,1,0,"ng-container",18),Nt()}if(2&i){const e=t.$implicit,n=t.index,r=Ze(2);He("ngClass",fa(8,OTe,r.isSelected(e),r.isOptionDisabled(e))),xs("tabindex",r.disabled||r.isOptionDisabled(e)?null:"0")("aria-label",r.getOptionLabel(e))("aria-selected",r.isSelected(e)),tt(1),He("ngIf",r.checkbox&&r.multiple),tt(1),He("ngIf",!r.itemTemplate),tt(1),He("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",fa(11,FTe,e,n))}}function BTe(i,t){1&i&&At(0,NTe,4,14,"li",26),2&i&&He("ngForOf",t.$implicit)}function zTe(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(2);tt(1),cc(" ",e.emptyFilterMessageLabel," ")}}function VTe(i,t){1&i&&Nr(0,null,30)}function UTe(i,t){if(1&i&&(Pt(0,"li",29),At(1,zTe,2,1,"ng-container",10),At(2,VTe,2,0,"ng-container",8),Nt()),2&i){const e=Ze();tt(1),He("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),tt(1),He("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function HTe(i,t){if(1&i&&(js(0),ur(1),$s()),2&i){const e=Ze(2);tt(1),cc(" ",e.emptyMessageLabel," ")}}function GTe(i,t){1&i&&Nr(0,null,31)}function WTe(i,t){if(1&i&&(Pt(0,"li",29),At(1,HTe,2,1,"ng-container",10),At(2,GTe,2,0,"ng-container",8),Nt()),2&i){const e=Ze();tt(1),He("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),tt(1),He("ngTemplateOutlet",e.emptyTemplate)}}function jTe(i,t){1&i&&Nr(0)}function $Te(i,t){if(1&i&&(Pt(0,"div",32),ch(1,1),At(2,jTe,1,0,"ng-container",8),Nt()),2&i){const e=Ze();tt(2),He("ngTemplateOutlet",e.footerTemplate)}}const qTe=[[["p-header"]],[["p-footer"]]],XTe=function(i){return{"p-listbox p-component":!0,"p-disabled":i}},YTe=["p-header","p-footer"],KTe={provide:Mc,useExisting:Xr(()=>ZTe),multi:!0};let ZTe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.cd=n,this.filterService=r,this.config=s,this.checkbox=!1,this.filter=!1,this.filterMatchMode="contains",this.metaKeySelection=!0,this.showToggleAll=!0,this.optionGroupChildren="items",this.onChange=new ki,this.onClick=new ki,this.onDblClick=new ki,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get options(){return this._options}set options(e){this._options=e,this.hasFilter()&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()}),this.filterBy&&(this.filterOptions={filter:e=>this.onFilter(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template}})}getOptionLabel(e){return this.optionLabel?ns.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ns.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?ns.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ns.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?ns.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||(this.multiple?this.checkbox?this.onOptionClickCheckbox(e,n):this.onOptionClickMultiple(e,n):this.onOptionClickSingle(e,n),this.onClick.emit({originalEvent:e,option:n,value:this.value}),this.optionTouched=!1)}onOptionTouchEnd(e){this.disabled||this.isOptionDisabled(e)||this.readonly||(this.optionTouched=!0)}onOptionDoubleClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||this.onDblClick.emit({originalEvent:e,option:n,value:this.value})}onOptionClickSingle(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let u=e.metaKey||e.ctrlKey;r?u&&(this.value=null,s=!0):(this.value=this.getOptionValue(n),s=!0)}else this.value=r?null:this.getOptionValue(n),s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickMultiple(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let u=e.metaKey||e.ctrlKey;r?(u?this.removeOption(n):this.value=[this.getOptionValue(n)],s=!0):(this.value=u&&this.value||[],this.value=[...this.value,this.getOptionValue(n)],s=!0)}else r?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickCheckbox(e,n){this.disabled||this.readonly||(this.isSelected(n)?this.removeOption(n):(this.value=this.value?this.value:[],this.value=[...this.value,this.getOptionValue(n)]),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}removeOption(e){this.value=this.value.filter(n=>!ns.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(ns.equals(s,r,this.dataKey)){n=!0;break}}else n=ns.equals(this.value,r,this.dataKey);return n}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,a=this.group?0:this.optionsToRender.length;for(let u of e)if(this.group)for(let h of this.getOptionGroupChildren(u)){let m=this.isOptionDisabled(h),w=this.isSelected(h);if(m)w?n++:r++;else{if(!w)return!1;s++}a++}else{let h=this.isOptionDisabled(u),m=this.isSelected(u);if(h)m?n++:r++;else{if(!m)return!1;s++}}return a===n||a===s||s&&a===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Kc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Kc.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilter(e){this._filterValue=e.target.value,this.activateFilter()}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let e=(this.filterBy||this.optionLabel||"label").split(","),n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this._options.filter(e=>this.filterService.filters[this.filterMatchMode](this.getOptionLabel(e),this._filterValue,this.filterLocale));else this._filteredOptions=null}resetFilter(){this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(a=>{let u=this.isOptionDisabled(a);(!u||u&&this.isSelected(a))&&n.push(this.getOptionValue(a))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}onOptionKeyDown(e,n){if(this.readonly)return;let r=e.currentTarget;switch(e.which){case 40:var s=this.findNextItem(r);s&&s.focus(),e.preventDefault();break;case 38:var a=this.findPrevItem(r);a&&a.focus(),e.preventDefault();break;case 13:this.onOptionClick(e,n),e.preventDefault()}}findNextItem(e){let n=e.nextElementSibling;return n?bn.hasClass(n,"p-disabled")||bn.isHidden(n)||bn.hasClass(n,"p-listbox-item-group")?this.findNextItem(n):n:null}findPrevItem(e){let n=e.previousElementSibling;return n?bn.hasClass(n,"p-disabled")||bn.isHidden(n)||bn.hasClass(n,"p-listbox-item-group")?this.findPrevItem(n):n:null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Tn($i),Tn(Oo),Tn(dx),Tn(og))},i.\u0275cmp=hs({type:i,selectors:[["p-listbox"]],contentQueries:function(e,n,r){if(1&e&&(Yl(r,e2,5),Yl(r,EI,5),Yl(r,Kl,4)),2&e){let s;jr(s=$r())&&(n.headerFacet=s.first),jr(s=$r())&&(n.footerFacet=s.first),jr(s=$r())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Rs(dTe,5),Rs(fTe,5)),2&e){let r;jr(r=$r())&&(n.headerCheckboxViewChild=r.first),jr(r=$r())&&(n.filterViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",listStyle:"listStyle",listStyleClass:"listStyleClass",readonly:"readonly",disabled:"disabled",checkbox:"checkbox",filter:"filter",filterBy:"filterBy",filterMatchMode:"filterMatchMode",filterLocale:"filterLocale",metaKeySelection:"metaKeySelection",dataKey:"dataKey",showToggleAll:"showToggleAll",optionLabel:"optionLabel",optionValue:"optionValue",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",optionDisabled:"optionDisabled",ariaFilterLabel:"ariaFilterLabel",filterPlaceHolder:"filterPlaceHolder",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",group:"group",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onClick:"onClick",onDblClick:"onDblClick"},features:[Ro([KTe])],ngContentSelectors:YTe,decls:12,vars:17,consts:[[3,"ngClass","ngStyle"],["class","p-listbox-header",4,"ngIf"],["role","listbox","aria-multiselectable","multiple",1,"p-listbox-list"],[4,"ngIf"],["itemslist",""],["class","p-listbox-empty-message",4,"ngIf"],["class","p-listbox-footer",4,"ngIf"],[1,"p-listbox-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-hidden-accessible"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],[1,"p-checkbox-box",3,"ngClass","click"],["headerchkbox",""],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-listbox-filter-container",4,"ngIf"],[1,"p-listbox-filter-container"],["type","text",1,"p-listbox-filter","p-inputtext","p-component",3,"value","disabled","input"],["filter",""],[1,"p-listbox-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-listbox-item-group"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown",4,"ngFor","ngForOf"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-listbox-empty-message"],["emptyFilter",""],["empty",""],[1,"p-listbox-footer"]],template:function(e,n){1&e&&(Ep(qTe),Pt(0,"div",0),At(1,gTe,3,1,"div",1),At(2,xTe,5,3,"div",1),Pt(3,"div",0)(4,"ul",2),At(5,TTe,2,1,"ng-container",3),At(6,DTe,2,4,"ng-container",3),At(7,BTe,1,1,"ng-template",null,4,hc),At(9,UTe,3,3,"li",5),At(10,WTe,3,3,"li",5),Nt()(),At(11,$Te,3,1,"div",6),Nt()),2&e&&(Us(n.styleClass),He("ngClass",yr(15,XTe,n.disabled))("ngStyle",n.style),tt(1),He("ngIf",n.headerFacet||n.headerTemplate),tt(1),He("ngIf",n.checkbox&&n.multiple&&n.showToggleAll||n.filter),tt(1),Us(n.listStyleClass),He("ngClass","p-listbox-list-wrapper")("ngStyle",n.listStyle),tt(2),He("ngIf",n.group),tt(1),He("ngIf",!n.group),tt(3),He("ngIf",n.hasFilter()&&n.isEmpty()),tt(1),He("ngIf",!n.hasFilter()&&n.isEmpty()),tt(1),He("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[vo,Ec,wo,hu,Ho,kh],styles:[".p-listbox-list-wrapper{overflow:auto}.p-listbox-list{list-style-type:none;margin:0;padding:0}.p-listbox-item{cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.p-listbox-header{display:flex;align-items:center}.p-listbox-filter-container{position:relative;flex:1 1 auto}.p-listbox-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-listbox-filter{width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),QTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl,Pc,Pl]}),i})();mC([du({transform:"{{transform}}",opacity:0}),Dc("{{transition}}")]),mC([Dc("{{transition}}",du({transform:"{{transform}}",opacity:0}))]);let rMe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pc]}),i})(),uMe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl]}),i})(),hMe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa,Pl]}),i})(),pMe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i}),i.\u0275inj=Ps({imports:[Oa]}),i})();const mMe=S0({id:"default",grid:!1,applyRules:!1,debug:!1,info:!1,full:!0,maxHeight:16384,maxWidth:16384},x_(Mv("[SysPreference] Retrieve Preferences Success",{_as:"props",_p:void 0}),(i,{Preferences:t})=>t)),vMe=S0([],x_(Bx,(i,{styles:t})=>t)),_Me=S0({id:"default",tags:[]},x_(Dz,(i,{style:t})=>t)),bMe=S0({id:Tu.default},x_(nP,(i,{message:t})=>t)),CMe=S0({drawMode:!1,groupMode:!1,zoom:1},x_(iP,(i,{message:t})=>({drawMode:t,groupMode:i.groupMode,zoom:i.zoom})),x_(rP,(i,{message:t})=>({drawMode:i.drawMode,groupMode:t,zoom:i.zoom})),x_(sP,(i,{message:t})=>({drawMode:i.drawMode,groupMode:i.groupMode,zoom:t})));let wMe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ks({type:i,bootstrap:[lAe]}),i.\u0275inj=Ps({providers:[hx,Hm],imports:[mN,UQ.forRoot(),l1e,oSe,PN,Oa,xQ.forRoot({level:dc.DEBUG}),Zre,vz,S1e,Ise,yEe,Roe,YI,Nv,Az,j2,Z2,PN,wae,Tae,IEe,REe,ZI,ZEe,Foe,mve,Uoe,rAe,XI,QEe,lle,iTe,Oae,vue,Lce,Az,QTe,rMe,uMe,hMe,Hce,pMe,Yce,phe,dme,Ov,vme,uTe,rTe,yme,tQ.forRoot({graphs:cTe,graph:hTe,styles:vMe,style:_Me,menu:bMe,preferences:mMe,parameter:CMe})]}),i})();(function n$(){if(_F)throw new Error("Cannot enable prod mode after platform setup.");vF=!1})(),hX().bootstrapModule(wMe).catch(i=>console.error(i))},3333:yt=>{yt.exports=function(ae,ye){var j=ye.length;if(0!==j){var oe=ae.length;ae.length+=j;for(var re=0;re<j;re++)ae[oe+re]=ye[re]}}},7077:function(yt,it){!function(ae){"use strict";var ye=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239],j=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],re="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u0870-\u0887\u0889-\u088e\u08a0-\u08c9\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c5d\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cdd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u1711\u171f-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4c\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ca\ua7d0\ua7d1\ua7d3\ua7d5-\ua7d9\ua7f2-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",ie={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},V="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",K={5:V,"5module":V+" export import",6:V+" const class extends export import super"},q=/^in(stanceof)?$/,le=new RegExp("["+re+"]"),Te=new RegExp("["+re+"\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0898-\u089f\u08ca-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3c\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u180f-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf-\u1ace\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]");function De(B,Be){for(var Mt=65536,sn=0;sn<Be.length;sn+=2){if((Mt+=Be[sn])>B)return!1;if((Mt+=Be[sn+1])>=B)return!0}}function xe(B,Be){return B<65?36===B:B<91||(B<97?95===B:B<123||(B<=65535?B>=170&&le.test(String.fromCharCode(B)):!1!==Be&&De(B,j)))}function _e(B,Be){return B<48?36===B:B<58||!(B<65)&&(B<91||(B<97?95===B:B<123||(B<=65535?B>=170&&Te.test(String.fromCharCode(B)):!1!==Be&&(De(B,j)||De(B,ye)))))}var Q=function(Be,Mt){void 0===Mt&&(Mt={}),this.label=Be,this.keyword=Mt.keyword,this.beforeExpr=!!Mt.beforeExpr,this.startsExpr=!!Mt.startsExpr,this.isLoop=!!Mt.isLoop,this.isAssign=!!Mt.isAssign,this.prefix=!!Mt.prefix,this.postfix=!!Mt.postfix,this.binop=Mt.binop||null,this.updateContext=null};function Re(B,Be){return new Q(B,{beforeExpr:!0,binop:Be})}var Le={beforeExpr:!0},Ve={startsExpr:!0},Ae={};function Se(B,Be){return void 0===Be&&(Be={}),Be.keyword=B,Ae[B]=new Q(B,Be)}var L={num:new Q("num",Ve),regexp:new Q("regexp",Ve),string:new Q("string",Ve),name:new Q("name",Ve),privateId:new Q("privateId",Ve),eof:new Q("eof"),bracketL:new Q("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Q("]"),braceL:new Q("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Q("}"),parenL:new Q("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Q(")"),comma:new Q(",",Le),semi:new Q(";",Le),colon:new Q(":",Le),dot:new Q("."),question:new Q("?",Le),questionDot:new Q("?."),arrow:new Q("=>",Le),template:new Q("template"),invalidTemplate:new Q("invalidTemplate"),ellipsis:new Q("...",Le),backQuote:new Q("`",Ve),dollarBraceL:new Q("${",{beforeExpr:!0,startsExpr:!0}),eq:new Q("=",{beforeExpr:!0,isAssign:!0}),assign:new Q("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Q("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Q("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Re("||",1),logicalAND:Re("&&",2),bitwiseOR:Re("|",3),bitwiseXOR:Re("^",4),bitwiseAND:Re("&",5),equality:Re("==/!=/===/!==",6),relational:Re("</>/<=/>=",7),bitShift:Re("<</>>/>>>",8),plusMin:new Q("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Re("%",10),star:Re("*",10),slash:Re("/",10),starstar:new Q("**",{beforeExpr:!0}),coalesce:Re("??",1),_break:Se("break"),_case:Se("case",Le),_catch:Se("catch"),_continue:Se("continue"),_debugger:Se("debugger"),_default:Se("default",Le),_do:Se("do",{isLoop:!0,beforeExpr:!0}),_else:Se("else",Le),_finally:Se("finally"),_for:Se("for",{isLoop:!0}),_function:Se("function",Ve),_if:Se("if"),_return:Se("return",Le),_switch:Se("switch"),_throw:Se("throw",Le),_try:Se("try"),_var:Se("var"),_const:Se("const"),_while:Se("while",{isLoop:!0}),_with:Se("with"),_new:Se("new",{beforeExpr:!0,startsExpr:!0}),_this:Se("this",Ve),_super:Se("super",Ve),_class:Se("class",Ve),_extends:Se("extends",Le),_export:Se("export"),_import:Se("import",Ve),_null:Se("null",Ve),_true:Se("true",Ve),_false:Se("false",Ve),_in:Se("in",{beforeExpr:!0,binop:7}),_instanceof:Se("instanceof",{beforeExpr:!0,binop:7}),_typeof:Se("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Se("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Se("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},ee=/\r\n?|\n|\u2028|\u2029/,Ce=new RegExp(ee.source,"g");function ze(B){return 10===B||13===B||8232===B||8233===B}function dt(B,Be,Mt){void 0===Mt&&(Mt=B.length);for(var sn=Be;sn<Mt;sn++){var An=B.charCodeAt(sn);if(ze(An))return sn<Mt-1&&13===An&&10===B.charCodeAt(sn+1)?sn+2:sn+1}return-1}var st=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,bt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ut=Object.prototype,Vt=ut.hasOwnProperty,on=ut.toString,Ct=Object.hasOwn||function(B,Be){return Vt.call(B,Be)},rn=Array.isArray||function(B){return"[object Array]"===on.call(B)};function Qt(B){return new RegExp("^(?:"+B.replace(/ /g,"|")+")$")}function Ht(B){return B<=65535?String.fromCharCode(B):(B-=65536,String.fromCharCode(55296+(B>>10),56320+(1023&B)))}var Qn=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,en=function(Be,Mt){this.line=Be,this.column=Mt};en.prototype.offset=function(Be){return new en(this.line,this.column+Be)};var Sn=function(Be,Mt,sn){this.start=Mt,this.end=sn,null!==Be.sourceFile&&(this.source=Be.sourceFile)};function Pn(B,Be){for(var Mt=1,sn=0;;){var An=dt(B,sn,Be);if(An<0)return new en(Mt,Be-sn);++Mt,sn=An}}var xt={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Jt=!1;function Gn(B){var Be={};for(var Mt in xt)Be[Mt]=B&&Ct(B,Mt)?B[Mt]:xt[Mt];if("latest"===Be.ecmaVersion?Be.ecmaVersion=1e8:null==Be.ecmaVersion?(!Jt&&"object"==typeof console&&console.warn&&(Jt=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),Be.ecmaVersion=11):Be.ecmaVersion>=2015&&(Be.ecmaVersion-=2009),null==Be.allowReserved&&(Be.allowReserved=Be.ecmaVersion<5),null==B.allowHashBang&&(Be.allowHashBang=Be.ecmaVersion>=14),rn(Be.onToken)){var sn=Be.onToken;Be.onToken=function(An){return sn.push(An)}}return rn(Be.onComment)&&(Be.onComment=function ri(B,Be){return function(Mt,sn,An,qn,Xi,lr){var Pr={type:Mt?"Block":"Line",value:sn,start:An,end:qn};B.locations&&(Pr.loc=new Sn(this,Xi,lr)),B.ranges&&(Pr.range=[An,qn]),Be.push(Pr)}}(Be,Be.onComment)),Be}function It(B,Be){return 2|(B?4:0)|(Be?8:0)}var us=function(Be,Mt,sn){this.options=Be=Gn(Be),this.sourceFile=Be.sourceFile,this.keywords=Qt(K[Be.ecmaVersion>=6?6:"module"===Be.sourceType?"5module":5]);var An="";!0!==Be.allowReserved&&(An=ie[Be.ecmaVersion>=6?6:5===Be.ecmaVersion?5:3],"module"===Be.sourceType&&(An+=" await")),this.reservedWords=Qt(An);var qn=(An?An+" ":"")+ie.strict;this.reservedWordsStrict=Qt(qn),this.reservedWordsStrictBind=Qt(qn+" "+ie.strictBind),this.input=String(Mt),this.containsEsc=!1,sn?(this.pos=sn,this.lineStart=this.input.lastIndexOf("\n",sn-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(ee).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=L.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===Be.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&Be.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},vs={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};us.prototype.parse=function(){var Be=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(Be)},vs.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},vs.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},vs.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},vs.canAwait.get=function(){for(var B=this.scopeStack.length-1;B>=0;B--){var Be=this.scopeStack[B];if(Be.inClassFieldInit||256&Be.flags)return!1;if(2&Be.flags)return(4&Be.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},vs.allowSuper.get=function(){var B=this.currentThisScope();return(64&B.flags)>0||B.inClassFieldInit||this.options.allowSuperOutsideMethod},vs.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},vs.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},vs.allowNewDotTarget.get=function(){var B=this.currentThisScope();return(258&B.flags)>0||B.inClassFieldInit},vs.inClassStaticBlock.get=function(){return(256&this.currentVarScope().flags)>0},us.extend=function(){for(var Be=[],Mt=arguments.length;Mt--;)Be[Mt]=arguments[Mt];for(var sn=this,An=0;An<Be.length;An++)sn=Be[An](sn);return sn},us.parse=function(Be,Mt){return new this(Mt,Be).parse()},us.parseExpressionAt=function(Be,Mt,sn){var An=new this(sn,Be,Mt);return An.nextToken(),An.parseExpression()},us.tokenizer=function(Be,Mt){return new this(Mt,Be)},Object.defineProperties(us.prototype,vs);var Hr=us.prototype,Ds=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Hr.strictDirective=function(B){if(this.options.ecmaVersion<5)return!1;for(;;){bt.lastIndex=B,B+=bt.exec(this.input)[0].length;var Be=Ds.exec(this.input.slice(B));if(!Be)return!1;if("use strict"===(Be[1]||Be[2])){bt.lastIndex=B+Be[0].length;var Mt=bt.exec(this.input),sn=Mt.index+Mt[0].length,An=this.input.charAt(sn);return";"===An||"}"===An||ee.test(Mt[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(An)||"!"===An&&"="===this.input.charAt(sn+1))}bt.lastIndex=B+=Be[0].length,B+=bt.exec(this.input)[0].length,";"===this.input[B]&&B++}},Hr.eat=function(B){return this.type===B&&(this.next(),!0)},Hr.isContextual=function(B){return this.type===L.name&&this.value===B&&!this.containsEsc},Hr.eatContextual=function(B){return!!this.isContextual(B)&&(this.next(),!0)},Hr.expectContextual=function(B){this.eatContextual(B)||this.unexpected()},Hr.canInsertSemicolon=function(){return this.type===L.eof||this.type===L.braceR||ee.test(this.input.slice(this.lastTokEnd,this.start))},Hr.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Hr.semicolon=function(){!this.eat(L.semi)&&!this.insertSemicolon()&&this.unexpected()},Hr.afterTrailingComma=function(B,Be){if(this.type===B)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),Be||this.next(),!0},Hr.expect=function(B){this.eat(B)||this.unexpected()},Hr.unexpected=function(B){this.raise(B??this.start,"Unexpected token")};var nr=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Hr.checkPatternErrors=function(B,Be){if(B){B.trailingComma>-1&&this.raiseRecoverable(B.trailingComma,"Comma is not permitted after the rest element");var Mt=Be?B.parenthesizedAssign:B.parenthesizedBind;Mt>-1&&this.raiseRecoverable(Mt,Be?"Assigning to rvalue":"Parenthesized pattern")}},Hr.checkExpressionErrors=function(B,Be){if(!B)return!1;var Mt=B.shorthandAssign,sn=B.doubleProto;if(!Be)return Mt>=0||sn>=0;Mt>=0&&this.raise(Mt,"Shorthand property assignments are valid only in destructuring patterns"),sn>=0&&this.raiseRecoverable(sn,"Redefinition of __proto__ property")},Hr.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Hr.isSimpleAssignTarget=function(B){return"ParenthesizedExpression"===B.type?this.isSimpleAssignTarget(B.expression):"Identifier"===B.type||"MemberExpression"===B.type};var fr=us.prototype;fr.parseTopLevel=function(B){var Be=Object.create(null);for(B.body||(B.body=[]);this.type!==L.eof;){var Mt=this.parseStatement(null,!0,Be);B.body.push(Mt)}if(this.inModule)for(var sn=0,An=Object.keys(this.undefinedExports);sn<An.length;sn+=1){var qn=An[sn];this.raiseRecoverable(this.undefinedExports[qn].start,"Export '"+qn+"' is not defined")}return this.adaptDirectivePrologue(B.body),this.next(),B.sourceType=this.options.sourceType,this.finishNode(B,"Program")};var y={kind:"loop"},l={kind:"switch"};fr.isLet=function(B){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;bt.lastIndex=this.pos;var Be=bt.exec(this.input),Mt=this.pos+Be[0].length,sn=this.input.charCodeAt(Mt);if(91===sn||92===sn||sn>55295&&sn<56320)return!0;if(B)return!1;if(123===sn)return!0;if(xe(sn,!0)){for(var An=Mt+1;_e(sn=this.input.charCodeAt(An),!0);)++An;if(92===sn||sn>55295&&sn<56320)return!0;var qn=this.input.slice(Mt,An);if(!q.test(qn))return!0}return!1},fr.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;bt.lastIndex=this.pos;var Mt,B=bt.exec(this.input),Be=this.pos+B[0].length;return!(ee.test(this.input.slice(this.pos,Be))||"function"!==this.input.slice(Be,Be+8)||Be+8!==this.input.length&&(_e(Mt=this.input.charCodeAt(Be+8))||Mt>55295&&Mt<56320))},fr.parseStatement=function(B,Be,Mt){var qn,sn=this.type,An=this.startNode();switch(this.isLet(B)&&(sn=L._var,qn="let"),sn){case L._break:case L._continue:return this.parseBreakContinueStatement(An,sn.keyword);case L._debugger:return this.parseDebuggerStatement(An);case L._do:return this.parseDoStatement(An);case L._for:return this.parseForStatement(An);case L._function:return B&&(this.strict||"if"!==B&&"label"!==B)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(An,!1,!B);case L._class:return B&&this.unexpected(),this.parseClass(An,!0);case L._if:return this.parseIfStatement(An);case L._return:return this.parseReturnStatement(An);case L._switch:return this.parseSwitchStatement(An);case L._throw:return this.parseThrowStatement(An);case L._try:return this.parseTryStatement(An);case L._const:case L._var:return qn=qn||this.value,B&&"var"!==qn&&this.unexpected(),this.parseVarStatement(An,qn);case L._while:return this.parseWhileStatement(An);case L._with:return this.parseWithStatement(An);case L.braceL:return this.parseBlock(!0,An);case L.semi:return this.parseEmptyStatement(An);case L._export:case L._import:if(this.options.ecmaVersion>10&&sn===L._import){bt.lastIndex=this.pos;var Xi=bt.exec(this.input),Pr=this.input.charCodeAt(this.pos+Xi[0].length);if(40===Pr||46===Pr)return this.parseExpressionStatement(An,this.parseExpression())}return this.options.allowImportExportEverywhere||(Be||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),sn===L._import?this.parseImport(An):this.parseExport(An,Mt);default:if(this.isAsyncFunction())return B&&this.unexpected(),this.next(),this.parseFunctionStatement(An,!0,!B);var Ys=this.value,ba=this.parseExpression();return sn===L.name&&"Identifier"===ba.type&&this.eat(L.colon)?this.parseLabeledStatement(An,Ys,ba,B):this.parseExpressionStatement(An,ba)}},fr.parseBreakContinueStatement=function(B,Be){var Mt="break"===Be;this.next(),this.eat(L.semi)||this.insertSemicolon()?B.label=null:this.type!==L.name?this.unexpected():(B.label=this.parseIdent(),this.semicolon());for(var sn=0;sn<this.labels.length;++sn){var An=this.labels[sn];if((null==B.label||An.name===B.label.name)&&(null!=An.kind&&(Mt||"loop"===An.kind)||B.label&&Mt))break}return sn===this.labels.length&&this.raise(B.start,"Unsyntactic "+Be),this.finishNode(B,Mt?"BreakStatement":"ContinueStatement")},fr.parseDebuggerStatement=function(B){return this.next(),this.semicolon(),this.finishNode(B,"DebuggerStatement")},fr.parseDoStatement=function(B){return this.next(),this.labels.push(y),B.body=this.parseStatement("do"),this.labels.pop(),this.expect(L._while),B.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(L.semi):this.semicolon(),this.finishNode(B,"DoWhileStatement")},fr.parseForStatement=function(B){this.next();var Be=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(y),this.enterScope(0),this.expect(L.parenL),this.type===L.semi)return Be>-1&&this.unexpected(Be),this.parseFor(B,null);var Mt=this.isLet();if(this.type===L._var||this.type===L._const||Mt){var sn=this.startNode(),An=Mt?"let":this.value;return this.next(),this.parseVar(sn,!0,An),this.finishNode(sn,"VariableDeclaration"),(this.type===L._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===sn.declarations.length?(this.options.ecmaVersion>=9&&(this.type===L._in?Be>-1&&this.unexpected(Be):B.await=Be>-1),this.parseForIn(B,sn)):(Be>-1&&this.unexpected(Be),this.parseFor(B,sn))}var qn=this.isContextual("let"),Xi=!1,lr=new nr,Pr=this.parseExpression(!(Be>-1)||"await",lr);return this.type===L._in||(Xi=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===L._in?Be>-1&&this.unexpected(Be):B.await=Be>-1),qn&&Xi&&this.raise(Pr.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Pr,!1,lr),this.checkLValPattern(Pr),this.parseForIn(B,Pr)):(this.checkExpressionErrors(lr,!0),Be>-1&&this.unexpected(Be),this.parseFor(B,Pr))},fr.parseFunctionStatement=function(B,Be,Mt){return this.next(),this.parseFunction(B,_|(Mt?0:C),!1,Be)},fr.parseIfStatement=function(B){return this.next(),B.test=this.parseParenExpression(),B.consequent=this.parseStatement("if"),B.alternate=this.eat(L._else)?this.parseStatement("if"):null,this.finishNode(B,"IfStatement")},fr.parseReturnStatement=function(B){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(L.semi)||this.insertSemicolon()?B.argument=null:(B.argument=this.parseExpression(),this.semicolon()),this.finishNode(B,"ReturnStatement")},fr.parseSwitchStatement=function(B){this.next(),B.discriminant=this.parseParenExpression(),B.cases=[],this.expect(L.braceL),this.labels.push(l),this.enterScope(0);for(var Be,Mt=!1;this.type!==L.braceR;)if(this.type===L._case||this.type===L._default){var sn=this.type===L._case;Be&&this.finishNode(Be,"SwitchCase"),B.cases.push(Be=this.startNode()),Be.consequent=[],this.next(),sn?Be.test=this.parseExpression():(Mt&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),Mt=!0,Be.test=null),this.expect(L.colon)}else Be||this.unexpected(),Be.consequent.push(this.parseStatement(null));return this.exitScope(),Be&&this.finishNode(Be,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(B,"SwitchStatement")},fr.parseThrowStatement=function(B){return this.next(),ee.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),B.argument=this.parseExpression(),this.semicolon(),this.finishNode(B,"ThrowStatement")};var d=[];fr.parseTryStatement=function(B){if(this.next(),B.block=this.parseBlock(),B.handler=null,this.type===L._catch){var Be=this.startNode();if(this.next(),this.eat(L.parenL)){Be.param=this.parseBindingAtom();var Mt="Identifier"===Be.param.type;this.enterScope(Mt?32:0),this.checkLValPattern(Be.param,Mt?4:2),this.expect(L.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),Be.param=null,this.enterScope(0);Be.body=this.parseBlock(!1),this.exitScope(),B.handler=this.finishNode(Be,"CatchClause")}return B.finalizer=this.eat(L._finally)?this.parseBlock():null,!B.handler&&!B.finalizer&&this.raise(B.start,"Missing catch or finally clause"),this.finishNode(B,"TryStatement")},fr.parseVarStatement=function(B,Be){return this.next(),this.parseVar(B,!1,Be),this.semicolon(),this.finishNode(B,"VariableDeclaration")},fr.parseWhileStatement=function(B){return this.next(),B.test=this.parseParenExpression(),this.labels.push(y),B.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(B,"WhileStatement")},fr.parseWithStatement=function(B){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),B.object=this.parseParenExpression(),B.body=this.parseStatement("with"),this.finishNode(B,"WithStatement")},fr.parseEmptyStatement=function(B){return this.next(),this.finishNode(B,"EmptyStatement")},fr.parseLabeledStatement=function(B,Be,Mt,sn){for(var An=0,qn=this.labels;An<qn.length;An+=1)qn[An].name===Be&&this.raise(Mt.start,"Label '"+Be+"' is already declared");for(var lr=this.type.isLoop?"loop":this.type===L._switch?"switch":null,Pr=this.labels.length-1;Pr>=0;Pr--){var Ys=this.labels[Pr];if(Ys.statementStart!==B.start)break;Ys.statementStart=this.start,Ys.kind=lr}return this.labels.push({name:Be,kind:lr,statementStart:this.start}),B.body=this.parseStatement(sn?-1===sn.indexOf("label")?sn+"label":sn:"label"),this.labels.pop(),B.label=Mt,this.finishNode(B,"LabeledStatement")},fr.parseExpressionStatement=function(B,Be){return B.expression=Be,this.semicolon(),this.finishNode(B,"ExpressionStatement")},fr.parseBlock=function(B,Be,Mt){for(void 0===B&&(B=!0),void 0===Be&&(Be=this.startNode()),Be.body=[],this.expect(L.braceL),B&&this.enterScope(0);this.type!==L.braceR;){var sn=this.parseStatement(null);Be.body.push(sn)}return Mt&&(this.strict=!1),this.next(),B&&this.exitScope(),this.finishNode(Be,"BlockStatement")},fr.parseFor=function(B,Be){return B.init=Be,this.expect(L.semi),B.test=this.type===L.semi?null:this.parseExpression(),this.expect(L.semi),B.update=this.type===L.parenR?null:this.parseExpression(),this.expect(L.parenR),B.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(B,"ForStatement")},fr.parseForIn=function(B,Be){var Mt=this.type===L._in;return this.next(),"VariableDeclaration"===Be.type&&null!=Be.declarations[0].init&&(!Mt||this.options.ecmaVersion<8||this.strict||"var"!==Be.kind||"Identifier"!==Be.declarations[0].id.type)&&this.raise(Be.start,(Mt?"for-in":"for-of")+" loop variable declaration may not have an initializer"),B.left=Be,B.right=Mt?this.parseExpression():this.parseMaybeAssign(),this.expect(L.parenR),B.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(B,Mt?"ForInStatement":"ForOfStatement")},fr.parseVar=function(B,Be,Mt){for(B.declarations=[],B.kind=Mt;;){var sn=this.startNode();if(this.parseVarId(sn,Mt),this.eat(L.eq)?sn.init=this.parseMaybeAssign(Be):"const"!==Mt||this.type===L._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===sn.id.type||Be&&(this.type===L._in||this.isContextual("of"))?sn.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),B.declarations.push(this.finishNode(sn,"VariableDeclarator")),!this.eat(L.comma))break}return B},fr.parseVarId=function(B,Be){B.id=this.parseBindingAtom(),this.checkLValPattern(B.id,"var"===Be?1:2,!1)};var _=1,C=2;function k(B,Be){var Mt=Be.key.name,sn=B[Mt],An="true";return"MethodDefinition"===Be.type&&("get"===Be.kind||"set"===Be.kind)&&(An=(Be.static?"s":"i")+Be.kind),"iget"===sn&&"iset"===An||"iset"===sn&&"iget"===An||"sget"===sn&&"sset"===An||"sset"===sn&&"sget"===An?(B[Mt]="true",!1):!!sn||(B[Mt]=An,!1)}function N(B,Be){var sn=B.key;return!B.computed&&("Identifier"===sn.type&&sn.name===Be||"Literal"===sn.type&&sn.value===Be)}fr.parseFunction=function(B,Be,Mt,sn,An){this.initFunction(B),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!sn)&&(this.type===L.star&&Be&C&&this.unexpected(),B.generator=this.eat(L.star)),this.options.ecmaVersion>=8&&(B.async=!!sn),Be&_&&(B.id=4&Be&&this.type!==L.name?null:this.parseIdent(),B.id&&!(Be&C)&&this.checkLValSimple(B.id,this.strict||B.generator||B.async?this.treatFunctionsAsVar?1:2:3));var qn=this.yieldPos,Xi=this.awaitPos,lr=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(It(B.async,B.generator)),Be&_||(B.id=this.type===L.name?this.parseIdent():null),this.parseFunctionParams(B),this.parseFunctionBody(B,Mt,!1,An),this.yieldPos=qn,this.awaitPos=Xi,this.awaitIdentPos=lr,this.finishNode(B,Be&_?"FunctionDeclaration":"FunctionExpression")},fr.parseFunctionParams=function(B){this.expect(L.parenL),B.params=this.parseBindingList(L.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},fr.parseClass=function(B,Be){this.next();var Mt=this.strict;this.strict=!0,this.parseClassId(B,Be),this.parseClassSuper(B);var sn=this.enterClassBody(),An=this.startNode(),qn=!1;for(An.body=[],this.expect(L.braceL);this.type!==L.braceR;){var Xi=this.parseClassElement(null!==B.superClass);Xi&&(An.body.push(Xi),"MethodDefinition"===Xi.type&&"constructor"===Xi.kind?(qn&&this.raise(Xi.start,"Duplicate constructor in the same class"),qn=!0):Xi.key&&"PrivateIdentifier"===Xi.key.type&&k(sn,Xi)&&this.raiseRecoverable(Xi.key.start,"Identifier '#"+Xi.key.name+"' has already been declared"))}return this.strict=Mt,this.next(),B.body=this.finishNode(An,"ClassBody"),this.exitClassBody(),this.finishNode(B,Be?"ClassDeclaration":"ClassExpression")},fr.parseClassElement=function(B){if(this.eat(L.semi))return null;var Be=this.options.ecmaVersion,Mt=this.startNode(),sn="",An=!1,qn=!1,Xi="method",lr=!1;if(this.eatContextual("static")){if(Be>=13&&this.eat(L.braceL))return this.parseClassStaticBlock(Mt),Mt;this.isClassElementNameStart()||this.type===L.star?lr=!0:sn="static"}if(Mt.static=lr,!sn&&Be>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==L.star||this.canInsertSemicolon()?sn="async":qn=!0),!sn&&(Be>=9||!qn)&&this.eat(L.star)&&(An=!0),!sn&&!qn&&!An){var Pr=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Xi=Pr:sn=Pr)}if(sn?(Mt.computed=!1,Mt.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),Mt.key.name=sn,this.finishNode(Mt.key,"Identifier")):this.parseClassElementName(Mt),Be<13||this.type===L.parenL||"method"!==Xi||An||qn){var Ys=!Mt.static&&N(Mt,"constructor"),ba=Ys&&B;Ys&&"method"!==Xi&&this.raise(Mt.key.start,"Constructor can't have get/set modifier"),Mt.kind=Ys?"constructor":Xi,this.parseClassMethod(Mt,An,qn,ba)}else this.parseClassField(Mt);return Mt},fr.isClassElementNameStart=function(){return this.type===L.name||this.type===L.privateId||this.type===L.num||this.type===L.string||this.type===L.bracketL||this.type.keyword},fr.parseClassElementName=function(B){this.type===L.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),B.computed=!1,B.key=this.parsePrivateIdent()):this.parsePropertyName(B)},fr.parseClassMethod=function(B,Be,Mt,sn){var An=B.key;"constructor"===B.kind?(Be&&this.raise(An.start,"Constructor can't be a generator"),Mt&&this.raise(An.start,"Constructor can't be an async method")):B.static&&N(B,"prototype")&&this.raise(An.start,"Classes may not have a static property named prototype");var qn=B.value=this.parseMethod(Be,Mt,sn);return"get"===B.kind&&0!==qn.params.length&&this.raiseRecoverable(qn.start,"getter should have no params"),"set"===B.kind&&1!==qn.params.length&&this.raiseRecoverable(qn.start,"setter should have exactly one param"),"set"===B.kind&&"RestElement"===qn.params[0].type&&this.raiseRecoverable(qn.params[0].start,"Setter cannot use rest params"),this.finishNode(B,"MethodDefinition")},fr.parseClassField=function(B){if(N(B,"constructor")?this.raise(B.key.start,"Classes can't have a field named 'constructor'"):B.static&&N(B,"prototype")&&this.raise(B.key.start,"Classes can't have a static field named 'prototype'"),this.eat(L.eq)){var Be=this.currentThisScope(),Mt=Be.inClassFieldInit;Be.inClassFieldInit=!0,B.value=this.parseMaybeAssign(),Be.inClassFieldInit=Mt}else B.value=null;return this.semicolon(),this.finishNode(B,"PropertyDefinition")},fr.parseClassStaticBlock=function(B){B.body=[];var Be=this.labels;for(this.labels=[],this.enterScope(320);this.type!==L.braceR;){var Mt=this.parseStatement(null);B.body.push(Mt)}return this.next(),this.exitScope(),this.labels=Be,this.finishNode(B,"StaticBlock")},fr.parseClassId=function(B,Be){this.type===L.name?(B.id=this.parseIdent(),Be&&this.checkLValSimple(B.id,2,!1)):(!0===Be&&this.unexpected(),B.id=null)},fr.parseClassSuper=function(B){B.superClass=this.eat(L._extends)?this.parseExprSubscripts(!1):null},fr.enterClassBody=function(){var B={declared:Object.create(null),used:[]};return this.privateNameStack.push(B),B.declared},fr.exitClassBody=function(){for(var B=this.privateNameStack.pop(),Be=B.declared,Mt=B.used,sn=this.privateNameStack.length,An=0===sn?null:this.privateNameStack[sn-1],qn=0;qn<Mt.length;++qn){var Xi=Mt[qn];Ct(Be,Xi.name)||(An?An.used.push(Xi):this.raiseRecoverable(Xi.start,"Private field '#"+Xi.name+"' must be declared in an enclosing class"))}},fr.parseExport=function(B,Be){if(this.next(),this.eat(L.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(B.exported=this.parseModuleExportName(),this.checkExport(Be,B.exported,this.lastTokStart)):B.exported=null),this.expectContextual("from"),this.type!==L.string&&this.unexpected(),B.source=this.parseExprAtom(),this.semicolon(),this.finishNode(B,"ExportAllDeclaration");if(this.eat(L._default)){var Mt;if(this.checkExport(Be,"default",this.lastTokStart),this.type===L._function||(Mt=this.isAsyncFunction())){var sn=this.startNode();this.next(),Mt&&this.next(),B.declaration=this.parseFunction(sn,4|_,!1,Mt)}else if(this.type===L._class){var An=this.startNode();B.declaration=this.parseClass(An,"nullableID")}else B.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(B,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())B.declaration=this.parseStatement(null),"VariableDeclaration"===B.declaration.type?this.checkVariableExport(Be,B.declaration.declarations):this.checkExport(Be,B.declaration.id,B.declaration.id.start),B.specifiers=[],B.source=null;else{if(B.declaration=null,B.specifiers=this.parseExportSpecifiers(Be),this.eatContextual("from"))this.type!==L.string&&this.unexpected(),B.source=this.parseExprAtom();else{for(var qn=0,Xi=B.specifiers;qn<Xi.length;qn+=1){var lr=Xi[qn];this.checkUnreserved(lr.local),this.checkLocalExport(lr.local),"Literal"===lr.local.type&&this.raise(lr.local.start,"A string literal cannot be used as an exported binding without `from`.")}B.source=null}this.semicolon()}return this.finishNode(B,"ExportNamedDeclaration")},fr.checkExport=function(B,Be,Mt){!B||("string"!=typeof Be&&(Be="Identifier"===Be.type?Be.name:Be.value),Ct(B,Be)&&this.raiseRecoverable(Mt,"Duplicate export '"+Be+"'"),B[Be]=!0)},fr.checkPatternExport=function(B,Be){var Mt=Be.type;if("Identifier"===Mt)this.checkExport(B,Be,Be.start);else if("ObjectPattern"===Mt)for(var sn=0,An=Be.properties;sn<An.length;sn+=1)this.checkPatternExport(B,An[sn]);else if("ArrayPattern"===Mt)for(var Xi=0,lr=Be.elements;Xi<lr.length;Xi+=1){var Pr=lr[Xi];Pr&&this.checkPatternExport(B,Pr)}else"Property"===Mt?this.checkPatternExport(B,Be.value):"AssignmentPattern"===Mt?this.checkPatternExport(B,Be.left):"RestElement"===Mt?this.checkPatternExport(B,Be.argument):"ParenthesizedExpression"===Mt&&this.checkPatternExport(B,Be.expression)},fr.checkVariableExport=function(B,Be){if(B)for(var Mt=0,sn=Be;Mt<sn.length;Mt+=1)this.checkPatternExport(B,sn[Mt].id)},fr.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},fr.parseExportSpecifiers=function(B){var Be=[],Mt=!0;for(this.expect(L.braceL);!this.eat(L.braceR);){if(Mt)Mt=!1;else if(this.expect(L.comma),this.afterTrailingComma(L.braceR))break;var sn=this.startNode();sn.local=this.parseModuleExportName(),sn.exported=this.eatContextual("as")?this.parseModuleExportName():sn.local,this.checkExport(B,sn.exported,sn.exported.start),Be.push(this.finishNode(sn,"ExportSpecifier"))}return Be},fr.parseImport=function(B){return this.next(),this.type===L.string?(B.specifiers=d,B.source=this.parseExprAtom()):(B.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),B.source=this.type===L.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(B,"ImportDeclaration")},fr.parseImportSpecifiers=function(){var B=[],Be=!0;if(this.type===L.name){var Mt=this.startNode();if(Mt.local=this.parseIdent(),this.checkLValSimple(Mt.local,2),B.push(this.finishNode(Mt,"ImportDefaultSpecifier")),!this.eat(L.comma))return B}if(this.type===L.star){var sn=this.startNode();return this.next(),this.expectContextual("as"),sn.local=this.parseIdent(),this.checkLValSimple(sn.local,2),B.push(this.finishNode(sn,"ImportNamespaceSpecifier")),B}for(this.expect(L.braceL);!this.eat(L.braceR);){if(Be)Be=!1;else if(this.expect(L.comma),this.afterTrailingComma(L.braceR))break;var An=this.startNode();An.imported=this.parseModuleExportName(),this.eatContextual("as")?An.local=this.parseIdent():(this.checkUnreserved(An.imported),An.local=An.imported),this.checkLValSimple(An.local,2),B.push(this.finishNode(An,"ImportSpecifier"))}return B},fr.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===L.string){var B=this.parseLiteral(this.value);return Qn.test(B.value)&&this.raise(B.start,"An export name cannot include a lone surrogate."),B}return this.parseIdent(!0)},fr.adaptDirectivePrologue=function(B){for(var Be=0;Be<B.length&&this.isDirectiveCandidate(B[Be]);++Be)B[Be].directive=B[Be].expression.raw.slice(1,-1)},fr.isDirectiveCandidate=function(B){return this.options.ecmaVersion>=5&&"ExpressionStatement"===B.type&&"Literal"===B.expression.type&&"string"==typeof B.expression.value&&('"'===this.input[B.start]||"'"===this.input[B.start])};var z=us.prototype;z.toAssignable=function(B,Be,Mt){if(this.options.ecmaVersion>=6&&B)switch(B.type){case"Identifier":this.inAsync&&"await"===B.name&&this.raise(B.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":B.type="ObjectPattern",Mt&&this.checkPatternErrors(Mt,!0);for(var sn=0,An=B.properties;sn<An.length;sn+=1){var qn=An[sn];this.toAssignable(qn,Be),"RestElement"===qn.type&&("ArrayPattern"===qn.argument.type||"ObjectPattern"===qn.argument.type)&&this.raise(qn.argument.start,"Unexpected token")}break;case"Property":"init"!==B.kind&&this.raise(B.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(B.value,Be);break;case"ArrayExpression":B.type="ArrayPattern",Mt&&this.checkPatternErrors(Mt,!0),this.toAssignableList(B.elements,Be);break;case"SpreadElement":B.type="RestElement",this.toAssignable(B.argument,Be),"AssignmentPattern"===B.argument.type&&this.raise(B.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==B.operator&&this.raise(B.left.end,"Only '=' operator can be used for specifying default value."),B.type="AssignmentPattern",delete B.operator,this.toAssignable(B.left,Be);break;case"ParenthesizedExpression":this.toAssignable(B.expression,Be,Mt);break;case"ChainExpression":this.raiseRecoverable(B.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!Be)break;default:this.raise(B.start,"Assigning to rvalue")}else Mt&&this.checkPatternErrors(Mt,!0);return B},z.toAssignableList=function(B,Be){for(var Mt=B.length,sn=0;sn<Mt;sn++){var An=B[sn];An&&this.toAssignable(An,Be)}if(Mt){var qn=B[Mt-1];6===this.options.ecmaVersion&&Be&&qn&&"RestElement"===qn.type&&"Identifier"!==qn.argument.type&&this.unexpected(qn.argument.start)}return B},z.parseSpread=function(B){var Be=this.startNode();return this.next(),Be.argument=this.parseMaybeAssign(!1,B),this.finishNode(Be,"SpreadElement")},z.parseRestBinding=function(){var B=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==L.name&&this.unexpected(),B.argument=this.parseBindingAtom(),this.finishNode(B,"RestElement")},z.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case L.bracketL:var B=this.startNode();return this.next(),B.elements=this.parseBindingList(L.bracketR,!0,!0),this.finishNode(B,"ArrayPattern");case L.braceL:return this.parseObj(!0)}return this.parseIdent()},z.parseBindingList=function(B,Be,Mt){for(var sn=[],An=!0;!this.eat(B);)if(An?An=!1:this.expect(L.comma),Be&&this.type===L.comma)sn.push(null);else{if(Mt&&this.afterTrailingComma(B))break;if(this.type===L.ellipsis){var qn=this.parseRestBinding();this.parseBindingListItem(qn),sn.push(qn),this.type===L.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(B);break}var Xi=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(Xi),sn.push(Xi)}return sn},z.parseBindingListItem=function(B){return B},z.parseMaybeDefault=function(B,Be,Mt){if(Mt=Mt||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(L.eq))return Mt;var sn=this.startNodeAt(B,Be);return sn.left=Mt,sn.right=this.parseMaybeAssign(),this.finishNode(sn,"AssignmentPattern")},z.checkLValSimple=function(B,Be,Mt){void 0===Be&&(Be=0);var sn=0!==Be;switch(B.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(B.name)&&this.raiseRecoverable(B.start,(sn?"Binding ":"Assigning to ")+B.name+" in strict mode"),sn&&(2===Be&&"let"===B.name&&this.raiseRecoverable(B.start,"let is disallowed as a lexically bound name"),Mt&&(Ct(Mt,B.name)&&this.raiseRecoverable(B.start,"Argument name clash"),Mt[B.name]=!0),5!==Be&&this.declareName(B.name,Be,B.start));break;case"ChainExpression":this.raiseRecoverable(B.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":sn&&this.raiseRecoverable(B.start,"Binding member expression");break;case"ParenthesizedExpression":return sn&&this.raiseRecoverable(B.start,"Binding parenthesized expression"),this.checkLValSimple(B.expression,Be,Mt);default:this.raise(B.start,(sn?"Binding":"Assigning to")+" rvalue")}},z.checkLValPattern=function(B,Be,Mt){switch(void 0===Be&&(Be=0),B.type){case"ObjectPattern":for(var sn=0,An=B.properties;sn<An.length;sn+=1)this.checkLValInnerPattern(An[sn],Be,Mt);break;case"ArrayPattern":for(var Xi=0,lr=B.elements;Xi<lr.length;Xi+=1){var Pr=lr[Xi];Pr&&this.checkLValInnerPattern(Pr,Be,Mt)}break;default:this.checkLValSimple(B,Be,Mt)}},z.checkLValInnerPattern=function(B,Be,Mt){switch(void 0===Be&&(Be=0),B.type){case"Property":this.checkLValInnerPattern(B.value,Be,Mt);break;case"AssignmentPattern":this.checkLValPattern(B.left,Be,Mt);break;case"RestElement":this.checkLValPattern(B.argument,Be,Mt);break;default:this.checkLValPattern(B,Be,Mt)}};var D=function(Be,Mt,sn,An,qn){this.token=Be,this.isExpr=!!Mt,this.preserveSpace=!!sn,this.override=An,this.generator=!!qn},H={b_stat:new D("{",!1),b_expr:new D("{",!0),b_tmpl:new D("${",!1),p_stat:new D("(",!1),p_expr:new D("(",!0),q_tmpl:new D("`",!0,!0,function(B){return B.tryReadTemplateToken()}),f_stat:new D("function",!1),f_expr:new D("function",!0),f_expr_gen:new D("function",!0,!1,null,!0),f_gen:new D("function",!1,!1,null,!0)},Z=us.prototype;Z.initialContext=function(){return[H.b_stat]},Z.curContext=function(){return this.context[this.context.length-1]},Z.braceIsBlock=function(B){var Be=this.curContext();return Be===H.f_expr||Be===H.f_stat||(B!==L.colon||Be!==H.b_stat&&Be!==H.b_expr?B===L._return||B===L.name&&this.exprAllowed?ee.test(this.input.slice(this.lastTokEnd,this.start)):B===L._else||B===L.semi||B===L.eof||B===L.parenR||B===L.arrow||(B===L.braceL?Be===H.b_stat:B!==L._var&&B!==L._const&&B!==L.name&&!this.exprAllowed):!Be.isExpr)},Z.inGeneratorContext=function(){for(var B=this.context.length-1;B>=1;B--){var Be=this.context[B];if("function"===Be.token)return Be.generator}return!1},Z.updateContext=function(B){var Be,Mt=this.type;Mt.keyword&&B===L.dot?this.exprAllowed=!1:(Be=Mt.updateContext)?Be.call(this,B):this.exprAllowed=Mt.beforeExpr},Z.overrideContext=function(B){this.curContext()!==B&&(this.context[this.context.length-1]=B)},L.parenR.updateContext=L.braceR.updateContext=function(){if(1!==this.context.length){var B=this.context.pop();B===H.b_stat&&"function"===this.curContext().token&&(B=this.context.pop()),this.exprAllowed=!B.isExpr}else this.exprAllowed=!0},L.braceL.updateContext=function(B){this.context.push(this.braceIsBlock(B)?H.b_stat:H.b_expr),this.exprAllowed=!0},L.dollarBraceL.updateContext=function(){this.context.push(H.b_tmpl),this.exprAllowed=!0},L.parenL.updateContext=function(B){this.context.push(B===L._if||B===L._for||B===L._with||B===L._while?H.p_stat:H.p_expr),this.exprAllowed=!0},L.incDec.updateContext=function(){},L._function.updateContext=L._class.updateContext=function(B){!B.beforeExpr||B===L._else||B===L.semi&&this.curContext()!==H.p_stat||B===L._return&&ee.test(this.input.slice(this.lastTokEnd,this.start))||(B===L.colon||B===L.braceL)&&this.curContext()===H.b_stat?this.context.push(H.f_stat):this.context.push(H.f_expr),this.exprAllowed=!1},L.backQuote.updateContext=function(){this.curContext()===H.q_tmpl?this.context.pop():this.context.push(H.q_tmpl),this.exprAllowed=!1},L.star.updateContext=function(B){if(B===L._function){var Be=this.context.length-1;this.context[Be]=this.context[Be]===H.f_expr?H.f_expr_gen:H.f_gen}this.exprAllowed=!0},L.name.updateContext=function(B){var Be=!1;this.options.ecmaVersion>=6&&B!==L.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(Be=!0),this.exprAllowed=Be};var $=us.prototype;function R(B){return"MemberExpression"===B.type&&"PrivateIdentifier"===B.property.type||"ChainExpression"===B.type&&R(B.expression)}$.checkPropClash=function(B,Be,Mt){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===B.type||this.options.ecmaVersion>=6&&(B.computed||B.method||B.shorthand))){var An,sn=B.key;switch(sn.type){case"Identifier":An=sn.name;break;case"Literal":An=String(sn.value);break;default:return}var qn=B.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===An&&"init"===qn&&(Be.proto&&(Mt?Mt.doubleProto<0&&(Mt.doubleProto=sn.start):this.raiseRecoverable(sn.start,"Redefinition of __proto__ property")),Be.proto=!0));var Xi=Be[An="$"+An];Xi?("init"===qn?this.strict&&Xi.init||Xi.get||Xi.set:Xi.init||Xi[qn])&&this.raiseRecoverable(sn.start,"Redefinition of property"):Xi=Be[An]={init:!1,get:!1,set:!1},Xi[qn]=!0}},$.parseExpression=function(B,Be){var Mt=this.start,sn=this.startLoc,An=this.parseMaybeAssign(B,Be);if(this.type===L.comma){var qn=this.startNodeAt(Mt,sn);for(qn.expressions=[An];this.eat(L.comma);)qn.expressions.push(this.parseMaybeAssign(B,Be));return this.finishNode(qn,"SequenceExpression")}return An},$.parseMaybeAssign=function(B,Be,Mt){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(B);this.exprAllowed=!1}var sn=!1,An=-1,qn=-1,Xi=-1;Be?(An=Be.parenthesizedAssign,qn=Be.trailingComma,Xi=Be.doubleProto,Be.parenthesizedAssign=Be.trailingComma=-1):(Be=new nr,sn=!0);var lr=this.start,Pr=this.startLoc;(this.type===L.parenL||this.type===L.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===B);var Ys=this.parseMaybeConditional(B,Be);if(Mt&&(Ys=Mt.call(this,Ys,lr,Pr)),this.type.isAssign){var ba=this.startNodeAt(lr,Pr);return ba.operator=this.value,this.type===L.eq&&(Ys=this.toAssignable(Ys,!1,Be)),sn||(Be.parenthesizedAssign=Be.trailingComma=Be.doubleProto=-1),Be.shorthandAssign>=Ys.start&&(Be.shorthandAssign=-1),this.type===L.eq?this.checkLValPattern(Ys):this.checkLValSimple(Ys),ba.left=Ys,this.next(),ba.right=this.parseMaybeAssign(B),Xi>-1&&(Be.doubleProto=Xi),this.finishNode(ba,"AssignmentExpression")}return sn&&this.checkExpressionErrors(Be,!0),An>-1&&(Be.parenthesizedAssign=An),qn>-1&&(Be.trailingComma=qn),Ys},$.parseMaybeConditional=function(B,Be){var Mt=this.start,sn=this.startLoc,An=this.parseExprOps(B,Be);if(this.checkExpressionErrors(Be))return An;if(this.eat(L.question)){var qn=this.startNodeAt(Mt,sn);return qn.test=An,qn.consequent=this.parseMaybeAssign(),this.expect(L.colon),qn.alternate=this.parseMaybeAssign(B),this.finishNode(qn,"ConditionalExpression")}return An},$.parseExprOps=function(B,Be){var Mt=this.start,sn=this.startLoc,An=this.parseMaybeUnary(Be,!1,!1,B);return this.checkExpressionErrors(Be)||An.start===Mt&&"ArrowFunctionExpression"===An.type?An:this.parseExprOp(An,Mt,sn,-1,B)},$.parseExprOp=function(B,Be,Mt,sn,An){var qn=this.type.binop;if(null!=qn&&(!An||this.type!==L._in)&&qn>sn){var Xi=this.type===L.logicalOR||this.type===L.logicalAND,lr=this.type===L.coalesce;lr&&(qn=L.logicalAND.binop);var Pr=this.value;this.next();var Ys=this.start,ba=this.startLoc,to=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,An),Ys,ba,qn,An),Bn=this.buildBinary(Be,Mt,B,to,Pr,Xi||lr);return(Xi&&this.type===L.coalesce||lr&&(this.type===L.logicalOR||this.type===L.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Bn,Be,Mt,sn,An)}return B},$.buildBinary=function(B,Be,Mt,sn,An,qn){"PrivateIdentifier"===sn.type&&this.raise(sn.start,"Private identifier can only be left side of binary expression");var Xi=this.startNodeAt(B,Be);return Xi.left=Mt,Xi.operator=An,Xi.right=sn,this.finishNode(Xi,qn?"LogicalExpression":"BinaryExpression")},$.parseMaybeUnary=function(B,Be,Mt,sn){var Xi,An=this.start,qn=this.startLoc;if(this.isContextual("await")&&this.canAwait)Xi=this.parseAwait(sn),Be=!0;else if(this.type.prefix){var lr=this.startNode(),Pr=this.type===L.incDec;lr.operator=this.value,lr.prefix=!0,this.next(),lr.argument=this.parseMaybeUnary(null,!0,Pr,sn),this.checkExpressionErrors(B,!0),Pr?this.checkLValSimple(lr.argument):this.strict&&"delete"===lr.operator&&"Identifier"===lr.argument.type?this.raiseRecoverable(lr.start,"Deleting local variable in strict mode"):"delete"===lr.operator&&R(lr.argument)?this.raiseRecoverable(lr.start,"Private fields can not be deleted"):Be=!0,Xi=this.finishNode(lr,Pr?"UpdateExpression":"UnaryExpression")}else if(Be||this.type!==L.privateId){if(Xi=this.parseExprSubscripts(B,sn),this.checkExpressionErrors(B))return Xi;for(;this.type.postfix&&!this.canInsertSemicolon();){var Ys=this.startNodeAt(An,qn);Ys.operator=this.value,Ys.prefix=!1,Ys.argument=Xi,this.checkLValSimple(Xi),this.next(),Xi=this.finishNode(Ys,"UpdateExpression")}}else(sn||0===this.privateNameStack.length)&&this.unexpected(),Xi=this.parsePrivateIdent(),this.type!==L._in&&this.unexpected();return Mt||!this.eat(L.starstar)?Xi:Be?void this.unexpected(this.lastTokStart):this.buildBinary(An,qn,Xi,this.parseMaybeUnary(null,!1,!1,sn),"**",!1)},$.parseExprSubscripts=function(B,Be){var Mt=this.start,sn=this.startLoc,An=this.parseExprAtom(B,Be);if("ArrowFunctionExpression"===An.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return An;var qn=this.parseSubscripts(An,Mt,sn,!1,Be);return B&&"MemberExpression"===qn.type&&(B.parenthesizedAssign>=qn.start&&(B.parenthesizedAssign=-1),B.parenthesizedBind>=qn.start&&(B.parenthesizedBind=-1),B.trailingComma>=qn.start&&(B.trailingComma=-1)),qn},$.parseSubscripts=function(B,Be,Mt,sn,An){for(var qn=this.options.ecmaVersion>=8&&"Identifier"===B.type&&"async"===B.name&&this.lastTokEnd===B.end&&!this.canInsertSemicolon()&&B.end-B.start==5&&this.potentialArrowAt===B.start,Xi=!1;;){var lr=this.parseSubscript(B,Be,Mt,sn,qn,Xi,An);if(lr.optional&&(Xi=!0),lr===B||"ArrowFunctionExpression"===lr.type){if(Xi){var Pr=this.startNodeAt(Be,Mt);Pr.expression=lr,lr=this.finishNode(Pr,"ChainExpression")}return lr}B=lr}},$.parseSubscript=function(B,Be,Mt,sn,An,qn,Xi){var lr=this.options.ecmaVersion>=11,Pr=lr&&this.eat(L.questionDot);sn&&Pr&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Ys=this.eat(L.bracketL);if(Ys||Pr&&this.type!==L.parenL&&this.type!==L.backQuote||this.eat(L.dot)){var ba=this.startNodeAt(Be,Mt);ba.object=B,Ys?(ba.property=this.parseExpression(),this.expect(L.bracketR)):ba.property=this.type===L.privateId&&"Super"!==B.type?this.parsePrivateIdent():this.parseIdent("never"!==this.options.allowReserved),ba.computed=!!Ys,lr&&(ba.optional=Pr),B=this.finishNode(ba,"MemberExpression")}else if(!sn&&this.eat(L.parenL)){var to=new nr,Bn=this.yieldPos,Zs=this.awaitPos,Zl=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var mc=this.parseExprList(L.parenR,this.options.ecmaVersion>=8,!1,to);if(An&&!Pr&&!this.canInsertSemicolon()&&this.eat(L.arrow))return this.checkPatternErrors(to,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Bn,this.awaitPos=Zs,this.awaitIdentPos=Zl,this.parseArrowExpression(this.startNodeAt(Be,Mt),mc,!0,Xi);this.checkExpressionErrors(to,!0),this.yieldPos=Bn||this.yieldPos,this.awaitPos=Zs||this.awaitPos,this.awaitIdentPos=Zl||this.awaitIdentPos;var Ql=this.startNodeAt(Be,Mt);Ql.callee=B,Ql.arguments=mc,lr&&(Ql.optional=Pr),B=this.finishNode(Ql,"CallExpression")}else if(this.type===L.backQuote){(Pr||qn)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Pu=this.startNodeAt(Be,Mt);Pu.tag=B,Pu.quasi=this.parseTemplate({isTagged:!0}),B=this.finishNode(Pu,"TaggedTemplateExpression")}return B},$.parseExprAtom=function(B,Be){this.type===L.slash&&this.readRegexp();var Mt,sn=this.potentialArrowAt===this.start;switch(this.type){case L._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),Mt=this.startNode(),this.next(),this.type===L.parenL&&!this.allowDirectSuper&&this.raise(Mt.start,"super() call outside constructor of a subclass"),this.type!==L.dot&&this.type!==L.bracketL&&this.type!==L.parenL&&this.unexpected(),this.finishNode(Mt,"Super");case L._this:return Mt=this.startNode(),this.next(),this.finishNode(Mt,"ThisExpression");case L.name:var An=this.start,qn=this.startLoc,Xi=this.containsEsc,lr=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Xi&&"async"===lr.name&&!this.canInsertSemicolon()&&this.eat(L._function))return this.overrideContext(H.f_expr),this.parseFunction(this.startNodeAt(An,qn),0,!1,!0,Be);if(sn&&!this.canInsertSemicolon()){if(this.eat(L.arrow))return this.parseArrowExpression(this.startNodeAt(An,qn),[lr],!1,Be);if(this.options.ecmaVersion>=8&&"async"===lr.name&&this.type===L.name&&!Xi&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return lr=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(L.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(An,qn),[lr],!0,Be)}return lr;case L.regexp:var Pr=this.value;return(Mt=this.parseLiteral(Pr.value)).regex={pattern:Pr.pattern,flags:Pr.flags},Mt;case L.num:case L.string:return this.parseLiteral(this.value);case L._null:case L._true:case L._false:return(Mt=this.startNode()).value=this.type===L._null?null:this.type===L._true,Mt.raw=this.type.keyword,this.next(),this.finishNode(Mt,"Literal");case L.parenL:var Ys=this.start,ba=this.parseParenAndDistinguishExpression(sn,Be);return B&&(B.parenthesizedAssign<0&&!this.isSimpleAssignTarget(ba)&&(B.parenthesizedAssign=Ys),B.parenthesizedBind<0&&(B.parenthesizedBind=Ys)),ba;case L.bracketL:return Mt=this.startNode(),this.next(),Mt.elements=this.parseExprList(L.bracketR,!0,!0,B),this.finishNode(Mt,"ArrayExpression");case L.braceL:return this.overrideContext(H.b_expr),this.parseObj(!1,B);case L._function:return Mt=this.startNode(),this.next(),this.parseFunction(Mt,0);case L._class:return this.parseClass(this.startNode(),!1);case L._new:return this.parseNew();case L.backQuote:return this.parseTemplate();case L._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},$.parseExprImport=function(){var B=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var Be=this.parseIdent(!0);switch(this.type){case L.parenL:return this.parseDynamicImport(B);case L.dot:return B.meta=Be,this.parseImportMeta(B);default:this.unexpected()}},$.parseDynamicImport=function(B){if(this.next(),B.source=this.parseMaybeAssign(),!this.eat(L.parenR)){var Be=this.start;this.eat(L.comma)&&this.eat(L.parenR)?this.raiseRecoverable(Be,"Trailing comma is not allowed in import()"):this.unexpected(Be)}return this.finishNode(B,"ImportExpression")},$.parseImportMeta=function(B){this.next();var Be=this.containsEsc;return B.property=this.parseIdent(!0),"meta"!==B.property.name&&this.raiseRecoverable(B.property.start,"The only valid meta property for import is 'import.meta'"),Be&&this.raiseRecoverable(B.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(B.start,"Cannot use 'import.meta' outside a module"),this.finishNode(B,"MetaProperty")},$.parseLiteral=function(B){var Be=this.startNode();return Be.value=B,Be.raw=this.input.slice(this.start,this.end),110===Be.raw.charCodeAt(Be.raw.length-1)&&(Be.bigint=Be.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(Be,"Literal")},$.parseParenExpression=function(){this.expect(L.parenL);var B=this.parseExpression();return this.expect(L.parenR),B},$.parseParenAndDistinguishExpression=function(B,Be){var An,Mt=this.start,sn=this.startLoc,qn=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Zl,Xi=this.start,lr=this.startLoc,Pr=[],Ys=!0,ba=!1,to=new nr,Bn=this.yieldPos,Zs=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==L.parenR;){if(Ys?Ys=!1:this.expect(L.comma),qn&&this.afterTrailingComma(L.parenR,!0)){ba=!0;break}if(this.type===L.ellipsis){Zl=this.start,Pr.push(this.parseParenItem(this.parseRestBinding())),this.type===L.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}Pr.push(this.parseMaybeAssign(!1,to,this.parseParenItem))}var mc=this.lastTokEnd,Ql=this.lastTokEndLoc;if(this.expect(L.parenR),B&&!this.canInsertSemicolon()&&this.eat(L.arrow))return this.checkPatternErrors(to,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Bn,this.awaitPos=Zs,this.parseParenArrowList(Mt,sn,Pr,Be);(!Pr.length||ba)&&this.unexpected(this.lastTokStart),Zl&&this.unexpected(Zl),this.checkExpressionErrors(to,!0),this.yieldPos=Bn||this.yieldPos,this.awaitPos=Zs||this.awaitPos,Pr.length>1?((An=this.startNodeAt(Xi,lr)).expressions=Pr,this.finishNodeAt(An,"SequenceExpression",mc,Ql)):An=Pr[0]}else An=this.parseParenExpression();if(this.options.preserveParens){var Pu=this.startNodeAt(Mt,sn);return Pu.expression=An,this.finishNode(Pu,"ParenthesizedExpression")}return An},$.parseParenItem=function(B){return B},$.parseParenArrowList=function(B,Be,Mt,sn){return this.parseArrowExpression(this.startNodeAt(B,Be),Mt,!1,sn)};var Y=[];$.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var B=this.startNode(),Be=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(L.dot)){B.meta=Be;var Mt=this.containsEsc;return B.property=this.parseIdent(!0),"target"!==B.property.name&&this.raiseRecoverable(B.property.start,"The only valid meta property for new is 'new.target'"),Mt&&this.raiseRecoverable(B.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(B.start,"'new.target' can only be used in functions and class static block"),this.finishNode(B,"MetaProperty")}var sn=this.start,An=this.startLoc,qn=this.type===L._import;return B.callee=this.parseSubscripts(this.parseExprAtom(),sn,An,!0,!1),qn&&"ImportExpression"===B.callee.type&&this.raise(sn,"Cannot use new with import()"),B.arguments=this.eat(L.parenL)?this.parseExprList(L.parenR,this.options.ecmaVersion>=8,!1):Y,this.finishNode(B,"NewExpression")},$.parseTemplateElement=function(B){var Be=B.isTagged,Mt=this.startNode();return this.type===L.invalidTemplate?(Be||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),Mt.value={raw:this.value,cooked:null}):Mt.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),Mt.tail=this.type===L.backQuote,this.finishNode(Mt,"TemplateElement")},$.parseTemplate=function(B){void 0===B&&(B={});var Be=B.isTagged;void 0===Be&&(Be=!1);var Mt=this.startNode();this.next(),Mt.expressions=[];var sn=this.parseTemplateElement({isTagged:Be});for(Mt.quasis=[sn];!sn.tail;)this.type===L.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(L.dollarBraceL),Mt.expressions.push(this.parseExpression()),this.expect(L.braceR),Mt.quasis.push(sn=this.parseTemplateElement({isTagged:Be}));return this.next(),this.finishNode(Mt,"TemplateLiteral")},$.isAsyncProp=function(B){return!B.computed&&"Identifier"===B.key.type&&"async"===B.key.name&&(this.type===L.name||this.type===L.num||this.type===L.string||this.type===L.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===L.star)&&!ee.test(this.input.slice(this.lastTokEnd,this.start))},$.parseObj=function(B,Be){var Mt=this.startNode(),sn=!0,An={};for(Mt.properties=[],this.next();!this.eat(L.braceR);){if(sn)sn=!1;else if(this.expect(L.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(L.braceR))break;var qn=this.parseProperty(B,Be);B||this.checkPropClash(qn,An,Be),Mt.properties.push(qn)}return this.finishNode(Mt,B?"ObjectPattern":"ObjectExpression")},$.parseProperty=function(B,Be){var sn,An,qn,Xi,Mt=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(L.ellipsis))return B?(Mt.argument=this.parseIdent(!1),this.type===L.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(Mt,"RestElement")):(Mt.argument=this.parseMaybeAssign(!1,Be),this.type===L.comma&&Be&&Be.trailingComma<0&&(Be.trailingComma=this.start),this.finishNode(Mt,"SpreadElement"));this.options.ecmaVersion>=6&&(Mt.method=!1,Mt.shorthand=!1,(B||Be)&&(qn=this.start,Xi=this.startLoc),B||(sn=this.eat(L.star)));var lr=this.containsEsc;return this.parsePropertyName(Mt),!B&&!lr&&this.options.ecmaVersion>=8&&!sn&&this.isAsyncProp(Mt)?(An=!0,sn=this.options.ecmaVersion>=9&&this.eat(L.star),this.parsePropertyName(Mt,Be)):An=!1,this.parsePropertyValue(Mt,B,sn,An,qn,Xi,Be,lr),this.finishNode(Mt,"Property")},$.parsePropertyValue=function(B,Be,Mt,sn,An,qn,Xi,lr){if((Mt||sn)&&this.type===L.colon&&this.unexpected(),this.eat(L.colon))B.value=Be?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Xi),B.kind="init";else if(this.options.ecmaVersion>=6&&this.type===L.parenL)Be&&this.unexpected(),B.kind="init",B.method=!0,B.value=this.parseMethod(Mt,sn);else if(Be||lr||!(this.options.ecmaVersion>=5)||B.computed||"Identifier"!==B.key.type||"get"!==B.key.name&&"set"!==B.key.name||this.type===L.comma||this.type===L.braceR||this.type===L.eq)this.options.ecmaVersion>=6&&!B.computed&&"Identifier"===B.key.type?((Mt||sn)&&this.unexpected(),this.checkUnreserved(B.key),"await"===B.key.name&&!this.awaitIdentPos&&(this.awaitIdentPos=An),B.kind="init",Be?B.value=this.parseMaybeDefault(An,qn,this.copyNode(B.key)):this.type===L.eq&&Xi?(Xi.shorthandAssign<0&&(Xi.shorthandAssign=this.start),B.value=this.parseMaybeDefault(An,qn,this.copyNode(B.key))):B.value=this.copyNode(B.key),B.shorthand=!0):this.unexpected();else if((Mt||sn)&&this.unexpected(),B.kind=B.key.name,this.parsePropertyName(B),B.value=this.parseMethod(!1),B.value.params.length!==("get"===B.kind?0:1)){this.raiseRecoverable(B.value.start,"get"===B.kind?"getter should have no params":"setter should have exactly one param")}else"set"===B.kind&&"RestElement"===B.value.params[0].type&&this.raiseRecoverable(B.value.params[0].start,"Setter cannot use rest params")},$.parsePropertyName=function(B){if(this.options.ecmaVersion>=6){if(this.eat(L.bracketL))return B.computed=!0,B.key=this.parseMaybeAssign(),this.expect(L.bracketR),B.key;B.computed=!1}return B.key=this.type===L.num||this.type===L.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},$.initFunction=function(B){B.id=null,this.options.ecmaVersion>=6&&(B.generator=B.expression=!1),this.options.ecmaVersion>=8&&(B.async=!1)},$.parseMethod=function(B,Be,Mt){var sn=this.startNode(),An=this.yieldPos,qn=this.awaitPos,Xi=this.awaitIdentPos;return this.initFunction(sn),this.options.ecmaVersion>=6&&(sn.generator=B),this.options.ecmaVersion>=8&&(sn.async=!!Be),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|It(Be,sn.generator)|(Mt?128:0)),this.expect(L.parenL),sn.params=this.parseBindingList(L.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(sn,!1,!0,!1),this.yieldPos=An,this.awaitPos=qn,this.awaitIdentPos=Xi,this.finishNode(sn,"FunctionExpression")},$.parseArrowExpression=function(B,Be,Mt,sn){var An=this.yieldPos,qn=this.awaitPos,Xi=this.awaitIdentPos;return this.enterScope(16|It(Mt,!1)),this.initFunction(B),this.options.ecmaVersion>=8&&(B.async=!!Mt),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,B.params=this.toAssignableList(Be,!0),this.parseFunctionBody(B,!0,!1,sn),this.yieldPos=An,this.awaitPos=qn,this.awaitIdentPos=Xi,this.finishNode(B,"ArrowFunctionExpression")},$.parseFunctionBody=function(B,Be,Mt,sn){var qn=this.strict,Xi=!1;if(Be&&this.type!==L.braceL)B.body=this.parseMaybeAssign(sn),B.expression=!0,this.checkParams(B,!1);else{var lr=this.options.ecmaVersion>=7&&!this.isSimpleParamList(B.params);(!qn||lr)&&(Xi=this.strictDirective(this.end))&&lr&&this.raiseRecoverable(B.start,"Illegal 'use strict' directive in function with non-simple parameter list");var Pr=this.labels;this.labels=[],Xi&&(this.strict=!0),this.checkParams(B,!qn&&!Xi&&!Be&&!Mt&&this.isSimpleParamList(B.params)),this.strict&&B.id&&this.checkLValSimple(B.id,5),B.body=this.parseBlock(!1,void 0,Xi&&!qn),B.expression=!1,this.adaptDirectivePrologue(B.body.body),this.labels=Pr}this.exitScope()},$.isSimpleParamList=function(B){for(var Be=0,Mt=B;Be<Mt.length;Be+=1)if("Identifier"!==Mt[Be].type)return!1;return!0},$.checkParams=function(B,Be){for(var Mt=Object.create(null),sn=0,An=B.params;sn<An.length;sn+=1)this.checkLValInnerPattern(An[sn],1,Be?null:Mt)},$.parseExprList=function(B,Be,Mt,sn){for(var An=[],qn=!0;!this.eat(B);){if(qn)qn=!1;else if(this.expect(L.comma),Be&&this.afterTrailingComma(B))break;var Xi=void 0;Mt&&this.type===L.comma?Xi=null:this.type===L.ellipsis?(Xi=this.parseSpread(sn),sn&&this.type===L.comma&&sn.trailingComma<0&&(sn.trailingComma=this.start)):Xi=this.parseMaybeAssign(!1,sn),An.push(Xi)}return An},$.checkUnreserved=function(B){var Be=B.start,Mt=B.end,sn=B.name;this.inGenerator&&"yield"===sn&&this.raiseRecoverable(Be,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===sn&&this.raiseRecoverable(Be,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===sn&&this.raiseRecoverable(Be,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&("arguments"===sn||"await"===sn)&&this.raise(Be,"Cannot use "+sn+" in class static initialization block"),this.keywords.test(sn)&&this.raise(Be,"Unexpected keyword '"+sn+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(Be,Mt).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(sn)&&(!this.inAsync&&"await"===sn&&this.raiseRecoverable(Be,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(Be,"The keyword '"+sn+"' is reserved"))},$.parseIdent=function(B,Be){var Mt=this.startNode();return this.type===L.name?Mt.name=this.value:this.type.keyword?(Mt.name=this.type.keyword,("class"===Mt.name||"function"===Mt.name)&&(this.lastTokEnd!==this.lastTokStart+1||46!==this.input.charCodeAt(this.lastTokStart))&&this.context.pop()):this.unexpected(),this.next(!!B),this.finishNode(Mt,"Identifier"),B||(this.checkUnreserved(Mt),"await"===Mt.name&&!this.awaitIdentPos&&(this.awaitIdentPos=Mt.start)),Mt},$.parsePrivateIdent=function(){var B=this.startNode();return this.type===L.privateId?B.name=this.value:this.unexpected(),this.next(),this.finishNode(B,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(B.start,"Private field '#"+B.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(B),B},$.parseYield=function(B){this.yieldPos||(this.yieldPos=this.start);var Be=this.startNode();return this.next(),this.type===L.semi||this.canInsertSemicolon()||this.type!==L.star&&!this.type.startsExpr?(Be.delegate=!1,Be.argument=null):(Be.delegate=this.eat(L.star),Be.argument=this.parseMaybeAssign(B)),this.finishNode(Be,"YieldExpression")},$.parseAwait=function(B){this.awaitPos||(this.awaitPos=this.start);var Be=this.startNode();return this.next(),Be.argument=this.parseMaybeUnary(null,!0,!1,B),this.finishNode(Be,"AwaitExpression")};var he=us.prototype;he.raise=function(B,Be){var Mt=Pn(this.input,B),sn=new SyntaxError(Be+=" ("+Mt.line+":"+Mt.column+")");throw sn.pos=B,sn.loc=Mt,sn.raisedAt=this.pos,sn},he.raiseRecoverable=he.raise,he.curPosition=function(){if(this.options.locations)return new en(this.curLine,this.pos-this.lineStart)};var me=us.prototype,ve=function(Be){this.flags=Be,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};me.enterScope=function(B){this.scopeStack.push(new ve(B))},me.exitScope=function(){this.scopeStack.pop()},me.treatFunctionsAsVarInScope=function(B){return 2&B.flags||!this.inModule&&1&B.flags},me.declareName=function(B,Be,Mt){var sn=!1;if(2===Be){var An=this.currentScope();sn=An.lexical.indexOf(B)>-1||An.functions.indexOf(B)>-1||An.var.indexOf(B)>-1,An.lexical.push(B),this.inModule&&1&An.flags&&delete this.undefinedExports[B]}else if(4===Be)this.currentScope().lexical.push(B);else if(3===Be){var Xi=this.currentScope();sn=this.treatFunctionsAsVar?Xi.lexical.indexOf(B)>-1:Xi.lexical.indexOf(B)>-1||Xi.var.indexOf(B)>-1,Xi.functions.push(B)}else for(var lr=this.scopeStack.length-1;lr>=0;--lr){var Pr=this.scopeStack[lr];if(Pr.lexical.indexOf(B)>-1&&!(32&Pr.flags&&Pr.lexical[0]===B)||!this.treatFunctionsAsVarInScope(Pr)&&Pr.functions.indexOf(B)>-1){sn=!0;break}if(Pr.var.push(B),this.inModule&&1&Pr.flags&&delete this.undefinedExports[B],259&Pr.flags)break}sn&&this.raiseRecoverable(Mt,"Identifier '"+B+"' has already been declared")},me.checkLocalExport=function(B){-1===this.scopeStack[0].lexical.indexOf(B.name)&&-1===this.scopeStack[0].var.indexOf(B.name)&&(this.undefinedExports[B.name]=B)},me.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},me.currentVarScope=function(){for(var B=this.scopeStack.length-1;;B--){var Be=this.scopeStack[B];if(259&Be.flags)return Be}},me.currentThisScope=function(){for(var B=this.scopeStack.length-1;;B--){var Be=this.scopeStack[B];if(259&Be.flags&&!(16&Be.flags))return Be}};var ge=function(Be,Mt,sn){this.type="",this.start=Mt,this.end=0,Be.options.locations&&(this.loc=new Sn(Be,sn)),Be.options.directSourceFile&&(this.sourceFile=Be.options.directSourceFile),Be.options.ranges&&(this.range=[Mt,0])},pe=us.prototype;function de(B,Be,Mt,sn){return B.type=Be,B.end=Mt,this.options.locations&&(B.loc.end=sn),this.options.ranges&&(B.range[1]=Mt),B}pe.startNode=function(){return new ge(this,this.start,this.startLoc)},pe.startNodeAt=function(B,Be){return new ge(this,B,Be)},pe.finishNode=function(B,Be){return de.call(this,B,Be,this.lastTokEnd,this.lastTokEndLoc)},pe.finishNodeAt=function(B,Be,Mt,sn){return de.call(this,B,Be,Mt,sn)},pe.copyNode=function(B){var Be=new ge(this,B.start,this.startLoc);for(var Mt in B)Be[Mt]=B[Mt];return Be};var B,Be,Ee="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ke=Ee+" Extended_Pictographic",je=ke+" EBase EComp EMod EPres ExtPict",pt={9:Ee,10:ke,11:ke,12:je,13:je},gt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Wt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Lt=Wt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Bt=Lt+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",qt=Bt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",We={9:Wt,10:Lt,11:Bt,12:qt,13:qt+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith"},Ye={};for(var Ue=0,ct=[9,10,11,12,13];Ue<ct.length;Ue+=1)Be=void 0,(Be=Ye[B=ct[Ue]]={binary:Qt(pt[B]+" "+gt),nonBinary:{General_Category:Qt(gt),Script:Qt(We[B])}}).nonBinary.Script_Extensions=Be.nonBinary.Script,Be.nonBinary.gc=Be.nonBinary.General_Category,Be.nonBinary.sc=Be.nonBinary.Script,Be.nonBinary.scx=Be.nonBinary.Script_Extensions;var wt=us.prototype,nn=function(Be){this.parser=Be,this.validFlags="gim"+(Be.options.ecmaVersion>=6?"uy":"")+(Be.options.ecmaVersion>=9?"s":"")+(Be.options.ecmaVersion>=13?"d":""),this.unicodeProperties=Ye[Be.options.ecmaVersion>=13?13:Be.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function On(B){return 36===B||B>=40&&B<=43||46===B||63===B||B>=91&&B<=94||B>=123&&B<=125}function Ci(B){return B>=65&&B<=90||B>=97&&B<=122}function Ai(B){return Ci(B)||95===B}function or(B){return Ai(B)||is(B)}function is(B){return B>=48&&B<=57}function _r(B){return B>=48&&B<=57||B>=65&&B<=70||B>=97&&B<=102}function ws(B){return B>=65&&B<=70?B-65+10:B>=97&&B<=102?B-97+10:B-48}function wr(B){return B>=48&&B<=55}nn.prototype.reset=function(Be,Mt,sn){var An=-1!==sn.indexOf("u");this.start=0|Be,this.source=Mt+"",this.flags=sn,this.switchU=An&&this.parser.options.ecmaVersion>=6,this.switchN=An&&this.parser.options.ecmaVersion>=9},nn.prototype.raise=function(Be){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+Be)},nn.prototype.at=function(Be,Mt){void 0===Mt&&(Mt=!1);var sn=this.source,An=sn.length;if(Be>=An)return-1;var qn=sn.charCodeAt(Be);if(!Mt&&!this.switchU||qn<=55295||qn>=57344||Be+1>=An)return qn;var Xi=sn.charCodeAt(Be+1);return Xi>=56320&&Xi<=57343?(qn<<10)+Xi-56613888:qn},nn.prototype.nextIndex=function(Be,Mt){void 0===Mt&&(Mt=!1);var sn=this.source,An=sn.length;if(Be>=An)return An;var Xi,qn=sn.charCodeAt(Be);return!Mt&&!this.switchU||qn<=55295||qn>=57344||Be+1>=An||(Xi=sn.charCodeAt(Be+1))<56320||Xi>57343?Be+1:Be+2},nn.prototype.current=function(Be){return void 0===Be&&(Be=!1),this.at(this.pos,Be)},nn.prototype.lookahead=function(Be){return void 0===Be&&(Be=!1),this.at(this.nextIndex(this.pos,Be),Be)},nn.prototype.advance=function(Be){void 0===Be&&(Be=!1),this.pos=this.nextIndex(this.pos,Be)},nn.prototype.eat=function(Be,Mt){return void 0===Mt&&(Mt=!1),this.current(Mt)===Be&&(this.advance(Mt),!0)},wt.validateRegExpFlags=function(B){for(var Be=B.validFlags,Mt=B.flags,sn=0;sn<Mt.length;sn++){var An=Mt.charAt(sn);-1===Be.indexOf(An)&&this.raise(B.start,"Invalid regular expression flag"),Mt.indexOf(An,sn+1)>-1&&this.raise(B.start,"Duplicate regular expression flag")}},wt.validateRegExpPattern=function(B){this.regexp_pattern(B),!B.switchN&&this.options.ecmaVersion>=9&&B.groupNames.length>0&&(B.switchN=!0,this.regexp_pattern(B))},wt.regexp_pattern=function(B){B.pos=0,B.lastIntValue=0,B.lastStringValue="",B.lastAssertionIsQuantifiable=!1,B.numCapturingParens=0,B.maxBackReference=0,B.groupNames.length=0,B.backReferenceNames.length=0,this.regexp_disjunction(B),B.pos!==B.source.length&&(B.eat(41)&&B.raise("Unmatched ')'"),(B.eat(93)||B.eat(125))&&B.raise("Lone quantifier brackets")),B.maxBackReference>B.numCapturingParens&&B.raise("Invalid escape");for(var Be=0,Mt=B.backReferenceNames;Be<Mt.length;Be+=1)-1===B.groupNames.indexOf(Mt[Be])&&B.raise("Invalid named capture referenced")},wt.regexp_disjunction=function(B){for(this.regexp_alternative(B);B.eat(124);)this.regexp_alternative(B);this.regexp_eatQuantifier(B,!0)&&B.raise("Nothing to repeat"),B.eat(123)&&B.raise("Lone quantifier brackets")},wt.regexp_alternative=function(B){for(;B.pos<B.source.length&&this.regexp_eatTerm(B););},wt.regexp_eatTerm=function(B){return this.regexp_eatAssertion(B)?(B.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(B)&&B.switchU&&B.raise("Invalid quantifier"),!0):!!(B.switchU?this.regexp_eatAtom(B):this.regexp_eatExtendedAtom(B))&&(this.regexp_eatQuantifier(B),!0)},wt.regexp_eatAssertion=function(B){var Be=B.pos;if(B.lastAssertionIsQuantifiable=!1,B.eat(94)||B.eat(36))return!0;if(B.eat(92)){if(B.eat(66)||B.eat(98))return!0;B.pos=Be}if(B.eat(40)&&B.eat(63)){var Mt=!1;if(this.options.ecmaVersion>=9&&(Mt=B.eat(60)),B.eat(61)||B.eat(33))return this.regexp_disjunction(B),B.eat(41)||B.raise("Unterminated group"),B.lastAssertionIsQuantifiable=!Mt,!0}return B.pos=Be,!1},wt.regexp_eatQuantifier=function(B,Be){return void 0===Be&&(Be=!1),!!this.regexp_eatQuantifierPrefix(B,Be)&&(B.eat(63),!0)},wt.regexp_eatQuantifierPrefix=function(B,Be){return B.eat(42)||B.eat(43)||B.eat(63)||this.regexp_eatBracedQuantifier(B,Be)},wt.regexp_eatBracedQuantifier=function(B,Be){var Mt=B.pos;if(B.eat(123)){var sn=0,An=-1;if(this.regexp_eatDecimalDigits(B)&&(sn=B.lastIntValue,B.eat(44)&&this.regexp_eatDecimalDigits(B)&&(An=B.lastIntValue),B.eat(125)))return-1!==An&&An<sn&&!Be&&B.raise("numbers out of order in {} quantifier"),!0;B.switchU&&!Be&&B.raise("Incomplete quantifier"),B.pos=Mt}return!1},wt.regexp_eatAtom=function(B){return this.regexp_eatPatternCharacters(B)||B.eat(46)||this.regexp_eatReverseSolidusAtomEscape(B)||this.regexp_eatCharacterClass(B)||this.regexp_eatUncapturingGroup(B)||this.regexp_eatCapturingGroup(B)},wt.regexp_eatReverseSolidusAtomEscape=function(B){var Be=B.pos;if(B.eat(92)){if(this.regexp_eatAtomEscape(B))return!0;B.pos=Be}return!1},wt.regexp_eatUncapturingGroup=function(B){var Be=B.pos;if(B.eat(40)){if(B.eat(63)&&B.eat(58)){if(this.regexp_disjunction(B),B.eat(41))return!0;B.raise("Unterminated group")}B.pos=Be}return!1},wt.regexp_eatCapturingGroup=function(B){if(B.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(B):63===B.current()&&B.raise("Invalid group"),this.regexp_disjunction(B),B.eat(41))return B.numCapturingParens+=1,!0;B.raise("Unterminated group")}return!1},wt.regexp_eatExtendedAtom=function(B){return B.eat(46)||this.regexp_eatReverseSolidusAtomEscape(B)||this.regexp_eatCharacterClass(B)||this.regexp_eatUncapturingGroup(B)||this.regexp_eatCapturingGroup(B)||this.regexp_eatInvalidBracedQuantifier(B)||this.regexp_eatExtendedPatternCharacter(B)},wt.regexp_eatInvalidBracedQuantifier=function(B){return this.regexp_eatBracedQuantifier(B,!0)&&B.raise("Nothing to repeat"),!1},wt.regexp_eatSyntaxCharacter=function(B){var Be=B.current();return!!On(Be)&&(B.lastIntValue=Be,B.advance(),!0)},wt.regexp_eatPatternCharacters=function(B){for(var Be=B.pos,Mt=0;-1!==(Mt=B.current())&&!On(Mt);)B.advance();return B.pos!==Be},wt.regexp_eatExtendedPatternCharacter=function(B){var Be=B.current();return!(-1===Be||36===Be||Be>=40&&Be<=43||46===Be||63===Be||91===Be||94===Be||124===Be||(B.advance(),0))},wt.regexp_groupSpecifier=function(B){if(B.eat(63)){if(this.regexp_eatGroupName(B))return-1!==B.groupNames.indexOf(B.lastStringValue)&&B.raise("Duplicate capture group name"),void B.groupNames.push(B.lastStringValue);B.raise("Invalid group")}},wt.regexp_eatGroupName=function(B){if(B.lastStringValue="",B.eat(60)){if(this.regexp_eatRegExpIdentifierName(B)&&B.eat(62))return!0;B.raise("Invalid capture group name")}return!1},wt.regexp_eatRegExpIdentifierName=function(B){if(B.lastStringValue="",this.regexp_eatRegExpIdentifierStart(B)){for(B.lastStringValue+=Ht(B.lastIntValue);this.regexp_eatRegExpIdentifierPart(B);)B.lastStringValue+=Ht(B.lastIntValue);return!0}return!1},wt.regexp_eatRegExpIdentifierStart=function(B){var Be=B.pos,Mt=this.options.ecmaVersion>=11,sn=B.current(Mt);return B.advance(Mt),92===sn&&this.regexp_eatRegExpUnicodeEscapeSequence(B,Mt)&&(sn=B.lastIntValue),function jn(B){return xe(B,!0)||36===B||95===B}(sn)?(B.lastIntValue=sn,!0):(B.pos=Be,!1)},wt.regexp_eatRegExpIdentifierPart=function(B){var Be=B.pos,Mt=this.options.ecmaVersion>=11,sn=B.current(Mt);return B.advance(Mt),92===sn&&this.regexp_eatRegExpUnicodeEscapeSequence(B,Mt)&&(sn=B.lastIntValue),function ii(B){return _e(B,!0)||36===B||95===B||8204===B||8205===B}(sn)?(B.lastIntValue=sn,!0):(B.pos=Be,!1)},wt.regexp_eatAtomEscape=function(B){return!!(this.regexp_eatBackReference(B)||this.regexp_eatCharacterClassEscape(B)||this.regexp_eatCharacterEscape(B)||B.switchN&&this.regexp_eatKGroupName(B))||(B.switchU&&(99===B.current()&&B.raise("Invalid unicode escape"),B.raise("Invalid escape")),!1)},wt.regexp_eatBackReference=function(B){var Be=B.pos;if(this.regexp_eatDecimalEscape(B)){var Mt=B.lastIntValue;if(B.switchU)return Mt>B.maxBackReference&&(B.maxBackReference=Mt),!0;if(Mt<=B.numCapturingParens)return!0;B.pos=Be}return!1},wt.regexp_eatKGroupName=function(B){if(B.eat(107)){if(this.regexp_eatGroupName(B))return B.backReferenceNames.push(B.lastStringValue),!0;B.raise("Invalid named reference")}return!1},wt.regexp_eatCharacterEscape=function(B){return this.regexp_eatControlEscape(B)||this.regexp_eatCControlLetter(B)||this.regexp_eatZero(B)||this.regexp_eatHexEscapeSequence(B)||this.regexp_eatRegExpUnicodeEscapeSequence(B,!1)||!B.switchU&&this.regexp_eatLegacyOctalEscapeSequence(B)||this.regexp_eatIdentityEscape(B)},wt.regexp_eatCControlLetter=function(B){var Be=B.pos;if(B.eat(99)){if(this.regexp_eatControlLetter(B))return!0;B.pos=Be}return!1},wt.regexp_eatZero=function(B){return 48===B.current()&&!is(B.lookahead())&&(B.lastIntValue=0,B.advance(),!0)},wt.regexp_eatControlEscape=function(B){var Be=B.current();return 116===Be?(B.lastIntValue=9,B.advance(),!0):110===Be?(B.lastIntValue=10,B.advance(),!0):118===Be?(B.lastIntValue=11,B.advance(),!0):102===Be?(B.lastIntValue=12,B.advance(),!0):114===Be&&(B.lastIntValue=13,B.advance(),!0)},wt.regexp_eatControlLetter=function(B){var Be=B.current();return!!Ci(Be)&&(B.lastIntValue=Be%32,B.advance(),!0)},wt.regexp_eatRegExpUnicodeEscapeSequence=function(B,Be){void 0===Be&&(Be=!1);var Mt=B.pos,sn=Be||B.switchU;if(B.eat(117)){if(this.regexp_eatFixedHexDigits(B,4)){var An=B.lastIntValue;if(sn&&An>=55296&&An<=56319){var qn=B.pos;if(B.eat(92)&&B.eat(117)&&this.regexp_eatFixedHexDigits(B,4)){var Xi=B.lastIntValue;if(Xi>=56320&&Xi<=57343)return B.lastIntValue=1024*(An-55296)+(Xi-56320)+65536,!0}B.pos=qn,B.lastIntValue=An}return!0}if(sn&&B.eat(123)&&this.regexp_eatHexDigits(B)&&B.eat(125)&&function yi(B){return B>=0&&B<=1114111}(B.lastIntValue))return!0;sn&&B.raise("Invalid unicode escape"),B.pos=Mt}return!1},wt.regexp_eatIdentityEscape=function(B){if(B.switchU)return!!this.regexp_eatSyntaxCharacter(B)||!!B.eat(47)&&(B.lastIntValue=47,!0);var Be=B.current();return!(99===Be||B.switchN&&107===Be||(B.lastIntValue=Be,B.advance(),0))},wt.regexp_eatDecimalEscape=function(B){B.lastIntValue=0;var Be=B.current();if(Be>=49&&Be<=57){do{B.lastIntValue=10*B.lastIntValue+(Be-48),B.advance()}while((Be=B.current())>=48&&Be<=57);return!0}return!1},wt.regexp_eatCharacterClassEscape=function(B){var Be=B.current();if(function Ei(B){return 100===B||68===B||115===B||83===B||119===B||87===B}(Be))return B.lastIntValue=-1,B.advance(),!0;if(B.switchU&&this.options.ecmaVersion>=9&&(80===Be||112===Be)){if(B.lastIntValue=-1,B.advance(),B.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(B)&&B.eat(125))return!0;B.raise("Invalid property name")}return!1},wt.regexp_eatUnicodePropertyValueExpression=function(B){var Be=B.pos;if(this.regexp_eatUnicodePropertyName(B)&&B.eat(61)){var Mt=B.lastStringValue;if(this.regexp_eatUnicodePropertyValue(B))return this.regexp_validateUnicodePropertyNameAndValue(B,Mt,B.lastStringValue),!0}return B.pos=Be,!!this.regexp_eatLoneUnicodePropertyNameOrValue(B)&&(this.regexp_validateUnicodePropertyNameOrValue(B,B.lastStringValue),!0)},wt.regexp_validateUnicodePropertyNameAndValue=function(B,Be,Mt){Ct(B.unicodeProperties.nonBinary,Be)||B.raise("Invalid property name"),B.unicodeProperties.nonBinary[Be].test(Mt)||B.raise("Invalid property value")},wt.regexp_validateUnicodePropertyNameOrValue=function(B,Be){B.unicodeProperties.binary.test(Be)||B.raise("Invalid property name")},wt.regexp_eatUnicodePropertyName=function(B){var Be=0;for(B.lastStringValue="";Ai(Be=B.current());)B.lastStringValue+=Ht(Be),B.advance();return""!==B.lastStringValue},wt.regexp_eatUnicodePropertyValue=function(B){var Be=0;for(B.lastStringValue="";or(Be=B.current());)B.lastStringValue+=Ht(Be),B.advance();return""!==B.lastStringValue},wt.regexp_eatLoneUnicodePropertyNameOrValue=function(B){return this.regexp_eatUnicodePropertyValue(B)},wt.regexp_eatCharacterClass=function(B){if(B.eat(91)){if(B.eat(94),this.regexp_classRanges(B),B.eat(93))return!0;B.raise("Unterminated character class")}return!1},wt.regexp_classRanges=function(B){for(;this.regexp_eatClassAtom(B);){var Be=B.lastIntValue;if(B.eat(45)&&this.regexp_eatClassAtom(B)){var Mt=B.lastIntValue;B.switchU&&(-1===Be||-1===Mt)&&B.raise("Invalid character class"),-1!==Be&&-1!==Mt&&Be>Mt&&B.raise("Range out of order in character class")}}},wt.regexp_eatClassAtom=function(B){var Be=B.pos;if(B.eat(92)){if(this.regexp_eatClassEscape(B))return!0;if(B.switchU){var Mt=B.current();(99===Mt||wr(Mt))&&B.raise("Invalid class escape"),B.raise("Invalid escape")}B.pos=Be}var sn=B.current();return 93!==sn&&(B.lastIntValue=sn,B.advance(),!0)},wt.regexp_eatClassEscape=function(B){var Be=B.pos;if(B.eat(98))return B.lastIntValue=8,!0;if(B.switchU&&B.eat(45))return B.lastIntValue=45,!0;if(!B.switchU&&B.eat(99)){if(this.regexp_eatClassControlLetter(B))return!0;B.pos=Be}return this.regexp_eatCharacterClassEscape(B)||this.regexp_eatCharacterEscape(B)},wt.regexp_eatClassControlLetter=function(B){var Be=B.current();return!(!is(Be)&&95!==Be||(B.lastIntValue=Be%32,B.advance(),0))},wt.regexp_eatHexEscapeSequence=function(B){var Be=B.pos;if(B.eat(120)){if(this.regexp_eatFixedHexDigits(B,2))return!0;B.switchU&&B.raise("Invalid escape"),B.pos=Be}return!1},wt.regexp_eatDecimalDigits=function(B){var Be=B.pos,Mt=0;for(B.lastIntValue=0;is(Mt=B.current());)B.lastIntValue=10*B.lastIntValue+(Mt-48),B.advance();return B.pos!==Be},wt.regexp_eatHexDigits=function(B){var Be=B.pos,Mt=0;for(B.lastIntValue=0;_r(Mt=B.current());)B.lastIntValue=16*B.lastIntValue+ws(Mt),B.advance();return B.pos!==Be},wt.regexp_eatLegacyOctalEscapeSequence=function(B){if(this.regexp_eatOctalDigit(B)){var Be=B.lastIntValue;if(this.regexp_eatOctalDigit(B)){var Mt=B.lastIntValue;B.lastIntValue=Be<=3&&this.regexp_eatOctalDigit(B)?64*Be+8*Mt+B.lastIntValue:8*Be+Mt}else B.lastIntValue=Be;return!0}return!1},wt.regexp_eatOctalDigit=function(B){var Be=B.current();return wr(Be)?(B.lastIntValue=Be-48,B.advance(),!0):(B.lastIntValue=0,!1)},wt.regexp_eatFixedHexDigits=function(B,Be){var Mt=B.pos;B.lastIntValue=0;for(var sn=0;sn<Be;++sn){var An=B.current();if(!_r(An))return B.pos=Mt,!1;B.lastIntValue=16*B.lastIntValue+ws(An),B.advance()}return!0};var rs=function(Be){this.type=Be.type,this.value=Be.value,this.start=Be.start,this.end=Be.end,Be.options.locations&&(this.loc=new Sn(Be,Be.startLoc,Be.endLoc)),Be.options.ranges&&(this.range=[Be.start,Be.end])},ss=us.prototype;function Kr(B){return"function"!=typeof BigInt?null:BigInt(B.replace(/_/g,""))}ss.next=function(B){!B&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new rs(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ss.getToken=function(){return this.next(),new rs(this)},typeof Symbol<"u"&&(ss[Symbol.iterator]=function(){var B=this;return{next:function(){var Be=B.getToken();return{done:Be.type===L.eof,value:Be}}}}),ss.nextToken=function(){var B=this.curContext();return(!B||!B.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(L.eof):B.override?B.override(this):void this.readToken(this.fullCharCodeAtPos())},ss.readToken=function(B){return xe(B,this.options.ecmaVersion>=6)||92===B?this.readWord():this.getTokenFromCode(B)},ss.fullCharCodeAtPos=function(){var B=this.input.charCodeAt(this.pos);if(B<=55295||B>=56320)return B;var Be=this.input.charCodeAt(this.pos+1);return Be<=56319||Be>=57344?B:(B<<10)+Be-56613888},ss.skipBlockComment=function(){var B=this.options.onComment&&this.curPosition(),Be=this.pos,Mt=this.input.indexOf("*/",this.pos+=2);if(-1===Mt&&this.raise(this.pos-2,"Unterminated comment"),this.pos=Mt+2,this.options.locations)for(var sn=void 0,An=Be;(sn=dt(this.input,An,this.pos))>-1;)++this.curLine,An=this.lineStart=sn;this.options.onComment&&this.options.onComment(!0,this.input.slice(Be+2,Mt),Be,this.pos,B,this.curPosition())},ss.skipLineComment=function(B){for(var Be=this.pos,Mt=this.options.onComment&&this.curPosition(),sn=this.input.charCodeAt(this.pos+=B);this.pos<this.input.length&&!ze(sn);)sn=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(Be+B,this.pos),Be,this.pos,Mt,this.curPosition())},ss.skipSpace=function(){e:for(;this.pos<this.input.length;){var B=this.input.charCodeAt(this.pos);switch(B){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(B>8&&B<14||B>=5760&&st.test(String.fromCharCode(B))))break e;++this.pos}}},ss.finishToken=function(B,Be){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var Mt=this.type;this.type=B,this.value=Be,this.updateContext(Mt)},ss.readToken_dot=function(){var B=this.input.charCodeAt(this.pos+1);if(B>=48&&B<=57)return this.readNumber(!0);var Be=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===B&&46===Be?(this.pos+=3,this.finishToken(L.ellipsis)):(++this.pos,this.finishToken(L.dot))},ss.readToken_slash=function(){var B=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===B?this.finishOp(L.assign,2):this.finishOp(L.slash,1)},ss.readToken_mult_modulo_exp=function(B){var Be=this.input.charCodeAt(this.pos+1),Mt=1,sn=42===B?L.star:L.modulo;return this.options.ecmaVersion>=7&&42===B&&42===Be&&(++Mt,sn=L.starstar,Be=this.input.charCodeAt(this.pos+2)),61===Be?this.finishOp(L.assign,Mt+1):this.finishOp(sn,Mt)},ss.readToken_pipe_amp=function(B){var Be=this.input.charCodeAt(this.pos+1);return Be===B?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(L.assign,3):this.finishOp(124===B?L.logicalOR:L.logicalAND,2):61===Be?this.finishOp(L.assign,2):this.finishOp(124===B?L.bitwiseOR:L.bitwiseAND,1)},ss.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(L.assign,2):this.finishOp(L.bitwiseXOR,1)},ss.readToken_plus_min=function(B){var Be=this.input.charCodeAt(this.pos+1);return Be===B?45!==Be||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!ee.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(L.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===Be?this.finishOp(L.assign,2):this.finishOp(L.plusMin,1)},ss.readToken_lt_gt=function(B){var Be=this.input.charCodeAt(this.pos+1),Mt=1;return Be===B?(Mt=62===B&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+Mt)?this.finishOp(L.assign,Mt+1):this.finishOp(L.bitShift,Mt)):33!==Be||60!==B||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===Be&&(Mt=2),this.finishOp(L.relational,Mt)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ss.readToken_eq_excl=function(B){var Be=this.input.charCodeAt(this.pos+1);return 61===Be?this.finishOp(L.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===B&&62===Be&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(L.arrow)):this.finishOp(61===B?L.eq:L.prefix,1)},ss.readToken_question=function(){var B=this.options.ecmaVersion;if(B>=11){var Be=this.input.charCodeAt(this.pos+1);if(46===Be){var Mt=this.input.charCodeAt(this.pos+2);if(Mt<48||Mt>57)return this.finishOp(L.questionDot,2)}if(63===Be)return B>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(L.assign,3):this.finishOp(L.coalesce,2)}return this.finishOp(L.question,1)},ss.readToken_numberSign=function(){var Be=35;if(this.options.ecmaVersion>=13&&(++this.pos,xe(Be=this.fullCharCodeAtPos(),!0)||92===Be))return this.finishToken(L.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Ht(Be)+"'")},ss.getTokenFromCode=function(B){switch(B){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(L.parenL);case 41:return++this.pos,this.finishToken(L.parenR);case 59:return++this.pos,this.finishToken(L.semi);case 44:return++this.pos,this.finishToken(L.comma);case 91:return++this.pos,this.finishToken(L.bracketL);case 93:return++this.pos,this.finishToken(L.bracketR);case 123:return++this.pos,this.finishToken(L.braceL);case 125:return++this.pos,this.finishToken(L.braceR);case 58:return++this.pos,this.finishToken(L.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(L.backQuote);case 48:var Be=this.input.charCodeAt(this.pos+1);if(120===Be||88===Be)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===Be||79===Be)return this.readRadixNumber(8);if(98===Be||66===Be)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(B);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(B);case 124:case 38:return this.readToken_pipe_amp(B);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(B);case 60:case 62:return this.readToken_lt_gt(B);case 61:case 33:return this.readToken_eq_excl(B);case 63:return this.readToken_question();case 126:return this.finishOp(L.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Ht(B)+"'")},ss.finishOp=function(B,Be){var Mt=this.input.slice(this.pos,this.pos+Be);return this.pos+=Be,this.finishToken(B,Mt)},ss.readRegexp=function(){for(var B,Be,Mt=this.pos;;){this.pos>=this.input.length&&this.raise(Mt,"Unterminated regular expression");var sn=this.input.charAt(this.pos);if(ee.test(sn)&&this.raise(Mt,"Unterminated regular expression"),B)B=!1;else{if("["===sn)Be=!0;else if("]"===sn&&Be)Be=!1;else if("/"===sn&&!Be)break;B="\\"===sn}++this.pos}var An=this.input.slice(Mt,this.pos);++this.pos;var qn=this.pos,Xi=this.readWord1();this.containsEsc&&this.unexpected(qn);var lr=this.regexpState||(this.regexpState=new nn(this));lr.reset(Mt,An,Xi),this.validateRegExpFlags(lr),this.validateRegExpPattern(lr);var Pr=null;try{Pr=new RegExp(An,Xi)}catch{}return this.finishToken(L.regexp,{pattern:An,flags:Xi,value:Pr})},ss.readInt=function(B,Be,Mt){for(var sn=this.options.ecmaVersion>=12&&void 0===Be,An=Mt&&48===this.input.charCodeAt(this.pos),qn=this.pos,Xi=0,lr=0,Pr=0,Ys=Be??1/0;Pr<Ys;++Pr,++this.pos){var ba=this.input.charCodeAt(this.pos),to=void 0;if(sn&&95===ba)An&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===lr&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===Pr&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),lr=ba;else{if((to=ba>=97?ba-97+10:ba>=65?ba-65+10:ba>=48&&ba<=57?ba-48:1/0)>=B)break;lr=ba,Xi=Xi*B+to}}return sn&&95===lr&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===qn||null!=Be&&this.pos-qn!==Be?null:Xi},ss.readRadixNumber=function(B){var Be=this.pos;this.pos+=2;var Mt=this.readInt(B);return null==Mt&&this.raise(this.start+2,"Expected number in radix "+B),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(Mt=Kr(this.input.slice(Be,this.pos)),++this.pos):xe(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(L.num,Mt)},ss.readNumber=function(B){var Be=this.pos;!B&&null===this.readInt(10,void 0,!0)&&this.raise(Be,"Invalid number");var Mt=this.pos-Be>=2&&48===this.input.charCodeAt(Be);Mt&&this.strict&&this.raise(Be,"Invalid number");var sn=this.input.charCodeAt(this.pos);if(!Mt&&!B&&this.options.ecmaVersion>=11&&110===sn){var An=Kr(this.input.slice(Be,this.pos));return++this.pos,xe(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(L.num,An)}Mt&&/[89]/.test(this.input.slice(Be,this.pos))&&(Mt=!1),46===sn&&!Mt&&(++this.pos,this.readInt(10),sn=this.input.charCodeAt(this.pos)),(69===sn||101===sn)&&!Mt&&((43===(sn=this.input.charCodeAt(++this.pos))||45===sn)&&++this.pos,null===this.readInt(10)&&this.raise(Be,"Invalid number")),xe(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var qn=function Xr(B,Be){return Be?parseInt(B,8):parseFloat(B.replace(/_/g,""))}(this.input.slice(Be,this.pos),Mt);return this.finishToken(L.num,qn)},ss.readCodePoint=function(){var Be;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var Mt=++this.pos;Be=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,Be>1114111&&this.invalidStringToken(Mt,"Code point out of bounds")}else Be=this.readHexChar(4);return Be},ss.readString=function(B){for(var Be="",Mt=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var sn=this.input.charCodeAt(this.pos);if(sn===B)break;92===sn?(Be+=this.input.slice(Mt,this.pos),Be+=this.readEscapedChar(!1),Mt=this.pos):8232===sn||8233===sn?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(ze(sn)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return Be+=this.input.slice(Mt,this.pos++),this.finishToken(L.string,Be)};var La={};ss.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(B){if(B!==La)throw B;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ss.invalidStringToken=function(B,Be){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw La;this.raise(B,Be)},ss.readTmplToken=function(){for(var B="",Be=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var Mt=this.input.charCodeAt(this.pos);if(96===Mt||36===Mt&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==L.template&&this.type!==L.invalidTemplate?(B+=this.input.slice(Be,this.pos),this.finishToken(L.template,B)):36===Mt?(this.pos+=2,this.finishToken(L.dollarBraceL)):(++this.pos,this.finishToken(L.backQuote));if(92===Mt)B+=this.input.slice(Be,this.pos),B+=this.readEscapedChar(!0),Be=this.pos;else if(ze(Mt)){switch(B+=this.input.slice(Be,this.pos),++this.pos,Mt){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:B+="\n";break;default:B+=String.fromCharCode(Mt)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),Be=this.pos}else++this.pos}},ss.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(L.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ss.readEscapedChar=function(B){var Be=this.input.charCodeAt(++this.pos);switch(++this.pos,Be){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ht(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),B)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(Be>=48&&Be<=55){var sn=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],An=parseInt(sn,8);return An>255&&(sn=sn.slice(0,-1),An=parseInt(sn,8)),this.pos+=sn.length-1,Be=this.input.charCodeAt(this.pos),("0"!==sn||56===Be||57===Be)&&(this.strict||B)&&this.invalidStringToken(this.pos-1-sn.length,B?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(An)}return ze(Be)?"":String.fromCharCode(Be)}},ss.readHexChar=function(B){var Be=this.pos,Mt=this.readInt(16,B);return null===Mt&&this.invalidStringToken(Be,"Bad character escape sequence"),Mt},ss.readWord1=function(){this.containsEsc=!1;for(var B="",Be=!0,Mt=this.pos,sn=this.options.ecmaVersion>=6;this.pos<this.input.length;){var An=this.fullCharCodeAtPos();if(_e(An,sn))this.pos+=An<=65535?1:2;else{if(92!==An)break;this.containsEsc=!0,B+=this.input.slice(Mt,this.pos);var qn=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Xi=this.readCodePoint();(Be?xe:_e)(Xi,sn)||this.invalidStringToken(qn,"Invalid Unicode escape"),B+=Ht(Xi),Mt=this.pos}Be=!1}return B+this.input.slice(Mt,this.pos)},ss.readWord=function(){var B=this.readWord1(),Be=L.name;return this.keywords.test(B)&&(Be=Ae[B]),this.finishToken(Be,B)};us.acorn={Parser:us,version:"8.8.0",defaultOptions:xt,Position:en,SourceLocation:Sn,getLineInfo:Pn,Node:ge,TokenType:Q,tokTypes:L,keywordTypes:Ae,TokContext:D,tokContexts:H,isIdentifierChar:_e,isIdentifierStart:xe,Token:rs,isNewLine:ze,lineBreak:ee,lineBreakG:Ce,nonASCIIwhitespace:st},ae.Node=ge,ae.Parser=us,ae.Position=en,ae.SourceLocation=Sn,ae.TokContext=D,ae.Token=rs,ae.TokenType=Q,ae.defaultOptions=xt,ae.getLineInfo=Pn,ae.isIdentifierChar=_e,ae.isIdentifierStart=xe,ae.isNewLine=ze,ae.keywordTypes=Ae,ae.lineBreak=ee,ae.lineBreakG=Ce,ae.nonASCIIwhitespace=st,ae.parse=function Qi(B,Be){return us.parse(B,Be)},ae.parseExpressionAt=function Ea(B,Be,Mt){return us.parseExpressionAt(B,Be,Mt)},ae.tokContexts=H,ae.tokTypes=L,ae.tokenizer=function As(B,Be){return us.tokenizer(B,Be)},ae.version="8.8.0",Object.defineProperty(ae,"__esModule",{value:!0})}(it)},5343:(yt,it)=>{"use strict";it.byteLength=function K(_e){var Q=V(_e),Le=Q[1];return 3*(Q[0]+Le)/4-Le},it.toByteArray=function le(_e){var Q,ee,Re=V(_e),Le=Re[0],Ve=Re[1],Ae=new j(function q(_e,Q,Re){return 3*(Q+Re)/4-Re}(0,Le,Ve)),Se=0,L=Ve>0?Le-4:Le;for(ee=0;ee<L;ee+=4)Q=ye[_e.charCodeAt(ee)]<<18|ye[_e.charCodeAt(ee+1)]<<12|ye[_e.charCodeAt(ee+2)]<<6|ye[_e.charCodeAt(ee+3)],Ae[Se++]=Q>>16&255,Ae[Se++]=Q>>8&255,Ae[Se++]=255&Q;return 2===Ve&&(Q=ye[_e.charCodeAt(ee)]<<2|ye[_e.charCodeAt(ee+1)]>>4,Ae[Se++]=255&Q),1===Ve&&(Q=ye[_e.charCodeAt(ee)]<<10|ye[_e.charCodeAt(ee+1)]<<4|ye[_e.charCodeAt(ee+2)]>>2,Ae[Se++]=Q>>8&255,Ae[Se++]=255&Q),Ae},it.fromByteArray=function xe(_e){for(var Q,Re=_e.length,Le=Re%3,Ve=[],Se=0,L=Re-Le;Se<L;Se+=16383)Ve.push(De(_e,Se,Se+16383>L?L:Se+16383));return 1===Le?Ve.push(ae[(Q=_e[Re-1])>>2]+ae[Q<<4&63]+"=="):2===Le&&Ve.push(ae[(Q=(_e[Re-2]<<8)+_e[Re-1])>>10]+ae[Q>>4&63]+ae[Q<<2&63]+"="),Ve.join("")};for(var ae=[],ye=[],j=typeof Uint8Array<"u"?Uint8Array:Array,oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",re=0,ie=oe.length;re<ie;++re)ae[re]=oe[re],ye[oe.charCodeAt(re)]=re;function V(_e){var Q=_e.length;if(Q%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Re=_e.indexOf("=");return-1===Re&&(Re=Q),[Re,Re===Q?0:4-Re%4]}function Te(_e){return ae[_e>>18&63]+ae[_e>>12&63]+ae[_e>>6&63]+ae[63&_e]}function De(_e,Q,Re){for(var Ve=[],Ae=Q;Ae<Re;Ae+=3)Ve.push(Te((_e[Ae]<<16&16711680)+(_e[Ae+1]<<8&65280)+(255&_e[Ae+2])));return Ve.join("")}ye["-".charCodeAt(0)]=62,ye["_".charCodeAt(0)]=63},3172:(yt,it,ae)=>{"use strict";var ye=ae(5343),j=ae(8461),oe="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;it.Buffer=K,it.SlowBuffer=function Ae(It){return+It!=It&&(It=0),K.alloc(+It)},it.INSPECT_MAX_BYTES=50;var re=2147483647;function V(It){if(It>re)throw new RangeError('The value "'+It+'" is invalid for option "size"');var rt=new Uint8Array(It);return Object.setPrototypeOf(rt,K.prototype),rt}function K(It,rt,lt){if("number"==typeof It){if("string"==typeof rt)throw new TypeError('The "string" argument must be of type string. Received type number');return De(It)}return q(It,rt,lt)}function q(It,rt,lt){if("string"==typeof It)return function xe(It,rt){if(("string"!=typeof rt||""===rt)&&(rt="utf8"),!K.isEncoding(rt))throw new TypeError("Unknown encoding: "+rt);var lt=0|Se(It,rt),dn=V(lt),Yn=dn.write(It,rt);return Yn!==lt&&(dn=dn.slice(0,Yn)),dn}(It,rt);if(ArrayBuffer.isView(It))return function Q(It){if(Gt(It,Uint8Array)){var rt=new Uint8Array(It);return Re(rt.buffer,rt.byteOffset,rt.byteLength)}return _e(It)}(It);if(null==It)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof It);if(Gt(It,ArrayBuffer)||It&&Gt(It.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Gt(It,SharedArrayBuffer)||It&&Gt(It.buffer,SharedArrayBuffer)))return Re(It,rt,lt);if("number"==typeof It)throw new TypeError('The "value" argument must not be of type number. Received type number');var dn=It.valueOf&&It.valueOf();if(null!=dn&&dn!==It)return K.from(dn,rt,lt);var Yn=function Le(It){if(K.isBuffer(It)){var rt=0|Ve(It.length),lt=V(rt);return 0===lt.length||It.copy(lt,0,0,rt),lt}return void 0!==It.length?"number"!=typeof It.length||Rt(It.length)?V(0):_e(It):"Buffer"===It.type&&Array.isArray(It.data)?_e(It.data):void 0}(It);if(Yn)return Yn;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof It[Symbol.toPrimitive])return K.from(It[Symbol.toPrimitive]("string"),rt,lt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof It)}function le(It){if("number"!=typeof It)throw new TypeError('"size" argument must be of type number');if(It<0)throw new RangeError('The value "'+It+'" is invalid for option "size"')}function De(It){return le(It),V(It<0?0:0|Ve(It))}function _e(It){for(var rt=It.length<0?0:0|Ve(It.length),lt=V(rt),dn=0;dn<rt;dn+=1)lt[dn]=255&It[dn];return lt}function Re(It,rt,lt){if(rt<0||It.byteLength<rt)throw new RangeError('"offset" is outside of buffer bounds');if(It.byteLength<rt+(lt||0))throw new RangeError('"length" is outside of buffer bounds');var dn;return dn=void 0===rt&&void 0===lt?new Uint8Array(It):void 0===lt?new Uint8Array(It,rt):new Uint8Array(It,rt,lt),Object.setPrototypeOf(dn,K.prototype),dn}function Ve(It){if(It>=re)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+re.toString(16)+" bytes");return 0|It}function Se(It,rt){if(K.isBuffer(It))return It.length;if(ArrayBuffer.isView(It)||Gt(It,ArrayBuffer))return It.byteLength;if("string"!=typeof It)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof It);var lt=It.length,dn=arguments.length>2&&!0===arguments[2];if(!dn&&0===lt)return 0;for(var Yn=!1;;)switch(rt){case"ascii":case"latin1":case"binary":return lt;case"utf8":case"utf-8":return Oe(It).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*lt;case"hex":return lt>>>1;case"base64":return li(It).length;default:if(Yn)return dn?-1:Oe(It).length;rt=(""+rt).toLowerCase(),Yn=!0}}function L(It,rt,lt){var dn=!1;if((void 0===rt||rt<0)&&(rt=0),rt>this.length||((void 0===lt||lt>this.length)&&(lt=this.length),lt<=0)||(lt>>>=0)<=(rt>>>=0))return"";for(It||(It="utf8");;)switch(It){case"hex":return en(this,rt,lt);case"utf8":case"utf-8":return Ct(this,rt,lt);case"ascii":return Ht(this,rt,lt);case"latin1":case"binary":return Qn(this,rt,lt);case"base64":return on(this,rt,lt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Sn(this,rt,lt);default:if(dn)throw new TypeError("Unknown encoding: "+It);It=(It+"").toLowerCase(),dn=!0}}function ee(It,rt,lt){var dn=It[rt];It[rt]=It[lt],It[lt]=dn}function Ce(It,rt,lt,dn,Yn){if(0===It.length)return-1;if("string"==typeof lt?(dn=lt,lt=0):lt>2147483647?lt=2147483647:lt<-2147483648&&(lt=-2147483648),Rt(lt=+lt)&&(lt=Yn?0:It.length-1),lt<0&&(lt=It.length+lt),lt>=It.length){if(Yn)return-1;lt=It.length-1}else if(lt<0){if(!Yn)return-1;lt=0}if("string"==typeof rt&&(rt=K.from(rt,dn)),K.isBuffer(rt))return 0===rt.length?-1:ze(It,rt,lt,dn,Yn);if("number"==typeof rt)return rt&=255,"function"==typeof Uint8Array.prototype.indexOf?Yn?Uint8Array.prototype.indexOf.call(It,rt,lt):Uint8Array.prototype.lastIndexOf.call(It,rt,lt):ze(It,[rt],lt,dn,Yn);throw new TypeError("val must be string, number or Buffer")}function ze(It,rt,lt,dn,Yn){var Hr,Ti=1,Di=It.length,us=rt.length;if(void 0!==dn&&("ucs2"===(dn=String(dn).toLowerCase())||"ucs-2"===dn||"utf16le"===dn||"utf-16le"===dn)){if(It.length<2||rt.length<2)return-1;Ti=2,Di/=2,us/=2,lt/=2}function vs(y,l){return 1===Ti?y[l]:y.readUInt16BE(l*Ti)}if(Yn){var Ds=-1;for(Hr=lt;Hr<Di;Hr++)if(vs(It,Hr)===vs(rt,-1===Ds?0:Hr-Ds)){if(-1===Ds&&(Ds=Hr),Hr-Ds+1===us)return Ds*Ti}else-1!==Ds&&(Hr-=Hr-Ds),Ds=-1}else for(lt+us>Di&&(lt=Di-us),Hr=lt;Hr>=0;Hr--){for(var nr=!0,fr=0;fr<us;fr++)if(vs(It,Hr+fr)!==vs(rt,fr)){nr=!1;break}if(nr)return Hr}return-1}function dt(It,rt,lt,dn){lt=Number(lt)||0;var Yn=It.length-lt;dn?(dn=Number(dn))>Yn&&(dn=Yn):dn=Yn;var Ti=rt.length;dn>Ti/2&&(dn=Ti/2);for(var Di=0;Di<dn;++Di){var us=parseInt(rt.substr(2*Di,2),16);if(Rt(us))return Di;It[lt+Di]=us}return Di}function st(It,rt,lt,dn){return di(Oe(rt,It.length-lt),It,lt,dn)}function bt(It,rt,lt,dn){return di(function Ft(It){for(var rt=[],lt=0;lt<It.length;++lt)rt.push(255&It.charCodeAt(lt));return rt}(rt),It,lt,dn)}function ut(It,rt,lt,dn){return di(li(rt),It,lt,dn)}function Vt(It,rt,lt,dn){return di(function Ot(It,rt){for(var lt,dn,Ti=[],Di=0;Di<It.length&&!((rt-=2)<0);++Di)dn=(lt=It.charCodeAt(Di))>>8,Ti.push(lt%256),Ti.push(dn);return Ti}(rt,It.length-lt),It,lt,dn)}function on(It,rt,lt){return ye.fromByteArray(0===rt&&lt===It.length?It:It.slice(rt,lt))}function Ct(It,rt,lt){lt=Math.min(It.length,lt);for(var dn=[],Yn=rt;Yn<lt;){var vs,Hr,Ds,nr,Ti=It[Yn],Di=null,us=Ti>239?4:Ti>223?3:Ti>191?2:1;if(Yn+us<=lt)switch(us){case 1:Ti<128&&(Di=Ti);break;case 2:128==(192&(vs=It[Yn+1]))&&(nr=(31&Ti)<<6|63&vs)>127&&(Di=nr);break;case 3:Hr=It[Yn+2],128==(192&(vs=It[Yn+1]))&&128==(192&Hr)&&(nr=(15&Ti)<<12|(63&vs)<<6|63&Hr)>2047&&(nr<55296||nr>57343)&&(Di=nr);break;case 4:Hr=It[Yn+2],Ds=It[Yn+3],128==(192&(vs=It[Yn+1]))&&128==(192&Hr)&&128==(192&Ds)&&(nr=(15&Ti)<<18|(63&vs)<<12|(63&Hr)<<6|63&Ds)>65535&&nr<1114112&&(Di=nr)}null===Di?(Di=65533,us=1):Di>65535&&(dn.push((Di-=65536)>>>10&1023|55296),Di=56320|1023&Di),dn.push(Di),Yn+=us}return function Qt(It){var rt=It.length;if(rt<=4096)return String.fromCharCode.apply(String,It);for(var lt="",dn=0;dn<rt;)lt+=String.fromCharCode.apply(String,It.slice(dn,dn+=4096));return lt}(dn)}function Ht(It,rt,lt){var dn="";lt=Math.min(It.length,lt);for(var Yn=rt;Yn<lt;++Yn)dn+=String.fromCharCode(127&It[Yn]);return dn}function Qn(It,rt,lt){var dn="";lt=Math.min(It.length,lt);for(var Yn=rt;Yn<lt;++Yn)dn+=String.fromCharCode(It[Yn]);return dn}function en(It,rt,lt){var dn=It.length;(!rt||rt<0)&&(rt=0),(!lt||lt<0||lt>dn)&&(lt=dn);for(var Yn="",Ti=rt;Ti<lt;++Ti)Yn+=_n[It[Ti]];return Yn}function Sn(It,rt,lt){for(var dn=It.slice(rt,lt),Yn="",Ti=0;Ti<dn.length-1;Ti+=2)Yn+=String.fromCharCode(dn[Ti]+256*dn[Ti+1]);return Yn}function Pn(It,rt,lt){if(It%1!=0||It<0)throw new RangeError("offset is not uint");if(It+rt>lt)throw new RangeError("Trying to access beyond buffer length")}function xt(It,rt,lt,dn,Yn,Ti){if(!K.isBuffer(It))throw new TypeError('"buffer" argument must be a Buffer instance');if(rt>Yn||rt<Ti)throw new RangeError('"value" argument is out of bounds');if(lt+dn>It.length)throw new RangeError("Index out of range")}function Jt(It,rt,lt,dn,Yn,Ti){if(lt+dn>It.length)throw new RangeError("Index out of range");if(lt<0)throw new RangeError("Index out of range")}function Gn(It,rt,lt,dn,Yn){return rt=+rt,lt>>>=0,Yn||Jt(It,0,lt,4),j.write(It,rt,lt,dn,23,4),lt+4}function ri(It,rt,lt,dn,Yn){return rt=+rt,lt>>>=0,Yn||Jt(It,0,lt,8),j.write(It,rt,lt,dn,52,8),lt+8}it.kMaxLength=re,!(K.TYPED_ARRAY_SUPPORT=function ie(){try{var It=new Uint8Array(1),rt={foo:function(){return 42}};return Object.setPrototypeOf(rt,Uint8Array.prototype),Object.setPrototypeOf(It,rt),42===It.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(K.prototype,"parent",{enumerable:!0,get:function(){if(K.isBuffer(this))return this.buffer}}),Object.defineProperty(K.prototype,"offset",{enumerable:!0,get:function(){if(K.isBuffer(this))return this.byteOffset}}),K.poolSize=8192,K.from=function(It,rt,lt){return q(It,rt,lt)},Object.setPrototypeOf(K.prototype,Uint8Array.prototype),Object.setPrototypeOf(K,Uint8Array),K.alloc=function(It,rt,lt){return function Te(It,rt,lt){return le(It),It<=0?V(It):void 0!==rt?"string"==typeof lt?V(It).fill(rt,lt):V(It).fill(rt):V(It)}(It,rt,lt)},K.allocUnsafe=function(It){return De(It)},K.allocUnsafeSlow=function(It){return De(It)},K.isBuffer=function(rt){return null!=rt&&!0===rt._isBuffer&&rt!==K.prototype},K.compare=function(rt,lt){if(Gt(rt,Uint8Array)&&(rt=K.from(rt,rt.offset,rt.byteLength)),Gt(lt,Uint8Array)&&(lt=K.from(lt,lt.offset,lt.byteLength)),!K.isBuffer(rt)||!K.isBuffer(lt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(rt===lt)return 0;for(var dn=rt.length,Yn=lt.length,Ti=0,Di=Math.min(dn,Yn);Ti<Di;++Ti)if(rt[Ti]!==lt[Ti]){dn=rt[Ti],Yn=lt[Ti];break}return dn<Yn?-1:Yn<dn?1:0},K.isEncoding=function(rt){switch(String(rt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},K.concat=function(rt,lt){if(!Array.isArray(rt))throw new TypeError('"list" argument must be an Array of Buffers');if(0===rt.length)return K.alloc(0);var dn;if(void 0===lt)for(lt=0,dn=0;dn<rt.length;++dn)lt+=rt[dn].length;var Yn=K.allocUnsafe(lt),Ti=0;for(dn=0;dn<rt.length;++dn){var Di=rt[dn];if(Gt(Di,Uint8Array))Ti+Di.length>Yn.length?K.from(Di).copy(Yn,Ti):Uint8Array.prototype.set.call(Yn,Di,Ti);else{if(!K.isBuffer(Di))throw new TypeError('"list" argument must be an Array of Buffers');Di.copy(Yn,Ti)}Ti+=Di.length}return Yn},K.byteLength=Se,K.prototype._isBuffer=!0,K.prototype.swap16=function(){var rt=this.length;if(rt%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var lt=0;lt<rt;lt+=2)ee(this,lt,lt+1);return this},K.prototype.swap32=function(){var rt=this.length;if(rt%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var lt=0;lt<rt;lt+=4)ee(this,lt,lt+3),ee(this,lt+1,lt+2);return this},K.prototype.swap64=function(){var rt=this.length;if(rt%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var lt=0;lt<rt;lt+=8)ee(this,lt,lt+7),ee(this,lt+1,lt+6),ee(this,lt+2,lt+5),ee(this,lt+3,lt+4);return this},K.prototype.toLocaleString=K.prototype.toString=function(){var rt=this.length;return 0===rt?"":0===arguments.length?Ct(this,0,rt):L.apply(this,arguments)},K.prototype.equals=function(rt){if(!K.isBuffer(rt))throw new TypeError("Argument must be a Buffer");return this===rt||0===K.compare(this,rt)},K.prototype.inspect=function(){var rt="",lt=it.INSPECT_MAX_BYTES;return rt=this.toString("hex",0,lt).replace(/(.{2})/g,"$1 ").trim(),this.length>lt&&(rt+=" ... "),"<Buffer "+rt+">"},oe&&(K.prototype[oe]=K.prototype.inspect),K.prototype.compare=function(rt,lt,dn,Yn,Ti){if(Gt(rt,Uint8Array)&&(rt=K.from(rt,rt.offset,rt.byteLength)),!K.isBuffer(rt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof rt);if(void 0===lt&&(lt=0),void 0===dn&&(dn=rt?rt.length:0),void 0===Yn&&(Yn=0),void 0===Ti&&(Ti=this.length),lt<0||dn>rt.length||Yn<0||Ti>this.length)throw new RangeError("out of range index");if(Yn>=Ti&&lt>=dn)return 0;if(Yn>=Ti)return-1;if(lt>=dn)return 1;if(this===rt)return 0;for(var Di=(Ti>>>=0)-(Yn>>>=0),us=(dn>>>=0)-(lt>>>=0),vs=Math.min(Di,us),Hr=this.slice(Yn,Ti),Ds=rt.slice(lt,dn),nr=0;nr<vs;++nr)if(Hr[nr]!==Ds[nr]){Di=Hr[nr],us=Ds[nr];break}return Di<us?-1:us<Di?1:0},K.prototype.includes=function(rt,lt,dn){return-1!==this.indexOf(rt,lt,dn)},K.prototype.indexOf=function(rt,lt,dn){return Ce(this,rt,lt,dn,!0)},K.prototype.lastIndexOf=function(rt,lt,dn){return Ce(this,rt,lt,dn,!1)},K.prototype.write=function(rt,lt,dn,Yn){if(void 0===lt)Yn="utf8",dn=this.length,lt=0;else if(void 0===dn&&"string"==typeof lt)Yn=lt,dn=this.length,lt=0;else{if(!isFinite(lt))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");lt>>>=0,isFinite(dn)?(dn>>>=0,void 0===Yn&&(Yn="utf8")):(Yn=dn,dn=void 0)}var Ti=this.length-lt;if((void 0===dn||dn>Ti)&&(dn=Ti),rt.length>0&&(dn<0||lt<0)||lt>this.length)throw new RangeError("Attempt to write outside buffer bounds");Yn||(Yn="utf8");for(var Di=!1;;)switch(Yn){case"hex":return dt(this,rt,lt,dn);case"utf8":case"utf-8":return st(this,rt,lt,dn);case"ascii":case"latin1":case"binary":return bt(this,rt,lt,dn);case"base64":return ut(this,rt,lt,dn);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Vt(this,rt,lt,dn);default:if(Di)throw new TypeError("Unknown encoding: "+Yn);Yn=(""+Yn).toLowerCase(),Di=!0}},K.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},K.prototype.slice=function(rt,lt){var dn=this.length;(rt=~~rt)<0?(rt+=dn)<0&&(rt=0):rt>dn&&(rt=dn),(lt=void 0===lt?dn:~~lt)<0?(lt+=dn)<0&&(lt=0):lt>dn&&(lt=dn),lt<rt&&(lt=rt);var Yn=this.subarray(rt,lt);return Object.setPrototypeOf(Yn,K.prototype),Yn},K.prototype.readUintLE=K.prototype.readUIntLE=function(rt,lt,dn){rt>>>=0,lt>>>=0,dn||Pn(rt,lt,this.length);for(var Yn=this[rt],Ti=1,Di=0;++Di<lt&&(Ti*=256);)Yn+=this[rt+Di]*Ti;return Yn},K.prototype.readUintBE=K.prototype.readUIntBE=function(rt,lt,dn){rt>>>=0,lt>>>=0,dn||Pn(rt,lt,this.length);for(var Yn=this[rt+--lt],Ti=1;lt>0&&(Ti*=256);)Yn+=this[rt+--lt]*Ti;return Yn},K.prototype.readUint8=K.prototype.readUInt8=function(rt,lt){return rt>>>=0,lt||Pn(rt,1,this.length),this[rt]},K.prototype.readUint16LE=K.prototype.readUInt16LE=function(rt,lt){return rt>>>=0,lt||Pn(rt,2,this.length),this[rt]|this[rt+1]<<8},K.prototype.readUint16BE=K.prototype.readUInt16BE=function(rt,lt){return rt>>>=0,lt||Pn(rt,2,this.length),this[rt]<<8|this[rt+1]},K.prototype.readUint32LE=K.prototype.readUInt32LE=function(rt,lt){return rt>>>=0,lt||Pn(rt,4,this.length),(this[rt]|this[rt+1]<<8|this[rt+2]<<16)+16777216*this[rt+3]},K.prototype.readUint32BE=K.prototype.readUInt32BE=function(rt,lt){return rt>>>=0,lt||Pn(rt,4,this.length),16777216*this[rt]+(this[rt+1]<<16|this[rt+2]<<8|this[rt+3])},K.prototype.readIntLE=function(rt,lt,dn){rt>>>=0,lt>>>=0,dn||Pn(rt,lt,this.length);for(var Yn=this[rt],Ti=1,Di=0;++Di<lt&&(Ti*=256);)Yn+=this[rt+Di]*Ti;return Yn>=(Ti*=128)&&(Yn-=Math.pow(2,8*lt)),Yn},K.prototype.readIntBE=function(rt,lt,dn){rt>>>=0,lt>>>=0,dn||Pn(rt,lt,this.length);for(var Yn=lt,Ti=1,Di=this[rt+--Yn];Yn>0&&(Ti*=256);)Di+=this[rt+--Yn]*Ti;return Di>=(Ti*=128)&&(Di-=Math.pow(2,8*lt)),Di},K.prototype.readInt8=function(rt,lt){return rt>>>=0,lt||Pn(rt,1,this.length),128&this[rt]?-1*(255-this[rt]+1):this[rt]},K.prototype.readInt16LE=function(rt,lt){rt>>>=0,lt||Pn(rt,2,this.length);var dn=this[rt]|this[rt+1]<<8;return 32768&dn?4294901760|dn:dn},K.prototype.readInt16BE=function(rt,lt){rt>>>=0,lt||Pn(rt,2,this.length);var dn=this[rt+1]|this[rt]<<8;return 32768&dn?4294901760|dn:dn},K.prototype.readInt32LE=function(rt,lt){return rt>>>=0,lt||Pn(rt,4,this.length),this[rt]|this[rt+1]<<8|this[rt+2]<<16|this[rt+3]<<24},K.prototype.readInt32BE=function(rt,lt){return rt>>>=0,lt||Pn(rt,4,this.length),this[rt]<<24|this[rt+1]<<16|this[rt+2]<<8|this[rt+3]},K.prototype.readFloatLE=function(rt,lt){return rt>>>=0,lt||Pn(rt,4,this.length),j.read(this,rt,!0,23,4)},K.prototype.readFloatBE=function(rt,lt){return rt>>>=0,lt||Pn(rt,4,this.length),j.read(this,rt,!1,23,4)},K.prototype.readDoubleLE=function(rt,lt){return rt>>>=0,lt||Pn(rt,8,this.length),j.read(this,rt,!0,52,8)},K.prototype.readDoubleBE=function(rt,lt){return rt>>>=0,lt||Pn(rt,8,this.length),j.read(this,rt,!1,52,8)},K.prototype.writeUintLE=K.prototype.writeUIntLE=function(rt,lt,dn,Yn){rt=+rt,lt>>>=0,dn>>>=0,Yn||xt(this,rt,lt,dn,Math.pow(2,8*dn)-1,0);var Di=1,us=0;for(this[lt]=255&rt;++us<dn&&(Di*=256);)this[lt+us]=rt/Di&255;return lt+dn},K.prototype.writeUintBE=K.prototype.writeUIntBE=function(rt,lt,dn,Yn){rt=+rt,lt>>>=0,dn>>>=0,Yn||xt(this,rt,lt,dn,Math.pow(2,8*dn)-1,0);var Di=dn-1,us=1;for(this[lt+Di]=255&rt;--Di>=0&&(us*=256);)this[lt+Di]=rt/us&255;return lt+dn},K.prototype.writeUint8=K.prototype.writeUInt8=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,1,255,0),this[lt]=255&rt,lt+1},K.prototype.writeUint16LE=K.prototype.writeUInt16LE=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,2,65535,0),this[lt]=255&rt,this[lt+1]=rt>>>8,lt+2},K.prototype.writeUint16BE=K.prototype.writeUInt16BE=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,2,65535,0),this[lt]=rt>>>8,this[lt+1]=255&rt,lt+2},K.prototype.writeUint32LE=K.prototype.writeUInt32LE=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,4,4294967295,0),this[lt+3]=rt>>>24,this[lt+2]=rt>>>16,this[lt+1]=rt>>>8,this[lt]=255&rt,lt+4},K.prototype.writeUint32BE=K.prototype.writeUInt32BE=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,4,4294967295,0),this[lt]=rt>>>24,this[lt+1]=rt>>>16,this[lt+2]=rt>>>8,this[lt+3]=255&rt,lt+4},K.prototype.writeIntLE=function(rt,lt,dn,Yn){if(rt=+rt,lt>>>=0,!Yn){var Ti=Math.pow(2,8*dn-1);xt(this,rt,lt,dn,Ti-1,-Ti)}var Di=0,us=1,vs=0;for(this[lt]=255&rt;++Di<dn&&(us*=256);)rt<0&&0===vs&&0!==this[lt+Di-1]&&(vs=1),this[lt+Di]=(rt/us>>0)-vs&255;return lt+dn},K.prototype.writeIntBE=function(rt,lt,dn,Yn){if(rt=+rt,lt>>>=0,!Yn){var Ti=Math.pow(2,8*dn-1);xt(this,rt,lt,dn,Ti-1,-Ti)}var Di=dn-1,us=1,vs=0;for(this[lt+Di]=255&rt;--Di>=0&&(us*=256);)rt<0&&0===vs&&0!==this[lt+Di+1]&&(vs=1),this[lt+Di]=(rt/us>>0)-vs&255;return lt+dn},K.prototype.writeInt8=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,1,127,-128),rt<0&&(rt=255+rt+1),this[lt]=255&rt,lt+1},K.prototype.writeInt16LE=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,2,32767,-32768),this[lt]=255&rt,this[lt+1]=rt>>>8,lt+2},K.prototype.writeInt16BE=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,2,32767,-32768),this[lt]=rt>>>8,this[lt+1]=255&rt,lt+2},K.prototype.writeInt32LE=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,4,2147483647,-2147483648),this[lt]=255&rt,this[lt+1]=rt>>>8,this[lt+2]=rt>>>16,this[lt+3]=rt>>>24,lt+4},K.prototype.writeInt32BE=function(rt,lt,dn){return rt=+rt,lt>>>=0,dn||xt(this,rt,lt,4,2147483647,-2147483648),rt<0&&(rt=4294967295+rt+1),this[lt]=rt>>>24,this[lt+1]=rt>>>16,this[lt+2]=rt>>>8,this[lt+3]=255&rt,lt+4},K.prototype.writeFloatLE=function(rt,lt,dn){return Gn(this,rt,lt,!0,dn)},K.prototype.writeFloatBE=function(rt,lt,dn){return Gn(this,rt,lt,!1,dn)},K.prototype.writeDoubleLE=function(rt,lt,dn){return ri(this,rt,lt,!0,dn)},K.prototype.writeDoubleBE=function(rt,lt,dn){return ri(this,rt,lt,!1,dn)},K.prototype.copy=function(rt,lt,dn,Yn){if(!K.isBuffer(rt))throw new TypeError("argument should be a Buffer");if(dn||(dn=0),!Yn&&0!==Yn&&(Yn=this.length),lt>=rt.length&&(lt=rt.length),lt||(lt=0),Yn>0&&Yn<dn&&(Yn=dn),Yn===dn||0===rt.length||0===this.length)return 0;if(lt<0)throw new RangeError("targetStart out of bounds");if(dn<0||dn>=this.length)throw new RangeError("Index out of range");if(Yn<0)throw new RangeError("sourceEnd out of bounds");Yn>this.length&&(Yn=this.length),rt.length-lt<Yn-dn&&(Yn=rt.length-lt+dn);var Ti=Yn-dn;return this===rt&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(lt,dn,Yn):Uint8Array.prototype.set.call(rt,this.subarray(dn,Yn),lt),Ti},K.prototype.fill=function(rt,lt,dn,Yn){if("string"==typeof rt){if("string"==typeof lt?(Yn=lt,lt=0,dn=this.length):"string"==typeof dn&&(Yn=dn,dn=this.length),void 0!==Yn&&"string"!=typeof Yn)throw new TypeError("encoding must be a string");if("string"==typeof Yn&&!K.isEncoding(Yn))throw new TypeError("Unknown encoding: "+Yn);if(1===rt.length){var Ti=rt.charCodeAt(0);("utf8"===Yn&&Ti<128||"latin1"===Yn)&&(rt=Ti)}}else"number"==typeof rt?rt&=255:"boolean"==typeof rt&&(rt=Number(rt));if(lt<0||this.length<lt||this.length<dn)throw new RangeError("Out of range index");if(dn<=lt)return this;var Di;if(lt>>>=0,dn=void 0===dn?this.length:dn>>>0,rt||(rt=0),"number"==typeof rt)for(Di=lt;Di<dn;++Di)this[Di]=rt;else{var us=K.isBuffer(rt)?rt:K.from(rt,Yn),vs=us.length;if(0===vs)throw new TypeError('The value "'+rt+'" is invalid for argument "value"');for(Di=0;Di<dn-lt;++Di)this[Di+lt]=us[Di%vs]}return this};var ni=/[^+/0-9A-Za-z-_]/g;function Oe(It,rt){rt=rt||1/0;for(var lt,dn=It.length,Yn=null,Ti=[],Di=0;Di<dn;++Di){if((lt=It.charCodeAt(Di))>55295&&lt<57344){if(!Yn){if(lt>56319){(rt-=3)>-1&&Ti.push(239,191,189);continue}if(Di+1===dn){(rt-=3)>-1&&Ti.push(239,191,189);continue}Yn=lt;continue}if(lt<56320){(rt-=3)>-1&&Ti.push(239,191,189),Yn=lt;continue}lt=65536+(Yn-55296<<10|lt-56320)}else Yn&&(rt-=3)>-1&&Ti.push(239,191,189);if(Yn=null,lt<128){if((rt-=1)<0)break;Ti.push(lt)}else if(lt<2048){if((rt-=2)<0)break;Ti.push(lt>>6|192,63&lt|128)}else if(lt<65536){if((rt-=3)<0)break;Ti.push(lt>>12|224,lt>>6&63|128,63&lt|128)}else{if(!(lt<1114112))throw new Error("Invalid code point");if((rt-=4)<0)break;Ti.push(lt>>18|240,lt>>12&63|128,lt>>6&63|128,63&lt|128)}}return Ti}function li(It){return ye.toByteArray(function St(It){if((It=(It=It.split("=")[0]).trim().replace(ni,"")).length<2)return"";for(;It.length%4!=0;)It+="=";return It}(It))}function di(It,rt,lt,dn){for(var Yn=0;Yn<dn&&!(Yn+lt>=rt.length||Yn>=It.length);++Yn)rt[Yn+lt]=It[Yn];return Yn}function Gt(It,rt){return It instanceof rt||null!=It&&null!=It.constructor&&null!=It.constructor.name&&It.constructor.name===rt.name}function Rt(It){return It!=It}var _n=function(){for(var It="0123456789abcdef",rt=new Array(256),lt=0;lt<16;++lt)for(var dn=16*lt,Yn=0;Yn<16;++Yn)rt[dn+Yn]=It[lt]+It[Yn];return rt}()},4147:function(yt){yt.exports=function(it){var ae={};function ye(j){if(ae[j])return ae[j].exports;var oe=ae[j]={i:j,l:!1,exports:{}};return it[j].call(oe.exports,oe,oe.exports,ye),oe.l=!0,oe.exports}return ye.m=it,ye.c=ae,ye.i=function(j){return j},ye.d=function(j,oe,re){ye.o(j,oe)||Object.defineProperty(j,oe,{configurable:!1,enumerable:!0,get:re})},ye.n=function(j){var oe=j&&j.__esModule?function(){return j.default}:function(){return j};return ye.d(oe,"a",oe),oe},ye.o=function(j,oe){return Object.prototype.hasOwnProperty.call(j,oe)},ye.p="",ye(ye.s=3)}([function(it,ae,ye){"use strict";var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Sn){return typeof Sn}:function(Sn){return Sn&&"function"==typeof Symbol&&Sn.constructor===Symbol&&Sn!==Symbol.prototype?"symbol":typeof Sn},oe=ye(2),re=j(""),ie=j({}),V=j(function(){}),K=function(Pn){return(typeof Pn>"u"?"undefined":j(Pn))===ie},le=function(Pn){return(typeof Pn>"u"?"undefined":j(Pn))===V},Te=function(Pn){return K(Pn)&&le(Pn.collection)},De=ye(1),xe=function(Pn){return null!=Pn&&!Pn.removed()},_e=function(Pn,xt){return(_e=null!=Pn.has?function(Gn,ri){return Gn.has(ri)}:function(Gn,ri){return Gn.intersection(ri).length>0})(Pn,xt)},Q=function(Pn){if(function(Pn){return(typeof Pn>"u"?"undefined":j(Pn))===re}(Pn))return function(xt){return xt.is(Pn)};if(le(Pn))return Pn;if(Te(Pn))return function(xt){return _e(Pn,xt)};throw new Error("Can not create match function for spec",Pn)},Le=function(Pn,xt,Jt,Gn,ri){var ni=function(Pn,xt,Jt,Gn){var ri={cy:Pn,events:xt,selector:Jt||"node",fn:Gn};return Pn.on(ri.events,ri.selector,ri.fn),ri}(xt,Jt,Gn,ri);(Pn.bindings=Pn.bindings||[]).push(ni)},Ve=function(Pn){Pn.bindings.forEach(function(Gn){Gn.cy.off(Gn.events,Gn.selector,Gn.fn)}),Pn.bindings=[]},Se=function(Pn){return function(xt){var Jt=xt.position(),Gn=Pn.delta;if(null!=Pn.delta&&!xt.same(Pn.grabbedNode)&&!xt.grabbed())return{x:Jt.x+Gn.x,y:Jt.y+Gn.y}}},L=function(Pn){return function(xt){for(var Jt=xt.neighborhood(),Gn={x:0,y:0},ri=0,ni=0;ni<Jt.length;ni++){var St=Jt[ni];if(St.isNode()&&!Pn(St)){var Oe=St.position();Gn.x+=Oe.x,Gn.y+=Oe.y,ri++}}if(!(ri<2))return Gn.x/=ri,Gn.y/=ri,Gn}},ee=function(Pn,xt,Jt){return Pn<xt?xt:Pn>Jt?Jt:Pn},Ce=function(Pn,xt){var Jt=Pn.position();return{x:ee(Jt.x,xt.x1,xt.x2),y:ee(Jt.y,xt.y1,xt.y2)}},ze=function(Pn){return function(xt){return Ce(xt,Pn)}},st=function(Pn){return function(xt){return function(Pn,xt){var Jt=Pn.position(),Gn=Jt.x,ri=Jt.y,ni=xt.x1,St=xt.y1,Oe=xt.x2,Ft=xt.y2,di=Math.abs;if(ni<=Gn&&Gn<=Oe&&St<=ri&&ri<=Ft){var Gt=di(ni-Gn),Rt=di(Oe-Gn),_n=di(St-ri),It=di(Ft-ri),rt=Math.min(Gt,Rt,_n,It);return rt===Gt?{x:ni,y:ri}:rt===Rt?{x:Oe,y:ri}:rt===_n?{x:Gn,y:St}:{x:Gn,y:Ft}}return{x:Gn,y:ri}}(xt,Pn)}},bt=function(Pn){return function(xt){var Jt=Pn.extent(),Gn=xt.outerWidth(),ri=xt.outerHeight();return Ce(xt,{x1:Jt.x1+Gn/2,x2:Jt.x2-Gn/2,y1:Jt.y1+ri/2,y2:Jt.y2-ri/2})}},Ct=function(Pn,xt){return"mean"===xt.reposition?function(Pn){return function(xt,Jt){var Gn=function(ni){return Pn.matches(ni)&&ni.neighborhood().length>2&&!ni.grabbed()};Le(Pn,Jt,"position","node",function(){(this.neighborhood().some(Gn)||Pn.meanOnSelfPosition(this)&&Gn(this))&&xt(Jt,[Pn])}),Le(Pn,Jt,"add remove","edge",function(){[Jt.getElementById(this.data("source")),Jt.getElementById(this.data("target"))].some(Gn)&&xt(Jt,[Pn])})}}(xt):"drag"===xt.reposition?function(Pn){return function(xt,Jt){Le(Pn,Jt,"grab","node",function(){if(Pn.dragWithMatches(this)){var ri=this.position();Pn.grabbedNode=this,Pn.p1={x:ri.x,y:ri.y},Pn.delta={x:0,y:0}}}),Le(Pn,Jt,"drag","node",function(){if(this.same(Pn.grabbedNode)){var ri=Pn.delta,ni=Pn.p1,St=this.position(),Oe={x:St.x,y:St.y};ri.x=Oe.x-ni.x,ri.y=Oe.y-ni.y,Pn.p1=Oe,xt(Jt,[Pn])}}),Le(Pn,Jt,"free","node",function(){Pn.grabbedNode=null,Pn.delta=null,Pn.p1=null})}}(xt):K(xt.reposition)||"matching"===xt.when||"viewport"===xt.reposition?function(Pn){return function(xt,Jt){Le(Pn,Jt,"position","node",function(){Pn.matches(this)&&xt(Jt,[Pn])})}}(xt):xt.when},rn=function(Pn,xt,Jt){var Gn=De({},oe,Jt);if(Gn.getNewPos=function(Pn,xt){var Jt=Pn.reposition;return"mean"===Jt?L(Q(Pn.meanIgnores)):"viewport"===Jt?bt(xt):"drag"===Jt?Se(Pn):K(Jt)?null==Jt.type||"inside"==Jt.type?ze(Jt):"outside"==Jt.type?st(Jt):void 0:Jt}(Gn,Pn),Gn.listener=Ct(0,Gn),Te(Gn.nodesMatching))Gn.nodes=Gn.nodesMatching.slice(),Gn.matches=function(St){return xe(St)&&_e(Gn.nodes,St)};else{var ni=Q(Gn.nodesMatching);Gn.matches=function(St){return xe(St)&&ni(St)}}return null!=Gn.dragWith&&(Gn.dragWithMatches=Q(Gn.dragWith)),Gn.listener(function(){Qn(Pn,[Gn])},Pn),Gn.enabled=!0,xt.rules.push(Gn),Gn},Ht=function(Pn,xt){Pn.removeListener("add","node",xt.onAddNode),Pn.removeListener("remove","node",xt.onRmNode)},Qn=function(Pn,xt){var Jt=Pn.scratch().automove;xt=xt??Jt.rules,Pn.batch(function(){for(var Gn=0;Gn<xt.length;Gn++){var ri=xt[Gn];if(ri.destroyed||!ri.enabled)break;for(var ni=ri.nodes||Jt.nodes,St=ni.length-1;St>=0;St--){var Oe=ni[St];if(Oe.removed())ni.unmerge(Oe);else if(ri.matches(Oe)){var Ft=Oe.position(),Ot=ri.getNewPos(Oe);null!=Ot&&(Ft.x!==Ot.x||Ft.y!==Ot.y)&&(Oe.position(Ot),Oe.trigger("automove",[ri]))}}}})};it.exports=function(Pn){var xt=this,Jt=xt.scratch().automove=xt.scratch().automove||{rules:[]};if(0===Jt.rules.length&&(Jt.nodes=xt.nodes().slice(),function(Pn,xt){xt.onAddNode=function(Jt){xt.nodes.merge(Jt.target)},xt.onRmNode=function(Jt){xt.nodes.unmerge(Jt.target)},Pn.on("add","node",xt.onAddNode),Pn.on("remove","node",xt.onRmNode)}(xt,Jt)),"destroy"===Pn)return Jt.rules.forEach(function(ri){Ve(ri),ri.destroyed=!0}),Jt.rules.splice(0,Jt.rules.length),void Ht(xt,Jt);var Gn=rn(xt,Jt,Pn);return Qn(xt,[Gn]),{apply:function(){Qn(xt,[Gn])},disable:function(){this.toggle(!1)},enable:function(){this.toggle(!0)},enabled:function(){return Gn.enabled},toggle:function(ni){Gn.enabled=void 0!==ni?ni:!Gn.enabled,Gn.enabled&&Qn(xt,[Gn])},destroy:function(){var ni=Jt.rules;return Ve(Gn),Gn.destroyed=!0,ni.splice(ni.indexOf(Gn),1),0===ni.length&&Ht(xt,Jt),this}}}},function(it,ae,ye){"use strict";it.exports=null!=Object.assign?Object.assign.bind(Object):function(j){for(var oe=arguments.length,re=Array(oe>1?oe-1:0),ie=1;ie<oe;ie++)re[ie-1]=arguments[ie];return re.forEach(function(V){Object.keys(V).forEach(function(K){return j[K]=V[K]})}),j}},function(it,ae,ye){"use strict";it.exports={nodesMatching:function(re){return!1},reposition:"mean",when:void 0,meanIgnores:function(re){return!1},meanOnSelfPosition:function(re){return!0},dragWith:function(re){return!1}}},function(it,ae,ye){"use strict";var j=ye(0),oe=function(ie){!ie||ie("core","automove",j)};typeof cytoscape<"u"&&oe(cytoscape),it.exports=oe}])},2960:function(yt,it,ae){var ye,j;yt.exports=(ye=ae(8132),j=ae(8078),function(oe){var re={};function ie(V){if(re[V])return re[V].exports;var K=re[V]={i:V,l:!1,exports:{}};return oe[V].call(K.exports,K,K.exports,ie),K.l=!0,K.exports}return ie.m=oe,ie.c=re,ie.i=function(V){return V},ie.d=function(V,K,q){ie.o(V,K)||Object.defineProperty(V,K,{configurable:!1,enumerable:!0,get:q})},ie.n=function(V){var K=V&&V.__esModule?function(){return V.default}:function(){return V};return ie.d(K,"a",K),K},ie.o=function(V,K){return Object.prototype.hasOwnProperty.call(V,K)},ie.p="",ie(ie.s=12)}([function(oe,re,ie){"use strict";oe.exports=null!=Object.assign?Object.assign.bind(Object):function(V){for(var K=arguments.length,q=Array(K>1?K-1:0),le=1;le<K;le++)q[le-1]=arguments[le];return q.filter(function(Te){return null!=Te}).forEach(function(Te){Object.keys(Te).forEach(function(De){return V[De]=Te[De]})}),V}},function(oe,re,ie){"use strict";var V=ie(10),K=ie(0);oe.exports=function(q){return new V(K({cy:this},q))}},function(oe,re,ie){"use strict";oe.exports={disableGestures:function V(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var le=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,le),window.addEventListener("touchmove",this.preventDefault,le),window.addEventListener("wheel",this.preventDefault,le)}return this},resetGestures:function K(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var le=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,le),window.removeEventListener("touchmove",this.preventDefault,le),window.removeEventListener("wheel",this.preventDefault,le)}return this},saveGestureState:function q(){var le=this.cy;return this.lastPanningEnabled=le.panningEnabled(),this.lastZoomingEnabled=le.zoomingEnabled(),this.lastBoxSelectionEnabled=le.boxSelectionEnabled(),this}}},function(oe,re,ie){"use strict";oe.exports={addCytoscapeListeners:function V(){var K=this,q=this.cy,le=this.options;return this.addListener(q,"drag",function(){return K.grabbingNode=!0}),this.addListener(q,"free",function(){return K.grabbingNode=!1}),this.addListener(q,"tapstart","node",function(Te){K.drawMode&&K.start(Te.target)}),this.addListener(q,"tapdrag",function(Te){K.update(Te.position)}),this.addListener(q,"tapdragover","node",function(Te){le.snap||K.preview(Te.target)}),this.addListener(q,"tapdragout","node",function(Te){le.snap||K.unpreview(Te.target)}),this.addListener(q,"tapend",function(){K.stop()}),this}}},function(oe,re,ie){"use strict";oe.exports={canConnect:function(q,le){return!q.same(le)},edgeParams:function(q,le){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0}},function(oe,re,ie){"use strict";oe.exports={toggleDrawMode:function V(le){var Te=this.cy;return this.drawMode=le??!this.drawMode,this.drawMode?(this.prevUngrabifyState=Te.autoungrabify(),Te.autoungrabify(!0),this.emit("drawon")):(Te.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function K(){return this.toggleDrawMode(!0)},disableDrawMode:function q(){return this.toggleDrawMode(!1)}}},function(oe,re,ie){"use strict";var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Le){return typeof Le}:function(Le){return Le&&"function"==typeof Symbol&&Le.constructor===Symbol&&Le!==Symbol.prototype?"symbol":typeof Le},K=ie(0);function Te(Le,Ve,Ae){var Se={};return K(Se,Ve,Le),K(Se.data,Ve.data,Le.data),Se.classes=function(Ve){return(typeof Ve>"u"?"undefined":V(Ve))===V("")}(Ve.classes)?Ve.classes+" "+Ae:function(Ve){return(typeof Ve>"u"?"undefined":V(Ve))===V([])&&null!=Ve.length}(Ve.classes)?Ve.classes.join(" ")+" "+Ae:Ae,Se}oe.exports={makeEdges:function De(){var Le=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Ve=this.cy,Se=this.presumptiveTargets,L=this.previewEles,ee=this.active,Ce=this.sourceNode,ze=this.targetNode,dt=Le?"eh-preview":"",st=Ve.collection(),bt=this.canConnect(ze);if(ee&&bt){if(!ze||0===ze.size())return L.remove(),void this.emit("cancel",this.mp(),Ce,Se);if(!Le)return L.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),Ce,ze,L);var ut=Ve.add(Te({group:"edges",data:{source:Ce.id(),target:ze.id()}},this.edgeParams(ze),dt));return st=st.merge(ut),Le?(this.previewEles=st,st.style("events","no")):(st.style("events",""),this.emit("complete",this.mp(),Ce,ze,st)),this}},makePreview:function xe(){return this.makeEdges(!0),this},removePreview:function Q(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function _e(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function Re(){var Le=this,Ve=this.sourceNode,Ae=this.ghostNode,Se=this.cy,Ce=this.mx,ze=this.my,dt=void 0,st=void 0;if(Ve)return(!Ae||0===Ae.length||Ae.removed())&&(st=this.ghostEles=Se.collection(),Se.batch(function(){(Ae=Le.ghostNode=Se.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var bt={};(dt=Se.add(K({},bt,{group:"edges",data:K({},bt.data,{source:Ve.id(),target:Ae.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})}),st.merge(Ae).merge(dt)),Ae.position({x:Ce,y:ze}),this}}},function(oe,re,ie){"use strict";oe.exports={disableEdgeEvents:function V(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function K(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(oe,re,ie){"use strict";oe.exports={enable:function V(){return this.enabled=!0,this.emit("enable"),this},disable:function K(){return this.enabled=!1,this.emit("disable"),this}}},function(oe,re,ie){"use strict";var V=ie(13),K=Math.sqrt(2);oe.exports={start:function De(Ve){var Ae=this;if(this.canStartOn(Ve)){this.active=!0,this.sourceNode=Ve,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var Se=function(ee){return ee.id()};this.canConnect=V(function(L){return Ae.options.canConnect(Ae.sourceNode,L)},Se),this.edgeParams=V(function(L){return Ae.options.edgeParams(Ae.sourceNode,L)},Se),this.emit("start",this.hp(),Ve)}},update:function xe(Ve){if(this.active){var Ae=Ve;return this.mx=Ae.x,this.my=Ae.y,this.updateEdge(),this.throttledSnap(),this}},preview:function Q(Ve){var Ae=this,Se=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],L=this.options,ee=this.sourceNode,ze=this.ghostEles,dt=this.presumptiveTargets,st=this.previewEles,bt=this.active,ut=ee,Vt=Ve.same(this.ghostNode),on=!this.canConnect(Ve),Ct=Ve.same(this.targetNode);if(!bt||Vt||on||Ct)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var rn=function(){Ae.targetNode=Ve,dt.merge(Ve),Ve.addClass("eh-presumptive-target"),Ve.addClass("eh-target"),Ae.emit("hoverover",Ae.mp(),ut,Ve),Ve.addClass("eh-preview"),ze.addClass("eh-preview-active"),ee.addClass("eh-preview-active"),Ve.addClass("eh-preview-active"),Ae.makePreview(),Ae.emit("previewon",Ae.mp(),ut,Ve,st)};return Se&&L.hoverDelay>0?this.previewTimeout=setTimeout(rn,L.hoverDelay):rn(),!0},unpreview:function Re(Ve){if(this.active){var Se=this.sourceNode,L=this.previewEles,ee=this.ghostEles,Ce=this.cy;clearTimeout(this.previewTimeout),this.previewTimeout=null;var ze=Se;return Ve.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),ee.removeClass("eh-preview-active"),Se.removeClass("eh-preview-active"),this.targetNode=Ce.collection(),this.removePreview(ze,Ve),this.emit("hoverout",this.mp(),ze,Ve),this.emit("previewoff",this.mp(),ze,Ve,L),this}},stop:function Le(){if(this.active){var Ve=this.sourceNode,Ae=this.targetNode,Se=this.ghostEles,L=this.presumptiveTargets;return clearTimeout(this.previewTimeout),Ve.removeClass("eh-source eh-preview-active"),Ae.removeClass("eh-target eh-preview eh-hover eh-preview-active"),L.removeClass("eh-presumptive-target"),this.makeEdges(),Se.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),Ve),this}},snap:function _e(){if(!this.active||!this.options.snap)return!1;var Ve=this.cy,Ae=this.targetNode,Se=this.options.snapThreshold,L=this.mp(),ee=this.previewEles,Ce=this.ghostNode,dt=function(Gn,ri,ni,St){var Oe=ni-Gn,Ft=St-ri;return Oe*Oe+Ft*Ft},bt=function(Gn){return function(Gn,ri){return dt(Gn.x,Gn.y,ri.x,ri.y)}(Gn.position(),L)},ut=function(Gn){var ni=function(Gn){return K*Math.max(Gn.outerWidth(),Gn.outerHeight())/2}(Gn)+Se;return ni*ni},Vt=function(Gn){return bt(Gn)<=ut(Gn)},on=function(Gn){var ri=Gn.position(),ni=Gn.outerWidth()/2,St=Gn.outerHeight()/2,Oe=ri.x,Ft=ri.y,Ot=L.x,li=L.y,di=Oe-ni,Gt=Oe+ni,Rt=Ft-St,_n=Ft+St,It=di<=Ot&&Ot<=Gt,rt=Rt<=li&&li<=_n;if(It&&rt)return 0;if(It){var lt=li-Rt,dn=li-_n;return Math.min(lt*lt,dn*dn)}if(rt){var Yn=Ot-di,Ti=Ot-Gt;return Math.min(Yn*Yn,Ti*Ti)}return Ot<di&&li<Rt?dt(Ot,li,di,Rt):Ot>Gt&&li<Rt?dt(Ot,li,Gt,Rt):dt(Ot,li,Ot<di&&li>_n?di:Gt,_n)},Ht=function(Gn){var ri=L,St=Gn.outerWidth()/2,Ft=Gn.outerHeight()/2,Ot=Gn.position();return Ot.x-St<=ri.x&&ri.x<=Ot.x+St&&Ot.y-Ft<=ri.y&&ri.y<=Ot.y+Ft},en=Ve.nodes(function(Jt){return!((Gn=Jt).same(ee)||Gn.same(Ce))&&Vt(Jt);var Gn}).sort(function(Gn,ri){return on(Gn)-on(ri)}),Sn=!1;Ae.nonempty()&&!Vt(Ae)&&this.unpreview(Ae);for(var Pn=0;Pn<en.length;Pn++){var xt=en[Pn];if((!xt.isParent()||!Ht(xt))&&(!xt.isChild()||Ht(xt.parent()))&&(xt.same(Ae)||this.preview(xt,false))){Sn=!0;break}}return Sn},canStartOn:function q(Ve){var ut,Ae=this.previewEles,Se=this.ghostEles;return this.enabled&&!this.active&&!this.grabbingNode&&null!=Ve&&Ve.nonempty()&&!(function(ut){return Ae.anySame(ut)}(ut=Ve)||function(ut){return Se.anySame(ut)}(ut))},canStartDrawModeOn:function le(Ve){return this.canStartOn(Ve)&&this.drawMode},canStartNonDrawModeOn:function Te(Ve){return this.canStartOn(Ve)&&!this.drawMode}}},function(oe,re,ie){"use strict";var V=ie(4),K=ie(0),q=ie(14),le=ie(2),Te=ie(3),De=ie(5),xe=ie(6),_e=ie(8),Q=ie(9),Re=ie(11),Le=ie(7);function Ve(L){this.cy=L.cy,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=K({},V,L),this.saveGestureState(),this.addListeners(),this.throttledSnap=q(this.snap.bind(this),1e3/L.snapFrequency),this.preventDefault=function(dt){return dt.preventDefault()},this.canConnect=function(){return!1};var Ce=!1;try{var ze=Object.defineProperty({},"passive",{get:function(){Ce=!0}});window.addEventListener("test",null,ze)}catch{}this.windowListenerOptions=!Ce||{capture:!0,passive:!1}}var Ae=Ve.prototype={};Ae.destroy=function(){this.removeListeners()},Ae.setOptions=function(L){K(this.options,L)},Ae.mp=function(){return{x:this.mx,y:this.my}},Ae.hp=function(){return{x:this.hx,y:this.hy}},Ae.clearCollections=function(){var L=this.cy;this.previewEles=L.collection(),this.ghostEles=L.collection(),this.ghostNode=L.collection(),this.sourceNode=L.collection(),this.targetNode=L.collection(),this.presumptiveTargets=L.collection()},[le,Te,De,xe,_e,Q,Re,Le].forEach(function(ee){return K(Ae,ee)}),oe.exports=Ve},function(oe,re,ie){"use strict";var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q};function le(Q,Re,Le,Ve,Ae){return(typeof Le>"u"?"undefined":V(Le))!==V("")&&(Ae=Ve=Le,Le=null),null==Ae&&(Ae=!1),{target:Q,event:Re,selector:Le,callback:Ve,options:Ae}}function Te(Q){return Q instanceof Element}oe.exports={addListener:function De(Q,Re,Le,Ve,Ae){var Se=le(Q,Re,Le,Ve,Ae);return this.listeners.push(Se),Te(Se.target)?Se.target.addEventListener(Se.event,Se.callback,Se.options):Se.selector?Se.target.addListener(Se.event,Se.selector,Se.callback,Se.options):Se.target.addListener(Se.event,Se.callback,Se.options),this},addListeners:function K(){var Q=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return Q.destroy()}),this},removeListener:function xe(Q,Re,Le,Ve,Ae){for(var Se=le(Q,Re,Le,Ve,Ae),L=this.listeners.length-1;L>=0;L--){var ee=this.listeners[L];if(!(Se.target!==ee.target||Se.event!==ee.event||null!=Se.selector&&Se.selector!==ee.selector||null!=Se.callback&&Se.callback!==ee.callback)){this.listeners.splice(L,1),Te(Se.target)?Se.target.removeEventListener(Se.event,Se.callback,Se.options):Se.selector?Se.target.removeListener(Se.event,Se.selector,Se.callback,Se.options):Se.target.removeListener(Se.event,Se.callback,Se.options);break}}return this},removeListeners:function q(){for(var Q=this.listeners.length-1;Q>=0;Q--){var Re=this.listeners[Q];this.removeListener(Re.target,Re.event,Re.selector,Re.callback,Re.options)}return this},emit:function _e(Q,Re){for(var Le=this.cy,Ve=arguments.length,Ae=Array(Ve>2?Ve-2:0),Se=2;Se<Ve;Se++)Ae[Se-2]=arguments[Se];return Le.emit({type:"eh"+Q,position:Re},Ae),this}}},function(oe,re,ie){"use strict";var V=ie(1),K=function(le){!le||le("core","edgehandles",V)};typeof cytoscape<"u"&&K(cytoscape),oe.exports=K},function(oe,re){oe.exports=ye},function(oe,re){oe.exports=j}]))},9050:(yt,it,ae)=>{var ye;!function(j){"use strict";var oe=function(re){!re||re("core","snapToGrid",function(ie){var V=this,K=ie,q=V.container(),le={stackOrder:-1,gridSpacing:40,strokeStyle:"#CCCCCC",lineWidth:1,lineDash:[5,8],zoomDash:!0,panGrid:!0,snapToGrid:!0,drawGrid:!0},Te={snapOn:function(){j(this).trigger("snaptogrid.snapon")},snapOff:function(){j(this).trigger("snaptogrid.snapoff")},gridOn:function(){j(this).trigger("snaptogrid.gridon")},gridOff:function(){j(this).trigger("snaptogrid.gridoff")},refresh:function(){j(this).trigger("snaptogrid.refresh")},option:function(De,xe){var _e=j(this),Q=_e.data("snapToGrid");if(null!=Q){var Re=Q.options;if(void 0===xe){if(typeof De!=typeof{})return Re[De];Re=j.extend(!0,{},defaults,De),Q.options=Re}else Re[De]=xe;return _e.data("snapToGrid",Q),_e.trigger("snaptogrid.refresh"),_e}},init:function(){var _e,De=j("<canvas></canvas>"),xe=j(this),Q=j.extend(!0,{},le,ie);xe.data("snapToGrid",Q);var Re,Le=function(){return Re||(Re=xe.data("snapToGrid"))},Ve=function(){De.attr("height",xe.height()).attr("width",xe.width()).css({position:"absolute",top:0,left:0,"z-index":Le().stackOrder}),setTimeout(function(){var Vt=De.offset(),on=xe.offset();De.attr("height",xe.height()).attr("width",xe.width()).css({top:-(Vt.top-on.top),left:-(Vt.left-on.left)}),Ae()},0)},Ae=function(){if(Se(),Le().drawGrid){var Vt=V.zoom(),on=xe.width(),Ct=xe.height(),rn=Le().gridSpacing*Vt,Qt=V.pan(),Ht=Qt.x%rn,Qn=Qt.y%rn;if(_e.strokeStyle=Le().strokeStyle,_e.lineWidth=Le().lineWidth,Le().zoomDash){for(var en=Le().lineDash.slice(),Sn=0;Sn<en.length;Sn++)en[Sn]=Le().lineDash[Sn]*Vt;_e.setLineDash(en)}else _e.setLineDash(Le().lineDash);for(_e.lineDashOffset=Le().panGrid?-Qt.y:0,Sn=Ht;Sn<on;Sn+=rn)_e.beginPath(),_e.moveTo(Sn,0),_e.lineTo(Sn,Ct),_e.stroke();for(_e.lineDashOffset=Le().panGrid?-Qt.x:0,Sn=Qn;Sn<Ct;Sn+=rn)_e.beginPath(),_e.moveTo(0,Sn),_e.lineTo(on,Sn),_e.stroke()}},Se=function(){var Vt=xe.width(),on=xe.height();_e.clearRect(0,0,Vt,on)},L=function(Vt){var on=Vt.position(),Ct=Math.floor(on.x/Le().gridSpacing),rn=Math.floor(on.y/Le().gridSpacing);Vt.position({x:(Ct+.5)*Le().gridSpacing,y:(rn+.5)*Le().gridSpacing})},ee=function(){V.nodes().each(function(Vt){L(Vt)})},Ce=function(Vt){Le().snapToGrid&&L(Vt.target)},ze=function(Vt){Le().snapToGrid&&L(Vt.target)};xe.append(De),j(window).on("resize",Ve),xe.on("snaptogrid.snapon",function(){Le().snapToGrid=!0,ee()}),xe.on("snaptogrid.snapoff",function(){Le().snapToGrid=!1}),xe.on("snaptogrid.gridon",function(){Le().drawGrid=!0,Ae()}),xe.on("snaptogrid.gridoff",function(){Le().drawGrid=!1,Ae()}),xe.on("snaptogrid.refresh",Ve),_e=De[0].getContext("2d"),V.ready(function(){Ve(),Le().snapToGrid&&ee(),V.on("zoom",Ae),V.on("pan",Ae),V.on("free",Ce),V.on("add",ze)})}};return Te[K]?Te[K].apply(q,Array.prototype.slice.call(arguments,1)):"object"!=typeof K&&K?(console.error("No such function `"+K+"` for snapToGrid"),this):Te.init.apply(q,arguments)})};yt.exports&&(yt.exports=oe),void 0!==(ye=function(){return oe}.call(it,ae,it,yt))&&(yt.exports=ye),typeof cytoscape<"u"&&oe(cytoscape)}(typeof jQuery<"u"?jQuery:null)},6864:(yt,it,ae)=>{"use strict";var ye=ae(406),j=ae(5203),oe=ae(8817),re=ae(4793),ie=ae(4152);function V(g){return g&&"object"==typeof g&&"default"in g?g:{default:g}}var K=V(ye),q=V(j),le=V(oe),Te=V(re),De=V(ie);function xe(g){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}function _e(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}function Q(g,c){for(var p=0;p<c.length;p++){var b=c[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}function Re(g,c,p){return c&&Q(g.prototype,c),p&&Q(g,p),Object.defineProperty(g,"prototype",{writable:!1}),g}function Le(g,c,p){return c in g?Object.defineProperty(g,c,{value:p,enumerable:!0,configurable:!0,writable:!0}):g[c]=p,g}function Ve(g,c){return function Ae(g){if(Array.isArray(g))return g}(g)||function Se(g,c){var p=null==g?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(null!=p){var M,U,b=[],A=!0,E=!1;try{for(p=p.call(g);!(A=(M=p.next()).done)&&(b.push(M.value),!c||b.length!==c);A=!0);}catch(ne){E=!0,U=ne}finally{try{!A&&null!=p.return&&p.return()}finally{if(E)throw U}}return b}}(g,c)||function L(g,c){if(g){if("string"==typeof g)return ee(g,c);var p=Object.prototype.toString.call(g).slice(8,-1);if("Object"===p&&g.constructor&&(p=g.constructor.name),"Map"===p||"Set"===p)return Array.from(g);if("Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return ee(g,c)}}(g,c)||function Ce(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(g,c){(null==c||c>g.length)&&(c=g.length);for(var p=0,b=new Array(c);p<c;p++)b[p]=g[p];return b}var ze=typeof window>"u"?null:window,dt=ze?ze.navigator:null,st=xe(""),bt=xe({}),ut=xe(function(){}),Vt=typeof HTMLElement>"u"?"undefined":xe(HTMLElement),on=function(c){return c&&c.instanceString&&rn(c.instanceString)?c.instanceString():null},Ct=function(c){return null!=c&&xe(c)==st},rn=function(c){return null!=c&&xe(c)===ut},Qt=function(c){return!xt(c)&&(Array.isArray?Array.isArray(c):null!=c&&c instanceof Array)},Ht=function(c){return null!=c&&xe(c)===bt&&!Qt(c)&&c.constructor===Object},en=function(c){return null!=c&&xe(c)===xe(1)&&!isNaN(c)},Pn=function(c){if("undefined"!==Vt)return null!=c&&c instanceof HTMLElement},xt=function(c){return Jt(c)||Gn(c)},Jt=function(c){return"collection"===on(c)&&c._private.single},Gn=function(c){return"collection"===on(c)&&!c._private.single},ri=function(c){return"core"===on(c)},ni=function(c){return"stylesheet"===on(c)},Oe=function(c){return null==c||!(""!==c&&!c.match(/^\s+$/))},li=function(c){return function(c){return null!=c&&xe(c)===bt}(c)&&rn(c.then)},Gt=function(c,p){p||(p=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var E=[],M=0;M<arguments.length;M++)E.push(arguments[M]);return E.join("$")});var b=function A(){var U,E=this,M=arguments,ne=p.apply(E,M),X=A.cache;return(U=X[ne])||(U=X[ne]=c.apply(E,M)),U};return b.cache={},b},Rt=Gt(function(g){return g.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()})}),_n=Gt(function(g){return g.replace(/(-\w)/g,function(c){return c[1].toUpperCase()})}),It=Gt(function(g,c){return g+c[0].toUpperCase()+c.substring(1)},function(g,c){return g+"$"+c}),rt=function(c){return Oe(c)?c:c.charAt(0).toUpperCase()+c.substring(1)},lt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Hr=function(c,p){return c<p?-1:c>p?1:0},nr=null!=Object.assign?Object.assign.bind(Object):function(g){for(var c=arguments,p=1;p<c.length;p++){var b=c[p];if(null!=b)for(var A=Object.keys(b),E=0;E<A.length;E++){var M=A[E];g[M]=b[M]}}return g},C={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},S=function(c){for(var p=c.map,b=c.keys,A=b.length,E=0;E<A;E++){var M=b[E];if(Ht(M))throw Error("Tried to set map with object key");E<b.length-1?(null==p[M]&&(p[M]={}),p=p[M]):p[M]=c.value}},k=function(c){for(var p=c.map,b=c.keys,A=b.length,E=0;E<A;E++){var M=b[E];if(Ht(M))throw Error("Tried to get map with object key");if(null==(p=p[M]))return p}return p},N=ze?ze.performance:null,z=N&&N.now?function(){return N.now()}:function(){return Date.now()},D=function(){if(ze){if(ze.requestAnimationFrame)return function(g){ze.requestAnimationFrame(g)};if(ze.mozRequestAnimationFrame)return function(g){ze.mozRequestAnimationFrame(g)};if(ze.webkitRequestAnimationFrame)return function(g){ze.webkitRequestAnimationFrame(g)};if(ze.msRequestAnimationFrame)return function(g){ze.msRequestAnimationFrame(g)}}return function(g){g&&setTimeout(function(){g(z())},1e3/60)}}(),H=function(c){return D(c)},Z=z,$=9261,R=65599,Y=5381,he=function(c){for(var A,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$,b=p;!(A=c.next()).done;)b=b*R+A.value|0;return b},me=function(c){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;return p*R+c|0},ve=function(c){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y;return(p<<5)+p+c|0},pe=function(c){return 2097152*c[0]+c[1]},de=function(c,p){return[me(c[0],p[0]),ve(c[1],p[1])]},ke=function(c,p){var b={value:0,done:!1},A=0,E=c.length;return he({next:function(){return A<E?b.value=c.charCodeAt(A++):b.done=!0,b}},p)},Xe=function(){return je(arguments)},je=function(c){for(var p,b=0;b<c.length;b++){var A=c[b];p=0===b?ke(A):ke(A,p)}return p},nt=!0,pt=null!=console.warn,gt=null!=console.trace,Wt=Number.MAX_SAFE_INTEGER||9007199254740991,Lt=function(){return!0},Bt=function(){return!1},qt=function(){return 0},Pe=function(){},We=function(c){throw new Error(c)},Ye=function(c){if(void 0===c)return nt;nt=!!c},we=function(c){!Ye()||(pt?console.warn(c):(console.log(c),gt&&console.trace()))},ct=function(c){return null==c?c:Qt(c)?c.slice():Ht(c)?function(c){return nr({},c)}(c):c},wt=function(c,p){for(p=c="";c++<36;p+=51*c&52?(15^c?8^Math.random()*(20^c?16:4):4).toString(16):"-");return p},nn={},On=function(){return nn},jn=function(c){var p=Object.keys(c);return function(b){for(var A={},E=0;E<p.length;E++){var M=p[E],U=b?.[M];A[M]=void 0===U?c[M]:U}return A}},ii=function(c,p,b){for(var A=c.length-1;A>=0&&(c[A]!==p||(c.splice(A,1),!b));A--);},Ci=function(c){c.splice(0,c.length)},Ei=function(c,p,b){return b&&(p=It(b,p)),c[p]},Ai=function(c,p,b,A){b&&(p=It(b,p)),c[p]=A},is=typeof Map<"u"?Map:function(){function g(){_e(this,g),this._obj={}}return Re(g,[{key:"set",value:function(p,b){return this._obj[p]=b,this}},{key:"delete",value:function(p){return this._obj[p]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(p){return void 0!==this._obj[p]}},{key:"get",value:function(p){return this._obj[p]}}]),g}(),ws=function(){function g(c){if(_e(this,g),this._obj=Object.create(null),this.size=0,null!=c){var p;p=null!=c.instanceString&&c.instanceString()===this.instanceString()?c.toArray():c;for(var b=0;b<p.length;b++)this.add(p[b])}}return Re(g,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(p){var b=this._obj;1!==b[p]&&(b[p]=1,this.size++)}},{key:"delete",value:function(p){var b=this._obj;1===b[p]&&(b[p]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(p){return 1===this._obj[p]}},{key:"toArray",value:function(){var p=this;return Object.keys(this._obj).filter(function(b){return p.has(b)})}},{key:"forEach",value:function(p,b){return this.toArray().forEach(p,b)}}]),g}(),wr="undefined"!==(typeof Set>"u"?"undefined":xe(Set))?Set:ws,rs=function(c,p){var b=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==c&&void 0!==p&&ri(c)){var A=p.group;if(null==A&&(A=p.data&&null!=p.data.source&&null!=p.data.target?"edges":"nodes"),"nodes"===A||"edges"===A){this.length=1,this[0]=this;var E=this._private={cy:c,single:!0,data:p.data||{},position:p.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:A,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!p.selected,selectable:void 0===p.selectable||!!p.selectable,locked:!!p.locked,grabbed:!1,grabbable:void 0===p.grabbable||!!p.grabbable,pannable:void 0===p.pannable?"edges"===A:!!p.pannable,active:!1,classes:new wr,animation:{current:[],queue:[]},rscratch:{},scratch:p.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==E.position.x&&(E.position.x=0),null==E.position.y&&(E.position.y=0),p.renderedPosition){var M=p.renderedPosition,U=c.pan(),ne=c.zoom();E.position={x:(M.x-U.x)/ne,y:(M.y-U.y)/ne}}var X=[];Qt(p.classes)?X=p.classes:Ct(p.classes)&&(X=p.classes.split(/\s+/));for(var fe=0,be=X.length;fe<be;fe++){var Ge=X[fe];!Ge||""===Ge||E.classes.add(Ge)}this.createEmitter();var $e=p.style||p.css;$e&&(we("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style($e)),(void 0===b||b)&&this.restore()}else We("An element must be of type `nodes` or `edges`; you specified `"+A+"`")}else We("An element must have a core reference and parameters set")},ss=function(c){return c={bfs:c.bfs||!c.dfs,dfs:c.dfs||!c.bfs},function(b,A,E){var M;Ht(b)&&!xt(b)&&(b=(M=b).roots||M.root,A=M.visit,E=M.directed),E=2!==arguments.length||rn(A)?E:A,A=rn(A)?A:function(){};for(var ot,U=this._private.cy,ne=b=Ct(b)?this.filter(b):b,X=[],fe=[],be={},Ge={},$e={},Ke=0,_t=this.byGroup(),Et=_t.nodes,$t=_t.edges,Ut=0;Ut<ne.length;Ut++){var un=ne[Ut],In=un.id();un.isNode()&&(X.unshift(un),c.bfs&&($e[In]=!0,fe.push(un)),Ge[In]=0)}for(var En=function(){var Nn=c.bfs?X.shift():X.pop(),xn=Nn.id();if(c.dfs){if($e[xn])return"continue";$e[xn]=!0,fe.push(Nn)}var er,gi=Ge[xn],$n=be[xn],ai=null!=$n?$n.source():null,wi=null!=$n?$n.target():null,Pi=null==$n?void 0:Nn.same(ai)?wi[0]:ai[0];if(!0===(er=A(Nn,$n,Pi,Ke++,gi)))return ot=Nn,"break";if(!1===er)return"break";for(var xi=Nn.connectedEdges().filter(function(pr){return(!E||pr.source().same(Nn))&&$t.has(pr)}),Ki=0;Ki<xi.length;Ki++){var hr=xi[Ki],Ar=hr.connectedNodes().filter(function(pr){return!pr.same(Nn)&&Et.has(pr)}),mr=Ar.id();0!==Ar.length&&!$e[mr]&&(X.push(Ar=Ar[0]),c.bfs&&($e[mr]=!0,fe.push(Ar)),be[mr]=hr,Ge[mr]=Ge[xn]+1)}};0!==X.length;){var hn=En();if("continue"!==hn&&"break"===hn)break}for(var Mn=U.collection(),mn=0;mn<fe.length;mn++){var Fn=fe[mn],Rn=be[Fn.id()];null!=Rn&&Mn.push(Rn),Mn.push(Fn)}return{path:U.collection(Mn),found:U.collection(ot)}}},Xr={breadthFirstSearch:ss({bfs:!0}),depthFirstSearch:ss({dfs:!0})};Xr.bfs=Xr.breadthFirstSearch,Xr.dfs=Xr.depthFirstSearch;var Kr=jn({root:null,weight:function(c){return 1},directed:!1}),La={dijkstra:function(c){if(!Ht(c)){var p=arguments;c={root:p[0],weight:p[1],directed:p[2]}}var b=Kr(c),A=b.root,E=b.weight,M=b.directed,U=this,ne=E,X=Ct(A)?this.filter(A)[0]:A[0],fe={},be={},Ge={},$e=this.byGroup(),Ke=$e.nodes,ot=$e.edges;ot.unmergeBy(function(gi){return gi.isLoop()});for(var _t=function($n){return fe[$n.id()]},Et=function($n,ai){fe[$n.id()]=ai,$t.updateItem($n)},$t=new q.default(function(gi,$n){return _t(gi)-_t($n)}),Ut=0;Ut<Ke.length;Ut++){var un=Ke[Ut];fe[un.id()]=un.same(X)?0:1/0,$t.push(un)}for(var In=function($n,ai){for(var er,wi=(M?$n.edgesTo(ai):$n.edgesWith(ai)).intersect(ot),Pi=1/0,xi=0;xi<wi.length;xi++){var Ki=wi[xi],hr=ne(Ki);(hr<Pi||!er)&&(Pi=hr,er=Ki)}return{edge:er,dist:Pi}};$t.size()>0;){var En=$t.pop(),hn=_t(En),Mn=En.id();if(Ge[Mn]=hn,hn!==1/0)for(var mn=En.neighborhood().intersect(Ke),Fn=0;Fn<mn.length;Fn++){var Rn=mn[Fn],Xt=Rn.id(),Nn=In(En,Rn),xn=hn+Nn.dist;xn<_t(Rn)&&(Et(Rn,xn),be[Xt]={node:En,edge:Nn.edge})}}return{distanceTo:function($n){var ai=Ct($n)?Ke.filter($n)[0]:$n[0];return Ge[ai.id()]},pathTo:function($n){var ai=Ct($n)?Ke.filter($n)[0]:$n[0],wi=[],Pi=ai,er=Pi.id();if(ai.length>0)for(wi.unshift(ai);be[er];){var xi=be[er];wi.unshift(xi.edge),wi.unshift(xi.node),er=(Pi=xi.node).id()}return U.spawn(wi)}}}},eo={kruskal:function(c){c=c||function(Ut){return 1};for(var p=this.byGroup(),b=p.nodes,A=p.edges,E=b.length,M=new Array(E),U=b,ne=function(un){for(var In=0;In<M.length;In++)if(M[In].has(un))return In},X=0;X<E;X++)M[X]=this.spawn(b[X]);for(var fe=A.sort(function(Ut,un){return c(Ut)-c(un)}),be=0;be<fe.length;be++){var Ge=fe[be],$e=Ge.source()[0],Ke=Ge.target()[0],ot=ne($e),_t=ne(Ke),Et=M[ot],$t=M[_t];ot!==_t&&(U.merge(Ge),Et.merge($t),M.splice(_t,1))}return U}},Qi=jn({root:null,goal:null,weight:function(c){return 1},heuristic:function(c){return 0},directed:!1}),Ea={aStar:function(c){var p=this.cy(),b=Qi(c),A=b.root,E=b.goal,M=b.heuristic,U=b.directed,ne=b.weight;A=p.collection(A)[0],E=p.collection(E)[0];var Ut,un,X=A.id(),fe=E.id(),be={},Ge={},$e={},Ke=new q.default(function(er,xi){return Ge[er.id()]-Ge[xi.id()]}),ot=new wr,_t={},Et={},$t=function(xi,Ki){Ke.push(xi),ot.add(Ki)};$t(A,X),be[X]=0,Ge[X]=M(A);for(var hn=0;Ke.size()>0;){if(un=(Ut=Ke.pop()).id(),ot.delete(un),hn++,un===fe){for(var Mn=[],mn=E,Fn=fe,Rn=Et[Fn];Mn.unshift(mn),null!=Rn&&Mn.unshift(Rn),null!=(mn=_t[Fn]);)Rn=Et[Fn=mn.id()];return{found:!0,distance:be[un],path:this.spawn(Mn),steps:hn}}$e[un]=!0;for(var Xt=Ut._private.edges,Nn=0;Nn<Xt.length;Nn++){var xn=Xt[Nn];if(this.hasElementWithId(xn.id())&&(!U||xn.data("source")===un)){var gi=xn.source(),$n=xn.target(),ai=gi.id()!==un?gi:$n,wi=ai.id();if(this.hasElementWithId(wi)&&!$e[wi]){var Pi=be[un]+ne(xn);if(!ot.has(wi)){be[wi]=Pi,Ge[wi]=Pi+M(ai),$t(ai,wi),_t[wi]=Ut,Et[wi]=xn;continue}Pi<be[wi]&&(be[wi]=Pi,Ge[wi]=Pi+M(ai),_t[wi]=Ut,Et[wi]=xn)}}}}return{found:!1,distance:void 0,path:void 0,steps:hn}}},As=jn({weight:function(c){return 1},directed:!1}),B={floydWarshall:function(c){for(var p=this.cy(),b=As(c),E=b.directed,M=b.weight,U=this.byGroup(),ne=U.nodes,X=U.edges,fe=ne.length,be=fe*fe,Ge=function(hr){return ne.indexOf(hr)},$e=function(hr){return ne[hr]},Ke=new Array(be),ot=0;ot<be;ot++){var _t=ot%fe;Ke[ot]=(ot-_t)/fe===_t?0:1/0}for(var $t=new Array(be),Ut=new Array(be),un=0;un<X.length;un++){var In=X[un],En=In.source()[0],hn=In.target()[0];if(En!==hn){var Mn=Ge(En),mn=Ge(hn),Fn=Mn*fe+mn,Rn=M(In);if(Ke[Fn]>Rn&&(Ke[Fn]=Rn,$t[Fn]=mn,Ut[Fn]=In),!E){var Xt=mn*fe+Mn;!E&&Ke[Xt]>Rn&&(Ke[Xt]=Rn,$t[Xt]=Mn,Ut[Xt]=In)}}}for(var Nn=0;Nn<fe;Nn++)for(var xn=0;xn<fe;xn++)for(var gi=xn*fe+Nn,$n=0;$n<fe;$n++){var ai=xn*fe+$n,wi=Nn*fe+$n;Ke[gi]+Ke[wi]<Ke[ai]&&(Ke[ai]=Ke[gi]+Ke[wi],$t[ai]=$t[gi])}var er=function(hr){return Ge(function(hr){return(Ct(hr)?p.filter(hr):hr)[0]}(hr))};return{distance:function(hr,Ar){var mr=er(hr),pr=er(Ar);return Ke[mr*fe+pr]},path:function(hr,Ar){var mr=er(hr),pr=er(Ar),Si=$e(mr);if(mr===pr)return Si.collection();if(null==$t[mr*fe+pr])return p.collection();var sr=p.collection();for(sr.merge(Si);mr!==pr;)sr.merge(Ut[mr*fe+(mr=$t[mr*fe+pr])]),sr.merge($e(mr));return sr}}}},Be=jn({weight:function(c){return 1},directed:!1,root:null}),Mt={bellmanFord:function(c){var p=this,b=Be(c),E=b.directed,M=b.root,U=b.weight,ne=this,X=this.cy(),fe=this.byGroup(),be=fe.edges,Ge=fe.nodes,$e=Ge.length,Ke=new is,ot=!1,_t=[];M=X.collection(M)[0],be.unmergeBy(function(Rr){return Rr.isLoop()});for(var Et=be.length,$t=function(Is){var Ts=Ke.get(Is.id());return Ts||(Ts={},Ke.set(Is.id(),Ts)),Ts},Ut=function(Is){return(Ct(Is)?X.$(Is):Is)[0]},En=0;En<$e;En++){var hn=Ge[En],Mn=$t(hn);Mn.dist=hn.same(M)?0:1/0,Mn.pred=null,Mn.edge=null}for(var mn=!1,Fn=function(Is,Ts,aa,Ya,oa,Yr){var Cn=Ya.dist+Yr;Cn<oa.dist&&!aa.same(Ya.edge)&&(oa.dist=Cn,oa.pred=Is,oa.edge=aa,mn=!0)},Rn=1;Rn<$e;Rn++){mn=!1;for(var Xt=0;Xt<Et;Xt++){var Nn=be[Xt],xn=Nn.source(),gi=Nn.target(),$n=U(Nn),ai=$t(xn),wi=$t(gi);Fn(xn,0,Nn,ai,wi,$n),E||Fn(gi,0,Nn,wi,ai,$n)}if(!mn)break}if(mn)for(var Pi=[],er=0;er<Et;er++){var xi=be[er],Ki=xi.source(),hr=xi.target(),Ar=U(xi),mr=$t(Ki).dist,pr=$t(hr).dist;if(mr+Ar<pr||!E&&pr+Ar<mr){if(ot||(we("Graph contains a negative weight cycle for Bellman-Ford"),ot=!0),!1===c.findNegativeWeightCycles)break;var Si=[];mr+Ar<pr&&Si.push(Ki),!E&&pr+Ar<mr&&Si.push(hr);for(var sr=Si.length,Sr=0;Sr<sr;Sr++){var ts=Si[Sr],ps=[ts];ps.push($t(ts).edge);for(var Xs=$t(ts).pred;-1===ps.indexOf(Xs);)ps.push(Xs),ps.push($t(Xs).edge),Xs=$t(Xs).pred;for(var sa=(ps=ps.slice(ps.indexOf(Xs)))[0].id(),Cs=0,ds=2;ds<ps.length;ds+=2)ps[ds].id()<sa&&(sa=ps[ds].id(),Cs=ds);(ps=ps.slice(Cs).concat(ps.slice(0,Cs))).push(ps[0]);var ia=ps.map(function(Rr){return Rr.id()}).join(",");-1===Pi.indexOf(ia)&&(_t.push(ne.spawn(ps)),Pi.push(ia))}}}return{distanceTo:function(Is){return $t(Ut(Is)).dist},pathTo:function(Is){for(var Ts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M,aa=Ut(Is),Ya=[],oa=aa;;){if(null==oa)return p.spawn();var Yr=$t(oa),Cn=Yr.edge,qi=Yr.pred;if(Ya.unshift(oa[0]),oa.same(Ts)&&Ya.length>0)break;null!=Cn&&Ya.unshift(Cn),oa=qi}return ne.spawn(Ya)},hasNegativeWeightCycle:ot,negativeWeightCycles:_t}}},sn=Math.sqrt(2),An=function(c,p,b){0===b.length&&We("Karger-Stein must be run on a connected (sub)graph");for(var A=b[c],U=p[A[1]],ne=p[A[2]],X=b,fe=X.length-1;fe>=0;fe--){var be=X[fe],Ge=be[1],$e=be[2];(p[Ge]===U&&p[$e]===ne||p[Ge]===ne&&p[$e]===U)&&X.splice(fe,1)}for(var Ke=0;Ke<X.length;Ke++){var ot=X[Ke];ot[1]===ne?(X[Ke]=ot.slice(),X[Ke][1]=U):ot[2]===ne&&(X[Ke]=ot.slice(),X[Ke][2]=U)}for(var _t=0;_t<p.length;_t++)p[_t]===ne&&(p[_t]=U);return X},qn=function(c,p,b,A){for(;b>A;){var E=Math.floor(Math.random()*p.length);p=An(E,c,p),b--}return p},Xi={kargerStein:function(){var c=this,p=this.byGroup(),b=p.nodes,A=p.edges;A.unmergeBy(function(wi){return wi.isLoop()});var E=b.length,M=A.length,U=Math.ceil(Math.pow(Math.log(E)/Math.LN2,2)),ne=Math.floor(E/sn);if(!(E<2)){for(var X=[],fe=0;fe<M;fe++){var be=A[fe];X.push([fe,b.indexOf(be.source()),b.indexOf(be.target())])}for(var Ge=1/0,$e=[],Ke=new Array(E),ot=new Array(E),_t=new Array(E),Et=function(Pi,er){for(var xi=0;xi<E;xi++)er[xi]=Pi[xi]},$t=0;$t<=U;$t++){for(var Ut=0;Ut<E;Ut++)ot[Ut]=Ut;var un=qn(ot,X.slice(),E,ne),In=un.slice();Et(ot,_t);var En=qn(ot,un,ne,2),hn=qn(_t,In,ne,2);En.length<=hn.length&&En.length<Ge?(Ge=En.length,$e=En,Et(ot,Ke)):hn.length<=En.length&&hn.length<Ge&&(Ge=hn.length,$e=hn,Et(_t,Ke))}for(var Mn=this.spawn($e.map(function(wi){return A[wi[0]]})),mn=this.spawn(),Fn=this.spawn(),Rn=Ke[0],Xt=0;Xt<Ke.length;Xt++){var xn=b[Xt];Ke[Xt]===Rn?mn.merge(xn):Fn.merge(xn)}var gi=function(Pi){var er=c.spawn();return Pi.forEach(function(xi){er.merge(xi),xi.connectedEdges().forEach(function(Ki){c.contains(Ki)&&!Mn.contains(Ki)&&er.merge(Ki)})}),er},$n=[gi(mn),gi(Fn)];return{cut:Mn,components:$n,partition1:mn,partition2:Fn}}We("At least 2 nodes are required for Karger-Stein algorithm")}},Pr=function(c,p,b){return{x:c.x*p+b.x,y:c.y*p+b.y}},Ys=function(c,p,b){return{x:(c.x-b.x)/p,y:(c.y-b.y)/p}},ba=function(c){return{x:c[0],y:c[1]}},Ql=function(c,p){return Math.atan2(p,c)-Math.PI/2},Pu=Math.log2||function(g){return Math.log(g)/Math.log(2)},xl=function(c){return c>0?1:c<0?-1:0},$a=function(c,p){return Math.sqrt(th(c,p))},th=function(c,p){var b=p.x-c.x,A=p.y-c.y;return b*b+A*A},lm=function(c){for(var p=c.length,b=0,A=0;A<p;A++)b+=c[A];for(var E=0;E<p;E++)c[E]=c[E]/b;return c},Cu=function(c,p,b,A){return(1-A)*(1-A)*c+2*(1-A)*A*p+A*A*b},Zr=function(c,p,b,A){return{x:Cu(c.x,p.x,b.x,A),y:Cu(c.y,p.y,b.y,A)}},Ps=function(c,p,b){return Math.max(c,Math.min(b,p))},Gu=function(c){if(null==c)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=c.x1&&null!=c.y1){if(null!=c.x2&&null!=c.y2&&c.x2>=c.x1&&c.y2>=c.y1)return{x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,w:c.x2-c.x1,h:c.y2-c.y1};if(null!=c.w&&null!=c.h&&c.w>=0&&c.h>=0)return{x1:c.x1,y1:c.y1,x2:c.x1+c.w,y2:c.y1+c.h,w:c.w,h:c.h}}},Al=function(c,p){c.x1=Math.min(c.x1,p.x1),c.x2=Math.max(c.x2,p.x2),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,p.y1),c.y2=Math.max(c.y2,p.y2),c.h=c.y2-c.y1},ul=function(c,p,b){c.x1=Math.min(c.x1,p),c.x2=Math.max(c.x2,p),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,b),c.y2=Math.max(c.y2,b),c.h=c.y2-c.y1},Mf=function(c){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c.x1-=p,c.x2+=p,c.y1-=p,c.y2+=p,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},lp=function(c){var b,A,E,M,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===p.length)b=A=E=M=p[0];else if(2===p.length)b=E=p[0],M=A=p[1];else if(4===p.length){var U=Ve(p,4);b=U[0],A=U[1],E=U[2],M=U[3]}return c.x1-=M,c.x2+=A,c.y1-=b,c.y2+=E,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},vg=function(c,p){c.x1=p.x1,c.y1=p.y1,c.x2=p.x2,c.y2=p.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1},_g=function(c,p){return!(c.x1>p.x2||p.x1>c.x2||c.x2<p.x1||p.x2<c.x1||c.y2<p.y1||p.y2<c.y1||c.y1>p.y2||p.y1>c.y2)},ua=function(c,p,b){return c.x1<=p&&p<=c.x2&&c.y1<=b&&b<=c.y2},cm=function(c,p){return ua(c,p.x,p.y)},yg=function(c,p){return ua(c,p.x1,p.y1)&&ua(c,p.x2,p.y2)},Wu=function(c,p,b,A,E,M,U){var be,ne=Zd(E,M),X=E/2,fe=M/2,$e=A-fe-U;if((be=Ul(c,p,b,A,b-X+ne-U,$e,b+X-ne+U,$e,!1)).length>0)return be;var _t=b+X+U;if((be=Ul(c,p,b,A,_t,A-fe+ne-U,_t,A+fe-ne+U,!1)).length>0)return be;var In=A+fe+U;if((be=Ul(c,p,b,A,b-X+ne-U,In,b+X-ne+U,In,!1)).length>0)return be;var Xt,Mn=b-X-U;if((be=Ul(c,p,b,A,Mn,A-fe+ne-U,Mn,A+fe-ne+U,!1)).length>0)return be;var Nn=b-X+ne,xn=A-fe+ne;if((Xt=Kd(c,p,b,A,Nn,xn,ne+U)).length>0&&Xt[0]<=Nn&&Xt[1]<=xn)return[Xt[0],Xt[1]];var gi=b+X-ne,$n=A-fe+ne;if((Xt=Kd(c,p,b,A,gi,$n,ne+U)).length>0&&Xt[0]>=gi&&Xt[1]<=$n)return[Xt[0],Xt[1]];var ai=b+X-ne,wi=A+fe-ne;if((Xt=Kd(c,p,b,A,ai,wi,ne+U)).length>0&&Xt[0]>=ai&&Xt[1]>=wi)return[Xt[0],Xt[1]];var Pi=b-X+ne,er=A+fe-ne;return(Xt=Kd(c,p,b,A,Pi,er,ne+U)).length>0&&Xt[0]<=Pi&&Xt[1]>=er?[Xt[0],Xt[1]]:[]},Lu=function(c,p,b,A,E,M,U){var ne=U,X=Math.min(b,E),fe=Math.max(b,E),be=Math.min(A,M),Ge=Math.max(A,M);return X-ne<=c&&c<=fe+ne&&be-ne<=p&&p<=Ge+ne},qv=function(c,p,b,A,E,M,U,ne,X){var fe_x1=Math.min(b,U,E)-X,fe_x2=Math.max(b,U,E)+X,fe_y1=Math.min(A,ne,M)-X,fe_y2=Math.max(A,ne,M)+X;return!(c<fe_x1||c>fe_x2||p<fe_y1||p>fe_y2)},Jm=function(c,p,b,A,E,M,U,ne){var $e=[];!function(c,p,b,A,E){var U,ne,X,fe,be,Ge,$e,Ke;0===c&&(c=1e-5),X=-27*(A/=c)+(p/=c)*(9*(b/=c)-p*p*2),U=(ne=(3*b-p*p)/9)*ne*ne+(X/=54)*X,E[1]=0,$e=p/3,U>0?(be=(be=X+Math.sqrt(U))<0?-Math.pow(-be,1/3):Math.pow(be,1/3),Ge=(Ge=X-Math.sqrt(U))<0?-Math.pow(-Ge,1/3):Math.pow(Ge,1/3),E[0]=-$e+be+Ge,E[4]=E[2]=-($e+=(be+Ge)/2),$e=Math.sqrt(3)*(-Ge+be)/2,E[3]=$e,E[5]=-$e):(E[5]=E[3]=0,0===U?(Ke=X<0?-Math.pow(-X,1/3):Math.pow(X,1/3),E[0]=2*Ke-$e,E[4]=E[2]=-(Ke+$e)):(fe=(ne=-ne)*ne*ne,fe=Math.acos(X/Math.sqrt(fe)),Ke=2*Math.sqrt(ne),E[0]=-$e+Ke*Math.cos(fe/3),E[2]=-$e+Ke*Math.cos((fe+2*Math.PI)/3),E[4]=-$e+Ke*Math.cos((fe+4*Math.PI)/3)))}(1*b*b-4*b*E+2*b*U+4*E*E-4*E*U+U*U+A*A-4*A*M+2*A*ne+4*M*M-4*M*ne+ne*ne,9*b*E-3*b*b-3*b*U-6*E*E+3*E*U+9*A*M-3*A*A-3*A*ne-6*M*M+3*M*ne,3*b*b-6*b*E+b*U-b*c+2*E*E+2*E*c-U*c+3*A*A-6*A*M+A*ne-A*p+2*M*M+2*M*p-ne*p,1*b*E-b*b+b*c-E*c+A*M-A*A+A*p-M*p,$e);for(var ot=[],_t=0;_t<6;_t+=2)Math.abs($e[_t+1])<1e-7&&$e[_t]>=0&&$e[_t]<=1&&ot.push($e[_t]);ot.push(1),ot.push(0);for(var $t,Ut,un,Et=-1,In=0;In<ot.length;In++)$t=Math.pow(1-ot[In],2)*b+2*(1-ot[In])*ot[In]*E+ot[In]*ot[In]*U,Ut=Math.pow(1-ot[In],2)*A+2*(1-ot[In])*ot[In]*M+ot[In]*ot[In]*ne,un=Math.pow($t-c,2)+Math.pow(Ut-p,2),Et>=0?un<Et&&(Et=un):Et=un;return Et},Bh=function(c,p,b,A,E,M){var U=[c-b,p-A],ne=[E-b,M-A],X=ne[0]*ne[0]+ne[1]*ne[1],fe=U[0]*U[0]+U[1]*U[1],be=U[0]*ne[0]+U[1]*ne[1],Ge=be*be/X;return be<0?fe:Ge>X?(c-E)*(c-E)+(p-M)*(p-M):fe-Ge},fl=function(c,p,b){for(var A,E,M,U,X=0,fe=0;fe<b.length/2;fe++)if(E=b[2*fe+1],fe+1<b.length/2?(M=b[2*(fe+1)],U=b[2*(fe+1)+1]):(M=b[2*(fe+1-b.length/2)],U=b[2*(fe+1-b.length/2)+1]),(A=b[2*fe])!=c||M!=c){if(!(A>=c&&c>=M||A<=c&&c<=M))continue;(c-A)/(M-A)*(U-E)+E>p&&X++}return X%2!=0},ho=function(c,p,b,A,E,M,U,ne,X){var be,ot,fe=new Array(b.length);null!=ne[0]?(be=Math.atan(ne[1]/ne[0]),ne[0]<0?be+=Math.PI/2:be=-be-Math.PI/2):be=ne;for(var Ge=Math.cos(-be),$e=Math.sin(-be),Ke=0;Ke<fe.length/2;Ke++)fe[2*Ke]=M/2*(b[2*Ke]*Ge-b[2*Ke+1]*$e),fe[2*Ke+1]=U/2*(b[2*Ke+1]*Ge+b[2*Ke]*$e),fe[2*Ke]+=A,fe[2*Ke+1]+=E;if(X>0){var _t=gh(fe,-X);ot=tv(_t)}else ot=fe;return fl(c,p,ot)},tv=function(c){for(var U,ne,X,fe,p=new Array(c.length/2),be=0;be<c.length/4;be++){be<c.length/4-1?(U=c[4*(be+1)],ne=c[4*(be+1)+1],X=c[4*(be+1)+2],fe=c[4*(be+1)+3]):(U=c[0],ne=c[1],X=c[2],fe=c[3]);var Ge=Ul(c[4*be],c[4*be+1],c[4*be+2],c[4*be+3],U,ne,X,fe,!0);p[2*be]=Ge[0],p[2*be+1]=Ge[1]}return p},gh=function(c,p){for(var A,E,M,U,b=new Array(2*c.length),ne=0;ne<c.length/2;ne++){ne<c.length/2-1?(M=c[2*(ne+1)],U=c[2*(ne+1)+1]):(M=c[0],U=c[1]);var X=U-(E=c[2*ne+1]),fe=-(M-(A=c[2*ne])),be=Math.sqrt(X*X+fe*fe),Ge=X/be,$e=fe/be;b[4*ne]=A+Ge*p,b[4*ne+1]=E+$e*p,b[4*ne+2]=M+Ge*p,b[4*ne+3]=U+$e*p}return b},pl=function(c,p,b,A,E,M,U){return c-=E,p-=M,(c/=b/2+U)*c+(p/=A/2+U)*p<=1},Kd=function(c,p,b,A,E,M,U){var ne=[b-c,A-p],X=[c-E,p-M],fe=ne[0]*ne[0]+ne[1]*ne[1],be=2*(X[0]*ne[0]+X[1]*ne[1]),$e=be*be-4*fe*(X[0]*X[0]+X[1]*X[1]-U*U);if($e<0)return[];var Ke=(-be+Math.sqrt($e))/(2*fe),ot=(-be-Math.sqrt($e))/(2*fe),_t=Math.min(Ke,ot),Et=Math.max(Ke,ot),$t=[];if(_t>=0&&_t<=1&&$t.push(_t),Et>=0&&Et<=1&&$t.push(Et),0===$t.length)return[];var Ut=$t[0]*ne[0]+c,un=$t[0]*ne[1]+p;return $t.length>1?$t[0]==$t[1]?[Ut,un]:[Ut,un,$t[1]*ne[0]+c,$t[1]*ne[1]+p]:[Ut,un]},tl=function(c,p,b){return p<=c&&c<=b||b<=c&&c<=p?c:c<=p&&p<=b||b<=p&&p<=c?p:b},Ul=function(c,p,b,A,E,M,U,ne,X){var fe=c-E,be=b-c,Ge=U-E,$e=p-M,Ke=A-p,ot=ne-M,_t=Ge*$e-ot*fe,Et=be*$e-Ke*fe,$t=ot*be-Ge*Ke;if(0!==$t){var Ut=_t/$t,un=Et/$t;return-.001<=Ut&&Ut<=1.001&&-.001<=un&&un<=1.001||X?[c+Ut*be,p+Ut*Ke]:[]}return 0===_t||0===Et?tl(c,b,U)===U?[U,ne]:tl(c,b,E)===E?[E,M]:tl(E,U,b)===b?[b,A]:[]:[]},No=function(c,p,b,A,E,M,U,ne){var fe,$e,X=[],be=new Array(b.length),Ge=!0;if(null==M&&(Ge=!1),Ge){for(var Ke=0;Ke<be.length/2;Ke++)be[2*Ke]=b[2*Ke]*M+A,be[2*Ke+1]=b[2*Ke+1]*U+E;if(ne>0){var ot=gh(be,-ne);$e=tv(ot)}else $e=be}else $e=b;for(var $t,Ut,un=0;un<$e.length/2;un++)un<$e.length/2-1?($t=$e[2*(un+1)],Ut=$e[2*(un+1)+1]):($t=$e[0],Ut=$e[1]),0!==(fe=Ul(c,p,A,E,$e[2*un],$e[2*un+1],$t,Ut)).length&&X.push(fe[0],fe[1]);return X},Sd=function(c,p,b){var A=[c[0]-p[0],c[1]-p[1]],E=Math.sqrt(A[0]*A[0]+A[1]*A[1]),M=(E-b)/E;return M<0&&(M=1e-5),[p[0]+M*A[0],p[1]+M*A[1]]},hs=function(c,p){var b=zh(c,p);return Il(b)},Il=function(c){for(var p,b,A=c.length/2,E=1/0,M=1/0,U=-1/0,ne=-1/0,X=0;X<A;X++)p=c[2*X],b=c[2*X+1],E=Math.min(E,p),U=Math.max(U,p),M=Math.min(M,b),ne=Math.max(ne,b);for(var fe=2/(U-E),be=2/(ne-M),Ge=0;Ge<A;Ge++)p=c[2*Ge]=c[2*Ge]*fe,b=c[2*Ge+1]=c[2*Ge+1]*be,E=Math.min(E,p),U=Math.max(U,p),M=Math.min(M,b),ne=Math.max(ne,b);if(M<-1)for(var $e=0;$e<A;$e++)b=c[2*$e+1]=c[2*$e+1]+(-1-M);return c},zh=function(c,p){var b=1/c*2*Math.PI,A=c%2==0?Math.PI/2+b/2:Math.PI/2;A+=p;for(var M,E=new Array(2*c),U=0;U<c;U++)M=U*b+A,E[2*U]=Math.cos(M),E[2*U+1]=Math.sin(-M);return E},Zd=function(c,p){return Math.min(c/4,p/4,8)},ks=function(c,p){return Math.min(c/10,p/10,8)},Qs=function(c,p){return{heightOffset:Math.min(15,.05*p),widthOffset:Math.min(100,.25*c),ctrlPtOffsetPct:.05}},kc=jn({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(c){return 1}}),$o={pageRank:function(c){for(var p=kc(c),b=p.dampingFactor,A=p.precision,E=p.iterations,M=p.weight,U=this._private.cy,ne=this.byGroup(),X=ne.nodes,fe=ne.edges,be=X.length,$e=fe.length,Ke=new Array(be*be),ot=new Array(be),_t=(1-b)/be,Et=0;Et<be;Et++){for(var $t=0;$t<be;$t++)Ke[Et*be+$t]=0;ot[Et]=0}for(var un=0;un<$e;un++){var In=fe[un],En=In.data("source"),hn=In.data("target");if(En!==hn){var Mn=X.indexOfId(En),mn=X.indexOfId(hn),Fn=M(In);Ke[mn*be+Mn]+=Fn,ot[Mn]+=Fn}}for(var Xt=1/be+_t,Nn=0;Nn<be;Nn++)if(0===ot[Nn])for(var xn=0;xn<be;xn++)Ke[xn*be+Nn]=Xt;else for(var $n=0;$n<be;$n++){var ai=$n*be+Nn;Ke[ai]=Ke[ai]/ot[Nn]+_t}for(var er,wi=new Array(be),Pi=new Array(be),xi=0;xi<be;xi++)wi[xi]=1;for(var Ki=0;Ki<E;Ki++){for(var hr=0;hr<be;hr++)Pi[hr]=0;for(var Ar=0;Ar<be;Ar++)for(var mr=0;mr<be;mr++)Pi[Ar]+=Ke[Ar*be+mr]*wi[mr];lm(Pi),er=wi,wi=Pi,Pi=er;for(var Si=0,sr=0;sr<be;sr++){var Sr=er[sr]-wi[sr];Si+=Sr*Sr}if(Si<A)break}return{rank:function(Xs){return Xs=U.collection(Xs)[0],wi[X.indexOf(Xs)]}}}},Sl=jn({root:null,weight:function(c){return 1},directed:!1,alpha:0}),qa={degreeCentralityNormalized:function(c){c=Sl(c);var p=this.cy(),b=this.nodes(),A=b.length;if(c.directed){for(var fe={},be={},Ge=0,$e=0,Ke=0;Ke<A;Ke++){var ot=b[Ke],_t=ot.id();c.root=ot;var Et=this.degreeCentrality(c);Ge<Et.indegree&&(Ge=Et.indegree),$e<Et.outdegree&&($e=Et.outdegree),fe[_t]=Et.indegree,be[_t]=Et.outdegree}return{indegree:function(Ut){return 0==Ge?0:(Ct(Ut)&&(Ut=p.filter(Ut)),fe[Ut.id()]/Ge)},outdegree:function(Ut){return 0===$e?0:(Ct(Ut)&&(Ut=p.filter(Ut)),be[Ut.id()]/$e)}}}for(var E={},M=0,U=0;U<A;U++){var ne=b[U];c.root=ne;var X=this.degreeCentrality(c);M<X.degree&&(M=X.degree),E[ne.id()]=X.degree}return{degree:function(Ut){return 0===M?0:(Ct(Ut)&&(Ut=p.filter(Ut)),E[Ut.id()]/M)}}},degreeCentrality:function(c){c=Sl(c);var p=this.cy(),b=this,E=c.root,M=c.weight,U=c.directed,ne=c.alpha;if(E=p.collection(E)[0],U){for(var $e=E.connectedEdges(),Ke=$e.filter(function(En){return En.target().same(E)&&b.has(En)}),ot=$e.filter(function(En){return En.source().same(E)&&b.has(En)}),_t=Ke.length,Et=ot.length,$t=0,Ut=0,un=0;un<Ke.length;un++)$t+=M(Ke[un]);for(var In=0;In<ot.length;In++)Ut+=M(ot[In]);return{indegree:Math.pow(_t,1-ne)*Math.pow($t,ne),outdegree:Math.pow(Et,1-ne)*Math.pow(Ut,ne)}}for(var X=E.connectedEdges().intersection(b),fe=X.length,be=0,Ge=0;Ge<X.length;Ge++)be+=M(X[Ge]);return{degree:Math.pow(fe,1-ne)*Math.pow(be,ne)}}};qa.dc=qa.degreeCentrality,qa.dcn=qa.degreeCentralityNormalised=qa.degreeCentralityNormalized;var _c=jn({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Jl={closenessCentralityNormalized:function(c){for(var p=_c(c),b=p.harmonic,A=p.weight,E=p.directed,M=this.cy(),U={},ne=0,X=this.nodes(),fe=this.floydWarshall({weight:A,directed:E}),be=0;be<X.length;be++){for(var Ge=0,$e=X[be],Ke=0;Ke<X.length;Ke++)if(be!==Ke){var ot=fe.distance($e,X[Ke]);Ge+=b?1/ot:ot}b||(Ge=1/Ge),ne<Ge&&(ne=Ge),U[$e.id()]=Ge}return{closeness:function(Et){return 0==ne?0:(Et=Ct(Et)?M.filter(Et)[0].id():Et.id(),U[Et]/ne)}}},closenessCentrality:function(c){var p=_c(c),b=p.root,A=p.weight,E=p.directed,M=p.harmonic;b=this.filter(b)[0];for(var U=this.dijkstra({root:b,weight:A,directed:E}),ne=0,X=this.nodes(),fe=0;fe<X.length;fe++){var be=X[fe];if(!be.same(b)){var Ge=U.distanceTo(be);ne+=M?1/Ge:Ge}}return M?ne:1/ne}};Jl.cc=Jl.closenessCentrality,Jl.ccn=Jl.closenessCentralityNormalised=Jl.closenessCentralityNormalized;var Ss=jn({weight:null,directed:!1}),Ta={betweennessCentrality:function(c){for(var p=Ss(c),b=p.directed,A=p.weight,E=null!=A,M=this.cy(),U=this.nodes(),ne={},X={},fe=0,be={set:function(Ut,un){X[Ut]=un,un>fe&&(fe=un)},get:function(Ut){return X[Ut]}},Ge=0;Ge<U.length;Ge++){var $e=U[Ge],Ke=$e.id();ne[Ke]=b?$e.outgoers().nodes():$e.openNeighborhood().nodes(),be.set(Ke,0)}for(var ot=function(Ut){for(var un=U[Ut].id(),In=[],En={},hn={},Mn={},mn=new q.default(function(mr,pr){return Mn[mr]-Mn[pr]}),Fn=0;Fn<U.length;Fn++){var Rn=U[Fn].id();En[Rn]=[],hn[Rn]=0,Mn[Rn]=1/0}for(hn[un]=1,Mn[un]=0,mn.push(un);!mn.empty();){var Xt=mn.pop();if(In.push(Xt),E)for(var Nn=0;Nn<ne[Xt].length;Nn++){var $n,xn=ne[Xt][Nn],gi=M.getElementById(Xt);$n=gi.edgesTo(xn).length>0?gi.edgesTo(xn)[0]:xn.edgesTo(gi)[0];var ai=A($n);xn=xn.id(),Mn[xn]>Mn[Xt]+ai&&(Mn[xn]=Mn[Xt]+ai,mn.nodes.indexOf(xn)<0?mn.push(xn):mn.updateItem(xn),hn[xn]=0,En[xn]=[]),Mn[xn]==Mn[Xt]+ai&&(hn[xn]=hn[xn]+hn[Xt],En[xn].push(Xt))}else for(var wi=0;wi<ne[Xt].length;wi++){var Pi=ne[Xt][wi].id();Mn[Pi]==1/0&&(mn.push(Pi),Mn[Pi]=Mn[Xt]+1),Mn[Pi]==Mn[Xt]+1&&(hn[Pi]=hn[Pi]+hn[Xt],En[Pi].push(Xt))}}for(var er={},xi=0;xi<U.length;xi++)er[U[xi].id()]=0;for(;In.length>0;){for(var Ki=In.pop(),hr=0;hr<En[Ki].length;hr++){var Ar=En[Ki][hr];er[Ar]=er[Ar]+hn[Ar]/hn[Ki]*(1+er[Ki])}Ki!=U[Ut].id()&&be.set(Ki,be.get(Ki)+er[Ki])}},_t=0;_t<U.length;_t++)ot(_t);var Et={betweenness:function(Ut){var un=M.collection(Ut).id();return be.get(un)},betweennessNormalized:function(Ut){if(0==fe)return 0;var un=M.collection(Ut).id();return be.get(un)/fe}};return Et.betweennessNormalised=Et.betweennessNormalized,Et}};Ta.bc=Ta.betweennessCentrality;var gl=jn({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(g){return 1}]}),vh=function(c,p){for(var b=0,A=0;A<p.length;A++)b+=p[A](c);return b},Vh=function(c,p){for(var b,A=0;A<p;A++){b=0;for(var E=0;E<p;E++)b+=c[E*p+A];for(var M=0;M<p;M++)c[M*p+A]=c[M*p+A]/b}},ha=function(c,p,b){for(var A=new Array(b*b),E=0;E<b;E++){for(var M=0;M<b;M++)A[E*b+M]=0;for(var U=0;U<b;U++)for(var ne=0;ne<b;ne++)A[E*b+ne]+=c[E*b+U]*p[U*b+ne]}return A},Qd=function(c,p,b){for(var A=c.slice(0),E=1;E<b;E++)c=ha(c,A,p);return c},wu=function(c,p,b){for(var A=new Array(p*p),E=0;E<p*p;E++)A[E]=Math.pow(c[E],b);return Vh(A,p),A},Ua=function(c,p,b,A){for(var E=0;E<b;E++)if(Math.round(c[E]*Math.pow(10,A))/Math.pow(10,A)!=Math.round(p[E]*Math.pow(10,A))/Math.pow(10,A))return!1;return!0},Rc=function(c,p){for(var b=0;b<c.length;b++)if(!p[b]||c[b].id()!==p[b].id())return!1;return!0},ud=function(c){for(var p=this.nodes(),b=this.edges(),A=this.cy(),E=function(c){return gl(c)}(c),M={},U=0;U<p.length;U++)M[p[U].id()]=U;for(var be,ne=p.length,X=ne*ne,fe=new Array(X),Ge=0;Ge<X;Ge++)fe[Ge]=0;for(var $e=0;$e<b.length;$e++){var Ke=b[$e],ot=M[Ke.source().id()],_t=M[Ke.target().id()],Et=vh(Ke,E.attributes);fe[ot*ne+_t]+=Et,fe[_t*ne+ot]+=Et}(function(c,p,b){for(var A=0;A<p;A++)c[A*p+A]=b})(fe,ne,E.multFactor),Vh(fe,ne);for(var $t=!0,Ut=0;$t&&Ut<E.maxIterations;)$t=!1,be=Qd(fe,ne,E.expandFactor),fe=wu(be,ne,E.inflateFactor),Ua(fe,be,X,4)||($t=!0),Ut++;var un=function(c,p,b,A){for(var E=[],M=0;M<p;M++){for(var U=[],ne=0;ne<p;ne++)Math.round(1e3*c[M*p+ne])/1e3>0&&U.push(b[ne]);0!==U.length&&E.push(A.collection(U))}return E}(fe,ne,p,A);return un=function(c){for(var p=0;p<c.length;p++)for(var b=0;b<c.length;b++)p!=b&&Rc(c[p],c[b])&&c.splice(b,1);return c}(un),un},oo={markovClustering:ud,mcl:ud},Jd=function(c){return c},ih=function(c,p){return Math.abs(p-c)},Bo=function(c,p,b){return c+ih(p,b)},pu=function(c,p,b){return c+Math.pow(b-p,2)},kp=function(c){return Math.sqrt(c)},ml=function(c,p,b){return Math.max(c,ih(p,b))},Ed=function(c,p,b,A,E){for(var M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Jd,U=A,fe=0;fe<c;fe++)U=E(U,p(fe),b(fe));return M(U)},Df={euclidean:function(c,p,b){return c>=2?Ed(c,p,b,0,pu,kp):Ed(c,p,b,0,Bo)},squaredEuclidean:function(c,p,b){return Ed(c,p,b,0,pu)},manhattan:function(c,p,b){return Ed(c,p,b,0,Bo)},max:function(c,p,b){return Ed(c,p,b,-1/0,ml)}};function Ol(g,c,p,b,A,E){var M;return M=rn(g)?g:Df[g]||Df.euclidean,0===c&&rn(g)?M(A,E):M(c,p,b,A,E)}Df["squared-euclidean"]=Df.squaredEuclidean,Df.squaredeuclidean=Df.squaredEuclidean;var cd=jn({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Uh=function(c){return cd(c)},Td=function(c,p,b,A,E){var U="kMedoids"!==E?function(be){return b[be]}:function(be){return A[be](b)};return Ol(c,A.length,U,function(Ge){return A[Ge](p)},b,p)},hd=function(c,p,b){for(var A=b.length,E=new Array(A),M=new Array(A),U=new Array(p),ne=null,X=0;X<A;X++)E[X]=c.min(b[X]).value,M[X]=c.max(b[X]).value;for(var fe=0;fe<p;fe++){ne=[];for(var be=0;be<A;be++)ne[be]=Math.random()*(M[be]-E[be])+E[be];U[fe]=ne}return U},Hl=function(c,p,b,A,E){for(var M=1/0,U=0,ne=0;ne<p.length;ne++){var X=Td(b,c,p[ne],A,E);X<M&&(M=X,U=ne)}return U},cl=function(c,p,b){for(var A=[],E=null,M=0;M<p.length;M++)b[(E=p[M]).id()]===c&&A.push(E);return A},$u=function(c,p,b){return Math.abs(p-c)<=b},Hh=function(c,p,b){for(var A=0;A<c.length;A++)for(var E=0;E<c[A].length;E++)if(Math.abs(c[A][E]-p[A][E])>b)return!1;return!0},hm=function(c,p,b){for(var A=0;A<b;A++)if(c===p[A])return!0;return!1},Pf=function(c,p){var b=new Array(p);if(c.length<50)for(var A=0;A<p;A++){for(var E=c[Math.floor(Math.random()*c.length)];hm(E,b,A);)E=c[Math.floor(Math.random()*c.length)];b[A]=E}else for(var M=0;M<p;M++)b[M]=c[Math.floor(Math.random()*c.length)];return b},Lf=function(c,p,b){for(var A=0,E=0;E<p.length;E++)A+=Td("manhattan",p[E],c,b,"kMedoids");return A},vi=function(c,p,b,A,E){for(var M,U,ne=0;ne<p.length;ne++)for(var X=0;X<c.length;X++)A[ne][X]=Math.pow(b[ne][X],E.m);for(var fe=0;fe<c.length;fe++)for(var be=0;be<E.attributes.length;be++){M=0,U=0;for(var Ge=0;Ge<p.length;Ge++)M+=A[Ge][fe]*E.attributes[be](p[Ge]),U+=A[Ge][fe];c[fe][be]=M/U}},ar=function(c,p,b,A,E){for(var M=0;M<c.length;M++)p[M]=c[M].slice();for(var U,ne,X,fe=2/(E.m-1),be=0;be<b.length;be++)for(var Ge=0;Ge<A.length;Ge++){U=0;for(var $e=0;$e<b.length;$e++)ne=Td(E.distance,A[Ge],b[be],E.attributes,"cmeans"),X=Td(E.distance,A[Ge],b[$e],E.attributes,"cmeans"),U+=Math.pow(ne/X,fe);c[Ge][be]=1/U}},Ns=function(c){var E,M,U,ne,X,p=this.cy(),b=this.nodes(),A=Uh(c);ne=new Array(b.length);for(var fe=0;fe<b.length;fe++)ne[fe]=new Array(A.k);U=new Array(b.length);for(var be=0;be<b.length;be++)U[be]=new Array(A.k);for(var Ge=0;Ge<b.length;Ge++){for(var $e=0,Ke=0;Ke<A.k;Ke++)U[Ge][Ke]=Math.random(),$e+=U[Ge][Ke];for(var ot=0;ot<A.k;ot++)U[Ge][ot]=U[Ge][ot]/$e}M=new Array(A.k);for(var _t=0;_t<A.k;_t++)M[_t]=new Array(A.attributes.length);X=new Array(b.length);for(var Et=0;Et<b.length;Et++)X[Et]=new Array(A.k);for(var $t=!0,Ut=0;$t&&Ut<A.maxIterations;)$t=!1,vi(M,b,U,X,A),ar(U,ne,M,b,A),Hh(U,ne,A.sensitivityThreshold)||($t=!0),Ut++;return E=function(c,p,b,A){for(var E=new Array(b.k),M=0;M<E.length;M++)E[M]=[];for(var U,ne,X=0;X<p.length;X++){U=-1/0,ne=-1;for(var fe=0;fe<p[0].length;fe++)p[X][fe]>U&&(U=p[X][fe],ne=fe);E[ne].push(c[X])}for(var be=0;be<E.length;be++)E[be]=A.collection(E[be]);return E}(b,U,A,p),{clusters:E,degreeOfMembership:U}},ka={kMeans:function(c){var ne,p=this.cy(),b=this.nodes(),A=null,E=Uh(c),M=new Array(E.k),U={};ne=E.testMode?"number"==typeof E.testCentroids?hd(b,E.k,E.attributes):"object"===xe(E.testCentroids)?E.testCentroids:hd(b,E.k,E.attributes):hd(b,E.k,E.attributes);for(var X=!0,fe=0;X&&fe<E.maxIterations;){for(var be=0;be<b.length;be++)U[(A=b[be]).id()]=Hl(A,ne,E.distance,E.attributes,"kMeans");X=!1;for(var Ge=0;Ge<E.k;Ge++){var $e=cl(Ge,b,U);if(0!==$e.length){for(var Ke=E.attributes.length,ot=ne[Ge],_t=new Array(Ke),Et=new Array(Ke),$t=0;$t<Ke;$t++){Et[$t]=0;for(var Ut=0;Ut<$e.length;Ut++)Et[$t]+=E.attributes[$t](A=$e[Ut]);_t[$t]=Et[$t]/$e.length,$u(_t[$t],ot[$t],E.sensitivityThreshold)||(X=!0)}ne[Ge]=_t,M[Ge]=p.collection($e)}}fe++}return M},kMedoids:function(c){var U,X,p=this.cy(),b=this.nodes(),A=null,E=Uh(c),M=new Array(E.k),ne={},fe=new Array(E.k);E.testMode?"number"==typeof E.testCentroids||(U="object"===xe(E.testCentroids)?E.testCentroids:Pf(b,E.k)):U=Pf(b,E.k);for(var be=!0,Ge=0;be&&Ge<E.maxIterations;){for(var $e=0;$e<b.length;$e++)ne[(A=b[$e]).id()]=Hl(A,U,E.distance,E.attributes,"kMedoids");be=!1;for(var Ke=0;Ke<U.length;Ke++){var ot=cl(Ke,b,ne);if(0!==ot.length){fe[Ke]=Lf(U[Ke],ot,E.attributes);for(var _t=0;_t<ot.length;_t++)(X=Lf(ot[_t],ot,E.attributes))<fe[Ke]&&(fe[Ke]=X,U[Ke]=ot[_t],be=!0);M[Ke]=p.collection(ot)}}Ge++}return M},fuzzyCMeans:Ns,fcm:Ns},Do=jn({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),El={single:"min",complete:"max"},ui=function(c,p,b,A,E){for(var ne,M=0,U=1/0,X=E.attributes,fe=function(mn,Fn){return Ol(E.distance,X.length,function(Rn){return X[Rn](mn)},function(Rn){return X[Rn](Fn)},mn,Fn)},be=0;be<c.length;be++){var Ge=c[be].key,$e=b[Ge][A[Ge]];$e<U&&(M=Ge,U=$e)}if("threshold"===E.mode&&U>=E.threshold||"dendrogram"===E.mode&&1===c.length)return!1;var _t,Ke=p[M],ot=p[A[M]];_t="dendrogram"===E.mode?{left:Ke,right:ot,key:Ke.key}:{value:Ke.value.concat(ot.value),key:Ke.key},c[Ke.index]=_t,c.splice(ot.index,1),p[Ke.key]=_t;for(var Et=0;Et<c.length;Et++){var $t=c[Et];Ke.key===$t.key?ne=1/0:"min"===E.linkage?(ne=b[Ke.key][$t.key],b[Ke.key][$t.key]>b[ot.key][$t.key]&&(ne=b[ot.key][$t.key])):"max"===E.linkage?(ne=b[Ke.key][$t.key],b[Ke.key][$t.key]<b[ot.key][$t.key]&&(ne=b[ot.key][$t.key])):ne="mean"===E.linkage?(b[Ke.key][$t.key]*Ke.size+b[ot.key][$t.key]*ot.size)/(Ke.size+ot.size):"dendrogram"===E.mode?fe($t.value,Ke.value):fe($t.value[0],Ke.value[0]),b[Ke.key][$t.key]=b[$t.key][Ke.key]=ne}for(var Ut=0;Ut<c.length;Ut++){var un=c[Ut].key;if(A[un]===Ke.key||A[un]===ot.key){for(var In=un,En=0;En<c.length;En++){var hn=c[En].key;b[un][hn]<b[un][In]&&(In=hn)}A[un]=In}c[Ut].index=Ut}return Ke.key=ot.key=Ke.index=ot.index=null,!0},Wi=function g(c,p,b){!c||(c.value?p.push(c.value):(c.left&&g(c.left,p),c.right&&g(c.right,p)))},ir=function g(c,p){if(!c)return"";if(c.left&&c.right){var b=g(c.left,p),A=g(c.right,p),E=p.add({group:"nodes",data:{id:b+","+A}});return p.add({group:"edges",data:{source:b,target:E.id()}}),p.add({group:"edges",data:{source:A,target:E.id()}}),E.id()}return c.value?c.value.id():void 0},pa=function g(c,p,b){if(!c)return[];var A=[],E=[],M=[];return 0===p?(c.left&&Wi(c.left,A),c.right&&Wi(c.right,E),M=A.concat(E),[b.collection(M)]):1===p?c.value?[b.collection(c.value)]:(c.left&&Wi(c.left,A),c.right&&Wi(c.right,E),[b.collection(A),b.collection(E)]):c.value?[b.collection(c.value)]:(c.left&&(A=g(c.left,p-1,b)),c.right&&(E=g(c.right,p-1,b)),A.concat(E))},Ia=function(c){for(var p=this.cy(),b=this.nodes(),A=function(c){var p=Do(c),b=El[p.linkage];return null!=b&&(p.linkage=b),p}(c),E=A.attributes,M=function(Ut,un){return Ol(A.distance,E.length,function(In){return E[In](Ut)},function(In){return E[In](un)},Ut,un)},U=[],ne=[],X=[],fe=[],be=0;be<b.length;be++){var Ge={value:"dendrogram"===A.mode?b[be]:[b[be]],key:be,index:be};U[be]=Ge,fe[be]=Ge,ne[be]=[],X[be]=0}for(var $e=0;$e<U.length;$e++)for(var Ke=0;Ke<=$e;Ke++){var ot;ot="dendrogram"===A.mode?$e===Ke?1/0:M(U[$e].value,U[Ke].value):$e===Ke?1/0:M(U[$e].value[0],U[Ke].value[0]),ne[$e][Ke]=ot,ne[Ke][$e]=ot,ot<ne[$e][X[$e]]&&(X[$e]=Ke)}for(var _t=ui(U,fe,ne,X,A);_t;)_t=ui(U,fe,ne,X,A);var Et;return"dendrogram"===A.mode?(Et=pa(U[0],A.dendrogramDepth,p),A.addDendrogram&&ir(U[0],p)):(Et=new Array(U.length),U.forEach(function($t,Ut){$t.key=$t.index=null,Et[Ut]=p.collection($t.value)})),Et},Ca={hierarchicalClustering:Ia,hca:Ia},xo=jn({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),bo=function(c,p,b,A){var E=function(U,ne){return A[ne](U)};return-Ol(c,A.length,function(M){return E(p,M)},function(M){return E(b,M)},p,b)},wg=function(c,p,b){for(var A=[],E=0;E<c;E++){for(var M=-1,U=-1/0,ne=0;ne<b.length;ne++){var X=b[ne];p[E*c+X]>U&&(M=X,U=p[E*c+X])}M>0&&A.push(M)}for(var fe=0;fe<b.length;fe++)A[b[fe]]=b[fe];return A},Xy=function(c){for(var p=this.cy(),b=this.nodes(),A=function(c){var p=c.damping,b=c.preference;.5<=p&&p<1||We("Damping must range on [0.5, 1).  Got: ".concat(p));var A=["median","mean","min","max"];return A.some(function(E){return E===b})||en(b)||We("Preference must be one of [".concat(A.map(function(E){return"'".concat(E,"'")}).join(", "),"] or a number.  Got: ").concat(b)),xo(c)}(c),E={},M=0;M<b.length;M++)E[b[M].id()]=M;var U,ne,X,fe,be,Ge,mn;ne=(U=b.length)*U,X=new Array(ne);for(var $e=0;$e<ne;$e++)X[$e]=-1/0;for(var Ke=0;Ke<U;Ke++)for(var ot=0;ot<U;ot++)Ke!==ot&&(X[Ke*U+ot]=bo(A.distance,b[Ke],b[ot],A.attributes));fe=function(c,p){var b;return b="median"===p?function(c){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,E=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],M=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(b<c.length&&c.splice(b,c.length-b),p>0&&c.splice(0,p)):c=c.slice(p,b);for(var U=0,ne=c.length-1;ne>=0;ne--)M?isFinite(c[ne])||(c[ne]=-1/0,U++):c.splice(ne,1);E&&c.sort(function(Ge,$e){return Ge-$e});var fe=c.length,be=Math.floor(fe/2);return fe%2!=0?c[be+1+U]:(c[be-1+U]+c[be+U])/2}(c):"mean"===p?function(c){for(var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,A=0,E=0,M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;M<b;M++){var U=c[M];isFinite(U)&&(A+=U,E++)}return A/E}(c):"min"===p?function(c){for(var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,A=1/0,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;E<b;E++){var M=c[E];isFinite(M)&&(A=Math.min(M,A))}return A}(c):"max"===p?function(c){for(var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,A=-1/0,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;E<b;E++){var M=c[E];isFinite(M)&&(A=Math.max(M,A))}return A}(c):p,b}(X,A.preference);for(var _t=0;_t<U;_t++)X[_t*U+_t]=fe;be=new Array(ne);for(var Et=0;Et<ne;Et++)be[Et]=0;Ge=new Array(ne);for(var $t=0;$t<ne;$t++)Ge[$t]=0;for(var Ut=new Array(U),un=new Array(U),In=new Array(U),En=0;En<U;En++)Ut[En]=0,un[En]=0,In[En]=0;for(var hn=new Array(U*A.minIterations),Mn=0;Mn<hn.length;Mn++)hn[Mn]=0;for(mn=0;mn<A.maxIterations;mn++){for(var Fn=0;Fn<U;Fn++){for(var Rn=-1/0,Xt=-1/0,Nn=-1,xn=0,gi=0;gi<U;gi++)Ut[gi]=be[Fn*U+gi],(xn=Ge[Fn*U+gi]+X[Fn*U+gi])>=Rn?(Xt=Rn,Rn=xn,Nn=gi):xn>Xt&&(Xt=xn);for(var $n=0;$n<U;$n++)be[Fn*U+$n]=(1-A.damping)*(X[Fn*U+$n]-Rn)+A.damping*Ut[$n];be[Fn*U+Nn]=(1-A.damping)*(X[Fn*U+Nn]-Xt)+A.damping*Ut[Nn]}for(var ai=0;ai<U;ai++){for(var wi=0,Pi=0;Pi<U;Pi++)Ut[Pi]=Ge[Pi*U+ai],un[Pi]=Math.max(0,be[Pi*U+ai]),wi+=un[Pi];wi-=un[ai],un[ai]=be[ai*U+ai],wi+=un[ai];for(var er=0;er<U;er++)Ge[er*U+ai]=(1-A.damping)*Math.min(0,wi-un[er])+A.damping*Ut[er];Ge[ai*U+ai]=(1-A.damping)*(wi-un[ai])+A.damping*Ut[ai]}for(var xi=0,Ki=0;Ki<U;Ki++){var hr=Ge[Ki*U+Ki]+be[Ki*U+Ki]>0?1:0;hn[mn%A.minIterations*U+Ki]=hr,xi+=hr}if(xi>0&&(mn>=A.minIterations-1||mn==A.maxIterations-1)){for(var Ar=0,mr=0;mr<U;mr++){In[mr]=0;for(var pr=0;pr<A.minIterations;pr++)In[mr]+=hn[pr*U+mr];(0===In[mr]||In[mr]===A.minIterations)&&Ar++}if(Ar===U)break}}for(var Si=function(c,p,b){for(var A=[],E=0;E<c;E++)p[E*c+E]+b[E*c+E]>0&&A.push(E);return A}(U,be,Ge),sr=function(c,p,b){for(var A=wg(c,p,b),E=0;E<b.length;E++){for(var M=[],U=0;U<A.length;U++)A[U]===b[E]&&M.push(U);for(var ne=-1,X=-1/0,fe=0;fe<M.length;fe++){for(var be=0,Ge=0;Ge<M.length;Ge++)be+=p[M[Ge]*c+M[fe]];be>X&&(ne=fe,X=be)}b[E]=M[ne]}return wg(c,p,b)}(U,X,Si),Sr={},ts=0;ts<Si.length;ts++)Sr[Si[ts]]=[];for(var ps=0;ps<b.length;ps++){var sa=sr[E[b[ps].id()]];null!=sa&&Sr[sa].push(b[ps])}for(var Cs=new Array(Si.length),ds=0;ds<Si.length;ds++)Cs[ds]=p.collection(Sr[Si[ds]]);return Cs},Rp={affinityPropagation:Xy,ap:Xy},iv=jn({root:void 0,directed:!1}),Tl={hierholzer:function(c){if(!Ht(c)){var p=arguments;c={root:p[0],directed:p[1]}}var ne,X,fe,b=iv(c),A=b.root,E=b.directed,M=this,U=!1;A&&(fe=Ct(A)?this.filter(A)[0].id():A[0].id());var be={},Ge={};M.forEach(E?function($t){var Ut=$t.id();if($t.isNode()){var un=$t.indegree(!0),In=$t.outdegree(!0),En=un-In,hn=In-un;1==En?ne?U=!0:ne=Ut:1==hn?X?U=!0:X=Ut:(hn>1||En>1)&&(U=!0),be[Ut]=[],$t.outgoers().forEach(function(Mn){Mn.isEdge()&&be[Ut].push(Mn.id())})}else Ge[Ut]=[void 0,$t.target().id()]}:function($t){var Ut=$t.id();$t.isNode()?($t.degree(!0)%2&&(ne?X?U=!0:X=Ut:ne=Ut),be[Ut]=[],$t.connectedEdges().forEach(function(In){return be[Ut].push(In.id())})):Ge[Ut]=[$t.source().id(),$t.target().id()]});var $e={found:!1,trail:void 0};if(U)return $e;if(X&&ne)if(E){if(fe&&X!=fe)return $e;fe=X}else{if(fe&&X!=fe&&ne!=fe)return $e;fe||(fe=X)}else fe||(fe=M[0].id());var Ke=function(Ut){for(var En,hn,Mn,un=Ut,In=[Ut];be[un].length;)En=be[un].shift(),hn=Ge[En][0],un!=(Mn=Ge[En][1])?(be[Mn]=be[Mn].filter(function(mn){return mn!=En}),un=Mn):!E&&un!=hn&&(be[hn]=be[hn].filter(function(mn){return mn!=En}),un=hn),In.unshift(En),In.unshift(un);return In},ot=[],_t=[];for(_t=Ke(fe);1!=_t.length;)0==be[_t[0]].length?(ot.unshift(M.getElementById(_t.shift())),ot.unshift(M.getElementById(_t.shift()))):_t=Ke(_t.shift()).concat(_t);for(var Et in ot.unshift(M.getElementById(_t.shift())),be)if(be[Et].length)return $e;return $e.found=!0,$e.trail=this.spawn(ot,!0),$e}},up=function(){var c=this,p={},b=0,A=0,E=[],M=[],U={},X=function be(Ge,$e,Ke){Ge===Ke&&(A+=1),p[$e]={id:b,low:b++,cutVertex:!1};var _t,Et,$t,Ut,ot=c.getElementById($e).connectedEdges().intersection(c);0===ot.size()?E.push(c.spawn(c.getElementById($e))):ot.forEach(function(un){_t=un.source().id(),Et=un.target().id(),($t=_t===$e?Et:_t)!==Ke&&(Ut=un.id(),U[Ut]||(U[Ut]=!0,M.push({x:$e,y:$t,edge:un})),$t in p?p[$e].low=Math.min(p[$e].low,p[$t].id):(be(Ge,$t,$e),p[$e].low=Math.min(p[$e].low,p[$t].low),p[$e].id<=p[$t].low&&(p[$e].cutVertex=!0,function(Ge,$e){for(var Ke=M.length-1,ot=[],_t=c.spawn();M[Ke].x!=Ge||M[Ke].y!=$e;)ot.push(M.pop().edge),Ke--;ot.push(M.pop().edge),ot.forEach(function(Et){var $t=Et.connectedNodes().intersection(c);_t.merge(Et),$t.forEach(function(Ut){var un=Ut.id(),In=Ut.connectedEdges().intersection(c);_t.merge(Ut),_t.merge(p[un].cutVertex?In.filter(function(En){return En.isLoop()}):In)})}),E.push(_t)}($e,$t))))})};c.forEach(function(be){if(be.isNode()){var Ge=be.id();Ge in p||(A=0,X(Ge,Ge),p[Ge].cutVertex=A>1)}});var fe=Object.keys(p).filter(function(be){return p[be].cutVertex}).map(function(be){return c.getElementById(be)});return{cut:c.spawn(fe),components:E}},Op=function(){var c=this,p={},b=0,A=[],E=[],M=c.spawn(c),U=function ne(X){if(E.push(X),p[X]={index:b,low:b++,explored:!1},c.getElementById(X).connectedEdges().intersection(c).forEach(function(ot){var _t=ot.target().id();_t!==X&&(_t in p||ne(_t),p[_t].explored||(p[X].low=Math.min(p[X].low,p[_t].low)))}),p[X].index===p[X].low){for(var be=c.spawn();;){var Ge=E.pop();if(be.merge(c.getElementById(Ge)),p[Ge].low=p[X].index,p[Ge].explored=!0,Ge===X)break}var $e=be.edgesWith(be),Ke=be.merge($e);A.push(Ke),M=M.difference(Ke)}};return c.forEach(function(ne){if(ne.isNode()){var X=ne.id();X in p||U(X)}}),{cut:M,components:A}},rv={};[Xr,La,eo,Ea,B,Mt,Xi,$o,qa,Jl,Ta,oo,ka,Ca,Rp,Tl,{hopcroftTarjanBiconnected:up,htbc:up,htb:up,hopcroftTarjanBiconnectedComponents:up},{tarjanStronglyConnected:Op,tsc:Op,tscc:Op,tarjanStronglyConnectedComponents:Op}].forEach(function(g){nr(rv,g)});var Fl=function g(c){if(!(this instanceof g))return new g(c);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof c&&c.call(this,this.fulfill.bind(this),this.reject.bind(this))};Fl.prototype={fulfill:function(c){return Fp(this,1,"fulfillValue",c)},reject:function(c){return Fp(this,2,"rejectReason",c)},then:function(c,p){var b=this,A=new Fl;return b.onFulfilled.push(Z_(c,A,"fulfill")),b.onRejected.push(Z_(p,A,"reject")),K_(b),A.proxy}};var Fp=function(c,p,b,A){return 0===c.state&&(c.state=p,c[b]=A,K_(c)),c},K_=function(c){1===c.state?sv(c,"onFulfilled",c.fulfillValue):2===c.state&&sv(c,"onRejected",c.rejectReason)},sv=function(c,p,b){if(0!==c[p].length){var A=c[p];c[p]=[];var E=function(){for(var U=0;U<A.length;U++)A[U](b)};"function"==typeof setImmediate?setImmediate(E):setTimeout(E,0)}},Z_=function(c,p,b){return function(A){if("function"!=typeof c)p[b].call(p,A);else{var E;try{E=c(A)}catch(M){return void p.reject(M)}Yv(p,E)}}},Yv=function g(c,p){if(c!==p&&c.proxy!==p){var b;if("object"===xe(p)&&null!==p||"function"==typeof p)try{b=p.then}catch(E){return void c.reject(E)}if("function"!=typeof b)c.fulfill(p);else{var A=!1;try{b.call(p,function(E){A||(A=!0,E===p?c.reject(new TypeError("circular thenable chain")):g(c,E))},function(E){A||(A=!0,c.reject(E))})}catch(E){A||c.reject(E)}}}else c.reject(new TypeError("cannot resolve promise with itself"))};Fl.all=function(g){return new Fl(function(c,p){for(var b=new Array(g.length),A=0,E=function(ne,X){b[ne]=X,++A===g.length&&c(b)},M=0;M<g.length;M++)!function(U){var ne=g[U];null!=ne&&null!=ne.then?ne.then(function(be){E(U,be)},function(be){p(be)}):E(U,ne)}(M)})},Fl.resolve=function(g){return new Fl(function(c,p){c(g)})},Fl.reject=function(g){return new Fl(function(c,p){p(g)})};var vl=typeof Promise<"u"?Promise:Fl,pm=function(c,p,b){var A=ri(c),E=!A,M=this._private=nr({duration:1e3},p,b);if(M.target=c,M.style=M.style||M.css,M.started=!1,M.playing=!1,M.hooked=!1,M.applying=!1,M.progress=0,M.completes=[],M.frames=[],M.complete&&rn(M.complete)&&M.completes.push(M.complete),E){var U=c.position();M.startPosition=M.startPosition||{x:U.x,y:U.y},M.startStyle=M.startStyle||c.cy().style().getAnimationStartStyle(c,M.style)}if(A){var ne=c.pan();M.startPan={x:ne.x,y:ne.y},M.startZoom=c.zoom()}this.length=1,this[0]=this},Ag=pm.prototype;nr(Ag,{instanceString:function(){return"animation"},hook:function(){var c=this._private;if(!c.hooked){var b=c.target._private.animation;(c.queue?b.queue:b.current).push(this),xt(c.target)&&c.target.cy().addToAnimationPool(c.target),c.hooked=!0}return this},play:function(){var c=this._private;return 1===c.progress&&(c.progress=0),c.playing=!0,c.started=!1,c.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var c=this._private;return c.applying=!0,c.started=!1,c.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var c=this._private;return c.playing=!1,c.started=!1,this},stop:function(){var c=this._private;return c.playing=!1,c.started=!1,c.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(c){var p=this._private;return void 0===c?p.progress*p.duration:this.progress(c/p.duration)},progress:function(c){var p=this._private,b=p.playing;return void 0===c?p.progress:(b&&this.pause(),p.progress=c,p.started=!1,b&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var c=this._private,p=c.playing;p&&this.pause(),c.progress=1-c.progress,c.started=!1;var b=function(X,fe){var be=c[X];null!=be&&(c[X]=c[fe],c[fe]=be)};if(b("zoom","startZoom"),b("pan","startPan"),b("position","startPosition"),c.style)for(var A=0;A<c.style.length;A++){var E=c.style[A],M=E.name,U=c.startStyle[M];c.startStyle[M]=E,c.style[A]=U}return p&&this.play(),this},promise:function(c){var b,p=this._private;return b="frame"===c?p.frames:p.completes,new vl(function(A,E){b.push(function(){A()})})}}),Ag.complete=Ag.completed,Ag.run=Ag.play,Ag.running=Ag.playing;var dd={data:function(c){return c=nr({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(A){},beforeSet:function(A,E){},onSet:function(A){},canSet:function(A){return!0}},c),function(A,E){var M=c,U=this,ne=void 0!==U.length,X=ne?U:[U],fe=ne?U[0]:U;if(Ct(A)){var $e,Ge=-1!==A.indexOf(".")&&De.default(A);if(M.allowGetting&&void 0===E)return fe&&(M.beforeGet(fe),$e=Ge&&void 0===fe._private[M.field][A]?le.default(fe._private[M.field],Ge):fe._private[M.field][A]),$e;if(M.allowSetting&&void 0!==E&&!M.immutableKeys[A]){var ot=Le({},A,E);M.beforeSet(U,ot);for(var _t=0,Et=X.length;_t<Et;_t++){var $t=X[_t];M.canSet($t)&&(Ge&&void 0===fe._private[M.field][A]?Te.default($t._private[M.field],Ge,E):$t._private[M.field][A]=E)}M.updateStyle&&U.updateStyle(),M.onSet(U),M.settingTriggersEvent&&U[M.triggerFnName](M.settingEvent)}}else if(M.allowSetting&&Ht(A)){var un,In,Ut=A,En=Object.keys(Ut);M.beforeSet(U,Ut);for(var hn=0;hn<En.length;hn++)if(In=Ut[un=En[hn]],!M.immutableKeys[un])for(var mn=0;mn<X.length;mn++){var Fn=X[mn];M.canSet(Fn)&&(Fn._private[M.field][un]=In)}M.updateStyle&&U.updateStyle(),M.onSet(U),M.settingTriggersEvent&&U[M.triggerFnName](M.settingEvent)}else if(M.allowBinding&&rn(A))U.on(M.bindingEvent,A);else if(M.allowGetting&&void 0===A){var Xt;return fe&&(M.beforeGet(fe),Xt=fe._private[M.field]),Xt}return U}},removeData:function(c){return c=nr({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},c),function(A){var E=c,M=this,ne=void 0!==M.length?M:[M];if(Ct(A)){for(var X=A.split(/\s+/),fe=X.length,be=0;be<fe;be++){var Ge=X[be];if(!Oe(Ge)&&!E.immutableKeys[Ge])for(var Ke=0,ot=ne.length;Ke<ot;Ke++)ne[Ke]._private[E.field][Ge]=void 0}E.triggerEvent&&M[E.triggerFnName](E.event)}else if(void 0===A){for(var _t=0,Et=ne.length;_t<Et;_t++)for(var $t=ne[_t]._private[E.field],Ut=Object.keys($t),un=0;un<Ut.length;un++){var In=Ut[un];!E.immutableKeys[In]&&($t[In]=void 0)}E.triggerEvent&&M[E.triggerFnName](E.event)}return M}}},Yy={eventAliasesOn:function(c){var p=c;p.addListener=p.listen=p.bind=p.on,p.unlisten=p.unbind=p.off=p.removeListener,p.trigger=p.emit,p.pon=p.promiseOn=function(b,A){var E=this,M=Array.prototype.slice.call(arguments,0);return new vl(function(U,ne){var fe=M.concat([function($e){E.off.apply(E,be),U($e)}]),be=fe.concat([]);E.on.apply(E,fe)})}}},Sa={};[{animated:function(){return function(){var p=this,A=void 0!==p.length?p:[p];if(!(this._private.cy||this).styleEnabled())return!1;var M=A[0];return M?M._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var p=this,A=void 0!==p.length?p:[p];if(!(this._private.cy||this).styleEnabled())return this;for(var M=0;M<A.length;M++)A[M]._private.animation.queue=[];return this}},delay:function(){return function(p,b){return(this._private.cy||this).styleEnabled()?this.animate({delay:p,duration:p,complete:b}):this}},delayAnimation:function(){return function(p,b){return(this._private.cy||this).styleEnabled()?this.animation({delay:p,duration:p,complete:b}):this}},animation:function(){return function(p,b){var A=this,E=void 0!==A.length,M=E?A:[A],U=this._private.cy||this,ne=!E,X=!ne;if(!U.styleEnabled())return this;var fe=U.style();if(p=nr({},p,b),0===Object.keys(p).length)return new pm(M[0],p);switch(void 0===p.duration&&(p.duration=400),p.duration){case"slow":p.duration=600;break;case"fast":p.duration=200}if(X&&(p.style=fe.getPropsList(p.style||p.css),p.css=void 0),X&&null!=p.renderedPosition){var Ge=p.renderedPosition,$e=U.pan(),Ke=U.zoom();p.position=Ys(Ge,Ke,$e)}if(ne&&null!=p.panBy){var ot=p.panBy,_t=U.pan();p.pan={x:_t.x+ot.x,y:_t.y+ot.y}}var Et=p.center||p.centre;if(ne&&null!=Et){var $t=U.getCenterPan(Et.eles,p.zoom);null!=$t&&(p.pan=$t)}if(ne&&null!=p.fit){var Ut=p.fit,un=U.getFitViewport(Ut.eles||Ut.boundingBox,Ut.padding);null!=un&&(p.pan=un.pan,p.zoom=un.zoom)}if(ne&&Ht(p.zoom)){var In=U.getZoomedViewport(p.zoom);null!=In?(In.zoomed&&(p.zoom=In.zoom),In.panned&&(p.pan=In.pan)):p.zoom=null}return new pm(M[0],p)}},animate:function(){return function(p,b){var A=this,M=void 0!==A.length?A:[A];if(!(this._private.cy||this).styleEnabled())return this;b&&(p=nr({},p,b));for(var ne=0;ne<M.length;ne++){var X=M[ne],fe=X.animated()&&(void 0===p.queue||p.queue);X.animation(p,fe?{queue:!0}:void 0).play()}return this}},stop:function(){return function(p,b){var A=this,M=void 0!==A.length?A:[A],U=this._private.cy||this;if(!U.styleEnabled())return this;for(var ne=0;ne<M.length;ne++){for(var fe=M[ne]._private,be=fe.animation.current,Ge=0;Ge<be.length;Ge++)b&&(be[Ge]._private.duration=0);p&&(fe.animation.queue=[]),b||(fe.animation.current=[])}return U.notify("draw"),this}}},dd,Yy].forEach(function(g){nr(Sa,g)});var xu={animate:Sa.animate(),animation:Sa.animation(),animated:Sa.animated(),clearQueue:Sa.clearQueue(),delay:Sa.delay(),delayAnimation:Sa.delayAnimation(),stop:Sa.stop()},Oc={classes:function(c){var p=this;if(void 0===c){var b=[];return p[0]._private.classes.forEach(function(Ke){return b.push(Ke)}),b}Qt(c)||(c=(c||"").match(/\S+/g)||[]);for(var A=[],E=new wr(c),M=0;M<p.length;M++){for(var U=p[M],ne=U._private,X=ne.classes,fe=!1,be=0;be<c.length;be++)if(!X.has(c[be])){fe=!0;break}fe||(fe=X.size!==c.length),fe&&(ne.classes=E,A.push(U))}return A.length>0&&this.spawn(A).updateStyle().emit("class"),p},addClass:function(c){return this.toggleClass(c,!0)},hasClass:function(c){var p=this[0];return null!=p&&p._private.classes.has(c)},toggleClass:function(c,p){Qt(c)||(c=c.match(/\S+/g)||[]);for(var b=this,A=void 0===p,E=[],M=0,U=b.length;M<U;M++)for(var ne=b[M],X=ne._private.classes,fe=!1,be=0;be<c.length;be++){var Ge=c[be],$e=X.has(Ge),Ke=!1;p||A&&!$e?(X.add(Ge),Ke=!0):(!p||A&&$e)&&(X.delete(Ge),Ke=!0),!fe&&Ke&&(E.push(ne),fe=!0)}return E.length>0&&this.spawn(E).updateStyle().emit("class"),b},removeClass:function(c){return this.toggleClass(c,!1)},flashClass:function(c,p){var b=this;if(null==p)p=250;else if(0===p)return b;return b.addClass(c),setTimeout(function(){b.removeClass(c)},p),b}};Oc.className=Oc.classNames=Oc.classes;var Po={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:lt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Po.variable="(?:[\\w-.]|(?:\\\\"+Po.metaChar+"))+",Po.className="(?:[\\w-]|(?:\\\\"+Po.metaChar+"))+",Po.value=Po.string+"|"+Po.number,Po.id=Po.variable,function(){var g,c,p;for(g=Po.comparatorOp.split("|"),p=0;p<g.length;p++)Po.comparatorOp+="|@"+(c=g[p]);for(g=Po.comparatorOp.split("|"),p=0;p<g.length;p++)!((c=g[p]).indexOf("!")>=0)&&"="!==c&&(Po.comparatorOp+="|\\!"+c)}();var io=[{selector:":selected",matches:function(c){return c.selected()}},{selector:":unselected",matches:function(c){return!c.selected()}},{selector:":selectable",matches:function(c){return c.selectable()}},{selector:":unselectable",matches:function(c){return!c.selectable()}},{selector:":locked",matches:function(c){return c.locked()}},{selector:":unlocked",matches:function(c){return!c.locked()}},{selector:":visible",matches:function(c){return c.visible()}},{selector:":hidden",matches:function(c){return!c.visible()}},{selector:":transparent",matches:function(c){return c.transparent()}},{selector:":grabbed",matches:function(c){return c.grabbed()}},{selector:":free",matches:function(c){return!c.grabbed()}},{selector:":removed",matches:function(c){return c.removed()}},{selector:":inside",matches:function(c){return!c.removed()}},{selector:":grabbable",matches:function(c){return c.grabbable()}},{selector:":ungrabbable",matches:function(c){return!c.grabbable()}},{selector:":animated",matches:function(c){return c.animated()}},{selector:":unanimated",matches:function(c){return!c.animated()}},{selector:":parent",matches:function(c){return c.isParent()}},{selector:":childless",matches:function(c){return c.isChildless()}},{selector:":child",matches:function(c){return c.isChild()}},{selector:":orphan",matches:function(c){return c.isOrphan()}},{selector:":nonorphan",matches:function(c){return c.isChild()}},{selector:":compound",matches:function(c){return c.isNode()?c.isParent():c.source().isParent()||c.target().isParent()}},{selector:":loop",matches:function(c){return c.isLoop()}},{selector:":simple",matches:function(c){return c.isSimple()}},{selector:":active",matches:function(c){return c.active()}},{selector:":inactive",matches:function(c){return!c.active()}},{selector:":backgrounding",matches:function(c){return c.backgrounding()}},{selector:":nonbackgrounding",matches:function(c){return!c.backgrounding()}}].sort(function(g,c){return function(c,p){return-1*Hr(c,p)}(g.selector,c.selector)}),na=function(){for(var c,g={},p=0;p<io.length;p++)g[(c=io[p]).selector]=c.matches;return g}(),da="("+io.map(function(g){return g.selector}).join("|")+")",_a=function(c){return c.replace(new RegExp("\\\\("+Po.metaChar+")","g"),function(p,b){return b})},Fc=function(c,p,b){c[c.length-1]=b},tf=[{name:"group",query:!0,regex:"("+Po.group+")",populate:function(c,p,b){var E=Ve(b,1)[0];p.checks.push({type:0,value:"*"===E?E:E+"s"})}},{name:"state",query:!0,regex:da,populate:function(c,p,b){var A=Ve(b,1);p.checks.push({type:7,value:A[0]})}},{name:"id",query:!0,regex:"\\#("+Po.id+")",populate:function(c,p,b){var A=Ve(b,1);p.checks.push({type:8,value:_a(A[0])})}},{name:"className",query:!0,regex:"\\.("+Po.className+")",populate:function(c,p,b){var A=Ve(b,1);p.checks.push({type:9,value:_a(A[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Po.variable+")\\s*\\]",populate:function(c,p,b){var A=Ve(b,1);p.checks.push({type:4,field:_a(A[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Po.variable+")\\s*("+Po.comparatorOp+")\\s*("+Po.value+")\\s*\\]",populate:function(c,p,b){var A=Ve(b,3),E=A[0],M=A[1],U=A[2];U=null!=new RegExp("^"+Po.string+"$").exec(U)?U.substring(1,U.length-1):parseFloat(U),p.checks.push({type:3,field:_a(E),operator:M,value:U})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Po.boolOp+")\\s*("+Po.variable+")\\s*\\]",populate:function(c,p,b){var A=Ve(b,2),E=A[0];p.checks.push({type:5,field:_a(A[1]),operator:E})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Po.meta+")\\s*("+Po.comparatorOp+")\\s*("+Po.number+")\\s*\\]\\]",populate:function(c,p,b){var A=Ve(b,3),M=A[1],U=A[2];p.checks.push({type:6,field:_a(A[0]),operator:M,value:parseFloat(U)})}},{name:"nextQuery",separator:!0,regex:Po.separator,populate:function(c,p){var b=c.currentSubject,A=c.edgeCount,E=c.compoundCount,M=c[c.length-1];return null!=b&&(M.subject=b,c.currentSubject=null),M.edgeCount=A,M.compoundCount=E,c.edgeCount=0,c.compoundCount=0,c[c.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Po.directedEdge,populate:function(c,p){if(null==c.currentSubject){var b={checks:[]},E={checks:[]};return b.checks.push({type:11,source:p,target:E}),Fc(c,0,b),c.edgeCount++,E}var M={checks:[]},ne={checks:[]};return M.checks.push({type:12,source:p,target:ne}),Fc(c,0,M),c.edgeCount++,ne}},{name:"undirectedEdge",separator:!0,regex:Po.undirectedEdge,populate:function(c,p){if(null==c.currentSubject){var b={checks:[]},E={checks:[]};return b.checks.push({type:10,nodes:[p,E]}),Fc(c,0,b),c.edgeCount++,E}var M={checks:[]},ne={checks:[]};return M.checks.push({type:14,node:p,neighbor:ne}),Fc(c,0,M),ne}},{name:"child",separator:!0,regex:Po.child,populate:function(c,p){if(null==c.currentSubject){var b={checks:[]},A={checks:[]};return b.checks.push({type:15,parent:c[c.length-1],child:A}),Fc(c,0,b),c.compoundCount++,A}if(c.currentSubject===p){var M={checks:[]},ne={checks:[]},X={checks:[]},fe={checks:[]},be={checks:[]};return M.checks.push({type:19,left:c[c.length-1],right:ne,subject:X}),X.checks=p.checks,p.checks=[{type:20}],be.checks.push({type:20}),ne.checks.push({type:17,parent:be,child:fe}),Fc(c,0,M),c.currentSubject=X,c.compoundCount++,fe}var Ge={checks:[]},$e={checks:[]},Ke=[{type:17,parent:Ge,child:$e}];return Ge.checks=p.checks,p.checks=Ke,c.compoundCount++,$e}},{name:"descendant",separator:!0,regex:Po.descendant,populate:function(c,p){if(null==c.currentSubject){var b={checks:[]},A={checks:[]};return b.checks.push({type:16,ancestor:c[c.length-1],descendant:A}),Fc(c,0,b),c.compoundCount++,A}if(c.currentSubject===p){var M={checks:[]},ne={checks:[]},X={checks:[]},fe={checks:[]},be={checks:[]};return M.checks.push({type:19,left:c[c.length-1],right:ne,subject:X}),X.checks=p.checks,p.checks=[{type:20}],be.checks.push({type:20}),ne.checks.push({type:18,ancestor:be,descendant:fe}),Fc(c,0,M),c.currentSubject=X,c.compoundCount++,fe}var Ge={checks:[]},$e={checks:[]},Ke=[{type:18,ancestor:Ge,descendant:$e}];return Ge.checks=p.checks,p.checks=Ke,c.compoundCount++,$e}},{name:"subject",modifier:!0,regex:Po.subject,populate:function(c,p){if(null!=c.currentSubject&&c.currentSubject!==p)return we("Redefinition of subject in selector `"+c.toString()+"`"),!1;c.currentSubject=p;var A=c[c.length-1].checks[0],E=null==A?null:A.type;11===E?A.type=13:10===E&&(A.type=14,A.node=A.nodes[1],A.neighbor=A.nodes[0],A.nodes=null)}}];tf.forEach(function(g){return g.regexObj=new RegExp("^"+g.regex)});var Ig=function(c){for(var p,b,A,E=0;E<tf.length;E++){var M=tf[E],U=M.name,ne=c.match(M.regexObj);if(null!=ne){b=ne,p=M,A=U,c=c.substring(ne[0].length);break}}return{expr:p,match:b,name:A,remaining:c}},sh={parse:function(c){var p=this,b=p.inputText=c,A=p[0]={checks:[]};for(p.length=1,b=function(c){var p=c.match(/^\s+/);return p&&(c=c.substring(p[0].length)),c}(b);;){var E=Ig(b);if(null==E.expr)return we("The selector `"+c+"`is invalid"),!1;var M=E.match.slice(1),U=E.expr.populate(p,A,M);if(!1===U)return!1;if(null!=U&&(A=U),(b=E.remaining).match(/^\s*$/))break}var ne=p[p.length-1];null!=p.currentSubject&&(ne.subject=p.currentSubject),ne.edgeCount=p.edgeCount,ne.compoundCount=p.compoundCount;for(var X=0;X<p.length;X++){var fe=p[X];if(fe.compoundCount>0&&fe.edgeCount>0)return we("The selector `"+c+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(fe.edgeCount>1)return we("The selector `"+c+"` is invalid because it uses multiple edge selectors"),!1;1===fe.edgeCount&&we("The selector `"+c+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var c=function(fe){return fe??""},p=function(fe){return Ct(fe)?'"'+fe+'"':c(fe)},b=function(fe){return" "+fe+" "},E=function(fe,be){return fe.checks.reduce(function(Ge,$e,Ke){return Ge+(be===fe&&0===Ke?"$":"")+function(fe,be){var $e=fe.value;switch(fe.type){case 0:var Ke=c($e);return Ke.substring(0,Ke.length-1);case 3:return"["+fe.field+b(c(fe.operator))+p($e)+"]";case 5:var $t=fe.field;return"["+c(fe.operator)+$t+"]";case 4:return"["+fe.field+"]";case 6:return"[["+fe.field+b(c(fe.operator))+p($e)+"]]";case 7:return $e;case 8:return"#"+$e;case 9:return"."+$e;case 17:case 15:return E(fe.parent,be)+b(">")+E(fe.child,be);case 18:case 16:return E(fe.ancestor,be)+" "+E(fe.descendant,be);case 19:var En=E(fe.left,be),hn=E(fe.subject,be),Mn=E(fe.right,be);return En+(En.length>0?" ":"")+hn+Mn;case 20:return""}}($e,be)},"")},M="",U=0;U<this.length;U++){var ne=this[U];M+=E(ne,ne.subject),this.length>1&&U<this.length-1&&(M+=", ")}return this.toStringCache=M,M}},br=function(c,p,b){var A,ne,X,E=Ct(c),M=en(c),U=Ct(b),fe=!1,be=!1,Ge=!1;switch(p.indexOf("!")>=0&&(p=p.replace("!",""),be=!0),p.indexOf("@")>=0&&(p=p.replace("@",""),fe=!0),(E||U||fe)&&(ne=E||M?""+c:"",X=""+b),fe&&(c=ne=ne.toLowerCase(),b=X=X.toLowerCase()),p){case"*=":A=ne.indexOf(X)>=0;break;case"$=":A=ne.indexOf(X,ne.length-X.length)>=0;break;case"^=":A=0===ne.indexOf(X);break;case"=":A=c===b;break;case">":Ge=!0,A=c>b;break;case">=":Ge=!0,A=c>=b;break;case"<":Ge=!0,A=c<b;break;case"<=":Ge=!0,A=c<=b;break;default:A=!1}return be&&(null!=c||!Ge)&&(A=!A),A},vn=function(c,p){return c.data(p)},Xo=[],zo=function(c,p){return c.checks.every(function(b){return Xo[b.type](b,p)})};Xo[0]=function(g,c){var p=g.value;return"*"===p||p===c.group()},Xo[7]=function(g,c){return function(c,p){return na[c](p)}(g.value,c)},Xo[8]=function(g,c){var p=g.value;return c.id()===p},Xo[9]=function(g,c){return c.hasClass(g.value)},Xo[6]=function(g,c){var b=g.operator,A=g.value;return br(function(c,p){return c[p]()}(c,g.field),b,A)},Xo[3]=function(g,c){var b=g.operator,A=g.value;return br(vn(c,g.field),b,A)},Xo[5]=function(g,c){var b=g.operator;return function(c,p){switch(p){case"?":return!!c;case"!":return!c;case"^":return void 0===c}}(vn(c,g.field),b)},Xo[4]=function(g,c){return function(c){return void 0!==c}(vn(c,g.field))},Xo[10]=function(g,c){var p=g.nodes[0],b=g.nodes[1],A=c.source(),E=c.target();return zo(p,A)&&zo(b,E)||zo(b,A)&&zo(p,E)},Xo[14]=function(g,c){return zo(g.node,c)&&c.neighborhood().some(function(p){return p.isNode()&&zo(g.neighbor,p)})},Xo[11]=function(g,c){return zo(g.source,c.source())&&zo(g.target,c.target())},Xo[12]=function(g,c){return zo(g.source,c)&&c.outgoers().some(function(p){return p.isNode()&&zo(g.target,p)})},Xo[13]=function(g,c){return zo(g.target,c)&&c.incomers().some(function(p){return p.isNode()&&zo(g.source,p)})},Xo[15]=function(g,c){return zo(g.child,c)&&zo(g.parent,c.parent())},Xo[17]=function(g,c){return zo(g.parent,c)&&c.children().some(function(p){return zo(g.child,p)})},Xo[16]=function(g,c){return zo(g.descendant,c)&&c.ancestors().some(function(p){return zo(g.ancestor,p)})},Xo[18]=function(g,c){return zo(g.ancestor,c)&&c.descendants().some(function(p){return zo(g.descendant,p)})},Xo[19]=function(g,c){return zo(g.subject,c)&&zo(g.left,c)&&zo(g.right,c)},Xo[20]=function(){return!0},Xo[1]=function(g,c){return g.value.has(c)},Xo[2]=function(g,c){return(0,g.value)(c)};var Sg={matches:function(c){for(var b=0;b<this.length;b++)if(zo(this[b],c))return!0;return!1},filter:function(c){var p=this;if(1===p.length&&1===p[0].checks.length&&8===p[0].checks[0].type)return c.getElementById(p[0].checks[0].value).collection();var b=function(E){for(var M=0;M<p.length;M++)if(zo(p[M],E))return!0;return!1};return null==p.text()&&(b=function(){return!0}),c.filter(b)}},Np=function(c){this.inputText=c,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==c||Ct(c)&&c.match(/^\s*$/)||(xt(c)?this.addQuery({checks:[{type:1,value:c.collection()}]}):rn(c)?this.addQuery({checks:[{type:2,value:c}]}):Ct(c)?this.parse(c)||(this.invalid=!0):We("A selector must be created from a string; found "))},Es=Np.prototype;[sh,Sg].forEach(function(g){return nr(Es,g)}),Es.text=function(){return this.inputText},Es.size=function(){return this.length},Es.eq=function(g){return this[g]},Es.sameText=function(g){return!this.invalid&&!g.invalid&&this.text()===g.text()},Es.addQuery=function(g){this[this.length++]=g},Es.selector=Es.toString;var qu={allAre:function(c){var p=new Np(c);return this.every(function(b){return p.matches(b)})},is:function(c){var p=new Np(c);return this.some(function(b){return p.matches(b)})},some:function(c,p){for(var b=0;b<this.length;b++)if(p?c.apply(p,[this[b],b,this]):c(this[b],b,this))return!0;return!1},every:function(c,p){for(var b=0;b<this.length;b++)if(!(p?c.apply(p,[this[b],b,this]):c(this[b],b,this)))return!1;return!0},same:function(c){if(this===c)return!0;c=this.cy().collection(c);var p=this.length;return p===c.length&&(1===p?this[0]===c[0]:this.every(function(A){return c.hasElementWithId(A.id())}))},anySame:function(c){return c=this.cy().collection(c),this.some(function(p){return c.hasElementWithId(p.id())})},allAreNeighbors:function(c){c=this.cy().collection(c);var p=this.neighborhood();return c.every(function(b){return p.hasElementWithId(b.id())})},contains:function(c){c=this.cy().collection(c);var p=this;return c.every(function(b){return p.hasElementWithId(b.id())})}};qu.allAreNeighbours=qu.allAreNeighbors,qu.has=qu.contains,qu.equal=qu.equals=qu.same;var Rf,Bp,Nl=function(c,p){return function(A,E,M,U){var fe,ne=A,X=this;if(null==ne?fe="":xt(ne)&&1===ne.length&&(fe=ne.id()),1===X.length&&fe){var be=X[0]._private,Ge=be.traversalCache=be.traversalCache||{},$e=Ge[p]=Ge[p]||[],Ke=ke(fe);return $e[Ke]||($e[Ke]=c.call(X,A,E,M,U))}return c.call(X,A,E,M,U)}},Yo={parent:function(c){var p=[];if(1===this.length){var b=this[0]._private.parent;if(b)return b}for(var A=0;A<this.length;A++){var M=this[A]._private.parent;M&&p.push(M)}return this.spawn(p,!0).filter(c)},parents:function(c){for(var p=[],b=this.parent();b.nonempty();){for(var A=0;A<b.length;A++)p.push(b[A]);b=b.parent()}return this.spawn(p,!0).filter(c)},commonAncestors:function(c){for(var p,b=0;b<this.length;b++){var E=this[b].parents();p=(p=p||E).intersect(E)}return p.filter(c)},orphans:function(c){return this.stdFilter(function(p){return p.isOrphan()}).filter(c)},nonorphans:function(c){return this.stdFilter(function(p){return p.isChild()}).filter(c)},children:Nl(function(g){for(var c=[],p=0;p<this.length;p++)for(var A=this[p]._private.children,E=0;E<A.length;E++)c.push(A[E]);return this.spawn(c,!0).filter(g)},"children"),siblings:function(c){return this.parent().children().not(this).filter(c)},isParent:function(){var c=this[0];if(c)return c.isNode()&&0!==c._private.children.length},isChildless:function(){var c=this[0];if(c)return c.isNode()&&0===c._private.children.length},isChild:function(){var c=this[0];if(c)return c.isNode()&&null!=c._private.parent},isOrphan:function(){var c=this[0];if(c)return c.isNode()&&null==c._private.parent},descendants:function(c){var p=[];return function b(A){for(var E=0;E<A.length;E++){var M=A[E];p.push(M),M.children().nonempty()&&b(M.children())}}(this.children()),this.spawn(p,!0).filter(c)}};function eu(g,c,p,b){for(var A=[],E=new wr,U=g.cy().hasCompoundNodes(),ne=0;ne<g.length;ne++){var X=g[ne];p?A.push(X):U&&b(A,E,X)}for(;A.length>0;){var fe=A.shift();c(fe),E.add(fe.id()),U&&b(A,E,fe)}return g}function bs(g,c,p){if(p.isParent())for(var b=p._private.children,A=0;A<b.length;A++){var E=b[A];c.has(E.id())||g.push(E)}}function Md(g,c,p){if(p.isChild()){var b=p._private.parent;c.has(b.id())||g.push(b)}}function Au(g,c,p){Md(g,c,p),bs(g,c,p)}Yo.forEachDown=function(g){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return eu(this,g,c,bs)},Yo.forEachUp=function(g){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return eu(this,g,c,Md)},Yo.forEachUpAndDown=function(g){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return eu(this,g,c,Au)},Yo.ancestors=Yo.parents,Rf=Bp={data:Sa.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Sa.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Sa.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Sa.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Sa.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Sa.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var c=this[0];if(c)return c._private.data.id}},Rf.attr=Rf.data,Rf.removeAttr=Rf.removeData;var Of=Bp,cp={};function Wh(g){return function(c){var p=this;if(void 0===c&&(c=!0),0===p.length);else if(p.isNode()&&!p.removed()){for(var b=0,A=p[0],E=A._private.edges,M=0;M<E.length;M++){var U=E[M];!c&&U.isLoop()||(b+=g(A,U))}return b}}}function ga(g,c){return function(p){for(var b,A=this.nodes(),E=0;E<A.length;E++){var U=A[E][g](p);void 0!==U&&(void 0===b||c(U,b))&&(b=U)}return b}}nr(cp,{degree:Wh(function(g,c){return c.source().same(c.target())?2:1}),indegree:Wh(function(g,c){return c.target().same(g)?1:0}),outdegree:Wh(function(g,c){return c.source().same(g)?1:0})}),nr(cp,{minDegree:ga("degree",function(g,c){return g<c}),maxDegree:ga("degree",function(g,c){return g>c}),minIndegree:ga("indegree",function(g,c){return g<c}),maxIndegree:ga("indegree",function(g,c){return g>c}),minOutdegree:ga("outdegree",function(g,c){return g<c}),maxOutdegree:ga("outdegree",function(g,c){return g>c})}),nr(cp,{totalDegree:function(c){for(var p=0,b=this.nodes(),A=0;A<b.length;A++)p+=b[A].degree(c);return p}});var Nc,vm,Ba=function(c,p,b){for(var A=0;A<c.length;A++){var E=c[A];if(!E.locked()){var M=E._private.position,U={x:null!=p.x?p.x-M.x:0,y:null!=p.y?p.y-M.y:0};E.isParent()&&!(0===U.x&&0===U.y)&&E.children().shift(U,b),E.dirtyBoundingBoxCache()}}},Kv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(c){c.updateCompoundBounds()},beforeSet:function(c,p){Ba(c,p,!1)},onSet:function(c){c.dirtyCompoundBoundsCache()},canSet:function(c){return!c.locked()}};Nc=vm={position:Sa.data(Kv),silentPosition:Sa.data(nr({},Kv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(c,p){Ba(c,p,!0)},onSet:function(c){c.dirtyCompoundBoundsCache()}})),positions:function(c,p){if(Ht(c))p?this.silentPosition(c):this.position(c);else if(rn(c)){var b=c,A=this.cy();A.startBatch();for(var E=0;E<this.length;E++){var U,M=this[E];(U=b(M,E))&&(p?M.silentPosition(U):M.position(U))}A.endBatch()}return this},silentPositions:function(c){return this.positions(c,!0)},shift:function(c,p,b){var A;if(Ht(c)?(A={x:en(c.x)?c.x:0,y:en(c.y)?c.y:0},b=p):Ct(c)&&en(p)&&((A={x:0,y:0})[c]=p),null!=A){var E=this.cy();E.startBatch();for(var M=0;M<this.length;M++){var U=this[M];if(!(E.hasCompoundNodes()&&U.isChild()&&U.ancestors().anySame(this))){var ne=U.position(),X={x:ne.x+A.x,y:ne.y+A.y};b?U.silentPosition(X):U.position(X)}}E.endBatch()}return this},silentShift:function(c,p){return Ht(c)?this.shift(c,!0):Ct(c)&&en(p)&&this.shift(c,p,!0),this},renderedPosition:function(c,p){var b=this[0],A=this.cy(),E=A.zoom(),M=A.pan(),U=Ht(c)?c:void 0,ne=void 0!==U||void 0!==p&&Ct(c);if(b&&b.isNode()){if(!ne){var be=b.position();return U=Pr(be,E,M),void 0===c?U:U[c]}for(var X=0;X<this.length;X++){var fe=this[X];void 0!==p?fe.position(c,(p-M[c])/E):void 0!==U&&fe.position(Ys(U,E,M))}}else if(!ne)return;return this},relativePosition:function(c,p){var b=this[0],A=this.cy(),E=Ht(c)?c:void 0,M=void 0!==E||void 0!==p&&Ct(c),U=A.hasCompoundNodes();if(b&&b.isNode()){if(!M){var Ke=b.position(),ot=U?b.parent():null,_t=ot&&ot.length>0;_t&&(ot=ot[0]);var $t=_t?ot.position():{x:0,y:0};return E={x:Ke.x-$t.x,y:Ke.y-$t.y},void 0===c?E:E[c]}for(var ne=0;ne<this.length;ne++){var X=this[ne],fe=U?X.parent():null,be=fe&&fe.length>0;be&&(fe=fe[0]);var $e=be?fe.position():{x:0,y:0};void 0!==p?X.position(c,p+$e[c]):void 0!==E&&X.position({x:E.x+$e.x,y:E.y+$e.y})}}else if(!M)return;return this}},Nc.modelPosition=Nc.point=Nc.position,Nc.modelPositions=Nc.points=Nc.positions,Nc.renderedPoint=Nc.renderedPosition,Nc.relativePoint=Nc.relativePosition;var Bs,Bl,_m=vm;Bs=Bl={},Bl.renderedBoundingBox=function(g){var c=this.boundingBox(g),p=this.cy(),b=p.zoom(),A=p.pan(),E=c.x1*b+A.x,M=c.x2*b+A.x,U=c.y1*b+A.y,ne=c.y2*b+A.y;return{x1:E,x2:M,y1:U,y2:ne,w:M-E,h:ne-U}},Bl.dirtyCompoundBoundsCache=function(){var g=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();return c.styleEnabled()&&c.hasCompoundNodes()?(this.forEachUp(function(p){if(p.isParent()){var b=p._private;b.compoundBoundsClean=!1,b.bbCache=null,g||p.emitAndNotify("bounds")}}),this):this},Bl.updateCompoundBounds=function(){var g=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();if(!c.styleEnabled()||!c.hasCompoundNodes())return this;if(!g&&c.batching())return this;function p(M){if(M.isParent()){var U=M._private,ne=M.children(),X="include"===M.pstyle("compound-sizing-wrt-labels").value,fe={width:{val:M.pstyle("min-width").pfValue,left:M.pstyle("min-width-bias-left"),right:M.pstyle("min-width-bias-right")},height:{val:M.pstyle("min-height").pfValue,top:M.pstyle("min-height-bias-top"),bottom:M.pstyle("min-height-bias-bottom")}},be=ne.boundingBox({includeLabels:X,includeOverlays:!1,useCache:!1}),Ge=U.position;(0===be.w||0===be.h)&&((be={w:M.pstyle("width").pfValue,h:M.pstyle("height").pfValue}).x1=Ge.x-be.w/2,be.x2=Ge.x+be.w/2,be.y1=Ge.y-be.h/2,be.y2=Ge.y+be.h/2);var ot=fe.width.left.value;"px"===fe.width.left.units&&fe.width.val>0&&(ot=100*ot/fe.width.val);var _t=fe.width.right.value;"px"===fe.width.right.units&&fe.width.val>0&&(_t=100*_t/fe.width.val);var Et=fe.height.top.value;"px"===fe.height.top.units&&fe.height.val>0&&(Et=100*Et/fe.height.val);var $t=fe.height.bottom.value;"px"===fe.height.bottom.units&&fe.height.val>0&&($t=100*$t/fe.height.val);var Ut=$e(fe.width.val-be.w,ot,_t),un=Ut.biasDiff,In=Ut.biasComplementDiff,En=$e(fe.height.val-be.h,Et,$t),hn=En.biasDiff,Mn=En.biasComplementDiff;U.autoPadding=function Ke(mn,Fn,Rn,Xt){if("%"!==Rn.units)return"px"===Rn.units?Rn.pfValue:0;switch(Xt){case"width":return mn>0?Rn.pfValue*mn:0;case"height":return Fn>0?Rn.pfValue*Fn:0;case"average":return mn>0&&Fn>0?Rn.pfValue*(mn+Fn)/2:0;case"min":return mn>0&&Fn>0?mn>Fn?Rn.pfValue*Fn:Rn.pfValue*mn:0;case"max":return mn>0&&Fn>0?mn>Fn?Rn.pfValue*mn:Rn.pfValue*Fn:0;default:return 0}}(be.w,be.h,M.pstyle("padding"),M.pstyle("padding-relative-to").value),U.autoWidth=Math.max(be.w,fe.width.val),Ge.x=(-un+be.x1+be.x2+In)/2,U.autoHeight=Math.max(be.h,fe.height.val),Ge.y=(-hn+be.y1+be.y2+Mn)/2}function $e(mn,Fn,Rn){var Xt=0,Nn=0,xn=Fn+Rn;return mn>0&&xn>0&&(Xt=Fn/xn*mn,Nn=Rn/xn*mn),{biasDiff:Xt,biasComplementDiff:Nn}}}for(var b=0;b<this.length;b++){var A=this[b],E=A._private;(!E.compoundBoundsClean||g)&&(p(A),c.batching()||(E.compoundBoundsClean=!0))}return this};var Xu=function(c){return c===1/0||c===-1/0?0:c},yl=function(c,p,b,A,E){A-p==0||E-b==0||null==p||null==b||null==A||null==E||(c.x1=p<c.x1?p:c.x1,c.x2=A>c.x2?A:c.x2,c.y1=b<c.y1?b:c.y1,c.y2=E>c.y2?E:c.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1)},tu=function(c,p){return null==p?c:yl(c,p.x1,p.y1,p.x2,p.y2)},ku=function(c,p,b){return Ei(c,p,b)},Ff=function(c,p,b){if(!p.cy().headless()){var ne,X,A=p._private,E=A.rstyle,M=E.arrowWidth/2;if("none"!==p.pstyle(b+"-arrow-shape").value){"source"===b?(ne=E.srcX,X=E.srcY):"target"===b?(ne=E.tgtX,X=E.tgtY):(ne=E.midX,X=E.midY);var fe=A.arrowBounds=A.arrowBounds||{},be=fe[b]=fe[b]||{};be.x1=ne-M,be.y1=X-M,be.x2=ne+M,be.y2=X+M,be.w=be.x2-be.x1,be.h=be.y2-be.y1,Mf(be,1),yl(c,be.x1,be.y1,be.x2,be.y2)}}},yc=function(c,p,b){if(!p.cy().headless()){var A,E=p._private,M=E.rstyle;if(p.pstyle((A=b?b+"-":"")+"label").strValue){var Rn,Xt,Nn,xn,ne=p.pstyle("text-halign"),X=p.pstyle("text-valign"),fe=ku(M,"labelWidth",b),be=ku(M,"labelHeight",b),Ge=ku(M,"labelX",b),$e=ku(M,"labelY",b),Ke=p.pstyle(A+"text-margin-x").pfValue,ot=p.pstyle(A+"text-margin-y").pfValue,_t=p.isEdge(),Et=p.pstyle(A+"text-rotation"),$t=p.pstyle("text-outline-width").pfValue,un=p.pstyle("text-border-width").pfValue/2,In=p.pstyle("text-background-padding").pfValue,hn=be,Mn=fe,mn=Mn/2,Fn=hn/2;if(_t)Rn=Ge-mn,Xt=Ge+mn,Nn=$e-Fn,xn=$e+Fn;else{switch(ne.value){case"left":Rn=Ge-Mn,Xt=Ge;break;case"center":Rn=Ge-mn,Xt=Ge+mn;break;case"right":Rn=Ge,Xt=Ge+Mn}switch(X.value){case"top":Nn=$e-hn,xn=$e;break;case"center":Nn=$e-Fn,xn=$e+Fn;break;case"bottom":Nn=$e,xn=$e+hn}}Rn+=Ke-Math.max($t,un)-In-2,Xt+=Ke+Math.max($t,un)+In+2,Nn+=ot-Math.max($t,un)-In-2,xn+=ot+Math.max($t,un)+In+2;var gi=b||"main",$n=E.labelBounds,ai=$n[gi]=$n[gi]||{};ai.x1=Rn,ai.y1=Nn,ai.x2=Xt,ai.y2=xn,ai.w=Xt-Rn,ai.h=xn-Nn;var wi=_t&&"autorotate"===Et.strValue;if(wi||null!=Et.pfValue&&0!==Et.pfValue){var er=wi?ku(E.rstyle,"labelAngle",b):Et.pfValue,xi=Math.cos(er),Ki=Math.sin(er),hr=(Rn+Xt)/2,Ar=(Nn+xn)/2;if(!_t){switch(ne.value){case"left":hr=Xt;break;case"right":hr=Rn}switch(X.value){case"top":Ar=xn;break;case"bottom":Ar=Nn}}var mr=function(sa,Cs){return{x:(sa-=hr)*xi-(Cs-=Ar)*Ki+hr,y:sa*Ki+Cs*xi+Ar}},pr=mr(Rn,Nn),Si=mr(Rn,xn),sr=mr(Xt,Nn),Sr=mr(Xt,xn);Rn=Math.min(pr.x,Si.x,sr.x,Sr.x),Xt=Math.max(pr.x,Si.x,sr.x,Sr.x),Nn=Math.min(pr.y,Si.y,sr.y,Sr.y),xn=Math.max(pr.y,Si.y,sr.y,Sr.y)}var ts=gi+"Rot",ps=$n[ts]=$n[ts]||{};ps.x1=Rn,ps.y1=Nn,ps.x2=Xt,ps.y2=xn,ps.w=Xt-Rn,ps.h=xn-Nn,yl(c,Rn,Nn,Xt,xn),yl(E.labelBounds.all,Rn,Nn,Xt,xn)}return c}},nu=function(c){var p=0,b=function(M){return(M?1:0)<<p++},A=0;return A+=b(c.incudeNodes),A+=b(c.includeEdges),A+=b(c.includeLabels),A+=b(c.includeMainLabels),A+=b(c.includeSourceLabels),(A+=b(c.includeTargetLabels))+b(c.includeOverlays)},Zv=function(c){if(c.isEdge()){var p=c.source().position(),b=c.target().position(),A=function(M){return Math.round(M)};return function(c,p){var b={value:0,done:!1},A=0,E=c.length;return he({next:function(){return A<E?b.value=c[A++]:b.done=!0,b}},void 0)}([A(p.x),A(p.y),A(b.x),A(b.y)])}return 0},Qv=function(c,p){var A,b=c._private,E=c.isEdge(),U=(null==p?bm:nu(p))===bm,ne=Zv(c),X=b.bbCachePosKey===ne,fe=p.useCache&&X,be=function(ot){return null==ot._private.bbCache||ot._private.styleDirty};if(!fe||be(c)||E&&be(c.source())||be(c.target())?(X||c.recalculateRenderedStyle(fe),A=function(c,p){var fe,be,Ge,$e,Ke,ot,b=c._private.cy,A=b.styleEnabled(),E=b.headless(),M=Gu(),U=c._private,ne=c.isNode(),X=c.isEdge(),_t=U.rstyle,Et=ne&&A?c.pstyle("bounds-expansion").pfValue:[0],$t=function(ia){return"none"!==ia.pstyle("display").value},Ut=!A||$t(c)&&(!X||$t(c.source())&&$t(c.target()));if(Ut){var In=0;A&&p.includeOverlays&&0!==c.pstyle("overlay-opacity").value&&(In=c.pstyle("overlay-padding").value);var hn=0;A&&p.includeUnderlays&&0!==c.pstyle("underlay-opacity").value&&(hn=c.pstyle("underlay-padding").value);var Mn=Math.max(In,hn),Fn=0;if(A&&(Fn=c.pstyle("width").pfValue/2),ne&&p.includeNodes){var Rn=c.position();Ke=Rn.x,ot=Rn.y;var Nn=c.outerWidth()/2,gi=c.outerHeight()/2;yl(M,fe=Ke-Nn,Ge=ot-gi,be=Ke+Nn,$e=ot+gi)}else if(X&&p.includeEdges)if(A&&!E){var $n=c.pstyle("curve-style").strValue;if(fe=Math.min(_t.srcX,_t.midX,_t.tgtX),be=Math.max(_t.srcX,_t.midX,_t.tgtX),Ge=Math.min(_t.srcY,_t.midY,_t.tgtY),$e=Math.max(_t.srcY,_t.midY,_t.tgtY),yl(M,fe-=Fn,Ge-=Fn,be+=Fn,$e+=Fn),"haystack"===$n){var ai=_t.haystackPts;if(ai&&2===ai.length){if((fe=ai[0].x)>(be=ai[1].x)){var wi=fe;fe=be,be=wi}if((Ge=ai[0].y)>($e=ai[1].y)){var Pi=Ge;Ge=$e,$e=Pi}yl(M,fe-Fn,Ge-Fn,be+Fn,$e+Fn)}}else if("bezier"===$n||"unbundled-bezier"===$n||"segments"===$n||"taxi"===$n){var er;switch($n){case"bezier":case"unbundled-bezier":er=_t.bezierPts;break;case"segments":case"taxi":er=_t.linePts}if(null!=er)for(var xi=0;xi<er.length;xi++){var Ki=er[xi];yl(M,fe=Ki.x-Fn,Ge=Ki.y-Fn,be=Ki.x+Fn,$e=Ki.y+Fn)}}}else{var Ar=c.source().position(),pr=c.target().position();if((fe=Ar.x)>(be=pr.x)){var Si=fe;fe=be,be=Si}if((Ge=Ar.y)>($e=pr.y)){var sr=Ge;Ge=$e,$e=sr}yl(M,fe-=Fn,Ge-=Fn,be+=Fn,$e+=Fn)}if(A&&p.includeEdges&&X&&(Ff(M,c,"mid-source"),Ff(M,c,"mid-target"),Ff(M,c,"source"),Ff(M,c,"target")),A&&"yes"===c.pstyle("ghost").value){var ts=c.pstyle("ghost-offset-x").pfValue,ps=c.pstyle("ghost-offset-y").pfValue;yl(M,M.x1+ts,M.y1+ps,M.x2+ts,M.y2+ps)}var Xs=U.bodyBounds=U.bodyBounds||{};vg(Xs,M),lp(Xs,Et),Mf(Xs,1),A&&yl(M,(fe=M.x1)-Mn,(Ge=M.y1)-Mn,(be=M.x2)+Mn,($e=M.y2)+Mn);var sa=U.overlayBounds=U.overlayBounds||{};vg(sa,M),lp(sa,Et),Mf(sa,1);var Cs=U.labelBounds=U.labelBounds||{};null!=Cs.all?function(c){c.x1=1/0,c.y1=1/0,c.x2=-1/0,c.y2=-1/0,c.w=0,c.h=0}(Cs.all):Cs.all=Gu(),A&&p.includeLabels&&(p.includeMainLabels&&yc(M,c,null),X&&(p.includeSourceLabels&&yc(M,c,"source"),p.includeTargetLabels&&yc(M,c,"target")))}return M.x1=Xu(M.x1),M.y1=Xu(M.y1),M.x2=Xu(M.x2),M.y2=Xu(M.y2),M.w=Xu(M.x2-M.x1),M.h=Xu(M.y2-M.y1),M.w>0&&M.h>0&&Ut&&(lp(M,Et),Mf(M,1)),M}(c,ym),b.bbCache=A,b.bbCachePosKey=ne):A=b.bbCache,!U){var $e=c.isNode();A=Gu(),(p.includeNodes&&$e||p.includeEdges&&!$e)&&tu(A,p.includeOverlays?b.overlayBounds:b.bodyBounds),p.includeLabels&&(p.includeMainLabels&&(!E||p.includeSourceLabels&&p.includeTargetLabels)?tu(A,b.labelBounds.all):(p.includeMainLabels&&tu(A,b.labelBounds.mainRot),p.includeSourceLabels&&tu(A,b.labelBounds.sourceRot),p.includeTargetLabels&&tu(A,b.labelBounds.targetRot))),A.w=A.x2-A.x1,A.h=A.y2-A.y1}return A},ym={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},bm=nu(ym),dp=jn(ym);Bl.boundingBox=function(g){var c;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==g&&void 0!==g.useCache&&!0!==g.useCache){c=Gu();var p=dp(g=g||ym),b=this;if(b.cy().styleEnabled())for(var M=0;M<b.length;M++){var U=b[M],ne=U._private,X=Zv(U);U.recalculateRenderedStyle(p.useCache&&ne.bbCachePosKey===X&&!ne.styleDirty)}this.updateCompoundBounds(!g.useCache);for(var Ge=0;Ge<b.length;Ge++)tu(c,Qv(b[Ge],p))}else g=void 0===g?ym:dp(g),c=Qv(this[0],g);return c.x1=Xu(c.x1),c.y1=Xu(c.y1),c.x2=Xu(c.x2),c.y2=Xu(c.y2),c.w=Xu(c.x2-c.x1),c.h=Xu(c.y2-c.y1),c},Bl.dirtyBoundingBoxCache=function(){for(var g=0;g<this.length;g++){var c=this[g]._private;c.bbCache=null,c.bbCachePosKey=null,c.bodyBounds=null,c.overlayBounds=null,c.labelBounds.all=null,c.labelBounds.source=null,c.labelBounds.target=null,c.labelBounds.main=null,c.labelBounds.sourceRot=null,c.labelBounds.targetRot=null,c.labelBounds.mainRot=null,c.arrowBounds.source=null,c.arrowBounds.target=null,c.arrowBounds["mid-source"]=null,c.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Bl.boundingBoxAt=function(g){var c=this.nodes(),p=this.cy(),b=p.hasCompoundNodes(),A=p.collection();if(b&&(A=c.filter(function(X){return X.isParent()}),c=c.not(A)),Ht(g)){var E=g;g=function(){return E}}p.startBatch(),c.forEach(function(fe,be){return fe._private.bbAtOldPos=g(fe,be)}).silentPositions(g),b&&(A.dirtyCompoundBoundsCache(),A.dirtyBoundingBoxCache(),A.updateCompoundBounds(!0));var ne=function(c){return{x1:c.x1,x2:c.x2,w:c.w,y1:c.y1,y2:c.y2,h:c.h}}(this.boundingBox({useCache:!1}));return c.silentPositions(function(fe){return fe._private.bbAtOldPos}),b&&(A.dirtyCompoundBoundsCache(),A.dirtyBoundingBoxCache(),A.updateCompoundBounds(!0)),p.endBatch(),ne},Bs.boundingbox=Bs.bb=Bs.boundingBox,Bs.renderedBoundingbox=Bs.renderedBoundingBox;var fp,Nf,av=Bl;fp=Nf={};var Cm=function(c){c.uppercaseName=rt(c.name),c.autoName="auto"+c.uppercaseName,c.labelName="label"+c.uppercaseName,c.outerName="outer"+c.uppercaseName,c.uppercaseOuterName=rt(c.outerName),fp[c.name]=function(){var b=this[0],A=b._private;if(b){if(A.cy._private.styleEnabled){if(b.isParent())return b.updateCompoundBounds(),A[c.autoName]||0;var U=b.pstyle(c.name);return"label"===U.strValue?(b.recalculateRenderedStyle(),A.rstyle[c.labelName]||0):U.pfValue}return 1}},fp["outer"+c.uppercaseName]=function(){var b=this[0];if(b)return b._private.cy._private.styleEnabled?b[c.name]()+b.pstyle("border-width").pfValue+2*b.padding():1},fp["rendered"+c.uppercaseName]=function(){var b=this[0];if(b)return b[c.name]()*this.cy().zoom()},fp["rendered"+c.uppercaseOuterName]=function(){var b=this[0];if(b)return b[c.outerName]()*this.cy().zoom()}};Cm({name:"width"}),Cm({name:"height"}),Nf.padding=function(){var g=this[0],c=g._private;return g.isParent()?(g.updateCompoundBounds(),void 0!==c.autoPadding?c.autoPadding:g.pstyle("padding").pfValue):g.pstyle("padding").pfValue},Nf.paddedHeight=function(){var g=this[0];return g.height()+2*g.padding()},Nf.paddedWidth=function(){var g=this[0];return g.width()+2*g.padding()};var Dd=Nf,Jv={controlPoints:{get:function(c){return c.renderer().getControlPoints(c)},mult:!0},segmentPoints:{get:function(c){return c.renderer().getSegmentPoints(c)},mult:!0},sourceEndpoint:{get:function(c){return c.renderer().getSourceEndpoint(c)}},targetEndpoint:{get:function(c){return c.renderer().getTargetEndpoint(c)}},midpoint:{get:function(c){return c.renderer().getEdgeMidpoint(c)}}},e_=Object.keys(Jv).reduce(function(g,c){var p=Jv[c],b=function(c){return"rendered"+c[0].toUpperCase()+c.substr(1)}(c);return g[c]=function(){return function(c,p){if(c.isEdge())return p(c)}(this,p.get)},g[b]=p.mult?function(){return function(c,p){if(c.isEdge()){var b=c.cy(),A=b.pan(),E=b.zoom();return p(c).map(function(M){return Pr(M,E,A)})}}(this,p.get)}:function(){return function(c,p){if(c.isEdge()){var b=c.cy();return Pr(p(c),b.zoom(),b.pan())}}(this,p.get)},g},{}),xb=nr({},_m,av,Dd,e_),Tg=function(c,p){this.recycle(c,p)};function gu(){return!1}function zf(){return!0}Tg.prototype={instanceString:function(){return"event"},recycle:function(c,p){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=gu,null!=c&&c.preventDefault?(this.type=c.type,this.isDefaultPrevented=c.defaultPrevented?zf:gu):null!=c&&c.type?p=c:this.type=c,null!=p&&(this.originalEvent=p.originalEvent,this.type=null!=p.type?p.type:this.type,this.cy=p.cy,this.target=p.target,this.position=p.position,this.renderedPosition=p.renderedPosition,this.namespace=p.namespace,this.layout=p.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var b=this.position,A=this.cy.zoom(),E=this.cy.pan();this.renderedPosition={x:b.x*A+E.x,y:b.y*A+E.y}}this.timeStamp=c&&c.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=zf;var c=this.originalEvent;!c||c.preventDefault&&c.preventDefault()},stopPropagation:function(){this.isPropagationStopped=zf;var c=this.originalEvent;!c||c.stopPropagation&&c.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=zf,this.stopPropagation()},isDefaultPrevented:gu,isPropagationStopped:gu,isImmediatePropagationStopped:gu};var Pd=/^([^.]+)(\.(?:[^.]+))?$/,Ld={qualifierCompare:function(c,p){return c===p},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(c){return c},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},fd=Object.keys(Ld),jh={};function _h(){for(var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jh,c=arguments.length>1?arguments[1]:void 0,p=0;p<fd.length;p++){var b=fd[p];this[b]=g[b]||Ld[b]}this.context=c||this.context,this.listeners=[],this.emitting=0}var bl=_h.prototype,rf=function(c,p,b,A,E,M,U){rn(A)&&(E=A,A=null),U&&(M=null==M?U:nr({},M,U));for(var ne=Qt(b)?b:b.split(/\s+/),X=0;X<ne.length;X++){var fe=ne[X];if(!Oe(fe)){var be=fe.match(Pd);if(be&&!1===p(c,fe,be[1],be[2]?be[2]:null,A,E,M))break}}},ov=function(c,p){return c.addEventFields(c.context,p),new Tg(p.type,p)};bl.on=bl.addListener=function(g,c,p,b,A){return rf(this,function(E,M,U,ne,X,fe,be){rn(fe)&&E.listeners.push({event:M,callback:fe,type:U,namespace:ne,qualifier:X,conf:be})},g,c,p,b,A),this},bl.one=function(g,c,p,b){return this.on(g,c,p,b,{one:!0})},bl.removeListener=bl.off=function(g,c,p,b){var A=this;0!==this.emitting&&(this.listeners=function(c){return c.slice()}(this.listeners));for(var E=this.listeners,M=function(X){var fe=E[X];rf(A,function(be,Ge,$e,Ke,ot,_t){if((fe.type===$e||"*"===g)&&(!Ke&&".*"!==fe.namespace||fe.namespace===Ke)&&(!ot||be.qualifierCompare(fe.qualifier,ot))&&(!_t||fe.callback===_t))return E.splice(X,1),!1},g,c,p,b)},U=E.length-1;U>=0;U--)M(U);return this},bl.removeAllListeners=function(){return this.removeListener("*")},bl.emit=bl.trigger=function(g,c,p){var b=this.listeners,A=b.length;return this.emitting++,Qt(c)||(c=[c]),function(c,p,b){if(function(c){return"event"===on(c)}(b))p(c,b);else if(Ht(b))p(c,ov(c,b));else for(var A=Qt(b)?b:b.split(/\s+/),E=0;E<A.length;E++){var M=A[E];if(!Oe(M)){var U=M.match(Pd);U&&p(c,ov(c,{type:U[1],namespace:U[2]?U[2]:null,target:c.context}))}}}(this,function(E,M){null!=p&&(A=(b=[{event:M.event,type:M.type,namespace:M.namespace,callback:p}]).length);for(var U=function(fe){var be=b[fe];if(be.type===M.type&&(!be.namespace||be.namespace===M.namespace||".*"===be.namespace)&&E.eventMatches(E.context,be,M)){var Ge=[M];null!=c&&function(c,p){for(var b=0;b<p.length;b++)c.push(p[b])}(Ge,c),E.beforeEmit(E.context,be,M),be.conf&&be.conf.one&&(E.listeners=E.listeners.filter(function(ot){return ot!==be}));var $e=E.callbackContext(E.context,be,M),Ke=be.callback.apply($e,Ge);E.afterEmit(E.context,be,M),!1===Ke&&(M.stopPropagation(),M.preventDefault())}},ne=0;ne<A;ne++)U(ne);E.bubble(E.context)&&!M.isPropagationStopped()&&E.parent(E.context).emit(M,c)},g),this.emitting--,this};var mu={qualifierCompare:function(c,p){return null==c||null==p?null==c&&null==p:c.sameText(p)},eventMatches:function(c,p,b){var A=p.qualifier;return null==A||c!==b.target&&Jt(b.target)&&A.matches(b.target)},addEventFields:function(c,p){p.cy=c.cy(),p.target=c},callbackContext:function(c,p,b){return null!=p.qualifier?b.target:c},beforeEmit:function(c,p){p.conf&&p.conf.once&&p.conf.onceCollection.removeListener(p.event,p.qualifier,p.callback)},bubble:function(){return!0},parent:function(c){return c.isChild()?c.parent():c.cy()}},yh=function(c){return Ct(c)?new Np(c):c},Lo={createEmitter:function(){for(var c=0;c<this.length;c++){var p=this[c],b=p._private;b.emitter||(b.emitter=new _h(mu,p))}return this},emitter:function(){return this._private.emitter},on:function(c,p,b){for(var A=yh(p),E=0;E<this.length;E++)this[E].emitter().on(c,A,b);return this},removeListener:function(c,p,b){for(var A=yh(p),E=0;E<this.length;E++)this[E].emitter().removeListener(c,A,b);return this},removeAllListeners:function(){for(var c=0;c<this.length;c++)this[c].emitter().removeAllListeners();return this},one:function(c,p,b){for(var A=yh(p),E=0;E<this.length;E++)this[E].emitter().one(c,A,b);return this},once:function(c,p,b){for(var A=yh(p),E=0;E<this.length;E++)this[E].emitter().on(c,A,b,{once:!0,onceCollection:this})},emit:function(c,p){for(var b=0;b<this.length;b++)this[b].emitter().emit(c,p);return this},emitAndNotify:function(c,p){if(0!==this.length)return this.cy().notify(c,this),this.emit(c,p),this}};Sa.eventAliasesOn(Lo);var zc={nodes:function(c){return this.filter(function(p){return p.isNode()}).filter(c)},edges:function(c){return this.filter(function(p){return p.isEdge()}).filter(c)},byGroup:function(){for(var c=this.spawn(),p=this.spawn(),b=0;b<this.length;b++){var A=this[b];A.isNode()?c.push(A):p.push(A)}return{nodes:c,edges:p}},filter:function(c,p){if(void 0===c)return this;if(Ct(c)||xt(c))return new Np(c).filter(this);if(rn(c)){for(var b=this.spawn(),A=this,E=0;E<A.length;E++){var M=A[E];(p?c.apply(p,[M,E,A]):c(M,E,A))&&b.push(M)}return b}return this.spawn()},not:function(c){if(c){Ct(c)&&(c=this.filter(c));for(var p=this.spawn(),b=0;b<this.length;b++){var A=this[b];c.has(A)||p.push(A)}return p}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(c){if(Ct(c))return this.filter(c);for(var b=this.spawn(),M=this.length<c.length,U=M?this:c,ne=M?c:this,X=0;X<U.length;X++){var fe=U[X];ne.has(fe)&&b.push(fe)}return b},xor:function(c){var p=this._private.cy;Ct(c)&&(c=p.$(c));var b=this.spawn(),E=c,M=function(ne,X){for(var fe=0;fe<ne.length;fe++){var be=ne[fe];X.hasElementWithId(be._private.data.id)||b.push(be)}};return M(this,E),M(E,this),b},diff:function(c){var p=this._private.cy;Ct(c)&&(c=p.$(c));var b=this.spawn(),A=this.spawn(),E=this.spawn(),U=c,ne=function(fe,be,Ge){for(var $e=0;$e<fe.length;$e++){var Ke=fe[$e];be.hasElementWithId(Ke._private.data.id)?E.merge(Ke):Ge.push(Ke)}};return ne(this,U,b),ne(U,this,A),{left:b,right:A,both:E}},add:function(c){var p=this._private.cy;if(!c)return this;if(Ct(c)){var b=c;c=p.mutableElements().filter(b)}for(var A=this.spawnSelf(),E=0;E<c.length;E++){var M=c[E];!this.has(M)&&A.push(M)}return A},merge:function(c){var p=this._private,b=p.cy;if(!c)return this;if(c&&Ct(c)){var A=c;c=b.mutableElements().filter(A)}for(var E=p.map,M=0;M<c.length;M++){var U=c[M],ne=U._private.data.id;if(!E.has(ne)){var fe=this.length++;this[fe]=U,E.set(ne,{ele:U,index:fe})}}return this},unmergeAt:function(c){var b=this[c].id(),E=this._private.map;if(this[c]=void 0,E.delete(b),this.length>1&&c!==this.length-1){var U=this.length-1,ne=this[U],X=ne._private.data.id;this[U]=void 0,this[c]=ne,E.set(X,{ele:ne,index:c})}return this.length--,this},unmergeOne:function(c){var E=this._private.map.get((c=c[0])._private.data.id);return E?(this.unmergeAt(E.index),this):this},unmerge:function(c){var p=this._private.cy;if(!c)return this;if(c&&Ct(c)){var b=c;c=p.mutableElements().filter(b)}for(var A=0;A<c.length;A++)this.unmergeOne(c[A]);return this},unmergeBy:function(c){for(var p=this.length-1;p>=0;p--)c(this[p])&&this.unmergeAt(p);return this},map:function(c,p){for(var b=[],A=this,E=0;E<A.length;E++){var M=A[E],U=p?c.apply(p,[M,E,A]):c(M,E,A);b.push(U)}return b},reduce:function(c,p){for(var b=p,A=this,E=0;E<A.length;E++)b=c(b,A[E],E,A);return b},max:function(c,p){for(var A,b=-1/0,E=this,M=0;M<E.length;M++){var U=E[M],ne=p?c.apply(p,[U,M,E]):c(U,M,E);ne>b&&(b=ne,A=U)}return{value:b,ele:A}},min:function(c,p){for(var A,b=1/0,E=this,M=0;M<E.length;M++){var U=E[M],ne=p?c.apply(p,[U,M,E]):c(U,M,E);ne<b&&(b=ne,A=U)}return{value:b,ele:A}}},Ja=zc;Ja.u=Ja["|"]=Ja["+"]=Ja.union=Ja.or=Ja.add,Ja["\\"]=Ja["!"]=Ja["-"]=Ja.difference=Ja.relativeComplement=Ja.subtract=Ja.not,Ja.n=Ja["&"]=Ja["."]=Ja.and=Ja.intersection=Ja.intersect,Ja["^"]=Ja["(+)"]=Ja["(-)"]=Ja.symmetricDifference=Ja.symdiff=Ja.xor,Ja.fnFilter=Ja.filterFn=Ja.stdFilter=Ja.filter,Ja.complement=Ja.abscomp=Ja.absoluteComplement;var c,Vp=function(c,p){var A=c.cy().hasCompoundNodes();function E(fe){var be=fe.pstyle("z-compound-depth");return"auto"===be.value?A?fe.zDepth():0:"bottom"===be.value?-1:"top"===be.value?Wt:0}var M=E(c)-E(p);if(0!==M)return M;function U(fe){return"auto"===fe.pstyle("z-index-compare").value&&fe.isNode()?1:0}var ne=U(c)-U(p);if(0!==ne)return ne;var X=c.pstyle("z-index").value-p.pstyle("z-index").value;return 0!==X?X:c.poolIndex()-p.poolIndex()},Vc={forEach:function(c,p){if(rn(c))for(var b=this.length,A=0;A<b;A++){var E=this[A];if(!1===(p?c.apply(p,[E,A,this]):c(E,A,this)))break}return this},toArray:function(){for(var c=[],p=0;p<this.length;p++)c.push(this[p]);return c},slice:function(c,p){var b=[],A=this.length;null==p&&(p=A),null==c&&(c=0),c<0&&(c=A+c),p<0&&(p=A+p);for(var E=c;E>=0&&E<p&&E<A;E++)b.push(this[E]);return this.spawn(b)},size:function(){return this.length},eq:function(c){return this[c]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(c){if(!rn(c))return this;var p=this.toArray().sort(c);return this.spawn(p)},sortByZIndex:function(){return this.sort(Vp)},zDepth:function(){var c=this[0];if(c){var p=c._private;if("nodes"===p.group){var A=p.data.parent?c.parents().size():0;return c.isParent()?A:Wt-1}var M=p.target,U=p.source.zDepth(),ne=M.zDepth();return Math.max(U,ne,0)}}};Vc.each=Vc.forEach,c="undefined",(typeof Symbol>"u"?"undefined":xe(Symbol))!=c&&xe(Symbol.iterator)!=c&&(Vc[Symbol.iterator]=function(){var b=this,A={value:void 0,done:!1},E=0,M=this.length;return Le({next:function(){return E<M?A.value=b[E++]:(A.value=void 0,A.done=!0),A}},Symbol.iterator,function(){return this})});var xm=jn({nodeDimensionsIncludeLabels:!1}),pd={layoutDimensions:function(c){var p;if(c=xm(c),this.takesUpSpace())if(c.nodeDimensionsIncludeLabels){var b=this.boundingBox();p={w:b.w,h:b.h}}else p={w:this.outerWidth(),h:this.outerHeight()};else p={w:0,h:0};return(0===p.w||0===p.h)&&(p.w=p.h=1),p},layoutPositions:function(c,p,b){var A=this.nodes().filter(function(In){return!In.isParent()}),E=this.cy(),M=p.eles,U=function(En){return En.id()},ne=Gt(b,U);c.emit({type:"layoutstart",layout:c}),c.animations=[];var fe=p.spacingFactor&&1!==p.spacingFactor,Ge=function(){if(!fe)return null;for(var En=Gu(),hn=0;hn<A.length;hn++){var mn=ne(A[hn],hn);ul(En,mn.x,mn.y)}return En}(),$e=Gt(function(In,En){var hn=ne(In,En);return fe&&(hn=function(En,hn,Mn){var mn_x=hn.x1+hn.w/2,mn_y=hn.y1+hn.h/2;return{x:mn_x+(Mn.x-mn_x)*En,y:mn_y+(Mn.y-mn_y)*En}}(Math.abs(p.spacingFactor),Ge,hn)),null!=p.transform&&(hn=p.transform(In,hn)),hn},U);if(p.animate){for(var Ke=0;Ke<A.length;Ke++){var ot=A[Ke],_t=$e(ot,Ke);if(null==p.animateFilter||p.animateFilter(ot,Ke)){var $t=ot.animation({position:_t,duration:p.animationDuration,easing:p.animationEasing});c.animations.push($t)}else ot.position(_t)}if(p.fit){var Ut=E.animation({fit:{boundingBox:M.boundingBoxAt($e),padding:p.padding},duration:p.animationDuration,easing:p.animationEasing});c.animations.push(Ut)}else if(void 0!==p.zoom&&void 0!==p.pan){var un=E.animation({zoom:p.zoom,pan:p.pan,duration:p.animationDuration,easing:p.animationEasing});c.animations.push(un)}c.animations.forEach(function(In){return In.play()}),c.one("layoutready",p.ready),c.emit({type:"layoutready",layout:c}),vl.all(c.animations.map(function(In){return In.promise()})).then(function(){c.one("layoutstop",p.stop),c.emit({type:"layoutstop",layout:c})})}else A.positions($e),p.fit&&E.fit(p.eles,p.padding),null!=p.zoom&&E.zoom(p.zoom),p.pan&&E.pan(p.pan),c.one("layoutready",p.ready),c.emit({type:"layoutready",layout:c}),c.one("layoutstop",p.stop),c.emit({type:"layoutstop",layout:c});return this},layout:function(c){return this.cy().makeLayout(nr({},c,{eles:this}))}};function Vf(g,c,p){var E,b=p._private,A=b.styleCache=b.styleCache||[];return null!=(E=A[g])||(E=A[g]=c(p)),E}function Uf(g,c){return g=ke(g),function(b){return Vf(g,c,b)}}function ic(g,c){g=ke(g);var p=function(A){return c.call(A)};return function(){var A=this[0];if(A)return Vf(g,p,A)}}pd.createLayout=pd.makeLayout=pd.layout;var vu={recalculateRenderedStyle:function(c){var p=this.cy(),b=p.renderer(),A=p.styleEnabled();return b&&A&&b.recalculateRenderedStyle(this,c),this},dirtyStyleCache:function(){var b,c=this.cy(),p=function(E){return E._private.styleCache=null};return c.hasCompoundNodes()?((b=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(b.connectedEdges()),b.forEach(p)):this.forEach(function(A){p(A),A.connectedEdges().forEach(p)}),this},updateStyle:function(c){var p=this._private.cy;if(!p.styleEnabled())return this;if(p.batching())return p._private.batchStyleEles.merge(this),this;var E=this;c=!(!c&&void 0!==c),p.hasCompoundNodes()&&(E=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var M=E;return c?M.emitAndNotify("style"):M.emit("style"),E.forEach(function(U){return U._private.styleDirty=!0}),this},cleanStyle:function(){var c=this.cy();if(c.styleEnabled())for(var p=0;p<this.length;p++){var b=this[p];b._private.styleDirty&&(b._private.styleDirty=!1,c.style().apply(b))}},parsedStyle:function(c){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],b=this[0],A=b.cy();if(A.styleEnabled()&&b){this.cleanStyle();var E=b._private.style[c];return E??(p?A.style().getDefaultProperty(c):null)}},numericStyle:function(c){var p=this[0];if(p.cy().styleEnabled()&&p){var b=p.pstyle(c);return void 0!==b.pfValue?b.pfValue:b.value}},numericStyleUnits:function(c){var p=this[0];if(p.cy().styleEnabled()&&p)return p.pstyle(c).units},renderedStyle:function(c){var p=this.cy();if(!p.styleEnabled())return this;var b=this[0];return b?p.style().getRenderedStyle(b,c):void 0},style:function(c,p){var b=this.cy();if(!b.styleEnabled())return this;var E=b.style();if(Ht(c))E.applyBypass(this,c,!1),this.emitAndNotify("style");else if(Ct(c)){if(void 0===p){var U=this[0];return U?E.getStylePropertyValue(U,c):void 0}E.applyBypass(this,c,p,!1),this.emitAndNotify("style")}else if(void 0===c){var ne=this[0];return ne?E.getRawStyle(ne):void 0}return this},removeStyle:function(c){var p=this.cy();if(!p.styleEnabled())return this;var A=p.style(),E=this;if(void 0===c)for(var M=0;M<E.length;M++)A.removeAllBypasses(E[M],!1);else{c=c.split(/\s+/);for(var ne=0;ne<E.length;ne++)A.removeBypasses(E[ne],c,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var c=this.cy();if(!c.styleEnabled())return 1;var p=c.hasCompoundNodes(),b=this[0];if(b){var A=b._private,E=b.pstyle("opacity").value;if(!p)return E;var M=A.data.parent?b.parents():null;if(M)for(var U=0;U<M.length;U++)E*=M[U].pstyle("opacity").value;return E}},transparent:function(){if(!this.cy().styleEnabled())return!1;var p=this[0],b=p.cy().hasCompoundNodes();return p?b?0===p.effectiveOpacity():0===p.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function kd(g,c){var b=g._private.data.parent?g.parents():null;if(b)for(var A=0;A<b.length;A++)if(!c(b[A]))return!1;return!0}function ah(g){var c=g.ok,p=g.edgeOkViaNode||g.ok,b=g.parentOk||g.ok;return function(){var A=this.cy();if(!A.styleEnabled())return!0;var E=this[0],M=A.hasCompoundNodes();if(E){var U=E._private;if(!c(E))return!1;if(E.isNode())return!M||kd(E,b);var ne=U.source,X=U.target;return p(ne)&&(!M||kd(ne,p))&&(ne===X||p(X)&&(!M||kd(X,p)))}}}var sf=Uf("eleTakesUpSpace",function(g){return"element"===g.pstyle("display").value&&0!==g.width()&&(!g.isNode()||0!==g.height())});vu.takesUpSpace=ic("takesUpSpace",ah({ok:sf}));var Hf=Uf("eleInteractive",function(g){return"yes"===g.pstyle("events").value&&"visible"===g.pstyle("visibility").value&&sf(g)}),Hp=Uf("parentInteractive",function(g){return"visible"===g.pstyle("visibility").value&&sf(g)});vu.interactive=ic("interactive",ah({ok:Hf,parentOk:Hp,edgeOkViaNode:sf})),vu.noninteractive=function(){var g=this[0];if(g)return!g.interactive()};var gd=Uf("eleVisible",function(g){return"visible"===g.pstyle("visibility").value&&0!==g.pstyle("opacity").pfValue&&sf(g)});vu.visible=ic("visible",ah({ok:gd,edgeOkViaNode:sf})),vu.hidden=function(){var g=this[0];if(g)return!g.visible()},vu.isBundledBezier=ic("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),vu.bypass=vu.css=vu.style,vu.renderedCss=vu.renderedStyle,vu.removeBypass=vu.removeCss=vu.removeStyle,vu.pstyle=vu.parsedStyle;var nl={};function Gf(g){return function(){var c=arguments,p=[];if(2===c.length){var b=c[0],A=c[1];this.on(g.event,b,A)}else if(1===c.length&&rn(c[0])){var E=c[0];this.on(g.event,E)}else if(0===c.length||1===c.length&&Qt(c[0])){for(var M=1===c.length?c[0]:null,U=0;U<this.length;U++){var ne=this[U],X=!g.ableField||ne._private[g.ableField],fe=ne._private[g.field]!=g.value;if(g.overrideAble){var be=g.overrideAble(ne);if(void 0!==be&&(X=be,!be))return this}X&&(ne._private[g.field]=g.value,fe&&p.push(ne))}var Ge=this.spawn(p);Ge.updateStyle(),Ge.emit(g.event),M&&Ge.emit(M)}return this}}function Rd(g){nl[g.field]=function(){var c=this[0];if(c){if(g.overrideField){var p=g.overrideField(c);if(void 0!==p)return p}return c._private[g.field]}},nl[g.on]=Gf({event:g.on,field:g.field,ableField:g.ableField,overrideAble:g.overrideAble,value:!0}),nl[g.off]=Gf({event:g.off,field:g.field,ableField:g.ableField,overrideAble:g.overrideAble,value:!1})}Rd({field:"locked",overrideField:function(c){return!!c.cy().autolock()||void 0},on:"lock",off:"unlock"}),Rd({field:"grabbable",overrideField:function(c){return!c.cy().autoungrabify()&&!c.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Rd({field:"selected",ableField:"selectable",overrideAble:function(c){return!c.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Rd({field:"selectable",overrideField:function(c){return!c.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),nl.deselect=nl.unselect,nl.grabbed=function(){var g=this[0];if(g)return g._private.grabbed},Rd({field:"active",on:"activate",off:"unactivate"}),Rd({field:"pannable",on:"panify",off:"unpanify"}),nl.inactive=function(){var g=this[0];if(g)return!g._private.active};var uu={},af=function(c){return function(b){for(var E=[],M=0;M<this.length;M++){var U=this[M];if(U.isNode()){for(var ne=!1,X=U.connectedEdges(),fe=0;fe<X.length;fe++){var be=X[fe],Ge=be.source(),$e=be.target();if(c.noIncomingEdges&&$e===U&&Ge!==U||c.noOutgoingEdges&&Ge===U&&$e!==U){ne=!0;break}}ne||E.push(U)}}return this.spawn(E,!0).filter(b)}},$h=function(c){return function(p){for(var A=[],E=0;E<this.length;E++){var M=this[E];if(M.isNode())for(var U=M.connectedEdges(),ne=0;ne<U.length;ne++){var X=U[ne],fe=X.source(),be=X.target();c.outgoing&&fe===M?(A.push(X),A.push(be)):c.incoming&&be===M&&(A.push(X),A.push(fe))}}return this.spawn(A,!0).filter(p)}},Od=function(c){return function(p){for(var b=this,A=[],E={};;){var M=c.outgoing?b.outgoers():b.incomers();if(0===M.length)break;for(var U=!1,ne=0;ne<M.length;ne++){var X=M[ne],fe=X.id();E[fe]||(E[fe]=!0,A.push(X),U=!0)}if(!U)break;b=M}return this.spawn(A,!0).filter(p)}};function Gl(g){return function(p){for(var b=[],A=0;A<this.length;A++){var M=this[A]._private[g.attr];M&&b.push(M)}return this.spawn(b,!0).filter(p)}}function oh(g){return function(p){var b=[],A=this._private.cy,E=g||{};Ct(p)&&(p=A.$(p));for(var M=0;M<p.length;M++)for(var U=p[M]._private.edges,ne=0;ne<U.length;ne++){var X=U[ne],fe=X._private.data,be=this.hasElementWithId(fe.source)&&p.hasElementWithId(fe.target),Ge=p.hasElementWithId(fe.source)&&this.hasElementWithId(fe.target);!be&&!Ge||(E.thisIsSrc||E.thisIsTgt)&&(E.thisIsSrc&&!be||E.thisIsTgt&&!Ge)||b.push(X)}return this.spawn(b,!0)}}function lf(g){return g=nr({},{codirected:!1},g),function(b){for(var A=[],E=this.edges(),M=g,U=0;U<E.length;U++)for(var X=E[U]._private,fe=X.source,be=fe._private.data.id,Ge=X.data.target,$e=fe._private.edges,Ke=0;Ke<$e.length;Ke++){var ot=$e[Ke],_t=ot._private.data,Et=_t.target,$t=_t.source,Ut=Et===Ge&&$t===be;(M.codirected&&Ut||!M.codirected&&(Ut||be===Et&&Ge===$t))&&A.push(ot)}return this.spawn(A,!0).filter(b)}}uu.clearTraversalCache=function(){for(var g=0;g<this.length;g++)this[g]._private.traversalCache=null},nr(uu,{roots:af({noIncomingEdges:!0}),leaves:af({noOutgoingEdges:!0}),outgoers:Nl($h({outgoing:!0}),"outgoers"),successors:Od({outgoing:!0}),incomers:Nl($h({incoming:!0}),"incomers"),predecessors:Od({incoming:!0})}),nr(uu,{neighborhood:Nl(function(g){for(var c=[],p=this.nodes(),b=0;b<p.length;b++)for(var A=p[b],E=A.connectedEdges(),M=0;M<E.length;M++){var U=E[M],ne=U.source(),X=U.target(),fe=A===ne?X:ne;fe.length>0&&c.push(fe[0]),c.push(U[0])}return this.spawn(c,!0).filter(g)},"neighborhood"),closedNeighborhood:function(c){return this.neighborhood().add(this).filter(c)},openNeighborhood:function(c){return this.neighborhood(c)}}),uu.neighbourhood=uu.neighborhood,uu.closedNeighbourhood=uu.closedNeighborhood,uu.openNeighbourhood=uu.openNeighborhood,nr(uu,{source:Nl(function(c){var b,p=this[0];return p&&(b=p._private.source||p.cy().collection()),b&&c?b.filter(c):b},"source"),target:Nl(function(c){var b,p=this[0];return p&&(b=p._private.target||p.cy().collection()),b&&c?b.filter(c):b},"target"),sources:Gl({attr:"source"}),targets:Gl({attr:"target"})}),nr(uu,{edgesWith:Nl(oh(),"edgesWith"),edgesTo:Nl(oh({thisIsSrc:!0}),"edgesTo")}),nr(uu,{connectedEdges:Nl(function(g){for(var c=[],b=0;b<this.length;b++){var A=this[b];if(A.isNode())for(var E=A._private.edges,M=0;M<E.length;M++)c.push(E[M])}return this.spawn(c,!0).filter(g)},"connectedEdges"),connectedNodes:Nl(function(g){for(var c=[],b=0;b<this.length;b++){var A=this[b];!A.isEdge()||(c.push(A.source()[0]),c.push(A.target()[0]))}return this.spawn(c,!0).filter(g)},"connectedNodes"),parallelEdges:Nl(lf(),"parallelEdges"),codirectedEdges:Nl(lf({codirected:!0}),"codirectedEdges")}),nr(uu,{components:function(c){var p=this,b=p.cy(),A=b.collection(),E=null==c?p.nodes():c.nodes(),M=[];null!=c&&E.empty()&&(E=c.sources());var U=function(fe,be){A.merge(fe),E.unmerge(fe),be.merge(fe)};if(E.empty())return p.spawn();var ne=function(){var fe=b.collection();M.push(fe);var be=E[0];U(be,fe),p.bfs({directed:!1,roots:be,visit:function($e){return U($e,fe)}}),fe.forEach(function(Ge){Ge.connectedEdges().forEach(function($e){p.has($e)&&fe.has($e.source())&&fe.has($e.target())&&fe.merge($e)})})};do{ne()}while(E.length>0);return M},component:function(){var c=this[0];return c.cy().mutableElements().components(c)[0]}}),uu.componentsOf=uu.components;var Cl=function(c,p){var b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==c){var A=new is,E=!1;if(p){if(p.length>0&&Ht(p[0])&&!Jt(p[0])){E=!0;for(var M=[],U=new wr,ne=0,X=p.length;ne<X;ne++){var fe=p[ne];null==fe.data&&(fe.data={});var be=fe.data;if(null==be.id)be.id=wt();else if(c.hasElementWithId(be.id)||U.has(be.id))continue;var Ge=new rs(c,fe,!1);M.push(Ge),U.add(be.id)}p=M}}else p=[];this.length=0;for(var $e=0,Ke=p.length;$e<Ke;$e++){var ot=p[$e][0];if(null!=ot){var _t=ot._private.data.id;(!b||!A.has(_t))&&(b&&A.set(_t,{index:this.length,ele:ot}),this[this.length]=ot,this.length++)}}this._private={eles:this,cy:c,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(Et){this.lazyMap=Et},rebuildMap:function(){for(var $t=this.lazyMap=new is,Ut=this.eles,un=0;un<Ut.length;un++){var In=Ut[un];$t.set(In.id(),{index:un,ele:In})}}},b&&(this._private.map=A),E&&this.restore()}else We("A collection must have a reference to the core")},il=rs.prototype=Cl.prototype=Object.create(Array.prototype);il.instanceString=function(){return"collection"},il.spawn=function(g,c){return new Cl(this.cy(),g,c)},il.spawnSelf=function(){return this.spawn(this)},il.cy=function(){return this._private.cy},il.renderer=function(){return this._private.cy.renderer()},il.element=function(){return this[0]},il.collection=function(){return Gn(this)?this:new Cl(this._private.cy,[this])},il.unique=function(){return new Cl(this._private.cy,this,!0)},il.hasElementWithId=function(g){return this._private.map.has(g=""+g)},il.getElementById=function(g){var c=this._private.cy,p=this._private.map.get(g=""+g);return p?p.ele:new Cl(c)},il.$id=il.getElementById,il.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},il.indexOf=function(g){return this._private.map.get(g[0]._private.data.id).index},il.indexOfId=function(g){return this._private.map.get(g=""+g).index},il.json=function(g){var c=this.element(),p=this.cy();if(null==c&&g)return this;if(null!=c){var b=c._private;if(Ht(g)){if(p.startBatch(),g.data){c.data(g.data);var A=b.data;if(c.isEdge()){var E=!1,M={},U=g.data.source,ne=g.data.target;null!=U&&U!=A.source&&(M.source=""+U,E=!0),null!=ne&&ne!=A.target&&(M.target=""+ne,E=!0),E&&(c=c.move(M))}else{var fe=g.data.parent;"parent"in g.data&&(null!=fe||null!=A.parent)&&fe!=A.parent&&(void 0===fe&&(fe=null),null!=fe&&(fe=""+fe),c=c.move({parent:fe}))}}g.position&&c.position(g.position);var be=function(ot,_t,Et){var $t=g[ot];null!=$t&&$t!==b[ot]&&($t?c[_t]():c[Et]())};return be("removed","remove","restore"),be("selected","select","unselect"),be("selectable","selectify","unselectify"),be("locked","lock","unlock"),be("grabbable","grabify","ungrabify"),be("pannable","panify","unpanify"),null!=g.classes&&c.classes(g.classes),p.endBatch(),this}if(void 0===g){var Ge={data:ct(b.data),position:ct(b.position),group:b.group,removed:b.removed,selected:b.selected,selectable:b.selectable,locked:b.locked,grabbable:b.grabbable,pannable:b.pannable,classes:""},$e=0;return b.classes.forEach(function(Ke){return Ge.classes+=0==$e++?Ke:" "+Ke}),Ge}}},il.jsons=function(){for(var g=[],c=0;c<this.length;c++){var b=this[c].json();g.push(b)}return g},il.clone=function(){for(var g=this.cy(),c=[],p=0;p<this.length;p++){var A=this[p].json(),E=new rs(g,A,!1);c.push(E)}return new Cl(g,c)},il.copy=il.clone,il.restore=function(){for(var U,g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=this,b=p.cy(),A=b._private,E=[],M=[],ne=0,X=p.length;ne<X;ne++){var fe=p[ne];c&&!fe.removed()||(fe.isNode()?E.push(fe):M.push(fe))}U=E.concat(M);var be,Ge=function(){U.splice(be,1),be--};for(be=0;be<U.length;be++){var $e=U[be],Ke=$e._private,ot=Ke.data;if($e.clearTraversalCache(),c||Ke.removed)if(void 0===ot.id)ot.id=wt();else if(en(ot.id))ot.id=""+ot.id;else{if(Oe(ot.id)||!Ct(ot.id)){We("Can not create element with invalid string ID `"+ot.id+"`"),Ge();continue}if(b.hasElementWithId(ot.id)){We("Can not create second element with ID `"+ot.id+"`"),Ge();continue}}var _t=ot.id;if($e.isNode()){var Et=Ke.position;null==Et.x&&(Et.x=0),null==Et.y&&(Et.y=0)}if($e.isEdge()){for(var $t=$e,Ut=["source","target"],un=Ut.length,In=!1,En=0;En<un;En++){var hn=Ut[En],Mn=ot[hn];en(Mn)&&(Mn=ot[hn]=""+ot[hn]),null==Mn||""===Mn?(We("Can not create edge `"+_t+"` with unspecified "+hn),In=!0):b.hasElementWithId(Mn)||(We("Can not create edge `"+_t+"` with nonexistant "+hn+" `"+Mn+"`"),In=!0)}if(In){Ge();continue}var mn=b.getElementById(ot.source),Fn=b.getElementById(ot.target);mn.same(Fn)?mn._private.edges.push($t):(mn._private.edges.push($t),Fn._private.edges.push($t)),$t._private.source=mn,$t._private.target=Fn}Ke.map=new is,Ke.map.set(_t,{ele:$e,index:0}),Ke.removed=!1,c&&b.addToPool($e)}for(var Rn=0;Rn<E.length;Rn++){var Xt=E[Rn],Nn=Xt._private.data;en(Nn.parent)&&(Nn.parent=""+Nn.parent);var xn=Nn.parent,gi=null!=xn;if(gi){var $n=b.getElementById(xn);if($n.empty())Nn.parent=void 0;else{for(var ai=!1,wi=$n;!wi.empty();){if(Xt.same(wi)){ai=!0,Nn.parent=void 0;break}wi=wi.parent()}ai||($n[0]._private.children.push(Xt),Xt._private.parent=$n[0],A.hasCompoundNodes=!0)}}}if(U.length>0){for(var Pi=U.length===p.length?p:new Cl(b,U),er=0;er<Pi.length;er++){var xi=Pi[er];xi.isNode()||(xi.parallelEdges().clearTraversalCache(),xi.source().clearTraversalCache(),xi.target().clearTraversalCache())}(A.hasCompoundNodes?b.collection().merge(Pi).merge(Pi.connectedNodes()).merge(Pi.parent()):Pi).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(g),g?Pi.emitAndNotify("add"):c&&Pi.emit("add")}return p},il.removed=function(){var g=this[0];return g&&g._private.removed},il.inside=function(){var g=this[0];return g&&!g._private.removed},il.remove=function(){var g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=this,b=[],A={},E=p._private.cy;function M(xn){for(var gi=xn._private.edges,$n=0;$n<gi.length;$n++)ne(gi[$n])}function U(xn){for(var gi=xn._private.children,$n=0;$n<gi.length;$n++)ne(gi[$n])}function ne(xn){var gi=A[xn.id()];c&&xn.removed()||gi||(A[xn.id()]=!0,xn.isNode()?(b.push(xn),M(xn),U(xn)):b.unshift(xn))}for(var X=0,fe=p.length;X<fe;X++){var be=p[X];ne(be)}function Ge(xn,gi){ii(xn._private.edges,gi),xn.clearTraversalCache()}function $e(xn){xn.clearTraversalCache()}var Ke=[];function ot(xn,gi){gi=gi[0];var $n=(xn=xn[0])._private.children,ai=xn.id();ii($n,gi),gi._private.parent=null,Ke.ids[ai]||(Ke.ids[ai]=!0,Ke.push(xn))}Ke.ids={},p.dirtyCompoundBoundsCache(),c&&E.removeFromPool(b);for(var _t=0;_t<b.length;_t++){var Et=b[_t];if(Et.isEdge()){var $t=Et.source()[0],Ut=Et.target()[0];Ge($t,Et),Ge(Ut,Et);for(var un=Et.parallelEdges(),In=0;In<un.length;In++){var En=un[In];$e(En),En.isBundledBezier()&&En.dirtyBoundingBoxCache()}}else{var hn=Et.parent();0!==hn.length&&ot(hn,Et)}c&&(Et._private.removed=!0)}var Mn=E._private.elements;E._private.hasCompoundNodes=!1;for(var mn=0;mn<Mn.length;mn++){var Fn=Mn[mn];if(Fn.isParent()){E._private.hasCompoundNodes=!0;break}}var Rn=new Cl(this.cy(),b);Rn.size()>0&&(g?Rn.emitAndNotify("remove"):c&&Rn.emit("remove"));for(var Xt=0;Xt<Ke.length;Xt++){var Nn=Ke[Xt];(!c||!Nn.removed())&&Nn.updateStyle()}return Rn},il.move=function(g){var c=this._private.cy,p=this,b=!1,A=!1,E=function(Ke){return null==Ke?Ke:""+Ke};if(void 0!==g.source||void 0!==g.target){var M=E(g.source),U=E(g.target),ne=null!=M&&c.hasElementWithId(M),X=null!=U&&c.hasElementWithId(U);(ne||X)&&(c.batch(function(){p.remove(b,A),p.emitAndNotify("moveout");for(var $e=0;$e<p.length;$e++){var Ke=p[$e],ot=Ke._private.data;Ke.isEdge()&&(ne&&(ot.source=M),X&&(ot.target=U))}p.restore(b,A)}),p.emitAndNotify("move"))}else if(void 0!==g.parent){var fe=E(g.parent);if(null===fe||c.hasElementWithId(fe)){var Ge=null===fe?void 0:fe;c.batch(function(){var $e=p.remove(b,A);$e.emitAndNotify("moveout");for(var Ke=0;Ke<p.length;Ke++){var ot=p[Ke],_t=ot._private.data;ot.isNode()&&(_t.parent=Ge)}$e.restore(b,A)}),p.emitAndNotify("move")}}return this},[rv,xu,Oc,qu,Yo,Of,cp,xb,Lo,zc,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var c=this[0];if(c)return c._private.group}},Vc,pd,vu,nl,uu].forEach(function(g){nr(il,g)});var Xa={add:function(c){var p,b=this;if(xt(c)){var A=c;if(A._private.cy===b)p=A.restore();else{for(var E=[],M=0;M<A.length;M++)E.push(A[M].json());p=new Cl(b,E)}}else if(Qt(c))p=new Cl(b,c);else if(Ht(c)&&(Qt(c.nodes)||Qt(c.edges))){for(var X=c,fe=[],be=["nodes","edges"],Ge=0,$e=be.length;Ge<$e;Ge++){var Ke=be[Ge],ot=X[Ke];if(Qt(ot))for(var _t=0,Et=ot.length;_t<Et;_t++){var $t=nr({group:Ke},ot[_t]);fe.push($t)}}p=new Cl(b,fe)}else p=new rs(b,c).collection();return p},remove:function(c){return xt(c)||Ct(c)&&(c=this.$(c)),c.remove()}},lv=function(){function g(b){return-b.tension*b.x-b.friction*b.v}function c(b,A,E){var M={x:b.x+E.dx*A,v:b.v+E.dv*A,tension:b.tension,friction:b.friction};return{dx:M.v,dv:g(M)}}function p(b,A){var E={dx:b.v,dv:g(b)},M=c(b,.5*A,E),U=c(b,.5*A,M),ne=c(b,A,U),fe=1/6*(E.dv+2*(M.dv+U.dv)+ne.dv);return b.x=b.x+1/6*(E.dx+2*(M.dx+U.dx)+ne.dx)*A,b.v=b.v+fe*A,b}return function b(A,E,M){var Ge,$e,Ke,U={x:-1,v:0,tension:null,friction:null},ne=[0],X=0;for(A=parseFloat(A)||500,E=parseFloat(E)||20,M=M||null,U.tension=A,U.friction=E,$e=(Ge=null!==M)?(X=b(A,E))/M*.016:.016;Ke=p(Ke||U,$e),ne.push(1+Ke.x),X+=16,Math.abs(Ke.x)>1e-4&&Math.abs(Ke.v)>1e-4;);return Ge?function(ot){return ne[ot*(ne.length-1)|0]}:X}}(),ko=function(c,p,b,A){var E=function ls(g,c,p,b){var A=4,E=.001,M=1e-7,U=10,ne=11,X=1/(ne-1),fe=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var be=0;be<4;++be)if("number"!=typeof arguments[be]||isNaN(arguments[be])||!isFinite(arguments[be]))return!1;g=Math.min(g,1),p=Math.min(p,1),g=Math.max(g,0),p=Math.max(p,0);var Ge=fe?new Float32Array(ne):new Array(ne);function $e(Fn,Rn){return 1-3*Rn+3*Fn}function Ke(Fn,Rn){return 3*Rn-6*Fn}function ot(Fn){return 3*Fn}function _t(Fn,Rn,Xt){return(($e(Rn,Xt)*Fn+Ke(Rn,Xt))*Fn+ot(Rn))*Fn}function Et(Fn,Rn,Xt){return 3*$e(Rn,Xt)*Fn*Fn+2*Ke(Rn,Xt)*Fn+ot(Rn)}function $t(Fn,Rn){for(var Xt=0;Xt<A;++Xt){var Nn=Et(Rn,g,p);if(0===Nn)return Rn;Rn-=(_t(Rn,g,p)-Fn)/Nn}return Rn}function Ut(){for(var Fn=0;Fn<ne;++Fn)Ge[Fn]=_t(Fn*X,g,p)}function un(Fn,Rn,Xt){var Nn,xn,gi=0;do{(Nn=_t(xn=Rn+(Xt-Rn)/2,g,p)-Fn)>0?Xt=xn:Rn=xn}while(Math.abs(Nn)>M&&++gi<U);return xn}function In(Fn){for(var Rn=0,Xt=1,Nn=ne-1;Xt!==Nn&&Ge[Xt]<=Fn;++Xt)Rn+=X;--Xt;var gi=Rn+(Fn-Ge[Xt])/(Ge[Xt+1]-Ge[Xt])*X,$n=Et(gi,g,p);return $n>=E?$t(Fn,gi):0===$n?gi:un(Fn,Rn,Rn+X)}var En=!1;function hn(){En=!0,(g!==c||p!==b)&&Ut()}var Mn=function(Rn){return En||hn(),g===c&&p===b?Rn:0===Rn?0:1===Rn?1:_t(In(Rn),c,b)};Mn.getControlPoints=function(){return[{x:g,y:c},{x:p,y:b}]};var mn="generateBezier("+[g,c,p,b]+")";return Mn.toString=function(){return mn},Mn}(c,p,b,A);return function(M,U,ne){return M+(U-M)*E(ne)}},mp={linear:function(c,p,b){return c+(p-c)*b},ease:ko(.25,.1,.25,1),"ease-in":ko(.42,0,1,1),"ease-out":ko(0,0,.58,1),"ease-in-out":ko(.42,0,.58,1),"ease-in-sine":ko(.47,0,.745,.715),"ease-out-sine":ko(.39,.575,.565,1),"ease-in-out-sine":ko(.445,.05,.55,.95),"ease-in-quad":ko(.55,.085,.68,.53),"ease-out-quad":ko(.25,.46,.45,.94),"ease-in-out-quad":ko(.455,.03,.515,.955),"ease-in-cubic":ko(.55,.055,.675,.19),"ease-out-cubic":ko(.215,.61,.355,1),"ease-in-out-cubic":ko(.645,.045,.355,1),"ease-in-quart":ko(.895,.03,.685,.22),"ease-out-quart":ko(.165,.84,.44,1),"ease-in-out-quart":ko(.77,0,.175,1),"ease-in-quint":ko(.755,.05,.855,.06),"ease-out-quint":ko(.23,1,.32,1),"ease-in-out-quint":ko(.86,0,.07,1),"ease-in-expo":ko(.95,.05,.795,.035),"ease-out-expo":ko(.19,1,.22,1),"ease-in-out-expo":ko(1,0,0,1),"ease-in-circ":ko(.6,.04,.98,.335),"ease-out-circ":ko(.075,.82,.165,1),"ease-in-out-circ":ko(.785,.135,.15,.86),spring:function(c,p,b){if(0===b)return mp.linear;var A=lv(c,p,b);return function(E,M,U){return E+(M-E)*A(U)}},"cubic-bezier":ko};function Dg(g,c,p,b,A){if(1===b||c===p)return p;var E=A(c,p,b);return null==g||((g.roundValue||g.color)&&(E=Math.round(E)),void 0!==g.min&&(E=Math.max(E,g.min)),void 0!==g.max&&(E=Math.min(E,g.max))),E}function Pg(g,c){return null!=g.pfValue||null!=g.value?null==g.pfValue||null!=c&&"%"===c.type.units?g.value:g.pfValue:g}function Su(g,c,p,b,A){var E=null!=A?A.type:null;p<0?p=0:p>1&&(p=1);var M=Pg(g,A),U=Pg(c,A);if(en(M)&&en(U))return Dg(E,M,U,p,b);if(Qt(M)&&Qt(U)){for(var ne=[],X=0;X<U.length;X++){var fe=M[X],be=U[X];if(null!=fe&&null!=be){var Ge=Dg(E,fe,be,p,b);ne.push(Ge)}else ne.push(be)}return ne}}function vp(g,c,p,b){var A=!b,E=g._private,M=c._private,U=M.easing,ne=M.startTime,fe=(b?g:g.cy()).style();if(!M.easingImpl)if(null==U)M.easingImpl=mp.linear;else{var be,$e,Ke;be=Ct(U)?fe.parse("transition-timing-function",U).value:U,Ct(be)?($e=be,Ke=[]):($e=be[1],Ke=be.slice(2).map(function(Pi){return+Pi})),Ke.length>0?("spring"===$e&&Ke.push(M.duration),M.easingImpl=mp[$e].apply(null,Ke)):M.easingImpl=mp[$e]}var _t,ot=M.easingImpl;if(_t=0===M.duration?1:(p-ne)/M.duration,M.applying&&(_t=M.progress),_t<0?_t=0:_t>1&&(_t=1),null==M.delay){var Et=M.startPosition,$t=M.position;if($t&&A&&!g.locked()){var Ut={};rc(Et.x,$t.x)&&(Ut.x=Su(Et.x,$t.x,_t,ot)),rc(Et.y,$t.y)&&(Ut.y=Su(Et.y,$t.y,_t,ot)),g.position(Ut)}var un=M.startPan,In=M.pan,En=E.pan,hn=null!=In&&b;hn&&(rc(un.x,In.x)&&(En.x=Su(un.x,In.x,_t,ot)),rc(un.y,In.y)&&(En.y=Su(un.y,In.y,_t,ot)),g.emit("pan"));var Mn=M.startZoom,mn=M.zoom,Fn=null!=mn&&b;Fn&&(rc(Mn,mn)&&(E.zoom=Ps(E.minZoom,Su(Mn,mn,_t,ot),E.maxZoom)),g.emit("zoom")),(hn||Fn)&&g.emit("viewport");var Rn=M.style;if(Rn&&Rn.length>0&&A){for(var Xt=0;Xt<Rn.length;Xt++){var Nn=Rn[Xt],xn=Nn.name,$n=M.startStyle[xn],wi=Su($n,Nn,_t,ot,fe.properties[$n.name]);fe.overrideBypass(g,xn,wi)}g.emit("style")}}return M.progress=_t,_t}function rc(g,c){return!!(null!=g&&null!=c&&(en(g)&&en(c)||g&&c))}function Lg(g,c,p,b){var A=c._private;A.started=!0,A.startTime=p-A.progress*A.duration}function kg(g,c){var p=c._private.aniEles,b=[];function A(fe,be){var Ge=fe._private,$e=Ge.animation.current,Ke=Ge.animation.queue,ot=!1;if(0===$e.length){var _t=Ke.shift();_t&&$e.push(_t)}for(var Et=function(En){for(var hn=En.length-1;hn>=0;hn--)(0,En[hn])();En.splice(0,En.length)},$t=$e.length-1;$t>=0;$t--){var Ut=$e[$t],un=Ut._private;un.stopped?($e.splice($t,1),un.hooked=!1,un.playing=!1,un.started=!1,Et(un.frames)):!un.playing&&!un.applying||(un.playing&&un.applying&&(un.applying=!1),un.started||Lg(0,Ut,g),vp(fe,Ut,g,be),un.applying&&(un.applying=!1),Et(un.frames),null!=un.step&&un.step(g),Ut.completed()&&($e.splice($t,1),un.hooked=!1,un.playing=!1,un.started=!1,Et(un.completes)),ot=!0)}return!be&&0===$e.length&&0===Ke.length&&b.push(fe),ot}for(var E=!1,M=0;M<p.length;M++){var ne=A(p[M]);E=E||ne}var X=A(c,!0);(E||X)&&(p.length>0?c.notify("draw",p):c.notify("draw")),p.unmerge(b),c.emit("step")}var Wl={animate:Sa.animate(),animation:Sa.animation(),animated:Sa.animated(),clearQueue:Sa.clearQueue(),delay:Sa.delay(),delayAnimation:Sa.delayAnimation(),stop:Sa.stop(),addToAnimationPool:function(c){!this.styleEnabled()||this._private.aniEles.merge(c)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){var b=c.renderer();b&&b.beforeRender?b.beforeRender(function(E,M){kg(M,c)},b.beforeRenderPriorities.animations):function p(){!c._private.animationsRunning||H(function(E){kg(E,c),p()})}()}}},Yu={qualifierCompare:function(c,p){return null==c||null==p?null==c&&null==p:c.sameText(p)},eventMatches:function(c,p,b){var A=p.qualifier;return null==A||c!==b.target&&Jt(b.target)&&A.matches(b.target)},addEventFields:function(c,p){p.cy=c,p.target=c},callbackContext:function(c,p,b){return null!=p.qualifier?b.target:c}},Ru=function(c){return Ct(c)?new Np(c):c},qh={createEmitter:function(){var c=this._private;return c.emitter||(c.emitter=new _h(Yu,this)),this},emitter:function(){return this._private.emitter},on:function(c,p,b){return this.emitter().on(c,Ru(p),b),this},removeListener:function(c,p,b){return this.emitter().removeListener(c,Ru(p),b),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(c,p,b){return this.emitter().one(c,Ru(p),b),this},once:function(c,p,b){return this.emitter().one(c,Ru(p),b),this},emit:function(c,p){return this.emitter().emit(c,p),this},emitAndNotify:function(c,p){return this.emit(c),this.notify(c,p),this}};Sa.eventAliasesOn(qh);var Wf={png:function(c){return this._private.renderer.png(c=c||{})},jpg:function(c){var p=this._private.renderer;return(c=c||{}).bg=c.bg||"#fff",p.jpg(c)}};Wf.jpeg=Wf.jpg;var iu={layout:function(c){var p=this;if(null!=c)if(null!=c.name){var E,b=c.name,A=p.extension("layout",b);if(null!=A)return E=Ct(c.eles)?p.$(c.eles):null!=c.eles?c.eles:p.$(),new A(nr({},c,{cy:p,eles:E}));We("No such layout `"+b+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else We("A `name` must be specified to make a layout");else We("Layout options must be specified to make a layout")}};iu.createLayout=iu.makeLayout=iu.layout;var bh={notify:function(c,p){var b=this._private;if(this.batching()){b.batchNotifications=b.batchNotifications||{};var A=b.batchNotifications[c]=b.batchNotifications[c]||this.collection();null!=p&&A.merge(p)}else if(b.notificationsEnabled){var E=this.renderer();this.destroyed()||!E||E.notify(c,p)}},notifications:function(c){var p=this._private;return void 0===c?p.notificationsEnabled:(p.notificationsEnabled=!!c,this)},noNotifications:function(c){this.notifications(!1),c(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var c=this._private;return null==c.batchCount&&(c.batchCount=0),0===c.batchCount&&(c.batchStyleEles=this.collection(),c.batchNotifications={}),c.batchCount++,this},endBatch:function(){var c=this._private;if(0===c.batchCount)return this;if(c.batchCount--,0===c.batchCount){c.batchStyleEles.updateStyle();var p=this.renderer();Object.keys(c.batchNotifications).forEach(function(b){var A=c.batchNotifications[b];A.empty()?p.notify(b):p.notify(b,A)})}return this},batch:function(c){return this.startBatch(),c(),this.endBatch(),this},batchData:function(c){var p=this;return this.batch(function(){for(var b=Object.keys(c),A=0;A<b.length;A++){var E=b[A],M=c[E];p.getElementById(E).data(M)}})}},Xh=jn({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Yh={renderTo:function(c,p,b,A){return this._private.renderer.renderTo(c,p,b,A),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(c){var p=this,b=p.extension("renderer",c.name);if(null!=b){void 0!==c.wheelSensitivity&&we("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var A=Xh(c);A.cy=p,p._private.renderer=new b(A),this.notify("init")}else We("Can not initialise: No such renderer `".concat(c.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var c=this;c.notify("destroy");var p=c.container();if(p)for(p._cyreg=null;p.childNodes.length>0;)p.removeChild(p.childNodes[0]);c._private.renderer=null,c.mutableElements().forEach(function(b){var A=b._private;A.rscratch={},A.rstyle={},A.animation.current=[],A.animation.queue=[]})},onRender:function(c){return this.on("render",c)},offRender:function(c){return this.off("render",c)}};Yh.invalidateDimensions=Yh.resize;var Ou={collection:function(c,p){return Ct(c)?this.$(c):xt(c)?c.collection():Qt(c)?new Cl(this,c,p):new Cl(this)},nodes:function(c){var p=this.$(function(b){return b.isNode()});return c?p.filter(c):p},edges:function(c){var p=this.$(function(b){return b.isEdge()});return c?p.filter(c):p},$:function(c){var p=this._private.elements;return c?p.filter(c):p.spawnSelf()},mutableElements:function(){return this._private.elements}};Ou.elements=Ou.filter=Ou.$;var jl={apply:function(g){for(var c=this,A=c._private.cy.collection(),E=0;E<g.length;E++){var M=g[E],U=c.getContextMeta(M);if(!U.empty){var ne=c.getContextStyle(U),X=c.applyContextStyle(U,ne,M);M._private.appliedInitStyle?c.updateTransitions(M,X.diffProps):M._private.appliedInitStyle=!0,c.updateStyleHints(M)&&A.push(M)}}return A},getPropertiesDiff:function(g,c){var p=this,b=p._private.propDiffs=p._private.propDiffs||{},A=g+"-"+c,E=b[A];if(E)return E;for(var M=[],U={},ne=0;ne<p.length;ne++){var X=p[ne],be="t"===c[ne],Ge="t"===g[ne]!==be,$e=X.mappedProperties.length>0;if(Ge||be&&$e){var Ke=void 0;Ge&&$e||Ge?Ke=X.properties:$e&&(Ke=X.mappedProperties);for(var ot=0;ot<Ke.length;ot++){for(var _t=Ke[ot],Et=_t.name,$t=!1,Ut=ne+1;Ut<p.length&&("t"!==c[Ut]||!($t=null!=p[Ut].properties[_t.name]));Ut++);!U[Et]&&!$t&&(U[Et]=!0,M.push(Et))}}}return b[A]=M,M},getContextMeta:function(g){for(var b,c=this,p="",A=g._private.styleCxtKey||"",E=0;E<c.length;E++){var M=c[E];p+=M.selector&&M.selector.matches(g)?"t":"f"}return b=c.getPropertiesDiff(A,p),g._private.styleCxtKey=p,{key:p,diffPropNames:b,empty:0===b.length}},getContextStyle:function(g){var c=g.key,b=this._private.contextStyles=this._private.contextStyles||{};if(b[c])return b[c];for(var A={_private:{key:c}},E=0;E<this.length;E++){var M=this[E];if("t"===c[E])for(var ne=0;ne<M.properties.length;ne++){var X=M.properties[ne];A[X.name]=X}}return b[c]=A,A},applyContextStyle:function(g,c,p){for(var A=g.diffPropNames,E={},M=this.types,U=0;U<A.length;U++){var ne=A[U],X=c[ne],fe=p.pstyle(ne);if(!X){if(!fe)continue;X=fe.bypass?{name:ne,deleteBypassed:!0}:{name:ne,delete:!0}}if(fe!==X){if(X.mapped===M.fn&&null!=fe&&null!=fe.mapping&&fe.mapping.value===X.value){var be=fe.mapping;if((be.fnValue=X.value(p))===be.prevFnValue)continue}var $e=E[ne]={prev:fe};this.applyParsedProperty(p,X),$e.next=p.pstyle(ne),$e.next&&$e.next.bypass&&($e.next=$e.next.bypassed)}}return{diffProps:E}},updateStyleHints:function(g){var b,c=g._private,p=this,A=p.propertyGroupKeys,E=function(ts,ps,Xs){return p.getPropertiesHash(ts,ps,Xs)},M=c.styleKey;if(g.removed())return!1;var ts,U="nodes"===c.group,ne=g._private.style;b=Object.keys(ne);for(var X=0;X<A.length;X++)c.styleKeys[A[X]]=[$,Y];for(var be=function(ts,ps){return c.styleKeys[ps][0]=me(ts,c.styleKeys[ps][0])},Ge=function(ts,ps){return c.styleKeys[ps][1]=ve(ts,c.styleKeys[ps][1])},$e=function(ts,ps){be(ts,ps),Ge(ts,ps)},Ke=function(ts,ps){for(var Xs=0;Xs<ts.length;Xs++){var sa=ts.charCodeAt(Xs);be(sa,ps),Ge(sa,ps)}},Et=0;Et<b.length;Et++){var $t=b[Et],Ut=ne[$t];if(null!=Ut){var un=this.properties[$t],In=un.type,En=un.groupKey,hn=void 0;null!=un.hashOverride?hn=un.hashOverride(g,Ut):null!=Ut.pfValue&&(hn=Ut.pfValue);var Mn=null==un.enums?Ut.value:null,mn=null!=hn,Xt=Ut.units;!In.number||!mn&&null==Mn||In.multiple?Ke(Ut.strValue,En):($e(-128<(ts=mn?hn:Mn)&&ts<128&&Math.floor(ts)!==ts?2e9-(1024*ts|0):ts,En),!mn&&null!=Xt&&Ke(Xt,En))}}for(var xn=[$,Y],gi=0;gi<A.length;gi++){var ai=c.styleKeys[A[gi]];xn[0]=me(ai[0],xn[0]),xn[1]=ve(ai[1],xn[1])}c.styleKey=function(c,p){return 2097152*c+p}(xn[0],xn[1]);var wi=c.styleKeys;c.labelDimsKey=pe(wi.labelDimensions);var Pi=E(g,["label"],wi.labelDimensions);if(c.labelKey=pe(Pi),c.labelStyleKey=pe(de(wi.commonLabel,Pi)),!U){var er=E(g,["source-label"],wi.labelDimensions);c.sourceLabelKey=pe(er),c.sourceLabelStyleKey=pe(de(wi.commonLabel,er));var xi=E(g,["target-label"],wi.labelDimensions);c.targetLabelKey=pe(xi),c.targetLabelStyleKey=pe(de(wi.commonLabel,xi))}if(U){var Ki=c.styleKeys,Si=Ki.pie,sr=[Ki.nodeBody,Ki.nodeBorder,Ki.backgroundImage,Ki.compound,Si].filter(function(Sr){return null!=Sr}).reduce(de,[$,Y]);c.nodeKey=pe(sr),c.hasPie=null!=Si&&Si[0]!==$&&Si[1]!==Y}return M!==c.styleKey},clearStyleHints:function(g){var c=g._private;c.styleCxtKey="",c.styleKeys={},c.styleKey=null,c.labelKey=null,c.labelStyleKey=null,c.sourceLabelKey=null,c.sourceLabelStyleKey=null,c.targetLabelKey=null,c.targetLabelStyleKey=null,c.nodeKey=null,c.hasPie=null},applyParsedProperty:function(g,c){var E,p=this,b=c,A=g._private.style,M=p.types,U=p.properties[b.name].type,ne=b.bypass,X=A[b.name],fe=X&&X.bypass,be=g._private,Ge="mapping",$e=function(hr){return null==hr?null:null!=hr.pfValue?hr.pfValue:hr.value},Ke=function(){var hr=$e(X),Ar=$e(b);p.checkTriggers(g,b.name,hr,Ar)};if(b&&"pie"===b.name.substr(0,3)&&we("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===c.name&&g.isEdge()&&("bezier"!==c.value&&g.isLoop()||"haystack"===c.value&&(g.source().isParent()||g.target().isParent()))&&(b=c=this.parse(c.name,"bezier",ne)),b.delete)return A[b.name]=void 0,Ke(),!0;if(b.deleteBypassed)return X?!!X.bypass&&(X.bypassed=void 0,Ke(),!0):(Ke(),!0);if(b.deleteBypass)return X?!!X.bypass&&(A[b.name]=X.bypassed,Ke(),!0):(Ke(),!0);var ot=function(){we("Do not assign mappings to elements without corresponding data (i.e. ele `"+g.id()+"` has no mapping for property `"+b.name+"` with data field `"+b.field+"`); try a `["+b.field+"]` selector to limit scope to elements with `"+b.field+"` defined")};switch(b.mapped){case M.mapData:for(var _t=b.field.split("."),Et=be.data,$t=0;$t<_t.length&&Et;$t++)Et=Et[_t[$t]];if(null==Et)return ot(),!1;var un;if(!en(Et))return we("Do not use continuous mappers without specifying numeric data (i.e. `"+b.field+": "+Et+"` for `"+g.id()+"` is non-numeric)"),!1;var In=b.fieldMax-b.fieldMin;if((un=0===In?0:(Et-b.fieldMin)/In)<0?un=0:un>1&&(un=1),U.color){var En=b.valueMin[0],Mn=b.valueMin[1],mn=b.valueMax[1],Fn=b.valueMin[2],Rn=b.valueMax[2],Xt=b.valueMin[3]??1,Nn=b.valueMax[3]??1,xn=[Math.round(En+(b.valueMax[0]-En)*un),Math.round(Mn+(mn-Mn)*un),Math.round(Fn+(Rn-Fn)*un),Math.round(Xt+(Nn-Xt)*un)];E={bypass:b.bypass,name:b.name,value:xn,strValue:"rgb("+xn[0]+", "+xn[1]+", "+xn[2]+")"}}else{if(!U.number)return!1;E=this.parse(b.name,b.valueMin+(b.valueMax-b.valueMin)*un,b.bypass,Ge)}if(!E)return ot(),!1;E.mapping=b,b=E;break;case M.data:for(var $n=b.field.split("."),ai=be.data,wi=0;wi<$n.length&&ai;wi++)ai=ai[$n[wi]];if(null!=ai&&(E=this.parse(b.name,ai,b.bypass,Ge)),!E)return ot(),!1;E.mapping=b,b=E;break;case M.fn:var xi=null!=b.fnValue?b.fnValue:(0,b.value)(g);if(b.prevFnValue=xi,null==xi)return we("Custom function mappers may not return null (i.e. `"+b.name+"` for ele `"+g.id()+"` is null)"),!1;if(!(E=this.parse(b.name,xi,b.bypass,Ge)))return we("Custom function mappers may not return invalid values for the property type (i.e. `"+b.name+"` for ele `"+g.id()+"` is invalid)"),!1;E.mapping=ct(b),b=E;break;case void 0:break;default:return!1}return ne?(b.bypassed=fe?X.bypassed:X,A[b.name]=b):fe?X.bypassed=b:A[b.name]=b,Ke(),!0},cleanElements:function(g,c){for(var p=0;p<g.length;p++){var b=g[p];if(this.clearStyleHints(b),b.dirtyCompoundBoundsCache(),b.dirtyBoundingBoxCache(),c)for(var A=b._private.style,E=Object.keys(A),M=0;M<E.length;M++){var U=E[M],ne=A[U];null!=ne&&(ne.bypass?ne.bypassed=null:A[U]=null)}else b._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(g,c){var p=this,b=g._private,A=g.pstyle("transition-property").value,E=g.pstyle("transition-duration").pfValue,M=g.pstyle("transition-delay").pfValue;if(A.length>0&&E>0){for(var U={},ne=!1,X=0;X<A.length;X++){var fe=A[X],be=g.pstyle(fe),Ge=c[fe];if(Ge){var Ke=Ge.prev,ot=null!=Ge.next?Ge.next:be,_t=!1,Et=void 0;!Ke||(en(Ke.pfValue)&&en(ot.pfValue)?Et=Ke.pfValue+1e-6*(_t=ot.pfValue-Ke.pfValue):en(Ke.value)&&en(ot.value)?Et=Ke.value+1e-6*(_t=ot.value-Ke.value):Qt(Ke.value)&&Qt(ot.value)&&(_t=Ke.value[0]!==ot.value[0]||Ke.value[1]!==ot.value[1]||Ke.value[2]!==ot.value[2],Et=Ke.strValue),_t&&(U[fe]=ot.strValue,this.applyBypass(g,fe,Et),ne=!0))}}if(!ne)return;b.transitioning=!0,new vl(function(Ut){M>0?g.delayAnimation(M).play().promise().then(Ut):Ut()}).then(function(){return g.animation({style:U,duration:E,easing:g.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){p.removeBypasses(g,A),g.emitAndNotify("style"),b.transitioning=!1})}else b.transitioning&&(this.removeBypasses(g,A),g.emitAndNotify("style"),b.transitioning=!1)},checkTrigger:function(g,c,p,b,A,E){var M=this.properties[c],U=A(M);null!=U&&U(p,b)&&E(M)},checkZOrderTrigger:function(g,c,p,b){var A=this;this.checkTrigger(g,c,p,b,function(E){return E.triggersZOrder},function(){A._private.cy.notify("zorder",g)})},checkBoundsTrigger:function(g,c,p,b){this.checkTrigger(g,c,p,b,function(A){return A.triggersBounds},function(A){g.dirtyCompoundBoundsCache(),g.dirtyBoundingBoxCache(),A.triggersBoundsOfParallelBeziers&&("curve-style"===c&&("bezier"===p||"bezier"===b)||"display"===c&&("none"===p||"none"===b))&&g.parallelEdges().forEach(function(E){E.isBundledBezier()&&E.dirtyBoundingBoxCache()})})},checkTriggers:function(g,c,p,b){g.dirtyStyleCache(),this.checkZOrderTrigger(g,c,p,b),this.checkBoundsTrigger(g,c,p,b)}},bc={applyBypass:function(g,c,p,b){var E=[];if("*"===c||"**"===c){if(void 0!==p)for(var U=0;U<this.properties.length;U++){var fe=this.parse(this.properties[U].name,p,!0);fe&&E.push(fe)}}else if(Ct(c)){var be=this.parse(c,p,!0);be&&E.push(be)}else{if(!Ht(c))return!1;var Ge=c;b=p;for(var $e=Object.keys(Ge),Ke=0;Ke<$e.length;Ke++){var ot=$e[Ke],_t=Ge[ot];if(void 0===_t&&(_t=Ge[_n(ot)]),void 0!==_t){var Et=this.parse(ot,_t,!0);Et&&E.push(Et)}}}if(0===E.length)return!1;for(var $t=!1,Ut=0;Ut<g.length;Ut++){for(var un=g[Ut],In={},En=void 0,hn=0;hn<E.length;hn++){var Mn=E[hn];if(b){var mn=un.pstyle(Mn.name);En=In[Mn.name]={prev:mn}}$t=this.applyParsedProperty(un,ct(Mn))||$t,b&&(En.next=un.pstyle(Mn.name))}$t&&this.updateStyleHints(un),b&&this.updateTransitions(un,In,!0)}return $t},overrideBypass:function(g,c,p){c=Rt(c);for(var b=0;b<g.length;b++){var A=g[b],E=A._private.style[c],M=this.properties[c].type,U=M.color,ne=M.mutiple,X=E?null!=E.pfValue?E.pfValue:E.value:null;E&&E.bypass?(E.value=p,null!=E.pfValue&&(E.pfValue=p),E.strValue=U?"rgb("+p.join(",")+")":ne?p.join(" "):""+p,this.updateStyleHints(A)):this.applyBypass(A,c,p),this.checkTriggers(A,c,X,p)}},removeAllBypasses:function(g,c){return this.removeBypasses(g,this.propertyNames,c)},removeBypasses:function(g,c,p){for(var A=0;A<g.length;A++){for(var E=g[A],M={},U=0;U<c.length;U++){var ne=c[U],X=this.properties[ne],fe=E.pstyle(X.name);if(fe&&fe.bypass){var Ge=this.parse(ne,"",!0),$e=M[X.name]={prev:fe};this.applyParsedProperty(E,Ge),$e.next=E.pstyle(X.name)}}this.updateStyleHints(E),p&&this.updateTransitions(E,M,!0)}}},t_={getEmSizeInPixels:function(){var g=this.containerCss("font-size");return null!=g?parseFloat(g):1},containerCss:function(g){var p=this._private.cy.container();if(ze&&p&&ze.getComputedStyle)return ze.getComputedStyle(p).getPropertyValue(g)}},Ch={getRenderedStyle:function(g,c){return c?this.getStylePropertyValue(g,c,!0):this.getRawStyle(g,!0)},getRawStyle:function(g,c){var p=this;if(g=g[0]){for(var b={},A=0;A<p.properties.length;A++){var E=p.properties[A],M=p.getStylePropertyValue(g,E.name,c);null!=M&&(b[E.name]=M,b[_n(E.name)]=M)}return b}},getIndexedStyle:function(g,c,p,b){return g.pstyle(c)[p][b]??g.cy().style().getDefaultProperty(c)[p][0]},getStylePropertyValue:function(g,c,p){if(g=g[0]){var A=this.properties[c];A.alias&&(A=A.pointsTo);var E=A.type,M=g.pstyle(A.name);if(M){var U=M.value,ne=M.units,X=M.strValue;if(p&&E.number&&null!=U&&en(U)){var fe=g.cy().zoom(),be=function(_t){return _t*fe},Ge=function(_t,Et){return be(_t)+Et},$e=Qt(U);return($e?ne.every(function(ot){return null!=ot}):null!=ne)?$e?U.map(function(ot,_t){return Ge(ot,ne[_t])}).join(" "):Ge(U,ne):$e?U.map(function(ot){return Ct(ot)?ot:""+be(ot)}).join(" "):""+be(U)}if(null!=X)return X}return null}},getAnimationStartStyle:function(g,c){for(var p={},b=0;b<c.length;b++){var E=c[b].name,M=g.pstyle(E);void 0!==M&&(M=Ht(M)?this.parse(E,M.strValue):this.parse(E,M)),M&&(p[E]=M)}return p},getPropsList:function(g){var p=[],b=g,A=this.properties;if(b)for(var E=Object.keys(b),M=0;M<E.length;M++){var U=E[M],ne=b[U],X=A[U]||A[Rt(U)],fe=this.parse(X.name,ne);fe&&p.push(fe)}return p},getNonDefaultPropertiesHash:function(g,c,p){var E,M,U,ne,X,b=p.slice();for(ne=0;ne<c.length;ne++)if(null!=(E=g.pstyle(c[ne],!1)))if(null!=E.pfValue)b[0]=me(U,b[0]),b[1]=ve(U,b[1]);else for(M=E.strValue,X=0;X<M.length;X++)U=M.charCodeAt(X),b[0]=me(U,b[0]),b[1]=ve(U,b[1]);return b}};Ch.getPropertiesHash=Ch.getNonDefaultPropertiesHash;var Fu={appendFromJson:function(g){for(var c=this,p=0;p<g.length;p++){var b=g[p],A=b.selector,E=b.style||b.css,M=Object.keys(E);c.selector(A);for(var U=0;U<M.length;U++){var ne=M[U];c.css(ne,E[ne])}}return c},fromJson:function(g){var c=this;return c.resetToDefault(),c.appendFromJson(g),c},json:function(){for(var g=[],c=this.defaultLength;c<this.length;c++){for(var p=this[c],b=p.selector,A=p.properties,E={},M=0;M<A.length;M++){var U=A[M];E[U.name]=U.strValue}g.push({selector:b?b.toString():"core",style:E})}return g}},Cc={appendFromString:function(g){var A,E,M,p=this,b=""+g;function U(){b=b.length>A.length?b.substr(A.length):""}function ne(){E=E.length>M.length?E.substr(M.length):""}for(b=b.replace(/[/][*](\s|.)+?[*][/]/g,"");!b.match(/^\s*$/);){var fe=b.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!fe){we("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+b);break}A=fe[0];var be=fe[1];if("core"!==be&&new Np(be).invalid)we("Skipping parsing of block: Invalid selector found in string stylesheet: "+be),U();else{var $e=fe[2],Ke=!1;E=$e;for(var ot=[];!E.match(/^\s*$/);){var Et=E.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!Et){we("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+$e),Ke=!0;break}M=Et[0];var $t=Et[1],Ut=Et[2];this.properties[$t]?p.parse($t,Ut)?(ot.push({name:$t,val:Ut}),ne()):(we("Skipping property: Invalid property definition in: "+M),ne()):(we("Skipping property: Invalid property name in: "+M),ne())}if(Ke){U();break}p.selector(be);for(var En=0;En<ot.length;En++){var hn=ot[En];p.css(hn.name,hn.val)}U()}}return p},fromString:function(g){var c=this;return c.resetToDefault(),c.appendFromString(g),c}},Vo={};(function(){var g=lt,E=function(sr){return"^"+sr+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},M=function(sr){var Sr=g+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+sr+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+g+")\\s*\\,\\s*("+g+")\\s*,\\s*("+Sr+")\\s*\\,\\s*("+Sr+")\\)$"},U=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Vo.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:E("data")},layoutData:{mapping:!0,regex:E("layoutData")},scratch:{mapping:!0,regex:E("scratch")},mapData:{mapping:!0,regex:M("mapData")},mapLayoutData:{mapping:!0,regex:M("mapLayoutData")},mapScratch:{mapping:!0,regex:M("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:U,singleRegexMatchValue:!0},urls:{regexes:U,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(sr,Sr){switch(sr.length){case 2:return"deg"!==Sr[0]&&"rad"!==Sr[0]&&"deg"!==Sr[1]&&"rad"!==Sr[1];case 1:return Ct(sr[0])||"deg"===Sr[0]||"rad"===Sr[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+g+")\\s*,\\s*("+g+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+g+")\\s*,\\s*("+g+")\\s*,\\s*("+g+")\\s*,\\s*("+g+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(sr){var Sr=sr.length;return 1===Sr||2===Sr||4===Sr}}};var ne={zeroNonZero:function(sr,Sr){return(null==sr||null==Sr)&&sr!==Sr||0==sr&&0!=Sr||0!=sr&&0==Sr},any:function(sr,Sr){return sr!=Sr},emptyNonEmpty:function(sr,Sr){var ts=Oe(sr),ps=Oe(Sr);return ts&&!ps||!ts&&ps}},X=Vo.types,fe=[{name:"label",type:X.text,triggersBounds:ne.any,triggersZOrder:ne.emptyNonEmpty},{name:"text-rotation",type:X.textRotation,triggersBounds:ne.any},{name:"text-margin-x",type:X.bidirectionalSize,triggersBounds:ne.any},{name:"text-margin-y",type:X.bidirectionalSize,triggersBounds:ne.any}],be=[{name:"source-label",type:X.text,triggersBounds:ne.any},{name:"source-text-rotation",type:X.textRotation,triggersBounds:ne.any},{name:"source-text-margin-x",type:X.bidirectionalSize,triggersBounds:ne.any},{name:"source-text-margin-y",type:X.bidirectionalSize,triggersBounds:ne.any},{name:"source-text-offset",type:X.size,triggersBounds:ne.any}],Ge=[{name:"target-label",type:X.text,triggersBounds:ne.any},{name:"target-text-rotation",type:X.textRotation,triggersBounds:ne.any},{name:"target-text-margin-x",type:X.bidirectionalSize,triggersBounds:ne.any},{name:"target-text-margin-y",type:X.bidirectionalSize,triggersBounds:ne.any},{name:"target-text-offset",type:X.size,triggersBounds:ne.any}],$e=[{name:"font-family",type:X.fontFamily,triggersBounds:ne.any},{name:"font-style",type:X.fontStyle,triggersBounds:ne.any},{name:"font-weight",type:X.fontWeight,triggersBounds:ne.any},{name:"font-size",type:X.size,triggersBounds:ne.any},{name:"text-transform",type:X.textTransform,triggersBounds:ne.any},{name:"text-wrap",type:X.textWrap,triggersBounds:ne.any},{name:"text-overflow-wrap",type:X.textOverflowWrap,triggersBounds:ne.any},{name:"text-max-width",type:X.size,triggersBounds:ne.any},{name:"text-outline-width",type:X.size,triggersBounds:ne.any},{name:"line-height",type:X.positiveNumber,triggersBounds:ne.any}],Ke=[{name:"text-valign",type:X.valign,triggersBounds:ne.any},{name:"text-halign",type:X.halign,triggersBounds:ne.any},{name:"color",type:X.color},{name:"text-outline-color",type:X.color},{name:"text-outline-opacity",type:X.zeroOneNumber},{name:"text-background-color",type:X.color},{name:"text-background-opacity",type:X.zeroOneNumber},{name:"text-background-padding",type:X.size,triggersBounds:ne.any},{name:"text-border-opacity",type:X.zeroOneNumber},{name:"text-border-color",type:X.color},{name:"text-border-width",type:X.size,triggersBounds:ne.any},{name:"text-border-style",type:X.borderStyle,triggersBounds:ne.any},{name:"text-background-shape",type:X.textBackgroundShape,triggersBounds:ne.any},{name:"text-justification",type:X.justification}],ot=[{name:"events",type:X.bool},{name:"text-events",type:X.bool}],_t=[{name:"display",type:X.display,triggersZOrder:ne.any,triggersBounds:ne.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:X.visibility,triggersZOrder:ne.any},{name:"opacity",type:X.zeroOneNumber,triggersZOrder:ne.zeroNonZero},{name:"text-opacity",type:X.zeroOneNumber},{name:"min-zoomed-font-size",type:X.size},{name:"z-compound-depth",type:X.zCompoundDepth,triggersZOrder:ne.any},{name:"z-index-compare",type:X.zIndexCompare,triggersZOrder:ne.any},{name:"z-index",type:X.nonNegativeInt,triggersZOrder:ne.any}],Et=[{name:"overlay-padding",type:X.size,triggersBounds:ne.any},{name:"overlay-color",type:X.color},{name:"overlay-opacity",type:X.zeroOneNumber,triggersBounds:ne.zeroNonZero},{name:"overlay-shape",type:X.overlayShape,triggersBounds:ne.any}],$t=[{name:"underlay-padding",type:X.size,triggersBounds:ne.any},{name:"underlay-color",type:X.color},{name:"underlay-opacity",type:X.zeroOneNumber,triggersBounds:ne.zeroNonZero},{name:"underlay-shape",type:X.overlayShape,triggersBounds:ne.any}],Ut=[{name:"transition-property",type:X.propList},{name:"transition-duration",type:X.time},{name:"transition-delay",type:X.time},{name:"transition-timing-function",type:X.easing}],un=function(sr,Sr){return"label"===Sr.value?-sr.poolIndex():Sr.pfValue},In=[{name:"height",type:X.nodeSize,triggersBounds:ne.any,hashOverride:un},{name:"width",type:X.nodeSize,triggersBounds:ne.any,hashOverride:un},{name:"shape",type:X.nodeShape,triggersBounds:ne.any},{name:"shape-polygon-points",type:X.polygonPointList,triggersBounds:ne.any},{name:"background-color",type:X.color},{name:"background-fill",type:X.fill},{name:"background-opacity",type:X.zeroOneNumber},{name:"background-blacken",type:X.nOneOneNumber},{name:"background-gradient-stop-colors",type:X.colors},{name:"background-gradient-stop-positions",type:X.percentages},{name:"background-gradient-direction",type:X.gradientDirection},{name:"padding",type:X.sizeMaybePercent,triggersBounds:ne.any},{name:"padding-relative-to",type:X.paddingRelativeTo,triggersBounds:ne.any},{name:"bounds-expansion",type:X.boundsExpansion,triggersBounds:ne.any}],En=[{name:"border-color",type:X.color},{name:"border-opacity",type:X.zeroOneNumber},{name:"border-width",type:X.size,triggersBounds:ne.any},{name:"border-style",type:X.borderStyle}],hn=[{name:"background-image",type:X.urls},{name:"background-image-crossorigin",type:X.bgCrossOrigin},{name:"background-image-opacity",type:X.zeroOneNumbers},{name:"background-image-containment",type:X.bgContainment},{name:"background-image-smoothing",type:X.bools},{name:"background-position-x",type:X.bgPos},{name:"background-position-y",type:X.bgPos},{name:"background-width-relative-to",type:X.bgRelativeTo},{name:"background-height-relative-to",type:X.bgRelativeTo},{name:"background-repeat",type:X.bgRepeat},{name:"background-fit",type:X.bgFit},{name:"background-clip",type:X.bgClip},{name:"background-width",type:X.bgWH},{name:"background-height",type:X.bgWH},{name:"background-offset-x",type:X.bgPos},{name:"background-offset-y",type:X.bgPos}],Mn=[{name:"position",type:X.position,triggersBounds:ne.any},{name:"compound-sizing-wrt-labels",type:X.compoundIncludeLabels,triggersBounds:ne.any},{name:"min-width",type:X.size,triggersBounds:ne.any},{name:"min-width-bias-left",type:X.sizeMaybePercent,triggersBounds:ne.any},{name:"min-width-bias-right",type:X.sizeMaybePercent,triggersBounds:ne.any},{name:"min-height",type:X.size,triggersBounds:ne.any},{name:"min-height-bias-top",type:X.sizeMaybePercent,triggersBounds:ne.any},{name:"min-height-bias-bottom",type:X.sizeMaybePercent,triggersBounds:ne.any}],mn=[{name:"line-style",type:X.lineStyle},{name:"line-color",type:X.color},{name:"line-fill",type:X.fill},{name:"line-cap",type:X.lineCap},{name:"line-opacity",type:X.zeroOneNumber},{name:"line-dash-pattern",type:X.numbers},{name:"line-dash-offset",type:X.number},{name:"line-gradient-stop-colors",type:X.colors},{name:"line-gradient-stop-positions",type:X.percentages},{name:"curve-style",type:X.curveStyle,triggersBounds:ne.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:X.zeroOneNumber,triggersBounds:ne.any},{name:"source-endpoint",type:X.edgeEndpoint,triggersBounds:ne.any},{name:"target-endpoint",type:X.edgeEndpoint,triggersBounds:ne.any},{name:"control-point-step-size",type:X.size,triggersBounds:ne.any},{name:"control-point-distances",type:X.bidirectionalSizes,triggersBounds:ne.any},{name:"control-point-weights",type:X.numbers,triggersBounds:ne.any},{name:"segment-distances",type:X.bidirectionalSizes,triggersBounds:ne.any},{name:"segment-weights",type:X.numbers,triggersBounds:ne.any},{name:"taxi-turn",type:X.bidirectionalSizeMaybePercent,triggersBounds:ne.any},{name:"taxi-turn-min-distance",type:X.size,triggersBounds:ne.any},{name:"taxi-direction",type:X.axisDirection,triggersBounds:ne.any},{name:"edge-distances",type:X.edgeDistances,triggersBounds:ne.any},{name:"arrow-scale",type:X.positiveNumber,triggersBounds:ne.any},{name:"loop-direction",type:X.angle,triggersBounds:ne.any},{name:"loop-sweep",type:X.angle,triggersBounds:ne.any},{name:"source-distance-from-node",type:X.size,triggersBounds:ne.any},{name:"target-distance-from-node",type:X.size,triggersBounds:ne.any}],Fn=[{name:"ghost",type:X.bool,triggersBounds:ne.any},{name:"ghost-offset-x",type:X.bidirectionalSize,triggersBounds:ne.any},{name:"ghost-offset-y",type:X.bidirectionalSize,triggersBounds:ne.any},{name:"ghost-opacity",type:X.zeroOneNumber}],Rn=[{name:"selection-box-color",type:X.color},{name:"selection-box-opacity",type:X.zeroOneNumber},{name:"selection-box-border-color",type:X.color},{name:"selection-box-border-width",type:X.size},{name:"active-bg-color",type:X.color},{name:"active-bg-opacity",type:X.zeroOneNumber},{name:"active-bg-size",type:X.size},{name:"outside-texture-bg-color",type:X.color},{name:"outside-texture-bg-opacity",type:X.zeroOneNumber}],Xt=[];Vo.pieBackgroundN=16,Xt.push({name:"pie-size",type:X.sizeMaybePercent});for(var Nn=1;Nn<=Vo.pieBackgroundN;Nn++)Xt.push({name:"pie-"+Nn+"-background-color",type:X.color}),Xt.push({name:"pie-"+Nn+"-background-size",type:X.percent}),Xt.push({name:"pie-"+Nn+"-background-opacity",type:X.zeroOneNumber});var xn=[],gi=Vo.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:X.arrowShape,triggersBounds:ne.any},{name:"arrow-color",type:X.color},{name:"arrow-fill",type:X.arrowFill}].forEach(function(Si){gi.forEach(function(sr){xn.push({name:sr+"-"+Si.name,type:Si.type,triggersBounds:Si.triggersBounds})})},{});var $n=Vo.properties=[].concat(ot,Ut,_t,Et,$t,Fn,Ke,$e,fe,be,Ge,In,En,hn,Xt,Mn,mn,xn,Rn),ai=Vo.propertyGroups={behavior:ot,transition:Ut,visibility:_t,overlay:Et,underlay:$t,ghost:Fn,commonLabel:Ke,labelDimensions:$e,mainLabel:fe,sourceLabel:be,targetLabel:Ge,nodeBody:In,nodeBorder:En,backgroundImage:hn,pie:Xt,compound:Mn,edgeLine:mn,edgeArrow:xn,core:Rn},wi=Vo.propertyGroupNames={};(Vo.propertyGroupKeys=Object.keys(ai)).forEach(function(Si){wi[Si]=ai[Si].map(function(sr){return sr.name}),ai[Si].forEach(function(sr){return sr.groupKey=Si})});var er=Vo.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Vo.propertyNames=$n.map(function(Si){return Si.name});for(var xi=0;xi<$n.length;xi++){var Ki=$n[xi];$n[Ki.name]=Ki}for(var hr=0;hr<er.length;hr++){var Ar=er[hr],pr={name:Ar.name,alias:!0,pointsTo:$n[Ar.pointsTo]};$n.push(pr),$n[Ar.name]=pr}})(),Vo.getDefaultProperty=function(g){return this.getDefaultProperties()[g]},Vo.getDefaultProperties=function(){var g=this._private;if(null!=g.defaultProperties)return g.defaultProperties;for(var c=nr({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(ne,X){for(var fe=1;fe<=Vo.pieBackgroundN;fe++)ne[X.name.replace("{{i}}",fe)]=X.value;return ne},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(ne,X){return Vo.arrowPrefixes.forEach(function(fe){ne[fe+"-"+X.name]=X.value}),ne},{})),p={},b=0;b<this.properties.length;b++){var A=this.properties[b];if(!A.pointsTo){var E=A.name,U=this.parse(E,c[E]);p[E]=U}}return g.defaultProperties=p,g.defaultProperties},Vo.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var uv={parse:function(g,c,p,b){var A=this;if(rn(c))return A.parseImplWarn(g,c,p,b);var fe,ne=Xe(g,""+c,p?"t":"f","mapping"===b||!0===b||!1===b||null==b?"dontcare":b),X=A.propCache=A.propCache||[];return(fe=X[ne])||(fe=X[ne]=A.parseImplWarn(g,c,p,b)),(p||"mapping"===b)&&(fe=ct(fe))&&(fe.value=ct(fe.value)),fe},parseImplWarn:function(g,c,p,b){var A=this.parseImpl(g,c,p,b);return!A&&null!=c&&we("The style property `".concat(g,": ").concat(c,"` is invalid")),A&&("width"===A.name||"height"===A.name)&&"label"===c&&we("The style value of `label` is deprecated for `"+A.name+"`"),A}};uv.parseImpl=function(g,c,p,b){var A=this;g=Rt(g);var E=A.properties[g],M=c,U=A.types;if(!E||void 0===c)return null;E.alias&&(g=(E=E.pointsTo).name);var ne=Ct(c);ne&&(c=c.trim());var fe,be,X=E.type;if(!X)return null;if(p&&(""===c||null===c))return{name:g,value:c,bypass:!0,deleteBypass:!0};if(rn(c))return{name:g,value:c,strValue:"fn",mapped:U.fn,bypass:p};if(!(!ne||b||c.length<7||"a"!==c[1])){if(c.length>=7&&"d"===c[0]&&(fe=new RegExp(U.data.regex).exec(c)))return!p&&{name:g,value:fe,strValue:""+c,mapped:U.data,field:fe[1],bypass:p};if(c.length>=10&&"m"===c[0]&&(be=new RegExp(U.mapData.regex).exec(c))){if(p||X.multiple)return!1;var $e=U.mapData;if(!X.color&&!X.number)return!1;var Ke=this.parse(g,be[4]);if(!Ke||Ke.mapped)return!1;var ot=this.parse(g,be[5]);if(!ot||ot.mapped)return!1;if(Ke.pfValue===ot.pfValue||Ke.strValue===ot.strValue)return we("`"+g+": "+c+"` is not a valid mapper because the output range is zero; converting to `"+g+": "+Ke.strValue+"`"),this.parse(g,Ke.strValue);if(X.color){var _t=Ke.value,Et=ot.value;if(!(_t[0]!==Et[0]||_t[1]!==Et[1]||_t[2]!==Et[2]||_t[3]!==Et[3]&&(null!=_t[3]&&1!==_t[3]||null!=Et[3]&&1!==Et[3])))return!1}return{name:g,value:be,strValue:""+c,mapped:$e,field:be[1],fieldMin:parseFloat(be[2]),fieldMax:parseFloat(be[3]),valueMin:Ke.value,valueMax:ot.value,bypass:p}}}if(X.multiple&&"multiple"!==b){var Ut;if(Ut=ne?c.split(/\s+/):Qt(c)?c:[c],X.evenMultiple&&Ut.length%2!=0)return null;for(var un=[],In=[],En=[],hn="",Mn=!1,mn=0;mn<Ut.length;mn++){var Fn=A.parse(g,Ut[mn],p,"multiple");Mn=Mn||Ct(Fn.value),un.push(Fn.value),En.push(null!=Fn.pfValue?Fn.pfValue:Fn.value),In.push(Fn.units),hn+=(mn>0?" ":"")+Fn.strValue}return X.validate&&!X.validate(un,In)?null:X.singleEnum&&Mn?1===un.length&&Ct(un[0])?{name:g,value:un[0],strValue:un[0],bypass:p}:null:{name:g,value:un,pfValue:En,strValue:hn,bypass:p,units:In}}var Rn=function(){for(var Sr=0;Sr<X.enums.length;Sr++)if(X.enums[Sr]===c)return{name:g,value:c,strValue:""+c,bypass:p};return null};if(X.number){var Xt,Nn="px";if(X.units&&(Xt=X.units),X.implicitUnits&&(Nn=X.implicitUnits),!X.unitless)if(ne){var xn="px|em"+(X.allowPercent?"|\\%":"");Xt&&(xn=Xt);var gi=c.match("^("+lt+")("+xn+")?$");gi&&(c=gi[1],Xt=gi[2]||Nn)}else(!Xt||X.implicitUnits)&&(Xt=Nn);if(c=parseFloat(c),isNaN(c)&&void 0===X.enums)return null;if(isNaN(c)&&void 0!==X.enums)return c=M,Rn();if(X.integer&&!function(c){return en(c)&&Math.floor(c)===c}(c)||void 0!==X.min&&(c<X.min||X.strictMin&&c===X.min)||void 0!==X.max&&(c>X.max||X.strictMax&&c===X.max))return null;var $n={name:g,value:c,strValue:""+c+(Xt||""),units:Xt,bypass:p};return $n.pfValue=X.unitless||"px"!==Xt&&"em"!==Xt?c:"px"!==Xt&&Xt?this.getEmSizeInPixels()*c:c,("ms"===Xt||"s"===Xt)&&($n.pfValue="ms"===Xt?c:1e3*c),("deg"===Xt||"rad"===Xt)&&($n.pfValue="rad"===Xt?c:function(c){return Math.PI*c/180}(c)),"%"===Xt&&($n.pfValue=c/100),$n}if(X.propList){var ai=[],wi=""+c;if("none"!==wi){for(var Pi=wi.split(/\s*,\s*|\s+/),er=0;er<Pi.length;er++){var xi=Pi[er].trim();A.properties[xi]?ai.push(xi):we("`"+xi+"` is not a valid property name")}if(0===ai.length)return null}return{name:g,value:ai,strValue:0===ai.length?"none":ai.join(" "),bypass:p}}if(X.color){var Ki=function(c){return(Qt(c)?c:null)||function(c){return C[c.toLowerCase()]}(c)||function(c){if((4===c.length||7===c.length)&&"#"===c[0]){var b,A,E,M=16;return 4===c.length?(b=parseInt(c[1]+c[1],M),A=parseInt(c[2]+c[2],M),E=parseInt(c[3]+c[3],M)):(b=parseInt(c[1]+c[2],M),A=parseInt(c[3]+c[4],M),E=parseInt(c[5]+c[6],M)),[b,A,E]}}(c)||function(c){var p,b=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(b){p=[];for(var A=[],E=1;E<=3;E++){var M=b[E];if("%"===M[M.length-1]&&(A[E]=!0),M=parseFloat(M),A[E]&&(M=M/100*255),M<0||M>255)return;p.push(Math.floor(M))}if((A[1]||A[2]||A[3])&&!(A[1]&&A[2]&&A[3]))return;var X=b[4];if(void 0!==X){if((X=parseFloat(X))<0||X>1)return;p.push(X)}}return p}(c)||function(c){var p,b,A,E,M,U,ne,X;function fe(Ke,ot,_t){return _t<0&&(_t+=1),_t>1&&(_t-=1),_t<1/6?Ke+6*(ot-Ke)*_t:_t<.5?ot:_t<2/3?Ke+(ot-Ke)*(2/3-_t)*6:Ke}var be=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(be){if((b=parseInt(be[1]))<0?b=(360- -1*b%360)%360:b>360&&(b%=360),b/=360,(A=parseFloat(be[2]))<0||A>100||(A/=100,(E=parseFloat(be[3]))<0||E>100)||(E/=100,void 0!==(M=be[4])&&((M=parseFloat(M))<0||M>1)))return;if(0===A)U=ne=X=Math.round(255*E);else{var Ge=E<.5?E*(1+A):E+A-E*A,$e=2*E-Ge;U=Math.round(255*fe($e,Ge,b+1/3)),ne=Math.round(255*fe($e,Ge,b)),X=Math.round(255*fe($e,Ge,b-1/3))}p=[U,ne,X,M]}return p}(c)}(c);return Ki?{name:g,value:Ki,pfValue:Ki,strValue:"rgb("+Ki[0]+","+Ki[1]+","+Ki[2]+")",bypass:p}:null}if(X.regex||X.regexes){if(X.enums){var hr=Rn();if(hr)return hr}for(var Ar=X.regexes?X.regexes:[X.regex],mr=0;mr<Ar.length;mr++){var Si=new RegExp(Ar[mr]).exec(c);if(Si)return{name:g,value:X.singleRegexMatchValue?Si[1]:Si,strValue:""+c,bypass:p}}return null}return X.string?{name:g,value:""+c,strValue:""+c,bypass:p}:X.enums?Rn():null};var ac=function g(c){if(!(this instanceof g))return new g(c);ri(c)?(this._private={cy:c,coreStyle:{}},this.length=0,this.resetToDefault()):We("A style must have a core reference")},Ku=ac.prototype;Ku.instanceString=function(){return"style"},Ku.clear=function(){for(var g=this._private,p=g.cy.elements(),b=0;b<this.length;b++)this[b]=void 0;return this.length=0,g.contextStyles={},g.propDiffs={},this.cleanElements(p,!0),p.forEach(function(A){var E=A[0]._private;E.styleDirty=!0,E.appliedInitStyle=!1}),this},Ku.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Ku.core=function(g){return this._private.coreStyle[g]||this.getDefaultProperty(g)},Ku.selector=function(g){var c="core"===g?null:new Np(g),p=this.length++;return this[p]={selector:c,properties:[],mappedProperties:[],index:p},this},Ku.css=function(){var g=this,c=arguments;if(1===c.length)for(var p=c[0],b=0;b<g.properties.length;b++){var A=g.properties[b],E=p[A.name];void 0===E&&(E=p[_n(A.name)]),void 0!==E&&this.cssRule(A.name,E)}else 2===c.length&&this.cssRule(c[0],c[1]);return this},Ku.style=Ku.css,Ku.cssRule=function(g,c){var p=this.parse(g,c);if(p){var b=this.length-1;this[b].properties.push(p),this[b].properties[p.name]=p,p.name.match(/pie-(\d+)-background-size/)&&p.value&&(this._private.hasPie=!0),p.mapped&&this[b].mappedProperties.push(p),!this[b].selector&&(this._private.coreStyle[p.name]=p)}return this},Ku.append=function(g){return ni(g)?g.appendToStyle(this):Qt(g)?this.appendFromJson(g):Ct(g)&&this.appendFromString(g),this},ac.fromJson=function(g,c){var p=new ac(g);return p.fromJson(c),p},ac.fromString=function(g,c){return new ac(g).fromString(c)},[jl,bc,t_,Ch,Fu,Cc,Vo,uv].forEach(function(g){nr(Ku,g)}),ac.types=Ku.types,ac.properties=Ku.properties,ac.propertyGroups=Ku.propertyGroups,ac.propertyGroupNames=Ku.propertyGroupNames,ac.propertyGroupKeys=Ku.propertyGroupKeys;var Am={style:function(c){return c&&this.setStyle(c).update(),this._private.style},setStyle:function(c){var p=this._private;return p.style=ni(c)?c.generateStyle(this):Qt(c)?ac.fromJson(this,c):Ct(c)?ac.fromString(this,c):ac(this),p.style},updateStyle:function(){this.mutableElements().updateStyle()}},Fd={autolock:function(c){return void 0===c?this._private.autolock:(this._private.autolock=!!c,this)},autoungrabify:function(c){return void 0===c?this._private.autoungrabify:(this._private.autoungrabify=!!c,this)},autounselectify:function(c){return void 0===c?this._private.autounselectify:(this._private.autounselectify=!!c,this)},selectionType:function(c){var p=this._private;return null==p.selectionType&&(p.selectionType="single"),void 0===c?p.selectionType:(("additive"===c||"single"===c)&&(p.selectionType=c),this)},panningEnabled:function(c){return void 0===c?this._private.panningEnabled:(this._private.panningEnabled=!!c,this)},userPanningEnabled:function(c){return void 0===c?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!c,this)},zoomingEnabled:function(c){return void 0===c?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!c,this)},userZoomingEnabled:function(c){return void 0===c?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!c,this)},boxSelectionEnabled:function(c){return void 0===c?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!c,this)},pan:function(){var b,A,E,M,U,c=arguments,p=this._private.pan;switch(c.length){case 0:return p;case 1:if(Ct(c[0]))return p[b=c[0]];if(Ht(c[0])){if(!this._private.panningEnabled)return this;U=(E=c[0]).y,en(M=E.x)&&(p.x=M),en(U)&&(p.y=U),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;A=c[1],("x"===(b=c[0])||"y"===b)&&en(A)&&(p[b]=A),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(c,p){var E,M,U,ne,X,b=arguments,A=this._private.pan;if(!this._private.panningEnabled)return this;switch(b.length){case 1:Ht(c)&&(X=(U=b[0]).y,en(ne=U.x)&&(A.x+=ne),en(X)&&(A.y+=X),this.emit("pan viewport"));break;case 2:M=p,("x"===(E=c)||"y"===E)&&en(M)&&(A[E]+=M),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(c,p){var b=this.getFitViewport(c,p);if(b){var A=this._private;A.zoom=b.zoom,A.pan=b.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(c,p){var b;if((en(c)&&void 0===p&&(p=c,c=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(Ct(c)?c=this.$(c):!function(c){return Ht(c)&&en(c.x1)&&en(c.x2)&&en(c.y1)&&en(c.y2)}(c)?xt(c)||(c=this.mutableElements()):((b={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2}).w=b.x2-b.x1,b.h=b.y2-b.y1),!xt(c)||!c.empty())){b=b||c.boundingBox();var ne,M=this.width(),U=this.height();if(p=en(p)?p:0,!isNaN(M)&&!isNaN(U)&&M>0&&U>0&&!isNaN(b.w)&&!isNaN(b.h)&&b.w>0&&b.h>0)return{zoom:ne=(ne=(ne=Math.min((M-2*p)/b.w,(U-2*p)/b.h))>this._private.maxZoom?this._private.maxZoom:ne)<this._private.minZoom?this._private.minZoom:ne,pan:{x:(M-ne*(b.x1+b.x2))/2,y:(U-ne*(b.y1+b.y2))/2}}}},zoomRange:function(c,p){var b=this._private;if(null==p){var A=c;c=A.min,p=A.max}return en(c)&&en(p)&&c<=p?(b.minZoom=c,b.maxZoom=p):en(c)&&void 0===p&&c<=b.maxZoom?b.minZoom=c:en(p)&&void 0===c&&p>=b.minZoom&&(b.maxZoom=p),this},minZoom:function(c){return void 0===c?this._private.minZoom:this.zoomRange({min:c})},maxZoom:function(c){return void 0===c?this._private.maxZoom:this.zoomRange({max:c})},getZoomedViewport:function(c){var E,M,p=this._private,b=p.pan,A=p.zoom,U=!1;return p.zoomingEnabled||(U=!0),en(c)?M=c:Ht(c)&&(M=c.level,null!=c.position?E=Pr(c.position,A,b):null!=c.renderedPosition&&(E=c.renderedPosition),null!=E&&!p.panningEnabled&&(U=!0)),M=(M=M>p.maxZoom?p.maxZoom:M)<p.minZoom?p.minZoom:M,!U&&en(M)&&M!==A&&(null==E||en(E.x)&&en(E.y))?null!=E?{zoomed:!0,panned:!0,zoom:M,pan:{x:-M/A*(E.x-b.x)+E.x,y:-M/A*(E.y-b.y)+E.y}}:{zoomed:!0,panned:!1,zoom:M,pan:b}:null},zoom:function(c){if(void 0===c)return this._private.zoom;var p=this.getZoomedViewport(c),b=this._private;return null!=p&&p.zoomed?(b.zoom=p.zoom,p.panned&&(b.pan.x=p.pan.x,b.pan.y=p.pan.y),this.emit("zoom"+(p.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(c){var p=this._private,b=!0,A=!0,E=[],M=!1,U=!1;if(!c)return this;if(en(c.zoom)||(b=!1),Ht(c.pan)||(A=!1),!b&&!A)return this;if(b){var ne=c.zoom;ne<p.minZoom||ne>p.maxZoom||!p.zoomingEnabled?M=!0:(p.zoom=ne,E.push("zoom"))}if(A&&(!M||!c.cancelOnFailedZoom)&&p.panningEnabled){var X=c.pan;en(X.x)&&(p.pan.x=X.x,U=!1),en(X.y)&&(p.pan.y=X.y,U=!1),U||E.push("pan")}return E.length>0&&(E.push("viewport"),this.emit(E.join(" ")),this.notify("viewport")),this},center:function(c){var p=this.getCenterPan(c);return p&&(this._private.pan=p,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(c,p){if(this._private.panningEnabled){if(Ct(c)){var b=c;c=this.mutableElements().filter(b)}else xt(c)||(c=this.mutableElements());if(0!==c.length){var A=c.boundingBox(),E=this.width(),M=this.height();return{x:(E-(p=void 0===p?this._private.zoom:p)*(A.x1+A.x2))/2,y:(M-p*(A.y1+A.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var b,A,c=this._private,p=c.container;return c.sizeCache=c.sizeCache||(p?(b=ze.getComputedStyle(p),{width:p.clientWidth-(A=function(M){return parseFloat(b.getPropertyValue(M))})("padding-left")-A("padding-right"),height:p.clientHeight-A("padding-top")-A("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var c=this._private.pan,p=this._private.zoom,b=this.renderedExtent(),A={x1:(b.x1-c.x)/p,x2:(b.x2-c.x)/p,y1:(b.y1-c.y)/p,y2:(b.y2-c.y)/p};return A.w=A.x2-A.x1,A.h=A.y2-A.y1,A},renderedExtent:function(){var c=this.width(),p=this.height();return{x1:0,y1:0,x2:c,y2:p,w:c,h:p}},multiClickDebounceTime:function(c){return c?(this._private.multiClickDebounceTime=c,this):this._private.multiClickDebounceTime}};Fd.centre=Fd.center,Fd.autolockNodes=Fd.autolock,Fd.autoungrabifyNodes=Fd.autoungrabify;var po={data:Sa.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Sa.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Sa.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Sa.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};po.attr=po.data,po.removeAttr=po.removeData;var wc=function(c){var p=this,b=(c=nr({},c)).container;b&&!Pn(b)&&Pn(b[0])&&(b=b[0]);var A=b?b._cyreg:null;(A=A||{})&&A.cy&&(A.cy.destroy(),A={});var E=A.readies=A.readies||[];b&&(b._cyreg=A),A.cy=p;var M=void 0!==ze&&void 0!==b&&!c.headless,U=c;U.layout=nr({name:M?"grid":"null"},U.layout),U.renderer=nr({name:M?"canvas":"null"},U.renderer);var ne=function(Ke,ot,_t){return void 0!==ot?ot:void 0!==_t?_t:Ke},X=this._private={container:b,ready:!1,options:U,elements:new Cl(this),listeners:[],aniEles:new Cl(this),data:U.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:ne(!0,U.zoomingEnabled),userZoomingEnabled:ne(!0,U.userZoomingEnabled),panningEnabled:ne(!0,U.panningEnabled),userPanningEnabled:ne(!0,U.userPanningEnabled),boxSelectionEnabled:ne(!0,U.boxSelectionEnabled),autolock:ne(!1,U.autolock,U.autolockNodes),autoungrabify:ne(!1,U.autoungrabify,U.autoungrabifyNodes),autounselectify:ne(!1,U.autounselectify),styleEnabled:void 0===U.styleEnabled?M:U.styleEnabled,zoom:en(U.zoom)?U.zoom:1,pan:{x:Ht(U.pan)&&en(U.pan.x)?U.pan.x:0,y:Ht(U.pan)&&en(U.pan.y)?U.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:ne(250,U.multiClickDebounceTime)};this.createEmitter(),this.selectionType(U.selectionType),this.zoomRange({min:U.minZoom,max:U.maxZoom}),X.styleEnabled&&p.setStyle([]);var be=nr({},U,U.renderer);p.initRenderer(be),function(Ke,ot){if(Ke.some(li))return vl.all(Ke).then(ot);ot(Ke)}([U.style,U.elements],function($e){var Ke=$e[0],ot=$e[1];X.styleEnabled&&p.style().append(Ke),function(Ke,ot,_t){p.notifications(!1);var Et=p.mutableElements();Et.length>0&&Et.remove(),null!=Ke&&(Ht(Ke)||Qt(Ke))&&p.add(Ke),p.one("layoutready",function(Ut){p.notifications(!0),p.emit(Ut),p.one("load",ot),p.emitAndNotify("load")}).one("layoutstop",function(){p.one("done",_t),p.emit("done")});var $t=nr({},p._private.options.layout);$t.eles=p.elements(),p.layout($t).run()}(ot,function(){p.startAnimationLoop(),X.ready=!0,rn(U.ready)&&p.on("ready",U.ready);for(var _t=0;_t<E.length;_t++)p.on("ready",E[_t]);A&&(A.readies=[]),p.emit("ready")},U.done)})},md=wc.prototype;nr(md,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(c){return this.isReady()?this.emitter().emit("ready",[],c):this.on("ready",c),this},destroy:function(){var c=this;if(!c.destroyed())return c.stopAnimationLoop(),c.destroyRenderer(),this.emit("destroy"),c._private.destroyed=!0,c},hasElementWithId:function(c){return this._private.elements.hasElementWithId(c)},getElementById:function(c){return this._private.elements.getElementById(c)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(c){return this._private.elements.merge(c),this},removeFromPool:function(c){return this._private.elements.unmerge(c),this},container:function(){return this._private.container||null},mount:function(c){if(null!=c){var p=this,b=p._private,A=b.options;return!Pn(c)&&Pn(c[0])&&(c=c[0]),p.stopAnimationLoop(),p.destroyRenderer(),b.container=c,b.styleEnabled=!0,p.invalidateSize(),p.initRenderer(nr({},A,A.renderer,{name:"null"===A.renderer.name?"canvas":A.renderer.name})),p.startAnimationLoop(),p.style(A.style),p.emit("mount"),p}},unmount:function(){var c=this;return c.stopAnimationLoop(),c.destroyRenderer(),c.initRenderer({name:"null"}),c.emit("unmount"),c},options:function(){return ct(this._private.options)},json:function(c){var p=this,b=p._private,A=p.mutableElements();if(Ht(c)){if(p.startBatch(),c.elements){var M={},U=function(un,In){for(var En=[],hn=[],Mn=0;Mn<un.length;Mn++){var mn=un[Mn];if(mn.data.id){var Fn=""+mn.data.id,Rn=p.getElementById(Fn);M[Fn]=!0,0!==Rn.length?hn.push({ele:Rn,json:mn}):(In&&(mn.group=In),En.push(mn))}else we("cy.json() cannot handle elements without an ID attribute")}p.add(En);for(var Xt=0;Xt<hn.length;Xt++){var Nn=hn[Xt];Nn.ele.json(Nn.json)}};if(Qt(c.elements))U(c.elements);else for(var ne=["nodes","edges"],X=0;X<ne.length;X++){var fe=ne[X],be=c.elements[fe];Qt(be)&&U(be,fe)}var Ge=p.collection();A.filter(function(Ut){return!M[Ut.id()]}).forEach(function(Ut){Ut.isParent()?Ge.merge(Ut):Ut.remove()}),Ge.forEach(function(Ut){return Ut.children().move({parent:null})}),Ge.forEach(function(Ut){return(un=Ut,p.getElementById(un.id())).remove();var un})}c.style&&p.style(c.style),null!=c.zoom&&c.zoom!==b.zoom&&p.zoom(c.zoom),c.pan&&(c.pan.x!==b.pan.x||c.pan.y!==b.pan.y)&&p.pan(c.pan),c.data&&p.data(c.data);for(var $e=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],Ke=0;Ke<$e.length;Ke++){var ot=$e[Ke];null!=c[ot]&&p[ot](c[ot])}return p.endBatch(),this}var Et={};c?Et.elements=this.elements().map(function(Ut){return Ut.json()}):(Et.elements={},A.forEach(function(Ut){var un=Ut.group();Et.elements[un]||(Et.elements[un]=[]),Et.elements[un].push(Ut.json())})),this._private.styleEnabled&&(Et.style=p.style().json()),Et.data=ct(p.data());var $t=b.options;return Et.zoomingEnabled=b.zoomingEnabled,Et.userZoomingEnabled=b.userZoomingEnabled,Et.zoom=b.zoom,Et.minZoom=b.minZoom,Et.maxZoom=b.maxZoom,Et.panningEnabled=b.panningEnabled,Et.userPanningEnabled=b.userPanningEnabled,Et.pan=ct(b.pan),Et.boxSelectionEnabled=b.boxSelectionEnabled,Et.renderer=ct($t.renderer),Et.hideEdgesOnViewport=$t.hideEdgesOnViewport,Et.textureOnViewport=$t.textureOnViewport,Et.wheelSensitivity=$t.wheelSensitivity,Et.motionBlur=$t.motionBlur,Et.multiClickDebounceTime=$t.multiClickDebounceTime,Et}}),md.$id=md.getElementById,[Xa,Wl,qh,Wf,iu,bh,Yh,Ou,Am,Fd,po].forEach(function(g){nr(md,g)});var Wp={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,p){return!0},ready:void 0,stop:void 0,transform:function(c,p){return p}},Nd=function(c){return c.scratch("breadthfirst")},wh=function(c,p){return c.scratch("breadthfirst",p)};function _p(g){this.options=nr({},Wp,g)}_p.prototype.run=function(){var X,g=this.options,c=g,p=g.cy,b=c.eles,A=b.nodes().filter(function(Cs){return!Cs.isParent()}),E=b,M=c.directed,U=c.maximal||c.maximalAdjustments>0,ne=Gu(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:p.width(),h:p.height()});if(xt(c.roots))X=c.roots;else if(Qt(c.roots)){for(var fe=[],be=0;be<c.roots.length;be++){var $e=p.getElementById(c.roots[be]);fe.push($e)}X=p.collection(fe)}else if(Ct(c.roots))X=p.$(c.roots);else if(M)X=A.roots();else{var Ke=b.components();X=p.collection();for(var ot=function(ds){var ia=Ke[ds],Rr=ia.maxDegree(!1),Is=ia.filter(function(Ts){return Ts.degree(!1)===Rr});X=X.add(Is)},_t=0;_t<Ke.length;_t++)ot(_t)}var Et=[],$t={},Ut=function(ds,ia){null==Et[ia]&&(Et[ia]=[]);var Rr=Et[ia].length;Et[ia].push(ds),wh(ds,{index:Rr,depth:ia})};E.bfs({roots:X,directed:c.directed,visit:function(ds,ia,Rr,Is,Ts){var aa=ds[0],Ya=aa.id();Ut(aa,Ts),$t[Ya]=!0}});for(var In=[],En=0;En<A.length;En++){var hn=A[En];$t[hn.id()]||In.push(hn)}var Mn=function(ds){for(var ia=Et[ds],Rr=0;Rr<ia.length;Rr++){var Is=ia[Rr];null!=Is?wh(Is,{depth:ds,index:Rr}):(ia.splice(Rr,1),Rr--)}},mn=function(){for(var ds=0;ds<Et.length;ds++)Mn(ds)},Fn=function(ds,ia){for(var Rr=Nd(ds),Is=ds.incomers().filter(function(Cn){return Cn.isNode()&&b.has(Cn)}),Ts=-1,aa=ds.id(),Ya=0;Ya<Is.length;Ya++){var Yr=Nd(Is[Ya]);Ts=Math.max(Ts,Yr.depth)}return Rr.depth<=Ts&&(ia[aa]?null:(function(ds,ia){var Rr=Nd(ds);Et[Rr.depth][Rr.index]=null,Ut(ds,ia)}(ds,Ts+1),ia[aa]=!0,!0))};if(M&&U){var Rn=[],Xt={},Nn=function(ds){return Rn.push(ds)};for(A.forEach(function(Cs){return Rn.push(Cs)});Rn.length>0;){var gi=Rn.shift(),$n=Fn(gi,Xt);if($n)gi.outgoers().filter(function(Cs){return Cs.isNode()&&b.has(Cs)}).forEach(Nn);else if(null===$n){we("Detected double maximal shift for node `"+gi.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}mn();var ai=0;if(c.avoidOverlap)for(var wi=0;wi<A.length;wi++){var er=A[wi].layoutDimensions(c);ai=Math.max(ai,er.w,er.h)}var hr={},Ar=function(ds){if(hr[ds.id()])return hr[ds.id()];for(var ia=Nd(ds).depth,Rr=ds.neighborhood(),Is=0,Ts=0,aa=0;aa<Rr.length;aa++){var Ya=Rr[aa];if(!Ya.isEdge()&&!Ya.isParent()&&A.has(Ya)){var oa=Nd(Ya);if(null!=oa){var Yr=oa.index,Cn=oa.depth;null!=Yr&&null!=Cn&&Cn<ia&&(Is+=Yr/Et[Cn].length,Ts++)}}}return Is/=Ts=Math.max(1,Ts),0===Ts&&(Is=0),hr[ds.id()]=Is,Is},mr=function(ds,ia){var Ts=Ar(ds)-Ar(ia);return 0===Ts?Hr(ds.id(),ia.id()):Ts};void 0!==c.depthSort&&(mr=c.depthSort);for(var pr=0;pr<Et.length;pr++)Et[pr].sort(mr),Mn(pr);for(var Si=[],sr=0;sr<In.length;sr++)Si.push(In[sr]);Et.unshift(Si),mn();for(var Sr=0,ts=0;ts<Et.length;ts++)Sr=Math.max(Et[ts].length,Sr);var ps_x=ne.x1+ne.w/2,ps_y=ne.x1+ne.h/2,Xs=Et.reduce(function(Cs,ds){return Math.max(Cs,ds.length)},0);return b.nodes().layoutPositions(this,c,function(ds){var ia=Nd(ds),Rr=ia.depth,Is=ia.index,Ts=Et[Rr].length,aa=Math.max(ne.w/((c.grid?Xs:Ts)+1),ai),Ya=Math.max(ne.h/(Et.length+1),ai),oa=Math.min(ne.w/2/Et.length,ne.h/2/Et.length);if(oa=Math.max(oa,ai),c.circle){var Cn=oa*Rr+oa-(Et.length>0&&Et[0].length<=3?oa/2:0),qi=2*Math.PI/Et[Rr].length*Is;return 0===Rr&&1===Et[0].length&&(Cn=1),{x:ps_x+Cn*Math.cos(qi),y:ps_y+Cn*Math.sin(qi)}}return{x:ps_x+(Is+1-(Ts+1)/2)*aa,y:(Rr+1)*Ya}}),this};var yp={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,p){return!0},ready:void 0,stop:void 0,transform:function(c,p){return p}};function Im(g){this.options=nr({},yp,g)}Im.prototype.run=function(){var g=this.options,c=g,p=g.cy,b=c.eles,A=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,E=b.nodes().not(":parent");c.sort&&(E=E.sort(c.sort));for(var fe,M=Gu(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:p.width(),h:p.height()}),U={x:M.x1+M.w/2,y:M.y1+M.h/2},X=(void 0===c.sweep?2*Math.PI-2*Math.PI/E.length:c.sweep)/Math.max(1,E.length-1),be=0,Ge=0;Ge<E.length;Ge++){var Ke=E[Ge].layoutDimensions(c);be=Math.max(be,Ke.w,Ke.h)}if(fe=en(c.radius)?c.radius:E.length<=1?0:Math.min(M.h,M.w)/2-be,E.length>1&&c.avoidOverlap){be*=1.75;var Et=Math.cos(X)-Math.cos(0),$t=Math.sin(X)-Math.sin(0),Ut=Math.sqrt(be*be/(Et*Et+$t*$t));fe=Math.max(Ut,fe)}return b.nodes().layoutPositions(this,c,function(En,hn){var Mn=c.startAngle+hn*X*(A?1:-1),mn=fe*Math.cos(Mn),Fn=fe*Math.sin(Mn);return{x:U.x+mn,y:U.y+Fn}}),this};var xc={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(c){return c.degree()},levelWidth:function(c){return c.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,p){return!0},ready:void 0,stop:void 0,transform:function(c,p){return p}};function Nu(g){this.options=nr({},xc,g)}Nu.prototype.run=function(){for(var g=this.options,c=g,p=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,b=g.cy,A=c.eles,E=A.nodes().not(":parent"),M=Gu(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:b.width(),h:b.height()}),U={x:M.x1+M.w/2,y:M.y1+M.h/2},ne=[],X=0,fe=0;fe<E.length;fe++){var Ge,be=E[fe];Ge=c.concentric(be),ne.push({value:Ge,node:be}),be._private.scratch.concentric=Ge}E.updateStyle();for(var $e=0;$e<E.length;$e++){var ot=E[$e].layoutDimensions(c);X=Math.max(X,ot.w,ot.h)}ne.sort(function(Cs,ds){return ds.value-Cs.value});for(var _t=c.levelWidth(E),Et=[[]],$t=Et[0],Ut=0;Ut<ne.length;Ut++){var un=ne[Ut];$t.length>0&&Math.abs($t[0].value-un.value)>=_t&&Et.push($t=[]),$t.push(un)}var En=X+c.minNodeSpacing;if(!c.avoidOverlap){var hn=Et.length>0&&Et[0].length>1,Mn=Math.min(M.w,M.h)/2-En;En=Math.min(En,Mn/(Et.length+hn?1:0))}for(var Fn=0,Rn=0;Rn<Et.length;Rn++){var Xt=Et[Rn],Nn=void 0===c.sweep?2*Math.PI-2*Math.PI/Xt.length:c.sweep,xn=Xt.dTheta=Nn/Math.max(1,Xt.length-1);if(Xt.length>1&&c.avoidOverlap){var gi=Math.cos(xn)-Math.cos(0),$n=Math.sin(xn)-Math.sin(0),ai=Math.sqrt(En*En/(gi*gi+$n*$n));Fn=Math.max(ai,Fn)}Xt.r=Fn,Fn+=En}if(c.equidistant){for(var wi=0,Pi=0,er=0;er<Et.length;er++)wi=Math.max(wi,Et[er].r-Pi);Pi=0;for(var hr=0;hr<Et.length;hr++){var Ar=Et[hr];0===hr&&(Pi=Ar.r),Ar.r=Pi,Pi+=wi}}for(var mr={},pr=0;pr<Et.length;pr++)for(var Si=Et[pr],sr=Si.dTheta,Sr=Si.r,ts=0;ts<Si.length;ts++){var ps=Si[ts],Xs=c.startAngle+(p?1:-1)*sr*ts,sa={x:U.x+Sr*Math.cos(Xs),y:U.y+Sr*Math.sin(Xs)};mr[ps.node.id()]=sa}return A.nodes().layoutPositions(this,c,function(Cs){var ds=Cs.id();return mr[ds]}),this};var Bd,jf={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(c,p){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(c){return 2048},nodeOverlap:4,idealEdgeLength:function(c){return 32},edgeElasticity:function(c){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Kh(g){this.options=nr({},jf,g),this.options.layout=this}Kh.prototype.run=function(){var g=this.options,c=g.cy,p=this;p.stopped=!1,(!0===g.animate||!1===g.animate)&&p.emit({type:"layoutstart",layout:p}),Bd=!0===g.debug;var b=uf(c,p,g);Bd&&(void 0)(b),g.randomize&&$f(b);var A=Z(),E=function(){hv(b,c,g),!0===g.fit&&c.fit(g.padding)},M=function(Ge){return!(p.stopped||Ge>=g.numIter||(Sm(b,g),b.temperature=b.temperature*g.coolingFactor,b.temperature<g.minTemp))},U=function(){if(!0===g.animate||!1===g.animate)E(),p.one("layoutstop",g.stop),p.emit({type:"layoutstop",layout:p});else{var Ge=g.eles.nodes(),$e=xh(b,g,Ge);Ge.layoutPositions(p,g,$e)}},ne=0,X=!0;if(!0===g.animate)!function be(){for(var Ge=0;X&&Ge<g.refresh;)X=M(ne),ne++,Ge++;X?(Z()-A>=g.animationThreshold&&E(),H(be)):(cf(b,g),U())}();else{for(;X;)X=M(ne),ne++;cf(b,g),U()}return this},Kh.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Kh.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var uf=function(c,p,b){for(var A=b.eles.edges(),E=b.eles.nodes(),M={isCompound:c.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:E.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:A.size(),temperature:b.initialTemp,clientWidth:c.width(),clientHeight:c.width(),boundingBox:Gu(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()})},U=b.eles.components(),ne={},X=0;X<U.length;X++)for(var fe=U[X],be=0;be<fe.length;be++)ne[fe[be].id()]=X;for(X=0;X<M.nodeSize;X++){var Ke=($e=E[X]).layoutDimensions(b);(ot={}).isLocked=$e.locked(),ot.id=$e.data("id"),ot.parentId=$e.data("parent"),ot.cmptId=ne[$e.id()],ot.children=[],ot.positionX=$e.position("x"),ot.positionY=$e.position("y"),ot.offsetX=0,ot.offsetY=0,ot.height=Ke.w,ot.width=Ke.h,ot.maxX=ot.positionX+ot.width/2,ot.minX=ot.positionX-ot.width/2,ot.maxY=ot.positionY+ot.height/2,ot.minY=ot.positionY-ot.height/2,ot.padLeft=parseFloat($e.style("padding")),ot.padRight=parseFloat($e.style("padding")),ot.padTop=parseFloat($e.style("padding")),ot.padBottom=parseFloat($e.style("padding")),ot.nodeRepulsion=rn(b.nodeRepulsion)?b.nodeRepulsion($e):b.nodeRepulsion,M.layoutNodes.push(ot),M.idToIndex[ot.id]=X}var _t=[],Et=0,$t=-1,Ut=[];for(X=0;X<M.nodeSize;X++){var $e,un=($e=M.layoutNodes[X]).parentId;null!=un?M.layoutNodes[M.idToIndex[un]].children.push($e.id):(_t[++$t]=$e.id,Ut.push($e.id))}for(M.graphSet.push(Ut);Et<=$t;){var In=_t[Et++],hn=M.layoutNodes[M.idToIndex[In]].children;if(hn.length>0)for(M.graphSet.push(hn),X=0;X<hn.length;X++)_t[++$t]=hn[X]}for(X=0;X<M.graphSet.length;X++){var Mn=M.graphSet[X];for(be=0;be<Mn.length;be++)M.indexToGraph[M.idToIndex[Mn[be]]]=X}for(X=0;X<M.edgeSize;X++){var Fn=A[X],Rn={};Rn.id=Fn.data("id"),Rn.sourceId=Fn.data("source"),Rn.targetId=Fn.data("target");var Xt=rn(b.idealEdgeLength)?b.idealEdgeLength(Fn):b.idealEdgeLength,Nn=rn(b.edgeElasticity)?b.edgeElasticity(Fn):b.edgeElasticity,xn=M.idToIndex[Rn.sourceId],gi=M.idToIndex[Rn.targetId];if(M.indexToGraph[xn]!=M.indexToGraph[gi]){for(var wi=ji(Rn.sourceId,Rn.targetId,M),Pi=M.graphSet[wi],er=0,ot=M.layoutNodes[xn];-1===Pi.indexOf(ot.id);)ot=M.layoutNodes[M.idToIndex[ot.parentId]],er++;for(ot=M.layoutNodes[gi];-1===Pi.indexOf(ot.id);)ot=M.layoutNodes[M.idToIndex[ot.parentId]],er++;Xt*=er*b.nestingFactor}Rn.idealLength=Xt,Rn.elasticity=Nn,M.layoutEdges.push(Rn)}return M},ji=function(c,p,b){var A=bp(c,p,0,b);return 2>A.count?0:A.graph},bp=function g(c,p,b,A){var E=A.graphSet[b];if(-1<E.indexOf(c)&&-1<E.indexOf(p))return{count:2,graph:b};for(var M=0,U=0;U<E.length;U++){var fe=A.layoutNodes[A.idToIndex[E[U]]].children;if(0!==fe.length){var Ge=g(c,p,A.indexToGraph[A.idToIndex[fe[0]]],A);if(0!==Ge.count){if(1!==Ge.count)return Ge;if(2==++M)break}}}return{count:M,graph:b}},$f=function(c,p){for(var b=c.clientWidth,A=c.clientHeight,E=0;E<c.nodeSize;E++){var M=c.layoutNodes[E];0===M.children.length&&!M.isLocked&&(M.positionX=Math.random()*b,M.positionY=Math.random()*A)}},xh=function(c,p,b){var A=c.boundingBox,E={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return p.boundingBox&&(b.forEach(function(M){var U=c.layoutNodes[c.idToIndex[M.data("id")]];E.x1=Math.min(E.x1,U.positionX),E.x2=Math.max(E.x2,U.positionX),E.y1=Math.min(E.y1,U.positionY),E.y2=Math.max(E.y2,U.positionY)}),E.w=E.x2-E.x1,E.h=E.y2-E.y1),function(M,U){var ne=c.layoutNodes[c.idToIndex[M.data("id")]];return p.boundingBox?{x:A.x1+(ne.positionX-E.x1)/E.w*A.w,y:A.y1+(ne.positionY-E.y1)/E.h*A.h}:{x:ne.positionX,y:ne.positionY}}},hv=function(c,p,b){var A=b.layout,E=b.eles.nodes(),M=xh(c,b,E);E.positions(M),!0!==c.ready&&(c.ready=!0,A.one("layoutready",b.ready),A.emit({type:"layoutready",layout:this}))},Sm=function(c,p,b){jp(c,p),lh(c),Tm(c,p),$p(c),Zu(c)},jp=function(c,p){for(var b=0;b<c.graphSet.length;b++)for(var A=c.graphSet[b],E=A.length,M=0;M<E;M++)for(var U=c.layoutNodes[c.idToIndex[A[M]]],ne=M+1;ne<E;ne++)Bu(U,c.layoutNodes[c.idToIndex[A[ne]]],c,p)},Zh=function(c){return-c+2*c*Math.random()},Bu=function(c,p,b,A){if(c.cmptId===p.cmptId||b.isCompound){var U=p.positionX-c.positionX,ne=p.positionY-c.positionY;0===U&&0===ne&&(U=Zh(1),ne=Zh(1));var fe=Em(c,p,U,ne);if(fe>0)var $e=(be=A.nodeOverlap*fe)*U/(Ge=Math.sqrt(U*U+ne*ne)),Ke=be*ne/Ge;else{var be,ot=vd(c,U,ne),_t=vd(p,-1*U,-1*ne),Et=_t.x-ot.x,$t=_t.y-ot.y,Ut=Et*Et+$t*$t,Ge=Math.sqrt(Ut);$e=(be=(c.nodeRepulsion+p.nodeRepulsion)/Ut)*Et/Ge,Ke=be*$t/Ge}c.isLocked||(c.offsetX-=$e,c.offsetY-=Ke),p.isLocked||(p.offsetX+=$e,p.offsetY+=Ke)}},Em=function(c,p,b,A){if(b>0)var E=c.maxX-p.minX;else E=p.maxX-c.minX;if(A>0)var M=c.maxY-p.minY;else M=p.maxY-c.minY;return E>=0&&M>=0?Math.sqrt(E*E+M*M):0},vd=function(c,p,b){var A=c.positionX,E=c.positionY,M=c.height||1,U=c.width||1,ne=b/p,X=M/U,fe={};return 0===p&&0<b||0===p&&0>b?(fe.x=A,fe.y=E+M/2,fe):0<p&&-1*X<=ne&&ne<=X?(fe.x=A+U/2,fe.y=E+U*b/2/p,fe):0>p&&-1*X<=ne&&ne<=X?(fe.x=A-U/2,fe.y=E-U*b/2/p,fe):0<b&&(ne<=-1*X||ne>=X)?(fe.x=A+M*p/2/b,fe.y=E+M/2,fe):(0>b&&(ne<=-1*X||ne>=X)&&(fe.x=A-M*p/2/b,fe.y=E-M/2),fe)},lh=function(c,p){for(var b=0;b<c.edgeSize;b++){var A=c.layoutEdges[b],M=c.layoutNodes[c.idToIndex[A.sourceId]],ne=c.layoutNodes[c.idToIndex[A.targetId]],X=ne.positionX-M.positionX,fe=ne.positionY-M.positionY;if(0!==X||0!==fe){var be=vd(M,X,fe),Ge=vd(ne,-1*X,-1*fe),$e=Ge.x-be.x,Ke=Ge.y-be.y,ot=Math.sqrt($e*$e+Ke*Ke),_t=Math.pow(A.idealLength-ot,2)/A.elasticity;if(0!==ot)var Et=_t*$e/ot,$t=_t*Ke/ot;else Et=0,$t=0;M.isLocked||(M.offsetX+=Et,M.offsetY+=$t),ne.isLocked||(ne.offsetX-=Et,ne.offsetY-=$t)}}},Tm=function(c,p){if(0!==p.gravity)for(var A=0;A<c.graphSet.length;A++){var E=c.graphSet[A],M=E.length;if(0===A)var U=c.clientHeight/2,ne=c.clientWidth/2;else{var fe=c.layoutNodes[c.idToIndex[c.layoutNodes[c.idToIndex[E[0]]].parentId]];U=fe.positionX,ne=fe.positionY}for(var be=0;be<M;be++){var Ge=c.layoutNodes[c.idToIndex[E[be]]];if(!Ge.isLocked){var $e=U-Ge.positionX,Ke=ne-Ge.positionY,ot=Math.sqrt($e*$e+Ke*Ke);if(ot>1){var Et=p.gravity*Ke/ot;Ge.offsetX+=p.gravity*$e/ot,Ge.offsetY+=Et}}}}},$p=function(c,p){var b=[],A=0,E=-1;for(b.push.apply(b,c.graphSet[0]),E+=c.graphSet[0].length;A<=E;){var M=b[A++],ne=c.layoutNodes[c.idToIndex[M]],X=ne.children;if(0<X.length&&!ne.isLocked){for(var fe=ne.offsetX,be=ne.offsetY,Ge=0;Ge<X.length;Ge++){var $e=c.layoutNodes[c.idToIndex[X[Ge]]];$e.offsetX+=fe,$e.offsetY+=be,b[++E]=X[Ge]}ne.offsetX=0,ne.offsetY=0}}},Zu=function(c,p){for(var b=0;b<c.nodeSize;b++)0<(A=c.layoutNodes[b]).children.length&&(A.maxX=void 0,A.minX=void 0,A.maxY=void 0,A.minY=void 0);for(b=0;b<c.nodeSize;b++)if(!(0<(A=c.layoutNodes[b]).children.length||A.isLocked)){var E=_d(A.offsetX,A.offsetY,c.temperature);A.positionX+=E.x,A.positionY+=E.y,A.offsetX=0,A.offsetY=0,A.minX=A.positionX-A.width,A.maxX=A.positionX+A.width,A.minY=A.positionY-A.height,A.maxY=A.positionY+A.height,Mm(A,c)}for(b=0;b<c.nodeSize;b++){var A;0<(A=c.layoutNodes[b]).children.length&&!A.isLocked&&(A.positionX=(A.maxX+A.minX)/2,A.positionY=(A.maxY+A.minY)/2,A.width=A.maxX-A.minX,A.height=A.maxY-A.minY)}},_d=function(c,p,b){var A=Math.sqrt(c*c+p*p);if(A>b)var E={x:b*c/A,y:b*p/A};else E={x:c,y:p};return E},Mm=function g(c,p){var b=c.parentId;if(null!=b){var A=p.layoutNodes[p.idToIndex[b]],E=!1;if((null==A.maxX||c.maxX+A.padRight>A.maxX)&&(A.maxX=c.maxX+A.padRight,E=!0),(null==A.minX||c.minX-A.padLeft<A.minX)&&(A.minX=c.minX-A.padLeft,E=!0),(null==A.maxY||c.maxY+A.padBottom>A.maxY)&&(A.maxY=c.maxY+A.padBottom,E=!0),(null==A.minY||c.minY-A.padTop<A.minY)&&(A.minY=c.minY-A.padTop,E=!0),E)return g(A,p)}},cf=function(c,p){for(var b=c.layoutNodes,A=[],E=0;E<b.length;E++){var M=b[E],U=M.cmptId;(A[U]=A[U]||[]).push(M)}var X=0;for(E=0;E<A.length;E++)if(fe=A[E]){fe.x1=1/0,fe.x2=-1/0,fe.y1=1/0,fe.y2=-1/0;for(var be=0;be<fe.length;be++){var Ge=fe[be];fe.x1=Math.min(fe.x1,Ge.positionX-Ge.width/2),fe.x2=Math.max(fe.x2,Ge.positionX+Ge.width/2),fe.y1=Math.min(fe.y1,Ge.positionY-Ge.height/2),fe.y2=Math.max(fe.y2,Ge.positionY+Ge.height/2)}fe.w=fe.x2-fe.x1,fe.h=fe.y2-fe.y1,X+=fe.w*fe.h}A.sort(function($t,Ut){return Ut.w*Ut.h-$t.w*$t.h});var $e=0,Ke=0,ot=0,_t=0,Et=Math.sqrt(X)*c.clientWidth/c.clientHeight;for(E=0;E<A.length;E++){var fe;if(fe=A[E]){for(be=0;be<fe.length;be++)(Ge=fe[be]).isLocked||(Ge.positionX+=$e-fe.x1,Ge.positionY+=Ke-fe.y1);$e+=fe.w+p.componentSpacing,ot+=fe.w+p.componentSpacing,_t=Math.max(_t,fe.h),ot>Et&&(Ke+=_t+p.componentSpacing,$e=0,ot=0,_t=0)}}},oc={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(c){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,p){return!0},ready:void 0,stop:void 0,transform:function(c,p){return p}};function Ah(g){this.options=nr({},oc,g)}Ah.prototype.run=function(){var g=this.options,c=g,p=g.cy,b=c.eles,A=b.nodes().not(":parent");c.sort&&(A=A.sort(c.sort));var E=Gu(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:p.width(),h:p.height()});if(0===E.h||0===E.w)b.nodes().layoutPositions(this,c,function(hr){return{x:E.x1,y:E.y1}});else{var M=A.size(),U=Math.sqrt(M*E.h/E.w),ne=Math.round(U),X=Math.round(E.w/E.h*U),fe=function(Ar){if(null==Ar)return Math.min(ne,X);Math.min(ne,X)==ne?ne=Ar:X=Ar},be=function(Ar){if(null==Ar)return Math.max(ne,X);Math.max(ne,X)==ne?ne=Ar:X=Ar},Ge=c.rows,$e=null!=c.cols?c.cols:c.columns;if(null!=Ge&&null!=$e)ne=Ge,X=$e;else if(null!=Ge&&null==$e)ne=Ge,X=Math.ceil(M/ne);else if(null==Ge&&null!=$e)X=$e,ne=Math.ceil(M/X);else if(X*ne>M){var Ke=fe(),ot=be();(Ke-1)*ot>=M?fe(Ke-1):(ot-1)*Ke>=M&&be(ot-1)}else for(;X*ne<M;){var _t=fe(),Et=be();(Et+1)*_t>=M?be(Et+1):fe(_t+1)}var $t=E.w/X,Ut=E.h/ne;if(c.condense&&($t=0,Ut=0),c.avoidOverlap)for(var un=0;un<A.length;un++){var In=A[un],En=In._private.position;(null==En.x||null==En.y)&&(En.x=0,En.y=0);var hn=In.layoutDimensions(c),Mn=c.avoidOverlapPadding,Fn=hn.h+Mn;$t=Math.max($t,hn.w+Mn),Ut=Math.max(Ut,Fn)}for(var Rn={},Xt=function(Ar,mr){return!!Rn["c-"+Ar+"-"+mr]},Nn=function(Ar,mr){Rn["c-"+Ar+"-"+mr]=!0},xn=0,gi=0,$n=function(){++gi>=X&&(gi=0,xn++)},ai={},wi=0;wi<A.length;wi++){var Pi=A[wi],er=c.position(Pi);if(er&&(void 0!==er.row||void 0!==er.col)){var xi={row:er.row,col:er.col};if(void 0===xi.col)for(xi.col=0;Xt(xi.row,xi.col);)xi.col++;else if(void 0===xi.row)for(xi.row=0;Xt(xi.row,xi.col);)xi.row++;ai[Pi.id()]=xi,Nn(xi.row,xi.col)}}A.layoutPositions(this,c,function(Ar,mr){var pr,Si;if(Ar.locked()||Ar.isParent())return!1;var sr=ai[Ar.id()];if(sr)pr=sr.col*$t+$t/2+E.x1,Si=sr.row*Ut+Ut/2+E.y1;else{for(;Xt(xn,gi);)$n();pr=gi*$t+$t/2+E.x1,Si=xn*Ut+Ut/2+E.y1,Nn(xn,gi),$n()}return{x:pr,y:Si}})}return this};var qf={ready:function(){},stop:function(){}};function hf(g){this.options=nr({},qf,g)}hf.prototype.run=function(){var g=this.options,c=g.eles,p=this;return p.emit("layoutstart"),c.nodes().positions(function(){return{x:0,y:0}}),p.one("layoutready",g.ready),p.emit("layoutready"),p.one("layoutstop",g.stop),p.emit("layoutstop"),this},hf.prototype.stop=function(){return this};var qp={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,p){return!0},ready:void 0,stop:void 0,transform:function(c,p){return p}};function Qh(g){this.options=nr({},qp,g)}Qh.prototype.run=function(){var g=this.options,p=g.eles.nodes(),b=rn(g.positions);return p.layoutPositions(this,g,function(E,M){var U=function A(E){return null==g.positions?function(c){return{x:c.x,y:c.y}}(E.position()):b?g.positions(E):g.positions[E._private.data.id]??null}(E);return!E.locked()&&null!=U&&U}),this};var ma={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,p){return!0},ready:void 0,stop:void 0,transform:function(c,p){return p}};function Xp(g){this.options=nr({},ma,g)}Xp.prototype.run=function(){var g=this.options,c=g.cy,p=g.eles,b=Gu(g.boundingBox?g.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});return p.nodes().layoutPositions(this,g,function(M,U){return{x:b.x1+Math.round(Math.random()*b.w),y:b.y1+Math.round(Math.random()*b.h)}}),this};var Dm=[{name:"breadthfirst",impl:_p},{name:"circle",impl:Im},{name:"concentric",impl:Nu},{name:"cose",impl:Kh},{name:"grid",impl:Ah},{name:"null",impl:hf},{name:"preset",impl:Qh},{name:"random",impl:Xp}];function Xf(g){this.options=g,this.notifications=0}var Cp=function(){},Yp=function(){throw new Error("A headless instance can not render images")};Xf.prototype={recalculateRenderedStyle:Cp,notify:function(){this.notifications++},init:Cp,isHeadless:function(){return!0},png:Yp,jpg:Yp};var Rg={arrowShapeWidth:.3,registerArrowShapes:function(){var g=this.arrowShapes={},c=this,p=function(X,fe,be,Ge,$e,Ke,ot){return $e.x-be/2-ot<=X&&X<=$e.x+be/2+ot&&$e.y-be/2-ot<=fe&&fe<=$e.y+be/2+ot},b=function(X,fe,be,Ge,$e){var Ke=X*Math.cos(Ge)-fe*Math.sin(Ge),ot=X*Math.sin(Ge)+fe*Math.cos(Ge);return{x:Ke*be+$e.x,y:ot*be+$e.y}},A=function(X,fe,be,Ge){for(var $e=[],Ke=0;Ke<X.length;Ke+=2)$e.push(b(X[Ke],X[Ke+1],fe,be,Ge));return $e},E=function(X){for(var fe=[],be=0;be<X.length;be++){var Ge=X[be];fe.push(Ge.x,Ge.y)}return fe},M=function(X){return X.pstyle("width").pfValue*X.pstyle("arrow-scale").pfValue*2},U=function(X,fe){Ct(fe)&&(fe=g[fe]),g[X]=nr({name:X,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(Ge,$e,Ke,ot,_t,Et){var $t=E(A(this.points,Ke+2*Et,ot,_t));return fl(Ge,$e,$t)},roughCollide:p,draw:function(Ge,$e,Ke,ot){var _t=A(this.points,$e,Ke,ot);c.arrowShapeImpl("polygon")(Ge,_t)},spacing:function(Ge){return 0},gap:M},fe)};U("none",{collide:Bt,roughCollide:Bt,draw:Pe,spacing:qt,gap:qt}),U("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),U("arrow","triangle"),U("triangle-backcurve",{points:g.triangle.points,controlPoint:[0,-.15],roughCollide:p,draw:function(X,fe,be,Ge,$e){var Ke=A(this.points,fe,be,Ge),ot=this.controlPoint,_t=b(ot[0],ot[1],fe,be,Ge);c.arrowShapeImpl(this.name)(X,Ke,_t)},gap:function(X){return.8*M(X)}}),U("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(X,fe,be,Ge,$e,Ke,ot){var _t=E(A(this.points,be+2*ot,Ge,$e)),Et=E(A(this.pointsTee,be+2*ot,Ge,$e));return fl(X,fe,_t)||fl(X,fe,Et)},draw:function(X,fe,be,Ge,$e){var Ke=A(this.points,fe,be,Ge),ot=A(this.pointsTee,fe,be,Ge);c.arrowShapeImpl(this.name)(X,Ke,ot)}}),U("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(X,fe,be,Ge,$e,Ke,ot){var _t=$e,Et=Math.pow(_t.x-X,2)+Math.pow(_t.y-fe,2)<=Math.pow((be+2*ot)*this.radius,2),$t=E(A(this.points,be+2*ot,Ge,$e));return fl(X,fe,$t)||Et},draw:function(X,fe,be,Ge,$e){var Ke=A(this.pointsTr,fe,be,Ge);c.arrowShapeImpl(this.name)(X,Ke,Ge.x,Ge.y,this.radius*fe)},spacing:function(X){return c.getArrowWidth(X.pstyle("width").pfValue,X.pstyle("arrow-scale").value)*this.radius}}),U("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(X,fe){var be=this.baseCrossLinePts.slice(),Ge=fe/X;return be[3]=be[3]-Ge,be[5]=be[5]-Ge,be},collide:function(X,fe,be,Ge,$e,Ke,ot){var _t=E(A(this.points,be+2*ot,Ge,$e)),Et=E(A(this.crossLinePts(be,Ke),be+2*ot,Ge,$e));return fl(X,fe,_t)||fl(X,fe,Et)},draw:function(X,fe,be,Ge,$e){var Ke=A(this.points,fe,be,Ge),ot=A(this.crossLinePts(fe,$e),fe,be,Ge);c.arrowShapeImpl(this.name)(X,Ke,ot)}}),U("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(X){return.525*M(X)}}),U("circle",{radius:.15,collide:function(X,fe,be,Ge,$e,Ke,ot){var _t=$e;return Math.pow(_t.x-X,2)+Math.pow(_t.y-fe,2)<=Math.pow((be+2*ot)*this.radius,2)},draw:function(X,fe,be,Ge,$e){c.arrowShapeImpl(this.name)(X,Ge.x,Ge.y,this.radius*fe)},spacing:function(X){return c.getArrowWidth(X.pstyle("width").pfValue,X.pstyle("arrow-scale").value)*this.radius}}),U("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(X){return 1},gap:function(X){return 1}}),U("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),U("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(X){return X.pstyle("width").pfValue*X.pstyle("arrow-scale").value}}),U("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(X){return.95*X.pstyle("width").pfValue*X.pstyle("arrow-scale").value}})}},$l={projectIntoViewport:function(g,c){var p=this.cy,b=this.findContainerClientCoords(),A=b[0],E=b[1],M=b[4],U=p.pan(),ne=p.zoom();return[((g-A)/M-U.x)/ne,((c-E)/M-U.y)/ne]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var g=this.container,c=g.getBoundingClientRect(),p=ze.getComputedStyle(g),b=function(Et){return parseFloat(p.getPropertyValue(Et))},A_left=b("padding-left"),A_right=b("padding-right"),A_top=b("padding-top"),A_bottom=b("padding-bottom"),E_left=b("border-left-width"),E_right=b("border-right-width"),E_top=b("border-top-width"),M=(b("border-bottom-width"),g.clientWidth);return this.containerBB=[c.left+A_left+E_left,c.top+A_top+E_top,M-(A_left+A_right),g.clientHeight-(A_top+A_bottom),c.width/(M+(E_left+E_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(g,c,p,b){return this.findNearestElements(g,c,p,b)[0]},findNearestElements:function(g,c,p,b){var Ke,ot,A=this,E=this,M=E.getCachedZSortedEles(),U=[],ne=E.cy.zoom(),X=E.cy.hasCompoundNodes(),fe=(b?24:8)/ne,be=(b?8:2)/ne,Ge=(b?8:2)/ne,$e=1/0;function _t(hn,Mn){if(hn.isNode()){if(ot)return;ot=hn,U.push(hn)}if(hn.isEdge()&&(null==Mn||Mn<$e))if(Ke){if(Ke.pstyle("z-compound-depth").value===hn.pstyle("z-compound-depth").value&&Ke.pstyle("z-compound-depth").value===hn.pstyle("z-compound-depth").value)for(var mn=0;mn<U.length;mn++)if(U[mn].isEdge()){U[mn]=hn,Ke=hn,$e=Mn??$e;break}}else U.push(hn),Ke=hn,$e=Mn??$e}function Et(hn){var Mn=hn.outerWidth()+2*be,mn=hn.outerHeight()+2*be,Fn=Mn/2,Rn=mn/2,Xt=hn.position();if(Xt.x-Fn<=g&&g<=Xt.x+Fn&&Xt.y-Rn<=c&&c<=Xt.y+Rn&&E.nodeShapes[A.getNodeShape(hn)].checkPoint(g,c,0,Mn,mn,Xt.x,Xt.y))return _t(hn,0),!0}function $t(hn){var gi,Mn=hn._private,mn=Mn.rscratch,Fn=hn.pstyle("width").pfValue,Rn=hn.pstyle("arrow-scale").value,Xt=Fn/2+fe,Nn=Xt*Xt,xn=2*Xt,wi=Mn.source,Pi=Mn.target;if("segments"===mn.edgeType||"straight"===mn.edgeType||"haystack"===mn.edgeType){for(var $n=mn.allpts,ai=0;ai+3<$n.length;ai+=2)if(Lu(g,c,$n[ai],$n[ai+1],$n[ai+2],$n[ai+3],xn)&&Nn>(gi=Bh(g,c,$n[ai],$n[ai+1],$n[ai+2],$n[ai+3])))return _t(hn,gi),!0}else if("bezier"===mn.edgeType||"multibezier"===mn.edgeType||"self"===mn.edgeType||"compound"===mn.edgeType)for($n=mn.allpts,ai=0;ai+5<mn.allpts.length;ai+=4)if(qv(g,c,$n[ai],$n[ai+1],$n[ai+2],$n[ai+3],$n[ai+4],$n[ai+5],xn)&&Nn>(gi=Jm(g,c,$n[ai],$n[ai+1],$n[ai+2],$n[ai+3],$n[ai+4],$n[ai+5])))return _t(hn,gi),!0;wi=wi||Mn.source,Pi=Pi||Mn.target;var er=A.getArrowWidth(Fn,Rn),xi=[{name:"source",x:mn.arrowStartX,y:mn.arrowStartY,angle:mn.srcArrowAngle},{name:"target",x:mn.arrowEndX,y:mn.arrowEndY,angle:mn.tgtArrowAngle},{name:"mid-source",x:mn.midX,y:mn.midY,angle:mn.midsrcArrowAngle},{name:"mid-target",x:mn.midX,y:mn.midY,angle:mn.midtgtArrowAngle}];for(ai=0;ai<xi.length;ai++){var Ki=xi[ai],hr=E.arrowShapes[hn.pstyle(Ki.name+"-arrow-shape").value],Ar=hn.pstyle("width").pfValue;if(hr.roughCollide(g,c,er,Ki.angle,{x:Ki.x,y:Ki.y},Ar,fe)&&hr.collide(g,c,er,Ki.angle,{x:Ki.x,y:Ki.y},Ar,fe))return _t(hn),!0}X&&U.length>0&&(Et(wi),Et(Pi))}function Ut(hn,Mn,mn){return Ei(hn,Mn,mn)}function un(hn,Mn){var Rn,mn=hn._private,Fn=Ge;Rn=Mn?Mn+"-":"",hn.boundingBox();var Xt=mn.labelBounds[Mn||"main"],Nn=hn.pstyle(Rn+"label").value;if("yes"===hn.pstyle("text-events").strValue&&Nn){var gi=Ut(mn.rscratch,"labelX",Mn),$n=Ut(mn.rscratch,"labelY",Mn),ai=Ut(mn.rscratch,"labelAngle",Mn),wi=hn.pstyle(Rn+"text-margin-x").pfValue,Pi=hn.pstyle(Rn+"text-margin-y").pfValue,er=Xt.x1-Fn-wi,xi=Xt.x2+Fn-wi,Ki=Xt.y1-Fn-Pi,hr=Xt.y2+Fn-Pi;if(ai){var Ar=Math.cos(ai),mr=Math.sin(ai),pr=function(sa,Cs){return{x:(sa-=gi)*Ar-(Cs-=$n)*mr+gi,y:sa*mr+Cs*Ar+$n}},Si=pr(er,Ki),sr=pr(er,hr),Sr=pr(xi,Ki),ts=pr(xi,hr);if(fl(g,c,[Si.x+wi,Si.y+Pi,Sr.x+wi,Sr.y+Pi,ts.x+wi,ts.y+Pi,sr.x+wi,sr.y+Pi]))return _t(hn),!0}else if(ua(Xt,g,c))return _t(hn),!0}}p&&(M=M.interactive);for(var In=M.length-1;In>=0;In--){var En=M[In];En.isNode()?Et(En)||un(En):$t(En)||un(En)||un(En,"source")||un(En,"target")}return U},getAllInBox:function(g,c,p,b){for(var A=this.getCachedZSortedEles().interactive,E=[],M=Math.min(g,p),U=Math.max(g,p),ne=Math.min(c,b),X=Math.max(c,b),fe=Gu({x1:g=M,y1:c=ne,x2:p=U,y2:b=X}),be=0;be<A.length;be++){var Ge=A[be];if(Ge.isNode()){var $e=Ge,Ke=$e.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});_g(fe,Ke)&&!yg(Ke,fe)&&E.push($e)}else{var ot=Ge,_t=ot._private,Et=_t.rscratch;if(null!=Et.startX&&null!=Et.startY&&!ua(fe,Et.startX,Et.startY)||null!=Et.endX&&null!=Et.endY&&!ua(fe,Et.endX,Et.endY))continue;if("bezier"===Et.edgeType||"multibezier"===Et.edgeType||"self"===Et.edgeType||"compound"===Et.edgeType||"segments"===Et.edgeType||"haystack"===Et.edgeType){for(var $t=_t.rstyle.bezierPts||_t.rstyle.linePts||_t.rstyle.haystackPts,Ut=!0,un=0;un<$t.length;un++)if(!cm(fe,$t[un])){Ut=!1;break}Ut&&E.push(ot)}else("haystack"===Et.edgeType||"straight"===Et.edgeType)&&E.push(ot)}}return E}},dv={calculateArrowAngles:function(g){var ne,X,fe,be,Ge,$e,c=g._private.rscratch,p="haystack"===c.edgeType,b="bezier"===c.edgeType,A="multibezier"===c.edgeType,E="segments"===c.edgeType,M="compound"===c.edgeType,U="self"===c.edgeType;p?(fe=c.haystackPts[0],be=c.haystackPts[1],Ge=c.haystackPts[2],$e=c.haystackPts[3]):(fe=c.arrowStartX,be=c.arrowStartY,Ge=c.arrowEndX,$e=c.arrowEndY),Et=c.midX,$t=c.midY,E?(ne=fe-c.segpts[0],X=be-c.segpts[1]):A||M||U||b?(ne=fe-Cu((Ke=c.allpts)[0],Ke[2],Ke[4],.1),X=be-Cu(Ke[1],Ke[3],Ke[5],.1)):(ne=fe-Et,X=be-$t),c.srcArrowAngle=Ql(ne,X);var Et=c.midX,$t=c.midY;if(p&&(Et=(fe+Ge)/2,$t=(be+$e)/2),ne=Ge-fe,X=$e-be,E)if((Ke=c.allpts).length/2%2==0)ne=Ke[Ut=Ke.length/2]-Ke[un=Ut-2],X=Ke[Ut+1]-Ke[un+1];else{var Ut,un,In=2+(Ut=Ke.length/2-1);ne=Ke[Ut]-Ke[un=Ut-2],X=Ke[Ut+1]-Ke[un+1]}else if(A||M||U){var hn,Mn,mn,Fn,Xt,Rn,Nn,Ke=c.allpts;c.ctrlpts.length/2%2==0?(hn=Cu(Ke[Rn=Ke.length/2-1],Ke[Xt=Rn+2],Ke[Nn=Xt+2],0),Mn=Cu(Ke[Rn+1],Ke[Xt+1],Ke[Nn+1],0),mn=Cu(Ke[Rn],Ke[Xt],Ke[Nn],1e-4),Fn=Cu(Ke[Rn+1],Ke[Xt+1],Ke[Nn+1],1e-4)):(hn=Cu(Ke[Rn=(Xt=Ke.length/2-1)-2],Ke[Xt],Ke[Nn=Xt+2],.4999),Mn=Cu(Ke[Rn+1],Ke[Xt+1],Ke[Nn+1],.4999),mn=Cu(Ke[Rn],Ke[Xt],Ke[Nn],.5),Fn=Cu(Ke[Rn+1],Ke[Xt+1],Ke[Nn+1],.5)),ne=mn-hn,X=Fn-Mn}if(c.midtgtArrowAngle=Ql(ne,X),c.midDispX=ne,c.midDispY=X,ne*=-1,X*=-1,E&&(Ke=c.allpts).length/2%2!=0&&(ne=-(Ke[In=2+(Ut=Ke.length/2-1)]-Ke[Ut]),X=-(Ke[In+1]-Ke[Ut+1])),c.midsrcArrowAngle=Ql(ne,X),E)ne=Ge-c.segpts[c.segpts.length-2],X=$e-c.segpts[c.segpts.length-1];else if(A||M||U||b){var xn=(Ke=c.allpts).length;ne=Ge-Cu(Ke[xn-6],Ke[xn-4],Ke[xn-2],.9),X=$e-Cu(Ke[xn-5],Ke[xn-3],Ke[xn-1],.9)}else ne=Ge-Et,X=$e-$t;c.tgtArrowAngle=Ql(ne,X)}};dv.getArrowWidth=dv.getArrowHeight=function(g,c){var p=this.arrowWidthCache=this.arrowWidthCache||{},b=p[g+", "+c];return b||(b=Math.max(Math.pow(13.37*g,.9),29)*c,p[g+", "+c]=b,b)};var Qu={};function fv(g){var c=[];if(null!=g){for(var p=0;p<g.length;p+=2)c.push({x:g[p],y:g[p+1]});return c}}Qu.findHaystackPoints=function(g){for(var c=0;c<g.length;c++){var p=g[c],b=p._private,A=b.rscratch;if(!A.haystack){var E=2*Math.random()*Math.PI;A.source={x:Math.cos(E),y:Math.sin(E)},E=2*Math.random()*Math.PI,A.target={x:Math.cos(E),y:Math.sin(E)}}var M=b.source,U=b.target,ne=M.position(),X=U.position(),fe=M.width(),be=U.width(),Ge=M.height(),$e=U.height(),ot=p.pstyle("haystack-radius").value/2;A.haystackPts=A.allpts=[A.source.x*fe*ot+ne.x,A.source.y*Ge*ot+ne.y,A.target.x*be*ot+X.x,A.target.y*$e*ot+X.y],A.midX=(A.allpts[0]+A.allpts[2])/2,A.midY=(A.allpts[1]+A.allpts[3])/2,A.edgeType="haystack",A.haystack=!0,this.storeEdgeProjections(p),this.calculateArrowAngles(p),this.recalculateEdgeLabelProjections(p),this.calculateLabelAngles(p)}},Qu.findSegmentsPoints=function(g,c){var p=g._private.rscratch,b=c.posPts,A=c.intersectionPts,E=c.vectorNormInverse,M=g.pstyle("edge-distances").value,U=g.pstyle("segment-weights"),ne=g.pstyle("segment-distances"),X=Math.min(U.pfValue.length,ne.pfValue.length);p.edgeType="segments",p.segpts=[];for(var fe=0;fe<X;fe++){var be=U.pfValue[fe],Ge=ne.pfValue[fe],$e=1-be,ot="node-position"===M?b:A,_t={x:ot.x1*$e+ot.x2*be,y:ot.y1*$e+ot.y2*be};p.segpts.push(_t.x+E.x*Ge,_t.y+E.y*Ge)}},Qu.findLoopPoints=function(g,c,p,b){var A=g._private.rscratch,E=c.dirCounts,M=c.srcPos,U=g.pstyle("control-point-distances"),ne=U?U.pfValue[0]:void 0,X=g.pstyle("loop-direction").pfValue,fe=g.pstyle("loop-sweep").pfValue,be=g.pstyle("control-point-step-size").pfValue;A.edgeType="self";var Ge=p,$e=be;b&&(Ge=0,$e=ne);var Ke=X-Math.PI/2,ot=Ke-fe/2,_t=Ke+fe/2,Et=String(X+"_"+fe);Ge=void 0===E[Et]?E[Et]=0:++E[Et],A.ctrlpts=[M.x+1.4*Math.cos(ot)*$e*(Ge/3+1),M.y+1.4*Math.sin(ot)*$e*(Ge/3+1),M.x+1.4*Math.cos(_t)*$e*(Ge/3+1),M.y+1.4*Math.sin(_t)*$e*(Ge/3+1)]},Qu.findCompoundLoopPoints=function(g,c,p,b){var A=g._private.rscratch;A.edgeType="compound";var E=c.srcPos,M=c.tgtPos,U=c.srcW,ne=c.srcH,X=c.tgtW,fe=c.tgtH,be=g.pstyle("control-point-step-size").pfValue,Ge=g.pstyle("control-point-distances"),Ke=p,ot=be;b&&(Ke=0,ot=Ge?Ge.pfValue[0]:void 0);var Et={x:E.x-U/2,y:E.y-ne/2},$t={x:M.x-X/2,y:M.y-fe/2},Ut={x:Math.min(Et.x,$t.x),y:Math.min(Et.y,$t.y)},In=Math.max(.5,Math.log(.01*U)),En=Math.max(.5,Math.log(.01*X));A.ctrlpts=[Ut.x,Ut.y-(1+Math.pow(50,1.12)/100)*ot*(Ke/3+1)*In,Ut.x-(1+Math.pow(50,1.12)/100)*ot*(Ke/3+1)*En,Ut.y]},Qu.findStraightEdgePoints=function(g){g._private.rscratch.edgeType="straight"},Qu.findBezierPoints=function(g,c,p,b,A){var E=g._private.rscratch,M=c.vectorNormInverse,U=c.posPts,ne=c.intersectionPts,X=g.pstyle("edge-distances").value,fe=g.pstyle("control-point-step-size").pfValue,be=g.pstyle("control-point-distances"),Ge=g.pstyle("control-point-weights"),$e=be&&Ge?Math.min(be.value.length,Ge.value.length):1,Ke=be?be.pfValue[0]:void 0,ot=Ge.value[0],_t=b;E.edgeType=_t?"multibezier":"bezier",E.ctrlpts=[];for(var Et=0;Et<$e;Et++){var Ut,$t=(.5-c.eles.length/2+p)*fe*(A?-1:1),un=xl($t);_t&&(Ke=be?be.pfValue[Et]:fe,ot=Ge.value[Et]);var In=void 0!==(Ut=b?Ke:void 0!==Ke?un*Ke:void 0)?Ut:$t,En=1-ot,Mn="node-position"===X?U:ne,mn={x:Mn.x1*En+Mn.x2*ot,y:Mn.y1*En+Mn.y2*ot};E.ctrlpts.push(mn.x+M.x*In,mn.y+M.y*In)}},Qu.findTaxiPoints=function(g,c){var p=g._private.rscratch;p.edgeType="segments";var b="vertical",A="horizontal",E="leftward",M="rightward",U="downward",fe=c.posPts,be=c.srcW,Ge=c.srcH,$e=c.tgtW,Ke=c.tgtH,_t="node-position"!==g.pstyle("edge-distances").value,Et=g.pstyle("taxi-direction").value,$t=Et,Ut=g.pstyle("taxi-turn"),un="%"===Ut.units,In=Ut.pfValue,En=In<0,hn=g.pstyle("taxi-turn-min-distance").pfValue,mn=_t?(Ge+Ke)/2:0,Fn=fe.x2-fe.x1,Rn=fe.y2-fe.y1,Xt=function(pi,os){return pi>0?Math.max(pi-os,0):Math.min(pi+os,0)},Nn=Xt(Fn,_t?(be+$e)/2:0),xn=Xt(Rn,mn),gi=!1;"auto"===$t?Et=Math.abs(Nn)>Math.abs(xn)?A:b:"upward"===$t||$t===U?(Et=b,gi=!0):($t===E||$t===M)&&(Et=A,gi=!0);var xi,$n=Et===b,ai=$n?xn:Nn,wi=$n?Rn:Fn,Pi=xl(wi),er=!1;(!gi||!un&&!En)&&($t===U&&wi<0||"upward"===$t&&wi>0||$t===E&&wi>0||$t===M&&wi<0)&&(ai=(Pi*=-1)*Math.abs(ai),er=!0);var Ar=function(pi){return Math.abs(pi)<hn||Math.abs(pi)>=Math.abs(ai)},mr=Ar(xi=un?(In<0?1+In:In)*ai:(In<0?ai:0)+In*Pi),pr=Ar(Math.abs(ai)-Math.abs(xi));if(!mr&&!pr||er)if($n){var Cn=fe.y1+xi+(_t?Ge/2*Pi:0);p.segpts=[fe.x1,Cn,fe.x2,Cn]}else{var Tt=fe.x1+xi+(_t?be/2*Pi:0);p.segpts=[Tt,fe.y1,Tt,fe.y2]}else if($n){var sr=Math.abs(wi)<=Ge/2,Sr=Math.abs(Fn)<=$e/2;if(sr){var ts=(fe.x1+fe.x2)/2;p.segpts=[ts,fe.y1,ts,fe.y2]}else if(Sr){var sa=(fe.y1+fe.y2)/2;p.segpts=[fe.x1,sa,fe.x2,sa]}else p.segpts=[fe.x1,fe.y2]}else{var ia=Math.abs(wi)<=be/2,Rr=Math.abs(Rn)<=Ke/2;if(ia){var Is=(fe.y1+fe.y2)/2;p.segpts=[fe.x1,Is,fe.x2,Is]}else if(Rr){var Ya=(fe.x1+fe.x2)/2;p.segpts=[Ya,fe.y1,Ya,fe.y2]}else p.segpts=[fe.x2,fe.y1]}},Qu.tryToCorrectInvalidPoints=function(g,c){var p=g._private.rscratch;if("bezier"===p.edgeType){var b=c.srcPos,A=c.tgtPos,E=c.srcW,M=c.srcH,U=c.tgtW,ne=c.tgtH,X=c.srcShape,fe=c.tgtShape,be=!en(p.startX)||!en(p.startY),Ge=!en(p.arrowStartX)||!en(p.arrowStartY),$e=!en(p.endX)||!en(p.endY),Ke=!en(p.arrowEndX)||!en(p.arrowEndY),Et=this.getArrowWidth(g.pstyle("width").pfValue,g.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,$t=$a({x:p.ctrlpts[0],y:p.ctrlpts[1]},{x:p.startX,y:p.startY}),Ut=$t<Et,un=$a({x:p.ctrlpts[0],y:p.ctrlpts[1]},{x:p.endX,y:p.endY}),In=un<Et,En=!1;if(be||Ge||Ut){En=!0;var hn={x:p.ctrlpts[0]-b.x,y:p.ctrlpts[1]-b.y},Mn=Math.sqrt(hn.x*hn.x+hn.y*hn.y),mn={x:hn.x/Mn,y:hn.y/Mn},Fn=Math.max(E,M),Rn={x:p.ctrlpts[0]+2*mn.x*Fn,y:p.ctrlpts[1]+2*mn.y*Fn},Xt=X.intersectLine(b.x,b.y,E,M,Rn.x,Rn.y,0);Ut?(p.ctrlpts[0]=p.ctrlpts[0]+mn.x*(Et-$t),p.ctrlpts[1]=p.ctrlpts[1]+mn.y*(Et-$t)):(p.ctrlpts[0]=Xt[0]+mn.x*Et,p.ctrlpts[1]=Xt[1]+mn.y*Et)}if($e||Ke||In){En=!0;var Nn={x:p.ctrlpts[0]-A.x,y:p.ctrlpts[1]-A.y},xn=Math.sqrt(Nn.x*Nn.x+Nn.y*Nn.y),gi={x:Nn.x/xn,y:Nn.y/xn},$n=Math.max(E,M),ai={x:p.ctrlpts[0]+2*gi.x*$n,y:p.ctrlpts[1]+2*gi.y*$n},wi=fe.intersectLine(A.x,A.y,U,ne,ai.x,ai.y,0);In?(p.ctrlpts[0]=p.ctrlpts[0]+gi.x*(Et-un),p.ctrlpts[1]=p.ctrlpts[1]+gi.y*(Et-un)):(p.ctrlpts[0]=wi[0]+gi.x*Et,p.ctrlpts[1]=wi[1]+gi.y*Et)}En&&this.findEndpoints(g)}},Qu.storeAllpts=function(g){var c=g._private.rscratch;if("multibezier"===c.edgeType||"bezier"===c.edgeType||"self"===c.edgeType||"compound"===c.edgeType){c.allpts=[],c.allpts.push(c.startX,c.startY);for(var p=0;p+1<c.ctrlpts.length;p+=2)c.allpts.push(c.ctrlpts[p],c.ctrlpts[p+1]),p+3<c.ctrlpts.length&&c.allpts.push((c.ctrlpts[p]+c.ctrlpts[p+2])/2,(c.ctrlpts[p+1]+c.ctrlpts[p+3])/2);var b;c.allpts.push(c.endX,c.endY),c.ctrlpts.length/2%2==0?(c.midX=c.allpts[b=c.allpts.length/2-1],c.midY=c.allpts[b+1]):(c.midX=Cu(c.allpts[b=c.allpts.length/2-3],c.allpts[b+2],c.allpts[b+4],.5),c.midY=Cu(c.allpts[b+1],c.allpts[b+3],c.allpts[b+5],.5))}else if("straight"===c.edgeType)c.allpts=[c.startX,c.startY,c.endX,c.endY],c.midX=(c.startX+c.endX+c.arrowStartX+c.arrowEndX)/4,c.midY=(c.startY+c.endY+c.arrowStartY+c.arrowEndY)/4;else if("segments"===c.edgeType)if(c.allpts=[],c.allpts.push(c.startX,c.startY),c.allpts.push.apply(c.allpts,c.segpts),c.allpts.push(c.endX,c.endY),c.segpts.length%4==0){var E=c.segpts.length/2,M=E-2;c.midX=(c.segpts[M]+c.segpts[E])/2,c.midY=(c.segpts[M+1]+c.segpts[E+1])/2}else{var U=c.segpts.length/2-1;c.midX=c.segpts[U],c.midY=c.segpts[U+1]}},Qu.checkForInvalidEdgeWarning=function(g){var c=g[0]._private.rscratch;c.nodesOverlap||en(c.startX)&&en(c.startY)&&en(c.endX)&&en(c.endY)?c.loggedErr=!1:c.loggedErr||(c.loggedErr=!0,we("Edge `"+g.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Qu.findEdgeControlPoints=function(g){var c=this;if(g&&0!==g.length){for(var p=this,A=p.cy.hasCompoundNodes(),E={map:new is,get:function(hn){var Mn=this.map.get(hn[0]);return null!=Mn?Mn.get(hn[1]):null},set:function(hn,Mn){var mn=this.map.get(hn[0]);null==mn&&(mn=new is,this.map.set(hn[0],mn)),mn.set(hn[1],Mn)}},M=[],U=[],ne=0;ne<g.length;ne++){var X=g[ne],fe=X._private,be=X.pstyle("curve-style").value;if(!X.removed()&&X.takesUpSpace()){if("haystack"===be){U.push(X);continue}var Ge="unbundled-bezier"===be||"segments"===be||"straight"===be||"straight-triangle"===be||"taxi"===be,$e="unbundled-bezier"===be||"bezier"===be,ot=fe.target,$t=[fe.source.poolIndex(),ot.poolIndex()].sort(),Ut=E.get($t);null==Ut&&(E.set($t,Ut={eles:[]}),M.push($t)),Ut.eles.push(X),Ge&&(Ut.hasUnbundled=!0),$e&&(Ut.hasBezier=!0)}}for(var un=function(hn){var mn=E.get(M[hn]),Fn=void 0;if(!mn.hasUnbundled){var Rn=mn.eles[0].parallelEdges().filter(function(Yr){return Yr.isBundledBezier()});Ci(mn.eles),Rn.forEach(function(Yr){return mn.eles.push(Yr)}),mn.eles.sort(function(Yr,Cn){return Yr.poolIndex()-Cn.poolIndex()})}var Xt=mn.eles[0],Nn=Xt.source(),xn=Xt.target();if(Nn.poolIndex()>xn.poolIndex()){var gi=Nn;Nn=xn,xn=gi}var $n=mn.srcPos=Nn.position(),ai=mn.tgtPos=xn.position(),wi=mn.srcW=Nn.outerWidth(),Pi=mn.srcH=Nn.outerHeight(),er=mn.tgtW=xn.outerWidth(),xi=mn.tgtH=xn.outerHeight(),Ki=mn.srcShape=p.nodeShapes[c.getNodeShape(Nn)],hr=mn.tgtShape=p.nodeShapes[c.getNodeShape(xn)];mn.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Ar=0;Ar<mn.eles.length;Ar++){var mr=mn.eles[Ar],pr=mr[0]._private.rscratch,Si=mr.pstyle("curve-style").value,sr="unbundled-bezier"===Si||"segments"===Si||"taxi"===Si,Sr=!Nn.same(mr.source());if(!mn.calculatedIntersection&&Nn!==xn&&(mn.hasBezier||mn.hasUnbundled)){mn.calculatedIntersection=!0;var ts=Ki.intersectLine($n.x,$n.y,wi,Pi,ai.x,ai.y,0),ps=mn.srcIntn=ts,Xs=hr.intersectLine(ai.x,ai.y,er,xi,$n.x,$n.y,0),sa=mn.tgtIntn=Xs,Cs=mn.intersectionPts={x1:ts[0],x2:Xs[0],y1:ts[1],y2:Xs[1]},ds=mn.posPts={x1:$n.x,x2:ai.x,y1:$n.y,y2:ai.y},ia=Xs[1]-ts[1],Rr=Xs[0]-ts[0],Is=Math.sqrt(Rr*Rr+ia*ia),Ts=mn.vector={x:Rr,y:ia},aa=mn.vectorNorm={x:Ts.x/Is,y:Ts.y/Is},Ya={x:-aa.y,y:aa.x};mn.nodesOverlap=!en(Is)||hr.checkPoint(ts[0],ts[1],0,er,xi,ai.x,ai.y)||Ki.checkPoint(Xs[0],Xs[1],0,wi,Pi,$n.x,$n.y),mn.vectorNormInverse=Ya,Fn={nodesOverlap:mn.nodesOverlap,dirCounts:mn.dirCounts,calculatedIntersection:!0,hasBezier:mn.hasBezier,hasUnbundled:mn.hasUnbundled,eles:mn.eles,srcPos:ai,tgtPos:$n,srcW:er,srcH:xi,tgtW:wi,tgtH:Pi,srcIntn:sa,tgtIntn:ps,srcShape:hr,tgtShape:Ki,posPts:{x1:ds.x2,y1:ds.y2,x2:ds.x1,y2:ds.y1},intersectionPts:{x1:Cs.x2,y1:Cs.y2,x2:Cs.x1,y2:Cs.y1},vector:{x:-Ts.x,y:-Ts.y},vectorNorm:{x:-aa.x,y:-aa.y},vectorNormInverse:{x:-Ya.x,y:-Ya.y}}}var oa=Sr?Fn:mn;pr.nodesOverlap=oa.nodesOverlap,pr.srcIntn=oa.srcIntn,pr.tgtIntn=oa.tgtIntn,A&&(Nn.isParent()||Nn.isChild()||xn.isParent()||xn.isChild())&&(Nn.parents().anySame(xn)||xn.parents().anySame(Nn)||Nn.same(xn)&&Nn.isParent())?c.findCompoundLoopPoints(mr,oa,Ar,sr):Nn===xn?c.findLoopPoints(mr,oa,Ar,sr):"segments"===Si?c.findSegmentsPoints(mr,oa):"taxi"===Si?c.findTaxiPoints(mr,oa):"straight"===Si||!sr&&mn.eles.length%2==1&&Ar===Math.floor(mn.eles.length/2)?c.findStraightEdgePoints(mr):c.findBezierPoints(mr,oa,Ar,sr,Sr),c.findEndpoints(mr),c.tryToCorrectInvalidPoints(mr,oa),c.checkForInvalidEdgeWarning(mr),c.storeAllpts(mr),c.storeEdgeProjections(mr),c.calculateArrowAngles(mr),c.recalculateEdgeLabelProjections(mr),c.calculateLabelAngles(mr)}},In=0;In<M.length;In++)un(In);this.findHaystackPoints(U)}},Qu.getSegmentPoints=function(g){var c=g[0]._private.rscratch;if("segments"===c.edgeType)return this.recalculateRenderedStyle(g),fv(c.segpts)},Qu.getControlPoints=function(g){var c=g[0]._private.rscratch,p=c.edgeType;if("bezier"===p||"multibezier"===p||"self"===p||"compound"===p)return this.recalculateRenderedStyle(g),fv(c.ctrlpts)},Qu.getEdgeMidpoint=function(g){var c=g[0]._private.rscratch;return this.recalculateRenderedStyle(g),{x:c.midX,y:c.midY}};var yd={manualEndptToPx:function(g,c){var b=g.position(),A=g.outerWidth(),E=g.outerHeight();if(2===c.value.length){var M=[c.pfValue[0],c.pfValue[1]];return"%"===c.units[0]&&(M[0]=M[0]*A),"%"===c.units[1]&&(M[1]=M[1]*E),M[0]+=b.x,M[1]+=b.y,M}var U=c.pfValue[0];U=-Math.PI/2+U;var ne=2*Math.max(A,E),X=[b.x+Math.cos(U)*ne,b.y+Math.sin(U)*ne];return this.nodeShapes[this.getNodeShape(g)].intersectLine(b.x,b.y,A,E,X[0],X[1],0)},findEndpoints:function(g){var p,Fn,Rn,Xt,Nn,c=this,b=g.source()[0],A=g.target()[0],E=b.position(),M=A.position(),U=g.pstyle("target-arrow-shape").value,ne=g.pstyle("source-arrow-shape").value,X=g.pstyle("target-distance-from-node").pfValue,fe=g.pstyle("source-distance-from-node").pfValue,be=g.pstyle("curve-style").value,Ge=g._private.rscratch,$e=Ge.edgeType,ot="self"===$e||"compound"===$e,_t="bezier"===$e||"multibezier"===$e||ot,Et="bezier"!==$e,$t="straight"===$e||"segments"===$e,Ut="segments"===$e,un=_t||Et||$t,In=ot||"taxi"===be,En=g.pstyle("source-endpoint"),hn=In?"outside-to-node":En.value,Mn=g.pstyle("target-endpoint"),mn=In?"outside-to-node":Mn.value;if(Ge.srcManEndpt=En,Ge.tgtManEndpt=Mn,_t){var xn=[Ge.ctrlpts[0],Ge.ctrlpts[1]];Fn=Et?[Ge.ctrlpts[Ge.ctrlpts.length-2],Ge.ctrlpts[Ge.ctrlpts.length-1]]:xn,Rn=xn}else if($t){var $n=Ut?Ge.segpts.slice(0,2):[M.x,M.y];Fn=Ut?Ge.segpts.slice(Ge.segpts.length-2):[E.x,E.y],Rn=$n}if("inside-to-node"===mn)p=[M.x,M.y];else if(Mn.units)p=this.manualEndptToPx(A,Mn);else if("outside-to-line"===mn)p=Ge.tgtIntn;else if("outside-to-node"===mn||"outside-to-node-or-label"===mn?Xt=Fn:("outside-to-line"===mn||"outside-to-line-or-label"===mn)&&(Xt=[E.x,E.y]),p=c.nodeShapes[this.getNodeShape(A)].intersectLine(M.x,M.y,A.outerWidth(),A.outerHeight(),Xt[0],Xt[1],0),"outside-to-node-or-label"===mn||"outside-to-line-or-label"===mn){var wi=A._private.rscratch,xi=wi.labelX,Ki=wi.labelY,hr=wi.labelWidth/2,Ar=wi.labelHeight/2,mr=A.pstyle("text-valign").value;"top"===mr?Ki-=Ar:"bottom"===mr&&(Ki+=Ar);var pr=A.pstyle("text-halign").value;"left"===pr?xi-=hr:"right"===pr&&(xi+=hr);var Si=No(Xt[0],Xt[1],[xi-hr,Ki-Ar,xi+hr,Ki-Ar,xi+hr,Ki+Ar,xi-hr,Ki+Ar],M.x,M.y);if(Si.length>0){var sr=E,Sr=th(sr,ba(p)),ts=th(sr,ba(Si)),ps=Sr;ts<Sr&&(p=Si,ps=ts),Si.length>2&&th(sr,{x:Si[2],y:Si[3]})<ps&&(p=[Si[2],Si[3]])}}var sa=Sd(p,Fn,c.arrowShapes[U].spacing(g)+X),Cs=Sd(p,Fn,c.arrowShapes[U].gap(g)+X);if(Ge.endX=Cs[0],Ge.endY=Cs[1],Ge.arrowEndX=sa[0],Ge.arrowEndY=sa[1],"inside-to-node"===hn)p=[E.x,E.y];else if(En.units)p=this.manualEndptToPx(b,En);else if("outside-to-line"===hn)p=Ge.srcIntn;else if("outside-to-node"===hn||"outside-to-node-or-label"===hn?Nn=Rn:("outside-to-line"===hn||"outside-to-line-or-label"===hn)&&(Nn=[M.x,M.y]),p=c.nodeShapes[this.getNodeShape(b)].intersectLine(E.x,E.y,b.outerWidth(),b.outerHeight(),Nn[0],Nn[1],0),"outside-to-node-or-label"===hn||"outside-to-line-or-label"===hn){var ds=b._private.rscratch,Is=ds.labelX,Ts=ds.labelY,aa=ds.labelWidth/2,Ya=ds.labelHeight/2,oa=b.pstyle("text-valign").value;"top"===oa?Ts-=Ya:"bottom"===oa&&(Ts+=Ya);var Yr=b.pstyle("text-halign").value;"left"===Yr?Is-=aa:"right"===Yr&&(Is+=aa);var Cn=No(Nn[0],Nn[1],[Is-aa,Ts-Ya,Is+aa,Ts-Ya,Is+aa,Ts+Ya,Is-aa,Ts+Ya],E.x,E.y);if(Cn.length>0){var qi=M,Lr=th(qi,ba(p)),Tt=th(qi,ba(Cn)),an=Lr;Tt<Lr&&(p=[Cn[0],Cn[1]],an=Tt),Cn.length>2&&th(qi,{x:Cn[2],y:Cn[3]})<an&&(p=[Cn[2],Cn[3]])}}var hi=Sd(p,Rn,c.arrowShapes[ne].spacing(g)+fe),pi=Sd(p,Rn,c.arrowShapes[ne].gap(g)+fe);Ge.startX=pi[0],Ge.startY=pi[1],Ge.arrowStartX=hi[0],Ge.arrowStartY=hi[1],un&&(Ge.badLine=!(en(Ge.startX)&&en(Ge.startY)&&en(Ge.endX)&&en(Ge.endY)))},getSourceEndpoint:function(g){var c=g[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(g),c.edgeType)?{x:c.haystackPts[0],y:c.haystackPts[1]}:{x:c.arrowStartX,y:c.arrowStartY}},getTargetEndpoint:function(g){var c=g[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(g),c.edgeType)?{x:c.haystackPts[2],y:c.haystackPts[3]}:{x:c.arrowEndX,y:c.arrowEndY}}},Og={};function pv(g,c,p){for(var b=function(X,fe,be,Ge){return Cu(X,fe,be,Ge)},E=c._private.rstyle.bezierPts,M=0;M<g.bezierProjPcts.length;M++){var U=g.bezierProjPcts[M];E.push({x:b(p[0],p[2],p[4],U),y:b(p[1],p[3],p[5],U)})}}Og.storeEdgeProjections=function(g){var c=g._private,p=c.rscratch,b=p.edgeType;if(c.rstyle.bezierPts=null,c.rstyle.linePts=null,c.rstyle.haystackPts=null,"multibezier"===b||"bezier"===b||"self"===b||"compound"===b){c.rstyle.bezierPts=[];for(var A=0;A+5<p.allpts.length;A+=4)pv(this,g,p.allpts.slice(A,A+6))}else if("segments"===b){var E=c.rstyle.linePts=[];for(A=0;A+1<p.allpts.length;A+=2)E.push({x:p.allpts[A],y:p.allpts[A+1]})}else if("haystack"===b){var M=p.haystackPts;c.rstyle.haystackPts=[{x:M[0],y:M[1]},{x:M[2],y:M[3]}]}c.rstyle.arrowWidth=this.getArrowWidth(g.pstyle("width").pfValue,g.pstyle("arrow-scale").value)*this.arrowShapeWidth},Og.recalculateEdgeProjections=function(g){this.findEdgeControlPoints(g)};var Uc={recalculateNodeLabelProjection:function(g){var c=g.pstyle("label").strValue;if(!Oe(c)){var p,b,A=g._private,E=g.width(),M=g.height(),U=g.padding(),ne=g.position(),X=g.pstyle("text-halign").strValue,fe=g.pstyle("text-valign").strValue,be=A.rscratch,Ge=A.rstyle;switch(X){case"left":p=ne.x-E/2-U;break;case"right":p=ne.x+E/2+U;break;default:p=ne.x}switch(fe){case"top":b=ne.y-M/2-U;break;case"bottom":b=ne.y+M/2+U;break;default:b=ne.y}be.labelX=p,be.labelY=b,Ge.labelX=p,Ge.labelY=b,this.calculateLabelAngles(g),this.applyLabelDimensions(g)}}},ql=function(c,p){var b=Math.atan(p/c);return 0===c&&b<0&&(b*=-1),b},Ac=function(c,p){return ql(p.x-c.x,p.y-c.y)};Uc.recalculateEdgeLabelProjections=function(g){var c,p=g._private,b=p.rscratch,A=this,E={mid:g.pstyle("label").strValue,source:g.pstyle("source-label").strValue,target:g.pstyle("target-label").strValue};if(E.mid||E.source||E.target){var M=function(be,Ge,$e){Ai(p.rscratch,be,Ge,$e),Ai(p.rstyle,be,Ge,$e)};M("labelX",null,(c={x:b.midX,y:b.midY}).x),M("labelY",null,c.y);var U=ql(b.midDispX,b.midDispY);M("labelAutoAngle",null,U);var ne=function fe(){if(fe.cache)return fe.cache;for(var be=[],Ge=0;Ge+5<b.allpts.length;Ge+=4)be.push({p0:{x:b.allpts[Ge],y:b.allpts[Ge+1]},p1:{x:b.allpts[Ge+2],y:b.allpts[Ge+3]},p2:{x:b.allpts[Ge+4],y:b.allpts[Ge+5]},startDist:0,length:0,segments:[]});var _t=p.rstyle.bezierPts,Et=A.bezierProjPcts.length;function $t(hn,Mn,mn,Fn,Rn){var Xt=$a(Mn,mn),Nn=hn.segments[hn.segments.length-1];hn.segments.push({p0:Mn,p1:mn,t0:Fn,t1:Rn,startDist:Nn?Nn.startDist+Nn.length:0,length:Xt}),hn.length+=Xt}for(var Ut=0;Ut<be.length;Ut++){var un=be[Ut],In=be[Ut-1];In&&(un.startDist=In.startDist+In.length),$t(un,un.p0,_t[Ut*Et],0,A.bezierProjPcts[0]);for(var En=0;En<Et-1;En++)$t(un,_t[Ut*Et+En],_t[Ut*Et+En+1],A.bezierProjPcts[En],A.bezierProjPcts[En+1]);$t(un,_t[Ut*Et+Et-1],un.p2,A.bezierProjPcts[Et-1],1)}return fe.cache=be},X=function(be){var Ge,$e="source"===be;if(E[be]){var Ke=g.pstyle(be+"-text-offset").pfValue;switch(b.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var _t,ot=ne(),Et=0,$t=0,Ut=0;Ut<ot.length;Ut++){for(var un=ot[$e?Ut:ot.length-1-Ut],In=0;In<un.segments.length;In++){var En=un.segments[$e?In:un.segments.length-1-In];if(Et=$t,($t+=En.length)>=Ke||Ut===ot.length-1&&In===un.segments.length-1){_t={cp:un,segment:En};break}}if(_t)break}var Mn=_t.cp,mn=_t.segment,Fn=(Ke-Et)/mn.length,Rn=mn.t1-mn.t0,Xt=$e?mn.t0+Rn*Fn:mn.t1-Rn*Fn;Xt=Ps(0,Xt,1),c=Zr(Mn.p0,Mn.p1,Mn.p2,Xt),Ge=function(c,p,b,A){var E=Ps(0,A-.001,1),M=Ps(0,A+.001,1),U=Zr(c,p,b,E),ne=Zr(c,p,b,M);return Ac(U,ne)}(Mn.p0,Mn.p1,Mn.p2,Xt);break;case"straight":case"segments":case"haystack":for(var xn,gi,$n,ai,Nn=0,wi=b.allpts.length,Pi=0;Pi+3<wi&&($e?($n={x:b.allpts[Pi],y:b.allpts[Pi+1]},ai={x:b.allpts[Pi+2],y:b.allpts[Pi+3]}):($n={x:b.allpts[wi-2-Pi],y:b.allpts[wi-1-Pi]},ai={x:b.allpts[wi-4-Pi],y:b.allpts[wi-3-Pi]}),gi=Nn,!((Nn+=xn=$a($n,ai))>=Ke));Pi+=2);var xi=(Ke-gi)/xn;xi=Ps(0,xi,1),c=function(c,p,b,A){var E_x=p.x-c.x,E_y=p.y-c.y,M=$a(c,p);return b=b??0,{x:c.x+E_x/M*(A=A??b*M),y:c.y+E_y/M*A}}($n,ai,xi),Ge=Ac($n,ai)}M("labelX",be,c.x),M("labelY",be,c.y),M("labelAutoAngle",be,Ge)}};X("source"),X("target"),this.applyLabelDimensions(g)}},Uc.applyLabelDimensions=function(g){this.applyPrefixedLabelDimensions(g),g.isEdge()&&(this.applyPrefixedLabelDimensions(g,"source"),this.applyPrefixedLabelDimensions(g,"target"))},Uc.applyPrefixedLabelDimensions=function(g,c){var p=g._private,b=this.getLabelText(g,c),A=this.calculateLabelDimensions(g,b),E=g.pstyle("line-height").pfValue,M=g.pstyle("text-wrap").strValue,U=Ei(p.rscratch,"labelWrapCachedLines",c)||[],ne="wrap"!==M?1:Math.max(U.length,1),X=A.height/ne,fe=X*E,be=A.width,Ge=A.height+(ne-1)*(E-1)*X;Ai(p.rstyle,"labelWidth",c,be),Ai(p.rscratch,"labelWidth",c,be),Ai(p.rstyle,"labelHeight",c,Ge),Ai(p.rscratch,"labelHeight",c,Ge),Ai(p.rscratch,"labelLineHeight",c,fe)},Uc.getLabelText=function(g,c){var p=g._private,A=g.pstyle((c?c+"-":"")+"label").strValue,E=g.pstyle("text-transform").value,M=function(er,xi){return xi?(Ai(p.rscratch,er,c,xi),xi):Ei(p.rscratch,er,c)};if(!A)return"";"none"==E||("uppercase"==E?A=A.toUpperCase():"lowercase"==E&&(A=A.toLowerCase()));var U=g.pstyle("text-wrap").value;if("wrap"===U){var ne=M("labelKey");if(null!=ne&&M("labelWrapKey")===ne)return M("labelWrapCachedText");for(var fe=A.split("\n"),be=g.pstyle("text-max-width").pfValue,$e="anywhere"===g.pstyle("text-overflow-wrap").value,Ke=[],ot=/[\s\u200b]+/,_t=$e?"":" ",Et=0;Et<fe.length;Et++){var $t=fe[Et],un=this.calculateLabelDimensions(g,$t).width;if($e){var In=$t.split("").join("\u200b");$t=In}if(un>be){for(var En=$t.split(ot),hn="",Mn=0;Mn<En.length;Mn++){var mn=En[Mn];this.calculateLabelDimensions(g,0===hn.length?mn:hn+_t+mn).width<=be?hn+=mn+_t:(hn&&Ke.push(hn),hn=mn+_t)}hn.match(/^[\s\u200b]+$/)||Ke.push(hn)}else Ke.push($t)}M("labelWrapCachedLines",Ke),A=M("labelWrapCachedText",Ke.join("\n")),M("labelWrapKey",ne)}else if("ellipsis"===U){var Nn=g.pstyle("text-max-width").pfValue,xn="",$n=!1;if(this.calculateLabelDimensions(g,A).width<Nn)return A;for(var ai=0;ai<A.length&&!(this.calculateLabelDimensions(g,xn+A[ai]+"\u2026").width>Nn);ai++)xn+=A[ai],ai===A.length-1&&($n=!0);return $n||(xn+="\u2026"),xn}return A},Uc.getLabelJustification=function(g){var c=g.pstyle("text-justification").strValue,p=g.pstyle("text-halign").strValue;if("auto"!==c)return c;if(!g.isNode())return"center";switch(p){case"left":return"right";case"right":return"left";default:return"center"}},Uc.calculateLabelDimensions=function(g,c){var b=ke(c,g._private.labelDimsKey),A=this.labelDimCache||(this.labelDimCache=[]),E=A[b];if(null!=E)return E;var U=g.pstyle("font-style").strValue,ne=g.pstyle("font-size").pfValue,X=g.pstyle("font-family").strValue,fe=g.pstyle("font-weight").strValue,be=this.labelCalcCanvas,Ge=this.labelCalcCanvasContext;if(!be){be=this.labelCalcCanvas=document.createElement("canvas"),Ge=this.labelCalcCanvasContext=be.getContext("2d");var $e=be.style;$e.position="absolute",$e.left="-9999px",$e.top="-9999px",$e.zIndex="-1",$e.visibility="hidden",$e.pointerEvents="none"}Ge.font="".concat(U," ").concat(fe," ").concat(ne,"px ").concat(X);for(var Ke=0,ot=0,_t=c.split("\n"),Et=0;Et<_t.length;Et++){var Ut=Ge.measureText(_t[Et]),un=Math.ceil(Ut.width),In=ne;Ke=Math.max(un,Ke),ot+=In}return A[b]={width:Ke+=0,height:ot+=0}},Uc.calculateLabelAngle=function(g,c){var b=g._private.rscratch,A=g.isEdge(),M=g.pstyle((c?c+"-":"")+"text-rotation"),U=M.strValue;return"none"===U?0:A&&"autorotate"===U?b.labelAutoAngle:"autorotate"===U?0:M.pfValue},Uc.calculateLabelAngles=function(g){var c=this,p=g.isEdge(),A=g._private.rscratch;A.labelAngle=c.calculateLabelAngle(g),p&&(A.sourceLabelAngle=c.calculateLabelAngle(g,"source"),A.targetLabelAngle=c.calculateLabelAngle(g,"target"))};var Fg={},Jh=!1;Fg.getNodeShape=function(g){var p=g.pstyle("shape").value;if("cutrectangle"===p&&(g.width()<28||g.height()<28))return Jh||(we("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Jh=!0),"rectangle";if(g.isParent())return"rectangle"===p||"roundrectangle"===p||"round-rectangle"===p||"cutrectangle"===p||"cut-rectangle"===p||"barrel"===p?p:"rectangle";if("polygon"===p){var b=g.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(b).name}return p};var df={updateCachedGrabbedEles:function(){var g=this.cachedZSortedEles;if(g){g.drag=[],g.nondrag=[];for(var c=[],p=0;p<g.length;p++){var A=(b=g[p])._private.rscratch;b.grabbed()&&!b.isParent()?c.push(b):A.inDragLayer?g.drag.push(b):g.nondrag.push(b)}for(p=0;p<c.length;p++){var b;g.drag.push(b=c[p])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(g){if(g||!this.cachedZSortedEles){var c=this.cy.mutableElements().toArray();c.sort(Vp),c.interactive=c.filter(function(p){return p.interactive()}),this.cachedZSortedEles=c,this.updateCachedGrabbedEles()}else c=this.cachedZSortedEles;return c}},bd={};[$l,dv,Qu,yd,Og,Uc,Fg,{registerCalculationListeners:function(){var g=this.cy,c=g.collection(),p=this,b=function(M){var U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(c.merge(M),U)for(var ne=0;ne<M.length;ne++){var X=M[ne],fe=X._private,be=fe.rstyle;be.clean=!1,be.cleanConnected=!1}};p.binder(g).on("bounds.* dirty.*",function(M){b(M.target)}).on("style.* background.*",function(M){b(M.target,!1)});var A=function(M){if(M){var U=p.onUpdateEleCalcsFns;c.cleanStyle();for(var ne=0;ne<c.length;ne++){var X=c[ne],fe=X._private.rstyle;X.isNode()&&!fe.cleanConnected&&(b(X.connectedEdges()),fe.cleanConnected=!0)}if(U)for(var be=0;be<U.length;be++)(0,U[be])(M,c);p.recalculateRenderedStyle(c),c=g.collection()}};p.flushRenderedStyleQueue=function(){A(!0)},p.beforeRender(A,p.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(g){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(g)},recalculateRenderedStyle:function(g,c){var p=function(un){return un._private.rstyle.cleanConnected},b=[],A=[];if(!this.destroyed){void 0===c&&(c=!0);for(var E=0;E<g.length;E++){var M=g[E],U=M._private,ne=U.rstyle;M.isEdge()&&(!p(M.source())||!p(M.target()))&&(ne.clean=!1),!(c&&ne.clean||M.removed())&&"none"!==M.pstyle("display").value&&("nodes"===U.group?A.push(M):b.push(M),ne.clean=!0)}for(var X=0;X<A.length;X++){var fe=A[X],Ge=fe._private.rstyle,$e=fe.position();this.recalculateNodeLabelProjection(fe),Ge.nodeX=$e.x,Ge.nodeY=$e.y,Ge.nodeW=fe.pstyle("width").pfValue,Ge.nodeH=fe.pstyle("height").pfValue}this.recalculateEdgeProjections(b);for(var Ke=0;Ke<b.length;Ke++){var _t=b[Ke]._private,Et=_t.rstyle,$t=_t.rscratch;Et.srcX=$t.arrowStartX,Et.srcY=$t.arrowStartY,Et.tgtX=$t.arrowEndX,Et.tgtY=$t.arrowEndY,Et.midX=$t.midX,Et.midY=$t.midY,Et.labelAngle=$t.labelAngle,Et.sourceLabelAngle=$t.sourceLabelAngle,Et.targetLabelAngle=$t.targetLabelAngle}}}},df].forEach(function(g){nr(bd,g)});var Yf={getCachedImage:function(g,c,p){var A=this.imageCache=this.imageCache||{},E=A[g];if(E)return E.image.complete||E.image.addEventListener("load",p),E.image;var M=(E=A[g]=A[g]||{}).image=new Image;M.addEventListener("load",p),M.addEventListener("error",function(){M.error=!0});var U="data:";return g.substring(0,U.length).toLowerCase()===U||(M.crossOrigin=c),M.src=g,M}},uh={registerBinding:function(g,c,p,b){var A=Array.prototype.slice.apply(arguments,[1]),E=this.binder(g);return E.on.apply(E,A)},binder:function(g){var c=this,p=g===window||g===document||g===document.body||function(c){return!(typeof HTMLElement>"u")&&c instanceof HTMLElement}(g);if(null==c.supportsPassiveEvents){var b=!1;try{var A=Object.defineProperty({},"passive",{get:function(){return b=!0,!0}});window.addEventListener("test",null,A)}catch{}c.supportsPassiveEvents=b}var E=function(U,ne,X){var fe=Array.prototype.slice.call(arguments);return p&&c.supportsPassiveEvents&&(fe[2]={capture:X??!1,passive:!1,once:!1}),c.bindings.push({target:g,args:fe}),(g.addEventListener||g.on).apply(g,fe),this};return{on:E,addEventListener:E,addListener:E,bind:E}},nodeIsDraggable:function(g){return g&&g.isNode()&&!g.locked()&&g.grabbable()},nodeIsGrabbable:function(g){return this.nodeIsDraggable(g)&&g.interactive()}};uh.load=function(){var g=this,c=function(Cn){return Cn.selected()},p=function(Cn,qi,Lr,Tt){null==Cn&&(Cn=g.cy);for(var an=0;an<qi.length;an++)Cn.emit({originalEvent:Lr,type:qi[an],position:Tt})},b=function(Cn){return Cn.shiftKey||Cn.metaKey||Cn.ctrlKey},A=function(Cn,qi){var Lr=!0;if(g.cy.hasCompoundNodes()&&Cn&&Cn.pannable()){for(var Tt=0;qi&&Tt<qi.length;Tt++)if((Cn=qi[Tt]).isNode()&&Cn.isParent()&&!Cn.pannable()){Lr=!1;break}}else Lr=!0;return Lr},U=function(Cn){Cn[0]._private.rscratch.inDragLayer=!0},X=function(Cn){Cn[0]._private.rscratch.isGrabTarget=!0},be=function(Cn,qi){var Lr=qi.addToList;!Lr.has(Cn)&&Cn.grabbable()&&!Cn.locked()&&(Lr.merge(Cn),function(Cn){Cn[0]._private.grabbed=!0}(Cn))},$e=function(Cn,qi){qi=qi||{};var Lr=Cn.cy().hasCompoundNodes();qi.inDragLayer&&(Cn.forEach(U),Cn.neighborhood().stdFilter(function(Tt){return!Lr||Tt.isEdge()}).forEach(U)),qi.addToList&&Cn.forEach(function(Tt){be(Tt,qi)}),function(Cn,qi){if(Cn.cy().hasCompoundNodes()&&(null!=qi.inDragLayer||null!=qi.addToList)){var Lr=Cn.descendants();qi.inDragLayer&&(Lr.forEach(U),Lr.connectedEdges().forEach(U)),qi.addToList&&be(Lr,qi)}}(Cn,qi),_t(Cn,{inDragLayer:qi.inDragLayer}),g.updateCachedGrabbedEles()},Ke=$e,ot=function(Cn){!Cn||(g.getCachedZSortedEles().forEach(function(qi){(function(Cn){Cn[0]._private.grabbed=!1})(qi),function(Cn){Cn[0]._private.rscratch.inDragLayer=!1}(qi),function(Cn){Cn[0]._private.rscratch.isGrabTarget=!1}(qi)}),g.updateCachedGrabbedEles())},_t=function(Cn,qi){if((null!=qi.inDragLayer||null!=qi.addToList)&&Cn.cy().hasCompoundNodes()){var Lr=Cn.ancestors().orphans();if(!Lr.same(Cn)){var Tt=Lr.descendants().spawnSelf().merge(Lr).unmerge(Cn).unmerge(Cn.descendants()),an=Tt.connectedEdges();qi.inDragLayer&&(an.forEach(U),Tt.forEach(U)),qi.addToList&&Tt.forEach(function(ti){be(ti,qi)})}}},Et=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},$t=typeof MutationObserver<"u",Ut=typeof ResizeObserver<"u";$t?(g.removeObserver=new MutationObserver(function(Yr){for(var Cn=0;Cn<Yr.length;Cn++){var Lr=Yr[Cn].removedNodes;if(Lr)for(var Tt=0;Tt<Lr.length;Tt++)if(Lr[Tt]===g.container){g.destroy();break}}}),g.container.parentNode&&g.removeObserver.observe(g.container.parentNode,{childList:!0})):g.registerBinding(g.container,"DOMNodeRemoved",function(Yr){g.destroy()});var un=K.default(function(){g.cy.resize()},100);$t&&(g.styleObserver=new MutationObserver(un),g.styleObserver.observe(g.container,{attributes:!0})),g.registerBinding(window,"resize",un),Ut&&(g.resizeObserver=new ResizeObserver(un),g.resizeObserver.observe(g.container));var En=function(){g.invalidateContainerClientCoordsCache()};(function(Cn,qi){for(;null!=Cn;)g.registerBinding(Yr=Cn,"transitionend",En),g.registerBinding(Yr,"animationend",En),g.registerBinding(Yr,"scroll",En),Cn=Cn.parentNode;var Yr})(g.container),g.registerBinding(g.container,"contextmenu",function(Yr){Yr.preventDefault()});var mn,Fn,Rn,Mn=function(Cn){for(var qi=g.findContainerClientCoords(),Lr=qi[0],Tt=qi[1],an=qi[2],ti=qi[3],hi=Cn.touches?Cn.touches:[Cn],pi=!1,os=0;os<hi.length;os++){var gs=hi[os];if(Lr<=gs.clientX&&gs.clientX<=Lr+an&&Tt<=gs.clientY&&gs.clientY<=Tt+ti){pi=!0;break}}if(!pi)return!1;for(var rr=g.container,Ur=Cn.target.parentNode,Gr=!1;Ur;){if(Ur===rr){Gr=!0;break}Ur=Ur.parentNode}return!!Gr};g.registerBinding(g.container,"mousedown",function(Cn){if(Mn(Cn)){Cn.preventDefault(),Et(),g.hoverData.capture=!0,g.hoverData.which=Cn.which;var qi=g.cy,Lr=[Cn.clientX,Cn.clientY],Tt=g.projectIntoViewport(Lr[0],Lr[1]),an=g.selection,ti=g.findNearestElements(Tt[0],Tt[1],!0,!1),hi=ti[0],pi=g.dragData.possibleDragElements;if(g.hoverData.mdownPos=Tt,g.hoverData.mdownGPos=Lr,3==Cn.which){g.hoverData.cxtStarted=!0;var gs={originalEvent:Cn,type:"cxttapstart",position:{x:Tt[0],y:Tt[1]}};hi?(hi.activate(),hi.emit(gs),g.hoverData.down=hi):qi.emit(gs),g.hoverData.downTime=(new Date).getTime(),g.hoverData.cxtDragged=!1}else if(1==Cn.which){if(hi&&hi.activate(),null!=hi&&g.nodeIsGrabbable(hi)){var rr=function(as){return{originalEvent:Cn,type:as,position:{x:Tt[0],y:Tt[1]}}};if(X(hi),hi.selected()){pi=g.dragData.possibleDragElements=qi.collection();var Ur=qi.$(function(Gr){return Gr.isNode()&&Gr.selected()&&g.nodeIsGrabbable(Gr)});$e(Ur,{addToList:pi}),hi.emit(rr("grabon")),Ur.forEach(function(as){as.emit(rr("grab"))})}else pi=g.dragData.possibleDragElements=qi.collection(),Ke(hi,{addToList:pi}),hi.emit(rr("grabon")).emit(rr("grab"));g.redrawHint("eles",!0),g.redrawHint("drag",!0)}g.hoverData.down=hi,g.hoverData.downs=ti,g.hoverData.downTime=(new Date).getTime(),p(hi,["mousedown","tapstart","vmousedown"],Cn,{x:Tt[0],y:Tt[1]}),null==hi?(an[4]=1,g.data.bgActivePosistion={x:Tt[0],y:Tt[1]},g.redrawHint("select",!0),g.redraw()):hi.pannable()&&(an[4]=1),g.hoverData.tapholdCancelled=!1,clearTimeout(g.hoverData.tapholdTimeout),g.hoverData.tapholdTimeout=setTimeout(function(){if(!g.hoverData.tapholdCancelled){var as=g.hoverData.down;as?as.emit({originalEvent:Cn,type:"taphold",position:{x:Tt[0],y:Tt[1]}}):qi.emit({originalEvent:Cn,type:"taphold",position:{x:Tt[0],y:Tt[1]}})}},g.tapholdDuration)}an[0]=an[2]=Tt[0],an[1]=an[3]=Tt[1]}},!1),g.registerBinding(window,"mousemove",function(Cn){var $c;if(g.hoverData.capture||Mn(Cn)){var Lr=!1,Tt=g.cy,an=Tt.zoom(),ti=[Cn.clientX,Cn.clientY],hi=g.projectIntoViewport(ti[0],ti[1]),pi=g.hoverData.mdownPos,os=g.hoverData.mdownGPos,gs=g.selection,rr=null;!g.hoverData.draggingEles&&!g.hoverData.dragging&&!g.hoverData.selecting&&(rr=g.findNearestElement(hi[0],hi[1],!0,!1));var go,Ws=g.hoverData.last,Ur=g.hoverData.down,Gr=[hi[0]-gs[2],hi[1]-gs[3]],as=g.dragData.possibleDragElements;if(os){var Ao=ti[0]-os[0],rl=ti[1]-os[1];g.hoverData.isOverThresholdDrag=go=Ao*Ao+rl*rl>=g.desktopTapThreshold2}var Os=b(Cn);go&&(g.hoverData.tapholdCancelled=!0),Lr=!0,p(rr,["mousemove","vmousemove","tapdrag"],Cn,{x:hi[0],y:hi[1]});var Ju=function(){g.data.bgActivePosistion=void 0,g.hoverData.selecting||Tt.emit({originalEvent:Cn,type:"boxstart",position:{x:hi[0],y:hi[1]}}),gs[4]=1,g.hoverData.selecting=!0,g.redrawHint("select",!0),g.redraw()};if(3===g.hoverData.which){if(go){var ec={originalEvent:Cn,type:"cxtdrag",position:{x:hi[0],y:hi[1]}};Ur?Ur.emit(ec):Tt.emit(ec),g.hoverData.cxtDragged=!0,(!g.hoverData.cxtOver||rr!==g.hoverData.cxtOver)&&(g.hoverData.cxtOver&&g.hoverData.cxtOver.emit({originalEvent:Cn,type:"cxtdragout",position:{x:hi[0],y:hi[1]}}),g.hoverData.cxtOver=rr,rr&&rr.emit({originalEvent:Cn,type:"cxtdragover",position:{x:hi[0],y:hi[1]}}))}}else if(g.hoverData.dragging){if(Lr=!0,Tt.panningEnabled()&&Tt.userPanningEnabled()){var Gc;if(g.hoverData.justStartedPan){var Qp=g.hoverData.mdownPos;Gc={x:(hi[0]-Qp[0])*an,y:(hi[1]-Qp[1])*an},g.hoverData.justStartedPan=!1}else Gc={x:Gr[0]*an,y:Gr[1]*an};Tt.panBy(Gc),Tt.emit("dragpan"),g.hoverData.dragged=!0}hi=g.projectIntoViewport(Cn.clientX,Cn.clientY)}else if(1!=gs[4]||null!=Ur&&!Ur.pannable()){if(Ur&&Ur.pannable()&&Ur.active()&&Ur.unactivate(),(!Ur||!Ur.grabbed())&&rr!=Ws&&(Ws&&p(Ws,["mouseout","tapdragout"],Cn,{x:hi[0],y:hi[1]}),rr&&p(rr,["mouseover","tapdragover"],Cn,{x:hi[0],y:hi[1]}),g.hoverData.last=rr),Ur)if(go){if(Tt.boxSelectionEnabled()&&Os)Ur&&Ur.grabbed()&&(ot(as),Ur.emit("freeon"),as.emit("free"),g.dragData.didDrag&&(Ur.emit("dragfreeon"),as.emit("dragfree"))),Ju();else if(Ur&&Ur.grabbed()&&g.nodeIsDraggable(Ur)){var Wc=!g.dragData.didDrag;Wc&&g.redrawHint("eles",!0),g.dragData.didDrag=!0,g.hoverData.draggingEles||$e(as,{inDragLayer:!0});var lc={x:0,y:0};if(en(Gr[0])&&en(Gr[1])&&(lc.x+=Gr[0],lc.y+=Gr[1],Wc)){var jc=g.hoverData.dragDelta;jc&&en(jc[0])&&en(jc[1])&&(lc.x+=jc[0],lc.y+=jc[1])}g.hoverData.draggingEles=!0,as.silentShift(lc).emit("position drag"),g.redrawHint("drag",!0),g.redraw()}}else 0===($c=g.hoverData.dragDelta=g.hoverData.dragDelta||[]).length?($c.push(Gr[0]),$c.push(Gr[1])):($c[0]+=Gr[0],$c[1]+=Gr[1]);Lr=!0}else go&&(g.hoverData.dragging||!Tt.boxSelectionEnabled()||!Os&&Tt.panningEnabled()&&Tt.userPanningEnabled()?!g.hoverData.selecting&&Tt.panningEnabled()&&Tt.userPanningEnabled()&&A(Ur,g.hoverData.downs)&&(g.hoverData.dragging=!0,g.hoverData.justStartedPan=!0,gs[4]=0,g.data.bgActivePosistion=ba(pi),g.redrawHint("select",!0),g.redraw()):Ju(),Ur&&Ur.pannable()&&Ur.active()&&Ur.unactivate());if(gs[2]=hi[0],gs[3]=hi[1],Lr)return Cn.stopPropagation&&Cn.stopPropagation(),Cn.preventDefault&&Cn.preventDefault(),!1}},!1),g.registerBinding(window,"mouseup",function(Cn){if(g.hoverData.capture){g.hoverData.capture=!1;var Lr=g.cy,Tt=g.projectIntoViewport(Cn.clientX,Cn.clientY),an=g.selection,ti=g.findNearestElement(Tt[0],Tt[1],!0,!1),hi=g.dragData.possibleDragElements,pi=g.hoverData.down,os=b(Cn);if(g.data.bgActivePosistion&&(g.redrawHint("select",!0),g.redraw()),g.hoverData.tapholdCancelled=!0,g.data.bgActivePosistion=void 0,pi&&pi.unactivate(),3===g.hoverData.which){var gs={originalEvent:Cn,type:"cxttapend",position:{x:Tt[0],y:Tt[1]}};if(pi?pi.emit(gs):Lr.emit(gs),!g.hoverData.cxtDragged){var rr={originalEvent:Cn,type:"cxttap",position:{x:Tt[0],y:Tt[1]}};pi?pi.emit(rr):Lr.emit(rr)}g.hoverData.cxtDragged=!1,g.hoverData.which=null}else if(1===g.hoverData.which){if(p(ti,["mouseup","tapend","vmouseup"],Cn,{x:Tt[0],y:Tt[1]}),!g.dragData.didDrag&&!g.hoverData.dragged&&!g.hoverData.selecting&&!g.hoverData.isOverThresholdDrag&&(p(pi,["click","tap","vclick"],Cn,{x:Tt[0],y:Tt[1]}),Fn=!1,Cn.timeStamp-Rn<=Lr.multiClickDebounceTime()?(mn&&clearTimeout(mn),Fn=!0,Rn=null,p(pi,["dblclick","dbltap","vdblclick"],Cn,{x:Tt[0],y:Tt[1]})):(mn=setTimeout(function(){Fn||p(pi,["oneclick","onetap","voneclick"],Cn,{x:Tt[0],y:Tt[1]})},Lr.multiClickDebounceTime()),Rn=Cn.timeStamp)),null==pi&&!g.dragData.didDrag&&!g.hoverData.selecting&&!g.hoverData.dragged&&!b(Cn)&&(Lr.$(c).unselect(["tapunselect"]),hi.length>0&&g.redrawHint("eles",!0),g.dragData.possibleDragElements=hi=Lr.collection()),ti==pi&&!g.dragData.didDrag&&!g.hoverData.selecting&&null!=ti&&ti._private.selectable&&(g.hoverData.dragging||("additive"===Lr.selectionType()||os?ti.selected()?ti.unselect(["tapunselect"]):ti.select(["tapselect"]):os||(Lr.$(c).unmerge(ti).unselect(["tapunselect"]),ti.select(["tapselect"]))),g.redrawHint("eles",!0)),g.hoverData.selecting){var Ws=Lr.collection(g.getAllInBox(an[0],an[1],an[2],an[3]));g.redrawHint("select",!0),Ws.length>0&&g.redrawHint("eles",!0),Lr.emit({type:"boxend",originalEvent:Cn,position:{x:Tt[0],y:Tt[1]}}),"additive"===Lr.selectionType()||os||Lr.$(c).unmerge(Ws).unselect(),Ws.emit("box").stdFilter(function(go){return go.selectable()&&!go.selected()}).select().emit("boxselect"),g.redraw()}if(g.hoverData.dragging&&(g.hoverData.dragging=!1,g.redrawHint("select",!0),g.redrawHint("eles",!0),g.redraw()),!an[4]){g.redrawHint("drag",!0),g.redrawHint("eles",!0);var Gr=pi&&pi.grabbed();ot(hi),Gr&&(pi.emit("freeon"),hi.emit("free"),g.dragData.didDrag&&(pi.emit("dragfreeon"),hi.emit("dragfree")))}}an[4]=0,g.hoverData.down=null,g.hoverData.cxtStarted=!1,g.hoverData.draggingEles=!1,g.hoverData.selecting=!1,g.hoverData.isOverThresholdDrag=!1,g.dragData.didDrag=!1,g.hoverData.dragged=!1,g.hoverData.dragDelta=[],g.hoverData.mdownPos=null,g.hoverData.mdownGPos=null}},!1);var Xt=function(Cn){if(!g.scrollingPage){var qi=g.cy,Lr=qi.zoom(),Tt=qi.pan(),an=g.projectIntoViewport(Cn.clientX,Cn.clientY),ti=[an[0]*Lr+Tt.x,an[1]*Lr+Tt.y];if(g.hoverData.draggingEles||g.hoverData.dragging||g.hoverData.cxtStarted||0!==g.selection[4])return void Cn.preventDefault();if(qi.panningEnabled()&&qi.userPanningEnabled()&&qi.zoomingEnabled()&&qi.userZoomingEnabled()){var hi;Cn.preventDefault(),g.data.wheelZooming=!0,clearTimeout(g.data.wheelTimeout),g.data.wheelTimeout=setTimeout(function(){g.data.wheelZooming=!1,g.redrawHint("eles",!0),g.redraw()},150),hi=null!=Cn.deltaY?Cn.deltaY/-250:null!=Cn.wheelDeltaY?Cn.wheelDeltaY/1e3:Cn.wheelDelta/1e3,hi*=g.wheelSensitivity,1===Cn.deltaMode&&(hi*=33);var os=qi.zoom()*Math.pow(10,hi);"gesturechange"===Cn.type&&(os=g.gestureStartZoom*Cn.scale),qi.zoom({level:os,renderedPosition:{x:ti[0],y:ti[1]}}),qi.emit("gesturechange"===Cn.type?"pinchzoom":"scrollzoom")}}};g.registerBinding(g.container,"wheel",Xt,!0),g.registerBinding(window,"scroll",function(Cn){g.scrollingPage=!0,clearTimeout(g.scrollingPageTimeout),g.scrollingPageTimeout=setTimeout(function(){g.scrollingPage=!1},250)},!0),g.registerBinding(g.container,"gesturestart",function(Cn){g.gestureStartZoom=g.cy.zoom(),g.hasTouchStarted||Cn.preventDefault()},!0),g.registerBinding(g.container,"gesturechange",function(Yr){g.hasTouchStarted||Xt(Yr)},!0),g.registerBinding(g.container,"mouseout",function(Cn){var qi=g.projectIntoViewport(Cn.clientX,Cn.clientY);g.cy.emit({originalEvent:Cn,type:"mouseout",position:{x:qi[0],y:qi[1]}})},!1),g.registerBinding(g.container,"mouseover",function(Cn){var qi=g.projectIntoViewport(Cn.clientX,Cn.clientY);g.cy.emit({originalEvent:Cn,type:"mouseover",position:{x:qi[0],y:qi[1]}})},!1);var Nn,xn,gi,$n,ai,wi,Pi,er,xi,Ki,hr,Ar,mr,sr,Sr,ts,ps,Xs,sa,Cs,pr=function(Cn,qi,Lr,Tt){return Math.sqrt((Lr-Cn)*(Lr-Cn)+(Tt-qi)*(Tt-qi))},Si=function(Cn,qi,Lr,Tt){return(Lr-Cn)*(Lr-Cn)+(Tt-qi)*(Tt-qi)};if(g.registerBinding(g.container,"touchstart",sr=function(Cn){if(g.hasTouchStarted=!0,Mn(Cn)){Et(),g.touchData.capture=!0,g.data.bgActivePosistion=void 0;var qi=g.cy,Lr=g.touchData.now,Tt=g.touchData.earlier;if(Cn.touches[0]){var an=g.projectIntoViewport(Cn.touches[0].clientX,Cn.touches[0].clientY);Lr[0]=an[0],Lr[1]=an[1]}if(Cn.touches[1]&&(an=g.projectIntoViewport(Cn.touches[1].clientX,Cn.touches[1].clientY),Lr[2]=an[0],Lr[3]=an[1]),Cn.touches[2]&&(an=g.projectIntoViewport(Cn.touches[2].clientX,Cn.touches[2].clientY),Lr[4]=an[0],Lr[5]=an[1]),Cn.touches[1]){g.touchData.singleTouchMoved=!0,ot(g.dragData.touchDragEles);var ti=g.findContainerClientCoords();hr=ti[2],Ar=ti[3],xn=Cn.touches[0].clientY-(Ki=ti[1]),gi=Cn.touches[1].clientX-(xi=ti[0]),$n=Cn.touches[1].clientY-Ki,mr=0<=(Nn=Cn.touches[0].clientX-xi)&&Nn<=hr&&0<=gi&&gi<=hr&&0<=xn&&xn<=Ar&&0<=$n&&$n<=Ar;var hi=qi.pan(),pi=qi.zoom();if(ai=pr(Nn,xn,gi,$n),wi=Si(Nn,xn,gi,$n),er=[((Pi=[(Nn+gi)/2,(xn+$n)/2])[0]-hi.x)/pi,(Pi[1]-hi.y)/pi],wi<4e4&&!Cn.touches[2]){var rr=g.findNearestElement(Lr[0],Lr[1],!0,!0),Ws=g.findNearestElement(Lr[2],Lr[3],!0,!0);return rr&&rr.isNode()?(rr.activate().emit({originalEvent:Cn,type:"cxttapstart",position:{x:Lr[0],y:Lr[1]}}),g.touchData.start=rr):Ws&&Ws.isNode()?(Ws.activate().emit({originalEvent:Cn,type:"cxttapstart",position:{x:Lr[0],y:Lr[1]}}),g.touchData.start=Ws):qi.emit({originalEvent:Cn,type:"cxttapstart",position:{x:Lr[0],y:Lr[1]}}),g.touchData.start&&(g.touchData.start._private.grabbed=!1),g.touchData.cxt=!0,g.touchData.cxtDragged=!1,g.data.bgActivePosistion=void 0,void g.redraw()}}if(Cn.touches[2])qi.boxSelectionEnabled()&&Cn.preventDefault();else if(!Cn.touches[1]&&Cn.touches[0]){var Ur=g.findNearestElements(Lr[0],Lr[1],!0,!0),Gr=Ur[0];if(null!=Gr&&(Gr.activate(),g.touchData.start=Gr,g.touchData.starts=Ur,g.nodeIsGrabbable(Gr))){var as=g.dragData.touchDragEles=qi.collection(),go=null;g.redrawHint("eles",!0),g.redrawHint("drag",!0),Gr.selected()?(go=qi.$(function(al){return al.selected()&&g.nodeIsGrabbable(al)}),$e(go,{addToList:as})):Ke(Gr,{addToList:as}),X(Gr);var Ao=function(Os){return{originalEvent:Cn,type:Os,position:{x:Lr[0],y:Lr[1]}}};Gr.emit(Ao("grabon")),go?go.forEach(function(al){al.emit(Ao("grab"))}):Gr.emit(Ao("grab"))}p(Gr,["touchstart","tapstart","vmousedown"],Cn,{x:Lr[0],y:Lr[1]}),null==Gr&&(g.data.bgActivePosistion={x:an[0],y:an[1]},g.redrawHint("select",!0),g.redraw()),g.touchData.singleTouchMoved=!1,g.touchData.singleTouchStartTime=+new Date,clearTimeout(g.touchData.tapholdTimeout),g.touchData.tapholdTimeout=setTimeout(function(){!1===g.touchData.singleTouchMoved&&!g.pinching&&!g.touchData.selecting&&p(g.touchData.start,["taphold"],Cn,{x:Lr[0],y:Lr[1]})},g.tapholdDuration)}if(Cn.touches.length>=1){for(var Xl=g.touchData.startPosition=[],rl=0;rl<Lr.length;rl++)Xl[rl]=Tt[rl]=Lr[rl];var Uo=Cn.touches[0];g.touchData.startGPosition=[Uo.clientX,Uo.clientY]}}},!1),g.registerBinding(window,"touchmove",Sr=function(Cn){var qi=g.touchData.capture;if(qi||Mn(Cn)){var Lr=g.selection,Tt=g.cy,an=g.touchData.now,ti=g.touchData.earlier,hi=Tt.zoom();if(Cn.touches[0]){var pi=g.projectIntoViewport(Cn.touches[0].clientX,Cn.touches[0].clientY);an[0]=pi[0],an[1]=pi[1]}Cn.touches[1]&&(pi=g.projectIntoViewport(Cn.touches[1].clientX,Cn.touches[1].clientY),an[2]=pi[0],an[3]=pi[1]),Cn.touches[2]&&(pi=g.projectIntoViewport(Cn.touches[2].clientX,Cn.touches[2].clientY),an[4]=pi[0],an[5]=pi[1]);var gs,os=g.touchData.startGPosition;if(qi&&Cn.touches[0]&&os){for(var rr=[],Ws=0;Ws<an.length;Ws++)rr[Ws]=an[Ws]-ti[Ws];var Ur=Cn.touches[0].clientX-os[0],as=Cn.touches[0].clientY-os[1];gs=Ur*Ur+as*as>=g.touchTapThreshold2}if(qi&&g.touchData.cxt){Cn.preventDefault();var Os=Si(Xl=Cn.touches[0].clientX-xi,rl=Cn.touches[0].clientY-Ki,Uo=Cn.touches[1].clientX-xi,al=Cn.touches[1].clientY-Ki);if(Os/wi>=2.25||Os>=22500){g.touchData.cxt=!1,g.data.bgActivePosistion=void 0,g.redrawHint("select",!0);var Sp={originalEvent:Cn,type:"cxttapend",position:{x:an[0],y:an[1]}};g.touchData.start?(g.touchData.start.unactivate().emit(Sp),g.touchData.start=null):Tt.emit(Sp)}}if(qi&&g.touchData.cxt){Sp={originalEvent:Cn,type:"cxtdrag",position:{x:an[0],y:an[1]}},g.data.bgActivePosistion=void 0,g.redrawHint("select",!0),g.touchData.start?g.touchData.start.emit(Sp):Tt.emit(Sp),g.touchData.start&&(g.touchData.start._private.grabbed=!1),g.touchData.cxtDragged=!0;var Wc=g.findNearestElement(an[0],an[1],!0,!0);(!g.touchData.cxtOver||Wc!==g.touchData.cxtOver)&&(g.touchData.cxtOver&&g.touchData.cxtOver.emit({originalEvent:Cn,type:"cxtdragout",position:{x:an[0],y:an[1]}}),g.touchData.cxtOver=Wc,Wc&&Wc.emit({originalEvent:Cn,type:"cxtdragover",position:{x:an[0],y:an[1]}}))}else if(qi&&Cn.touches[2]&&Tt.boxSelectionEnabled())Cn.preventDefault(),g.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,g.touchData.selecting||Tt.emit({originalEvent:Cn,type:"boxstart",position:{x:an[0],y:an[1]}}),g.touchData.selecting=!0,g.touchData.didSelect=!0,Lr[4]=1,Lr&&0!==Lr.length&&void 0!==Lr[0]?(Lr[2]=(an[0]+an[2]+an[4])/3,Lr[3]=(an[1]+an[3]+an[5])/3):(Lr[0]=(an[0]+an[2]+an[4])/3,Lr[1]=(an[1]+an[3]+an[5])/3,Lr[2]=(an[0]+an[2]+an[4])/3+1,Lr[3]=(an[1]+an[3]+an[5])/3+1),g.redrawHint("select",!0),g.redraw();else if(qi&&Cn.touches[1]&&!g.touchData.didSelect&&Tt.zoomingEnabled()&&Tt.panningEnabled()&&Tt.userZoomingEnabled()&&Tt.userPanningEnabled()){if(Cn.preventDefault(),g.data.bgActivePosistion=void 0,g.redrawHint("select",!0),lc=g.dragData.touchDragEles){g.redrawHint("drag",!0);for(var jc=0;jc<lc.length;jc++){var Jp=lc[jc]._private;Jp.grabbed=!1,Jp.rscratch.inDragLayer=!1}}var Xl,rl,Uo,al,$c=g.touchData.start,uo=pr(Xl=Cn.touches[0].clientX-xi,rl=Cn.touches[0].clientY-Ki,Uo=Cn.touches[1].clientX-xi,al=Cn.touches[1].clientY-Ki),Eb=uo/ai;if(mr){var l0=(Xl-Nn+(Uo-gi))/2,Tb=(rl-xn+(al-$n))/2,Hg=Tt.zoom(),cy=Hg*Eb,l_=Tt.pan(),Gg=er[0]*Hg+l_.x,u0=er[1]*Hg+l_.y,Mb={x:-cy/Hg*(Gg-l_.x-l0)+Gg,y:-cy/Hg*(u0-l_.y-Tb)+u0};$c&&$c.active()&&(ot(lc=g.dragData.touchDragEles),g.redrawHint("drag",!0),g.redrawHint("eles",!0),$c.unactivate().emit("freeon"),lc.emit("free"),g.dragData.didDrag&&($c.emit("dragfreeon"),lc.emit("dragfree"))),Tt.viewport({zoom:cy,pan:Mb,cancelOnFailedZoom:!0}),Tt.emit("pinchzoom"),ai=uo,Nn=Xl,xn=rl,gi=Uo,$n=al,g.pinching=!0}Cn.touches[0]&&(pi=g.projectIntoViewport(Cn.touches[0].clientX,Cn.touches[0].clientY),an[0]=pi[0],an[1]=pi[1]),Cn.touches[1]&&(pi=g.projectIntoViewport(Cn.touches[1].clientX,Cn.touches[1].clientY),an[2]=pi[0],an[3]=pi[1]),Cn.touches[2]&&(pi=g.projectIntoViewport(Cn.touches[2].clientX,Cn.touches[2].clientY),an[4]=pi[0],an[5]=pi[1])}else if(Cn.touches[0]&&!g.touchData.didSelect){var Qf=g.touchData.start,Db=g.touchData.last;if(!g.hoverData.draggingEles&&!g.swipePanning&&(Wc=g.findNearestElement(an[0],an[1],!0,!0)),qi&&null!=Qf&&Cn.preventDefault(),qi&&null!=Qf&&g.nodeIsDraggable(Qf))if(gs){var lc=g.dragData.touchDragEles,u_=!g.dragData.didDrag;u_&&$e(lc,{inDragLayer:!0}),g.dragData.didDrag=!0;var c_={x:0,y:0};en(rr[0])&&en(rr[1])&&(c_.x+=rr[0],c_.y+=rr[1],u_)&&(g.redrawHint("eles",!0),(vf=g.touchData.dragDelta)&&en(vf[0])&&en(vf[1])&&(c_.x+=vf[0],c_.y+=vf[1])),g.hoverData.draggingEles=!0,lc.silentShift(c_).emit("position drag"),g.redrawHint("drag",!0),g.touchData.startPosition[0]==ti[0]&&g.touchData.startPosition[1]==ti[1]&&g.redrawHint("eles",!0),g.redraw()}else{var vf;0===(vf=g.touchData.dragDelta=g.touchData.dragDelta||[]).length?(vf.push(rr[0]),vf.push(rr[1])):(vf[0]+=rr[0],vf[1]+=rr[1])}if(p(Qf||Wc,["touchmove","tapdrag","vmousemove"],Cn,{x:an[0],y:an[1]}),(!Qf||!Qf.grabbed())&&Wc!=Db&&(Db&&Db.emit({originalEvent:Cn,type:"tapdragout",position:{x:an[0],y:an[1]}}),Wc&&Wc.emit({originalEvent:Cn,type:"tapdragover",position:{x:an[0],y:an[1]}})),g.touchData.last=Wc,qi)for(jc=0;jc<an.length;jc++)an[jc]&&g.touchData.startPosition[jc]&&gs&&(g.touchData.singleTouchMoved=!0);qi&&(null==Qf||Qf.pannable())&&Tt.panningEnabled()&&Tt.userPanningEnabled()&&(A(Qf,g.touchData.starts)&&(Cn.preventDefault(),g.data.bgActivePosistion||(g.data.bgActivePosistion=ba(g.touchData.startPosition)),g.swipePanning?(Tt.panBy({x:rr[0]*hi,y:rr[1]*hi}),Tt.emit("dragpan")):gs&&(g.swipePanning=!0,Tt.panBy({x:Ur*hi,y:as*hi}),Tt.emit("dragpan"),Qf&&(Qf.unactivate(),g.redrawHint("select",!0),g.touchData.start=null))),pi=g.projectIntoViewport(Cn.touches[0].clientX,Cn.touches[0].clientY),an[0]=pi[0],an[1]=pi[1])}for(Ws=0;Ws<an.length;Ws++)ti[Ws]=an[Ws];qi&&Cn.touches.length>0&&!g.hoverData.draggingEles&&!g.swipePanning&&null!=g.data.bgActivePosistion&&(g.data.bgActivePosistion=void 0,g.redrawHint("select",!0),g.redraw())}},!1),g.registerBinding(window,"touchcancel",ts=function(Cn){var qi=g.touchData.start;g.touchData.capture=!1,qi&&qi.unactivate()}),g.registerBinding(window,"touchend",ps=function(Cn){var qi=g.touchData.start;if(g.touchData.capture){0===Cn.touches.length&&(g.touchData.capture=!1),Cn.preventDefault();var Tt=g.selection;g.swipePanning=!1,g.hoverData.draggingEles=!1;var gs,an=g.cy,ti=an.zoom(),hi=g.touchData.now,pi=g.touchData.earlier;if(Cn.touches[0]){var os=g.projectIntoViewport(Cn.touches[0].clientX,Cn.touches[0].clientY);hi[0]=os[0],hi[1]=os[1]}if(Cn.touches[1]&&(os=g.projectIntoViewport(Cn.touches[1].clientX,Cn.touches[1].clientY),hi[2]=os[0],hi[3]=os[1]),Cn.touches[2]&&(os=g.projectIntoViewport(Cn.touches[2].clientX,Cn.touches[2].clientY),hi[4]=os[0],hi[5]=os[1]),qi&&qi.unactivate(),g.touchData.cxt){if(gs={originalEvent:Cn,type:"cxttapend",position:{x:hi[0],y:hi[1]}},qi?qi.emit(gs):an.emit(gs),!g.touchData.cxtDragged){var rr={originalEvent:Cn,type:"cxttap",position:{x:hi[0],y:hi[1]}};qi?qi.emit(rr):an.emit(rr)}return g.touchData.start&&(g.touchData.start._private.grabbed=!1),g.touchData.cxt=!1,g.touchData.start=null,void g.redraw()}if(!Cn.touches[2]&&an.boxSelectionEnabled()&&g.touchData.selecting){g.touchData.selecting=!1;var Ws=an.collection(g.getAllInBox(Tt[0],Tt[1],Tt[2],Tt[3]));Tt[0]=void 0,Tt[1]=void 0,Tt[2]=void 0,Tt[3]=void 0,Tt[4]=0,g.redrawHint("select",!0),an.emit({type:"boxend",originalEvent:Cn,position:{x:hi[0],y:hi[1]}}),Ws.emit("box").stdFilter(function(ec){return ec.selectable()&&!ec.selected()}).select().emit("boxselect"),Ws.nonempty()&&g.redrawHint("eles",!0),g.redraw()}if(qi?.unactivate(),Cn.touches[2])g.data.bgActivePosistion=void 0,g.redrawHint("select",!0);else if(!Cn.touches[1]&&!Cn.touches[0]&&!Cn.touches[0]){g.data.bgActivePosistion=void 0,g.redrawHint("select",!0);var Gr=g.dragData.touchDragEles;if(null!=qi){var as=qi._private.grabbed;ot(Gr),g.redrawHint("drag",!0),g.redrawHint("eles",!0),as&&(qi.emit("freeon"),Gr.emit("free"),g.dragData.didDrag&&(qi.emit("dragfreeon"),Gr.emit("dragfree"))),p(qi,["touchend","tapend","vmouseup","tapdragout"],Cn,{x:hi[0],y:hi[1]}),qi.unactivate(),g.touchData.start=null}else{var go=g.findNearestElement(hi[0],hi[1],!0,!0);p(go,["touchend","tapend","vmouseup","tapdragout"],Cn,{x:hi[0],y:hi[1]})}var Ao=g.touchData.startPosition[0]-hi[0],rl=g.touchData.startPosition[1]-hi[1],Os=(Ao*Ao+rl*rl)*ti*ti;g.touchData.singleTouchMoved||(qi||an.$(":selected").unselect(["tapunselect"]),p(qi,["tap","vclick"],Cn,{x:hi[0],y:hi[1]}),Xs=!1,Cn.timeStamp-Cs<=an.multiClickDebounceTime()?(sa&&clearTimeout(sa),Xs=!0,Cs=null,p(qi,["dbltap","vdblclick"],Cn,{x:hi[0],y:hi[1]})):(sa=setTimeout(function(){Xs||p(qi,["onetap","voneclick"],Cn,{x:hi[0],y:hi[1]})},an.multiClickDebounceTime()),Cs=Cn.timeStamp)),null!=qi&&!g.dragData.didDrag&&qi._private.selectable&&Os<g.touchTapThreshold2&&!g.pinching&&("single"===an.selectionType()?(an.$(c).unmerge(qi).unselect(["tapunselect"]),qi.select(["tapselect"])):qi.selected()?qi.unselect(["tapunselect"]):qi.select(["tapselect"]),g.redrawHint("eles",!0)),g.touchData.singleTouchMoved=!0}for(var ru=0;ru<hi.length;ru++)pi[ru]=hi[ru];g.dragData.didDrag=!1,0===Cn.touches.length&&(g.touchData.dragDelta=[],g.touchData.startPosition=null,g.touchData.startGPosition=null,g.touchData.didSelect=!1),Cn.touches.length<2&&(1===Cn.touches.length&&(g.touchData.startGPosition=[Cn.touches[0].clientX,Cn.touches[0].clientY]),g.pinching=!1,g.redrawHint("eles",!0),g.redraw())}},!1),typeof TouchEvent>"u"){var ds=[],ia=function(Cn){return{clientX:Cn.clientX,clientY:Cn.clientY,force:1,identifier:Cn.pointerId,pageX:Cn.pageX,pageY:Cn.pageY,radiusX:Cn.width/2,radiusY:Cn.height/2,screenX:Cn.screenX,screenY:Cn.screenY,target:Cn.target}},Ts=function(Cn){for(var qi=0;qi<ds.length;qi++)if(ds[qi].event.pointerId===Cn.pointerId)return void ds.splice(qi,1)},Ya=function(Cn){Cn.touches=ds.map(function(qi){return qi.touch})},oa=function(Cn){return"mouse"===Cn.pointerType||4===Cn.pointerType};g.registerBinding(g.container,"pointerdown",function(Yr){oa(Yr)||(Yr.preventDefault(),ds.push(function(Cn){return{event:Cn,touch:ia(Cn)}}(Yr)),Ya(Yr),sr(Yr))}),g.registerBinding(g.container,"pointerup",function(Yr){oa(Yr)||(Ts(Yr),Ya(Yr),ps(Yr))}),g.registerBinding(g.container,"pointercancel",function(Yr){oa(Yr)||(Ts(Yr),Ya(Yr),ts())}),g.registerBinding(g.container,"pointermove",function(Yr){var Cn,qi;oa(Yr)||(Yr.preventDefault(),Cn=Yr,(qi=ds.filter(function(Lr){return Lr.event.pointerId===Cn.pointerId})[0]).event=Cn,qi.touch=ia(Cn),Ya(Yr),Sr(Yr))})}};var ff={generatePolygon:function(g,c){return this.nodeShapes[g]={renderer:this,name:g,points:c,draw:function(b,A,E,M,U){this.renderer.nodeShapeImpl("polygon",b,A,E,M,U,this.points)},intersectLine:function(b,A,E,M,U,ne,X){return No(U,ne,this.points,b,A,E/2,M/2,X)},checkPoint:function(b,A,E,M,U,ne,X){return ho(b,A,this.points,ne,X,M,U,[0,-1],E)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(c,p,b,A,E){this.renderer.nodeShapeImpl(this.name,c,p,b,A,E)},intersectLine:function(c,p,b,A,E,M,U){return function(c,p,b,A,E,M){var U=b-c,ne=A-p;U/=E,ne/=M;var X=Math.sqrt(U*U+ne*ne),fe=X-1;if(fe<0)return[];var be=fe/X;return[(b-c)*be+c,(A-p)*be+p]}(E,M,c,p,b/2+U,A/2+U)},checkPoint:function(c,p,b,A,E,M,U){return pl(c,p,A,E,M,U,b)}}},generateRoundPolygon:function(g,c){for(var p=new Array(2*c.length),b=0;b<c.length/2;b++){var E,A=2*b;E=b<c.length/2-1?2*(b+1):0,p[4*b]=c[A],p[4*b+1]=c[A+1];var M=c[E]-c[A],U=c[E+1]-c[A+1],ne=Math.sqrt(M*M+U*U);p[4*b+2]=M/ne,p[4*b+3]=U/ne}return this.nodeShapes[g]={renderer:this,name:g,points:p,draw:function(fe,be,Ge,$e,Ke){this.renderer.nodeShapeImpl("round-polygon",fe,be,Ge,$e,Ke,this.points)},intersectLine:function(fe,be,Ge,$e,Ke,ot,_t){return function(c,p,b,A,E,M,U,ne){for(var fe,X=[],be=new Array(b.length),Ge=M/2,$e=U/2,Ke=ks(M,U),ot=0;ot<b.length/4;ot++){var Et,_t;_t=0===ot?b.length-2:4*ot-2,Et=4*ot+2;var $t=A+Ge*b[4*ot],Ut=E+$e*b[4*ot+1],In=Ke/Math.tan(Math.acos(-b[_t]*b[Et]-b[_t+1]*b[Et+1])/2),En=$t-In*b[_t],hn=Ut-In*b[_t+1],Mn=$t+In*b[Et],mn=Ut+In*b[Et+1];0===ot?(be[b.length-2]=En,be[b.length-1]=hn):(be[4*ot-2]=En,be[4*ot-1]=hn),be[4*ot]=Mn,be[4*ot+1]=mn;var Fn=b[_t+1],Rn=-b[_t];Fn*b[Et]+Rn*b[Et+1]<0&&(Fn*=-1,Rn*=-1),0!==(fe=Kd(c,p,A,E,En+Fn*Ke,hn+Rn*Ke,Ke)).length&&X.push(fe[0],fe[1])}for(var gi=0;gi<be.length/4;gi++)0!==(fe=Ul(c,p,A,E,be[4*gi],be[4*gi+1],be[4*gi+2],be[4*gi+3],!1)).length&&X.push(fe[0],fe[1]);if(X.length>2){for(var $n=[X[0],X[1]],ai=Math.pow($n[0]-c,2)+Math.pow($n[1]-p,2),wi=1;wi<X.length/2;wi++){var Pi=Math.pow(X[2*wi]-c,2)+Math.pow(X[2*wi+1]-p,2);Pi<=ai&&($n[0]=X[2*wi],$n[1]=X[2*wi+1],ai=Pi)}return $n}return X}(Ke,ot,this.points,fe,be,Ge,$e)},checkPoint:function(fe,be,Ge,$e,Ke,ot,_t){return function(c,p,b,A,E,M,U){for(var ne=new Array(b.length),X=M/2,fe=U/2,be=ks(M,U),Ge=be*be,$e=0;$e<b.length/4;$e++){var ot,Ke;Ke=0===$e?b.length-2:4*$e-2,ot=4*$e+2;var _t=A+X*b[4*$e],Et=E+fe*b[4*$e+1],Ut=be/Math.tan(Math.acos(-b[Ke]*b[ot]-b[Ke+1]*b[ot+1])/2),un=_t-Ut*b[Ke],In=Et-Ut*b[Ke+1],En=_t+Ut*b[ot],hn=Et+Ut*b[ot+1];ne[4*$e]=un,ne[4*$e+1]=In,ne[4*$e+2]=En,ne[4*$e+3]=hn;var Mn=b[Ke+1],mn=-b[Ke];Mn*b[ot]+mn*b[ot+1]<0&&(Mn*=-1,mn*=-1);var Xt=In+mn*be;if(Math.pow(un+Mn*be-c,2)+Math.pow(Xt-p,2)<=Ge)return!0}return fl(c,p,ne)}(fe,be,this.points,ot,_t,$e,Ke)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:hs(4,0),draw:function(c,p,b,A,E){this.renderer.nodeShapeImpl(this.name,c,p,b,A,E)},intersectLine:function(c,p,b,A,E,M,U){return Wu(E,M,c,p,b,A,U)},checkPoint:function(c,p,b,A,E,M,U){var ne=Zd(A,E),X=2*ne;return!!(ho(c,p,this.points,M,U,A,E-X,[0,-1],b)||ho(c,p,this.points,M,U,A-X,E,[0,-1],b)||pl(c,p,X,X,M-A/2+ne,U-E/2+ne,b)||pl(c,p,X,X,M+A/2-ne,U-E/2+ne,b)||pl(c,p,X,X,M+A/2-ne,U+E/2-ne,b)||pl(c,p,X,X,M-A/2+ne,U+E/2-ne,b))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:hs(4,0),draw:function(c,p,b,A,E){this.renderer.nodeShapeImpl(this.name,c,p,b,A,E)},generateCutTrianglePts:function(c,p,b,A){var E=this.cornerLength,M=p/2,U=c/2,ne=b-U,X=b+U,fe=A-M,be=A+M;return{topLeft:[ne,fe+E,ne+E,fe,ne+E,fe+E],topRight:[X-E,fe,X,fe+E,X-E,fe+E],bottomRight:[X,be-E,X-E,be,X-E,be-E],bottomLeft:[ne+E,be,ne,be-E,ne+E,be-E]}},intersectLine:function(c,p,b,A,E,M,U){var ne=this.generateCutTrianglePts(b+2*U,A+2*U,c,p),X=[].concat.apply([],[ne.topLeft.splice(0,4),ne.topRight.splice(0,4),ne.bottomRight.splice(0,4),ne.bottomLeft.splice(0,4)]);return No(E,M,X,c,p)},checkPoint:function(c,p,b,A,E,M,U){if(ho(c,p,this.points,M,U,A,E-2*this.cornerLength,[0,-1],b)||ho(c,p,this.points,M,U,A-2*this.cornerLength,E,[0,-1],b))return!0;var ne=this.generateCutTrianglePts(A,E,M,U);return fl(c,p,ne.topLeft)||fl(c,p,ne.topRight)||fl(c,p,ne.bottomRight)||fl(c,p,ne.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:hs(4,0),draw:function(c,p,b,A,E){this.renderer.nodeShapeImpl(this.name,c,p,b,A,E)},intersectLine:function(c,p,b,A,E,M,U){var be=this.generateBarrelBezierPts(b+2*U,A+2*U,c,p),Ge=function(ot){var _t=Zr({x:ot[0],y:ot[1]},{x:ot[2],y:ot[3]},{x:ot[4],y:ot[5]},.15),Et=Zr({x:ot[0],y:ot[1]},{x:ot[2],y:ot[3]},{x:ot[4],y:ot[5]},.5),$t=Zr({x:ot[0],y:ot[1]},{x:ot[2],y:ot[3]},{x:ot[4],y:ot[5]},.85);return[ot[0],ot[1],_t.x,_t.y,Et.x,Et.y,$t.x,$t.y,ot[4],ot[5]]},$e=[].concat(Ge(be.topLeft),Ge(be.topRight),Ge(be.bottomRight),Ge(be.bottomLeft));return No(E,M,$e,c,p)},generateBarrelBezierPts:function(c,p,b,A){var E=p/2,M=c/2,U=b-M,ne=b+M,X=A-E,fe=A+E,be=Qs(c,p),Ge=be.heightOffset,$e=be.widthOffset,Ke=be.ctrlPtOffsetPct*c,ot={topLeft:[U,X+Ge,U+Ke,X,U+$e,X],topRight:[ne-$e,X,ne-Ke,X,ne,X+Ge],bottomRight:[ne,fe-Ge,ne-Ke,fe,ne-$e,fe],bottomLeft:[U+$e,fe,U+Ke,fe,U,fe-Ge]};return ot.topLeft.isTop=!0,ot.topRight.isTop=!0,ot.bottomLeft.isBottom=!0,ot.bottomRight.isBottom=!0,ot},checkPoint:function(c,p,b,A,E,M,U){var ne=Qs(A,E),fe=ne.widthOffset;if(ho(c,p,this.points,M,U,A,E-2*ne.heightOffset,[0,-1],b)||ho(c,p,this.points,M,U,A-2*fe,E,[0,-1],b))return!0;for(var be=this.generateBarrelBezierPts(A,E,M,U),Ge=function(hn,Mn,mn){var Fn=mn[4],Rn=mn[2],Xt=mn[0],Nn=mn[5],xn=mn[1],gi=Math.min(Fn,Xt),$n=Math.max(Fn,Xt),ai=Math.min(Nn,xn),wi=Math.max(Nn,xn);if(gi<=hn&&hn<=$n&&ai<=Mn&&Mn<=wi){var Pi=function(c,p,b){return[c-2*p+b,2*(p-c),c]}(Fn,Rn,Xt),er=function(c,p,b,A){var E=p*p-4*c*(b-=A);if(E<0)return[];var M=Math.sqrt(E),U=2*c;return[(-p+M)/U,(-p-M)/U]}(Pi[0],Pi[1],Pi[2],hn),xi=er.filter(function(Ki){return 0<=Ki&&Ki<=1});if(xi.length>0)return xi[0]}return null},$e=Object.keys(be),Ke=0;Ke<$e.length;Ke++){var _t=be[$e[Ke]],Et=Ge(c,p,_t);if(null!=Et){var In=Cu(_t[5],_t[3],_t[1],Et);if(_t.isTop&&In<=p||_t.isBottom&&p<=In)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:hs(4,0),draw:function(c,p,b,A,E){this.renderer.nodeShapeImpl(this.name,c,p,b,A,E)},intersectLine:function(c,p,b,A,E,M,U){var X=p-(A/2+U),Ge=Ul(E,M,c,p,c-(b/2+U),X,c+(b/2+U),X,!1);return Ge.length>0?Ge:Wu(E,M,c,p,b,A,U)},checkPoint:function(c,p,b,A,E,M,U){var ne=Zd(A,E),X=2*ne;if(ho(c,p,this.points,M,U,A,E-X,[0,-1],b)||ho(c,p,this.points,M,U,A-X,E,[0,-1],b))return!0;var fe=A/2+2*b,be=E/2+2*b;return!!(fl(c,p,[M-fe,U-be,M-fe,U,M+fe,U,M+fe,U-be])||pl(c,p,X,X,M+A/2-ne,U+E/2-ne,b)||pl(c,p,X,X,M-A/2+ne,U+E/2-ne,b))}}},registerNodeShapes:function(){var g=this.nodeShapes={},c=this;this.generateEllipse(),this.generatePolygon("triangle",hs(3,0)),this.generateRoundPolygon("round-triangle",hs(3,0)),this.generatePolygon("rectangle",hs(4,0)),g.square=g.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var p=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",p),this.generateRoundPolygon("round-diamond",p),this.generatePolygon("pentagon",hs(5,0)),this.generateRoundPolygon("round-pentagon",hs(5,0)),this.generatePolygon("hexagon",hs(6,0)),this.generateRoundPolygon("round-hexagon",hs(6,0)),this.generatePolygon("heptagon",hs(7,0)),this.generateRoundPolygon("round-heptagon",hs(7,0)),this.generatePolygon("octagon",hs(8,0)),this.generateRoundPolygon("round-octagon",hs(8,0));var b=new Array(20),A=zh(5,0),E=zh(5,Math.PI/5),M=.5*(3-Math.sqrt(5));M*=1.57;for(var U=0;U<E.length/2;U++)E[2*U]*=M,E[2*U+1]*=M;for(U=0;U<5;U++)b[4*U]=A[2*U],b[4*U+1]=A[2*U+1],b[4*U+2]=E[2*U],b[4*U+3]=E[2*U+1];b=Il(b),this.generatePolygon("star",b),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var ne=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",ne),this.generateRoundPolygon("round-tag",ne),g.makePolygon=function(X){var Ge,be="polygon-"+X.join("$");return(Ge=this[be])?Ge:c.generatePolygon(be,X)}}},Kp={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(g){g=g||On();var c=this;void 0===c.averageRedrawTime&&(c.averageRedrawTime=0),void 0===c.lastRedrawTime&&(c.lastRedrawTime=0),void 0===c.lastDrawTime&&(c.lastDrawTime=0),c.requestedFrame=!0,c.renderOptions=g},beforeRender:function(g,c){if(!this.destroyed){null==c&&We("Priority is not optional for beforeRender");var p=this.beforeRenderCallbacks;p.push({fn:g,priority:c}),p.sort(function(b,A){return A.priority-b.priority})}}},mv=function(c,p,b){for(var A=c.beforeRenderCallbacks,E=0;E<A.length;E++)A[E].fn(p,b)};Kp.startRenderLoop=function(){var g=this,c=g.cy;g.renderLoopStarted||(g.renderLoopStarted=!0,H(function b(A){if(!g.destroyed){if(!c.batching())if(g.requestedFrame&&!g.skipFrame){mv(g,!0,A);var E=Z();g.render(g.renderOptions);var M=g.lastDrawTime=Z();void 0===g.averageRedrawTime&&(g.averageRedrawTime=M-E),void 0===g.redrawCount&&(g.redrawCount=0),g.redrawCount++,void 0===g.redrawTotalTime&&(g.redrawTotalTime=0);var U=M-E;g.redrawTotalTime+=U,g.lastRedrawTime=U,g.averageRedrawTime=g.averageRedrawTime/2+U/2,g.requestedFrame=!1}else mv(g,!1,A);g.skipFrame=!1,H(b)}}))};var Pm=function(c){this.init(c)},Eu=Pm.prototype;Eu.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Eu.init=function(g){var c=this;c.options=g,c.cy=g.cy;var p=c.container=g.cy.container();if(ze){var b=ze.document,A=b.head,E="__________cytoscape_stylesheet",M="__________cytoscape_container",U=null!=b.getElementById(E);if(p.className.indexOf(M)<0&&(p.className=(p.className||"")+" "+M),!U){var ne=b.createElement("style");ne.id=E,ne.innerHTML="."+M+" { position: relative; }",A.insertBefore(ne,A.children[0])}"static"===ze.getComputedStyle(p).getPropertyValue("position")&&we("A Cytoscape container has style position:static and so can not use UI extensions properly")}c.selection=[void 0,void 0,void 0,void 0,0],c.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],c.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},c.dragData={possibleDragElements:[]},c.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},c.redraws=0,c.showFps=g.showFps,c.debug=g.debug,c.hideEdgesOnViewport=g.hideEdgesOnViewport,c.textureOnViewport=g.textureOnViewport,c.wheelSensitivity=g.wheelSensitivity,c.motionBlurEnabled=g.motionBlur,c.forcedPixelRatio=en(g.pixelRatio)?g.pixelRatio:null,c.motionBlur=g.motionBlur,c.motionBlurOpacity=g.motionBlurOpacity,c.motionBlurTransparency=1-c.motionBlurOpacity,c.motionBlurPxRatio=1,c.mbPxRBlurry=1,c.minMbLowQualFrames=4,c.fullQualityMb=!1,c.clearedForMotionBlur=[],c.desktopTapThreshold=g.desktopTapThreshold,c.desktopTapThreshold2=g.desktopTapThreshold*g.desktopTapThreshold,c.touchTapThreshold=g.touchTapThreshold,c.touchTapThreshold2=g.touchTapThreshold*g.touchTapThreshold,c.tapholdDuration=500,c.bindings=[],c.beforeRenderCallbacks=[],c.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},c.registerNodeShapes(),c.registerArrowShapes(),c.registerCalculationListeners()},Eu.notify=function(g,c){var p=this,b=p.cy;if(!this.destroyed){if("init"===g)return void p.load();if("destroy"===g)return void p.destroy();("add"===g||"remove"===g||"move"===g&&b.hasCompoundNodes()||"load"===g||"zorder"===g||"mount"===g)&&p.invalidateCachedZSortedEles(),"viewport"===g&&p.redrawHint("select",!0),("load"===g||"resize"===g||"mount"===g)&&(p.invalidateContainerClientCoordsCache(),p.matchCanvasSize(p.container)),p.redrawHint("eles",!0),p.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},Eu.destroy=function(){var g=this;g.destroyed=!0,g.cy.stopAnimationLoop();for(var c=0;c<g.bindings.length;c++){var p=g.bindings[c],A=p.target;(A.off||A.removeEventListener).apply(A,p.args)}if(g.bindings=[],g.beforeRenderCallbacks=[],g.onUpdateEleCalcsFns=[],g.removeObserver&&g.removeObserver.disconnect(),g.styleObserver&&g.styleObserver.disconnect(),g.resizeObserver&&g.resizeObserver.disconnect(),g.labelCalcDiv)try{document.body.removeChild(g.labelCalcDiv)}catch{}},Eu.isHeadless=function(){return!1},[Rg,bd,Yf,uh,ff,Kp].forEach(function(g){nr(Eu,g)});var wl=1e3/60,xp_setupDequeueing=function(c){return function(){var b=this,A=this.renderer;if(!b.dequeueingSetup){b.dequeueingSetup=!0;var E=K.default(function(){A.redrawHint("eles",!0),A.redrawHint("drag",!0),A.redraw()},c.deqRedrawThreshold);A.beforeRender(function(X,fe){var be=Z(),Ge=A.averageRedrawTime,$e=A.lastRedrawTime,Ke=[],ot=A.cy.extent(),_t=A.getPixelRatio();for(X||A.flushRenderedStyleQueue();;){var Et=Z(),$t=Et-be,Ut=Et-fe;if($e<wl){if(Ut>=c.deqFastCost*(wl-(X?Ge:0)))break}else if(X){if($t>=c.deqCost*$e||$t>=c.deqAvgCost*Ge)break}else if(Ut>=c.deqNoDrawCost*wl)break;var In=c.deq(b,_t,ot);if(!(In.length>0))break;for(var En=0;En<In.length;En++)Ke.push(In[En])}Ke.length>0&&(c.onDeqd(b,Ke),!X&&c.shouldRedraw(b,Ke,_t,ot)&&E())},(c.priority||Pe)(b))}}},Ng=function(){function g(c){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt;_e(this,g),this.idsByKey=new is,this.keyForId=new is,this.cachesByLvl=new is,this.lvls=[],this.getKey=c,this.doesEleInvalidateKey=p}return Re(g,[{key:"getIdsFor",value:function(p){null==p&&We("Can not get id list for null key");var b=this.idsByKey,A=this.idsByKey.get(p);return A||(A=new wr,b.set(p,A)),A}},{key:"addIdForKey",value:function(p,b){null!=p&&this.getIdsFor(p).add(b)}},{key:"deleteIdForKey",value:function(p,b){null!=p&&this.getIdsFor(p).delete(b)}},{key:"getNumberOfIdsForKey",value:function(p){return null==p?0:this.getIdsFor(p).size}},{key:"updateKeyMappingFor",value:function(p){var b=p.id(),A=this.keyForId.get(b),E=this.getKey(p);this.deleteIdForKey(A,b),this.addIdForKey(E,b),this.keyForId.set(b,E)}},{key:"deleteKeyMappingFor",value:function(p){var b=p.id(),A=this.keyForId.get(b);this.deleteIdForKey(A,b),this.keyForId.delete(b)}},{key:"keyHasChangedFor",value:function(p){var b=p.id();return this.keyForId.get(b)!==this.getKey(p)}},{key:"isInvalid",value:function(p){return this.keyHasChangedFor(p)||this.doesEleInvalidateKey(p)}},{key:"getCachesAt",value:function(p){var b=this.cachesByLvl,A=this.lvls,E=b.get(p);return E||(E=new is,b.set(p,E),A.push(p)),E}},{key:"getCache",value:function(p,b){return this.getCachesAt(b).get(p)}},{key:"get",value:function(p,b){var A=this.getKey(p),E=this.getCache(A,b);return null!=E&&this.updateKeyMappingFor(p),E}},{key:"getForCachedKey",value:function(p,b){var A=this.keyForId.get(p.id());return this.getCache(A,b)}},{key:"hasCache",value:function(p,b){return this.getCachesAt(b).has(p)}},{key:"has",value:function(p,b){var A=this.getKey(p);return this.hasCache(A,b)}},{key:"setCache",value:function(p,b,A){A.key=p,this.getCachesAt(b).set(p,A)}},{key:"set",value:function(p,b,A){var E=this.getKey(p);this.setCache(E,b,A),this.updateKeyMappingFor(p)}},{key:"deleteCache",value:function(p,b){this.getCachesAt(b).delete(p)}},{key:"delete",value:function(p,b){var A=this.getKey(p);this.deleteCache(A,b)}},{key:"invalidateKey",value:function(p){var b=this;this.lvls.forEach(function(A){return b.deleteCache(p,A)})}},{key:"invalidate",value:function(p){var b=p.id(),A=this.keyForId.get(b);this.deleteKeyMappingFor(p);var E=this.doesEleInvalidateKey(p);return E&&this.invalidateKey(A),E||0===this.getNumberOfIdsForKey(A)}}]),g}(),km={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Ab=jn({getKey:null,doesEleInvalidateKey:Bt,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Lt,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Zp=function(c,p){var b=this;b.renderer=c,b.onDequeues=[];var A=Ab(p);nr(b,A),b.lookup=new Ng(A.getKey,A.doesEleInvalidateKey),b.setupDequeueing()},_u=Zp.prototype;_u.reasons=km,_u.getTextureQueue=function(g){var c=this;return c.eleImgCaches=c.eleImgCaches||{},c.eleImgCaches[g]=c.eleImgCaches[g]||[]},_u.getRetiredTextureQueue=function(g){var p=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return p[g]=p[g]||[]},_u.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new q.default(function(p,b){return b.reqs-p.reqs})},_u.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},_u.getElement=function(g,c,p,b,A){var E=this,M=this.renderer,U=M.cy.zoom(),ne=this.lookup;if(!c||0===c.w||0===c.h||isNaN(c.w)||isNaN(c.h)||!g.visible()||g.removed()||!E.allowEdgeTxrCaching&&g.isEdge()||!E.allowParentTxrCaching&&g.isParent())return null;if(null==b&&(b=Math.ceil(Pu(U*p))),b<-4)b=-4;else if(U>=7.99||b>3)return null;var X=Math.pow(2,b),fe=c.h*X,be=c.w*X,Ge=M.eleTextBiggerThanMin(g,X);if(!this.isVisible(g,Ge))return null;var Ke,$e=ne.get(g,b);if($e&&$e.invalidated&&($e.invalidated=!1,$e.texture.invalidatedWidth-=$e.width),$e)return $e;if(Ke=fe<=25?25:fe<=50?50:50*Math.ceil(fe/50),fe>1024||be>1024)return null;var ot=E.getTextureQueue(Ke),_t=ot[ot.length-2],Et=function(){return E.recycleTexture(Ke,be)||E.addTexture(Ke,be)};_t||(_t=ot[ot.length-1]),_t||(_t=Et()),_t.width-_t.usedWidth<be&&(_t=Et());for(var En,$t=function($n){return $n&&$n.scaledLabelShown===Ge},Ut=A&&A===km.dequeue,un=A&&A===km.highQuality,In=A&&A===km.downscale,hn=b+1;hn<=3;hn++){var Mn=ne.get(g,hn);if(Mn){En=Mn;break}}var mn=En&&En.level===b+1?En:null,Fn=function(){_t.context.drawImage(mn.texture.canvas,mn.x,0,mn.width,mn.height,_t.usedWidth,0,be,fe)};if(_t.context.setTransform(1,0,0,1,0,0),_t.context.clearRect(_t.usedWidth,0,be,Ke),$t(mn))Fn();else if($t(En)){if(!un)return E.queueElement(g,En.level-1),En;for(var Rn=En.level;Rn>b;Rn--)mn=E.getElement(g,c,p,Rn,km.downscale);Fn()}else{var Xt;if(!Ut&&!un&&!In)for(var Nn=b-1;Nn>=-4;Nn--){var xn=ne.get(g,Nn);if(xn){Xt=xn;break}}if($t(Xt))return E.queueElement(g,b),Xt;_t.context.translate(_t.usedWidth,0),_t.context.scale(X,X),this.drawElement(_t.context,g,c,Ge,!1),_t.context.scale(1/X,1/X),_t.context.translate(-_t.usedWidth,0)}return $e={x:_t.usedWidth,texture:_t,level:b,scale:X,width:be,height:fe,scaledLabelShown:Ge},_t.usedWidth+=Math.ceil(be+8),_t.eleCaches.push($e),ne.set(g,b,$e),E.checkTextureFullness(_t),$e},_u.invalidateElements=function(g){for(var c=0;c<g.length;c++)this.invalidateElement(g[c])},_u.invalidateElement=function(g){var c=this,p=c.lookup,b=[];if(p.isInvalid(g)){for(var E=-4;E<=3;E++){var M=p.getForCachedKey(g,E);M&&b.push(M)}if(p.invalidate(g))for(var ne=0;ne<b.length;ne++){var X=b[ne],fe=X.texture;fe.invalidatedWidth+=X.width,X.invalidated=!0,c.checkTextureUtility(fe)}c.removeFromQueue(g)}},_u.checkTextureUtility=function(g){g.invalidatedWidth>=.2*g.width&&this.retireTexture(g)},_u.checkTextureFullness=function(g){var p=this.getTextureQueue(g.height);g.usedWidth/g.width>.8&&g.fullnessChecks>=10?ii(p,g):g.fullnessChecks++},_u.retireTexture=function(g){var p=g.height,b=this.getTextureQueue(p),A=this.lookup;ii(b,g),g.retired=!0;for(var E=g.eleCaches,M=0;M<E.length;M++){var U=E[M];A.deleteCache(U.key,U.level)}Ci(E),this.getRetiredTextureQueue(p).push(g)},_u.addTexture=function(g,c){var A={};return this.getTextureQueue(g).push(A),A.eleCaches=[],A.height=g,A.width=Math.max(1024,c),A.usedWidth=0,A.invalidatedWidth=0,A.fullnessChecks=0,A.canvas=this.renderer.makeOffscreenCanvas(A.width,A.height),A.context=A.canvas.getContext("2d"),A},_u.recycleTexture=function(g,c){for(var b=this.getTextureQueue(g),A=this.getRetiredTextureQueue(g),E=0;E<A.length;E++){var M=A[E];if(M.width>=c)return M.retired=!1,M.usedWidth=0,M.invalidatedWidth=0,M.fullnessChecks=0,Ci(M.eleCaches),M.context.setTransform(1,0,0,1,0,0),M.context.clearRect(0,0,M.width,M.height),ii(A,M),b.push(M),M}},_u.queueElement=function(g,c){var b=this.getElementQueue(),A=this.getElementKeyToQueue(),E=this.getKey(g),M=A[E];if(M)M.level=Math.max(M.level,c),M.eles.merge(g),M.reqs++,b.updateItem(M);else{var U={eles:g.spawn().merge(g),level:c,reqs:1,key:E};b.push(U),A[E]=U}},_u.dequeue=function(g){for(var c=this,p=c.getElementQueue(),b=c.getElementKeyToQueue(),A=[],E=c.lookup,M=0;M<1&&p.size()>0;M++){var U=p.pop(),ne=U.key,X=U.eles[0],fe=E.hasCache(X,U.level);if(b[ne]=null,!fe){A.push(U);var be=c.getBoundingBox(X);c.getElement(X,be,g,U.level,km.dequeue)}}return A},_u.removeFromQueue=function(g){var p=this.getElementQueue(),b=this.getElementKeyToQueue(),A=this.getKey(g),E=b[A];null!=E&&(1===E.eles.length?(E.reqs=Wt,p.updateItem(E),p.pop(),b[A]=null):E.eles.unmerge(g))},_u.onDequeue=function(g){this.onDequeues.push(g)},_u.offDequeue=function(g){ii(this.onDequeues,g)},_u.setupDequeueing=xp_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,p,b){return c.dequeue(p,b)},onDeqd:function(c,p){for(var b=0;b<c.onDequeues.length;b++)(0,c.onDequeues[b])(p)},shouldRedraw:function(c,p,b,A){for(var E=0;E<p.length;E++)for(var M=p[E].eles,U=0;U<M.length;U++){var ne=M[U].boundingBox();if(_g(ne,A))return!0}return!1},priority:function(c){return c.renderer.beforeRenderPriorities.eleTxrDeq}});var Dl=function(c){var p=this,b=p.renderer=c,A=b.cy;p.layersByLevel={},p.firstGet=!0,p.lastInvalidationTime=Z()-500,p.skipping=!1,p.eleTxrDeqs=A.collection(),p.scheduleElementRefinement=K.default(function(){p.refineElementTextures(p.eleTxrDeqs),p.eleTxrDeqs.unmerge(p.eleTxrDeqs)},50),b.beforeRender(function(M,U){p.skipping=U-p.lastInvalidationTime<=250},b.beforeRenderPriorities.lyrTxrSkip),p.layersQueue=new q.default(function(U,ne){return ne.reqs-U.reqs}),p.setupDequeueing()},zl=Dl.prototype,s_=0,Hd=Math.pow(2,53)-1;zl.makeLayer=function(g,c){var p=Math.pow(2,c),b=Math.ceil(g.w*p),A=Math.ceil(g.h*p),E=this.renderer.makeOffscreenCanvas(b,A),M={id:s_=++s_%Hd,bb:g,level:c,width:b,height:A,canvas:E,context:E.getContext("2d"),eles:[],elesQueue:[],reqs:0},U=M.context,ne=-M.bb.x1,X=-M.bb.y1;return U.scale(p,p),U.translate(ne,X),M},zl.getLayers=function(g,c,p){var b=this,M=b.renderer.cy.zoom(),U=b.firstGet;if(b.firstGet=!1,null==p)if((p=Math.ceil(Pu(M*c)))<-4)p=-4;else if(M>=3.99||p>2)return null;b.validateLayersElesOrdering(p,g);var be,$e,ne=b.layersByLevel,X=Math.pow(2,p),fe=ne[p]=ne[p]||[];if(b.levelIsComplete(p,g))return fe;!function(){var Fn=function(gi){if(b.validateLayersElesOrdering(gi,g),b.levelIsComplete(gi,g))return $e=ne[gi],!0},Rn=function(gi){if(!$e)for(var $n=p+gi;-4<=$n&&$n<=2&&!Fn($n);$n+=gi);};Rn(1),Rn(-1);for(var Xt=fe.length-1;Xt>=0;Xt--){var Nn=fe[Xt];Nn.invalid&&ii(fe,Nn)}}();var _t=function(Fn){var Rn=(Fn=Fn||{}).after;if(function(){if(!be){be=Gu();for(var Fn=0;Fn<g.length;Fn++)Al(be,g[Fn].boundingBox())}}(),be.w*X*(be.h*X)>16e6)return null;var Nn=b.makeLayer(be,p);if(null!=Rn){var xn=fe.indexOf(Rn)+1;fe.splice(xn,0,Nn)}else(void 0===Fn.insert||Fn.insert)&&fe.unshift(Nn);return Nn};if(b.skipping&&!U)return null;for(var Et=null,$t=g.length/1,Ut=!U,un=0;un<g.length;un++){var In=g[un],En=In._private.rscratch,hn=En.imgLayerCaches=En.imgLayerCaches||{},Mn=hn[p];if(Mn)Et=Mn;else{if((!Et||Et.eles.length>=$t||!yg(Et.bb,In.boundingBox()))&&!(Et=_t({insert:!0,after:Et})))return null;$e||Ut?b.queueLayer(Et,In):b.drawEleInLayer(Et,In,p,c),Et.eles.push(In),hn[p]=Et}}return $e||(Ut?null:fe)},zl.getEleLevelForLayerLevel=function(g,c){return g},zl.drawEleInLayer=function(g,c,p,b){var E=this.renderer,M=g.context,U=c.boundingBox();0===U.w||0===U.h||!c.visible()||(p=this.getEleLevelForLayerLevel(p,b),E.setImgSmoothing(M,!1),E.drawCachedElement(M,c,null,null,p,!0),E.setImgSmoothing(M,!0))},zl.levelIsComplete=function(g,c){var b=this.layersByLevel[g];if(!b||0===b.length)return!1;for(var A=0,E=0;E<b.length;E++){var M=b[E];if(M.reqs>0||M.invalid)return!1;A+=M.eles.length}return A===c.length},zl.validateLayersElesOrdering=function(g,c){var p=this.layersByLevel[g];if(p)for(var b=0;b<p.length;b++){for(var A=p[b],E=-1,M=0;M<c.length;M++)if(A.eles[0]===c[M]){E=M;break}if(E<0)this.invalidateLayer(A);else{var U=E;for(M=0;M<A.eles.length;M++)if(A.eles[M]!==c[U+M]){this.invalidateLayer(A);break}}}},zl.updateElementsInLayers=function(g,c){for(var b=Jt(g[0]),A=0;A<g.length;A++)for(var E=b?null:g[A],M=b?g[A]:g[A].ele,U=M._private.rscratch,ne=U.imgLayerCaches=U.imgLayerCaches||{},X=-4;X<=2;X++){var fe=ne[X];!fe||E&&this.getEleLevelForLayerLevel(fe.level)!==E.level||c(fe,M,E)}},zl.haveLayers=function(){for(var c=!1,p=-4;p<=2;p++){var b=this.layersByLevel[p];if(b&&b.length>0){c=!0;break}}return c},zl.invalidateElements=function(g){var c=this;0!==g.length&&(c.lastInvalidationTime=Z(),0!==g.length&&c.haveLayers()&&c.updateElementsInLayers(g,function(b,A,E){c.invalidateLayer(b)}))},zl.invalidateLayer=function(g){if(this.lastInvalidationTime=Z(),!g.invalid){var c=g.level,p=g.eles;ii(this.layersByLevel[c],g),g.elesQueue=[],g.invalid=!0,g.replacement&&(g.replacement.invalid=!0);for(var A=0;A<p.length;A++){var E=p[A]._private.rscratch.imgLayerCaches;E&&(E[c]=null)}}},zl.refineElementTextures=function(g){var c=this;c.updateElementsInLayers(g,function(b,A,E){var M=b.replacement;if(M||((M=b.replacement=c.makeLayer(b.bb,b.level)).replaces=b,M.eles=b.eles),!M.reqs)for(var U=0;U<M.eles.length;U++)c.queueLayer(M,M.eles[U])})},zl.enqueueElementRefinement=function(g){this.eleTxrDeqs.merge(g),this.scheduleElementRefinement()},zl.queueLayer=function(g,c){var b=this.layersQueue,A=g.elesQueue,E=A.hasId=A.hasId||{};if(!g.replacement){if(c){if(E[c.id()])return;A.push(c),E[c.id()]=!0}g.reqs?(g.reqs++,b.updateItem(g)):(g.reqs=1,b.push(g))}},zl.dequeue=function(g){for(var c=this,p=c.layersQueue,b=[],A=0;A<1&&0!==p.size();){var E=p.peek();if(E.replacement)p.pop();else if(E.replaces&&E!==E.replaces.replacement)p.pop();else if(E.invalid)p.pop();else{var M=E.elesQueue.shift();M&&(c.drawEleInLayer(E,M,E.level,g),A++),0===b.length&&b.push(!0),0===E.elesQueue.length&&(p.pop(),E.reqs=0,E.replaces&&c.applyLayerReplacement(E),c.requestRedraw())}}return b},zl.applyLayerReplacement=function(g){var p=this.layersByLevel[g.level],b=g.replaces,A=p.indexOf(b);if(!(A<0||b.invalid)){p[A]=g;for(var E=0;E<g.eles.length;E++){var M=g.eles[E]._private,U=M.imgLayerCaches=M.imgLayerCaches||{};U&&(U[g.level]=g)}this.requestRedraw()}},zl.requestRedraw=K.default(function(){var g=this.renderer;g.redrawHint("eles",!0),g.redrawHint("drag",!0),g.redraw()},100),zl.setupDequeueing=xp_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,p){return c.dequeue(p)},onDeqd:Pe,shouldRedraw:Lt,priority:function(c){return c.renderer.beforeRenderPriorities.lyrTxrDeq}});var ay,a_={};function r0(g,c){for(var p=0;p<c.length;p++){var b=c[p];g.lineTo(b.x,b.y)}}function bv(g,c,p){for(var b,A=0;A<c.length;A++){var E=c[A];0===A&&(b=E),g.lineTo(E.x,E.y)}g.quadraticCurveTo(p.x,p.y,b.x,b.y)}function oy(g,c,p){g.beginPath&&g.beginPath();for(var b=c,A=0;A<b.length;A++)g.lineTo((E=b[A]).x,E.y);var M=p,U=p[0];for(g.moveTo(U.x,U.y),A=1;A<M.length;A++){var E;g.lineTo((E=M[A]).x,E.y)}g.closePath&&g.closePath()}function s0(g,c,p,b,A){g.beginPath&&g.beginPath(),g.arc(p,b,A,0,2*Math.PI,!1);var E=c,M=E[0];g.moveTo(M.x,M.y);for(var U=0;U<E.length;U++){var ne=E[U];g.lineTo(ne.x,ne.y)}g.closePath&&g.closePath()}function Sb(g,c,p,b){g.arc(c,p,b,0,2*Math.PI,!1)}a_.arrowShapeImpl=function(g){return(ay||(ay={polygon:r0,"triangle-backcurve":bv,"triangle-tee":oy,"circle-triangle":s0,"triangle-cross":oy,circle:Sb}))[g]};var Zf={drawElement:function(g,c,p,b,A,E){c.isNode()?this.drawNode(g,c,p,b,A,E):this.drawEdge(g,c,p,b,A,E)},drawElementOverlay:function(g,c){c.isNode()?this.drawNodeOverlay(g,c):this.drawEdgeOverlay(g,c)},drawElementUnderlay:function(g,c){c.isNode()?this.drawNodeUnderlay(g,c):this.drawEdgeUnderlay(g,c)},drawCachedElementPortion:function(g,c,p,b,A,E,M,U){var ne=this,X=p.getBoundingBox(c);if(0!==X.w&&0!==X.h){var fe=p.getElement(c,X,b,A,E);if(null!=fe){var be=U(ne,c);if(0===be)return;var Et,$t,Ut,un,In,Mn,Ge=M(ne,c),$e=X.x1,Ke=X.y1,ot=X.w,_t=X.h;if(0!==Ge){var En=p.getRotationPoint(c);g.translate(Ut=En.x,un=En.y),g.rotate(Ge),(In=ne.getImgSmoothing(g))||ne.setImgSmoothing(g,!0);var hn=p.getRotationOffset(c);Et=hn.x,$t=hn.y}else Et=$e,$t=Ke;1!==be&&(g.globalAlpha=(Mn=g.globalAlpha)*be),g.drawImage(fe.texture.canvas,fe.x,0,fe.width,fe.height,Et,$t,ot,_t),1!==be&&(g.globalAlpha=Mn),0!==Ge&&(g.rotate(-Ge),g.translate(-Ut,-un),In||ne.setImgSmoothing(g,!1))}else p.drawElement(g,c)}}},Rm=function(){return 0},o_=function(c,p){return c.getTextAngle(p,null)},ly=function(c,p){return c.getTextAngle(p,"source")},uy=function(c,p){return c.getTextAngle(p,"target")},o=function(c,p){return p.effectiveOpacity()},f=function(c,p){return p.pstyle("text-opacity").pfValue*p.effectiveOpacity()};Zf.drawCachedElement=function(g,c,p,b,A,E){var M=this,U=M.data,ne=U.eleTxrCache,X=U.lblTxrCache,fe=U.slbTxrCache,be=U.tlbTxrCache,Ge=c.boundingBox(),$e=!0===E?ne.reasons.highQuality:null;if(0!==Ge.w&&0!==Ge.h&&c.visible()&&(!b||_g(Ge,b))){var Ke=c.isEdge(),ot=c.element()._private.rscratch.badLine;M.drawElementUnderlay(g,c),M.drawCachedElementPortion(g,c,ne,p,A,$e,Rm,o),(!Ke||!ot)&&M.drawCachedElementPortion(g,c,X,p,A,$e,o_,f),Ke&&!ot&&(M.drawCachedElementPortion(g,c,fe,p,A,$e,ly,f),M.drawCachedElementPortion(g,c,be,p,A,$e,uy,f)),M.drawElementOverlay(g,c)}},Zf.drawElements=function(g,c){for(var b=0;b<c.length;b++)this.drawElement(g,c[b])},Zf.drawCachedElements=function(g,c,p,b){for(var E=0;E<c.length;E++)this.drawCachedElement(g,c[E],p,b)},Zf.drawCachedNodes=function(g,c,p,b){for(var E=0;E<c.length;E++){var M=c[E];!M.isNode()||this.drawCachedElement(g,M,p,b)}},Zf.drawLayeredElements=function(g,c,p,b){var E=this.data.lyrTxrCache.getLayers(c,p);if(E)for(var M=0;M<E.length;M++){var U=E[M],ne=U.bb;0===ne.w||0===ne.h||g.drawImage(U.canvas,ne.x1,ne.y1,ne.w,ne.h)}else this.drawCachedElements(g,c,p,b)};var v={drawEdge:function(g,c,p){var b=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],A=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],E=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],M=this,U=c._private.rscratch;if((!E||c.visible())&&!U.badLine&&null!=U.allpts&&!isNaN(U.allpts[0])){var ne;p&&g.translate(-(ne=p).x1,-ne.y1);var X=E?c.pstyle("opacity").value:1,fe=E?c.pstyle("line-opacity").value:1,be=c.pstyle("curve-style").value,Ge=c.pstyle("line-style").value,$e=c.pstyle("width").pfValue,Ke=c.pstyle("line-cap").value,ot=X*fe,_t=X*fe,Et=function(){var Xt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;"straight-triangle"===be?(M.eleStrokeStyle(g,c,Xt),M.drawEdgeTrianglePath(c,g,U.allpts)):(g.lineWidth=$e,g.lineCap=Ke,M.eleStrokeStyle(g,c,Xt),M.drawEdgePath(c,g,U.allpts,Ge),g.lineCap="butt")},$t=function(){!A||M.drawEdgeOverlay(g,c)},Ut=function(){!A||M.drawEdgeUnderlay(g,c)},un=function(){var Xt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;M.drawArrowheads(g,c,Xt)},In=function(){M.drawElementText(g,c,null,b)};g.lineJoin="round";var En="yes"===c.pstyle("ghost").value;if(En){var hn=c.pstyle("ghost-offset-x").pfValue,Mn=c.pstyle("ghost-offset-y").pfValue,mn=c.pstyle("ghost-opacity").value,Fn=ot*mn;g.translate(hn,Mn),Et(Fn),un(Fn),g.translate(-hn,-Mn)}Ut(),Et(),un(),$t(),In(),p&&g.translate(ne.x1,ne.y1)}}},x=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(p,b){if(b.visible()){var A=b.pstyle("".concat(c,"-opacity")).value;if(0!==A){var E=this,M=E.usePaths(),U=b._private.rscratch,X=2*b.pstyle("".concat(c,"-padding")).pfValue,fe=b.pstyle("".concat(c,"-color")).value;p.lineWidth=X,p.lineCap="self"!==U.edgeType||M?"round":"butt",E.colorStrokeStyle(p,fe[0],fe[1],fe[2],A),E.drawEdgePath(b,p,U.allpts,"solid")}}}};v.drawEdgeOverlay=x("overlay"),v.drawEdgeUnderlay=x("underlay"),v.drawEdgePath=function(g,c,p,b){var M,A=g._private.rscratch,E=c,U=!1,ne=this.usePaths(),X=g.pstyle("line-dash-pattern").pfValue,fe=g.pstyle("line-dash-offset").pfValue;if(ne){var be=p.join("$");A.pathCacheKey&&A.pathCacheKey===be?(M=c=A.pathCache,U=!0):(M=c=new Path2D,A.pathCacheKey=be,A.pathCache=M)}if(E.setLineDash)switch(b){case"dotted":E.setLineDash([1,1]);break;case"dashed":E.setLineDash(X),E.lineDashOffset=fe;break;case"solid":E.setLineDash([])}if(!U&&!A.badLine)switch(c.beginPath&&c.beginPath(),c.moveTo(p[0],p[1]),A.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var $e=2;$e+3<p.length;$e+=4)c.quadraticCurveTo(p[$e],p[$e+1],p[$e+2],p[$e+3]);break;case"straight":case"segments":case"haystack":for(var Ke=2;Ke+1<p.length;Ke+=2)c.lineTo(p[Ke],p[Ke+1])}c=E,ne?c.stroke(M):c.stroke(),c.setLineDash&&c.setLineDash([])},v.drawEdgeTrianglePath=function(g,c,p){c.fillStyle=c.strokeStyle;for(var b=g.pstyle("width").pfValue,A=0;A+1<p.length;A+=2){var E=[p[A+2]-p[A],p[A+3]-p[A+1]],M=Math.sqrt(E[0]*E[0]+E[1]*E[1]),U=[E[1]/M,-E[0]/M],ne=[U[0]*b/2,U[1]*b/2];c.beginPath(),c.moveTo(p[A]-ne[0],p[A+1]-ne[1]),c.lineTo(p[A]+ne[0],p[A+1]+ne[1]),c.lineTo(p[A+2],p[A+3]),c.closePath(),c.fill()}},v.drawArrowheads=function(g,c,p){var b=c._private.rscratch,A="haystack"===b.edgeType;A||this.drawArrowhead(g,c,"source",b.arrowStartX,b.arrowStartY,b.srcArrowAngle,p),this.drawArrowhead(g,c,"mid-target",b.midX,b.midY,b.midtgtArrowAngle,p),this.drawArrowhead(g,c,"mid-source",b.midX,b.midY,b.midsrcArrowAngle,p),A||this.drawArrowhead(g,c,"target",b.arrowEndX,b.arrowEndY,b.tgtArrowAngle,p)},v.drawArrowhead=function(g,c,p,b,A,E,M){if(!(isNaN(b)||null==b||isNaN(A)||null==A||isNaN(E)||null==E)){var U=this,ne=c.pstyle(p+"-arrow-shape").value;if("none"!==ne){var X="hollow"===c.pstyle(p+"-arrow-fill").value?"both":"filled",fe=c.pstyle(p+"-arrow-fill").value,be=c.pstyle("width").pfValue,Ge=c.pstyle("opacity").value;void 0===M&&(M=Ge);var $e=g.globalCompositeOperation;(1!==M||"hollow"===fe)&&(g.globalCompositeOperation="destination-out",U.colorFillStyle(g,255,255,255,1),U.colorStrokeStyle(g,255,255,255,1),U.drawArrowShape(c,g,X,be,ne,b,A,E),g.globalCompositeOperation=$e);var Ke=c.pstyle(p+"-arrow-color").value;U.colorFillStyle(g,Ke[0],Ke[1],Ke[2],M),U.colorStrokeStyle(g,Ke[0],Ke[1],Ke[2],M),U.drawArrowShape(c,g,fe,be,ne,b,A,E)}}},v.drawArrowShape=function(g,c,p,b,A,E,M,U){var be,X=this.usePaths()&&"triangle-cross"!==A,fe=!1,Ge=c,$e={x:E,y:M},Ke=g.pstyle("arrow-scale").value,ot=this.getArrowWidth(b,Ke),_t=this.arrowShapes[A];if(X){var Et=this.arrowPathCache=this.arrowPathCache||[],$t=ke(A),Ut=Et[$t];null!=Ut?(be=c=Ut,fe=!0):(be=c=new Path2D,Et[$t]=be)}fe||(c.beginPath&&c.beginPath(),X?_t.draw(c,1,0,{x:0,y:0},1):_t.draw(c,ot,U,$e,b),c.closePath&&c.closePath()),c=Ge,X&&(c.translate(E,M),c.rotate(U),c.scale(ot,ot)),("filled"===p||"both"===p)&&(X?c.fill(be):c.fill()),("hollow"===p||"both"===p)&&(c.lineWidth=(_t.matchEdgeWidth?b:1)/(X?ot:1),c.lineJoin="miter",X?c.stroke(be):c.stroke()),X&&(c.scale(1/ot,1/ot),c.rotate(-U),c.translate(-E,-M))};var P={safeDrawImage:function(g,c,p,b,A,E,M,U,ne,X){if(!(A<=0||E<=0||ne<=0||X<=0))try{g.drawImage(c,p,b,A,E,M,U,ne,X)}catch(fe){we(fe)}},drawInscribedImage:function(g,c,p,b,A){var E=this,M=p.position(),U=M.x,ne=M.y,X=p.cy().style(),fe=X.getIndexedStyle.bind(X),be=fe(p,"background-fit","value",b),Ge=fe(p,"background-repeat","value",b),$e=p.width(),Ke=p.height(),ot=2*p.padding(),_t=$e+("inner"===fe(p,"background-width-relative-to","value",b)?0:ot),Et=Ke+("inner"===fe(p,"background-height-relative-to","value",b)?0:ot),$t=p._private.rscratch,un="node"===fe(p,"background-clip","value",b),In=fe(p,"background-image-opacity","value",b)*A,En=fe(p,"background-image-smoothing","value",b),hn=c.width||c.cachedW,Mn=c.height||c.cachedH;(null==hn||null==Mn)&&(document.body.appendChild(c),hn=c.cachedW=c.width||c.offsetWidth,Mn=c.cachedH=c.height||c.offsetHeight,document.body.removeChild(c));var mn=hn,Fn=Mn;if("auto"!==fe(p,"background-width","value",b)&&(mn="%"===fe(p,"background-width","units",b)?fe(p,"background-width","pfValue",b)*_t:fe(p,"background-width","pfValue",b)),"auto"!==fe(p,"background-height","value",b)&&(Fn="%"===fe(p,"background-height","units",b)?fe(p,"background-height","pfValue",b)*Et:fe(p,"background-height","pfValue",b)),0!==mn&&0!==Fn){if("contain"===be)mn*=Rn=Math.min(_t/mn,Et/Fn),Fn*=Rn;else if("cover"===be){var Rn;mn*=Rn=Math.max(_t/mn,Et/Fn),Fn*=Rn}var Xt=U-_t/2,Nn=fe(p,"background-position-x","units",b),xn=fe(p,"background-position-x","pfValue",b);Xt+="%"===Nn?(_t-mn)*xn:xn;var gi=fe(p,"background-offset-x","units",b),$n=fe(p,"background-offset-x","pfValue",b);Xt+="%"===gi?(_t-mn)*$n:$n;var ai=ne-Et/2,wi=fe(p,"background-position-y","units",b),Pi=fe(p,"background-position-y","pfValue",b);ai+="%"===wi?(Et-Fn)*Pi:Pi;var er=fe(p,"background-offset-y","units",b),xi=fe(p,"background-offset-y","pfValue",b);ai+="%"===er?(Et-Fn)*xi:xi,$t.pathCache&&(Xt-=U,ai-=ne,U=0,ne=0);var Ki=g.globalAlpha;g.globalAlpha=In;var hr=E.getImgSmoothing(g),Ar=!1;if("no"===En&&hr?(E.setImgSmoothing(g,!1),Ar=!0):"yes"===En&&!hr&&(E.setImgSmoothing(g,!0),Ar=!0),"no-repeat"===Ge)un&&(g.save(),$t.pathCache?g.clip($t.pathCache):(E.nodeShapes[E.getNodeShape(p)].draw(g,U,ne,_t,Et),g.clip())),E.safeDrawImage(g,c,0,0,hn,Mn,Xt,ai,mn,Fn),un&&g.restore();else{var mr=g.createPattern(c,Ge);g.fillStyle=mr,E.nodeShapes[E.getNodeShape(p)].draw(g,U,ne,_t,Et),g.translate(Xt,ai),g.fill(),g.translate(-Xt,-ai)}g.globalAlpha=Ki,Ar&&E.setImgSmoothing(g,hr)}}},G={};function J(g,c,p,b,A){var E=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;g.beginPath(),g.moveTo(c+E,p),g.lineTo(c+b-E,p),g.quadraticCurveTo(c+b,p,c+b,p+E),g.lineTo(c+b,p+A-E),g.quadraticCurveTo(c+b,p+A,c+b-E,p+A),g.lineTo(c+E,p+A),g.quadraticCurveTo(c,p+A,c,p+A-E),g.lineTo(c,p+E),g.quadraticCurveTo(c,p,c+E,p),g.closePath(),g.fill()}G.eleTextBiggerThanMin=function(g,c){if(!c){var p=g.cy().zoom(),b=this.getPixelRatio(),A=Math.ceil(Pu(p*b));c=Math.pow(2,A)}return!(g.pstyle("font-size").pfValue*c<g.pstyle("min-zoomed-font-size").pfValue)},G.drawElementText=function(g,c,p,b,A){var E=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],M=this;if(null==b){if(E&&!M.eleTextBiggerThanMin(c))return}else if(!1===b)return;if(c.isNode()){var U=c.pstyle("label");if(!U||!U.value)return;var ne=M.getLabelJustification(c);g.textAlign=ne,g.textBaseline="bottom"}else{var X=c.element()._private.rscratch.badLine,fe=c.pstyle("label"),be=c.pstyle("source-label"),Ge=c.pstyle("target-label");if(X||(!fe||!fe.value)&&(!be||!be.value)&&(!Ge||!Ge.value))return;g.textAlign="center",g.textBaseline="bottom"}var Ke,$e=!p;p&&g.translate(-(Ke=p).x1,-Ke.y1),null==A?(M.drawText(g,c,null,$e,E),c.isEdge()&&(M.drawText(g,c,"source",$e,E),M.drawText(g,c,"target",$e,E))):M.drawText(g,c,A,$e,E),p&&g.translate(Ke.x1,Ke.y1)},G.getFontCache=function(g){var c;this.fontCaches=this.fontCaches||[];for(var p=0;p<this.fontCaches.length;p++)if((c=this.fontCaches[p]).context===g)return c;return this.fontCaches.push(c={context:g}),c},G.setupTextStyle=function(g,c){var p=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],b=c.pstyle("font-style").strValue,A=c.pstyle("font-size").pfValue+"px",E=c.pstyle("font-family").strValue,M=c.pstyle("font-weight").strValue,U=p?c.effectiveOpacity()*c.pstyle("text-opacity").value:1,ne=c.pstyle("text-outline-opacity").value*U,X=c.pstyle("color").value,fe=c.pstyle("text-outline-color").value;g.font=b+" "+M+" "+A+" "+E,g.lineJoin="round",this.colorFillStyle(g,X[0],X[1],X[2],U),this.colorStrokeStyle(g,fe[0],fe[1],fe[2],ne)},G.getTextAngle=function(g,c){var A=g._private.rscratch,M=g.pstyle((c?c+"-":"")+"text-rotation"),U=Ei(A,"labelAngle",c);return"autorotate"===M.strValue?g.isEdge()?U:0:"none"===M.strValue?0:M.pfValue},G.drawText=function(g,c,p){var b=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],A=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],E=c._private,M=E.rscratch,U=A?c.effectiveOpacity():1;if(!A||0!==U&&0!==c.pstyle("text-opacity").value){"main"===p&&(p=null);var fe,be,ne=Ei(M,"labelX",p),X=Ei(M,"labelY",p),Ge=this.getLabelText(c,p);if(null!=Ge&&""!==Ge&&!isNaN(ne)&&!isNaN(X)){this.setupTextStyle(g,c,A);var In,$e=p?p+"-":"",Ke=Ei(M,"labelWidth",p),ot=Ei(M,"labelHeight",p),_t=c.pstyle($e+"text-margin-x").pfValue,Et=c.pstyle($e+"text-margin-y").pfValue,$t=c.isEdge(),Ut=c.pstyle("text-halign").value,un=c.pstyle("text-valign").value;switch($t&&(Ut="center",un="center"),ne+=_t,X+=Et,0!==(In=b?this.getTextAngle(c,p):0)&&(g.translate(fe=ne,be=X),g.rotate(In),ne=0,X=0),un){case"top":break;case"center":X+=ot/2;break;case"bottom":X+=ot}var En=c.pstyle("text-background-opacity").value,hn=c.pstyle("text-border-opacity").value,Mn=c.pstyle("text-border-width").pfValue,mn=c.pstyle("text-background-padding").pfValue;if(En>0||Mn>0&&hn>0){var Fn=ne-mn;switch(Ut){case"left":Fn-=Ke;break;case"center":Fn-=Ke/2}var Rn=X-ot-mn,Xt=Ke+2*mn,Nn=ot+2*mn;if(En>0){var xn=g.fillStyle,gi=c.pstyle("text-background-color").value;g.fillStyle="rgba("+gi[0]+","+gi[1]+","+gi[2]+","+En*U+")";var $n=c.pstyle("text-background-shape").strValue;0===$n.indexOf("round")?J(g,Fn,Rn,Xt,Nn,2):g.fillRect(Fn,Rn,Xt,Nn),g.fillStyle=xn}if(Mn>0&&hn>0){var ai=g.strokeStyle,wi=g.lineWidth,Pi=c.pstyle("text-border-color").value,er=c.pstyle("text-border-style").value;if(g.strokeStyle="rgba("+Pi[0]+","+Pi[1]+","+Pi[2]+","+hn*U+")",g.lineWidth=Mn,g.setLineDash)switch(er){case"dotted":g.setLineDash([1,1]);break;case"dashed":g.setLineDash([4,2]);break;case"double":g.lineWidth=Mn/4,g.setLineDash([]);break;case"solid":g.setLineDash([])}if(g.strokeRect(Fn,Rn,Xt,Nn),"double"===er){var xi=Mn/2;g.strokeRect(Fn+xi,Rn+xi,Xt-2*xi,Nn-2*xi)}g.setLineDash&&g.setLineDash([]),g.lineWidth=wi,g.strokeStyle=ai}}var Ki=2*c.pstyle("text-outline-width").pfValue;if(Ki>0&&(g.lineWidth=Ki),"wrap"===c.pstyle("text-wrap").value){var hr=Ei(M,"labelWrapCachedLines",p),Ar=Ei(M,"labelLineHeight",p),mr=Ke/2,pr=this.getLabelJustification(c);switch("auto"===pr||("left"===Ut?"left"===pr?ne+=-Ke:"center"===pr&&(ne+=-mr):"center"===Ut?"left"===pr?ne+=-mr:"right"===pr&&(ne+=mr):"right"===Ut&&("center"===pr?ne+=mr:"right"===pr&&(ne+=Ke))),un){case"top":case"center":case"bottom":X-=(hr.length-1)*Ar}for(var Si=0;Si<hr.length;Si++)Ki>0&&g.strokeText(hr[Si],ne,X),g.fillText(hr[Si],ne,X),X+=Ar}else Ki>0&&g.strokeText(Ge,ne,X),g.fillText(Ge,ne,X);0!==In&&(g.rotate(-In),g.translate(-fe,-be))}}};var se={drawNode:function(g,c,p){var U,ne,b=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],A=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],E=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],M=this,X=c._private,fe=X.rscratch,be=c.position();if(en(be.x)&&en(be.y)&&(!E||c.visible())){var Ke,Et,Ge=E?c.effectiveOpacity():1,$e=M.usePaths(),ot=!1,_t=c.padding();U=c.width()+2*_t,ne=c.height()+2*_t,p&&g.translate(-(Et=p).x1,-Et.y1);for(var $t=c.pstyle("background-image"),Ut=$t.value,un=new Array(Ut.length),In=new Array(Ut.length),En=0,hn=0;hn<Ut.length;hn++){var Mn=Ut[hn],mn=un[hn]=null!=Mn&&"none"!==Mn;if(mn){var Fn=c.cy().style().getIndexedStyle(c,"background-image-crossorigin","value",hn);En++,In[hn]=M.getCachedImage(Mn,Fn,function(){X.backgroundTimestamp=Date.now(),c.emitAndNotify("background")})}}var Rn=c.pstyle("background-blacken").value,Xt=c.pstyle("border-width").pfValue,Nn=c.pstyle("background-opacity").value*Ge,xn=c.pstyle("border-color").value,gi=c.pstyle("border-style").value,$n=c.pstyle("border-opacity").value*Ge;g.lineJoin="miter";var ai=function(){var Is=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn;M.eleFillStyle(g,c,Is)},wi=function(){var Is=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n;M.colorStrokeStyle(g,xn[0],xn[1],xn[2],Is)},Pi=c.pstyle("shape").strValue,er=c.pstyle("shape-polygon-points").pfValue;if($e){g.translate(be.x,be.y);var xi=M.nodePathCache=M.nodePathCache||[],Ki=Xe("polygon"===Pi?Pi+","+er.join(","):Pi,""+ne,""+U),hr=xi[Ki];null!=hr?(ot=!0,fe.pathCache=Ke=hr):(Ke=new Path2D,xi[Ki]=fe.pathCache=Ke)}var Ar=function(){if(!ot){var Is=be;$e&&(Is={x:0,y:0}),M.nodeShapes[M.getNodeShape(c)].draw(Ke||g,Is.x,Is.y,U,ne)}$e?g.fill(Ke):g.fill()},mr=function(){for(var Is=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,Ts=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],aa=X.backgrounding,Ya=0,oa=0;oa<In.length;oa++){var Yr=c.cy().style().getIndexedStyle(c,"background-image-containment","value",oa);Ts&&"over"===Yr||!Ts&&"inside"===Yr?Ya++:un[oa]&&In[oa].complete&&!In[oa].error&&(Ya++,M.drawInscribedImage(g,In[oa],c,oa,Is))}X.backgrounding=Ya!==En,aa!==X.backgrounding&&c.updateStyle(!1)},pr=function(){var Is=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Ts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge;M.hasPie(c)&&(M.drawPie(g,c,Ts),Is&&($e||M.nodeShapes[M.getNodeShape(c)].draw(g,be.x,be.y,U,ne)))},Si=function(){var Is=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,Ts=(Rn>0?Rn:-Rn)*Is,aa=Rn>0?0:255;0!==Rn&&(M.colorFillStyle(g,aa,aa,aa,Ts),$e?g.fill(Ke):g.fill())},sr=function(){if(Xt>0){if(g.lineWidth=Xt,g.lineCap="butt",g.setLineDash)switch(gi){case"dotted":g.setLineDash([1,1]);break;case"dashed":g.setLineDash([4,2]);break;case"solid":case"double":g.setLineDash([])}if($e?g.stroke(Ke):g.stroke(),"double"===gi){g.lineWidth=Xt/3;var Is=g.globalCompositeOperation;g.globalCompositeOperation="destination-out",$e?g.stroke(Ke):g.stroke(),g.globalCompositeOperation=Is}g.setLineDash&&g.setLineDash([])}},Sr=function(){A&&M.drawNodeOverlay(g,c,be,U,ne)},ts=function(){A&&M.drawNodeUnderlay(g,c,be,U,ne)},ps=function(){M.drawElementText(g,c,null,b)},Xs="yes"===c.pstyle("ghost").value;if(Xs){var sa=c.pstyle("ghost-offset-x").pfValue,Cs=c.pstyle("ghost-offset-y").pfValue,ds=c.pstyle("ghost-opacity").value,ia=ds*Ge;g.translate(sa,Cs),ai(ds*Nn),Ar(),mr(ia,!0),wi(ds*$n),sr(),pr(0!==Rn||0!==Xt),mr(ia,!1),Si(ia),g.translate(-sa,-Cs)}$e&&g.translate(-be.x,-be.y),ts(),$e&&g.translate(be.x,be.y),ai(),Ar(),mr(Ge,!0),wi(),sr(),pr(0!==Rn||0!==Xt),mr(Ge,!1),Si(),$e&&g.translate(-be.x,-be.y),ps(),Sr(),p&&g.translate(Et.x1,Et.y1)}}},Fe=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(p,b,A,E,M){if(b.visible()){var ne=b.pstyle("".concat(c,"-padding")).pfValue,X=b.pstyle("".concat(c,"-opacity")).value,fe=b.pstyle("".concat(c,"-color")).value,be=b.pstyle("".concat(c,"-shape")).value;if(X>0){if(A=A||b.position(),null==E||null==M){var Ge=b.padding();E=b.width()+2*Ge,M=b.height()+2*Ge}this.colorFillStyle(p,fe[0],fe[1],fe[2],X),this.nodeShapes[be].draw(p,A.x,A.y,E+2*ne,M+2*ne),p.fill()}}}};se.drawNodeOverlay=Fe("overlay"),se.drawNodeUnderlay=Fe("underlay"),se.hasPie=function(g){return(g=g[0])._private.hasPie},se.drawPie=function(g,c,p,b){c=c[0],b=b||c.position();var A=c.cy().style(),E=c.pstyle("pie-size"),M=b.x,U=b.y,ne=c.width(),X=c.height(),fe=Math.min(ne,X)/2,be=0;this.usePaths()&&(M=0,U=0),"%"===E.units?fe*=E.pfValue:void 0!==E.pfValue&&(fe=E.pfValue/2);for(var $e=1;$e<=A.pieBackgroundN;$e++){var Ke=c.pstyle("pie-"+$e+"-background-size").value,ot=c.pstyle("pie-"+$e+"-background-color").value,_t=c.pstyle("pie-"+$e+"-background-opacity").value*p,Et=Ke/100;Et+be>1&&(Et=1-be);var $t=1.5*Math.PI+2*Math.PI*be,un=$t+2*Math.PI*Et;0===Ke||be>=1||be+Et>1||(g.beginPath(),g.moveTo(M,U),g.arc(M,U,fe,$t,un),g.closePath(),this.colorFillStyle(g,ot[0],ot[1],ot[2],_t),g.fill(),be+=Et)}};for(var Me={getPixelRatio:function(){var g=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(g.backingStorePixelRatio||g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1)},paintCache:function(g){for(var b,c=this.paintCaches=this.paintCaches||[],p=!0,A=0;A<c.length;A++)if((b=c[A]).context===g){p=!1;break}return p&&c.push(b={context:g}),b},createGradientStyleFor:function(g,c,p,b,A){var E,M=this.usePaths(),U=p.pstyle(c+"-gradient-stop-colors").value,ne=p.pstyle(c+"-gradient-stop-positions").pfValue;if("radial-gradient"===b)if(p.isEdge()){var X=p.sourceEndpoint(),fe=p.targetEndpoint(),be=p.midpoint(),Ge=$a(X,be),$e=$a(fe,be);E=g.createRadialGradient(be.x,be.y,0,be.x,be.y,Math.max(Ge,$e))}else{var Ke=M?{x:0,y:0}:p.position(),ot=p.paddedWidth(),_t=p.paddedHeight();E=g.createRadialGradient(Ke.x,Ke.y,0,Ke.x,Ke.y,Math.max(ot,_t))}else if(p.isEdge()){var Et=p.sourceEndpoint(),$t=p.targetEndpoint();E=g.createLinearGradient(Et.x,Et.y,$t.x,$t.y)}else{var Ut=M?{x:0,y:0}:p.position(),En=p.paddedWidth()/2,hn=p.paddedHeight()/2;switch(p.pstyle("background-gradient-direction").value){case"to-bottom":E=g.createLinearGradient(Ut.x,Ut.y-hn,Ut.x,Ut.y+hn);break;case"to-top":E=g.createLinearGradient(Ut.x,Ut.y+hn,Ut.x,Ut.y-hn);break;case"to-left":E=g.createLinearGradient(Ut.x+En,Ut.y,Ut.x-En,Ut.y);break;case"to-right":E=g.createLinearGradient(Ut.x-En,Ut.y,Ut.x+En,Ut.y);break;case"to-bottom-right":case"to-right-bottom":E=g.createLinearGradient(Ut.x-En,Ut.y-hn,Ut.x+En,Ut.y+hn);break;case"to-top-right":case"to-right-top":E=g.createLinearGradient(Ut.x-En,Ut.y+hn,Ut.x+En,Ut.y-hn);break;case"to-bottom-left":case"to-left-bottom":E=g.createLinearGradient(Ut.x+En,Ut.y-hn,Ut.x-En,Ut.y+hn);break;case"to-top-left":case"to-left-top":E=g.createLinearGradient(Ut.x+En,Ut.y+hn,Ut.x-En,Ut.y-hn)}}if(!E)return null;for(var mn=ne.length===U.length,Fn=U.length,Rn=0;Rn<Fn;Rn++)E.addColorStop(mn?ne[Rn]:Rn/(Fn-1),"rgba("+U[Rn][0]+","+U[Rn][1]+","+U[Rn][2]+","+A+")");return E},gradientFillStyle:function(g,c,p,b){var A=this.createGradientStyleFor(g,"background",c,p,b);if(!A)return null;g.fillStyle=A},colorFillStyle:function(g,c,p,b,A){g.fillStyle="rgba("+c+","+p+","+b+","+A+")"},eleFillStyle:function(g,c,p){var b=c.pstyle("background-fill").value;if("linear-gradient"===b||"radial-gradient"===b)this.gradientFillStyle(g,c,b,p);else{var A=c.pstyle("background-color").value;this.colorFillStyle(g,A[0],A[1],A[2],p)}},gradientStrokeStyle:function(g,c,p,b){var A=this.createGradientStyleFor(g,"line",c,p,b);if(!A)return null;g.strokeStyle=A},colorStrokeStyle:function(g,c,p,b,A){g.strokeStyle="rgba("+c+","+p+","+b+","+A+")"},eleStrokeStyle:function(g,c,p){var b=c.pstyle("line-fill").value;if("linear-gradient"===b||"radial-gradient"===b)this.gradientStrokeStyle(g,c,b,p);else{var A=c.pstyle("line-color").value;this.colorStrokeStyle(g,A[0],A[1],A[2],p)}},matchCanvasSize:function(g){var c=this,p=c.data,b=c.findContainerClientCoords(),A=b[2],E=b[3],M=c.getPixelRatio();(g===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_NODE]||g===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_DRAG])&&(M=c.motionBlurPxRatio);var fe,ne=A*M,X=E*M;if(ne!==c.canvasWidth||X!==c.canvasHeight){c.fontCaches=null;var be=p.canvasContainer;be.style.width=A+"px",be.style.height=E+"px";for(var Ge=0;Ge<c.CANVAS_LAYERS;Ge++)(fe=p.canvases[Ge]).width=ne,fe.height=X,fe.style.width=A+"px",fe.style.height=E+"px";for(Ge=0;Ge<c.BUFFER_COUNT;Ge++)(fe=p.bufferCanvases[Ge]).width=ne,fe.height=X,fe.style.width=A+"px",fe.style.height=E+"px";c.textureMult=1,M<=1&&(fe=p.bufferCanvases[c.TEXTURE_BUFFER],c.textureMult=2,fe.width=ne*c.textureMult,fe.height=X*c.textureMult),c.canvasWidth=ne,c.canvasHeight=X}},renderTo:function(g,c,p,b){this.render({forcedContext:g,forcedZoom:c,forcedPan:p,drawAllLayers:!0,forcedPxRatio:b})},render:function(g){var c=(g=g||On()).forcedContext,p=g.drawAllLayers,b=g.drawOnlyNodeLayer,A=g.forcedZoom,E=g.forcedPan,M=this,U=void 0===g.forcedPxRatio?this.getPixelRatio():g.forcedPxRatio,ne=M.cy,X=M.data,fe=X.canvasNeedsRedraw,be=M.textureOnViewport&&!c&&(M.pinching||M.hoverData.dragging||M.swipePanning||M.data.wheelZooming),Ge=void 0!==g.motionBlur?g.motionBlur:M.motionBlur,$e=M.motionBlurPxRatio,Ke=ne.hasCompoundNodes(),ot=M.hoverData.draggingEles,Et=Ge=Ge&&!c&&M.motionBlurEnabled&&!(M.hoverData.selecting||M.touchData.selecting);c||(M.prevPxRatio!==U&&(M.invalidateContainerClientCoordsCache(),M.matchCanvasSize(M.container),M.redrawHint("eles",!0),M.redrawHint("drag",!0)),M.prevPxRatio=U),!c&&M.motionBlurTimeout&&clearTimeout(M.motionBlurTimeout),Ge&&(null==M.mbFrames&&(M.mbFrames=0),M.mbFrames++,M.mbFrames<3&&(Et=!1),M.mbFrames>M.minMbLowQualFrames&&(M.motionBlurPxRatio=M.mbPxRBlurry)),M.clearingMotionBlur&&(M.motionBlurPxRatio=1),M.textureDrawLastFrame&&!be&&(fe[M.NODE]=!0,fe[M.SELECT_BOX]=!0);var $t=ne.style(),Ut=ne.zoom(),un=void 0!==A?A:Ut,In=ne.pan(),En={x:In.x,y:In.y},hn={zoom:Ut,pan:{x:In.x,y:In.y}},Mn=M.prevViewport;!(void 0===Mn||hn.zoom!==Mn.zoom||hn.pan.x!==Mn.pan.x||hn.pan.y!==Mn.pan.y)&&!(ot&&!Ke)&&(M.motionBlurPxRatio=1),E&&(En=E),un*=U,En.x*=U,En.y*=U;var Fn=M.getCachedZSortedEles();function Rn(Cs,ds,ia,Rr,Is){var Ts=Cs.globalCompositeOperation;Cs.globalCompositeOperation="destination-out",M.colorFillStyle(Cs,255,255,255,M.motionBlurTransparency),Cs.fillRect(ds,ia,Rr,Is),Cs.globalCompositeOperation=Ts}function Xt(Cs,ds){var ia,Rr,Is,Ts;M.clearingMotionBlur||Cs!==X.bufferContexts[M.MOTIONBLUR_BUFFER_NODE]&&Cs!==X.bufferContexts[M.MOTIONBLUR_BUFFER_DRAG]?(ia=En,Rr=un,Is=M.canvasWidth,Ts=M.canvasHeight):(ia={x:In.x*$e,y:In.y*$e},Rr=Ut*$e,Is=M.canvasWidth*$e,Ts=M.canvasHeight*$e),Cs.setTransform(1,0,0,1,0,0),"motionBlur"===ds?Rn(Cs,0,0,Is,Ts):!c&&(void 0===ds||ds)&&Cs.clearRect(0,0,Is,Ts),p||(Cs.translate(ia.x,ia.y),Cs.scale(Rr,Rr)),E&&Cs.translate(E.x,E.y),A&&Cs.scale(A,A)}if(be||(M.textureDrawLastFrame=!1),be){if(M.textureDrawLastFrame=!0,!M.textureCache){M.textureCache={},M.textureCache.bb=ne.mutableElements().boundingBox(),M.textureCache.texture=M.data.bufferCanvases[M.TEXTURE_BUFFER];var Nn=M.data.bufferContexts[M.TEXTURE_BUFFER];Nn.setTransform(1,0,0,1,0,0),Nn.clearRect(0,0,M.canvasWidth*M.textureMult,M.canvasHeight*M.textureMult),M.render({forcedContext:Nn,drawOnlyNodeLayer:!0,forcedPxRatio:U*M.textureMult}),(hn=M.textureCache.viewport={zoom:ne.zoom(),pan:ne.pan(),width:M.canvasWidth,height:M.canvasHeight}).mpan={x:(0-hn.pan.x)/hn.zoom,y:(0-hn.pan.y)/hn.zoom}}fe[M.DRAG]=!1,fe[M.NODE]=!1;var gi=M.textureCache.texture;hn=M.textureCache.viewport,(xn=X.contexts[M.NODE]).setTransform(1,0,0,1,0,0),Ge?Rn(xn,0,0,hn.width,hn.height):xn.clearRect(0,0,hn.width,hn.height);var $n=$t.core("outside-texture-bg-color").value,ai=$t.core("outside-texture-bg-opacity").value;M.colorFillStyle(xn,$n[0],$n[1],$n[2],ai),xn.fillRect(0,0,hn.width,hn.height),Ut=ne.zoom(),Xt(xn,!1),xn.clearRect(hn.mpan.x,hn.mpan.y,hn.width/hn.zoom/U,hn.height/hn.zoom/U),xn.drawImage(gi,hn.mpan.x,hn.mpan.y,hn.width/hn.zoom/U,hn.height/hn.zoom/U)}else M.textureOnViewport&&!c&&(M.textureCache=null);var wi=ne.extent(),Pi=M.pinching||M.hoverData.dragging||M.swipePanning||M.data.wheelZooming||M.hoverData.draggingEles||M.cy.animated(),er=M.hideEdgesOnViewport&&Pi,xi=[];if(xi[M.NODE]=!fe[M.NODE]&&Ge&&!M.clearedForMotionBlur[M.NODE]||M.clearingMotionBlur,xi[M.NODE]&&(M.clearedForMotionBlur[M.NODE]=!0),xi[M.DRAG]=!fe[M.DRAG]&&Ge&&!M.clearedForMotionBlur[M.DRAG]||M.clearingMotionBlur,xi[M.DRAG]&&(M.clearedForMotionBlur[M.DRAG]=!0),fe[M.NODE]||p||b||xi[M.NODE]){var Ki=Ge&&!xi[M.NODE]&&1!==$e;Xt(xn=c||(Ki?M.data.bufferContexts[M.MOTIONBLUR_BUFFER_NODE]:X.contexts[M.NODE]),Ge&&!Ki?"motionBlur":void 0),er?M.drawCachedNodes(xn,Fn.nondrag,U,wi):M.drawLayeredElements(xn,Fn.nondrag,U,wi),M.debug&&M.drawDebugPoints(xn,Fn.nondrag),!p&&!Ge&&(fe[M.NODE]=!1)}if(!b&&(fe[M.DRAG]||p||xi[M.DRAG])&&(Ki=Ge&&!xi[M.DRAG]&&1!==$e,Xt(xn=c||(Ki?M.data.bufferContexts[M.MOTIONBLUR_BUFFER_DRAG]:X.contexts[M.DRAG]),Ge&&!Ki?"motionBlur":void 0),er?M.drawCachedNodes(xn,Fn.drag,U,wi):M.drawCachedElements(xn,Fn.drag,U,wi),M.debug&&M.drawDebugPoints(xn,Fn.drag),!p&&!Ge&&(fe[M.DRAG]=!1)),M.showFps||!b&&fe[M.SELECT_BOX]&&!p){var xn;if(Xt(xn=c||X.contexts[M.SELECT_BOX]),1==M.selection[4]&&(M.hoverData.selecting||M.touchData.selecting)){Ut=M.cy.zoom();var Ar=$t.core("selection-box-border-width").value/Ut;xn.lineWidth=Ar,xn.fillStyle="rgba("+$t.core("selection-box-color").value[0]+","+$t.core("selection-box-color").value[1]+","+$t.core("selection-box-color").value[2]+","+$t.core("selection-box-opacity").value+")",xn.fillRect(M.selection[0],M.selection[1],M.selection[2]-M.selection[0],M.selection[3]-M.selection[1]),Ar>0&&(xn.strokeStyle="rgba("+$t.core("selection-box-border-color").value[0]+","+$t.core("selection-box-border-color").value[1]+","+$t.core("selection-box-border-color").value[2]+","+$t.core("selection-box-opacity").value+")",xn.strokeRect(M.selection[0],M.selection[1],M.selection[2]-M.selection[0],M.selection[3]-M.selection[1]))}if(X.bgActivePosistion&&!M.hoverData.selecting){Ut=M.cy.zoom();var mr=X.bgActivePosistion;xn.fillStyle="rgba("+$t.core("active-bg-color").value[0]+","+$t.core("active-bg-color").value[1]+","+$t.core("active-bg-color").value[2]+","+$t.core("active-bg-opacity").value+")",xn.beginPath(),xn.arc(mr.x,mr.y,$t.core("active-bg-size").pfValue/Ut,0,2*Math.PI),xn.fill()}var pr=M.lastRedrawTime;if(M.showFps&&pr){pr=Math.round(pr);var Si=Math.round(1e3/pr);xn.setTransform(1,0,0,1,0,0),xn.fillStyle="rgba(255, 0, 0, 0.75)",xn.strokeStyle="rgba(255, 0, 0, 0.75)",xn.lineWidth=1,xn.fillText("1 frame = "+pr+" ms = "+Si+" fps",0,20),xn.strokeRect(0,30,250,20),xn.fillRect(0,30,250*Math.min(Si/60,1),20)}p||(fe[M.SELECT_BOX]=!1)}if(Ge&&1!==$e){var ps=X.contexts[M.DRAG],Xs=M.data.bufferCanvases[M.MOTIONBLUR_BUFFER_DRAG],sa=function(ds,ia,Rr){ds.setTransform(1,0,0,1,0,0),Rr||!Et?ds.clearRect(0,0,M.canvasWidth,M.canvasHeight):Rn(ds,0,0,M.canvasWidth,M.canvasHeight),ds.drawImage(ia,0,0,M.canvasWidth*$e,M.canvasHeight*$e,0,0,M.canvasWidth,M.canvasHeight)};(fe[M.NODE]||xi[M.NODE])&&(sa(X.contexts[M.NODE],M.data.bufferCanvases[M.MOTIONBLUR_BUFFER_NODE],xi[M.NODE]),fe[M.NODE]=!1),(fe[M.DRAG]||xi[M.DRAG])&&(sa(ps,Xs,xi[M.DRAG]),fe[M.DRAG]=!1)}M.prevViewport=hn,M.clearingMotionBlur&&(M.clearingMotionBlur=!1,M.motionBlurCleared=!0,M.motionBlur=!0),Ge&&(M.motionBlurTimeout=setTimeout(function(){M.motionBlurTimeout=null,M.clearedForMotionBlur[M.NODE]=!1,M.clearedForMotionBlur[M.DRAG]=!1,M.motionBlur=!1,M.clearingMotionBlur=!be,M.mbFrames=0,fe[M.NODE]=!0,fe[M.DRAG]=!0,M.redraw()},100)),c||ne.emit("render")}},Qe={drawPolygonPath:function(g,c,p,b,A,E){var M=b/2,U=A/2;g.beginPath&&g.beginPath(),g.moveTo(c+M*E[0],p+U*E[1]);for(var ne=1;ne<E.length/2;ne++)g.lineTo(c+M*E[2*ne],p+U*E[2*ne+1]);g.closePath()},drawRoundPolygonPath:function(g,c,p,b,A,E){var M=b/2,U=A/2,ne=ks(b,A);g.beginPath&&g.beginPath();for(var X=0;X<E.length/4;X++){var be,fe;fe=0===X?E.length-2:4*X-2,be=4*X+2;var Ge=c+M*E[4*X],$e=p+U*E[4*X+1],ot=ne/Math.tan(Math.acos(-E[fe]*E[be]-E[fe+1]*E[be+1])/2),_t=Ge-ot*E[fe],Et=$e-ot*E[fe+1],$t=Ge+ot*E[be],Ut=$e+ot*E[be+1];0===X?g.moveTo(_t,Et):g.lineTo(_t,Et),g.arcTo(Ge,$e,$t,Ut,ne)}g.closePath()},drawRoundRectanglePath:function(g,c,p,b,A){var E=b/2,M=A/2,U=Zd(b,A);g.beginPath&&g.beginPath(),g.moveTo(c,p-M),g.arcTo(c+E,p-M,c+E,p,U),g.arcTo(c+E,p+M,c,p+M,U),g.arcTo(c-E,p+M,c-E,p,U),g.arcTo(c-E,p-M,c,p-M,U),g.lineTo(c,p-M),g.closePath()},drawBottomRoundRectanglePath:function(g,c,p,b,A){var E=b/2,M=A/2,U=Zd(b,A);g.beginPath&&g.beginPath(),g.moveTo(c,p-M),g.lineTo(c+E,p-M),g.lineTo(c+E,p),g.arcTo(c+E,p+M,c,p+M,U),g.arcTo(c-E,p+M,c-E,p,U),g.lineTo(c-E,p-M),g.lineTo(c,p-M),g.closePath()},drawCutRectanglePath:function(g,c,p,b,A){var E=b/2,M=A/2;g.beginPath&&g.beginPath(),g.moveTo(c-E+8,p-M),g.lineTo(c+E-8,p-M),g.lineTo(c+E,p-M+8),g.lineTo(c+E,p+M-8),g.lineTo(c+E-8,p+M),g.lineTo(c-E+8,p+M),g.lineTo(c-E,p+M-8),g.lineTo(c-E,p-M+8),g.closePath()},drawBarrelPath:function(g,c,p,b,A){var E=b/2,M=A/2,U=c-E,ne=c+E,X=p-M,fe=p+M,be=Qs(b,A),Ge=be.widthOffset,$e=be.heightOffset,Ke=be.ctrlPtOffsetPct*Ge;g.beginPath&&g.beginPath(),g.moveTo(U,X+$e),g.lineTo(U,fe-$e),g.quadraticCurveTo(U+Ke,fe,U+Ge,fe),g.lineTo(ne-Ge,fe),g.quadraticCurveTo(ne-Ke,fe,ne,fe-$e),g.lineTo(ne,X+$e),g.quadraticCurveTo(ne-Ke,X,ne-Ge,X),g.lineTo(U+Ge,X),g.quadraticCurveTo(U+Ke,X,U,X+$e),g.closePath()}},ft=Math.sin(0),mt=Math.cos(0),vt={},Kt={},Yt=Math.PI/40,jt=0*Math.PI;jt<2*Math.PI;jt+=Yt)vt[jt]=Math.sin(jt),Kt[jt]=Math.cos(jt);Qe.drawEllipsePath=function(g,c,p,b,A){if(g.beginPath&&g.beginPath(),g.ellipse)g.ellipse(c,p,b/2,A/2,0,0,2*Math.PI);else for(var E,M,U=b/2,ne=A/2,X=0*Math.PI;X<2*Math.PI;X+=Yt)E=c-U*vt[X]*ft+U*Kt[X]*mt,M=p+ne*Kt[X]*ft+ne*vt[X]*mt,0===X?g.moveTo(E,M):g.lineTo(E,M);g.closePath()};var cn={};function Hn(g){var c=g.indexOf(",");return g.substr(c+1)}function Ln(g,c,p){var b=function(){return c.toDataURL(p,g.quality)};switch(g.output){case"blob-promise":return new vl(function(A,E){try{c.toBlob(function(M){null!=M?A(M):E(new Error("`canvas.toBlob()` sent a null value in its callback"))},p,g.quality)}catch(M){E(M)}});case"blob":return function fn(g,c){for(var p=atob(g),b=new ArrayBuffer(p.length),A=new Uint8Array(b),E=0;E<p.length;E++)A[E]=p.charCodeAt(E);return new Blob([b],{type:c})}(Hn(b()),p);case"base64":return Hn(b());default:return b()}}cn.createBuffer=function(g,c){var p=document.createElement("canvas");return p.width=g,p.height=c,[p,p.getContext("2d")]},cn.bufferCanvasImage=function(g){var c=this.cy,b=c.mutableElements().boundingBox(),A=this.findContainerClientCoords(),E=g.full?Math.ceil(b.w):A[2],M=g.full?Math.ceil(b.h):A[3],U=en(g.maxWidth)||en(g.maxHeight),ne=this.getPixelRatio(),X=1;if(void 0!==g.scale)E*=g.scale,M*=g.scale,X=g.scale;else if(U){var fe=1/0,be=1/0;en(g.maxWidth)&&(fe=X*g.maxWidth/E),en(g.maxHeight)&&(be=X*g.maxHeight/M),E*=X=Math.min(fe,be),M*=X}U||(E*=ne,M*=ne,X*=ne);var Ge=document.createElement("canvas");Ge.width=E,Ge.height=M,Ge.style.width=E+"px",Ge.style.height=M+"px";var $e=Ge.getContext("2d");if(E>0&&M>0){$e.clearRect(0,0,E,M),$e.globalCompositeOperation="source-over";var Ke=this.getCachedZSortedEles();if(g.full)$e.translate(-b.x1*X,-b.y1*X),$e.scale(X,X),this.drawElements($e,Ke),$e.scale(1/X,1/X),$e.translate(b.x1*X,b.y1*X);else{var ot=c.pan(),_t={x:ot.x*X,y:ot.y*X};X*=c.zoom(),$e.translate(_t.x,_t.y),$e.scale(X,X),this.drawElements($e,Ke),$e.scale(1/X,1/X),$e.translate(-_t.x,-_t.y)}g.bg&&($e.globalCompositeOperation="destination-over",$e.fillStyle=g.bg,$e.rect(0,0,E,M),$e.fill())}return Ge},cn.png=function(g){return Ln(g,this.bufferCanvasImage(g),"image/png")},cn.jpg=function(g){return Ln(g,this.bufferCanvasImage(g),"image/jpeg")};var Jn=ci,Xn=ci.prototype;function ci(g){var c=this;c.data={canvases:new Array(Xn.CANVAS_LAYERS),contexts:new Array(Xn.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Xn.CANVAS_LAYERS),bufferCanvases:new Array(Xn.BUFFER_COUNT),bufferContexts:new Array(Xn.CANVAS_LAYERS)};var p="-webkit-tap-highlight-color",b="rgba(0,0,0,0)";c.data.canvasContainer=document.createElement("div");var A=c.data.canvasContainer.style;c.data.canvasContainer.style[p]=b,A.position="relative",A.zIndex="0",A.overflow="hidden";var E=g.cy.container();E.appendChild(c.data.canvasContainer),E.style[p]=b;var M={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};dt&&dt.userAgent.match(/msie|trident|edge/i)&&(M["-ms-touch-action"]="none",M["touch-action"]="none");for(var U=0;U<Xn.CANVAS_LAYERS;U++){var ne=c.data.canvases[U]=document.createElement("canvas");c.data.contexts[U]=ne.getContext("2d"),Object.keys(M).forEach(function(pr){ne.style[pr]=M[pr]}),ne.style.position="absolute",ne.setAttribute("data-id","layer"+U),ne.style.zIndex=String(Xn.CANVAS_LAYERS-U),c.data.canvasContainer.appendChild(ne),c.data.canvasNeedsRedraw[U]=!1}for(c.data.topCanvas=c.data.canvases[0],c.data.canvases[Xn.NODE].setAttribute("data-id","layer"+Xn.NODE+"-node"),c.data.canvases[Xn.SELECT_BOX].setAttribute("data-id","layer"+Xn.SELECT_BOX+"-selectbox"),c.data.canvases[Xn.DRAG].setAttribute("data-id","layer"+Xn.DRAG+"-drag"),U=0;U<Xn.BUFFER_COUNT;U++)c.data.bufferCanvases[U]=document.createElement("canvas"),c.data.bufferContexts[U]=c.data.bufferCanvases[U].getContext("2d"),c.data.bufferCanvases[U].style.position="absolute",c.data.bufferCanvases[U].setAttribute("data-id","buffer"+U),c.data.bufferCanvases[U].style.zIndex=String(-U-1),c.data.bufferCanvases[U].style.visibility="hidden";c.pathsEnabled=!0;var X=Gu(),be=function(Si){return{x:-Si.w/2,y:-Si.h/2}},In=function(Si){return Si.boundingBox(),Si[0]._private.bodyBounds},En=function(Si){return Si.boundingBox(),Si[0]._private.labelBounds.main||X},hn=function(Si){return Si.boundingBox(),Si[0]._private.labelBounds.source||X},Mn=function(Si){return Si.boundingBox(),Si[0]._private.labelBounds.target||X},mn=function(Si,sr){return sr},Rn=function(Si,sr,Sr){var ts=Si?Si+"-":"";return{x:sr.x+Sr.pstyle(ts+"text-margin-x").pfValue,y:sr.y+Sr.pstyle(ts+"text-margin-y").pfValue}},Xt=function(Si,sr,Sr){var ts=Si[0]._private.rscratch;return{x:ts[sr],y:ts[Sr]}},er=c.data.eleTxrCache=new Zp(c,{getKey:function(Si){return Si[0]._private.nodeKey},doesEleInvalidateKey:function(Si){var sr=Si[0]._private;return!(sr.oldBackgroundTimestamp===sr.backgroundTimestamp)},drawElement:function(Si,sr,Sr,ts,ps){return c.drawElement(Si,sr,Sr,!1,!1,ps)},getBoundingBox:In,getRotationPoint:function(Si){return function(Si){return{x:(Si.x1+Si.x2)/2,y:(Si.y1+Si.y2)/2}}(In(Si))},getRotationOffset:function(Si){return be(In(Si))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),xi=c.data.lblTxrCache=new Zp(c,{getKey:function(Si){return Si[0]._private.labelStyleKey},drawElement:function(Si,sr,Sr,ts,ps){return c.drawElementText(Si,sr,Sr,ts,"main",ps)},getBoundingBox:En,getRotationPoint:function(Si){return Rn("",Xt(Si,"labelX","labelY"),Si)},getRotationOffset:function(Si){var sr=En(Si),Sr=be(En(Si));if(Si.isNode()){switch(Si.pstyle("text-halign").value){case"left":Sr.x=-sr.w;break;case"right":Sr.x=0}switch(Si.pstyle("text-valign").value){case"top":Sr.y=-sr.h;break;case"bottom":Sr.y=0}}return Sr},isVisible:mn}),Ki=c.data.slbTxrCache=new Zp(c,{getKey:function(Si){return Si[0]._private.sourceLabelStyleKey},drawElement:function(Si,sr,Sr,ts,ps){return c.drawElementText(Si,sr,Sr,ts,"source",ps)},getBoundingBox:hn,getRotationPoint:function(Si){return Rn("source",Xt(Si,"sourceLabelX","sourceLabelY"),Si)},getRotationOffset:function(Si){return be(hn(Si))},isVisible:mn}),hr=c.data.tlbTxrCache=new Zp(c,{getKey:function(Si){return Si[0]._private.targetLabelStyleKey},drawElement:function(Si,sr,Sr,ts,ps){return c.drawElementText(Si,sr,Sr,ts,"target",ps)},getBoundingBox:Mn,getRotationPoint:function(Si){return Rn("target",Xt(Si,"targetLabelX","targetLabelY"),Si)},getRotationOffset:function(Si){return be(Mn(Si))},isVisible:mn}),Ar=c.data.lyrTxrCache=new Dl(c);c.onUpdateEleCalcs(function(Si,sr){er.invalidateElements(sr),xi.invalidateElements(sr),Ki.invalidateElements(sr),hr.invalidateElements(sr),Ar.invalidateElements(sr);for(var Sr=0;Sr<sr.length;Sr++){var ts=sr[Sr]._private;ts.oldBackgroundTimestamp=ts.backgroundTimestamp}});var mr=function(Si){for(var sr=0;sr<Si.length;sr++)Ar.enqueueElementRefinement(Si[sr].ele)};er.onDequeue(mr),xi.onDequeue(mr),Ki.onDequeue(mr),hr.onDequeue(mr)}Xn.CANVAS_LAYERS=3,Xn.SELECT_BOX=0,Xn.DRAG=1,Xn.NODE=2,Xn.BUFFER_COUNT=3,Xn.TEXTURE_BUFFER=0,Xn.MOTIONBLUR_BUFFER_NODE=1,Xn.MOTIONBLUR_BUFFER_DRAG=2,Xn.redrawHint=function(g,c){var p=this;switch(g){case"eles":p.data.canvasNeedsRedraw[Xn.NODE]=c;break;case"drag":p.data.canvasNeedsRedraw[Xn.DRAG]=c;break;case"select":p.data.canvasNeedsRedraw[Xn.SELECT_BOX]=c}};var Li=typeof Path2D<"u";Xn.path2dEnabled=function(g){if(void 0===g)return this.pathsEnabled;this.pathsEnabled=!!g},Xn.usePaths=function(){return Li&&this.pathsEnabled},Xn.setImgSmoothing=function(g,c){null!=g.imageSmoothingEnabled?g.imageSmoothingEnabled=c:(g.webkitImageSmoothingEnabled=c,g.mozImageSmoothingEnabled=c,g.msImageSmoothingEnabled=c)},Xn.getImgSmoothing=function(g){return null!=g.imageSmoothingEnabled?g.imageSmoothingEnabled:g.webkitImageSmoothingEnabled||g.mozImageSmoothingEnabled||g.msImageSmoothingEnabled},Xn.makeOffscreenCanvas=function(g,c){var p;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":xe(OffscreenCanvas))?p=new OffscreenCanvas(g,c):((p=document.createElement("canvas")).width=g,p.height=c),p},[a_,Zf,v,P,G,se,Me,Qe,cn,{nodeShapeImpl:function(g,c,p,b,A,E,M){switch(g){case"ellipse":return this.drawEllipsePath(c,p,b,A,E);case"polygon":return this.drawPolygonPath(c,p,b,A,E,M);case"round-polygon":return this.drawRoundPolygonPath(c,p,b,A,E,M);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(c,p,b,A,E);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(c,p,b,A,E);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(c,p,b,A,E);case"barrel":return this.drawBarrelPath(c,p,b,A,E)}}}].forEach(function(g){nr(Xn,g)});var dr=[{type:"layout",extensions:Dm},{type:"renderer",extensions:[{name:"null",impl:Xf},{name:"base",impl:Pm},{name:"canvas",impl:Jn}]}],zn={},Un={};function Gi(g,c,p){var b=p,A=function(Mn){we("Can not register `"+c+"` for `"+g+"` since `"+Mn+"` already exists in the prototype and can not be overridden")};if("core"===g){if(wc.prototype[c])return A(c);wc.prototype[c]=p}else if("collection"===g){if(Cl.prototype[c])return A(c);Cl.prototype[c]=p}else if("layout"===g){for(var E=function(Mn){this.options=Mn,p.call(this,Mn),Ht(this._private)||(this._private={}),this._private.cy=Mn.cy,this._private.listeners=[],this.createEmitter()},M=E.prototype=Object.create(p.prototype),U=[],ne=0;ne<U.length;ne++){var X=U[ne];M[X]=M[X]||function(){return this}}M.start&&!M.run?M.run=function(){return this.start(),this}:!M.start&&M.run&&(M.start=function(){return this.run(),this});var fe=p.prototype.stop;M.stop=function(){var hn=this.options;if(hn&&hn.animate){var Mn=this.animations;if(Mn)for(var mn=0;mn<Mn.length;mn++)Mn[mn].stop()}return fe?fe.call(this):this.emit("layoutstop"),this},M.destroy||(M.destroy=function(){return this}),M.cy=function(){return this._private.cy};var be=function(Mn){return Mn._private.cy},Ge={addEventFields:function(Mn,mn){mn.layout=Mn,mn.cy=be(Mn),mn.target=Mn},bubble:function(){return!0},parent:function(Mn){return be(Mn)}};nr(M,{createEmitter:function(){return this._private.emitter=new _h(Ge,this),this},emitter:function(){return this._private.emitter},on:function(Mn,mn){return this.emitter().on(Mn,mn),this},one:function(Mn,mn){return this.emitter().one(Mn,mn),this},once:function(Mn,mn){return this.emitter().one(Mn,mn),this},removeListener:function(Mn,mn){return this.emitter().removeListener(Mn,mn),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(Mn,mn){return this.emitter().emit(Mn,mn),this}}),Sa.eventAliasesOn(M),b=E}else if("renderer"===g&&"null"!==c&&"base"!==c){var $e=tr("renderer","base"),Ke=$e.prototype,ot=p,_t=p.prototype,Et=function(){$e.apply(this,arguments),ot.apply(this,arguments)},$t=Et.prototype;for(var Ut in Ke){var un=Ke[Ut];if(null!=_t[Ut])return A(Ut);$t[Ut]=un}for(var En in _t)$t[En]=_t[En];Ke.clientFunctions.forEach(function(hn){$t[hn]=$t[hn]||function(){We("Renderer does not implement `renderer."+hn+"()` on its prototype")}}),b=Et}else if("__proto__"===g||"constructor"===g||"prototype"===g)return We(g+" is an illegal type to be registered, possibly lead to prototype pollutions");return S({map:zn,keys:[g,c],value:b})}function tr(g,c){return k({map:zn,keys:[g,c]})}function Mr(g,c,p,b,A){return S({map:Un,keys:[g,c,p,b],value:A})}function xr(g,c,p,b){return k({map:Un,keys:[g,c,p,b]})}var gr=function(){return 2===arguments.length?tr.apply(null,arguments):3===arguments.length?Gi.apply(null,arguments):4===arguments.length?xr.apply(null,arguments):5===arguments.length?Mr.apply(null,arguments):void We("Invalid extension access syntax")};wc.prototype.extension=gr,dr.forEach(function(g){g.extensions.forEach(function(c){Gi(g.type,c.name,c.impl)})});var fs=function g(){if(!(this instanceof g))return new g;this.length=0},Wr=fs.prototype;Wr.instanceString=function(){return"stylesheet"},Wr.selector=function(g){return this[this.length++]={selector:g,properties:[]},this},Wr.css=function(g,c){var p=this.length-1;if(Ct(g))this[p].properties.push({name:g,value:c});else if(Ht(g))for(var b=g,A=Object.keys(b),E=0;E<A.length;E++){var M=A[E],U=b[M];if(null!=U){var ne=ac.properties[M]||ac.properties[_n(M)];null!=ne&&this[p].properties.push({name:ne.name,value:U})}}return this},Wr.style=Wr.css,Wr.generateStyle=function(g){var c=new ac(g);return this.appendToStyle(c)},Wr.appendToStyle=function(g){for(var c=0;c<this.length;c++){var p=this[c],A=p.properties;g.selector(p.selector);for(var E=0;E<A.length;E++){var M=A[E];g.css(M.name,M.value)}}return g};var Ui=function(c){return void 0===c&&(c={}),Ht(c)?new wc(c):Ct(c)?gr.apply(gr,arguments):void 0};Ui.use=function(g){var c=Array.prototype.slice.call(arguments,1);return c.unshift(Ui),g.apply(null,c),this},Ui.warnings=function(g){return Ye(g)},Ui.version="3.22.1",Ui.stylesheet=Ui.Stylesheet=fs,yt.exports=Ui},9069:yt=>{"use strict";var ye,it="object"==typeof Reflect?Reflect:null,ae=it&&"function"==typeof it.apply?it.apply:function(L,ee,Ce){return Function.prototype.apply.call(L,ee,Ce)};ye=it&&"function"==typeof it.ownKeys?it.ownKeys:Object.getOwnPropertySymbols?function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:function(L){return Object.getOwnPropertyNames(L)};var oe=Number.isNaN||function(L){return L!=L};function re(){re.init.call(this)}yt.exports=re,yt.exports.once=function Le(Se,L){return new Promise(function(ee,Ce){function ze(st){Se.removeListener(L,dt),Ce(st)}function dt(){"function"==typeof Se.removeListener&&Se.removeListener("error",ze),ee([].slice.call(arguments))}Ae(Se,L,dt,{once:!0}),"error"!==L&&function Ve(Se,L,ee){"function"==typeof Se.on&&Ae(Se,"error",L,ee)}(Se,ze,{once:!0})})},re.EventEmitter=re,re.prototype._events=void 0,re.prototype._eventsCount=0,re.prototype._maxListeners=void 0;var ie=10;function V(Se){if("function"!=typeof Se)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Se)}function K(Se){return void 0===Se._maxListeners?re.defaultMaxListeners:Se._maxListeners}function q(Se,L,ee,Ce){var ze,dt,st;if(V(ee),void 0===(dt=Se._events)?(dt=Se._events=Object.create(null),Se._eventsCount=0):(void 0!==dt.newListener&&(Se.emit("newListener",L,ee.listener?ee.listener:ee),dt=Se._events),st=dt[L]),void 0===st)st=dt[L]=ee,++Se._eventsCount;else if("function"==typeof st?st=dt[L]=Ce?[ee,st]:[st,ee]:Ce?st.unshift(ee):st.push(ee),(ze=K(Se))>0&&st.length>ze&&!st.warned){st.warned=!0;var bt=new Error("Possible EventEmitter memory leak detected. "+st.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");bt.name="MaxListenersExceededWarning",bt.emitter=Se,bt.type=L,bt.count=st.length,function j(Se){console&&console.warn&&console.warn(Se)}(bt)}return Se}function le(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Te(Se,L,ee){var Ce={fired:!1,wrapFn:void 0,target:Se,type:L,listener:ee},ze=le.bind(Ce);return ze.listener=ee,Ce.wrapFn=ze,ze}function De(Se,L,ee){var Ce=Se._events;if(void 0===Ce)return[];var ze=Ce[L];return void 0===ze?[]:"function"==typeof ze?ee?[ze.listener||ze]:[ze]:ee?function Re(Se){for(var L=new Array(Se.length),ee=0;ee<L.length;++ee)L[ee]=Se[ee].listener||Se[ee];return L}(ze):_e(ze,ze.length)}function xe(Se){var L=this._events;if(void 0!==L){var ee=L[Se];if("function"==typeof ee)return 1;if(void 0!==ee)return ee.length}return 0}function _e(Se,L){for(var ee=new Array(L),Ce=0;Ce<L;++Ce)ee[Ce]=Se[Ce];return ee}function Ae(Se,L,ee,Ce){if("function"==typeof Se.on)Ce.once?Se.once(L,ee):Se.on(L,ee);else{if("function"!=typeof Se.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Se);Se.addEventListener(L,function ze(dt){Ce.once&&Se.removeEventListener(L,ze),ee(dt)})}}Object.defineProperty(re,"defaultMaxListeners",{enumerable:!0,get:function(){return ie},set:function(Se){if("number"!=typeof Se||Se<0||oe(Se))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Se+".");ie=Se}}),re.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},re.prototype.setMaxListeners=function(L){if("number"!=typeof L||L<0||oe(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this},re.prototype.getMaxListeners=function(){return K(this)},re.prototype.emit=function(L){for(var ee=[],Ce=1;Ce<arguments.length;Ce++)ee.push(arguments[Ce]);var ze="error"===L,dt=this._events;if(void 0!==dt)ze=ze&&void 0===dt.error;else if(!ze)return!1;if(ze){var st;if(ee.length>0&&(st=ee[0]),st instanceof Error)throw st;var bt=new Error("Unhandled error."+(st?" ("+st.message+")":""));throw bt.context=st,bt}var ut=dt[L];if(void 0===ut)return!1;if("function"==typeof ut)ae(ut,this,ee);else{var Vt=ut.length,on=_e(ut,Vt);for(Ce=0;Ce<Vt;++Ce)ae(on[Ce],this,ee)}return!0},re.prototype.on=re.prototype.addListener=function(L,ee){return q(this,L,ee,!1)},re.prototype.prependListener=function(L,ee){return q(this,L,ee,!0)},re.prototype.once=function(L,ee){return V(ee),this.on(L,Te(this,L,ee)),this},re.prototype.prependOnceListener=function(L,ee){return V(ee),this.prependListener(L,Te(this,L,ee)),this},re.prototype.off=re.prototype.removeListener=function(L,ee){var Ce,ze,dt,st,bt;if(V(ee),void 0===(ze=this._events))return this;if(void 0===(Ce=ze[L]))return this;if(Ce===ee||Ce.listener===ee)0==--this._eventsCount?this._events=Object.create(null):(delete ze[L],ze.removeListener&&this.emit("removeListener",L,Ce.listener||ee));else if("function"!=typeof Ce){for(dt=-1,st=Ce.length-1;st>=0;st--)if(Ce[st]===ee||Ce[st].listener===ee){bt=Ce[st].listener,dt=st;break}if(dt<0)return this;0===dt?Ce.shift():function Q(Se,L){for(;L+1<Se.length;L++)Se[L]=Se[L+1];Se.pop()}(Ce,dt),1===Ce.length&&(ze[L]=Ce[0]),void 0!==ze.removeListener&&this.emit("removeListener",L,bt||ee)}return this},re.prototype.removeAllListeners=function(L){var ee,Ce,ze;if(void 0===(Ce=this._events))return this;if(void 0===Ce.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Ce[L]&&(0==--this._eventsCount?this._events=Object.create(null):delete Ce[L]),this;if(0===arguments.length){var st,dt=Object.keys(Ce);for(ze=0;ze<dt.length;++ze)"removeListener"!==(st=dt[ze])&&this.removeAllListeners(st);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ee=Ce[L]))this.removeListener(L,ee);else if(void 0!==ee)for(ze=ee.length-1;ze>=0;ze--)this.removeListener(L,ee[ze]);return this},re.prototype.listeners=function(L){return De(this,L,!0)},re.prototype.rawListeners=function(L){return De(this,L,!1)},re.listenerCount=function(Se,L){return"function"==typeof Se.listenerCount?Se.listenerCount(L):xe.call(Se,L)},re.prototype.listenerCount=xe,re.prototype.eventNames=function(){return this._eventsCount>0?ye(this._events):[]}},2698:yt=>{yt.exports={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}},4570:(yt,it)=>{it.assignLayoutChanges=function(ae,ye,j){const{nodeXAttribute:oe,nodeYAttribute:re}=j;ae.updateEachNodeAttributes((ie,V)=>{const K=ye[ie];return!K||K.fixed||(V[oe]=K.x,V[re]=K.y),V},{attributes:["x","y"]})},it.collectLayoutChanges=function(ae){const ye={};for(const j in ae){const oe=ae[j];ye[j]={x:oe.x,y:oe.y}}return ye}},8031:(yt,it,ae)=>{const{createNodeValueGetter:ye,createEdgeValueGetter:j}=ae(2954);yt.exports=function(re,ie,V){const{nodeXAttribute:K,nodeYAttribute:q}=V,{attraction:le,repulsion:Te,gravity:De,inertia:xe,maxMove:_e}=V.settings;let{shouldSkipNode:Q,shouldSkipEdge:Re,isNodeFixed:Le}=V;Le=ye(Le),Q=ye(Q,!1),Re=j(Re,!1);const Ve=re.filterNodes((L,ee)=>!Q.fromEntry(L,ee)),Ae=Ve.length;for(let L=0;L<Ae;L++){const ee=Ve[L],Ce=re.getNodeAttributes(ee),ze=ie[ee];ie[ee]=ze?{dx:ze.dx*xe,dy:ze.dy*xe,x:Ce[K]||0,y:Ce[q]||0}:{dx:0,dy:0,x:Ce[K]||0,y:Ce[q]||0}}if(Te)for(let L=0;L<Ae;L++){const Ce=ie[Ve[L]];for(let ze=L+1;ze<Ae;ze++){const st=ie[Ve[ze]],bt=st.x-Ce.x,ut=st.y-Ce.y,Vt=Math.sqrt(bt*bt+ut*ut)||1,on=Te/Vt*bt,Ct=Te/Vt*ut;Ce.dx-=on,Ce.dy-=Ct,st.dx+=on,st.dy+=Ct}}if(le&&re.forEachEdge((L,ee,Ce,ze,dt,st,bt)=>{if(Ce===ze||Q.fromEntry(Ce,dt)||Q.fromEntry(ze,st)||Re.fromEntry(L,ee,Ce,ze,dt,st,bt))return;const ut=ie[Ce],Vt=ie[ze],on=Vt.x-ut.x,Ct=Vt.y-ut.y,rn=Math.sqrt(on*on+Ct*Ct)||1,Qt=le*rn*on,Ht=le*rn*Ct;ut.dx+=Qt,ut.dy+=Ht,Vt.dx-=Qt,Vt.dy-=Ht}),De)for(let L=0;L<Ae;L++){const ee=Ve[L],Ce=ie[ee],{x:ze,y:dt}=Ce,st=Math.sqrt(ze*ze+dt*dt)||1;ie[ee].dx-=ze*De*st,ie[ee].dy-=dt*De*st}for(let L=0;L<Ae;L++){const ee=Ve[L],Ce=ie[ee],ze=Math.sqrt(Ce.dx*Ce.dx+Ce.dy*Ce.dy);ze>_e&&(Ce.dx*=_e/ze,Ce.dy*=_e/ze),Le.fromGraph(re,ee)?Ce.fixed=!0:(Ce.x+=Ce.dx,Ce.y+=Ce.dy,Ce.fixed=!1)}return{converged:!1}}},3424:(yt,it,ae)=>{const ye=ae(6714),j=ae(8487),oe=ae(8031),re=ae(4570),ie=ae(2698);function V(K,q){if(!ye(K))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");q=j(q,ie),this.callbacks={},q.onConverged&&(this.callbacks.onConverged=q.onConverged),this.graph=K,this.params=q,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}V.prototype.isRunning=function(){return this.running},V.prototype.runFrame=function(){let{converged:K}=oe(this.graph,this.nodeStates,this.params);re.assignLayoutChanges(this.graph,this.nodeStates,this.params),K=!1,K?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},V.prototype.stop=function(){return this.running=!1,null!==this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},V.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},V.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},yt.exports=V},8487:yt=>{function it(ye){return!ye||"object"!=typeof ye||"function"==typeof ye||Array.isArray(ye)||ye instanceof Set||ye instanceof Map||ye instanceof RegExp||ye instanceof Date}yt.exports=function ae(ye,j){ye=ye||{};var oe={};for(var re in j){var ie=ye[re],V=j[re];oe[re]=it(V)?void 0===ie?V:ie:ae(ie,V)}return oe}},2954:(yt,it)=>{function ae(oe){return"number"!=typeof oe||isNaN(oe)?1:oe}function j(oe,re){var ie={},V=function(le){return typeof le>"u"?re:le};"function"==typeof re&&(V=re);var K=function(le){return V(le[oe])},q=function(){return V(void 0)};return"string"==typeof oe?(ie.fromAttributes=K,ie.fromGraph=function(le,Te){return K(le.getEdgeAttributes(Te))},ie.fromEntry=function(le,Te){return K(Te)},ie.fromPartialEntry=ie.fromEntry,ie.fromMinimalEntry=ie.fromEntry):"function"==typeof oe?(ie.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},ie.fromGraph=function(le,Te){var De=le.extremities(Te);return V(oe(Te,le.getEdgeAttributes(Te),De[0],De[1],le.getNodeAttributes(De[0]),le.getNodeAttributes(De[1]),le.isUndirected(Te)))},ie.fromEntry=function(le,Te,De,xe,_e,Q,Re){return V(oe(le,Te,De,xe,_e,Q,Re))},ie.fromPartialEntry=function(le,Te,De,xe){return V(oe(le,Te,De,xe))},ie.fromMinimalEntry=function(le,Te){return V(oe(le,Te))}):(ie.fromAttributes=q,ie.fromGraph=q,ie.fromEntry=q,ie.fromMinimalEntry=q),ie}it.createNodeValueGetter=function ye(oe,re){var ie={},V=function(le){return typeof le>"u"?re:le};"function"==typeof re&&(V=re);var K=function(le){return V(le[oe])},q=function(){return V(void 0)};return"string"==typeof oe?(ie.fromAttributes=K,ie.fromGraph=function(le,Te){return K(le.getNodeAttributes(Te))},ie.fromEntry=function(le,Te){return K(Te)}):"function"==typeof oe?(ie.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},ie.fromGraph=function(le,Te){return V(oe(Te,le.getNodeAttributes(Te)))},ie.fromEntry=function(le,Te){return V(oe(le,Te))}):(ie.fromAttributes=q,ie.fromGraph=q,ie.fromEntry=q),ie},it.createEdgeValueGetter=j,it.createEdgeWeightGetter=function(oe){return j(oe,ae)}},6714:yt=>{yt.exports=function(ae){return null!==ae&&"object"==typeof ae&&"function"==typeof ae.addUndirectedEdgeWithKey&&"function"==typeof ae.dropNode&&"boolean"==typeof ae.multi}},5595:function(yt){yt.exports=function(){"use strict";function it(Pe){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(We){return typeof We}:function(We){return We&&"function"==typeof Symbol&&We.constructor===Symbol&&We!==Symbol.prototype?"symbol":typeof We})(Pe)}function ae(Pe,We){Pe.prototype=Object.create(We.prototype),Pe.prototype.constructor=Pe,j(Pe,We)}function ye(Pe){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(We){return We.__proto__||Object.getPrototypeOf(We)})(Pe)}function j(Pe,We){return(j=Object.setPrototypeOf||function(Ye,we){return Ye.__proto__=we,Ye})(Pe,We)}function oe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function re(Pe,We,Ye){return(re=oe()?Reflect.construct:function(we,Ue,ct){var Dt=[null];Dt.push.apply(Dt,Ue);var wt=new(Function.bind.apply(we,Dt));return ct&&j(wt,ct.prototype),wt}).apply(null,arguments)}function ie(Pe){var We="function"==typeof Map?new Map:void 0;return ie=function(Ye){if(null===Ye||-1===Function.toString.call(Ye).indexOf("[native code]"))return Ye;if("function"!=typeof Ye)throw new TypeError("Super expression must either be null or a function");if(void 0!==We){if(We.has(Ye))return We.get(Ye);We.set(Ye,Ue)}function Ue(){return re(Ye,arguments,ye(this).constructor)}return Ue.prototype=Object.create(Ye.prototype,{constructor:{value:Ue,enumerable:!1,writable:!0,configurable:!0}}),j(Ue,Ye)},ie(Pe)}function V(Pe){if(void 0===Pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pe}var K=function(){for(var Pe=arguments[0],We=1,Ye=arguments.length;We<Ye;We++)if(arguments[We])for(var we in arguments[We])Pe[we]=arguments[We][we];return Pe};function q(Pe,We,Ye,we){var Ue=Pe._nodes.get(We),ct=null;return Ue?ct="mixed"===we?Ue.out&&Ue.out[Ye]||Ue.undirected&&Ue.undirected[Ye]:"directed"===we?Ue.out&&Ue.out[Ye]:Ue.undirected&&Ue.undirected[Ye]:ct}function le(Pe){return null!==Pe&&"object"===it(Pe)&&"function"==typeof Pe.addUndirectedEdgeWithKey&&"function"==typeof Pe.dropNode}function Te(Pe){return"object"===it(Pe)&&null!==Pe&&Pe.constructor===Object}function De(Pe){var We;for(We in Pe)return!1;return!0}function xe(Pe,We,Ye){Object.defineProperty(Pe,We,{enumerable:!1,configurable:!1,writable:!0,value:Ye})}function _e(Pe,We,Ye){var we={enumerable:!0,configurable:!0};"function"==typeof Ye?we.get=Ye:(we.value=Ye,we.writable=!1),Object.defineProperty(Pe,We,we)}function Q(Pe){return!(!Te(Pe)||Pe.attributes&&!Array.isArray(Pe.attributes))}"function"==typeof Object.assign&&(K=Object.assign);var Re,Le={exports:{}},Ve="object"==typeof Reflect?Reflect:null,Ae=Ve&&"function"==typeof Ve.apply?Ve.apply:function(Pe,We,Ye){return Function.prototype.apply.call(Pe,We,Ye)};Re=Ve&&"function"==typeof Ve.ownKeys?Ve.ownKeys:Object.getOwnPropertySymbols?function(Pe){return Object.getOwnPropertyNames(Pe).concat(Object.getOwnPropertySymbols(Pe))}:function(Pe){return Object.getOwnPropertyNames(Pe)};var Se=Number.isNaN||function(Pe){return Pe!=Pe};function L(){L.init.call(this)}Le.exports=L,Le.exports.once=function(Pe,We){return new Promise(function(Ye,we){function Ue(Dt){Pe.removeListener(We,ct),we(Dt)}function ct(){"function"==typeof Pe.removeListener&&Pe.removeListener("error",Ue),Ye([].slice.call(arguments))}var Dt;Ct(Pe,We,ct,{once:!0}),"error"!==We&&("function"==typeof(Dt=Pe).on&&Ct(Dt,"error",Ue,{once:!0}))})},L.EventEmitter=L,L.prototype._events=void 0,L.prototype._eventsCount=0,L.prototype._maxListeners=void 0;var ee=10;function Ce(Pe){if("function"!=typeof Pe)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Pe)}function ze(Pe){return void 0===Pe._maxListeners?L.defaultMaxListeners:Pe._maxListeners}function dt(Pe,We,Ye,we){var Ue,ct,Dt;if(Ce(Ye),void 0===(ct=Pe._events)?(ct=Pe._events=Object.create(null),Pe._eventsCount=0):(void 0!==ct.newListener&&(Pe.emit("newListener",We,Ye.listener?Ye.listener:Ye),ct=Pe._events),Dt=ct[We]),void 0===Dt)Dt=ct[We]=Ye,++Pe._eventsCount;else if("function"==typeof Dt?Dt=ct[We]=we?[Ye,Dt]:[Dt,Ye]:we?Dt.unshift(Ye):Dt.push(Ye),(Ue=ze(Pe))>0&&Dt.length>Ue&&!Dt.warned){Dt.warned=!0;var nn=new Error("Possible EventEmitter memory leak detected. "+Dt.length+" "+String(We)+" listeners added. Use emitter.setMaxListeners() to increase limit");nn.name="MaxListenersExceededWarning",nn.emitter=Pe,nn.type=We,nn.count=Dt.length,console&&console.warn&&console.warn(nn)}return Pe}function st(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bt(Pe,We,Ye){var we={fired:!1,wrapFn:void 0,target:Pe,type:We,listener:Ye},Ue=st.bind(we);return Ue.listener=Ye,we.wrapFn=Ue,Ue}function ut(Pe,We,Ye){var we=Pe._events;if(void 0===we)return[];var Ue=we[We];return void 0===Ue?[]:"function"==typeof Ue?Ye?[Ue.listener||Ue]:[Ue]:Ye?function(ct){for(var Dt=new Array(ct.length),wt=0;wt<Dt.length;++wt)Dt[wt]=ct[wt].listener||ct[wt];return Dt}(Ue):on(Ue,Ue.length)}function Vt(Pe){var We=this._events;if(void 0!==We){var Ye=We[Pe];if("function"==typeof Ye)return 1;if(void 0!==Ye)return Ye.length}return 0}function on(Pe,We){for(var Ye=new Array(We),we=0;we<We;++we)Ye[we]=Pe[we];return Ye}function Ct(Pe,We,Ye,we){if("function"==typeof Pe.on)we.once?Pe.once(We,Ye):Pe.on(We,Ye);else{if("function"!=typeof Pe.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Pe);Pe.addEventListener(We,function Ue(ct){we.once&&Pe.removeEventListener(We,Ue),Ye(ct)})}}function rn(Pe){if("function"!=typeof Pe)throw new Error("obliterator/iterator: expecting a function!");this.next=Pe}Object.defineProperty(L,"defaultMaxListeners",{enumerable:!0,get:function(){return ee},set:function(Pe){if("number"!=typeof Pe||Pe<0||Se(Pe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Pe+".");ee=Pe}}),L.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(Pe){if("number"!=typeof Pe||Pe<0||Se(Pe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Pe+".");return this._maxListeners=Pe,this},L.prototype.getMaxListeners=function(){return ze(this)},L.prototype.emit=function(Pe){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We.push(arguments[Ye]);var we="error"===Pe,Ue=this._events;if(void 0!==Ue)we=we&&void 0===Ue.error;else if(!we)return!1;if(we){var ct;if(We.length>0&&(ct=We[0]),ct instanceof Error)throw ct;var Dt=new Error("Unhandled error."+(ct?" ("+ct.message+")":""));throw Dt.context=ct,Dt}var wt=Ue[Pe];if(void 0===wt)return!1;if("function"==typeof wt)Ae(wt,this,We);else{var nn=wt.length,On=on(wt,nn);for(Ye=0;Ye<nn;++Ye)Ae(On[Ye],this,We)}return!0},L.prototype.on=L.prototype.addListener=function(Pe,We){return dt(this,Pe,We,!1)},L.prototype.prependListener=function(Pe,We){return dt(this,Pe,We,!0)},L.prototype.once=function(Pe,We){return Ce(We),this.on(Pe,bt(this,Pe,We)),this},L.prototype.prependOnceListener=function(Pe,We){return Ce(We),this.prependListener(Pe,bt(this,Pe,We)),this},L.prototype.off=L.prototype.removeListener=function(Pe,We){var Ye,we,Ue,ct,Dt;if(Ce(We),void 0===(we=this._events))return this;if(void 0===(Ye=we[Pe]))return this;if(Ye===We||Ye.listener===We)0==--this._eventsCount?this._events=Object.create(null):(delete we[Pe],we.removeListener&&this.emit("removeListener",Pe,Ye.listener||We));else if("function"!=typeof Ye){for(Ue=-1,ct=Ye.length-1;ct>=0;ct--)if(Ye[ct]===We||Ye[ct].listener===We){Dt=Ye[ct].listener,Ue=ct;break}if(Ue<0)return this;0===Ue?Ye.shift():function(wt,nn){for(;nn+1<wt.length;nn++)wt[nn]=wt[nn+1];wt.pop()}(Ye,Ue),1===Ye.length&&(we[Pe]=Ye[0]),void 0!==we.removeListener&&this.emit("removeListener",Pe,Dt||We)}return this},L.prototype.removeAllListeners=function(Pe){var We,Ye,we;if(void 0===(Ye=this._events))return this;if(void 0===Ye.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Ye[Pe]&&(0==--this._eventsCount?this._events=Object.create(null):delete Ye[Pe]),this;if(0===arguments.length){var Ue,ct=Object.keys(Ye);for(we=0;we<ct.length;++we)"removeListener"!==(Ue=ct[we])&&this.removeAllListeners(Ue);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(We=Ye[Pe]))this.removeListener(Pe,We);else if(void 0!==We)for(we=We.length-1;we>=0;we--)this.removeListener(Pe,We[we]);return this},L.prototype.listeners=function(Pe){return ut(this,Pe,!0)},L.prototype.rawListeners=function(Pe){return ut(this,Pe,!1)},L.listenerCount=function(Pe,We){return"function"==typeof Pe.listenerCount?Pe.listenerCount(We):Vt.call(Pe,We)},L.prototype.listenerCount=Vt,L.prototype.eventNames=function(){return this._eventsCount>0?Re(this._events):[]},typeof Symbol<"u"&&(rn.prototype[Symbol.iterator]=function(){return this}),rn.of=function(){var Pe=arguments,We=Pe.length,Ye=0;return new rn(function(){return Ye>=We?{done:!0}:{done:!1,value:Pe[Ye++]}})},rn.empty=function(){return new rn(function(){return{done:!0}})},rn.fromSequence=function(Pe){var We=0,Ye=Pe.length;return new rn(function(){return We>=Ye?{done:!0}:{done:!1,value:Pe[We++]}})},rn.is=function(Pe){return Pe instanceof rn||"object"==typeof Pe&&null!==Pe&&"function"==typeof Pe.next};var Qt=rn,Ht={};Ht.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Ht.SYMBOL_SUPPORT=typeof Symbol<"u";var Qn=Qt,Sn=Ht.ARRAY_BUFFER_SUPPORT,Pn=Ht.SYMBOL_SUPPORT,xt=function(Pe){var Ye,We="string"==typeof(Ye=Pe)||Array.isArray(Ye)||Sn&&ArrayBuffer.isView(Ye)?Qn.fromSequence(Ye):"object"!=typeof Ye||null===Ye?null:Pn&&"function"==typeof Ye[Symbol.iterator]?Ye[Symbol.iterator]():"function"==typeof Ye.next?Ye:null;if(!We)throw new Error("obliterator: target is not iterable nor a valid iterator.");return We},Jt=xt,Gn=function(Pe,We){for(var Ye,we=arguments.length>1?We:1/0,Ue=we!==1/0?new Array(we):[],ct=0,Dt=Jt(Pe);;){if(ct===we)return Ue;if((Ye=Dt.next()).done)return ct!==We&&(Ue.length=ct),Ue;Ue[ct++]=Ye.value}},ri=function(Pe){function We(Ye){var we;return(we=Pe.call(this)||this).name="GraphError",we.message=Ye,we}return ae(We,Pe),We}(ie(Error)),ni=function(Pe){function We(Ye){var we;return(we=Pe.call(this,Ye)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(V(we),We.prototype.constructor),we}return ae(We,Pe),We}(ri),St=function(Pe){function We(Ye){var we;return(we=Pe.call(this,Ye)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(V(we),We.prototype.constructor),we}return ae(We,Pe),We}(ri),Oe=function(Pe){function We(Ye){var we;return(we=Pe.call(this,Ye)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(V(we),We.prototype.constructor),we}return ae(We,Pe),We}(ri);function Ft(Pe,We){this.key=Pe,this.attributes=We,this.clear()}function Ot(Pe,We){this.key=Pe,this.attributes=We,this.clear()}function li(Pe,We){this.key=Pe,this.attributes=We,this.clear()}function di(Pe,We,Ye,we,Ue){this.key=We,this.attributes=Ue,this.undirected=Pe,this.source=Ye,this.target=we}function Gt(Pe,We,Ye,we,Ue,ct,Dt){var wt,nn,On,jn;if(we=""+we,0===Ye){if(!(wt=Pe._nodes.get(we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" node in the graph.'));On=Ue,jn=ct}else if(3===Ye){if(!(nn=Pe._edges.get(Ue=""+Ue)))throw new St("Graph.".concat(We,': could not find the "').concat(Ue,'" edge in the graph.'));var ii=nn.source.key,Ci=nn.target.key;if(we===ii)wt=nn.target;else{if(we!==Ci)throw new St("Graph.".concat(We,': the "').concat(we,'" node is not attached to the "').concat(Ue,'" edge (').concat(ii,", ").concat(Ci,")."));wt=nn.source}On=ct,jn=Dt}else{if(!(nn=Pe._edges.get(we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'));wt=1===Ye?nn.source:nn.target,On=Ue,jn=ct}return[wt,On,jn]}Ft.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.in={},this.out={},this.undirected={}},Ot.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.in={},this.out={}},li.prototype.clear=function(){this.undirectedDegree=0,this.undirected={}},di.prototype.attach=function(){var Pe="out",We="in";this.undirected&&(Pe=We="undirected");var Ye=this.source.key,we=this.target.key;this.source[Pe][we]=this,this.undirected&&Ye===we||(this.target[We][Ye]=this)},di.prototype.attachMulti=function(){var Pe="out",We="in",Ye=this.source.key,we=this.target.key;this.undirected&&(Pe=We="undirected");var Ue=this.source[Pe],ct=Ue[we];if(void 0===ct)return Ue[we]=this,void(this.undirected&&Ye===we||(this.target[We][Ye]=this));ct.previous=this,this.next=ct,Ue[we]=this,this.target[We][Ye]=this},di.prototype.detach=function(){var Pe=this.source.key,Ye="out",we="in";this.undirected&&(Ye=we="undirected"),delete this.source[Ye][this.target.key],delete this.target[we][Pe]},di.prototype.detachMulti=function(){var Pe=this.source.key,We=this.target.key,Ye="out",we="in";this.undirected&&(Ye=we="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[Ye][We],delete this.target[we][Pe]):(this.next.previous=void 0,this.source[Ye][We]=this.next,this.target[we][Pe]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var Rt=[{name:function(Pe){return"get".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct){var Dt=Gt(this,We,Ye,we,Ue,ct);return Dt[0].attributes[Dt[1]]}}},{name:function(Pe){return"get".concat(Pe,"Attributes")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue){return Gt(this,We,Ye,we,Ue)[0].attributes}}},{name:function(Pe){return"has".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct){var Dt=Gt(this,We,Ye,we,Ue,ct);return Dt[0].attributes.hasOwnProperty(Dt[1])}}},{name:function(Pe){return"set".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct,Dt){var wt=Gt(this,We,Ye,we,Ue,ct,Dt),nn=wt[0],On=wt[1];return nn.attributes[On]=wt[2],this.emit("nodeAttributesUpdated",{key:nn.key,type:"set",attributes:nn.attributes,name:On}),this}}},{name:function(Pe){return"update".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct,Dt){var wt=Gt(this,We,Ye,we,Ue,ct,Dt),nn=wt[0],On=wt[1],jn=wt[2];if("function"!=typeof jn)throw new ni("Graph.".concat(We,": updater should be a function."));var ii=nn.attributes,Ci=jn(ii[On]);return ii[On]=Ci,this.emit("nodeAttributesUpdated",{key:nn.key,type:"set",attributes:nn.attributes,name:On}),this}}},{name:function(Pe){return"remove".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct){var Dt=Gt(this,We,Ye,we,Ue,ct),wt=Dt[0],nn=Dt[1];return delete wt.attributes[nn],this.emit("nodeAttributesUpdated",{key:wt.key,type:"remove",attributes:wt.attributes,name:nn}),this}}},{name:function(Pe){return"replace".concat(Pe,"Attributes")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct){var Dt=Gt(this,We,Ye,we,Ue,ct),wt=Dt[0],nn=Dt[1];if(!Te(nn))throw new ni("Graph.".concat(We,": provided attributes are not a plain object."));return wt.attributes=nn,this.emit("nodeAttributesUpdated",{key:wt.key,type:"replace",attributes:wt.attributes}),this}}},{name:function(Pe){return"merge".concat(Pe,"Attributes")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct){var Dt=Gt(this,We,Ye,we,Ue,ct),wt=Dt[0],nn=Dt[1];if(!Te(nn))throw new ni("Graph.".concat(We,": provided attributes are not a plain object."));return K(wt.attributes,nn),this.emit("nodeAttributesUpdated",{key:wt.key,type:"merge",attributes:wt.attributes,data:nn}),this}}},{name:function(Pe){return"update".concat(Pe,"Attributes")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct){var Dt=Gt(this,We,Ye,we,Ue,ct),wt=Dt[0],nn=Dt[1];if("function"!=typeof nn)throw new ni("Graph.".concat(We,": provided updater is not a function."));return wt.attributes=nn(wt.attributes),this.emit("nodeAttributesUpdated",{key:wt.key,type:"update",attributes:wt.attributes}),this}}}],_n=[{name:function(Pe){return"get".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue){var ct;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Oe("Graph.".concat(We,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Oe("Graph.".concat(We,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Dt=""+we,wt=""+Ue;if(Ue=arguments[2],!(ct=q(this,Dt,wt,Ye)))throw new St("Graph.".concat(We,': could not find an edge for the given path ("').concat(Dt,'" - "').concat(wt,'").'))}else{if("mixed"!==Ye)throw new Oe("Graph.".concat(We,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(ct=this._edges.get(we=""+we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'))}return ct.attributes[Ue]}}},{name:function(Pe){return"get".concat(Pe,"Attributes")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we){var Ue;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Oe("Graph.".concat(We,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new Oe("Graph.".concat(We,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ct=""+we,Dt=""+arguments[1];if(!(Ue=q(this,ct,Dt,Ye)))throw new St("Graph.".concat(We,': could not find an edge for the given path ("').concat(ct,'" - "').concat(Dt,'").'))}else{if("mixed"!==Ye)throw new Oe("Graph.".concat(We,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Ue=this._edges.get(we=""+we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'))}return Ue.attributes}}},{name:function(Pe){return"has".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue){var ct;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Oe("Graph.".concat(We,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Oe("Graph.".concat(We,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Dt=""+we,wt=""+Ue;if(Ue=arguments[2],!(ct=q(this,Dt,wt,Ye)))throw new St("Graph.".concat(We,': could not find an edge for the given path ("').concat(Dt,'" - "').concat(wt,'").'))}else{if("mixed"!==Ye)throw new Oe("Graph.".concat(We,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(ct=this._edges.get(we=""+we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'))}return ct.attributes.hasOwnProperty(Ue)}}},{name:function(Pe){return"set".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct){var Dt;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Oe("Graph.".concat(We,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new Oe("Graph.".concat(We,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var wt=""+we,nn=""+Ue;if(Ue=arguments[2],ct=arguments[3],!(Dt=q(this,wt,nn,Ye)))throw new St("Graph.".concat(We,': could not find an edge for the given path ("').concat(wt,'" - "').concat(nn,'").'))}else{if("mixed"!==Ye)throw new Oe("Graph.".concat(We,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Dt=this._edges.get(we=""+we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'))}return Dt.attributes[Ue]=ct,this.emit("edgeAttributesUpdated",{key:Dt.key,type:"set",attributes:Dt.attributes,name:Ue}),this}}},{name:function(Pe){return"update".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue,ct){var Dt;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Oe("Graph.".concat(We,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new Oe("Graph.".concat(We,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var wt=""+we,nn=""+Ue;if(Ue=arguments[2],ct=arguments[3],!(Dt=q(this,wt,nn,Ye)))throw new St("Graph.".concat(We,': could not find an edge for the given path ("').concat(wt,'" - "').concat(nn,'").'))}else{if("mixed"!==Ye)throw new Oe("Graph.".concat(We,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Dt=this._edges.get(we=""+we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'))}if("function"!=typeof ct)throw new ni("Graph.".concat(We,": updater should be a function."));return Dt.attributes[Ue]=ct(Dt.attributes[Ue]),this.emit("edgeAttributesUpdated",{key:Dt.key,type:"set",attributes:Dt.attributes,name:Ue}),this}}},{name:function(Pe){return"remove".concat(Pe,"Attribute")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue){var ct;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Oe("Graph.".concat(We,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Oe("Graph.".concat(We,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Dt=""+we,wt=""+Ue;if(Ue=arguments[2],!(ct=q(this,Dt,wt,Ye)))throw new St("Graph.".concat(We,': could not find an edge for the given path ("').concat(Dt,'" - "').concat(wt,'").'))}else{if("mixed"!==Ye)throw new Oe("Graph.".concat(We,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(ct=this._edges.get(we=""+we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'))}return delete ct.attributes[Ue],this.emit("edgeAttributesUpdated",{key:ct.key,type:"remove",attributes:ct.attributes,name:Ue}),this}}},{name:function(Pe){return"replace".concat(Pe,"Attributes")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue){var ct;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Oe("Graph.".concat(We,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Oe("Graph.".concat(We,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Dt=""+we,wt=""+Ue;if(Ue=arguments[2],!(ct=q(this,Dt,wt,Ye)))throw new St("Graph.".concat(We,': could not find an edge for the given path ("').concat(Dt,'" - "').concat(wt,'").'))}else{if("mixed"!==Ye)throw new Oe("Graph.".concat(We,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(ct=this._edges.get(we=""+we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'))}if(!Te(Ue))throw new ni("Graph.".concat(We,": provided attributes are not a plain object."));return ct.attributes=Ue,this.emit("edgeAttributesUpdated",{key:ct.key,type:"replace",attributes:ct.attributes}),this}}},{name:function(Pe){return"merge".concat(Pe,"Attributes")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue){var ct;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Oe("Graph.".concat(We,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Oe("Graph.".concat(We,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Dt=""+we,wt=""+Ue;if(Ue=arguments[2],!(ct=q(this,Dt,wt,Ye)))throw new St("Graph.".concat(We,': could not find an edge for the given path ("').concat(Dt,'" - "').concat(wt,'").'))}else{if("mixed"!==Ye)throw new Oe("Graph.".concat(We,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(ct=this._edges.get(we=""+we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'))}if(!Te(Ue))throw new ni("Graph.".concat(We,": provided attributes are not a plain object."));return K(ct.attributes,Ue),this.emit("edgeAttributesUpdated",{key:ct.key,type:"merge",attributes:ct.attributes,data:Ue}),this}}},{name:function(Pe){return"update".concat(Pe,"Attributes")},attacher:function(Pe,We,Ye){Pe.prototype[We]=function(we,Ue){var ct;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Oe("Graph.".concat(We,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Oe("Graph.".concat(We,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Dt=""+we,wt=""+Ue;if(Ue=arguments[2],!(ct=q(this,Dt,wt,Ye)))throw new St("Graph.".concat(We,': could not find an edge for the given path ("').concat(Dt,'" - "').concat(wt,'").'))}else{if("mixed"!==Ye)throw new Oe("Graph.".concat(We,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(ct=this._edges.get(we=""+we)))throw new St("Graph.".concat(We,': could not find the "').concat(we,'" edge in the graph.'))}if("function"!=typeof Ue)throw new ni("Graph.".concat(We,": provided updater is not a function."));return ct.attributes=Ue(ct.attributes),this.emit("edgeAttributesUpdated",{key:ct.key,type:"update",attributes:ct.attributes}),this}}}],It=Qt,rt=xt,lt=function(){var Pe=arguments,We=null,Ye=-1;return new It(function(){for(var we=null;;){if(null===We){if(++Ye>=Pe.length)return{done:!0};We=rt(Pe[Ye])}if(!0!==(we=We.next()).done)break;We=null}return we})},dn=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Yn(Pe,We,Ye,we){var Ue=!1;for(var ct in We)if(ct!==we){var Dt=We[ct];if(Ue=Ye(Dt.key,Dt.attributes,Dt.source.key,Dt.target.key,Dt.source.attributes,Dt.target.attributes,Dt.undirected),Pe&&Ue)return Dt.key}}function Ti(Pe,We,Ye,we){var Ue,ct,Dt,wt=!1;for(var nn in We)if(nn!==we){Ue=We[nn];do{if(wt=Ye(Ue.key,Ue.attributes,(ct=Ue.source).key,(Dt=Ue.target).key,ct.attributes,Dt.attributes,Ue.undirected),Pe&&wt)return Ue.key;Ue=Ue.next}while(void 0!==Ue)}}function Di(Pe,We){var Ye,we=Object.keys(Pe),Ue=we.length,ct=0;return new Qt(function(){do{if(Ye)Ye=Ye.next;else{if(ct>=Ue)return{done:!0};var Dt=we[ct++];if(Dt===We){Ye=void 0;continue}Ye=Pe[Dt]}}while(!Ye);return{done:!1,value:{edge:Ye.key,attributes:Ye.attributes,source:Ye.source.key,target:Ye.target.key,sourceAttributes:Ye.source.attributes,targetAttributes:Ye.target.attributes,undirected:Ye.undirected}}})}function us(Pe,We,Ye,we){var Ue=We[Ye];if(Ue){var ct=Ue.source,Dt=Ue.target;return we(Ue.key,Ue.attributes,ct.key,Dt.key,ct.attributes,Dt.attributes,Ue.undirected)&&Pe?Ue.key:void 0}}function vs(Pe,We,Ye,we){var Ue=We[Ye];if(Ue){var ct=!1;do{if(ct=we(Ue.key,Ue.attributes,Ue.source.key,Ue.target.key,Ue.source.attributes,Ue.target.attributes,Ue.undirected),Pe&&ct)return Ue.key;Ue=Ue.next}while(void 0!==Ue)}}function Hr(Pe,We){var Ye=Pe[We];return void 0!==Ye.next?new Qt(function(){if(!Ye)return{done:!0};var we={edge:Ye.key,attributes:Ye.attributes,source:Ye.source.key,target:Ye.target.key,sourceAttributes:Ye.source.attributes,targetAttributes:Ye.target.attributes,undirected:Ye.undirected};return Ye=Ye.next,{done:!1,value:we}}):Qt.of({edge:Ye.key,attributes:Ye.attributes,source:Ye.source.key,target:Ye.target.key,sourceAttributes:Ye.source.attributes,targetAttributes:Ye.target.attributes,undirected:Ye.undirected})}function Ds(Pe,We){if(0===Pe.size)return[];if("mixed"===We||We===Pe.type)return"function"==typeof Array.from?Array.from(Pe._edges.keys()):Gn(Pe._edges.keys(),Pe._edges.size);for(var Ye,we,ct=new Array("undirected"===We?Pe.undirectedSize:Pe.directedSize),Dt="undirected"===We,wt=Pe._edges.values(),nn=0;!0!==(Ye=wt.next()).done;)(we=Ye.value).undirected===Dt&&(ct[nn++]=we.key);return ct}function nr(Pe,We,Ye,we){if(0!==We.size)for(var Ue,ct,Dt="mixed"!==Ye&&Ye!==We.type,wt="undirected"===Ye,nn=!1,On=We._edges.values();!0!==(Ue=On.next()).done;)if(ct=Ue.value,!Dt||ct.undirected===wt){var ii=ct.key,yi=ct.source,Ei=ct.target;if(nn=we(ii,ct.attributes,yi.key,Ei.key,yi.attributes,Ei.attributes,ct.undirected),Pe&&nn)return ii}}function fr(Pe,We){if(0===Pe.size)return Qt.empty();var Ye="mixed"!==We&&We!==Pe.type,we="undirected"===We,Ue=Pe._edges.values();return new Qt(function(){for(var ct,Dt;;){if((ct=Ue.next()).done)return ct;if(Dt=ct.value,!Ye||Dt.undirected===we)break}return{value:{edge:Dt.key,attributes:Dt.attributes,source:Dt.source.key,target:Dt.target.key,sourceAttributes:Dt.source.attributes,targetAttributes:Dt.target.attributes,undirected:Dt.undirected},done:!1}})}function y(Pe,We,Ye,we,Ue,ct){var Dt,wt=We?Ti:Yn;if("undirected"!==Ye&&("out"!==we&&(Dt=wt(Pe,Ue.in,ct),Pe&&Dt)||"in"!==we&&(Dt=wt(Pe,Ue.out,ct,we?void 0:Ue.key),Pe&&Dt))||"directed"!==Ye&&(Dt=wt(Pe,Ue.undirected,ct),Pe&&Dt))return Dt}function l(Pe,We,Ye,we){var Ue=[];return y(!1,Pe,We,Ye,we,function(ct){Ue.push(ct)}),Ue}function d(Pe,We,Ye){var we=Qt.empty();return"undirected"!==Pe&&("out"!==We&&void 0!==Ye.in&&(we=lt(we,Di(Ye.in))),"in"!==We&&void 0!==Ye.out&&(we=lt(we,Di(Ye.out,We?void 0:Ye.key)))),"directed"!==Pe&&void 0!==Ye.undirected&&(we=lt(we,Di(Ye.undirected))),we}function _(Pe,We,Ye,we,Ue,ct,Dt){var wt,nn=Ye?vs:us;if("undirected"!==We&&(void 0!==Ue.in&&"out"!==we&&(wt=nn(Pe,Ue.in,ct,Dt),Pe&&wt)||void 0!==Ue.out&&"in"!==we&&(we||Ue.key!==ct)&&(wt=nn(Pe,Ue.out,ct,Dt),Pe&&wt))||"directed"!==We&&void 0!==Ue.undirected&&(wt=nn(Pe,Ue.undirected,ct,Dt),Pe&&wt))return wt}function C(Pe,We,Ye,we,Ue){var ct=[];return _(!1,Pe,We,Ye,we,Ue,function(Dt){ct.push(Dt)}),ct}function S(Pe,We,Ye,we){var Ue=Qt.empty();return"undirected"!==Pe&&(void 0!==Ye.in&&"out"!==We&&we in Ye.in&&(Ue=lt(Ue,Hr(Ye.in,we))),void 0!==Ye.out&&"in"!==We&&we in Ye.out&&(We||Ye.key!==we)&&(Ue=lt(Ue,Hr(Ye.out,we)))),"directed"!==Pe&&void 0!==Ye.undirected&&we in Ye.undirected&&(Ue=lt(Ue,Hr(Ye.undirected,we))),Ue}var k=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function N(){this.A=null,this.B=null}function z(Pe,We,Ye,we,Ue){for(var ct in we){var Dt=we[ct],wt=Dt.source,On=wt===Ye?Dt.target:wt;if(!We||!We.has(On.key)){var jn=Ue(On.key,On.attributes);if(Pe&&jn)return On.key}}}function D(Pe,We,Ye,we,Ue){if("mixed"!==We){if("undirected"===We)return z(Pe,null,we,we.undirected,Ue);if("string"==typeof Ye)return z(Pe,null,we,we[Ye],Ue)}var ct,Dt=new N;if("undirected"!==We){if("out"!==Ye){if(ct=z(Pe,null,we,we.in,Ue),Pe&&ct)return ct;Dt.wrap(we.in)}if("in"!==Ye){if(ct=z(Pe,Dt,we,we.out,Ue),Pe&&ct)return ct;Dt.wrap(we.out)}}if("directed"!==We&&(ct=z(Pe,Dt,we,we.undirected,Ue),Pe&&ct))return ct}function H(Pe,We,Ye){var we=Object.keys(Ye),Ue=we.length,ct=0;return new Qt(function(){var Dt=null;do{if(ct>=Ue)return Pe&&Pe.wrap(Ye),{done:!0};var wt=Ye[we[ct++]],nn=wt.source;Dt=nn===We?wt.target:nn,Pe&&Pe.has(Dt.key)&&(Dt=null)}while(null===Dt);return{done:!1,value:{neighbor:Dt.key,attributes:Dt.attributes}}})}function R(Pe,We,Ye,we,Ue){for(var ct,Dt,wt,nn,On,jn,ii,Ci=we._nodes.values(),yi=we.type;!0!==(ct=Ci.next()).done;){var Ei=!1;if(Dt=ct.value,"undirected"!==yi)for(wt in nn=Dt.out){On=nn[wt];do{if(Ei=!0,ii=Ue(Dt.key,(jn=On.target).key,Dt.attributes,jn.attributes,On.key,On.attributes,On.undirected),Pe&&ii)return On;On=On.next}while(On)}if("directed"!==yi)for(wt in nn=Dt.undirected)if(!(We&&Dt.key>wt)){On=nn[wt];do{if((jn=On.target).key!==wt&&(jn=On.source),Ei=!0,ii=Ue(Dt.key,jn.key,Dt.attributes,jn.attributes,On.key,On.attributes,On.undirected),Pe&&ii)return On;On=On.next}while(On)}if(Ye&&!Ei&&(ii=Ue(Dt.key,null,Dt.attributes,null,null,null,null),Pe&&ii))return null}}function Y(Pe){if(!Te(Pe))throw new ni('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in Pe))throw new ni("Graph.import: serialized node is missing its key.");if("attributes"in Pe&&(!Te(Pe.attributes)||null===Pe.attributes))throw new ni("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function he(Pe){if(!Te(Pe))throw new ni('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in Pe))throw new ni("Graph.import: serialized edge is missing its source.");if(!("target"in Pe))throw new ni("Graph.import: serialized edge is missing its target.");if("attributes"in Pe&&(!Te(Pe.attributes)||null===Pe.attributes))throw new ni("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in Pe&&"boolean"!=typeof Pe.undirected)throw new ni("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}N.prototype.wrap=function(Pe){null===this.A?this.A=Pe:null===this.B&&(this.B=Pe)},N.prototype.has=function(Pe){return null!==this.A&&Pe in this.A||null!==this.B&&Pe in this.B};var me,ve=(me=255&Math.floor(256*Math.random()),function(){return me++}),ge=new Set(["directed","undirected","mixed"]),pe=new Set(["domain","_events","_eventsCount","_maxListeners"]),de={allowSelfLoops:!0,multi:!1,type:"mixed"};function Ee(Pe,We,Ye){var we=new Pe.NodeDataClass(We,Ye);return Pe._nodes.set(We,we),Pe.emit("nodeAdded",{key:We,attributes:Ye}),we}function ke(Pe,We,Ye,we,Ue,ct,Dt,wt){if(!we&&"undirected"===Pe.type)throw new Oe("Graph.".concat(We,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(we&&"directed"===Pe.type)throw new Oe("Graph.".concat(We,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(wt&&!Te(wt))throw new ni("Graph.".concat(We,': invalid attributes. Expecting an object but got "').concat(wt,'"'));if(ct=""+ct,Dt=""+Dt,wt=wt||{},!Pe.allowSelfLoops&&ct===Dt)throw new Oe("Graph.".concat(We,': source & target are the same ("').concat(ct,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var nn=Pe._nodes.get(ct),On=Pe._nodes.get(Dt);if(!nn)throw new St("Graph.".concat(We,': source node "').concat(ct,'" not found.'));if(!On)throw new St("Graph.".concat(We,': target node "').concat(Dt,'" not found.'));var jn={key:null,undirected:we,source:ct,target:Dt,attributes:wt};if(Ye)Ue=Pe._edgeKeyGenerator();else if(Pe._edges.has(Ue=""+Ue))throw new Oe("Graph.".concat(We,': the "').concat(Ue,'" edge already exists in the graph.'));if(!Pe.multi&&(we?void 0!==nn.undirected[Dt]:void 0!==nn.out[Dt]))throw new Oe("Graph.".concat(We,': an edge linking "').concat(ct,'" to "').concat(Dt,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var ii=new di(we,Ue,nn,On,wt);Pe._edges.set(Ue,ii);var Ci=ct===Dt;return we?(nn.undirectedDegree++,On.undirectedDegree++,Ci&&Pe._undirectedSelfLoopCount++):(nn.outDegree++,On.inDegree++,Ci&&Pe._directedSelfLoopCount++),Pe.multi?ii.attachMulti():ii.attach(),we?Pe._undirectedSize++:Pe._directedSize++,jn.key=Ue,Pe.emit("edgeAdded",jn),Ue}function Xe(Pe,We,Ye,we,Ue,ct,Dt,wt,nn){if(!we&&"undirected"===Pe.type)throw new Oe("Graph.".concat(We,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(we&&"directed"===Pe.type)throw new Oe("Graph.".concat(We,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(wt)if(nn){if("function"!=typeof wt)throw new ni("Graph.".concat(We,': invalid updater function. Expecting a function but got "').concat(wt,'"'))}else if(!Te(wt))throw new ni("Graph.".concat(We,': invalid attributes. Expecting an object but got "').concat(wt,'"'));var On;if(ct=""+ct,Dt=""+Dt,nn&&(On=wt,wt=void 0),!Pe.allowSelfLoops&&ct===Dt)throw new Oe("Graph.".concat(We,': source & target are the same ("').concat(ct,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var jn,ii,Ci=Pe._nodes.get(ct),yi=Pe._nodes.get(Dt);if(!Ye&&(jn=Pe._edges.get(Ue))){if(!(jn.source.key===ct&&jn.target.key===Dt||we&&jn.source.key===Dt&&jn.target.key===ct))throw new Oe("Graph.".concat(We,': inconsistency detected when attempting to merge the "').concat(Ue,'" edge with "').concat(ct,'" source & "').concat(Dt,'" target vs. ("').concat(jn.source.key,'", "').concat(jn.target.key,'").'));ii=jn}if(ii||Pe.multi||!Ci||(ii=we?Ci.undirected[Dt]:Ci.out[Dt]),ii){var Ei=[ii.key,!1,!1,!1];return(nn?On:wt)?(nn?(ii.attributes=On(ii.attributes),Pe.emit("edgeAttributesUpdated",{type:"replace",key:ii.key,attributes:ii.attributes})):(K(ii.attributes,wt),Pe.emit("edgeAttributesUpdated",{type:"merge",key:ii.key,attributes:ii.attributes,data:wt})),Ei):Ei}wt=wt||{},nn&&On&&(wt=On(wt));var or={key:null,undirected:we,source:ct,target:Dt,attributes:wt};if(Ye)Ue=Pe._edgeKeyGenerator();else if(Pe._edges.has(Ue=""+Ue))throw new Oe("Graph.".concat(We,': the "').concat(Ue,'" edge already exists in the graph.'));var is=!1,_r=!1;Ci||(Ci=Ee(Pe,ct,{}),is=!0,ct===Dt&&(yi=Ci,_r=!0)),yi||(yi=Ee(Pe,Dt,{}),_r=!0),jn=new di(we,Ue,Ci,yi,wt),Pe._edges.set(Ue,jn);var ws=ct===Dt;return we?(Ci.undirectedDegree++,yi.undirectedDegree++,ws&&Pe._undirectedSelfLoopCount++):(Ci.outDegree++,yi.inDegree++,ws&&Pe._directedSelfLoopCount++),Pe.multi?jn.attachMulti():jn.attach(),we?Pe._undirectedSize++:Pe._directedSize++,or.key=Ue,Pe.emit("edgeAdded",or),[Ue,!0,is,_r]}function je(Pe,We){Pe._edges.delete(We.key);var Ye=We.source,we=We.target,Ue=We.attributes,ct=We.undirected,Dt=Ye===we;ct?(Ye.undirectedDegree--,we.undirectedDegree--,Dt&&Pe._undirectedSelfLoopCount--):(Ye.outDegree--,we.inDegree--,Dt&&Pe._directedSelfLoopCount--),Pe.multi?We.detachMulti():We.detach(),ct?Pe._undirectedSize--:Pe._directedSize--,Pe.emit("edgeDropped",{key:We.key,attributes:Ue,source:Ye.key,target:we.key,undirected:ct})}var Pe,nt=function(Pe){function We(we){var Ue;if(Ue=Pe.call(this)||this,"boolean"!=typeof(we=K({},de,we)).multi)throw new ni("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(we.multi,'".'));if(!ge.has(we.type))throw new ni('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(we.type,'".'));if("boolean"!=typeof we.allowSelfLoops)throw new ni("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(we.allowSelfLoops,'".'));var ct="mixed"===we.type?Ft:"directed"===we.type?Ot:li;xe(V(Ue),"NodeDataClass",ct);var Dt="geid_"+ve()+"_",wt=0;return xe(V(Ue),"_attributes",{}),xe(V(Ue),"_nodes",new Map),xe(V(Ue),"_edges",new Map),xe(V(Ue),"_directedSize",0),xe(V(Ue),"_undirectedSize",0),xe(V(Ue),"_directedSelfLoopCount",0),xe(V(Ue),"_undirectedSelfLoopCount",0),xe(V(Ue),"_edgeKeyGenerator",function(){var nn;do{nn=Dt+wt++}while(Ue._edges.has(nn));return nn}),xe(V(Ue),"_options",we),pe.forEach(function(nn){return xe(V(Ue),nn,Ue[nn])}),_e(V(Ue),"order",function(){return Ue._nodes.size}),_e(V(Ue),"size",function(){return Ue._edges.size}),_e(V(Ue),"directedSize",function(){return Ue._directedSize}),_e(V(Ue),"undirectedSize",function(){return Ue._undirectedSize}),_e(V(Ue),"selfLoopCount",function(){return Ue._directedSelfLoopCount+Ue._undirectedSelfLoopCount}),_e(V(Ue),"directedSelfLoopCount",function(){return Ue._directedSelfLoopCount}),_e(V(Ue),"undirectedSelfLoopCount",function(){return Ue._undirectedSelfLoopCount}),_e(V(Ue),"multi",Ue._options.multi),_e(V(Ue),"type",Ue._options.type),_e(V(Ue),"allowSelfLoops",Ue._options.allowSelfLoops),_e(V(Ue),"implementation",function(){return"graphology"}),Ue}ae(We,Pe);var Ye=We.prototype;return Ye._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},Ye.hasNode=function(we){return this._nodes.has(""+we)},Ye.hasDirectedEdge=function(we,Ue){if("undirected"===this.type)return!1;if(1===arguments.length){var Dt=this._edges.get(""+we);return!!Dt&&!Dt.undirected}if(2===arguments.length){Ue=""+Ue;var wt=this._nodes.get(we=""+we);if(!wt)return!1;var nn=wt.out[Ue];return!(!nn||this.multi&&!nn.size)}throw new ni("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ye.hasUndirectedEdge=function(we,Ue){if("directed"===this.type)return!1;if(1===arguments.length){var Dt=this._edges.get(""+we);return!!Dt&&Dt.undirected}if(2===arguments.length){Ue=""+Ue;var wt=this._nodes.get(we=""+we);if(!wt)return!1;var nn=wt.undirected[Ue];return!(!nn||this.multi&&!nn.size)}throw new ni("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ye.hasEdge=function(we,Ue){if(1===arguments.length)return this._edges.has(""+we);if(2===arguments.length){Ue=""+Ue;var Dt=this._nodes.get(we=""+we);if(!Dt)return!1;var wt=void 0!==Dt.out&&Dt.out[Ue];return wt||(wt=void 0!==Dt.undirected&&Dt.undirected[Ue]),!(!wt||this.multi&&!wt.size)}throw new ni("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ye.directedEdge=function(we,Ue){if("undirected"!==this.type){if(we=""+we,Ue=""+Ue,this.multi)throw new Oe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var ct=this._nodes.get(we);if(!ct)throw new St('Graph.directedEdge: could not find the "'.concat(we,'" source node in the graph.'));if(!this._nodes.has(Ue))throw new St('Graph.directedEdge: could not find the "'.concat(Ue,'" target node in the graph.'));var Dt=ct.out&&ct.out[Ue]||void 0;return Dt?Dt.key:void 0}},Ye.undirectedEdge=function(we,Ue){if("directed"!==this.type){if(we=""+we,Ue=""+Ue,this.multi)throw new Oe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var ct=this._nodes.get(we);if(!ct)throw new St('Graph.undirectedEdge: could not find the "'.concat(we,'" source node in the graph.'));if(!this._nodes.has(Ue))throw new St('Graph.undirectedEdge: could not find the "'.concat(Ue,'" target node in the graph.'));var Dt=ct.undirected&&ct.undirected[Ue]||void 0;return Dt?Dt.key:void 0}},Ye.edge=function(we,Ue){if(this.multi)throw new Oe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");Ue=""+Ue;var ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.edge: could not find the "'.concat(we,'" source node in the graph.'));if(!this._nodes.has(Ue))throw new St('Graph.edge: could not find the "'.concat(Ue,'" target node in the graph.'));var Dt=ct.out&&ct.out[Ue]||ct.undirected&&ct.undirected[Ue]||void 0;if(Dt)return Dt.key},Ye.areDirectedNeighbors=function(we,Ue){Ue=""+Ue;var ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.areDirectedNeighbors: could not find the "'.concat(we,'" node in the graph.'));return"undirected"!==this.type&&(Ue in ct.in||Ue in ct.out)},Ye.areOutNeighbors=function(we,Ue){Ue=""+Ue;var ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.areOutNeighbors: could not find the "'.concat(we,'" node in the graph.'));return"undirected"!==this.type&&Ue in ct.out},Ye.areInNeighbors=function(we,Ue){Ue=""+Ue;var ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.areInNeighbors: could not find the "'.concat(we,'" node in the graph.'));return"undirected"!==this.type&&Ue in ct.in},Ye.areUndirectedNeighbors=function(we,Ue){Ue=""+Ue;var ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.areUndirectedNeighbors: could not find the "'.concat(we,'" node in the graph.'));return"directed"!==this.type&&Ue in ct.undirected},Ye.areNeighbors=function(we,Ue){Ue=""+Ue;var ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.areNeighbors: could not find the "'.concat(we,'" node in the graph.'));return"undirected"!==this.type&&(Ue in ct.in||Ue in ct.out)||"directed"!==this.type&&Ue in ct.undirected},Ye.areInboundNeighbors=function(we,Ue){Ue=""+Ue;var ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.areInboundNeighbors: could not find the "'.concat(we,'" node in the graph.'));return"undirected"!==this.type&&Ue in ct.in||"directed"!==this.type&&Ue in ct.undirected},Ye.areOutboundNeighbors=function(we,Ue){Ue=""+Ue;var ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.areOutboundNeighbors: could not find the "'.concat(we,'" node in the graph.'));return"undirected"!==this.type&&Ue in ct.out||"directed"!==this.type&&Ue in ct.undirected},Ye.inDegree=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.inDegree: could not find the "'.concat(we,'" node in the graph.'));return"undirected"===this.type?0:Ue.inDegree},Ye.outDegree=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.outDegree: could not find the "'.concat(we,'" node in the graph.'));return"undirected"===this.type?0:Ue.outDegree},Ye.directedDegree=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.directedDegree: could not find the "'.concat(we,'" node in the graph.'));return"undirected"===this.type?0:Ue.inDegree+Ue.outDegree},Ye.undirectedDegree=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.undirectedDegree: could not find the "'.concat(we,'" node in the graph.'));return"directed"===this.type?0:Ue.undirectedDegree},Ye.inboundDegree=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.inboundDegree: could not find the "'.concat(we,'" node in the graph.'));var ct=0;return"directed"!==this.type&&(ct+=Ue.undirectedDegree),"undirected"!==this.type&&(ct+=Ue.inDegree),ct},Ye.outboundDegree=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.outboundDegree: could not find the "'.concat(we,'" node in the graph.'));var ct=0;return"directed"!==this.type&&(ct+=Ue.undirectedDegree),"undirected"!==this.type&&(ct+=Ue.outDegree),ct},Ye.degree=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.degree: could not find the "'.concat(we,'" node in the graph.'));var ct=0;return"directed"!==this.type&&(ct+=Ue.undirectedDegree),"undirected"!==this.type&&(ct+=Ue.inDegree+Ue.outDegree),ct},Ye.inDegreeWithoutSelfLoops=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(we,'" node in the graph.'));if("undirected"===this.type)return 0;var ct=Ue.in[we];return Ue.inDegree-(ct?this.multi?ct.size:1:0)},Ye.outDegreeWithoutSelfLoops=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(we,'" node in the graph.'));if("undirected"===this.type)return 0;var ct=Ue.out[we];return Ue.outDegree-(ct?this.multi?ct.size:1:0)},Ye.directedDegreeWithoutSelfLoops=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(we,'" node in the graph.'));if("undirected"===this.type)return 0;var ct=Ue.out[we];return Ue.inDegree+Ue.outDegree-2*(ct?this.multi?ct.size:1:0)},Ye.undirectedDegreeWithoutSelfLoops=function(we){var Ue=this._nodes.get(we=""+we);if(!Ue)throw new St('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(we,'" node in the graph.'));if("directed"===this.type)return 0;var ct=Ue.undirected[we];return Ue.undirectedDegree-2*(ct?this.multi?ct.size:1:0)},Ye.inboundDegreeWithoutSelfLoops=function(we){var Ue,ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(we,'" node in the graph.'));var Dt=0,wt=0;return"directed"!==this.type&&(Dt+=ct.undirectedDegree,wt+=2*((Ue=ct.undirected[we])?this.multi?Ue.size:1:0)),"undirected"!==this.type&&(Dt+=ct.inDegree,wt+=(Ue=ct.out[we])?this.multi?Ue.size:1:0),Dt-wt},Ye.outboundDegreeWithoutSelfLoops=function(we){var Ue,ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(we,'" node in the graph.'));var Dt=0,wt=0;return"directed"!==this.type&&(Dt+=ct.undirectedDegree,wt+=2*((Ue=ct.undirected[we])?this.multi?Ue.size:1:0)),"undirected"!==this.type&&(Dt+=ct.outDegree,wt+=(Ue=ct.in[we])?this.multi?Ue.size:1:0),Dt-wt},Ye.degreeWithoutSelfLoops=function(we){var Ue,ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.degreeWithoutSelfLoops: could not find the "'.concat(we,'" node in the graph.'));var Dt=0,wt=0;return"directed"!==this.type&&(Dt+=ct.undirectedDegree,wt+=2*((Ue=ct.undirected[we])?this.multi?Ue.size:1:0)),"undirected"!==this.type&&(Dt+=ct.inDegree+ct.outDegree,wt+=2*((Ue=ct.out[we])?this.multi?Ue.size:1:0)),Dt-wt},Ye.source=function(we){var Ue=this._edges.get(we=""+we);if(!Ue)throw new St('Graph.source: could not find the "'.concat(we,'" edge in the graph.'));return Ue.source.key},Ye.target=function(we){var Ue=this._edges.get(we=""+we);if(!Ue)throw new St('Graph.target: could not find the "'.concat(we,'" edge in the graph.'));return Ue.target.key},Ye.extremities=function(we){var Ue=this._edges.get(we=""+we);if(!Ue)throw new St('Graph.extremities: could not find the "'.concat(we,'" edge in the graph.'));return[Ue.source.key,Ue.target.key]},Ye.opposite=function(we,Ue){we=""+we;var ct=this._edges.get(Ue=""+Ue);if(!ct)throw new St('Graph.opposite: could not find the "'.concat(Ue,'" edge in the graph.'));var Dt=ct.source.key,wt=ct.target.key;if(we===Dt)return wt;if(we===wt)return Dt;throw new St('Graph.opposite: the "'.concat(we,'" node is not attached to the "').concat(Ue,'" edge (').concat(Dt,", ").concat(wt,")."))},Ye.hasExtremity=function(we,Ue){Ue=""+Ue;var ct=this._edges.get(we=""+we);if(!ct)throw new St('Graph.hasExtremity: could not find the "'.concat(we,'" edge in the graph.'));return ct.source.key===Ue||ct.target.key===Ue},Ye.isUndirected=function(we){var Ue=this._edges.get(we=""+we);if(!Ue)throw new St('Graph.isUndirected: could not find the "'.concat(we,'" edge in the graph.'));return Ue.undirected},Ye.isDirected=function(we){var Ue=this._edges.get(we=""+we);if(!Ue)throw new St('Graph.isDirected: could not find the "'.concat(we,'" edge in the graph.'));return!Ue.undirected},Ye.isSelfLoop=function(we){var Ue=this._edges.get(we=""+we);if(!Ue)throw new St('Graph.isSelfLoop: could not find the "'.concat(we,'" edge in the graph.'));return Ue.source===Ue.target},Ye.addNode=function(we,Ue){return function(Dt,wt,nn){if(nn&&!Te(nn))throw new ni('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(nn,'"'));if(nn=nn||{},Dt._nodes.has(wt=""+wt))throw new Oe('Graph.addNode: the "'.concat(wt,'" node already exist in the graph.'));var On=new Dt.NodeDataClass(wt,nn);return Dt._nodes.set(wt,On),Dt.emit("nodeAdded",{key:wt,attributes:nn}),On}(this,we,Ue).key},Ye.mergeNode=function(we,Ue){if(Ue&&!Te(Ue))throw new ni('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(Ue,'"'));Ue=Ue||{};var ct=this._nodes.get(we=""+we);return ct?(Ue&&(K(ct.attributes,Ue),this.emit("nodeAttributesUpdated",{type:"merge",key:we,attributes:ct.attributes,data:Ue})),[we,!1]):(ct=new this.NodeDataClass(we,Ue),this._nodes.set(we,ct),this.emit("nodeAdded",{key:we,attributes:Ue}),[we,!0])},Ye.updateNode=function(we,Ue){if(Ue&&"function"!=typeof Ue)throw new ni('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(Ue,'"'));var ct=this._nodes.get(we=""+we);if(ct)return Ue&&(ct.attributes=Ue(ct.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:we,attributes:ct.attributes})),[we,!1];var wt=Ue?Ue({}):{};return ct=new this.NodeDataClass(we,wt),this._nodes.set(we,ct),this.emit("nodeAdded",{key:we,attributes:wt}),[we,!0]},Ye.dropNode=function(we){var Ue,ct=this._nodes.get(we=""+we);if(!ct)throw new St('Graph.dropNode: could not find the "'.concat(we,'" node in the graph.'));if("undirected"!==this.type){for(var Dt in ct.out){Ue=ct.out[Dt];do{je(this,Ue),Ue=Ue.next}while(Ue)}for(var wt in ct.in){Ue=ct.in[wt];do{je(this,Ue),Ue=Ue.next}while(Ue)}}if("directed"!==this.type)for(var nn in ct.undirected){Ue=ct.undirected[nn];do{je(this,Ue),Ue=Ue.next}while(Ue)}this._nodes.delete(we),this.emit("nodeDropped",{key:we,attributes:ct.attributes})},Ye.dropEdge=function(we){var Ue;if(arguments.length>1){var ct=""+arguments[0],Dt=""+arguments[1];if(!(Ue=q(this,ct,Dt,this.type)))throw new St('Graph.dropEdge: could not find the "'.concat(ct,'" -> "').concat(Dt,'" edge in the graph.'))}else if(!(Ue=this._edges.get(we=""+we)))throw new St('Graph.dropEdge: could not find the "'.concat(we,'" edge in the graph.'));return je(this,Ue),this},Ye.dropDirectedEdge=function(we,Ue){if(arguments.length<2)throw new Oe("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Oe("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var ct=q(this,we=""+we,Ue=""+Ue,"directed");if(!ct)throw new St('Graph.dropDirectedEdge: could not find a "'.concat(we,'" -> "').concat(Ue,'" edge in the graph.'));return je(this,ct),this},Ye.dropUndirectedEdge=function(we,Ue){if(arguments.length<2)throw new Oe("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Oe("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var ct=q(this,we,Ue,"undirected");if(!ct)throw new St('Graph.dropUndirectedEdge: could not find a "'.concat(we,'" -> "').concat(Ue,'" edge in the graph.'));return je(this,ct),this},Ye.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},Ye.clearEdges=function(){for(var we,Ue=this._nodes.values();!0!==(we=Ue.next()).done;)we.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},Ye.getAttribute=function(we){return this._attributes[we]},Ye.getAttributes=function(){return this._attributes},Ye.hasAttribute=function(we){return this._attributes.hasOwnProperty(we)},Ye.setAttribute=function(we,Ue){return this._attributes[we]=Ue,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:we}),this},Ye.updateAttribute=function(we,Ue){if("function"!=typeof Ue)throw new ni("Graph.updateAttribute: updater should be a function.");return this._attributes[we]=Ue(this._attributes[we]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:we}),this},Ye.removeAttribute=function(we){return delete this._attributes[we],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:we}),this},Ye.replaceAttributes=function(we){if(!Te(we))throw new ni("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=we,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},Ye.mergeAttributes=function(we){if(!Te(we))throw new ni("Graph.mergeAttributes: provided attributes are not a plain object.");return K(this._attributes,we),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:we}),this},Ye.updateAttributes=function(we){if("function"!=typeof we)throw new ni("Graph.updateAttributes: provided updater is not a function.");return this._attributes=we(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},Ye.updateEachNodeAttributes=function(we,Ue){if("function"!=typeof we)throw new ni("Graph.updateEachNodeAttributes: expecting an updater function.");if(Ue&&!Q(Ue))throw new ni("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ct,Dt,wt=this._nodes.values();!0!==(ct=wt.next()).done;)(Dt=ct.value).attributes=we(Dt.key,Dt.attributes);this.emit("eachNodeAttributesUpdated",{hints:Ue||null})},Ye.updateEachEdgeAttributes=function(we,Ue){if("function"!=typeof we)throw new ni("Graph.updateEachEdgeAttributes: expecting an updater function.");if(Ue&&!Q(Ue))throw new ni("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ct,Dt,wt,nn,On=this._edges.values();!0!==(ct=On.next()).done;)wt=(Dt=ct.value).source,Dt.attributes=we(Dt.key,Dt.attributes,wt.key,(nn=Dt.target).key,wt.attributes,nn.attributes,Dt.undirected);this.emit("eachEdgeAttributesUpdated",{hints:Ue||null})},Ye.forEachAdjacencyEntry=function(we){if("function"!=typeof we)throw new ni("Graph.forEachAdjacencyEntry: expecting a callback.");R(!1,!1,!1,this,we)},Ye.forEachAdjacencyEntryWithOrphans=function(we){if("function"!=typeof we)throw new ni("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");R(!1,!1,!0,this,we)},Ye.forEachAssymetricAdjacencyEntry=function(we){if("function"!=typeof we)throw new ni("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");R(!1,!0,!1,this,we)},Ye.forEachAssymetricAdjacencyEntryWithOrphans=function(we){if("function"!=typeof we)throw new ni("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");R(!1,!0,!0,this,we)},Ye.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Gn(this._nodes.keys(),this._nodes.size)},Ye.forEachNode=function(we){if("function"!=typeof we)throw new ni("Graph.forEachNode: expecting a callback.");for(var Ue,ct,Dt=this._nodes.values();!0!==(Ue=Dt.next()).done;)we((ct=Ue.value).key,ct.attributes)},Ye.findNode=function(we){if("function"!=typeof we)throw new ni("Graph.findNode: expecting a callback.");for(var Ue,ct,Dt=this._nodes.values();!0!==(Ue=Dt.next()).done;)if(we((ct=Ue.value).key,ct.attributes))return ct.key},Ye.mapNodes=function(we){if("function"!=typeof we)throw new ni("Graph.mapNode: expecting a callback.");for(var Ue,ct,Dt=this._nodes.values(),wt=new Array(this.order),nn=0;!0!==(Ue=Dt.next()).done;)wt[nn++]=we((ct=Ue.value).key,ct.attributes);return wt},Ye.someNode=function(we){if("function"!=typeof we)throw new ni("Graph.someNode: expecting a callback.");for(var Ue,ct,Dt=this._nodes.values();!0!==(Ue=Dt.next()).done;)if(we((ct=Ue.value).key,ct.attributes))return!0;return!1},Ye.everyNode=function(we){if("function"!=typeof we)throw new ni("Graph.everyNode: expecting a callback.");for(var Ue,ct,Dt=this._nodes.values();!0!==(Ue=Dt.next()).done;)if(!we((ct=Ue.value).key,ct.attributes))return!1;return!0},Ye.filterNodes=function(we){if("function"!=typeof we)throw new ni("Graph.filterNodes: expecting a callback.");for(var Ue,ct,Dt=this._nodes.values(),wt=[];!0!==(Ue=Dt.next()).done;)we((ct=Ue.value).key,ct.attributes)&&wt.push(ct.key);return wt},Ye.reduceNodes=function(we,Ue){if("function"!=typeof we)throw new ni("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ni("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var ct,Dt,wt=Ue,nn=this._nodes.values();!0!==(ct=nn.next()).done;)wt=we(wt,(Dt=ct.value).key,Dt.attributes);return wt},Ye.nodeEntries=function(){var we=this._nodes.values();return new Qt(function(){var Ue=we.next();if(Ue.done)return Ue;var ct=Ue.value;return{value:{node:ct.key,attributes:ct.attributes},done:!1}})},Ye.export=function(){var we=new Array(this._nodes.size),Ue=0;this._nodes.forEach(function(Dt,wt){var On,jn;we[Ue++]=(jn={key:wt},De((On=Dt).attributes)||(jn.attributes=K({},On.attributes)),jn)});var ct=new Array(this._edges.size);return Ue=0,this._edges.forEach(function(Dt,wt){var On,jn;ct[Ue++]=(jn={key:wt,source:(On=Dt).source.key,target:On.target.key},De(On.attributes)||(jn.attributes=K({},On.attributes)),On.undirected&&(jn.undirected=!0),jn)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:we,edges:ct}},Ye.import=function(we){var Ue,ct,Dt,wt,nn,On=this,jn=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(le(we))return we.forEachNode(function(wr,rs){jn?On.mergeNode(wr,rs):On.addNode(wr,rs)}),we.forEachEdge(function(wr,rs,ss,Xr,Kr,La,eo){jn?eo?On.mergeUndirectedEdgeWithKey(wr,ss,Xr,rs):On.mergeDirectedEdgeWithKey(wr,ss,Xr,rs):eo?On.addUndirectedEdgeWithKey(wr,ss,Xr,rs):On.addDirectedEdgeWithKey(wr,ss,Xr,rs)}),this;if(!Te(we))throw new ni("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(we.attributes){if(!Te(we.attributes))throw new ni("Graph.import: invalid attributes. Expecting a plain object.");jn?this.mergeAttributes(we.attributes):this.replaceAttributes(we.attributes)}if(we.nodes){if(Dt=we.nodes,!Array.isArray(Dt))throw new ni("Graph.import: invalid nodes. Expecting an array.");for(Ue=0,ct=Dt.length;Ue<ct;Ue++){Y(wt=Dt[Ue]);var Ci=wt.key,yi=wt.attributes;jn?this.mergeNode(Ci,yi):this.addNode(Ci,yi)}}if(we.edges){if(Dt=we.edges,!Array.isArray(Dt))throw new ni("Graph.import: invalid edges. Expecting an array.");for(Ue=0,ct=Dt.length;Ue<ct;Ue++){he(nn=Dt[Ue]);var Ai=nn.source,or=nn.target,is=nn.attributes,_r=nn.undirected,ws=void 0!==_r&&_r;"key"in nn?(jn?ws?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:ws?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,nn.key,Ai,or,is):(jn?ws?this.mergeUndirectedEdge:this.mergeDirectedEdge:ws?this.addUndirectedEdge:this.addDirectedEdge).call(this,Ai,or,is)}}return this},Ye.nullCopy=function(we){var Ue=new We(K({},this._options,we));return Ue.replaceAttributes(K({},this.getAttributes())),Ue},Ye.emptyCopy=function(we){var Ue=this.nullCopy(we);return this._nodes.forEach(function(ct,Dt){var wt=K({},ct.attributes);ct=new Ue.NodeDataClass(Dt,wt),Ue._nodes.set(Dt,ct)}),Ue},Ye.copy=function(we){if("string"==typeof(we=we||{}).type&&we.type!==this.type&&"mixed"!==we.type)throw new Oe('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(we.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof we.multi&&we.multi!==this.multi&&!0!==we.multi)throw new Oe("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof we.allowSelfLoops&&we.allowSelfLoops!==this.allowSelfLoops&&!0!==we.allowSelfLoops)throw new Oe("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var Ue,ct,Dt=this.emptyCopy(we),wt=this._edges.values();!0!==(Ue=wt.next()).done;)ke(Dt,"copy",!1,(ct=Ue.value).undirected,ct.key,ct.source.key,ct.target.key,K({},ct.attributes));return Dt},Ye.toJSON=function(){return this.export()},Ye.toString=function(){return"[object Graph]"},Ye.inspect=function(){var we=this,Ue={};this._nodes.forEach(function(On,jn){Ue[jn]=On.attributes});var ct={},Dt={};this._edges.forEach(function(On,jn){var ii,Ci=On.undirected?"--":"->",yi="",Ei=On.source.key,Ai=On.target.key;On.undirected&&Ei>Ai&&(ii=Ei,Ei=Ai,Ai=ii);var or="(".concat(Ei,")").concat(Ci,"(").concat(Ai,")");jn.startsWith("geid_")?we.multi&&(void 0===Dt[or]?Dt[or]=0:Dt[or]++,yi+="".concat(Dt[or],". ")):yi+="[".concat(jn,"]: "),ct[yi+=or]=On.attributes});var wt={};for(var nn in this)this.hasOwnProperty(nn)&&!pe.has(nn)&&"function"!=typeof this[nn]&&"symbol"!==it(nn)&&(wt[nn]=this[nn]);return wt.attributes=this._attributes,wt.nodes=Ue,wt.edges=ct,xe(wt,"constructor",this.constructor),wt},We}(Le.exports.EventEmitter);typeof Symbol<"u"&&(nt.prototype[Symbol.for("nodejs.util.inspect.custom")]=nt.prototype.inspect),[{name:function(Pe){return"".concat(Pe,"Edge")},generateKey:!0},{name:function(Pe){return"".concat(Pe,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(Pe){return"".concat(Pe,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(Pe){return"".concat(Pe,"EdgeWithKey")}},{name:function(Pe){return"".concat(Pe,"DirectedEdgeWithKey")},type:"directed"},{name:function(Pe){return"".concat(Pe,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(Pe){["add","merge","update"].forEach(function(We){var Ye=Pe.name(We),we="add"===We?ke:Xe;nt.prototype[Ye]=Pe.generateKey?function(Ue,ct,Dt){return we(this,Ye,!0,"undirected"===(Pe.type||this.type),null,Ue,ct,Dt,"update"===We)}:function(Ue,ct,Dt,wt){return we(this,Ye,!1,"undirected"===(Pe.type||this.type),Ue,ct,Dt,wt,"update"===We)}})}),Pe=nt,Rt.forEach(function(We){var Ye=We.name,we=We.attacher;we(Pe,Ye("Node"),0),we(Pe,Ye("Source"),1),we(Pe,Ye("Target"),2),we(Pe,Ye("Opposite"),3)}),function(Pe){_n.forEach(function(We){var Ye=We.name,we=We.attacher;we(Pe,Ye("Edge"),"mixed"),we(Pe,Ye("DirectedEdge"),"directed"),we(Pe,Ye("UndirectedEdge"),"undirected")})}(nt),function(Pe){dn.forEach(function(We){var we,Ue,ct,Dt;ct=(we=We).type,Dt=we.direction,Pe.prototype[Ue=we.name]=function(wt,nn){if("mixed"!==ct&&"mixed"!==this.type&&ct!==this.type)return[];if(!arguments.length)return Ds(this,ct);if(1===arguments.length){var On=this._nodes.get(wt=""+wt);if(void 0===On)throw new St("Graph.".concat(Ue,': could not find the "').concat(wt,'" node in the graph.'));return l(this.multi,"mixed"===ct?this.type:ct,Dt,On)}if(2===arguments.length){nn=""+nn;var jn=this._nodes.get(wt=""+wt);if(!jn)throw new St("Graph.".concat(Ue,':  could not find the "').concat(wt,'" source node in the graph.'));if(!this._nodes.has(nn))throw new St("Graph.".concat(Ue,':  could not find the "').concat(nn,'" target node in the graph.'));return C(ct,this.multi,Dt,jn,nn)}throw new ni("Graph.".concat(Ue,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(Ye,we){var Ue=we.name,ct=we.type,Dt=we.direction,wt="forEach"+Ue[0].toUpperCase()+Ue.slice(1,-1);Ye.prototype[wt]=function(ii,Ci,yi){if("mixed"===ct||"mixed"===this.type||ct===this.type){if(1===arguments.length)return nr(!1,this,ct,yi=ii);if(2===arguments.length){yi=Ci;var Ei=this._nodes.get(ii=""+ii);if(void 0===Ei)throw new St("Graph.".concat(wt,': could not find the "').concat(ii,'" node in the graph.'));return y(!1,this.multi,"mixed"===ct?this.type:ct,Dt,Ei,yi)}if(3===arguments.length){Ci=""+Ci;var Ai=this._nodes.get(ii=""+ii);if(!Ai)throw new St("Graph.".concat(wt,':  could not find the "').concat(ii,'" source node in the graph.'));if(!this._nodes.has(Ci))throw new St("Graph.".concat(wt,':  could not find the "').concat(Ci,'" target node in the graph.'));return _(!1,ct,this.multi,Dt,Ai,Ci,yi)}throw new ni("Graph.".concat(wt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var nn="map"+Ue[0].toUpperCase()+Ue.slice(1);Ye.prototype[nn]=function(){var ii,Ci=Array.prototype.slice.call(arguments),yi=Ci.pop();if(0===Ci.length){var Ei=0;"directed"!==ct&&(Ei+=this.undirectedSize),"undirected"!==ct&&(Ei+=this.directedSize),ii=new Array(Ei);var Ai=0;Ci.push(function(or,is,_r,ws,wr,rs,ss){ii[Ai++]=yi(or,is,_r,ws,wr,rs,ss)})}else ii=[],Ci.push(function(or,is,_r,ws,wr,rs,ss){ii.push(yi(or,is,_r,ws,wr,rs,ss))});return this[wt].apply(this,Ci),ii};var On="filter"+Ue[0].toUpperCase()+Ue.slice(1);Ye.prototype[On]=function(){var ii=Array.prototype.slice.call(arguments),Ci=ii.pop(),yi=[];return ii.push(function(Ei,Ai,or,is,_r,ws,wr){Ci(Ei,Ai,or,is,_r,ws,wr)&&yi.push(Ei)}),this[wt].apply(this,ii),yi};var jn="reduce"+Ue[0].toUpperCase()+Ue.slice(1);Ye.prototype[jn]=function(){var ii,Ci,yi=Array.prototype.slice.call(arguments);if(yi.length<2||yi.length>4)throw new ni("Graph.".concat(jn,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(yi.length,")."));if("function"==typeof yi[yi.length-1]&&"function"!=typeof yi[yi.length-2])throw new ni("Graph.".concat(jn,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===yi.length?(ii=yi[0],Ci=yi[1],yi=[]):3===yi.length?(ii=yi[1],Ci=yi[2],yi=[yi[0]]):4===yi.length&&(ii=yi[2],Ci=yi[3],yi=[yi[0],yi[1]]);var Ei=Ci;return yi.push(function(Ai,or,is,_r,ws,wr,rs){Ei=ii(Ei,Ai,or,is,_r,ws,wr,rs)}),this[wt].apply(this,yi),Ei}}(Pe,We),function(Ye,we){var Ue=we.name,ct=we.type,Dt=we.direction,wt="find"+Ue[0].toUpperCase()+Ue.slice(1,-1);Ye.prototype[wt]=function(jn,ii,Ci){if("mixed"!==ct&&"mixed"!==this.type&&ct!==this.type)return!1;if(1===arguments.length)return nr(!0,this,ct,Ci=jn);if(2===arguments.length){Ci=ii;var yi=this._nodes.get(jn=""+jn);if(void 0===yi)throw new St("Graph.".concat(wt,': could not find the "').concat(jn,'" node in the graph.'));return y(!0,this.multi,"mixed"===ct?this.type:ct,Dt,yi,Ci)}if(3===arguments.length){ii=""+ii;var Ei=this._nodes.get(jn=""+jn);if(!Ei)throw new St("Graph.".concat(wt,':  could not find the "').concat(jn,'" source node in the graph.'));if(!this._nodes.has(ii))throw new St("Graph.".concat(wt,':  could not find the "').concat(ii,'" target node in the graph.'));return _(!0,ct,this.multi,Dt,Ei,ii,Ci)}throw new ni("Graph.".concat(wt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var nn="some"+Ue[0].toUpperCase()+Ue.slice(1,-1);Ye.prototype[nn]=function(){var jn=Array.prototype.slice.call(arguments),ii=jn.pop();return jn.push(function(Ci,yi,Ei,Ai,or,is,_r){return ii(Ci,yi,Ei,Ai,or,is,_r)}),!!this[wt].apply(this,jn)};var On="every"+Ue[0].toUpperCase()+Ue.slice(1,-1);Ye.prototype[On]=function(){var jn=Array.prototype.slice.call(arguments),ii=jn.pop();return jn.push(function(Ci,yi,Ei,Ai,or,is,_r){return!ii(Ci,yi,Ei,Ai,or,is,_r)}),!this[wt].apply(this,jn)}}(Pe,We),function(Ye,we){var ct=we.type,Dt=we.direction,wt=we.name.slice(0,-1)+"Entries";Ye.prototype[wt]=function(nn,On){if("mixed"!==ct&&"mixed"!==this.type&&ct!==this.type)return Qt.empty();if(!arguments.length)return fr(this,ct);if(1===arguments.length){var jn=this._nodes.get(nn=""+nn);if(!jn)throw new St("Graph.".concat(wt,': could not find the "').concat(nn,'" node in the graph.'));return d(ct,Dt,jn)}if(2===arguments.length){On=""+On;var ii=this._nodes.get(nn=""+nn);if(!ii)throw new St("Graph.".concat(wt,':  could not find the "').concat(nn,'" source node in the graph.'));if(!this._nodes.has(On))throw new St("Graph.".concat(wt,':  could not find the "').concat(On,'" target node in the graph.'));return S(ct,Dt,ii,On)}throw new ni("Graph.".concat(wt,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(Pe,We)})}(nt),function(Pe){k.forEach(function(We){var Ye,we,Ue,ct,Dt,wt,nn;(function Z(Pe,We){var Ye=We.name,we=We.type,Ue=We.direction;Pe.prototype[Ye]=function(ct){if("mixed"!==we&&"mixed"!==this.type&&we!==this.type)return[];var Dt=this._nodes.get(ct=""+ct);if(void 0===Dt)throw new St("Graph.".concat(Ye,': could not find the "').concat(ct,'" node in the graph.'));return function(wt,nn,On){if("mixed"!==wt){if("undirected"===wt)return Object.keys(On.undirected);if("string"==typeof nn)return Object.keys(On[nn])}var jn=[];return D(!1,wt,nn,On,function(ii){jn.push(ii)}),jn}("mixed"===we?this.type:we,Ue,Dt)}})(Pe,We),function(Ye,we){var Ue=we.name,ct=we.type,Dt=we.direction,wt="forEach"+Ue[0].toUpperCase()+Ue.slice(1,-1);Ye.prototype[wt]=function(ii,Ci){if("mixed"===ct||"mixed"===this.type||ct===this.type){var yi=this._nodes.get(ii=""+ii);if(void 0===yi)throw new St("Graph.".concat(wt,': could not find the "').concat(ii,'" node in the graph.'));D(!1,"mixed"===ct?this.type:ct,Dt,yi,Ci)}};var nn="map"+Ue[0].toUpperCase()+Ue.slice(1);Ye.prototype[nn]=function(ii,Ci){var yi=[];return this[wt](ii,function(Ei,Ai){yi.push(Ci(Ei,Ai))}),yi};var On="filter"+Ue[0].toUpperCase()+Ue.slice(1);Ye.prototype[On]=function(ii,Ci){var yi=[];return this[wt](ii,function(Ei,Ai){Ci(Ei,Ai)&&yi.push(Ei)}),yi};var jn="reduce"+Ue[0].toUpperCase()+Ue.slice(1);Ye.prototype[jn]=function(ii,Ci,yi){if(arguments.length<3)throw new ni("Graph.".concat(jn,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var Ei=yi;return this[wt](ii,function(Ai,or){Ei=Ci(Ei,Ai,or)}),Ei}}(Pe,We),Ye=Pe,ct=(we=We).type,Dt=we.direction,wt=(Ue=we.name)[0].toUpperCase()+Ue.slice(1,-1),Ye.prototype[nn="find"+wt]=function(ii,Ci){if("mixed"===ct||"mixed"===this.type||ct===this.type){var yi=this._nodes.get(ii=""+ii);if(void 0===yi)throw new St("Graph.".concat(nn,': could not find the "').concat(ii,'" node in the graph.'));return D(!0,"mixed"===ct?this.type:ct,Dt,yi,Ci)}},Ye.prototype["some"+wt]=function(ii,Ci){return!!this[nn](ii,Ci)},Ye.prototype["every"+wt]=function(ii,Ci){return!this[nn](ii,function(yi,Ei){return!Ci(yi,Ei)})},function $(Pe,We){var we=We.type,Ue=We.direction,ct=We.name.slice(0,-1)+"Entries";Pe.prototype[ct]=function(Dt){if("mixed"!==we&&"mixed"!==this.type&&we!==this.type)return Qt.empty();var wt=this._nodes.get(Dt=""+Dt);if(void 0===wt)throw new St("Graph.".concat(ct,': could not find the "').concat(Dt,'" node in the graph.'));return function(nn,On,jn){if("mixed"!==nn){if("undirected"===nn)return H(null,jn,jn.undirected);if("string"==typeof On)return H(null,jn,jn[On])}var ii=Qt.empty(),Ci=new N;return"undirected"!==nn&&("out"!==On&&(ii=lt(ii,H(Ci,jn,jn.in))),"in"!==On&&(ii=lt(ii,H(Ci,jn,jn.out)))),"directed"!==nn&&(ii=lt(ii,H(Ci,jn,jn.undirected))),ii}("mixed"===we?this.type:we,Ue,wt)}}(Pe,We)})}(nt);var pt=function(Pe){function We(Ye){var we=K({type:"directed"},Ye);if("multi"in we&&!1!==we.multi)throw new ni("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==we.type)throw new ni('DirectedGraph.from: inconsistent "'+we.type+'" type in given options!');return Pe.call(this,we)||this}return ae(We,Pe),We}(nt),gt=function(Pe){function We(Ye){var we=K({type:"undirected"},Ye);if("multi"in we&&!1!==we.multi)throw new ni("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==we.type)throw new ni('UndirectedGraph.from: inconsistent "'+we.type+'" type in given options!');return Pe.call(this,we)||this}return ae(We,Pe),We}(nt),Wt=function(Pe){function We(Ye){var we=K({multi:!0},Ye);if("multi"in we&&!0!==we.multi)throw new ni("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return Pe.call(this,we)||this}return ae(We,Pe),We}(nt),Lt=function(Pe){function We(Ye){var we=K({type:"directed",multi:!0},Ye);if("multi"in we&&!0!==we.multi)throw new ni("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==we.type)throw new ni('MultiDirectedGraph.from: inconsistent "'+we.type+'" type in given options!');return Pe.call(this,we)||this}return ae(We,Pe),We}(nt),Bt=function(Pe){function We(Ye){var we=K({type:"undirected",multi:!0},Ye);if("multi"in we&&!0!==we.multi)throw new ni("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==we.type)throw new ni('MultiUndirectedGraph.from: inconsistent "'+we.type+'" type in given options!');return Pe.call(this,we)||this}return ae(We,Pe),We}(nt);function qt(Pe){Pe.from=function(We,Ye){var we=K({},We.options,Ye),Ue=new Pe(we);return Ue.import(We),Ue}}return qt(nt),qt(pt),qt(gt),qt(Wt),qt(Lt),qt(Bt),nt.Graph=nt,nt.DirectedGraph=pt,nt.UndirectedGraph=gt,nt.MultiGraph=Wt,nt.MultiDirectedGraph=Lt,nt.MultiUndirectedGraph=Bt,nt.InvalidArgumentsGraphError=ni,nt.NotFoundGraphError=St,nt.UsageGraphError=Oe,nt}()},5203:(yt,it,ae)=>{yt.exports=ae(8732)},8732:function(yt,it){var ae,ye,j;(function(){var oe,re,ie,V,K,q,le,Te,De,xe,_e,Q,Re,Le,Ve;ie=Math.floor,xe=Math.min,re=function(Ae,Se){return Ae<Se?-1:Ae>Se?1:0},De=function(Ae,Se,L,ee,Ce){var ze;if(null==L&&(L=0),null==Ce&&(Ce=re),L<0)throw new Error("lo must be non-negative");for(null==ee&&(ee=Ae.length);L<ee;)Ce(Se,Ae[ze=ie((L+ee)/2)])<0?ee=ze:L=ze+1;return[].splice.apply(Ae,[L,L-L].concat(Se)),Se},q=function(Ae,Se,L){return null==L&&(L=re),Ae.push(Se),Le(Ae,0,Ae.length-1,L)},K=function(Ae,Se){var L,ee;return null==Se&&(Se=re),L=Ae.pop(),Ae.length?(ee=Ae[0],Ae[0]=L,Ve(Ae,0,Se)):ee=L,ee},Te=function(Ae,Se,L){var ee;return null==L&&(L=re),ee=Ae[0],Ae[0]=Se,Ve(Ae,0,L),ee},le=function(Ae,Se,L){var ee;return null==L&&(L=re),Ae.length&&L(Ae[0],Se)<0&&(Se=(ee=[Ae[0],Se])[0],Ae[0]=ee[1],Ve(Ae,0,L)),Se},V=function(Ae,Se){var ee,ze,st,bt,ut;for(null==Se&&(Se=re),bt=[],ee=0,ze=(st=function(){ut=[];for(var Vt=0,on=ie(Ae.length/2);0<=on?Vt<on:Vt>on;0<=on?Vt++:Vt--)ut.push(Vt);return ut}.apply(this).reverse()).length;ee<ze;ee++)bt.push(Ve(Ae,st[ee],Se));return bt},Re=function(Ae,Se,L){var ee;if(null==L&&(L=re),-1!==(ee=Ae.indexOf(Se)))return Le(Ae,0,ee,L),Ve(Ae,ee,L)},_e=function(Ae,Se,L){var Ce,ze,dt,st;if(null==L&&(L=re),!(Ce=Ae.slice(0,Se)).length)return Ce;for(V(Ce,L),ze=0,dt=(st=Ae.slice(Se)).length;ze<dt;ze++)le(Ce,st[ze],L);return Ce.sort(L).reverse()},Q=function(Ae,Se,L){var ee,ze,dt,st,bt,ut,Vt,on,Ct;if(null==L&&(L=re),10*Se<=Ae.length){if(!(dt=Ae.slice(0,Se).sort(L)).length)return dt;for(ze=dt[dt.length-1],st=0,ut=(Vt=Ae.slice(Se)).length;st<ut;st++)L(ee=Vt[st],ze)<0&&(De(dt,ee,0,null,L),dt.pop(),ze=dt[dt.length-1]);return dt}for(V(Ae,L),Ct=[],bt=0,on=xe(Se,Ae.length);0<=on?bt<on:bt>on;0<=on?++bt:--bt)Ct.push(K(Ae,L));return Ct},Le=function(Ae,Se,L,ee){var Ce,ze,dt;for(null==ee&&(ee=re),Ce=Ae[L];L>Se&&ee(Ce,ze=Ae[dt=L-1>>1])<0;)Ae[L]=ze,L=dt;return Ae[L]=Ce},Ve=function(Ae,Se,L){var ee,Ce,ze,dt,st;for(null==L&&(L=re),Ce=Ae.length,st=Se,ze=Ae[Se],ee=2*Se+1;ee<Ce;)(dt=ee+1)<Ce&&!(L(Ae[ee],Ae[dt])<0)&&(ee=dt),Ae[Se]=Ae[ee],ee=2*(Se=ee)+1;return Ae[Se]=ze,Le(Ae,st,Se,L)},oe=function(){function Ae(Se){this.cmp=Se??re,this.nodes=[]}return Ae.push=q,Ae.pop=K,Ae.replace=Te,Ae.pushpop=le,Ae.heapify=V,Ae.updateItem=Re,Ae.nlargest=_e,Ae.nsmallest=Q,Ae.prototype.push=function(Se){return q(this.nodes,Se,this.cmp)},Ae.prototype.pop=function(){return K(this.nodes,this.cmp)},Ae.prototype.peek=function(){return this.nodes[0]},Ae.prototype.contains=function(Se){return-1!==this.nodes.indexOf(Se)},Ae.prototype.replace=function(Se){return Te(this.nodes,Se,this.cmp)},Ae.prototype.pushpop=function(Se){return le(this.nodes,Se,this.cmp)},Ae.prototype.heapify=function(){return V(this.nodes,this.cmp)},Ae.prototype.updateItem=function(Se){return Re(this.nodes,Se,this.cmp)},Ae.prototype.clear=function(){return this.nodes=[]},Ae.prototype.empty=function(){return 0===this.nodes.length},Ae.prototype.size=function(){return this.nodes.length},Ae.prototype.clone=function(){var Se;return(Se=new Ae).nodes=this.nodes.slice(0),Se},Ae.prototype.toArray=function(){return this.nodes.slice(0)},Ae.prototype.insert=Ae.prototype.push,Ae.prototype.top=Ae.prototype.peek,Ae.prototype.front=Ae.prototype.peek,Ae.prototype.has=Ae.prototype.contains,Ae.prototype.copy=Ae.prototype.clone,Ae}(),ye=[],void 0===(j="function"==typeof(ae=function(){return oe})?ae.apply(it,ye):ae)||(yt.exports=j)}).call(this)},8461:(yt,it)=>{it.read=function(ae,ye,j,oe,re){var ie,V,K=8*re-oe-1,q=(1<<K)-1,le=q>>1,Te=-7,De=j?re-1:0,xe=j?-1:1,_e=ae[ye+De];for(De+=xe,ie=_e&(1<<-Te)-1,_e>>=-Te,Te+=K;Te>0;ie=256*ie+ae[ye+De],De+=xe,Te-=8);for(V=ie&(1<<-Te)-1,ie>>=-Te,Te+=oe;Te>0;V=256*V+ae[ye+De],De+=xe,Te-=8);if(0===ie)ie=1-le;else{if(ie===q)return V?NaN:1/0*(_e?-1:1);V+=Math.pow(2,oe),ie-=le}return(_e?-1:1)*V*Math.pow(2,ie-oe)},it.write=function(ae,ye,j,oe,re,ie){var V,K,q,le=8*ie-re-1,Te=(1<<le)-1,De=Te>>1,xe=23===re?Math.pow(2,-24)-Math.pow(2,-77):0,_e=oe?0:ie-1,Q=oe?1:-1,Re=ye<0||0===ye&&1/ye<0?1:0;for(ye=Math.abs(ye),isNaN(ye)||ye===1/0?(K=isNaN(ye)?1:0,V=Te):(V=Math.floor(Math.log(ye)/Math.LN2),ye*(q=Math.pow(2,-V))<1&&(V--,q*=2),(ye+=V+De>=1?xe/q:xe*Math.pow(2,1-De))*q>=2&&(V++,q/=2),V+De>=Te?(K=0,V=Te):V+De>=1?(K=(ye*q-1)*Math.pow(2,re),V+=De):(K=ye*Math.pow(2,De-1)*Math.pow(2,re),V=0));re>=8;ae[j+_e]=255&K,_e+=Q,K/=256,re-=8);for(V=V<<re|K,le+=re;le>0;ae[j+_e]=255&V,_e+=Q,V/=256,le-=8);ae[j+_e-Q]|=128*Re}},3894:yt=>{yt.exports="function"==typeof Object.create?function(ae,ye){ye&&(ae.super_=ye,ae.prototype=Object.create(ye.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}))}:function(ae,ye){if(ye){ae.super_=ye;var j=function(){};j.prototype=ye.prototype,ae.prototype=new j,ae.prototype.constructor=ae}}},397:yt=>{yt.exports=function j(oe,re,ie){function V(le,Te){if(!re[le]){if(!oe[le]){if(K)return K(le,!0);var xe=new Error("Cannot find module '"+le+"'");throw xe.code="MODULE_NOT_FOUND",xe}var _e=re[le]={exports:{}};oe[le][0].call(_e.exports,function(Q){return V(oe[le][1][Q]||Q)},_e,_e.exports,j,oe,re,ie)}return re[le].exports}for(var K=void 0,q=0;q<ie.length;q++)V(ie[q]);return V}({1:[function(j,oe,re){const ie=j("./utils"),V=function(){"use strict";const K=ie.stringToArray,q=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],le=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],Te=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],De=["Thousand","Million","Billion","Trillion"];const _e={};q.forEach(function(Oe,Ft){_e[Oe.toLowerCase()]=Ft}),le.forEach(function(Oe,Ft){_e[Oe.toLowerCase()]=Ft}),Te.forEach(function(Oe,Ft){const Ot=Oe.toLowerCase();_e[Ot]=10*(Ft+2),_e[Ot.substring(0,Oe.length-1)+"ieth"]=_e[Ot]}),_e.hundredth=100,De.forEach(function(Oe,Ft){const Ot=Oe.toLowerCase(),li=Math.pow(10,3*(Ft+1));_e[Ot]=li,_e[Ot+"th"]=li});const Re=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],Le={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function Ve(Oe){for(var Ft=0;Ft<Re.length;Ft++){const Ot=Re[Ft];if(Oe>=Ot[0])return Ot[1]+Ve(Oe-Ot[0])}return""}function ee(Oe,Ft){if(!(typeof Oe>"u"))return dt(Oe=Math.floor(Oe),bt(Ft))}const Ce_DECIMAL="decimal",Ce_LETTERS="letters",Ce_ROMAN="roman",Ce_WORDS="words",Ce_SEQUENCE="sequence",ze_UPPER="upper",ze_LOWER="lower",ze_TITLE="title";function dt(Oe,Ft){let Ot;const li=Oe<0;switch(Oe=Math.abs(Oe),Ft.primary){case Ce_LETTERS:Ot=function Se(Oe,Ft){for(var Ot=[],li=Ft.charCodeAt(0);Oe>0;)Ot.unshift(String.fromCharCode((Oe-1)%26+li)),Oe=Math.floor((Oe-1)/26);return Ot.join("")}(Oe,Ft.case===ze_UPPER?"A":"a");break;case Ce_ROMAN:Ot=Ve(Oe),Ft.case===ze_UPPER&&(Ot=Ot.toUpperCase());break;case Ce_WORDS:Ot=function xe(Oe,Ft){var Ot=function(di,Gt,Rt){var _n="";if(di<=19)_n=(Gt?" and ":"")+(Rt?le[di]:q[di]);else if(di<100){const rt=Math.floor(di/10),lt=di%10;_n=(Gt?" and ":"")+Te[rt-2],lt>0?_n+="-"+Ot(lt,!1,Rt):Rt&&(_n=_n.substring(0,_n.length-1)+"ieth")}else if(di<1e3){const rt=Math.floor(di/100),lt=di%100;_n=(Gt?", ":"")+q[rt]+" Hundred",lt>0?_n+=Ot(lt,!0,Rt):Rt&&(_n+="th")}else{var It=Math.floor(Math.log10(di)/3);It>De.length&&(It=De.length);const rt=Math.pow(10,3*It),lt=Math.floor(di/rt),dn=di-lt*rt;_n=(Gt?", ":"")+Ot(lt,!1,!1)+" "+De[It-1],dn>0?_n+=Ot(dn,!0,Rt):Rt&&(_n+="th")}return _n};return Ot(Oe,!1,Ft)}(Oe,Ft.ordinal),Ft.case===ze_UPPER?Ot=Ot.toUpperCase():Ft.case===ze_LOWER&&(Ot=Ot.toLowerCase());break;case Ce_DECIMAL:Ot=""+Oe;var di=Ft.mandatoryDigits-Ot.length;if(di>0){var Gt=new Array(di+1).join("0");Ot=Gt+Ot}if(48!==Ft.zeroCode&&(Ot=K(Ot).map(rt=>String.fromCodePoint(rt.codePointAt(0)+Ft.zeroCode-48)).join("")),Ft.regular)for(let lt=Math.floor((Ot.length-1)/Ft.groupingSeparators.position);lt>0;lt--){const dn=Ot.length-lt*Ft.groupingSeparators.position;Ot=Ot.substr(0,dn)+Ft.groupingSeparators.character+Ot.substr(dn)}else Ft.groupingSeparators.reverse().forEach(rt=>{const lt=Ot.length-rt.position;Ot=Ot.substr(0,lt)+rt.character+Ot.substr(lt)});if(Ft.ordinal){var It={1:"st",2:"nd",3:"rd"}[Ot[Ot.length-1]];(!It||Ot.length>1&&"1"===Ot[Ot.length-2])&&(It="th"),Ot+=It}break;case Ce_SEQUENCE:throw{code:"D3130",value:Ft.token}}return li&&(Ot="-"+Ot),Ot}const st=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function bt(Oe){const Ft={type:"integer",primary:Ce_DECIMAL,case:ze_LOWER,ordinal:!1};let Ot,li;const di=Oe.lastIndexOf(";");switch(-1===di?Ot=Oe:(Ot=Oe.substring(0,di),li=Oe.substring(di+1),"o"===li[0]&&(Ft.ordinal=!0)),Ot){case"A":Ft.case=ze_UPPER;case"a":Ft.primary=Ce_LETTERS;break;case"I":Ft.case=ze_UPPER;case"i":Ft.primary=Ce_ROMAN;break;case"W":Ft.case=ze_UPPER,Ft.primary=Ce_WORDS;break;case"Ww":Ft.case=ze_TITLE,Ft.primary=Ce_WORDS;break;case"w":Ft.primary=Ce_WORDS;break;default:{let Gt=null,Rt=0,_n=0,It=[],rt=0;if(K(Ot).map(dn=>dn.codePointAt(0)).reverse().forEach(dn=>{let Yn=!1;for(let Ti=0;Ti<st.length;Ti++){const Di=st[Ti];if(dn>=Di&&dn<=Di+9){if(Yn=!0,Rt++,rt++,null===Gt)Gt=Di;else if(Di!==Gt)throw{code:"D3131"};break}}Yn||(35===dn?(rt++,_n++):It.push({position:rt,character:String.fromCodePoint(dn)}))}),Rt>0){Ft.primary=Ce_DECIMAL,Ft.zeroCode=Gt,Ft.mandatoryDigits=Rt,Ft.optionalDigits=_n;const Yn=function(Ti){if(0===Ti.length)return 0;const Di=Ti[0].character;for(let Ds=1;Ds<Ti.length;Ds++)if(Ti[Ds].character!==Di)return 0;const us=Ti.map(Ds=>Ds.position),vs=function(Ds,nr){return 0===nr?Ds:vs(nr,Ds%nr)},Hr=us.reduce(vs);for(let Ds=1;Ds<=us.length;Ds++)if(-1===us.indexOf(Ds*Hr))return 0;return Hr}(It);Yn>0?(Ft.regular=!0,Ft.groupingSeparators={position:Yn,character:It[0].character}):(Ft.regular=!1,Ft.groupingSeparators=It)}else Ft.primary=Ce_SEQUENCE,Ft.token=Ot}}return Ft}const ut={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function Vt(Oe){var Ft=[];const Ot={type:"datetime",parts:Ft},li=function(Yn,Ti){if(Ti>Yn){let Di=Oe.substring(Yn,Ti);Di=Di.split("]]").join("]"),Ft.push({type:"literal",value:Di})}};for(var di=0,Gt=0;Gt<Oe.length;){if("["===Oe.charAt(Gt)){if("["===Oe.charAt(Gt+1)){li(di,Gt),Ft.push({type:"literal",value:"["}),di=Gt+=2;continue}if(li(di,Gt),-1===(Gt=Oe.indexOf("]",di=Gt)))throw{code:"D3135"};let Yn=Oe.substring(di+1,Gt);Yn=Yn.split(/\s+/).join("");var It,Rt={type:"marker",component:Yn.charAt(0)},_n=Yn.lastIndexOf(",");if(-1!==_n){const Ti=Yn.substring(_n+1),Di=Ti.indexOf("-");let us,vs;const Hr=function(nr){if(!(typeof nr>"u"||"*"===nr))return parseInt(nr)};-1===Di?us=Ti:(us=Ti.substring(0,Di),vs=Ti.substring(Di+1));const Ds={min:Hr(us),max:Hr(vs)};Rt.width=Ds,It=Yn.substring(1,_n)}else It=Yn.substring(1);if(1===It.length)Rt.presentation1=It;else if(It.length>1){var rt=It.charAt(It.length-1);-1!=="atco".indexOf(rt)?(Rt.presentation2=rt,"o"===rt&&(Rt.ordinal=!0),Rt.presentation1=It.substring(0,It.length-1)):Rt.presentation1=It}else Rt.presentation1=ut[Rt.component];if(typeof Rt.presentation1>"u")throw{code:"D3132",value:Rt.component};if("n"===Rt.presentation1[0])Rt.names=ze_LOWER;else if("N"===Rt.presentation1[0])Rt.names="n"===Rt.presentation1[1]?ze_TITLE:ze_UPPER;else if(-1!=="YMDdFWwXxHhmsf".indexOf(Rt.component)){var lt=Rt.presentation1;if(Rt.presentation2&&(lt+=";"+Rt.presentation2),Rt.integerFormat=bt(lt),Rt.width&&void 0!==Rt.width.min&&Rt.integerFormat.mandatoryDigits<Rt.width.min&&(Rt.integerFormat.mandatoryDigits=Rt.width.min),-1!=="YMD".indexOf(Rt.component))if(Rt.n=-1,Rt.width&&void 0!==Rt.width.max)Rt.n=Rt.width.max,Rt.integerFormat.mandatoryDigits=Rt.n;else{var dn=Rt.integerFormat.mandatoryDigits+Rt.integerFormat.optionalDigits;dn>=2&&(Rt.n=dn)}}("Z"===Rt.component||"z"===Rt.component)&&(Rt.integerFormat=bt(Rt.presentation1)),Ft.push(Rt),di=Gt+1}Gt++}return li(di,Gt),Ot}const on=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ct=["January","February","March","April","May","June","July","August","September","October","November","December"],rn=864e5,Qt=function(Oe){const Ft=Date.UTC(Oe.year,Oe.month);var Ot=new Date(Ft).getUTCDay();return 0===Ot&&(Ot=7),Ot>4?Ft+(8-Ot)*rn:Ft-(Ot-1)*rn},Ht=function(Oe,Ft){return{year:Oe,month:Ft,nextMonth:function(){return 11===Ft?Ht(Oe+1,0):Ht(Oe,Ft+1)},previousMonth:function(){return 0===Ft?Ht(Oe-1,11):Ht(Oe,Ft-1)},nextYear:function(){return Ht(Oe+1,Ft)},previousYear:function(){return Ht(Oe-1,Ft)}}},Qn=function(Oe,Ft){return(Ft-Oe)/(7*rn)+1},en=(Oe,Ft)=>{let Ot;switch(Ft){case"Y":Ot=Oe.getUTCFullYear();break;case"M":Ot=Oe.getUTCMonth()+1;break;case"D":Ot=Oe.getUTCDate();break;case"d":Ot=(Date.UTC(Oe.getUTCFullYear(),Oe.getUTCMonth(),Oe.getUTCDate())-Date.UTC(Oe.getUTCFullYear(),0))/rn+1;break;case"F":Ot=Oe.getUTCDay(),0===Ot&&(Ot=7);break;case"W":{const li=Ht(Oe.getUTCFullYear(),0),di=Qt(li),Gt=Date.UTC(li.year,Oe.getUTCMonth(),Oe.getUTCDate());let Rt=Qn(di,Gt);if(Rt>52)Gt>=Qt(li.nextYear())&&(Rt=1);else if(Rt<1){const _n=Qt(li.previousYear());Rt=Qn(_n,Gt)}Ot=Math.floor(Rt);break}case"w":{const li=Ht(Oe.getUTCFullYear(),Oe.getUTCMonth()),di=Qt(li),Gt=Date.UTC(li.year,li.month,Oe.getUTCDate());let Rt=Qn(di,Gt);if(Rt>4)Gt>=Qt(li.nextMonth())&&(Rt=1);else if(Rt<1){const _n=Qt(li.previousMonth());Rt=Qn(_n,Gt)}Ot=Math.floor(Rt);break}case"X":{const li=Ht(Oe.getUTCFullYear(),0),di=Qt(li),Gt=Qt(li.nextYear()),Rt=Oe.getTime();Ot=Rt<di?li.year-1:Rt>=Gt?li.year+1:li.year;break}case"x":{const li=Ht(Oe.getUTCFullYear(),Oe.getUTCMonth()),di=Qt(li),Gt=li.nextMonth(),Rt=Qt(Gt),_n=Oe.getTime();Ot=_n<di?li.previousMonth().month+1:_n>=Rt?Gt.month+1:li.month+1;break}case"H":Ot=Oe.getUTCHours();break;case"h":Ot=Oe.getUTCHours(),Ot%=12,0===Ot&&(Ot=12);break;case"P":Ot=Oe.getUTCHours()>=12?"pm":"am";break;case"m":Ot=Oe.getUTCMinutes();break;case"s":Ot=Oe.getUTCSeconds();break;case"f":Ot=Oe.getUTCMilliseconds();break;case"Z":case"z":break;case"C":case"E":Ot="ISO"}return Ot};let Sn=null;function Pn(Oe,Ft,Ot){var li=0,di=0;if(typeof Ot<"u"){const lt=parseInt(Ot);li=Math.floor(lt/100),di=lt%100}let Rt;typeof Ft>"u"?(null===Sn&&(Sn=Vt("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),Rt=Sn):Rt=Vt(Ft);const It=new Date(Oe+60*(60*li+di)*1e3);let rt="";return Rt.parts.forEach(function(lt){rt+="literal"===lt.type?lt.value:function(lt,dn){var Yn=en(lt,dn.component);if(-1!=="YMDdFWwXxHhms".indexOf(dn.component))if("Y"===dn.component&&-1!==dn.n&&(Yn%=Math.pow(10,dn.n)),dn.names){if("M"===dn.component||"x"===dn.component)Yn=Ct[Yn-1];else{if("F"!==dn.component)throw{code:"D3133",value:dn.component};Yn=on[Yn]}dn.names===ze_UPPER?Yn=Yn.toUpperCase():dn.names===ze_LOWER&&(Yn=Yn.toLowerCase()),dn.width&&Yn.length>dn.width.max&&(Yn=Yn.substring(0,dn.width.max))}else Yn=dt(Yn,dn.integerFormat);else if("f"===dn.component)Yn=dt(Yn,dn.integerFormat);else if("Z"===dn.component||"z"===dn.component){const Ti=100*li+di;if(dn.integerFormat.regular)Yn=dt(Ti,dn.integerFormat);else{const Di=dn.integerFormat.mandatoryDigits;if(1===Di||2===Di)Yn=dt(li,dn.integerFormat),0!==di&&(Yn+=":"+ee(di,"00"));else{if(3!==Di&&4!==Di)throw{code:"D3134",value:Di};Yn=dt(Ti,dn.integerFormat)}}Ti>=0&&(Yn="+"+Yn),"z"===dn.component&&(Yn="GMT"+Yn),0===Ti&&"t"===dn.presentation2&&(Yn="Z")}return Yn}(It,lt)}),rt}function xt(Oe){var Ft={};if("datetime"===Oe.type)Ft.type="datetime",Ft.parts=Oe.parts.map(function(Ot){var li={};if("literal"===Ot.type)li.regex=Ot.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if("Z"===Ot.component||"z"===Ot.component){let Gt;Array.isArray(Ot.integerFormat.groupingSeparators)||(Gt=Ot.integerFormat.groupingSeparators),li.regex="","z"===Ot.component&&(li.regex="GMT"),li.regex+="[-+][0-9]+",Gt&&(li.regex+=Gt.character+"[0-9]+"),li.parse=function(Rt){"z"===Ot.component&&(Rt=Rt.substring(3));let _n=0,It=0;return Gt?(_n=Number.parseInt(Rt.substring(0,Rt.indexOf(Gt.character))),It=Number.parseInt(Rt.substring(Rt.indexOf(Gt.character)+1))):Rt.length-1<=2?_n=Number.parseInt(Rt):(_n=Number.parseInt(Rt.substring(0,3)),It=Number.parseInt(Rt.substring(3))),60*_n+It}}else if(Ot.integerFormat)Ot.integerFormat.n=Ot.n,li=xt(Ot.integerFormat);else{li.regex="[a-zA-Z]+";var di={};if("M"===Ot.component||"x"===Ot.component)Ct.forEach(function(Gt,Rt){Ot.width&&Ot.width.max?di[Gt.substring(0,Ot.width.max)]=Rt+1:di[Gt]=Rt+1});else if("F"===Ot.component)on.forEach(function(Gt,Rt){Rt>0&&(Ot.width&&Ot.width.max?di[Gt.substring(0,Ot.width.max)]=Rt:di[Gt]=Rt)});else{if("P"!==Ot.component)throw{code:"D3133",value:Ot.component};di={am:0,AM:0,pm:1,PM:1}}li.parse=function(Gt){return di[Gt]}}return li.component=Ot.component,li});else{Ft.type="integer";const Ot=Oe.case===ze_UPPER;let li;switch(li=Oe.n&&Oe.n>0?0===Oe.optionalDigits?`{${Oe.n}}`:`{${Oe.n-Oe.optionalDigits},${Oe.n}}`:"+",Oe.primary){case Ce_LETTERS:Ft.regex=Ot?"[A-Z]+":"[a-z]+",Ft.parse=function(di){return function L(Oe,Ft){for(var Ot=Ft.charCodeAt(0),li=0,di=0;di<Oe.length;di++)li+=(Oe.charCodeAt(Oe.length-di-1)-Ot+1)*Math.pow(26,di);return li}(di,Ot?"A":"a")};break;case Ce_ROMAN:Ft.regex=Ot?"[MDCLXVI]+":"[mdclxvi]+",Ft.parse=function(di){return function Ae(Oe){for(var Ft=0,Ot=1,li=Oe.length-1;li>=0;li--){const Gt=Le[Oe[li]];Gt<Ot?Ft-=Gt:(Ot=Gt,Ft+=Gt)}return Ft}(Ot?di:di.toUpperCase())};break;case Ce_WORDS:Ft.regex="(?:"+Object.keys(_e).concat("and","[\\-, ]").join("|")+")+",Ft.parse=function(di){return function Q(Oe){const Ot=Oe.split(/,\s|\sand\s|[\s\\-]/).map(Gt=>_e[Gt]);let li=[0];return Ot.forEach(Gt=>{if(Gt<100){let Rt=li.pop();Rt>=1e3&&(li.push(Rt),Rt=0),li.push(Rt+Gt)}else li.push(li.pop()*Gt)}),li.reduce((Gt,Rt)=>Gt+Rt,0)}(di.toLowerCase())};break;case Ce_DECIMAL:Ft.regex=`[0-9]${li}`,Oe.ordinal&&(Ft.regex+="(?:th|st|nd|rd)"),Ft.parse=function(di){let Gt=di;return Oe.ordinal&&(Gt=di.substring(0,di.length-2)),Oe.regular?Gt=Gt.split(",").join(""):Oe.groupingSeparators.forEach(Rt=>{Gt=Gt.split(Rt.character).join("")}),48!==Oe.zeroCode&&(Gt=Gt.split("").map(Rt=>String.fromCodePoint(Rt.codePointAt(0)-Oe.zeroCode+48)).join("")),parseInt(Gt)};break;case Ce_SEQUENCE:throw{code:"D3130",value:Oe.token}}}return Ft}function Gn(Oe,Ft){const li=xt(Vt(Ft)),di="^"+li.parts.map(It=>"("+It.regex+")").join("")+"$";var Rt=new RegExp(di,"i").exec(Oe);if(null!==Rt){const Di={};for(let D=1;D<Rt.length;D++){const H=li.parts[D-1];H.parse&&(Di[H.component]=H.parse(Rt[D]))}if(0===Object.getOwnPropertyNames(Di).length)return;let us=0;const vs=D=>{us<<=1,us+=D?1:0},Hr=D=>!(~D&us||!(D&us));"YXMxWwdD".split("").forEach(D=>vs(Di[D]));const nr=!Hr(161)&&Hr(130),fr=Hr(84),y=!fr&&Hr(72);us=0,"PHhmsf".split("").forEach(D=>vs(Di[D]));const d=!Hr(23)&&Hr(47),k=this.environment.timestamp;let N=!1,z=!1;if(((nr?"YD":fr?"XxwF":y?"XWF":"YMD")+(d?"Phmsf":"Hmsf")).split("").forEach(D=>{if(typeof Di[D]>"u")N?(Di[D]=-1!=="MDd".indexOf(D)?1:0,z=!0):Di[D]=en(k,D);else if(N=!0,z)throw{code:"D3136"}}),Di.M>0?Di.M-=1:Di.M=0,nr){const D=Date.UTC(Di.Y,0),Z=new Date(D+1e3*(Di.d-1)*60*60*24);Di.M=Z.getUTCMonth(),Di.D=Z.getUTCDate()}if(fr)throw{code:"D3136"};if(y)throw{code:"D3136"};d&&(Di.H=12===Di.h?0:Di.h,1===Di.P&&(Di.H+=12));var _n=Date.UTC(Di.Y,Di.M,Di.D,Di.H,Di.m,Di.s,Di.f);return(Di.Z||Di.z)&&(_n-=60*(Di.Z||Di.z)*1e3),_n}}var ri=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");return{formatInteger:ee,parseInteger:function Jt(Oe,Ft){if(!(typeof Oe>"u"))return xt(bt(Ft)).parse(Oe)},fromMillis:function St(Oe,Ft,Ot){if(!(typeof Oe>"u"))return Pn.call(this,Oe,Ft,Ot)},toMillis:function ni(Oe,Ft){if(!(typeof Oe>"u")){if(typeof Ft>"u"){if(!ri.test(Oe))throw{stack:(new Error).stack,code:"D3110",value:Oe};return Date.parse(Oe)}return Gn.call(this,Oe,Ft)}}}}();oe.exports=V},{"./utils":6}],2:[function(j,oe,re){(function(ie){(function(){var V=j("./utils");const K=(()=>{"use strict";var q=V.isNumeric,le=V.isArrayOfStrings,Te=V.isArrayOfNumbers,De=V.createSequence,xe=V.isSequence,_e=V.isFunction,Q=V.isLambda,Re=V.isIterable,Le=V.getFunctionArity,Ve=V.isDeepEqual,Ae=V.stringToArray;function st(R,Y,he){if(!(typeof R>"u")){var me=Ae(R),ve=me.length;return ve+Y<0&&(Y=0),typeof he<"u"?he<=0?"":me.slice(Y,Y>=0?Y+he:ve+Y+he).join(""):me.slice(Y).join("")}}function Ct(R){if(!(typeof R>"u"))return Ae(R).length}function*Ht(R,Y){var he=R.apply(this,[Y]);if(Re(he)&&(he=yield*he),he&&"number"!=typeof he.start&&"number"!==he.end&&!Array.isArray(he.groups)&&!_e(he.next))throw{code:"T1010",stack:(new Error).stack};return he}function _n(R,Y){var he;if(!(typeof R>"u")){if(Y){var me=R.toString().split("e");R=+(me[0]+"e"+(me[1]?+me[1]+Y:Y))}return he=Math.round(R),.5===Math.abs(he-R)&&1===Math.abs(he%2)&&(he-=1),Y&&(me=he.toString().split("e"),he=+(me[0]+"e"+(me[1]?+me[1]-Y:-Y))),Object.is(he,-0)&&(he=0),he}}function dn(R){if(!(typeof R>"u")){var Y=!1;return Array.isArray(R)?1===R.length?Y=dn(R[0]):R.length>1&&(Y=R.filter(function(me){return dn(me)}).length>0):"string"==typeof R?R.length>0&&(Y=!0):q(R)?0!==R&&(Y=!0):null!==R&&"object"==typeof R?Object.keys(R).length>0&&(Y=!0):"boolean"==typeof R&&!0===R&&(Y=!0),Y}}function Ti(R,Y,he,me){var ve=[Y],ge=Le(R);return ge>=2&&ve.push(he),ge>=3&&ve.push(me),ve}function y(R,Y){return typeof R>"u"?Y:typeof Y>"u"?R:(Array.isArray(R)||(R=De(R)),Array.isArray(Y)||(Y=[Y]),R.concat(Y))}return{sum:function Se(R){if(!(typeof R>"u")){var Y=0;return R.forEach(function(he){Y+=he}),Y}},count:function L(R){return typeof R>"u"?0:R.length},max:function ee(R){if(!(typeof R>"u"||0===R.length))return Math.max.apply(Math,R)},min:function Ce(R){if(!(typeof R>"u"||0===R.length))return Math.min.apply(Math,R)},average:function ze(R){if(!(typeof R>"u"||0===R.length)){var Y=0;return R.forEach(function(he){Y+=he}),Y/R.length}},string:function dt(R,Y=!1){if(!(typeof R>"u")){var he;if("string"==typeof R)he=R;else if(_e(R))he="";else{if("number"==typeof R&&!isFinite(R))throw{code:"D3001",value:R,stack:(new Error).stack};var me=Y?2:0;Array.isArray(R)&&R.outerWrapper&&(R=R[0]),he=JSON.stringify(R,function(ve,ge){return typeof ge<"u"&&null!==ge&&ge.toPrecision&&q(ge)?Number(ge.toPrecision(15)):ge&&_e(ge)?"":ge},me)}return he}},substring:st,substringBefore:function bt(R,Y){if(!(typeof R>"u")){var he=R.indexOf(Y);return he>-1?R.substr(0,he):R}},substringAfter:function ut(R,Y){if(!(typeof R>"u")){var he=R.indexOf(Y);return he>-1?R.substr(he+Y.length):R}},lowercase:function Vt(R){if(!(typeof R>"u"))return R.toLowerCase()},uppercase:function on(R){if(!(typeof R>"u"))return R.toUpperCase()},length:Ct,trim:function rn(R){if(!(typeof R>"u")){var Y=R.replace(/[ \t\n\r]+/gm," ");return" "===Y.charAt(0)&&(Y=Y.substring(1))," "===Y.charAt(Y.length-1)&&(Y=Y.substring(0,Y.length-1)),Y}},pad:function Qt(R,Y,he){if(!(typeof R>"u")){(typeof he>"u"||0===he.length)&&(he=" ");var me,ve=Math.abs(Y)-Ct(R);if(ve>0){var ge=new Array(ve+1).join(he);he.length>1&&(ge=st(ge,0,ve)),me=Y>0?R+ge:ge+R}else me=R;return me}},match:function*en(R,Y,he){if(!(typeof R>"u")){if(he<0)throw{stack:(new Error).stack,value:he,code:"D3040",index:3};var me=De();if(typeof he>"u"||he>0){var ve=0,ge=yield*Ht(Y,R);if(typeof ge<"u")for(;typeof ge<"u"&&(typeof he>"u"||ve<he);)me.push({match:ge.match,index:ge.start,groups:ge.groups}),ge=yield*Ht(ge.next),ve++}return me}},contains:function*Qn(R,Y){if(!(typeof R>"u"))return"string"==typeof Y?-1!==R.indexOf(Y):typeof(yield*Ht(Y,R))<"u"},replace:function*Sn(R,Y,he,me){if(!(typeof R>"u")){var ge;if(""===Y)throw{code:"D3010",stack:(new Error).stack,value:Y,index:2};if(me<0)throw{code:"D3011",stack:(new Error).stack,value:me,index:4};ge="string"==typeof he?function(nt){for(var pt="",gt=0,Wt=he.indexOf("$",gt);-1!==Wt&&gt<he.length;){pt+=he.substring(gt,Wt);var Lt=he.charAt(gt=Wt+1);if("$"===Lt)pt+="$",gt++;else if("0"===Lt)pt+=nt.match,gt++;else{var Bt;if(Bt=0===nt.groups.length?1:Math.floor(Math.log(nt.groups.length)*Math.LOG10E)+1,Wt=parseInt(he.substring(gt,gt+Bt),10),Bt>1&&Wt>nt.groups.length&&(Wt=parseInt(he.substring(gt,gt+Bt-1),10)),isNaN(Wt))pt+="$";else{if(nt.groups.length>0){var qt=nt.groups[Wt-1];typeof qt<"u"&&(pt+=qt)}gt+=Wt.toString().length}}Wt=he.indexOf("$",gt)}return pt+he.substring(gt)}:he;var pe="",de=0;if(typeof me>"u"||me>0){var Ee=0;if("string"==typeof Y){for(var ke=R.indexOf(Y,de);-1!==ke&&(typeof me>"u"||Ee<me);)pe+=R.substring(de,ke),pe+=he,Ee++,ke=R.indexOf(Y,de=ke+Y.length);pe+=R.substring(de)}else{var Xe=yield*Ht(Y,R);if(typeof Xe<"u"){for(;typeof Xe<"u"&&(typeof me>"u"||Ee<me);){pe+=R.substring(de,Xe.start);var je=ge.apply(this,[Xe]);if(Re(je)&&(je=yield*je),"string"!=typeof je)throw{code:"D3012",stack:(new Error).stack,value:je};pe+=je,de=Xe.start+Xe.match.length,Ee++,Xe=yield*Ht(Xe.next)}pe+=R.substring(de)}else pe=R}}else pe=R;return pe}},split:function*St(R,Y,he){if(!(typeof R>"u")){if(he<0)throw{code:"D3020",stack:(new Error).stack,value:he,index:3};var me=[];if(typeof he>"u"||he>0)if("string"==typeof Y)me=R.split(Y,he);else{var ve=0,ge=yield*Ht(Y,R);if(typeof ge<"u"){for(var pe=0;typeof ge<"u"&&(typeof he>"u"||ve<he);)me.push(R.substring(pe,ge.start)),pe=ge.end,ge=yield*Ht(ge.next),ve++;(typeof he>"u"||ve<he)&&me.push(R.substring(pe))}else me.push(R)}return me}},join:function Oe(R,Y){if(!(typeof R>"u"))return typeof Y>"u"&&(Y=""),R.join(Y)},formatNumber:function Ft(R,Y,he){if(!(typeof R>"u")){var ve={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"};typeof he<"u"&&Object.keys(he).forEach(function(Ai){ve[Ai]=he[Ai]});for(var ge=[],pe=ve["zero-digit"].charCodeAt(0),de=pe;de<pe+10;de++)ge.push(String.fromCharCode(de));var Ee=ge.concat([ve["decimal-separator"],ve["exponent-separator"],ve["grouping-separator"],ve.digit,ve["pattern-separator"]]),ke=Y.split(ve["pattern-separator"]);if(ke.length>2)throw{code:"D3080",stack:(new Error).stack};var pt=ke.map(function(Ai){var ws,wr,rs,ss,or=function(){for(var La,eo=0;eo<Ai.length;eo++)if(La=Ai.charAt(eo),-1!==Ee.indexOf(La)&&La!==ve["exponent-separator"])return Ai.substring(0,eo)}(),is=function(){for(var La,eo=Ai.length-1;eo>=0;eo--)if(La=Ai.charAt(eo),-1!==Ee.indexOf(La)&&La!==ve["exponent-separator"])return Ai.substring(eo+1)}(),_r=Ai.substring(or.length,Ai.length-is.length),Xr=Ai.indexOf(ve["exponent-separator"],or.length);-1===Xr||Xr>Ai.length-is.length?(ws=_r,wr=void 0):(ws=_r.substring(0,Xr),wr=_r.substring(Xr+1));var Kr=ws.indexOf(ve["decimal-separator"]);return-1===Kr?(rs=ws,ss=is):(rs=ws.substring(0,Kr),ss=ws.substring(Kr+1)),{prefix:or,suffix:is,activePart:_r,mantissaPart:ws,exponentPart:wr,integerPart:rs,fractionalPart:ss,subpicture:Ai}});pt.forEach(function(Ai){var or,is,_r=Ai.subpicture,ws=_r.indexOf(ve["decimal-separator"]);ws!==_r.lastIndexOf(ve["decimal-separator"])&&(or="D3081"),_r.indexOf(ve.percent)!==_r.lastIndexOf(ve.percent)&&(or="D3082"),_r.indexOf(ve["per-mille"])!==_r.lastIndexOf(ve["per-mille"])&&(or="D3083"),-1!==_r.indexOf(ve.percent)&&-1!==_r.indexOf(ve["per-mille"])&&(or="D3084");var wr=!1;for(is=0;is<Ai.mantissaPart.length;is++){var rs=Ai.mantissaPart.charAt(is);if(-1!==ge.indexOf(rs)||rs===ve.digit){wr=!0;break}}wr||(or="D3085"),-1!==Ai.activePart.split("").map(function(La){return-1===Ee.indexOf(La)?"p":"a"}).join("").indexOf("p")&&(or="D3086"),-1!==ws?(_r.charAt(ws-1)===ve["grouping-separator"]||_r.charAt(ws+1)===ve["grouping-separator"])&&(or="D3087"):Ai.integerPart.charAt(Ai.integerPart.length-1)===ve["grouping-separator"]&&(or="D3088"),-1!==_r.indexOf(ve["grouping-separator"]+ve["grouping-separator"])&&(or="D3089");var Xr=Ai.integerPart.indexOf(ve.digit);-1!==Xr&&Ai.integerPart.substring(0,Xr).split("").filter(function(La){return ge.indexOf(La)>-1}).length>0&&(or="D3090"),-1!==(Xr=Ai.fractionalPart.lastIndexOf(ve.digit))&&Ai.fractionalPart.substring(Xr).split("").filter(function(La){return ge.indexOf(La)>-1}).length>0&&(or="D3091");var Kr="string"==typeof Ai.exponentPart;if(Kr&&Ai.exponentPart.length>0&&(-1!==_r.indexOf(ve.percent)||-1!==_r.indexOf(ve["per-mille"]))&&(or="D3092"),Kr&&(0===Ai.exponentPart.length||Ai.exponentPart.split("").filter(function(La){return-1===ge.indexOf(La)}).length>0)&&(or="D3093"),or)throw{code:or,stack:(new Error).stack}});var Pe,We,Ye,we,gt=pt.map(function(Ai){var or=function(Ea,As){for(var B=[],Be=Ea.indexOf(ve["grouping-separator"]);-1!==Be;){var Mt=(As?Ea.substring(0,Be):Ea.substring(Be)).split("").filter(function(sn){return-1!==ge.indexOf(sn)||sn===ve.digit}).length;B.push(Mt),Be=Ai.integerPart.indexOf(ve["grouping-separator"],Be+1)}return B},is=or(Ai.integerPart),ws=function(Ea){if(0===Ea.length)return 0;for(var As=function(Mt,sn){return 0===sn?Mt:As(sn,Mt%sn)},B=Ea.reduce(As),Be=1;Be<=Ea.length;Be++)if(-1===Ea.indexOf(Be*B))return 0;return B}(is),wr=or(Ai.fractionalPart,!0),rs=Ai.integerPart.split("").filter(function(Ea){return-1!==ge.indexOf(Ea)}).length,ss=rs,Xr=Ai.fractionalPart.split(""),Kr=Xr.filter(function(Ea){return-1!==ge.indexOf(Ea)}).length,La=Xr.filter(function(Ea){return-1!==ge.indexOf(Ea)||Ea===ve.digit}).length,eo="string"==typeof Ai.exponentPart;0===rs&&0===La&&(eo?(Kr=1,La=1):rs=1),eo&&0===rs&&-1!==Ai.integerPart.indexOf(ve.digit)&&(rs=1),0===rs&&0===Kr&&(Kr=1);var Qi=0;return eo&&(Qi=Ai.exponentPart.split("").filter(function(Ea){return-1!==ge.indexOf(Ea)}).length),{integerPartGroupingPositions:is,regularGrouping:ws,minimumIntegerPartSize:rs,scalingFactor:ss,prefix:Ai.prefix,fractionalPartGroupingPositions:wr,minimumFactionalPartSize:Kr,maximumFactionalPartSize:La,minimumExponentSize:Qi,suffix:Ai.suffix,picture:Ai.subpicture}}),Wt=ve["minus-sign"],Lt=ve["zero-digit"],Bt=ve["decimal-separator"],qt=ve["grouping-separator"];if(1===gt.length&&(gt.push(JSON.parse(JSON.stringify(gt[0]))),gt[1].prefix=Wt+gt[1].prefix),We=-1!==(Pe=R>=0?gt[0]:gt[1]).picture.indexOf(ve.percent)?100*R:-1!==Pe.picture.indexOf(ve["per-mille"])?1e3*R:R,0===Pe.minimumExponentSize)Ye=We;else{var Ue=Math.pow(10,Pe.scalingFactor),ct=Math.pow(10,Pe.scalingFactor-1);for(Ye=We,we=0;Ye<ct;)Ye*=10,we-=1;for(;Ye>Ue;)Ye/=10,we+=1}var wt=function(Ai,or){var is=Math.abs(Ai).toFixed(or);return"0"!==Lt&&(is=is.split("").map(function(_r){return _r>="0"&&_r<="9"?ge[_r.charCodeAt(0)-48]:_r}).join("")),is},nn=wt(_n(Ye,Pe.maximumFactionalPartSize),Pe.maximumFactionalPartSize),On=nn.indexOf(".");for(-1===On?nn+=Bt:nn=nn.replace(".",Bt);nn.charAt(0)===Lt;)nn=nn.substring(1);for(;nn.charAt(nn.length-1)===Lt;)nn=nn.substring(0,nn.length-1);On=nn.indexOf(Bt);var jn=Pe.minimumIntegerPartSize-On,ii=Pe.minimumFactionalPartSize-(nn.length-On-1);if(nn=(jn>0?new Array(jn+1).join(Lt):"")+nn,nn+=ii>0?new Array(ii+1).join(Lt):"",On=nn.indexOf(Bt),Pe.regularGrouping>0)for(var Ci=Math.floor((On-1)/Pe.regularGrouping),yi=1;yi<=Ci;yi++)nn=[nn.slice(0,On-yi*Pe.regularGrouping),qt,nn.slice(On-yi*Pe.regularGrouping)].join("");else Pe.integerPartGroupingPositions.forEach(function(Ai){nn=[nn.slice(0,On-Ai),qt,nn.slice(On-Ai)].join(""),On++});if(On=nn.indexOf(Bt),Pe.fractionalPartGroupingPositions.forEach(function(Ai){nn=[nn.slice(0,Ai+On+1),qt,nn.slice(Ai+On+1)].join("")}),On=nn.indexOf(Bt),(-1===Pe.picture.indexOf(Bt)||On===nn.length-1)&&(nn=nn.substring(0,nn.length-1)),typeof we<"u"){var Ei=wt(we,0);(jn=Pe.minimumExponentSize-Ei.length)>0&&(Ei=new Array(jn+1).join(Lt)+Ei),nn=nn+ve["exponent-separator"]+(we<0?Wt:"")+Ei}return nn=Pe.prefix+nn+Pe.suffix}},formatBase:function Ot(R,Y){if(!(typeof R>"u")){if(R=_n(R),(Y=typeof Y>"u"?10:_n(Y))<2||Y>36)throw{code:"D3100",stack:(new Error).stack,value:Y};return R.toString(Y)}},number:function li(R){var Y;if(!(typeof R>"u")){if("number"==typeof R)Y=R;else if("string"==typeof R&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(R)&&!isNaN(parseFloat(R))&&isFinite(R))Y=parseFloat(R);else if(!0===R)Y=1;else{if(!1!==R)throw{code:"D3030",value:R,stack:(new Error).stack,index:1};Y=0}return Y}},floor:function Gt(R){if(!(typeof R>"u"))return Math.floor(R)},ceil:function Rt(R){if(!(typeof R>"u"))return Math.ceil(R)},round:_n,abs:function di(R){if(!(typeof R>"u"))return Math.abs(R)},sqrt:function It(R){if(!(typeof R>"u")){if(R<0)throw{stack:(new Error).stack,code:"D3060",index:1,value:R};return Math.sqrt(R)}},power:function rt(R,Y){var he;if(!(typeof R>"u")){if(he=Math.pow(R,Y),!isFinite(he))throw{stack:(new Error).stack,code:"D3061",index:1,value:R,exp:Y};return he}},random:function lt(){return Math.random()},boolean:dn,not:function Yn(R){if(!(typeof R>"u"))return!dn(R)},map:function*Di(R,Y){if(!(typeof R>"u")){for(var he=De(),me=0;me<R.length;me++){var ve=Ti(Y,R[me],me,R),ge=yield*Y.apply(this,ve);typeof ge<"u"&&he.push(ge)}return he}},zip:function Hr(){for(var R=[],Y=Array.prototype.slice.call(arguments),he=Math.min.apply(Math,Y.map(function(ge){return Array.isArray(ge)?ge.length:0})),me=0;me<he;me++){var ve=Y.map(ge=>ge[me]);R.push(ve)}return R},filter:function*us(R,Y){if(!(typeof R>"u")){for(var he=De(),me=0;me<R.length;me++){var ve=R[me],ge=Ti(Y,ve,me,R);dn(yield*Y.apply(this,ge))&&he.push(ve)}return he}},single:function*vs(R,Y){if(!(typeof R>"u")){for(var me,he=!1,ve=0;ve<R.length;ve++){var ge=R[ve],pe=!0;if(typeof Y<"u"){var de=Ti(Y,ge,ve,R);pe=dn(yield*Y.apply(this,de))}if(pe){if(he)throw{stack:(new Error).stack,code:"D3138",index:ve};me=ge,he=!0}}if(!he)throw{stack:(new Error).stack,code:"D3139"};return me}},foldLeft:function*Ds(R,Y,he){if(!(typeof R>"u")){var me,ge,ve=Le(Y);if(ve<2)throw{stack:(new Error).stack,code:"D3050",index:1};for(typeof he>"u"&&R.length>0?(me=R[0],ge=1):(me=he,ge=0);ge<R.length;){var pe=[me,R[ge]];ve>=3&&pe.push(ge),ve>=4&&pe.push(R),me=yield*Y.apply(this,pe),ge++}return me}},sift:function*$(R,Y){var he={};for(var me in R){var ve=R[me],ge=Ti(Y,ve,me,R);dn(yield*Y.apply(this,ge))&&(he[me]=ve)}return 0===Object.keys(he).length&&(he=void 0),he},keys:function nr(R){var Y=De();if(Array.isArray(R)){var he={};R.forEach(function(me){nr(me).forEach(function(ge){he[ge]=!0})}),Y=nr(he)}else null!==R&&"object"==typeof R&&!Q(R)&&Object.keys(R).forEach(me=>Y.push(me));return Y},lookup:function fr(R,Y){var he;if(Array.isArray(R)){he=De();for(var me=0;me<R.length;me++){var ve=fr(R[me],Y);typeof ve<"u"&&(Array.isArray(ve)?ve.forEach(ge=>he.push(ge)):he.push(ve))}}else null!==R&&"object"==typeof R&&(he=R[Y]);return he},append:y,exists:function l(R){return!(typeof R>"u")},spread:function d(R){var Y=De();if(Array.isArray(R))R.forEach(function(ve){Y=y(Y,d(ve))});else if(null===R||"object"!=typeof R||Q(R))Y=R;else for(var he in R){var me={};me[he]=R[he],Y.push(me)}return Y},merge:function _(R){if(!(typeof R>"u")){var Y={};return R.forEach(function(he){for(var me in he)Y[me]=he[me]}),Y}},reverse:function C(R){if(!(typeof R>"u")){if(R.length<=1)return R;for(var Y=R.length,he=new Array(Y),me=0;me<Y;me++)he[Y-me-1]=R[me];return he}},each:function*S(R,Y){var he=De();for(var me in R){var ve=Ti(Y,R[me],me,R),ge=yield*Y.apply(this,ve);typeof ge<"u"&&he.push(ge)}return he},error:function k(R){throw{code:"D3137",stack:(new Error).stack,message:R||"$error() function evaluated"}},assert:function N(R,Y){if(!R)throw{code:"D3141",stack:(new Error).stack,message:Y||"$assert() statement failed"}},type:function z(R){if(void 0!==R)return null===R?"null":q(R)?"number":"string"==typeof R?"string":"boolean"==typeof R?"boolean":Array.isArray(R)?"array":_e(R)?"function":"object"},sort:function*D(R,Y){if(!(typeof R>"u")){if(R.length<=1)return R;var he;if(typeof Y>"u"){if(!Te(R)&&!le(R))throw{stack:(new Error).stack,code:"D3070",index:1};he=function*(pe,de){return pe>de}}else he=Y;var ve=function*(pe){if(!Array.isArray(pe)||pe.length<=1)return pe;var de=Math.floor(pe.length/2),Ee=pe.slice(0,de),ke=pe.slice(de);return Ee=yield*ve(Ee),ke=yield*ve(ke),yield*function*(pe,de){var Ee=function*(Xe,je,nt){0===je.length?Array.prototype.push.apply(Xe,nt):0===nt.length?Array.prototype.push.apply(Xe,je):(yield*he(je[0],nt[0]))?(Xe.push(nt[0]),yield*Ee(Xe,je,nt.slice(1))):(Xe.push(je[0]),yield*Ee(Xe,je.slice(1),nt))},ke=[];return yield*Ee(ke,pe,de),ke}(Ee,ke)};return yield*ve(R)}},shuffle:function H(R){if(!(typeof R>"u")){if(R.length<=1)return R;for(var Y=new Array(R.length),he=0;he<R.length;he++){var me=Math.floor(Math.random()*(he+1));he!==me&&(Y[he]=Y[me]),Y[me]=R[he]}return Y}},distinct:function Z(R){if(!(typeof R>"u")){if(!Array.isArray(R)||R.length<=1)return R;for(var Y=xe(R)?De():[],he=0;he<R.length;he++){for(var me=R[he],ve=!1,ge=0;ge<Y.length;ge++)if(Ve(me,Y[ge])){ve=!0;break}ve||Y.push(me)}return Y}},base64encode:function Pn(R){if(!(typeof R>"u"))return(typeof window<"u"?window.btoa:function(he){return new ie.Buffer.from(he,"binary").toString("base64")})(R)},base64decode:function xt(R){if(!(typeof R>"u"))return(typeof window<"u"?window.atob:function(he){return new ie.Buffer.from(he,"base64").toString("binary")})(R)},encodeUrlComponent:function Jt(R){if(!(typeof R>"u")){var Y;try{Y=encodeURIComponent(R)}catch{throw{code:"D3140",stack:(new Error).stack,value:R,functionName:"encodeUrlComponent"}}return Y}},encodeUrl:function Gn(R){if(!(typeof R>"u")){var Y;try{Y=encodeURI(R)}catch{throw{code:"D3140",stack:(new Error).stack,value:R,functionName:"encodeUrl"}}return Y}},decodeUrlComponent:function ri(R){if(!(typeof R>"u")){var Y;try{Y=decodeURIComponent(R)}catch{throw{code:"D3140",stack:(new Error).stack,value:R,functionName:"decodeUrlComponent"}}return Y}},decodeUrl:function ni(R){if(!(typeof R>"u")){var Y;try{Y=decodeURI(R)}catch{throw{code:"D3140",stack:(new Error).stack,value:R,functionName:"decodeUrl"}}return Y}}}})();oe.exports=K}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./utils":6}],3:[function(j,oe,re){var ie=j("./datetime"),V=j("./functions"),K=j("./utils"),q=j("./parser"),le=j("./signature"),Te=function(){"use strict";var De=K.isNumeric,xe=K.isArrayOfStrings,_e=K.isArrayOfNumbers,Q=K.createSequence,Re=K.isSequence,Le=K.isFunction,Ve=K.isLambda,Ae=K.isIterable,Se=K.getFunctionArity,L=K.isDeepEqual,ee=S(null);function*Ce(D,H,Z){var $,R=Z.lookup("__evaluate_entry");switch(R&&R(D,H,Z),D.type){case"path":$=yield*function*ze(D,H,Z){var $;$=Array.isArray(H)&&"variable"!==D.steps[0].type?H:Q(H);for(var R,Y=!1,he=void 0,me=0;me<D.steps.length;me++){var ve=D.steps[me];if(ve.tuple&&(Y=!0),0===me&&ve.consarray?R=yield*Ce(ve,$,Z):Y?he=yield*ut(ve,$,he,Z):R=yield*st(ve,$,Z,me===D.steps.length-1),!Y&&(typeof R>"u"||0===R.length))break;typeof ve.focus>"u"&&($=R)}if(Y)if(D.tuple)R=he;else for(R=Q(),me=0;me<he.length;me++)R.push(he[me]["@"]);return D.keepSingletonArray&&(Array.isArray(R)&&R.cons&&!R.sequence&&(R=Q(R)),R.keepSingleton=!0),D.hasOwnProperty("group")&&(R=yield*Oe(D.group,Y?he:R,Z)),R}(D,H,Z);break;case"binary":$=yield*function*on(D,H,Z){var $,R=yield*Ce(D.lhs,H,Z),Y=D.value,he=function*(){return yield*Ce(D.rhs,H,Z)};if("and"===Y||"or"===Y)try{return yield*function*ri(D,H,Z){var $,R=ni(D);switch(Z){case"and":$=R&&ni(yield*H());break;case"or":$=R||ni(yield*H())}return $}(R,he,Y)}catch(ve){throw ve.position=D.position,ve.token=Y,ve}var me=yield*he();try{switch(Y){case"+":case"-":case"*":case"/":case"%":$=function Pn(D,H,Z){var $;if(typeof D<"u"&&!De(D))throw{code:"T2001",stack:(new Error).stack,value:D};if(typeof H<"u"&&!De(H))throw{code:"T2002",stack:(new Error).stack,value:H};if(typeof D>"u"||typeof H>"u")return $;switch(Z){case"+":$=D+H;break;case"-":$=D-H;break;case"*":$=D*H;break;case"/":$=D/H;break;case"%":$=D%H}return $}(R,me,Y);break;case"=":case"!=":$=function xt(D,H,Z){var $;if(void 0===D||void 0===H)return!1;switch(Z){case"=":$=L(D,H);break;case"!=":$=!L(D,H)}return $}(R,me,Y);break;case"<":case"<=":case">":case">=":$=function Jt(D,H,Z){var $,R=typeof D,Y=typeof H;if("undefined"!==R&&"string"!==R&&"number"!==R||"undefined"!==Y&&"string"!==Y&&"number"!==Y)throw{code:"T2010",stack:(new Error).stack,value:"string"===R||"number"===R?H:D};if("undefined"!==R&&"undefined"!==Y){if(R!==Y)throw{code:"T2009",stack:(new Error).stack,value:D,value2:H};switch(Z){case"<":$=D<H;break;case"<=":$=D<=H;break;case">":$=D>H;break;case">=":$=D>=H}return $}}(R,me,Y);break;case"&":$=function St(D,H){var $="",R="";return typeof D<"u"&&($=V.string(D)),typeof H<"u"&&(R=V.string(H)),$.concat(R)}(R,me);break;case"..":$=function Ot(D,H){var Z;if(typeof D<"u"&&!Number.isInteger(D))throw{code:"T2003",stack:(new Error).stack,value:D};if(typeof H<"u"&&!Number.isInteger(H))throw{code:"T2004",stack:(new Error).stack,value:H};if(typeof D>"u"||typeof H>"u"||D>H)return Z;var $=H-D+1;if($>1e7)throw{code:"D2014",stack:(new Error).stack,value:$};Z=new Array($);for(var R=D,Y=0;R<=H;R++,Y++)Z[Y]=R;return Z.sequence=!0,Z}(R,me);break;case"in":$=function Gn(D,H){var Z=!1;if(typeof D>"u"||typeof H>"u")return!1;Array.isArray(H)||(H=[H]);for(var $=0;$<H.length;$++)if(H[$]===D){Z=!0;break}return Z}(R,me)}}catch(ve){throw ve.position=D.position,ve.token=Y,ve}return $}(D,H,Z);break;case"unary":$=yield*function*Ct(D,H,Z){var $;switch(D.value){case"-":if(typeof($=yield*Ce(D.expression,H,Z))>"u")$=void 0;else{if(!De($))throw{code:"D1002",stack:(new Error).stack,position:D.position,token:D.value,value:$};$=-$}break;case"[":$=[];for(var R=0;R<D.expressions.length;R++){var Y=D.expressions[R],he=yield*Ce(Y,H,Z);typeof he<"u"&&("["===Y.value?$.push(he):$=V.append($,he))}D.consarray&&Object.defineProperty($,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":$=yield*Oe(D,H,Z)}return $}(D,H,Z);break;case"name":$=function rn(D,H,Z){return V.lookup(H,D.value)}(D,H);break;case"string":case"number":case"value":$=function Qt(D){return D.value}(D);break;case"wildcard":$=function Ht(D,H){var Z=Q();return Array.isArray(H)&&H.outerWrapper&&H.length>0&&(H=H[0]),null!==H&&"object"==typeof H&&Object.keys(H).forEach(function($){var R=H[$];Array.isArray(R)?(R=Qn(R),Z=V.append(Z,R)):Z.push(R)}),Z}(0,H);break;case"descendant":$=function en(D,H){var Z,$=Q();return typeof H<"u"&&(Sn(H,$),Z=1===$.length?$[0]:$),Z}(0,H);break;case"parent":$=Z.lookup(D.slot.label);break;case"condition":$=yield*function*di(D,H,Z){var $,R=yield*Ce(D.condition,H,Z);return V.boolean(R)?$=yield*Ce(D.then,H,Z):typeof D.else<"u"&&($=yield*Ce(D.else,H,Z)),$}(D,H,Z);break;case"block":$=yield*function*Gt(D,H,Z){for(var $,R=S(Z),Y=0;Y<D.expressions.length;Y++)$=yield*Ce(D.expressions[Y],H,R);return $}(D,H,Z);break;case"bind":$=yield*function*li(D,H,Z){var $=yield*Ce(D.rhs,H,Z);return Z.bind(D.lhs.value,$),$}(D,H,Z);break;case"regex":$=function Rt(D){var H=new z.RegexEngine(D.value),Z=function($,R){var Y;H.lastIndex=R||0;var he=H.exec($);if(null!==he){if(Y={match:he[0],start:he.index,end:he.index+he[0].length,groups:[]},he.length>1)for(var me=1;me<he.length;me++)Y.groups.push(he[me]);Y.next=function(){if(!(H.lastIndex>=$.length)){var ve=Z($,H.lastIndex);if(ve&&""===ve.match)throw{code:"D1004",stack:(new Error).stack,position:D.position,value:D.value.source};return ve}}}return Y};return Z}(D);break;case"function":$=yield*Yn(D,H,Z);break;case"variable":$=function _n(D,H,Z){return""===D.value?H&&H.outerWrapper?H[0]:H:Z.lookup(D.value)}(D,H,Z);break;case"lambda":$=function us(D,H,Z){var $={_jsonata_lambda:!0,input:H,environment:Z,arguments:D.arguments,signature:D.signature,body:D.body};return!0===D.thunk&&($.thunk=!0),$.apply=function*(R,Y){return yield*Ti($,Y,H,R.environment)},$}(D,H,Z);break;case"partial":$=yield*function*vs(D,H,Z){for(var $,R=[],Y=0;Y<D.arguments.length;Y++){var he=D.arguments[Y];R.push("operator"===he.type&&"?"===he.value?he:yield*Ce(he,H,Z))}var me=yield*Ce(D.procedure,H,Z);if(typeof me>"u"&&"path"===D.procedure.type&&Z.lookup(D.procedure.steps[0].value))throw{code:"T1007",stack:(new Error).stack,position:D.position,token:D.procedure.steps[0].value};if(Ve(me))$=nr(me,R);else if(me&&!0===me._jsonata_function)$=fr(me.implementation,R);else{if("function"!=typeof me)throw{code:"T1008",stack:(new Error).stack,position:D.position,token:"path"===D.procedure.type?D.procedure.steps[0].value:D.procedure.value};$=fr(me,R)}return $}(D,H,Z);break;case"apply":$=yield*function*dn(D,H,Z){var $,R=yield*Ce(D.lhs,H,Z);if("function"===D.rhs.type)$=yield*Yn(D.rhs,H,Z,{context:R});else{var Y=yield*Ce(D.rhs,H,Z);if(!Le(Y))throw{code:"T2006",stack:(new Error).stack,position:D.position,value:Y};if(Le(R)){var he=yield*Ce(lt,null,Z);$=yield*Ti(he,[R,Y],null,Z)}else $=yield*Ti(Y,[R],null,Z)}return $}(D,H,Z);break;case"transform":$=function rt(D,H,Z){return d(function*(R){if(!(typeof R>"u")){var Y=Z.lookup("clone");if(!Le(Y))throw{code:"T2013",stack:(new Error).stack,position:D.position};var he=yield*Ti(Y,[R],null,Z),me=yield*Ce(D.pattern,he,Z);if(typeof me<"u"){Array.isArray(me)||(me=[me]);for(var ve=0;ve<me.length;ve++){var ge=me[ve],pe=yield*Ce(D.update,ge,Z),de=typeof pe;if("undefined"!==de){if("object"!==de||null===pe||Array.isArray(pe))throw{code:"T2011",stack:(new Error).stack,position:D.update.position,value:pe};for(var Ee in pe)ge[Ee]=pe[Ee]}if(typeof D.delete<"u"){var ke=yield*Ce(D.delete,ge,Z);if(typeof ke<"u"){var Xe=ke;if(Array.isArray(ke)||(ke=[ke]),!xe(ke))throw{code:"T2012",stack:(new Error).stack,position:D.delete.position,value:Xe};for(var je=0;je<ke.length;je++)"object"==typeof ge&&null!==ge&&delete ge[ke[je]]}}}}return he}},"<(oa):o>")}(D,0,Z)}if(Z.async&&(typeof $>"u"||null===$||"function"!=typeof $.then)&&($=Promise.resolve($)),Z.async&&"function"==typeof $.then&&D.nextFunction&&"function"==typeof $[D.nextFunction]||($=yield $),Object.prototype.hasOwnProperty.call(D,"predicate"))for(var Y=0;Y<D.predicate.length;Y++)$=yield*Vt(D.predicate[Y].expr,$,Z);"path"!==D.type&&Object.prototype.hasOwnProperty.call(D,"group")&&($=yield*Oe(D.group,$,Z));var he=Z.lookup("__evaluate_exit");return he&&he(D,H,Z,$),$&&Re($)&&!$.tupleStream&&(D.keepArray&&($.keepSingleton=!0),0===$.length?$=void 0:1===$.length&&($=$.keepSingleton?$:$[0])),$}function dt(D,H){var Z=S(D);for(const $ in H)Z.bind($,H[$]);return Z}function*st(D,H,Z,$){var R;if("sort"===D.type)return R=yield*It(D,H,Z),D.stages&&(R=yield*bt(D.stages,R,Z)),R;R=Q();for(var Y=0;Y<H.length;Y++){var he=yield*Ce(D,H[Y],Z);if(D.stages)for(var me=0;me<D.stages.length;me++)he=yield*Vt(D.stages[me].expr,he,Z);typeof he<"u"&&R.push(he)}var ve=Q();return $&&1===R.length&&Array.isArray(R[0])&&!Re(R[0])?ve=R[0]:R.forEach(function(ge){!Array.isArray(ge)||ge.cons?ve.push(ge):ge.forEach(pe=>ve.push(pe))}),ve}function*bt(D,H,Z){for(var $=H,R=0;R<D.length;R++){var Y=D[R];switch(Y.type){case"filter":$=yield*Vt(Y.expr,$,Z);break;case"index":for(var he=0;he<$.length;he++)$[he][Y.value]=he}}return $}function*ut(D,H,Z,$){var R;if("sort"===D.type){if(Z)R=yield*It(D,Z,$);else{var Y=yield*It(D,H,$);(R=Q()).tupleStream=!0;for(var he=0;he<Y.length;he++){var me={"@":Y[he]};me[D.index]=he,R.push(me)}}return D.stages&&(R=yield*bt(D.stages,R,$)),R}(R=Q()).tupleStream=!0;var ve=$;void 0===Z&&(Z=H.map(Ee=>({"@":Ee})));for(var ge=0;ge<Z.length;ge++){ve=dt($,Z[ge]);var pe=yield*Ce(D,Z[ge]["@"],ve);if(typeof pe<"u"){Array.isArray(pe)||(pe=[pe]);for(var de=0;de<pe.length;de++)me={},Object.assign(me,Z[ge]),pe.tupleStream?Object.assign(me,pe[de]):(D.focus?(me[D.focus]=pe[de],me["@"]=Z[ge]["@"]):me["@"]=pe[de],D.index&&(me[D.index]=de),D.ancestor&&(me[D.ancestor.label]=Z[ge]["@"])),R.push(me)}}return D.stages&&(R=yield*bt(D.stages,R,$)),R}function*Vt(D,H,Z){var $=Q();if(H&&H.tupleStream&&($.tupleStream=!0),Array.isArray(H)||(H=Q(H)),"number"===D.type){var R=Math.floor(D.value);R<0&&(R=H.length+R),typeof(Y=H[R])<"u"&&(Array.isArray(Y)?$=Y:$.push(Y))}else for(R=0;R<H.length;R++){var Y,he=Y=H[R],me=Z;H.tupleStream&&(he=Y["@"],me=dt(Z,Y));var ve=yield*Ce(D,he,me);De(ve)&&(ve=[ve]),_e(ve)?ve.forEach(function(pe){var de=Math.floor(pe);de<0&&(de=H.length+de),de===R&&$.push(Y)}):V.boolean(ve)&&$.push(Y)}return $}function Qn(D,H){return typeof H>"u"&&(H=[]),Array.isArray(D)?D.forEach(function(Z){Qn(Z,H)}):H.push(D),H}function Sn(D,H){Array.isArray(D)||H.push(D),Array.isArray(D)?D.forEach(function(Z){Sn(Z,H)}):null!==D&&"object"==typeof D&&Object.keys(D).forEach(function(Z){Sn(D[Z],H)})}function ni(D){var H=V.boolean(D);return!(typeof H>"u")&&H}function*Oe(D,H,Z){var $={},R={},Y=!(!H||!H.tupleStream);Array.isArray(H)||(H=Q(H)),0===H.length&&H.push(void 0);for(var he=0;he<H.length;he++)for(var me=H[he],ve=Y?dt(Z,me):Z,ge=0;ge<D.lhs.length;ge++){var pe=D.lhs[ge],de=yield*Ce(pe[0],Y?me["@"]:me,ve);if("string"!=typeof de&&void 0!==de)throw{code:"T1003",stack:(new Error).stack,position:D.position,value:de};if(void 0!==de){var Ee={data:me,exprIndex:ge};if(R.hasOwnProperty(de)){if(R[de].exprIndex!==ge)throw{code:"D1009",stack:(new Error).stack,position:D.position,value:de};R[de].data=V.append(R[de].data,me)}else R[de]=Ee}}for(de in R){var ke=(Ee=R[de]).data;if(ve=Z,Y){var Xe=Ft(Ee.data);ke=Xe["@"],delete Xe["@"],ve=dt(Z,Xe)}var je=yield*Ce(D.lhs[Ee.exprIndex][1],ke,ve);typeof je<"u"&&($[de]=je)}return $}function Ft(D){if(!Array.isArray(D))return D;var H={};Object.assign(H,D[0]);for(var Z=1;Z<D.length;Z++)for(const $ in D[Z])H[$]=V.append(H[$],D[Z][$]);return H}function*It(D,H,Z){var R=H,Y=!!H.tupleStream,me={environment:Z,input:H};return yield*V.sort.apply(me,[R,function*(ve,ge){for(var pe=0,de=0;0===pe&&de<D.terms.length;de++){var Ee=D.terms[de],ke=ve,Xe=Z;Y&&(ke=ve["@"],Xe=dt(Z,ve));var je=yield*Ce(Ee.expression,ke,Xe);ke=ge,Xe=Z,Y&&(ke=ge["@"],Xe=dt(Z,ge));var nt=yield*Ce(Ee.expression,ke,Xe),pt=typeof je,gt=typeof nt;if("undefined"!==pt)if("undefined"!==gt){if("string"!==pt&&"number"!==pt||"string"!==gt&&"number"!==gt)throw{code:"T2008",stack:(new Error).stack,position:D.position,value:"string"===pt||"number"===pt?nt:je};if(pt!==gt)throw{code:"T2007",stack:(new Error).stack,position:D.position,value:je,value2:nt};je!==nt&&(pe=je<nt?-1:1,!0===Ee.descending&&(pe=-pe))}else pe=-1;else pe="undefined"===gt?0:1}return 1===pe}])}var lt=q("function($f, $g) { function($x){ $g($f($x)) } }");function*Yn(D,H,Z,$){var R,Y=yield*Ce(D.procedure,H,Z);if(typeof Y>"u"&&"path"===D.procedure.type&&Z.lookup(D.procedure.steps[0].value))throw{code:"T1005",stack:(new Error).stack,position:D.position,token:D.procedure.steps[0].value};var he=[];typeof $<"u"&&he.push($.context);for(var me=0;me<D.arguments.length;me++){const ge=yield*Ce(D.arguments[me],H,Z);if(Le(ge)){const pe=function*(...de){return yield*Ti(ge,de,null,Z)};pe.arity=Se(ge),he.push(pe)}else he.push(ge)}var ve="path"===D.procedure.type?D.procedure.steps[0].value:D.procedure.value;try{"object"==typeof Y&&(Y.token=ve,Y.position=D.position),R=yield*Ti(Y,he,H,Z)}catch(ge){throw ge.position||(ge.position=D.position),ge.token||(ge.token=ve),ge}return R}function*Ti(D,H,Z,$){var R;for(R=yield*Di(D,H,Z,$);Ve(R)&&!0===R.thunk;){var Y=yield*Ce(R.body.procedure,R.input,R.environment);"variable"===R.body.procedure.type&&(Y.token=R.body.procedure.value),Y.position=R.body.procedure.position;for(var he=[],me=0;me<R.body.arguments.length;me++)he.push(yield*Ce(R.body.arguments[me],R.input,R.environment));R=yield*Di(Y,he,Z,$)}return R}function*Di(D,H,Z,$){var R;try{var Y=H;if(D&&(Y=function Hr(D,H,Z){return typeof D>"u"?H:D.validate(H,Z)}(D.signature,H,Z)),Ve(D))R=yield*function*Ds(D,H){var $=S(D.environment);return D.arguments.forEach(function(R,Y){$.bind(R.value,H[Y])}),"function"==typeof D.body?yield*function*y(D,H){var $=l(D).map(function(he){return H.lookup(he.trim())}),Y=D.apply({environment:H},$);return Ae(Y)&&(Y=yield*Y),Y}(D.body,$):yield*Ce(D.body,D.input,$)}(D,Y);else if(D&&!0===D._jsonata_function)R=D.implementation.apply({environment:$,input:Z},Y),Ae(R)&&(R=yield*R);else{if("function"!=typeof D)throw{code:"T1006",stack:(new Error).stack};R=D.apply(Z,Y),Ae(R)&&(R=yield*R)}}catch(me){throw D&&(typeof me.token>"u"&&typeof D.token<"u"&&(me.token=D.token),me.position=D.position),me}return R}function nr(D,H){var Z=S(D.environment),$=[];return D.arguments.forEach(function(Y,he){var me=H[he];me&&"operator"===me.type&&"?"===me.value?$.push(Y):Z.bind(Y.value,me)}),{_jsonata_lambda:!0,input:D.input,environment:Z,arguments:$,body:D.body}}function fr(D,H){var Z=l(D),$="function("+(Z=Z.map(function(he){return"$"+he.trim()})).join(", ")+"){ _ }",R=q($);return R.body=D,nr(R,H)}function l(D){var H=D.toString();return/\(([^)]*)\)/.exec(H)[1].split(",")}function d(D,H){var Z={_jsonata_function:!0,implementation:D};return typeof H<"u"&&(Z.signature=le(H)),Z}function S(D){var H={};return{bind:function(Z,$){H[Z]=$},lookup:function(Z){var $;return H.hasOwnProperty(Z)?$=H[Z]:D&&($=D.lookup(Z)),$},timestamp:D?D.timestamp:null,async:!!D&&D.async,global:D?D.global:{ancestry:[null]}}}ee.bind("sum",d(V.sum,"<a<n>:n>")),ee.bind("count",d(V.count,"<a:n>")),ee.bind("max",d(V.max,"<a<n>:n>")),ee.bind("min",d(V.min,"<a<n>:n>")),ee.bind("average",d(V.average,"<a<n>:n>")),ee.bind("string",d(V.string,"<x-b?:s>")),ee.bind("substring",d(V.substring,"<s-nn?:s>")),ee.bind("substringBefore",d(V.substringBefore,"<s-s:s>")),ee.bind("substringAfter",d(V.substringAfter,"<s-s:s>")),ee.bind("lowercase",d(V.lowercase,"<s-:s>")),ee.bind("uppercase",d(V.uppercase,"<s-:s>")),ee.bind("length",d(V.length,"<s-:n>")),ee.bind("trim",d(V.trim,"<s-:s>")),ee.bind("pad",d(V.pad,"<s-ns?:s>")),ee.bind("match",d(V.match,"<s-f<s:o>n?:a<o>>")),ee.bind("contains",d(V.contains,"<s-(sf):b>")),ee.bind("replace",d(V.replace,"<s-(sf)(sf)n?:s>")),ee.bind("split",d(V.split,"<s-(sf)n?:a<s>>")),ee.bind("join",d(V.join,"<a<s>s?:s>")),ee.bind("formatNumber",d(V.formatNumber,"<n-so?:s>")),ee.bind("formatBase",d(V.formatBase,"<n-n?:s>")),ee.bind("formatInteger",d(ie.formatInteger,"<n-s:s>")),ee.bind("parseInteger",d(ie.parseInteger,"<s-s:n>")),ee.bind("number",d(V.number,"<(nsb)-:n>")),ee.bind("floor",d(V.floor,"<n-:n>")),ee.bind("ceil",d(V.ceil,"<n-:n>")),ee.bind("round",d(V.round,"<n-n?:n>")),ee.bind("abs",d(V.abs,"<n-:n>")),ee.bind("sqrt",d(V.sqrt,"<n-:n>")),ee.bind("power",d(V.power,"<n-n:n>")),ee.bind("random",d(V.random,"<:n>")),ee.bind("boolean",d(V.boolean,"<x-:b>")),ee.bind("not",d(V.not,"<x-:b>")),ee.bind("map",d(V.map,"<af>")),ee.bind("zip",d(V.zip,"<a+>")),ee.bind("filter",d(V.filter,"<af>")),ee.bind("single",d(V.single,"<af?>")),ee.bind("reduce",d(V.foldLeft,"<afj?:j>")),ee.bind("sift",d(V.sift,"<o-f?:o>")),ee.bind("keys",d(V.keys,"<x-:a<s>>")),ee.bind("lookup",d(V.lookup,"<x-s:x>")),ee.bind("append",d(V.append,"<xx:a>")),ee.bind("exists",d(V.exists,"<x:b>")),ee.bind("spread",d(V.spread,"<x-:a<o>>")),ee.bind("merge",d(V.merge,"<a<o>:o>")),ee.bind("reverse",d(V.reverse,"<a:a>")),ee.bind("each",d(V.each,"<o-f:a>")),ee.bind("error",d(V.error,"<s?:x>")),ee.bind("assert",d(V.assert,"<bs?:x>")),ee.bind("type",d(V.type,"<x:s>")),ee.bind("sort",d(V.sort,"<af?:a>")),ee.bind("shuffle",d(V.shuffle,"<a:a>")),ee.bind("distinct",d(V.distinct,"<x:x>")),ee.bind("base64encode",d(V.base64encode,"<s-:s>")),ee.bind("base64decode",d(V.base64decode,"<s-:s>")),ee.bind("encodeUrlComponent",d(V.encodeUrlComponent,"<s-:s>")),ee.bind("encodeUrl",d(V.encodeUrl,"<s-:s>")),ee.bind("decodeUrlComponent",d(V.decodeUrlComponent,"<s-:s>")),ee.bind("decodeUrl",d(V.decodeUrl,"<s-:s>")),ee.bind("eval",d(function*_(D,H){if(!(typeof D>"u")){var Z=this.input;typeof H<"u"&&(Z=H,Array.isArray(Z)&&!Re(Z)&&((Z=Q(Z)).outerWrapper=!0));try{var $=q(D,!1)}catch(Y){throw N(Y),{stack:(new Error).stack,code:"D3120",value:Y.message,error:Y}}try{var R=yield*Ce($,Z,this.environment)}catch(Y){throw N(Y),{stack:(new Error).stack,code:"D3121",value:Y.message,error:Y}}return R}},"<sx?:x>")),ee.bind("toMillis",d(ie.toMillis,"<s-s?:n>")),ee.bind("fromMillis",d(ie.fromMillis,"<n-s?s?:s>")),ee.bind("clone",d(function C(D){if(!(typeof D>"u"))return JSON.parse(V.string(D))},"<(oa)-:o>"));var k={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function N(D){var H=k[D.code];if(typeof H<"u"){var Z=H.replace(/\{\{\{([^}]+)}}}/g,function(){return D[arguments[1]]});Z=Z.replace(/\{\{([^}]+)}}/g,function(){return JSON.stringify(D[arguments[1]])}),D.message=Z}}function z(D,H){var Z,$;try{Z=q(D,H&&H.recover),$=Z.errors,delete Z.errors}catch(he){throw N(he),he}var R=S(ee),Y=new Date;return R.bind("now",d(function(he,me){return ie.fromMillis(Y.getTime(),he,me)},"<s?s?:s>")),R.bind("millis",d(function(){return Y.getTime()},"<:n>")),z.RegexEngine=H&&H.RegexEngine?H.RegexEngine:RegExp,{evaluate:function(he,me,ve){if(typeof $<"u"){var ge={code:"S0500",position:0};throw N(ge),ge}var pe,Ee,ke;if(typeof me<"u")for(var de in pe=S(R),me)pe.bind(de,me[de]);else pe=R;if(pe.bind("$",he),Y=new Date,pe.timestamp=Y,Array.isArray(he)&&!Re(he)&&((he=Q(he)).outerWrapper=!0),"function"==typeof ve){pe.async=!0;var Xe=function(nt){N(nt),ve(nt,null)},je=function(nt){(Ee=ke.next(nt)).done?ve(null,Ee.value):Ee.value.then(je).catch(Xe)};ke=Ce(Z,he,pe),(Ee=ke.next()).value.then(je).catch(Xe)}else try{for(ke=Ce(Z,he,pe),Ee=ke.next();!Ee.done;)Ee=ke.next(Ee.value);return Ee.value}catch(nt){throw N(nt),nt}},assign:function(he,me){R.bind(he,me)},registerFunction:function(he,me,ve){var ge=d(me,ve);R.bind(he,ge)},ast:function(){return Z},errors:function(){return $}}}return z.parser=q,z}();oe.exports=Te},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(j,oe,re){var ie=j("./signature");const V=(()=>{"use strict";var K={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},q={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},le=function(De){var xe=0,_e=De.length,Q=function(Ve,Ae){return{type:Ve,value:Ae,position:xe}},Le=function(Ve){if(xe>=_e)return null;for(var Ae=De.charAt(xe);xe<_e&&" \t\n\r\v".indexOf(Ae)>-1;)xe++,Ae=De.charAt(xe);if("/"===Ae&&"*"===De.charAt(xe+1)){var Se=xe;for(Ae=De.charAt(xe+=2);"*"!==Ae||"/"!==De.charAt(xe+1);)if(Ae=De.charAt(++xe),xe>=_e)throw{code:"S0106",stack:(new Error).stack,position:Se};return Ae=De.charAt(xe+=2),Le(Ve)}if(!0!==Ve&&"/"===Ae)return xe++,Q("regex",function(){for(var Se,L,Ve=xe,Ae=0;xe<_e;){var ee=De.charAt(xe);if("/"===ee&&"\\"!==De.charAt(xe-1)&&0===Ae){if(""===(Se=De.substring(Ve,xe)))throw{code:"S0301",stack:(new Error).stack,position:xe};for(xe++,ee=De.charAt(xe),Ve=xe;"i"===ee||"m"===ee;)xe++,ee=De.charAt(xe);return L=De.substring(Ve,xe)+"g",new RegExp(Se,L)}("("===ee||"["===ee||"{"===ee)&&"\\"!==De.charAt(xe-1)&&Ae++,(")"===ee||"]"===ee||"}"===ee)&&"\\"!==De.charAt(xe-1)&&Ae--,xe++}throw{code:"S0302",stack:(new Error).stack,position:xe}}());if("."===Ae&&"."===De.charAt(xe+1))return xe+=2,Q("operator","..");if(":"===Ae&&"="===De.charAt(xe+1))return xe+=2,Q("operator",":=");if("!"===Ae&&"="===De.charAt(xe+1))return xe+=2,Q("operator","!=");if(">"===Ae&&"="===De.charAt(xe+1))return xe+=2,Q("operator",">=");if("<"===Ae&&"="===De.charAt(xe+1))return xe+=2,Q("operator","<=");if("*"===Ae&&"*"===De.charAt(xe+1))return xe+=2,Q("operator","**");if("~"===Ae&&">"===De.charAt(xe+1))return xe+=2,Q("operator","~>");if(Object.prototype.hasOwnProperty.call(K,Ae))return xe++,Q("operator",Ae);if('"'===Ae||"'"===Ae){var L=Ae;xe++;for(var ee="";xe<_e;){if("\\"===(Ae=De.charAt(xe)))if(xe++,Ae=De.charAt(xe),Object.prototype.hasOwnProperty.call(q,Ae))ee+=q[Ae];else{if("u"!==Ae)throw{code:"S0103",stack:(new Error).stack,position:xe,token:Ae};var Ce=De.substr(xe+1,4);if(!/^[0-9a-fA-F]+$/.test(Ce))throw{code:"S0104",stack:(new Error).stack,position:xe};var ze=parseInt(Ce,16);ee+=String.fromCharCode(ze),xe+=4}else{if(Ae===L)return xe++,Q("string",ee);ee+=Ae}xe++}throw{code:"S0101",stack:(new Error).stack,position:xe}}var ut,st=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/.exec(De.substring(xe));if(null!==st){var bt=parseFloat(st[0]);if(!isNaN(bt)&&isFinite(bt))return xe+=st[0].length,Q("number",bt);throw{code:"S0102",stack:(new Error).stack,position:xe,token:st[0]}}if("`"===Ae){xe++;var Vt=De.indexOf("`",xe);if(-1!==Vt)return ut=De.substring(xe,Vt),xe=Vt+1,Q("name",ut);throw xe=_e,{code:"S0105",stack:(new Error).stack,position:xe}}for(var Ct,on=xe;;)if(Ct=De.charAt(on),on===_e||" \t\n\r\v".indexOf(Ct)>-1||Object.prototype.hasOwnProperty.call(K,Ct)){if("$"===De.charAt(xe))return ut=De.substring(xe+1,on),xe=on,Q("variable",ut);switch(ut=De.substring(xe,on),xe=on,ut){case"or":case"in":case"and":return Q("operator",ut);case"true":return Q("value",!0);case"false":return Q("value",!1);case"null":return Q("value",null);default:return xe===_e&&""===ut?null:Q("name",ut)}}else on++};return Le};return function(De,xe){var _e,Q,Re={},Le=[],Ve=function(){var xt=[];"(end)"!==_e.id&&xt.push({type:_e.type,value:_e.value,position:_e.position});for(var Jt=Q();null!==Jt;)xt.push(Jt),Jt=Q();return xt},Ae={nud:function(){var xt={code:"S0211",token:this.value,position:this.position};if(xe)return xt.remaining=Ve(),xt.type="error",Le.push(xt),xt;throw xt.stack=(new Error).stack,xt}},Se=function(xt,Jt){var Gn=Re[xt];return Jt=Jt||0,Gn?Jt>=Gn.lbp&&(Gn.lbp=Jt):((Gn=Object.create(Ae)).id=Gn.value=xt,Gn.lbp=Jt,Re[xt]=Gn),Gn},L=function(xt){if(xe)return xt.remaining=Ve(),Le.push(xt),(_e=Object.create(Re["(error)"])).error=xt,_e.type="(error)",_e;throw xt.stack=(new Error).stack,xt},ee=function(xt,Jt){if(xt&&_e.id!==xt)return L({code:"(end)"===_e.id?"S0203":"S0202",position:_e.position,token:_e.value,value:xt});var ni=Q(Jt);if(null===ni)return(_e=Re["(end)"]).position=De.length,_e;var Ft,St=ni.value,Oe=ni.type;switch(Oe){case"name":case"variable":Ft=Re["(name)"];break;case"operator":if(!(Ft=Re[St]))return L({code:"S0204",stack:(new Error).stack,position:ni.position,token:St});break;case"string":case"number":case"value":Ft=Re["(literal)"];break;case"regex":Oe="regex",Ft=Re["(regex)"];break;default:return L({code:"S0205",stack:(new Error).stack,position:ni.position,token:St})}return(_e=Object.create(Ft)).value=St,_e.type=Oe,_e.position=ni.position,_e},Ce=function(xt){var Jt,Gn=_e;for(ee(null,!0),Jt=Gn.nud();xt<_e.lbp;)Gn=_e,ee(),Jt=Gn.led(Jt);return Jt},ze=function(xt){Se(xt,0).nud=function(){return this}},dt=function(xt,Jt,Gn){var ri=Jt||K[xt],ni=Se(xt,ri);return ni.led=Gn||function(St){return this.lhs=St,this.rhs=Ce(ri),this.type="binary",this},ni},st=function(xt,Jt,Gn){var ri=Se(xt,Jt);return ri.led=Gn,ri},bt=function(xt,Jt){var Gn=Se(xt);return Gn.nud=Jt||function(){return this.expression=Ce(70),this.type="unary",this},Gn};ze("(end)"),ze("(name)"),ze("(literal)"),ze("(regex)"),Se(":"),Se(";"),Se(","),Se(")"),Se("]"),Se("}"),Se(".."),dt("."),dt("+"),dt("-"),dt("*"),dt("/"),dt("%"),dt("="),dt("<"),dt(">"),dt("!="),dt("<="),dt(">="),dt("&"),dt("and"),dt("or"),dt("in"),ze("and"),ze("or"),ze("in"),bt("-"),dt("~>"),st("(error)",10,function(xt){return this.lhs=xt,this.error=_e.error,this.remaining=Ve(),this.type="error",this}),bt("*",function(){return this.type="wildcard",this}),bt("**",function(){return this.type="descendant",this}),bt("%",function(){return this.type="parent",this}),dt("(",K["("],function(xt){if(this.procedure=xt,this.type="function",this.arguments=[],")"!==_e.id)for(;"operator"===_e.type&&"?"===_e.id?(this.type="partial",this.arguments.push(_e),ee("?")):this.arguments.push(Ce(0)),","===_e.id;)ee(",");if(ee(")",!0),"name"===xt.type&&("function"===xt.value||"\u03bb"===xt.value)){if(this.arguments.forEach(function(St,Oe){if("variable"!==St.type)return L({code:"S0208",stack:(new Error).stack,position:St.position,token:St.value,value:Oe+1})}),this.type="lambda","<"===_e.id){for(var Jt=_e.position,Gn=1,ri="<";Gn>0&&"{"!==_e.id&&"(end)"!==_e.id;){var ni=ee();">"===ni.id?Gn--:"<"===ni.id&&Gn++,ri+=ni.value}ee(">");try{this.signature=ie(ri)}catch(St){return St.position=Jt+St.offset,L(St)}}ee("{"),this.body=Ce(0),ee("}")}return this}),bt("(",function(){for(var xt=[];")"!==_e.id&&(xt.push(Ce(0)),";"===_e.id);)ee(";");return ee(")",!0),this.type="block",this.expressions=xt,this}),bt("[",function(){var xt=[];if("]"!==_e.id)for(;;){var Jt=Ce(0);if(".."===_e.id){var Gn={type:"binary",value:"..",position:_e.position,lhs:Jt};ee(".."),Gn.rhs=Ce(0),Jt=Gn}if(xt.push(Jt),","!==_e.id)break;ee(",")}return ee("]",!0),this.expressions=xt,this.type="unary",this}),dt("[",K["["],function(xt){if("]"===_e.id){for(var Jt=xt;Jt&&"binary"===Jt.type&&"["===Jt.value;)Jt=Jt.lhs;return Jt.keepArray=!0,ee("]"),xt}return this.lhs=xt,this.rhs=Ce(K["]"]),this.type="binary",ee("]",!0),this}),dt("^",K["^"],function(xt){ee("(");for(var Jt=[];;){var Gn={descending:!1};if("<"===_e.id?ee("<"):">"===_e.id&&(Gn.descending=!0,ee(">")),Gn.expression=Ce(0),Jt.push(Gn),","!==_e.id)break;ee(",")}return ee(")"),this.lhs=xt,this.rhs=Jt,this.type="binary",this});var ut=function(xt){var Jt=[];if("}"!==_e.id)for(;;){var Gn=Ce(0);ee(":");var ri=Ce(0);if(Jt.push([Gn,ri]),","!==_e.id)break;ee(",")}return ee("}",!0),typeof xt>"u"?(this.lhs=Jt,this.type="unary"):(this.lhs=xt,this.rhs=Jt,this.type="binary"),this};bt("{",ut),dt("{",K["{"],ut),st(":=",K[":="],function(xt){return"variable"!==xt.type?L({code:"S0212",stack:(new Error).stack,position:xt.position,token:xt.value}):(this.lhs=xt,this.rhs=Ce(K[":="]-1),this.type="binary",this)}),dt("@",K["@"],function(xt){return this.lhs=xt,this.rhs=Ce(K["@"]),"variable"!==this.rhs.type?L({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)}),dt("#",K["#"],function(xt){return this.lhs=xt,this.rhs=Ce(K["#"]),"variable"!==this.rhs.type?L({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)}),dt("?",K["?"],function(xt){return this.type="condition",this.condition=xt,this.then=Ce(0),":"===_e.id&&(ee(":"),this.else=Ce(0)),this}),bt("|",function(){return this.type="transform",this.pattern=Ce(0),ee("|"),this.update=Ce(0),","===_e.id&&(ee(","),this.delete=Ce(0)),ee("|"),this});var Vt=function(xt){var Jt;if("function"!==xt.type||xt.predicate)if("condition"===xt.type)xt.then=Vt(xt.then),typeof xt.else<"u"&&(xt.else=Vt(xt.else)),Jt=xt;else if("block"===xt.type){var ri=xt.expressions.length;ri>0&&(xt.expressions[ri-1]=Vt(xt.expressions[ri-1])),Jt=xt}else Jt=xt;else{var Gn={type:"lambda",thunk:!0,arguments:[],position:xt.position};Gn.body=xt,Jt=Gn}return Jt},on=0,Ct=0,rn=[],Qt=function(xt,Jt){switch(xt.type){case"name":case"wildcard":Jt.level--,0===Jt.level&&(typeof xt.ancestor>"u"||(rn[Jt.index].slot.label=xt.ancestor.label),xt.ancestor=Jt,xt.tuple=!0);break;case"parent":Jt.level++;break;case"block":xt.expressions.length>0&&(xt.tuple=!0,Jt=Qt(xt.expressions[xt.expressions.length-1],Jt));break;case"path":xt.tuple=!0;var Gn=xt.steps.length-1;for(Jt=Qt(xt.steps[Gn--],Jt);Jt.level>0&&Gn>=0;)Jt=Qt(xt.steps[Gn--],Jt);break;default:throw{code:"S0217",token:xt.type,position:xt.position}}return Jt},Ht=function(xt,Jt){if(typeof Jt.seekingParent<"u"||"parent"===Jt.type){var Gn=typeof Jt.seekingParent<"u"?Jt.seekingParent:[];"parent"===Jt.type&&Gn.push(Jt.slot),typeof xt.seekingParent>"u"?xt.seekingParent=Gn:Array.prototype.push.apply(xt.seekingParent,Gn)}},Qn=function(xt){var Jt=xt.steps.length-1,Gn=xt.steps[Jt],ri=typeof Gn.seekingParent<"u"?Gn.seekingParent:[];"parent"===Gn.type&&ri.push(Gn.slot);for(var ni=0;ni<ri.length;ni++){var St=ri[ni];for(Jt=xt.steps.length-2;St.level>0;){if(Jt<0){typeof xt.seekingParent>"u"?xt.seekingParent=[St]:xt.seekingParent.push(St);break}for(var Oe=xt.steps[Jt--];Jt>=0&&Oe.focus&&xt.steps[Jt].focus;)Oe=xt.steps[Jt--];St=Qt(Oe,St)}}},en=function(xt){var Jt;switch(xt.type){case"binary":switch(xt.value){case".":var Gn=en(xt.lhs);Jt="path"===Gn.type?Gn:{type:"path",steps:[Gn]},"parent"===Gn.type&&(Jt.seekingParent=[Gn.slot]);var ri=en(xt.rhs);"function"===ri.type&&"path"===ri.procedure.type&&1===ri.procedure.steps.length&&"name"===ri.procedure.steps[0].type&&"function"===Jt.steps[Jt.steps.length-1].type&&(Jt.steps[Jt.steps.length-1].nextFunction=ri.procedure.steps[0].value),"path"===ri.type?Array.prototype.push.apply(Jt.steps,ri.steps):(typeof ri.predicate<"u"&&(ri.stages=ri.predicate,delete ri.predicate),Jt.steps.push(ri)),Jt.steps.filter(function(_n){if("number"===_n.type||"value"===_n.type)throw{code:"S0213",stack:(new Error).stack,position:_n.position,value:_n.value};return"string"===_n.type}).forEach(function(_n){_n.type="name"}),Jt.steps.filter(function(_n){return!0===_n.keepArray}).length>0&&(Jt.keepSingletonArray=!0);var ni=Jt.steps[0];"unary"===ni.type&&"["===ni.value&&(ni.consarray=!0);var St=Jt.steps[Jt.steps.length-1];"unary"===St.type&&"["===St.value&&(St.consarray=!0),Qn(Jt);break;case"[":var Oe=Jt=en(xt.lhs),Ft="predicate";if("path"===Jt.type&&(Oe=Jt.steps[Jt.steps.length-1],Ft="stages"),typeof Oe.group<"u")throw{code:"S0209",stack:(new Error).stack,position:xt.position};typeof Oe[Ft]>"u"&&(Oe[Ft]=[]);var Ot=en(xt.rhs);typeof Ot.seekingParent<"u"&&(Ot.seekingParent.forEach(_n=>{1===_n.level?Qt(Oe,_n):_n.level--}),Ht(Oe,Ot)),Oe[Ft].push({type:"filter",expr:Ot,position:xt.position});break;case"{":if(typeof(Jt=en(xt.lhs)).group<"u")throw{code:"S0210",stack:(new Error).stack,position:xt.position};Jt.group={lhs:xt.rhs.map(function(_n){return[en(_n[0]),en(_n[1])]}),position:xt.position};break;case"^":"path"!==(Jt=en(xt.lhs)).type&&(Jt={type:"path",steps:[Jt]});var li={type:"sort",position:xt.position};li.terms=xt.rhs.map(function(_n){var It=en(_n.expression);return Ht(li,It),{descending:_n.descending,expression:It}}),Jt.steps.push(li),Qn(Jt);break;case":=":(Jt={type:"bind",value:xt.value,position:xt.position}).lhs=en(xt.lhs),Jt.rhs=en(xt.rhs),Ht(Jt,Jt.rhs);break;case"@":if(Jt=en(xt.lhs),Oe=Jt,"path"===Jt.type&&(Oe=Jt.steps[Jt.steps.length-1]),typeof Oe.stages<"u"||typeof Oe.predicate<"u")throw{code:"S0215",stack:(new Error).stack,position:xt.position};if("sort"===Oe.type)throw{code:"S0216",stack:(new Error).stack,position:xt.position};xt.keepArray&&(Oe.keepArray=!0),Oe.focus=xt.rhs.value,Oe.tuple=!0;break;case"#":Jt=en(xt.lhs),Oe=Jt,"path"===Jt.type?Oe=Jt.steps[Jt.steps.length-1]:(Jt={type:"path",steps:[Jt]},typeof Oe.predicate<"u"&&(Oe.stages=Oe.predicate,delete Oe.predicate)),typeof Oe.stages>"u"?Oe.index=xt.rhs.value:Oe.stages.push({type:"index",value:xt.rhs.value,position:xt.position}),Oe.tuple=!0;break;case"~>":(Jt={type:"apply",value:xt.value,position:xt.position}).lhs=en(xt.lhs),Jt.rhs=en(xt.rhs);break;default:(Jt={type:xt.type,value:xt.value,position:xt.position}).lhs=en(xt.lhs),Jt.rhs=en(xt.rhs),Ht(Jt,Jt.lhs),Ht(Jt,Jt.rhs)}break;case"unary":Jt={type:xt.type,value:xt.value,position:xt.position},"["===xt.value?Jt.expressions=xt.expressions.map(function(_n){var It=en(_n);return Ht(Jt,It),It}):"{"===xt.value?Jt.lhs=xt.lhs.map(function(_n){var It=en(_n[0]);Ht(Jt,It);var rt=en(_n[1]);return Ht(Jt,rt),[It,rt]}):(Jt.expression=en(xt.expression),"-"===xt.value&&"number"===Jt.expression.type?(Jt=Jt.expression).value=-Jt.value:Ht(Jt,Jt.expression));break;case"function":case"partial":(Jt={type:xt.type,name:xt.name,value:xt.value,position:xt.position}).arguments=xt.arguments.map(function(_n){var It=en(_n);return Ht(Jt,It),It}),Jt.procedure=en(xt.procedure);break;case"lambda":Jt={type:xt.type,arguments:xt.arguments,signature:xt.signature,position:xt.position};var di=en(xt.body);Jt.body=Vt(di);break;case"condition":(Jt={type:xt.type,position:xt.position}).condition=en(xt.condition),Ht(Jt,Jt.condition),Jt.then=en(xt.then),Ht(Jt,Jt.then),typeof xt.else<"u"&&(Jt.else=en(xt.else),Ht(Jt,Jt.else));break;case"transform":(Jt={type:xt.type,position:xt.position}).pattern=en(xt.pattern),Jt.update=en(xt.update),typeof xt.delete<"u"&&(Jt.delete=en(xt.delete));break;case"block":(Jt={type:xt.type,position:xt.position}).expressions=xt.expressions.map(function(_n){var It=en(_n);return Ht(Jt,It),(It.consarray||"path"===It.type&&It.steps[0].consarray)&&(Jt.consarray=!0),It});break;case"name":Jt={type:"path",steps:[xt]},xt.keepArray&&(Jt.keepSingletonArray=!0);break;case"parent":Jt={type:"parent",slot:{label:"!"+on++,level:1,index:Ct++}},rn.push(Jt);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":Jt=xt;break;case"operator":if("and"===xt.value||"or"===xt.value||"in"===xt.value)xt.type="name",Jt=en(xt);else{if("?"!==xt.value)throw{code:"S0201",stack:(new Error).stack,position:xt.position,token:xt.value};Jt=xt}break;case"error":Jt=xt,xt.lhs&&(Jt=en(xt.lhs));break;default:var Gt="S0206";"(end)"===xt.id&&(Gt="S0207");var Rt={code:Gt,position:xt.position,token:xt.value};if(xe)return Le.push(Rt),{type:"error",error:Rt};throw Rt.stack=(new Error).stack,Rt}return xt.keepArray&&(Jt.keepArray=!0),Jt};Q=le(De),ee();var Sn=Ce(0);if("(end)"!==_e.id&&L({code:"S0201",position:_e.position,token:_e.value}),"parent"===(Sn=en(Sn)).type||typeof Sn.seekingParent<"u")throw{code:"S0217",token:Sn.type,position:Sn.position};return Le.length>0&&(Sn.errors=Le),Sn}})();oe.exports=V},{"./signature":5}],5:[function(j,oe,re){var ie=j("./utils");const V=(()=>{"use strict";var K={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};return function q(le){for(var Te=1,De=[],xe={},_e=xe;Te<le.length;){var Q=le.charAt(Te);if(":"===Q)break;var Re=function(){De.push(xe),_e=xe,xe={}},Le=function(dt,st,bt,ut){for(var Vt=1,on=st;on<dt.length;)if(on++,(Q=dt.charAt(on))===ut){if(0==--Vt)break}else Q===bt&&Vt++;return on};switch(Q){case"s":case"n":case"b":case"l":case"o":xe.regex="["+Q+"m]",xe.type=Q,Re();break;case"a":xe.regex="[asnblfom]",xe.type=Q,xe.array=!0,Re();break;case"f":xe.regex="f",xe.type=Q,Re();break;case"j":xe.regex="[asnblom]",xe.type=Q,Re();break;case"x":xe.regex="[asnblfom]",xe.type=Q,Re();break;case"-":_e.context=!0,_e.contextRegex=new RegExp(_e.regex),_e.regex+="?";break;case"?":case"+":_e.regex+=Q;break;case"(":var Ve=Le(le,Te,"(",")"),Ae=le.substring(Te+1,Ve);if(-1!==Ae.indexOf("<"))throw{code:"S0402",stack:(new Error).stack,value:Ae,offset:Te};xe.regex="["+Ae+"m]",xe.type="("+Ae+")",Te=Ve,Re();break;case"<":if("a"!==_e.type&&"f"!==_e.type)throw{code:"S0401",stack:(new Error).stack,value:_e.type,offset:Te};var Se=Le(le,Te,"<",">");_e.subtype=le.substring(Te+1,Se),Te=Se}Te++}var L="^"+De.map(function(dt){return"("+dt.regex+")"}).join("")+"$",ee=new RegExp(L),Ce=function(dt){var st;if(ie.isFunction(dt))st="f";else switch(typeof dt){case"string":st="s";break;case"number":st="n";break;case"boolean":st="b";break;case"object":st=null===dt?"l":Array.isArray(dt)?"a":"o";break;default:st="m"}return st};return{definition:le,validate:function(dt,st){var bt="";dt.forEach(function(Ct){bt+=Ce(Ct)});var ut=ee.exec(bt);if(ut){var Vt=[],on=0;return De.forEach(function(Ct,rn){var Qt=dt[on],Ht=ut[rn+1];if(""===Ht)if(Ct.context&&Ct.contextRegex){var Qn=Ce(st);if(!Ct.contextRegex.test(Qn))throw{code:"T0411",stack:(new Error).stack,value:st,index:on+1};Vt.push(st)}else Vt.push(Qt),on++;else Ht.split("").forEach(function(en){if("a"===Ct.type){if("m"===en)Qt=void 0;else{Qt=dt[on];var Sn=!0;if(typeof Ct.subtype<"u")if("a"!==en&&Ht!==Ct.subtype)Sn=!1;else if("a"===en&&Qt.length>0){var Pn=Ce(Qt[0]);Sn=Pn===Ct.subtype.charAt(0)&&0===Qt.filter(function(Jt){return Ce(Jt)!==Pn}).length}if(!Sn)throw{code:"T0412",stack:(new Error).stack,value:Qt,index:on+1,type:K[Ct.subtype]};"a"!==en&&(Qt=[Qt])}Vt.push(Qt),on++}else Vt.push(Qt),on++})}),Vt}!function(dt,st){for(var bt="^",ut=0,Vt=0;Vt<De.length;Vt++){var on=st.match(bt+=De[Vt].regex);if(null===on)throw{code:"T0410",stack:(new Error).stack,value:dt[ut],index:ut+1};ut=on[0].length}throw{code:"T0410",stack:(new Error).stack,value:dt[ut],index:ut+1}}(dt,bt)}}}})();oe.exports=V},{"./utils":6}],6:[function(j,oe,re){const ie=(()=>{"use strict";function V(Se){var L=!1;if("number"==typeof Se&&(L=!isNaN(Se))&&!isFinite(Se))throw{code:"D1001",value:Se,stack:(new Error).stack};return L}var Re=("function"==typeof Symbol?Symbol:{}).iterator||"@@iterator";return{isNumeric:V,isArrayOfStrings:function K(Se){var L=!1;return Array.isArray(Se)&&(L=0===Se.filter(function(ee){return"string"!=typeof ee}).length),L},isArrayOfNumbers:function q(Se){var L=!1;return Array.isArray(Se)&&(L=0===Se.filter(function(ee){return!V(ee)}).length),L},createSequence:function le(){var Se=[];return Se.sequence=!0,1===arguments.length&&Se.push(arguments[0]),Se},isSequence:function Te(Se){return!0===Se.sequence&&Array.isArray(Se)},isFunction:function De(Se){return Se&&(!0===Se._jsonata_function||!0===Se._jsonata_lambda)||"function"==typeof Se},isLambda:function _e(Se){return Se&&!0===Se._jsonata_lambda},isIterable:function Le(Se){return"object"==typeof Se&&null!==Se&&Re in Se&&"next"in Se&&"function"==typeof Se.next},getFunctionArity:function xe(Se){return"number"==typeof Se.arity?Se.arity:"function"==typeof Se.implementation?Se.implementation.length:"number"==typeof Se.length?Se.length:Se.arguments.length},isDeepEqual:function Ve(Se,L){if(Se===L)return!0;if("object"==typeof Se&&"object"==typeof L&&null!==Se&&null!==L){if(Array.isArray(Se)&&Array.isArray(L)){if(Se.length!==L.length)return!1;for(var ee=0;ee<Se.length;ee++)if(!Ve(Se[ee],L[ee]))return!1;return!0}var Ce=Object.getOwnPropertyNames(Se),ze=Object.getOwnPropertyNames(L);if(Ce.length!==ze.length)return!1;for(Ce=Ce.sort(),ze=ze.sort(),ee=0;ee<Ce.length;ee++)if(Ce[ee]!==ze[ee])return!1;for(ee=0;ee<Ce.length;ee++){var dt=Ce[ee];if(!Ve(Se[dt],L[dt]))return!1}return!0}return!1},stringToArray:function Ae(Se){var L=[];for(let ee of Se)L.push(ee);return L}}})();oe.exports=ie},{}]},{},[3])(3)},3353:(yt,it,ae)=>{"use strict";function ye(L){var ee=Array.prototype.slice.call(arguments,1);return ee.forEach(function(Ce){!Ce||Object.keys(Ce).forEach(function(ze){L[ze]=Ce[ze]})}),L}function j(L){return Object.prototype.toString.call(L)}function V(L){return"[object Function]"===j(L)}function K(L){return L.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var q={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},Te={"http:":{validate:function(L,ee,Ce){var ze=L.slice(ee);return Ce.re.http||(Ce.re.http=new RegExp("^\\/\\/"+Ce.re.src_auth+Ce.re.src_host_port_strict+Ce.re.src_path,"i")),Ce.re.http.test(ze)?ze.match(Ce.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(L,ee,Ce){var ze=L.slice(ee);return Ce.re.no_http||(Ce.re.no_http=new RegExp("^"+Ce.re.src_auth+"(?:localhost|(?:(?:"+Ce.re.src_domain+")\\.)+"+Ce.re.src_domain_root+")"+Ce.re.src_port+Ce.re.src_host_terminator+Ce.re.src_path,"i")),Ce.re.no_http.test(ze)?ee>=3&&":"===L[ee-3]||ee>=3&&"/"===L[ee-3]?0:ze.match(Ce.re.no_http)[0].length:0}},"mailto:":{validate:function(L,ee,Ce){var ze=L.slice(ee);return Ce.re.mailto||(Ce.re.mailto=new RegExp("^"+Ce.re.src_email_name+"@"+Ce.re.src_host_strict,"i")),Ce.re.mailto.test(ze)?ze.match(Ce.re.mailto)[0].length:0}}},xe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function Le(L){var ee=L.re=ae(9234)(L.__opts__),Ce=L.__tlds__.slice();function ze(ut){return ut.replace("%TLDS%",ee.src_tlds)}L.onCompile(),L.__tlds_replaced__||Ce.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),Ce.push(ee.src_xn),ee.src_tlds=Ce.join("|"),ee.email_fuzzy=RegExp(ze(ee.tpl_email_fuzzy),"i"),ee.link_fuzzy=RegExp(ze(ee.tpl_link_fuzzy),"i"),ee.link_no_ip_fuzzy=RegExp(ze(ee.tpl_link_no_ip_fuzzy),"i"),ee.host_fuzzy_test=RegExp(ze(ee.tpl_host_fuzzy_test),"i");var dt=[];function st(ut,Vt){throw new Error('(LinkifyIt) Invalid schema "'+ut+'": '+Vt)}L.__compiled__={},Object.keys(L.__schemas__).forEach(function(ut){var Vt=L.__schemas__[ut];if(null!==Vt){var on={validate:null,link:null};if(L.__compiled__[ut]=on,function re(L){return"[object Object]"===j(L)}(Vt))return function ie(L){return"[object RegExp]"===j(L)}(Vt.validate)?on.validate=function Q(L){return function(ee,Ce){var ze=ee.slice(Ce);return L.test(ze)?ze.match(L)[0].length:0}}(Vt.validate):V(Vt.validate)?on.validate=Vt.validate:st(ut,Vt),void(V(Vt.normalize)?on.normalize=Vt.normalize:Vt.normalize?st(ut,Vt):on.normalize=function(L,ee){ee.normalize(L)});if(function oe(L){return"[object String]"===j(L)}(Vt))return void dt.push(ut);st(ut,Vt)}}),dt.forEach(function(ut){!L.__compiled__[L.__schemas__[ut]]||(L.__compiled__[ut].validate=L.__compiled__[L.__schemas__[ut]].validate,L.__compiled__[ut].normalize=L.__compiled__[L.__schemas__[ut]].normalize)}),L.__compiled__[""]={validate:null,normalize:function(L,ee){ee.normalize(L)}};var bt=Object.keys(L.__compiled__).filter(function(ut){return ut.length>0&&L.__compiled__[ut]}).map(K).join("|");L.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+ee.src_ZPCc+"))("+bt+")","i"),L.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+ee.src_ZPCc+"))("+bt+")","ig"),L.re.schema_at_start=RegExp("^"+L.re.schema_search.source,"i"),L.re.pretest=RegExp("("+L.re.schema_test.source+")|("+L.re.host_fuzzy_test.source+")|@","i"),function _e(L){L.__index__=-1,L.__text_cache__=""}(L)}function Ve(L,ee){var Ce=L.__index__,ze=L.__last_index__,dt=L.__text_cache__.slice(Ce,ze);this.schema=L.__schema__.toLowerCase(),this.index=Ce+ee,this.lastIndex=ze+ee,this.raw=dt,this.text=dt,this.url=dt}function Ae(L,ee){var Ce=new Ve(L,ee);return L.__compiled__[Ce.schema].normalize(Ce,L),Ce}function Se(L,ee){if(!(this instanceof Se))return new Se(L,ee);ee||function le(L){return Object.keys(L||{}).reduce(function(ee,Ce){return ee||q.hasOwnProperty(Ce)},!1)}(L)&&(ee=L,L={}),this.__opts__=ye({},q,ee),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=ye({},Te,L),this.__compiled__={},this.__tlds__=xe,this.__tlds_replaced__=!1,this.re={},Le(this)}Se.prototype.add=function(ee,Ce){return this.__schemas__[ee]=Ce,Le(this),this},Se.prototype.set=function(ee){return this.__opts__=ye(this.__opts__,ee),this},Se.prototype.test=function(ee){if(this.__text_cache__=ee,this.__index__=-1,!ee.length)return!1;var Ce,ze,dt,st,bt,ut,Vt,on;if(this.re.schema_test.test(ee))for((Vt=this.re.schema_search).lastIndex=0;null!==(Ce=Vt.exec(ee));)if(st=this.testSchemaAt(ee,Ce[2],Vt.lastIndex)){this.__schema__=Ce[2],this.__index__=Ce.index+Ce[1].length,this.__last_index__=Ce.index+Ce[0].length+st;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(on=ee.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||on<this.__index__)&&null!==(ze=ee.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(bt=ze.index+ze[1].length,(this.__index__<0||bt<this.__index__)&&(this.__schema__="",this.__index__=bt,this.__last_index__=ze.index+ze[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&ee.indexOf("@")>=0&&null!==(dt=ee.match(this.re.email_fuzzy))&&(bt=dt.index+dt[1].length,ut=dt.index+dt[0].length,(this.__index__<0||bt<this.__index__||bt===this.__index__&&ut>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=bt,this.__last_index__=ut)),this.__index__>=0},Se.prototype.pretest=function(ee){return this.re.pretest.test(ee)},Se.prototype.testSchemaAt=function(ee,Ce,ze){return this.__compiled__[Ce.toLowerCase()]?this.__compiled__[Ce.toLowerCase()].validate(ee,ze,this):0},Se.prototype.match=function(ee){var Ce=0,ze=[];this.__index__>=0&&this.__text_cache__===ee&&(ze.push(Ae(this,Ce)),Ce=this.__last_index__);for(var dt=Ce?ee.slice(Ce):ee;this.test(dt);)ze.push(Ae(this,Ce)),dt=dt.slice(this.__last_index__),Ce+=this.__last_index__;return ze.length?ze:null},Se.prototype.matchAtStart=function(ee){if(this.__text_cache__=ee,this.__index__=-1,!ee.length)return null;var Ce=this.re.schema_at_start.exec(ee);if(!Ce)return null;var ze=this.testSchemaAt(ee,Ce[2],Ce[0].length);return ze?(this.__schema__=Ce[2],this.__index__=Ce.index+Ce[1].length,this.__last_index__=Ce.index+Ce[0].length+ze,Ae(this,0)):null},Se.prototype.tlds=function(ee,Ce){return ee=Array.isArray(ee)?ee:[ee],Ce?(this.__tlds__=this.__tlds__.concat(ee).sort().filter(function(ze,dt,st){return ze!==st[dt-1]}).reverse(),Le(this),this):(this.__tlds__=ee.slice(),this.__tlds_replaced__=!0,Le(this),this)},Se.prototype.normalize=function(ee){ee.schema||(ee.url="http://"+ee.url),"mailto:"===ee.schema&&!/^mailto:/i.test(ee.url)&&(ee.url="mailto:"+ee.url)},Se.prototype.onCompile=function(){},yt.exports=Se},9234:(yt,it,ae)=>{"use strict";yt.exports=function(ye){var j={};ye=ye||{},j.src_Any=ae(1129).source,j.src_Cc=ae(9699).source,j.src_Z=ae(5450).source,j.src_P=ae(6020).source,j.src_ZPCc=[j.src_Z,j.src_P,j.src_Cc].join("|"),j.src_ZCc=[j.src_Z,j.src_Cc].join("|");return j.src_pseudo_letter="(?:(?![><\uff5c]|"+j.src_ZPCc+")"+j.src_Any+")",j.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",j.src_auth="(?:(?:(?!"+j.src_ZCc+"|[@/\\[\\]()]).)+@)?",j.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",j.src_host_terminator="(?=$|[><\uff5c]|"+j.src_ZPCc+")(?!"+(ye["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+j.src_ZPCc+"))",j.src_path="(?:[/?#](?:(?!"+j.src_ZCc+"|[><\uff5c]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+j.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+j.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+j.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+j.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+j.src_ZCc+"|[']).)+\\'|\\'(?="+j.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+j.src_ZCc+"|[.]|$)|"+(ye["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+j.src_ZCc+"|$)|;(?!"+j.src_ZCc+"|$)|\\!+(?!"+j.src_ZCc+"|[!]|$)|\\?(?!"+j.src_ZCc+"|[?]|$))+|\\/)?",j.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',j.src_xn="xn--[a-z0-9\\-]{1,59}",j.src_domain_root="(?:"+j.src_xn+"|"+j.src_pseudo_letter+"{1,63})",j.src_domain="(?:"+j.src_xn+"|(?:"+j.src_pseudo_letter+")|(?:"+j.src_pseudo_letter+"(?:-|"+j.src_pseudo_letter+"){0,61}"+j.src_pseudo_letter+"))",j.src_host="(?:(?:(?:(?:"+j.src_domain+")\\.)*"+j.src_domain+"))",j.tpl_host_fuzzy="(?:"+j.src_ip4+"|(?:(?:(?:"+j.src_domain+")\\.)+(?:%TLDS%)))",j.tpl_host_no_ip_fuzzy="(?:(?:(?:"+j.src_domain+")\\.)+(?:%TLDS%))",j.src_host_strict=j.src_host+j.src_host_terminator,j.tpl_host_fuzzy_strict=j.tpl_host_fuzzy+j.src_host_terminator,j.src_host_port_strict=j.src_host+j.src_port+j.src_host_terminator,j.tpl_host_port_fuzzy_strict=j.tpl_host_fuzzy+j.src_port+j.src_host_terminator,j.tpl_host_port_no_ip_fuzzy_strict=j.tpl_host_no_ip_fuzzy+j.src_port+j.src_host_terminator,j.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+j.src_ZPCc+"|>|$))",j.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+j.src_ZCc+")("+j.src_email_name+"@"+j.tpl_host_fuzzy_strict+")",j.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+j.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+j.tpl_host_port_fuzzy_strict+j.src_path+")",j.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+j.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+j.tpl_host_port_no_ip_fuzzy_strict+j.src_path+")",j}},8132:yt=>{var _n,ae="__lodash_hash_undefined__",re=/^\[object .+?Constructor\]$/,ie="object"==typeof global&&global&&global.Object===Object&&global,V="object"==typeof self&&self&&self.Object===Object&&self,K=ie||V||Function("return this")(),Te=Array.prototype,De=Function.prototype,xe=Object.prototype,_e=K["__core-js_shared__"],Q=(_n=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||""))?"Symbol(src)_1."+_n:"",Re=De.toString,Le=xe.hasOwnProperty,Ve=xe.toString,Ae=RegExp("^"+Re.call(Le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Se=Te.splice,L=St(K,"Map"),ee=St(Object,"create");function Ce(_n){var It=-1,rt=_n?_n.length:0;for(this.clear();++It<rt;){var lt=_n[It];this.set(lt[0],lt[1])}}function Vt(_n){var It=-1,rt=_n?_n.length:0;for(this.clear();++It<rt;){var lt=_n[It];this.set(lt[0],lt[1])}}function Qn(_n){var It=-1,rt=_n?_n.length:0;for(this.clear();++It<rt;){var lt=_n[It];this.set(lt[0],lt[1])}}function Gn(_n,It){for(var rt=_n.length;rt--;)if(di(_n[rt][0],It))return rt;return-1}function ni(_n,It){var rt=_n.__data__;return function Oe(_n){var It=typeof _n;return"string"==It||"number"==It||"symbol"==It||"boolean"==It?"__proto__"!==_n:null===_n}(It)?rt["string"==typeof It?"string":"hash"]:rt.map}function St(_n,It){var rt=function q(_n,It){return _n?.[It]}(_n,It);return function ri(_n){if(!Rt(_n)||function Ft(_n){return!!Q&&Q in _n}(_n))return!1;var It=function Gt(_n){var It=Rt(_n)?Ve.call(_n):"";return"[object Function]"==It||"[object GeneratorFunction]"==It}(_n)||function le(_n){var It=!1;if(null!=_n&&"function"!=typeof _n.toString)try{It=!!(_n+"")}catch{}return It}(_n)?Ae:re;return It.test(function Ot(_n){if(null!=_n){try{return Re.call(_n)}catch{}try{return _n+""}catch{}}return""}(_n))}(rt)?rt:void 0}function li(_n,It){if("function"!=typeof _n||It&&"function"!=typeof It)throw new TypeError("Expected a function");var rt=function(){var lt=arguments,dn=It?It.apply(this,lt):lt[0],Yn=rt.cache;if(Yn.has(dn))return Yn.get(dn);var Ti=_n.apply(this,lt);return rt.cache=Yn.set(dn,Ti),Ti};return rt.cache=new(li.Cache||Qn),rt}function di(_n,It){return _n===It||_n!=_n&&It!=It}function Rt(_n){var It=typeof _n;return!!_n&&("object"==It||"function"==It)}Ce.prototype.clear=function ze(){this.__data__=ee?ee(null):{}},Ce.prototype.delete=function dt(_n){return this.has(_n)&&delete this.__data__[_n]},Ce.prototype.get=function st(_n){var It=this.__data__;if(ee){var rt=It[_n];return rt===ae?void 0:rt}return Le.call(It,_n)?It[_n]:void 0},Ce.prototype.has=function bt(_n){var It=this.__data__;return ee?void 0!==It[_n]:Le.call(It,_n)},Ce.prototype.set=function ut(_n,It){return this.__data__[_n]=ee&&void 0===It?ae:It,this},Vt.prototype.clear=function on(){this.__data__=[]},Vt.prototype.delete=function Ct(_n){var It=this.__data__,rt=Gn(It,_n);return!(rt<0||(rt==It.length-1?It.pop():Se.call(It,rt,1),0))},Vt.prototype.get=function rn(_n){var It=this.__data__,rt=Gn(It,_n);return rt<0?void 0:It[rt][1]},Vt.prototype.has=function Qt(_n){return Gn(this.__data__,_n)>-1},Vt.prototype.set=function Ht(_n,It){var rt=this.__data__,lt=Gn(rt,_n);return lt<0?rt.push([_n,It]):rt[lt][1]=It,this},Qn.prototype.clear=function en(){this.__data__={hash:new Ce,map:new(L||Vt),string:new Ce}},Qn.prototype.delete=function Sn(_n){return ni(this,_n).delete(_n)},Qn.prototype.get=function Pn(_n){return ni(this,_n).get(_n)},Qn.prototype.has=function xt(_n){return ni(this,_n).has(_n)},Qn.prototype.set=function Jt(_n,It){return ni(this,_n).set(_n,It),this},li.Cache=Qn,yt.exports=li},8078:yt=>{var it="Expected a function",j=/^\s+|\s+$/g,oe=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,ie=/^0o[0-7]+$/i,V=parseInt,K="object"==typeof global&&global&&global.Object===Object&&global,q="object"==typeof self&&self&&self.Object===Object&&self,le=K||q||Function("return this")(),De=Object.prototype.toString,xe=Math.max,_e=Math.min,Q=function(){return le.Date.now()};function Ve(ee){var Ce=typeof ee;return!!ee&&("object"==Ce||"function"==Ce)}function L(ee){if("number"==typeof ee)return ee;if(function Se(ee){return"symbol"==typeof ee||function Ae(ee){return!!ee&&"object"==typeof ee}(ee)&&"[object Symbol]"==De.call(ee)}(ee))return NaN;if(Ve(ee)){var Ce="function"==typeof ee.valueOf?ee.valueOf():ee;ee=Ve(Ce)?Ce+"":Ce}if("string"!=typeof ee)return 0===ee?ee:+ee;ee=ee.replace(j,"");var ze=re.test(ee);return ze||ie.test(ee)?V(ee.slice(2),ze?2:8):oe.test(ee)?NaN:+ee}yt.exports=function Le(ee,Ce,ze){var dt=!0,st=!0;if("function"!=typeof ee)throw new TypeError(it);return Ve(ze)&&(dt="leading"in ze?!!ze.leading:dt,st="trailing"in ze?!!ze.trailing:st),function Re(ee,Ce,ze){var dt,st,bt,ut,Vt,on,Ct=0,rn=!1,Qt=!1,Ht=!0;if("function"!=typeof ee)throw new TypeError(it);function Qn(St){var Oe=dt,Ft=st;return dt=st=void 0,Ct=St,ut=ee.apply(Ft,Oe)}function en(St){return Ct=St,Vt=setTimeout(xt,Ce),rn?Qn(St):ut}function Pn(St){var Oe=St-on;return void 0===on||Oe>=Ce||Oe<0||Qt&&St-Ct>=bt}function xt(){var St=Q();if(Pn(St))return Jt(St);Vt=setTimeout(xt,function Sn(St){var Ot=Ce-(St-on);return Qt?_e(Ot,bt-(St-Ct)):Ot}(St))}function Jt(St){return Vt=void 0,Ht&&dt?Qn(St):(dt=st=void 0,ut)}function ni(){var St=Q(),Oe=Pn(St);if(dt=arguments,st=this,on=St,Oe){if(void 0===Vt)return en(on);if(Qt)return Vt=setTimeout(xt,Ce),Qn(on)}return void 0===Vt&&(Vt=setTimeout(xt,Ce)),ut}return Ce=L(Ce)||0,Ve(ze)&&(rn=!!ze.leading,bt=(Qt="maxWait"in ze)?xe(L(ze.maxWait)||0,Ce):bt,Ht="trailing"in ze?!!ze.trailing:Ht),ni.cancel=function Gn(){void 0!==Vt&&clearTimeout(Vt),Ct=0,dt=on=st=Vt=void 0},ni.flush=function ri(){return void 0===Vt?ut:Jt(Q())},ni}(ee,Ce,{leading:dt,maxWait:Ce,trailing:st})}},4994:(yt,it,ae)=>{var ye=ae(4312),j=ae(6421),oe=ae(5764),re=ae(8685),ie=ae(6676);function V(K){var q=-1,le=null==K?0:K.length;for(this.clear();++q<le;){var Te=K[q];this.set(Te[0],Te[1])}}V.prototype.clear=ye,V.prototype.delete=j,V.prototype.get=oe,V.prototype.has=re,V.prototype.set=ie,yt.exports=V},9215:(yt,it,ae)=>{var ye=ae(1840),j=ae(4378),oe=ae(4981),re=ae(7343),ie=ae(8895);function V(K){var q=-1,le=null==K?0:K.length;for(this.clear();++q<le;){var Te=K[q];this.set(Te[0],Te[1])}}V.prototype.clear=ye,V.prototype.delete=j,V.prototype.get=oe,V.prototype.has=re,V.prototype.set=ie,yt.exports=V},1501:(yt,it,ae)=>{var oe=ae(3436)(ae(2119),"Map");yt.exports=oe},9850:(yt,it,ae)=>{var ye=ae(638),j=ae(1184),oe=ae(866),re=ae(3771),ie=ae(1772);function V(K){var q=-1,le=null==K?0:K.length;for(this.clear();++q<le;){var Te=K[q];this.set(Te[0],Te[1])}}V.prototype.clear=ye,V.prototype.delete=j,V.prototype.get=oe,V.prototype.has=re,V.prototype.set=ie,yt.exports=V},443:(yt,it,ae)=>{var ye=ae(2119);yt.exports=ye.Symbol},4633:yt=>{yt.exports=function it(ae,ye){for(var j=-1,oe=null==ae?0:ae.length,re=Array(oe);++j<oe;)re[j]=ye(ae[j],j,ae);return re}},9719:(yt,it,ae)=>{var ye=ae(5683),j=ae(217),re=Object.prototype.hasOwnProperty;yt.exports=function ie(V,K,q){var le=V[K];(!re.call(V,K)||!j(le,q)||void 0===q&&!(K in V))&&ye(V,K,q)}},3503:(yt,it,ae)=>{var ye=ae(217);yt.exports=function j(oe,re){for(var ie=oe.length;ie--;)if(ye(oe[ie][0],re))return ie;return-1}},5683:(yt,it,ae)=>{var ye=ae(6713);yt.exports=function j(oe,re,ie){"__proto__"==re&&ye?ye(oe,re,{configurable:!0,enumerable:!0,value:ie,writable:!0}):oe[re]=ie}},5456:(yt,it,ae)=>{var ye=ae(6884),j=ae(8533);yt.exports=function oe(re,ie){for(var V=0,K=(ie=ye(ie,re)).length;null!=re&&V<K;)re=re[j(ie[V++])];return V&&V==K?re:void 0}},3337:(yt,it,ae)=>{var ye=ae(443),j=ae(1318),oe=ae(2902),V=ye?ye.toStringTag:void 0;yt.exports=function K(q){return null==q?void 0===q?"[object Undefined]":"[object Null]":V&&V in Object(q)?j(q):oe(q)}},7304:(yt,it,ae)=>{var ye=ae(5946),j=ae(1943),oe=ae(5940),re=ae(2827),V=/^\[object .+?Constructor\]$/,De=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");yt.exports=function xe(_e){return!(!oe(_e)||j(_e))&&(ye(_e)?De:V).test(re(_e))}},5963:(yt,it,ae)=>{var ye=ae(9719),j=ae(6884),oe=ae(8442),re=ae(5940),ie=ae(8533);yt.exports=function V(K,q,le,Te){if(!re(K))return K;for(var De=-1,xe=(q=j(q,K)).length,_e=xe-1,Q=K;null!=Q&&++De<xe;){var Re=ie(q[De]),Le=le;if("__proto__"===Re||"constructor"===Re||"prototype"===Re)return K;if(De!=_e){var Ve=Q[Re];void 0===(Le=Te?Te(Ve,Re,Q):void 0)&&(Le=re(Ve)?Ve:oe(q[De+1])?[]:{})}ye(Q,Re,Le),Q=Q[Re]}return K}},3935:(yt,it,ae)=>{var ye=ae(443),j=ae(4633),oe=ae(9460),re=ae(4129),V=ye?ye.prototype:void 0,K=V?V.toString:void 0;yt.exports=function q(le){if("string"==typeof le)return le;if(oe(le))return j(le,q)+"";if(re(le))return K?K.call(le):"";var Te=le+"";return"0"==Te&&1/le==-1/0?"-0":Te}},3348:(yt,it,ae)=>{var ye=ae(2760),j=/^\s+/;yt.exports=function oe(re){return re&&re.slice(0,ye(re)+1).replace(j,"")}},6884:(yt,it,ae)=>{var ye=ae(9460),j=ae(5352),oe=ae(2855),re=ae(3943);yt.exports=function ie(V,K){return ye(V)?V:j(V,K)?[V]:oe(re(V))}},9454:yt=>{yt.exports=function it(ae,ye){var j=-1,oe=ae.length;for(ye||(ye=Array(oe));++j<oe;)ye[j]=ae[j];return ye}},4610:(yt,it,ae)=>{var ye=ae(2119);yt.exports=ye["__core-js_shared__"]},6713:(yt,it,ae)=>{var ye=ae(3436),j=function(){try{var oe=ye(Object,"defineProperty");return oe({},"",{}),oe}catch{}}();yt.exports=j},9122:yt=>{var it="object"==typeof global&&global&&global.Object===Object&&global;yt.exports=it},4537:(yt,it,ae)=>{var ye=ae(3819);yt.exports=function j(oe,re){var ie=oe.__data__;return ye(re)?ie["string"==typeof re?"string":"hash"]:ie.map}},3436:(yt,it,ae)=>{var ye=ae(7304),j=ae(1990);yt.exports=function oe(re,ie){var V=j(re,ie);return ye(V)?V:void 0}},1318:(yt,it,ae)=>{var ye=ae(443),j=Object.prototype,oe=j.hasOwnProperty,re=j.toString,ie=ye?ye.toStringTag:void 0;yt.exports=function V(K){var q=oe.call(K,ie),le=K[ie];try{K[ie]=void 0;var Te=!0}catch{}var De=re.call(K);return Te&&(q?K[ie]=le:delete K[ie]),De}},1990:yt=>{yt.exports=function it(ae,ye){return ae?.[ye]}},4312:(yt,it,ae)=>{var ye=ae(862);yt.exports=function j(){this.__data__=ye?ye(null):{},this.size=0}},6421:yt=>{yt.exports=function it(ae){var ye=this.has(ae)&&delete this.__data__[ae];return this.size-=ye?1:0,ye}},5764:(yt,it,ae)=>{var ye=ae(862),re=Object.prototype.hasOwnProperty;yt.exports=function ie(V){var K=this.__data__;if(ye){var q=K[V];return"__lodash_hash_undefined__"===q?void 0:q}return re.call(K,V)?K[V]:void 0}},8685:(yt,it,ae)=>{var ye=ae(862),oe=Object.prototype.hasOwnProperty;yt.exports=function re(ie){var V=this.__data__;return ye?void 0!==V[ie]:oe.call(V,ie)}},6676:(yt,it,ae)=>{var ye=ae(862);yt.exports=function oe(re,ie){var V=this.__data__;return this.size+=this.has(re)?0:1,V[re]=ye&&void 0===ie?"__lodash_hash_undefined__":ie,this}},8442:yt=>{var ae=/^(?:0|[1-9]\d*)$/;yt.exports=function ye(j,oe){var re=typeof j;return!!(oe=oe??9007199254740991)&&("number"==re||"symbol"!=re&&ae.test(j))&&j>-1&&j%1==0&&j<oe}},5352:(yt,it,ae)=>{var ye=ae(9460),j=ae(4129),oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/;yt.exports=function ie(V,K){if(ye(V))return!1;var q=typeof V;return!("number"!=q&&"symbol"!=q&&"boolean"!=q&&null!=V&&!j(V))||re.test(V)||!oe.test(V)||null!=K&&V in Object(K)}},3819:yt=>{yt.exports=function it(ae){var ye=typeof ae;return"string"==ye||"number"==ye||"symbol"==ye||"boolean"==ye?"__proto__"!==ae:null===ae}},1943:(yt,it,ae)=>{var re,ye=ae(4610),j=(re=/[^.]+$/.exec(ye&&ye.keys&&ye.keys.IE_PROTO||""))?"Symbol(src)_1."+re:"";yt.exports=function oe(re){return!!j&&j in re}},1840:yt=>{yt.exports=function it(){this.__data__=[],this.size=0}},4378:(yt,it,ae)=>{var ye=ae(3503),oe=Array.prototype.splice;yt.exports=function re(ie){var V=this.__data__,K=ye(V,ie);return!(K<0||(K==V.length-1?V.pop():oe.call(V,K,1),--this.size,0))}},4981:(yt,it,ae)=>{var ye=ae(3503);yt.exports=function j(oe){var re=this.__data__,ie=ye(re,oe);return ie<0?void 0:re[ie][1]}},7343:(yt,it,ae)=>{var ye=ae(3503);yt.exports=function j(oe){return ye(this.__data__,oe)>-1}},8895:(yt,it,ae)=>{var ye=ae(3503);yt.exports=function j(oe,re){var ie=this.__data__,V=ye(ie,oe);return V<0?(++this.size,ie.push([oe,re])):ie[V][1]=re,this}},638:(yt,it,ae)=>{var ye=ae(4994),j=ae(9215),oe=ae(1501);yt.exports=function re(){this.size=0,this.__data__={hash:new ye,map:new(oe||j),string:new ye}}},1184:(yt,it,ae)=>{var ye=ae(4537);yt.exports=function j(oe){var re=ye(this,oe).delete(oe);return this.size-=re?1:0,re}},866:(yt,it,ae)=>{var ye=ae(4537);yt.exports=function j(oe){return ye(this,oe).get(oe)}},3771:(yt,it,ae)=>{var ye=ae(4537);yt.exports=function j(oe){return ye(this,oe).has(oe)}},1772:(yt,it,ae)=>{var ye=ae(4537);yt.exports=function j(oe,re){var ie=ye(this,oe),V=ie.size;return ie.set(oe,re),this.size+=ie.size==V?0:1,this}},719:(yt,it,ae)=>{var ye=ae(535);yt.exports=function oe(re){var ie=ye(re,function(K){return 500===V.size&&V.clear(),K}),V=ie.cache;return ie}},862:(yt,it,ae)=>{var j=ae(3436)(Object,"create");yt.exports=j},2902:yt=>{var ae=Object.prototype.toString;yt.exports=function ye(j){return ae.call(j)}},2119:(yt,it,ae)=>{var ye=ae(9122),j="object"==typeof self&&self&&self.Object===Object&&self,oe=ye||j||Function("return this")();yt.exports=oe},2855:(yt,it,ae)=>{var ye=ae(719),j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/\\(\\)?/g,re=ye(function(ie){var V=[];return 46===ie.charCodeAt(0)&&V.push(""),ie.replace(j,function(K,q,le,Te){V.push(le?Te.replace(oe,"$1"):q||K)}),V});yt.exports=re},8533:(yt,it,ae)=>{var ye=ae(4129);yt.exports=function oe(re){if("string"==typeof re||ye(re))return re;var ie=re+"";return"0"==ie&&1/re==-1/0?"-0":ie}},2827:yt=>{var ae=Function.prototype.toString;yt.exports=function ye(j){if(null!=j){try{return ae.call(j)}catch{}try{return j+""}catch{}}return""}},2760:yt=>{var it=/\s/;yt.exports=function ae(ye){for(var j=ye.length;j--&&it.test(ye.charAt(j)););return j}},406:(yt,it,ae)=>{var ye=ae(5940),j=ae(1710),oe=ae(1467),ie=Math.max,V=Math.min;yt.exports=function K(q,le,Te){var De,xe,_e,Q,Re,Le,Ve=0,Ae=!1,Se=!1,L=!0;if("function"!=typeof q)throw new TypeError("Expected a function");function ee(Ct){var rn=De,Qt=xe;return De=xe=void 0,Ve=Ct,Q=q.apply(Qt,rn)}function Ce(Ct){return Ve=Ct,Re=setTimeout(st,le),Ae?ee(Ct):Q}function dt(Ct){var rn=Ct-Le;return void 0===Le||rn>=le||rn<0||Se&&Ct-Ve>=_e}function st(){var Ct=j();if(dt(Ct))return bt(Ct);Re=setTimeout(st,function ze(Ct){var Ht=le-(Ct-Le);return Se?V(Ht,_e-(Ct-Ve)):Ht}(Ct))}function bt(Ct){return Re=void 0,L&&De?ee(Ct):(De=xe=void 0,Q)}function on(){var Ct=j(),rn=dt(Ct);if(De=arguments,xe=this,Le=Ct,rn){if(void 0===Re)return Ce(Le);if(Se)return clearTimeout(Re),Re=setTimeout(st,le),ee(Le)}return void 0===Re&&(Re=setTimeout(st,le)),Q}return le=oe(le)||0,ye(Te)&&(Ae=!!Te.leading,_e=(Se="maxWait"in Te)?ie(oe(Te.maxWait)||0,le):_e,L="trailing"in Te?!!Te.trailing:L),on.cancel=function ut(){void 0!==Re&&clearTimeout(Re),Ve=0,De=Le=xe=Re=void 0},on.flush=function Vt(){return void 0===Re?Q:bt(j())},on}},217:yt=>{yt.exports=function it(ae,ye){return ae===ye||ae!=ae&&ye!=ye}},8817:(yt,it,ae)=>{var ye=ae(5456);yt.exports=function j(oe,re,ie){var V=null==oe?void 0:ye(oe,re);return void 0===V?ie:V}},9460:yt=>{yt.exports=Array.isArray},5946:(yt,it,ae)=>{var ye=ae(3337),j=ae(5940);yt.exports=function K(q){if(!j(q))return!1;var le=ye(q);return"[object Function]"==le||"[object GeneratorFunction]"==le||"[object AsyncFunction]"==le||"[object Proxy]"==le}},5940:yt=>{yt.exports=function it(ae){var ye=typeof ae;return null!=ae&&("object"==ye||"function"==ye)}},2671:yt=>{yt.exports=function it(ae){return null!=ae&&"object"==typeof ae}},4129:(yt,it,ae)=>{var ye=ae(3337),j=ae(2671);yt.exports=function re(ie){return"symbol"==typeof ie||j(ie)&&"[object Symbol]"==ye(ie)}},7489:function(yt,it,ae){var ye;yt=ae.nmd(yt),function(){var j,V="Expected a function",q="__lodash_hash_undefined__",Te="__lodash_placeholder__",Ht=1/0,Qn=9007199254740991,Pn=4294967295,Gn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ri="[object Arguments]",ni="[object Array]",Oe="[object Boolean]",Ft="[object Date]",li="[object Error]",di="[object Function]",Gt="[object GeneratorFunction]",Rt="[object Map]",_n="[object Number]",rt="[object Object]",lt="[object Promise]",Yn="[object RegExp]",Ti="[object Set]",Di="[object String]",us="[object Symbol]",Hr="[object WeakMap]",nr="[object ArrayBuffer]",fr="[object DataView]",y="[object Float32Array]",l="[object Float64Array]",d="[object Int8Array]",_="[object Int16Array]",C="[object Int32Array]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",N="[object Uint16Array]",z="[object Uint32Array]",D=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,Z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,R=/[&<>"']/g,Y=RegExp($.source),he=RegExp(R.source),me=/<%-([\s\S]+?)%>/g,ve=/<%([\s\S]+?)%>/g,ge=/<%=([\s\S]+?)%>/g,pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,de=/^\w*$/,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ke=/[\\^$.*+?()[\]{}|]/g,Xe=RegExp(ke.source),je=/^\s+/,nt=/\s/,pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gt=/\{\n\/\* \[wrapped with (.+)\] \*/,Wt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bt=/[()=,{}\[\]\/\s]/,qt=/\\(\\)?/g,Pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,We=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,we=/^0b[01]+$/i,Ue=/^\[object .+?Constructor\]$/,ct=/^0o[0-7]+$/i,Dt=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,nn=/($^)/,On=/['\n\r\u2028\u2029\\]/g,jn="\\ud800-\\udfff",Ei="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ai="\\u2700-\\u27bf",or="a-z\\xdf-\\xf6\\xf8-\\xff",rs="A-Z\\xc0-\\xd6\\xd8-\\xde",ss="\\ufe0e\\ufe0f",Xr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",La="["+jn+"]",eo="["+Xr+"]",Qi="["+Ei+"]",Ea="\\d+",As="["+Ai+"]",B="["+or+"]",Be="[^"+jn+Xr+Ea+Ai+or+rs+"]",Mt="\\ud83c[\\udffb-\\udfff]",An="[^"+jn+"]",qn="(?:\\ud83c[\\udde6-\\uddff]){2}",Xi="[\\ud800-\\udbff][\\udc00-\\udfff]",lr="["+rs+"]",Ys="(?:"+B+"|"+Be+")",ba="(?:"+lr+"|"+Be+")",to="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Bn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Zs="(?:"+Qi+"|"+Mt+")?",Zl="["+ss+"]?",xl=Zl+Zs+"(?:\\u200d(?:"+[An,qn,Xi].join("|")+")"+Zl+Zs+")*",$a="(?:"+[As,qn,Xi].join("|")+")"+xl,th="(?:"+[An+Qi+"?",Qi,qn,Xi,La].join("|")+")",lm=RegExp("['\u2019]","g"),Cu=RegExp(Qi,"g"),Zr=RegExp(Mt+"(?="+Mt+")|"+th+xl,"g"),op=RegExp([lr+"?"+B+"+"+to+"(?="+[eo,lr,"$"].join("|")+")",ba+"+"+Bn+"(?="+[eo,lr+Ys,"$"].join("|")+")",lr+"?"+Ys+"+"+to,lr+"+"+Bn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ea,$a].join("|"),"g"),Ps=RegExp("[\\u200d"+jn+Ei+ss+"]"),Gu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,um=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qm=-1,Al={};Al[y]=Al[l]=Al[d]=Al[_]=Al[C]=Al[S]=Al[k]=Al[N]=Al[z]=!0,Al[ri]=Al[ni]=Al[nr]=Al[Oe]=Al[fr]=Al[Ft]=Al[li]=Al[di]=Al[Rt]=Al[_n]=Al[rt]=Al[Yn]=Al[Ti]=Al[Di]=Al[Hr]=!1;var ul={};ul[ri]=ul[ni]=ul[nr]=ul[fr]=ul[Oe]=ul[Ft]=ul[y]=ul[l]=ul[d]=ul[_]=ul[C]=ul[Rt]=ul[_n]=ul[rt]=ul[Yn]=ul[Ti]=ul[Di]=ul[us]=ul[S]=ul[k]=ul[N]=ul[z]=!0,ul[li]=ul[di]=ul[Hr]=!1;var _g={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ua=parseFloat,cm=parseInt,yg="object"==typeof global&&global&&global.Object===Object&&global,Wu="object"==typeof self&&self&&self.Object===Object&&self,Lu=yg||Wu||Function("return this")(),qv=it&&!it.nodeType&&it,nh=qv&&yt&&!yt.nodeType&&yt,vc=nh&&nh.exports===qv,Jm=vc&&yg.process,Bh=function(){try{return nh&&nh.require&&nh.require("util").types||Jm&&Jm.binding&&Jm.binding("util")}catch{}}(),fl=Bh&&Bh.isArrayBuffer,ho=Bh&&Bh.isDate,ev=Bh&&Bh.isMap,tv=Bh&&Bh.isRegExp,gh=Bh&&Bh.isSet,no=Bh&&Bh.isTypedArray;function pl(vi,ar,Yi){switch(Yi.length){case 0:return vi.call(ar);case 1:return vi.call(ar,Yi[0]);case 2:return vi.call(ar,Yi[0],Yi[1]);case 3:return vi.call(ar,Yi[0],Yi[1],Yi[2])}return vi.apply(ar,Yi)}function Kd(vi,ar,Yi,Ns){for(var ka=-1,Do=null==vi?0:vi.length;++ka<Do;){var El=vi[ka];ar(Ns,El,Yi(El),vi)}return Ns}function tl(vi,ar){for(var Yi=-1,Ns=null==vi?0:vi.length;++Yi<Ns&&!1!==ar(vi[Yi],Yi,vi););return vi}function Ul(vi,ar){for(var Yi=null==vi?0:vi.length;Yi--&&!1!==ar(vi[Yi],Yi,vi););return vi}function No(vi,ar){for(var Yi=-1,Ns=null==vi?0:vi.length;++Yi<Ns;)if(!ar(vi[Yi],Yi,vi))return!1;return!0}function mh(vi,ar){for(var Yi=-1,Ns=null==vi?0:vi.length,ka=0,Do=[];++Yi<Ns;){var El=vi[Yi];ar(El,Yi,vi)&&(Do[ka++]=El)}return Do}function Sd(vi,ar){return!(null==vi||!vi.length)&&qa(vi,ar,0)>-1}function hs(vi,ar,Yi){for(var Ns=-1,ka=null==vi?0:vi.length;++Ns<ka;)if(Yi(ar,vi[Ns]))return!0;return!1}function Il(vi,ar){for(var Yi=-1,Ns=null==vi?0:vi.length,ka=Array(Ns);++Yi<Ns;)ka[Yi]=ar(vi[Yi],Yi,vi);return ka}function zh(vi,ar){for(var Yi=-1,Ns=ar.length,ka=vi.length;++Yi<Ns;)vi[ka+Yi]=ar[Yi];return vi}function Zd(vi,ar,Yi,Ns){var ka=-1,Do=null==vi?0:vi.length;for(Ns&&Do&&(Yi=vi[++ka]);++ka<Do;)Yi=ar(Yi,vi[ka],ka,vi);return Yi}function ks(vi,ar,Yi,Ns){var ka=null==vi?0:vi.length;for(Ns&&ka&&(Yi=vi[--ka]);ka--;)Yi=ar(Yi,vi[ka],ka,vi);return Yi}function bg(vi,ar){for(var Yi=-1,Ns=null==vi?0:vi.length;++Yi<Ns;)if(ar(vi[Yi],Yi,vi))return!0;return!1}var nv=Ta("length");function $o(vi,ar,Yi){var Ns;return Yi(vi,function(ka,Do,El){if(ar(ka,Do,El))return Ns=Do,!1}),Ns}function Sl(vi,ar,Yi,Ns){for(var ka=vi.length,Do=Yi+(Ns?1:-1);Ns?Do--:++Do<ka;)if(ar(vi[Do],Do,vi))return Do;return-1}function qa(vi,ar,Yi){return ar==ar?function Td(vi,ar,Yi){for(var Ns=Yi-1,ka=vi.length;++Ns<ka;)if(vi[Ns]===ar)return Ns;return-1}(vi,ar,Yi):Sl(vi,Jl,Yi)}function _c(vi,ar,Yi,Ns){for(var ka=Yi-1,Do=vi.length;++ka<Do;)if(Ns(vi[ka],ar))return ka;return-1}function Jl(vi){return vi!=vi}function Ss(vi,ar){var Yi=null==vi?0:vi.length;return Yi?lu(vi,ar)/Yi:NaN}function Ta(vi){return function(ar){return null==ar?j:ar[vi]}}function gl(vi){return function(ar){return null==vi?j:vi[ar]}}function ju(vi,ar,Yi,Ns,ka){return ka(vi,function(Do,El,kn){Yi=Ns?(Ns=!1,Do):ar(Yi,Do,El,kn)}),Yi}function lu(vi,ar){for(var Yi,Ns=-1,ka=vi.length;++Ns<ka;){var Do=ar(vi[Ns]);Do!==j&&(Yi=Yi===j?Do:Yi+Do)}return Yi}function Vh(vi,ar){for(var Yi=-1,Ns=Array(vi);++Yi<vi;)Ns[Yi]=ar(Yi);return Ns}function Qd(vi){return vi&&vi.slice(0,$u(vi)+1).replace(je,"")}function wu(vi){return function(ar){return vi(ar)}}function Ua(vi,ar){return Il(ar,function(Yi){return vi[Yi]})}function Rl(vi,ar){return vi.has(ar)}function Rc(vi,ar){for(var Yi=-1,Ns=vi.length;++Yi<Ns&&qa(ar,vi[Yi],0)>-1;);return Yi}function Ha(vi,ar){for(var Yi=vi.length;Yi--&&qa(ar,vi[Yi],0)>-1;);return Yi}function ud(vi,ar){for(var Yi=vi.length,Ns=0;Yi--;)vi[Yi]===ar&&++Ns;return Ns}var oo=gl({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Jd=gl({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ih(vi){return"\\"+_g[vi]}function pu(vi){return Ps.test(vi)}function Ed(vi){var ar=-1,Yi=Array(vi.size);return vi.forEach(function(Ns,ka){Yi[++ar]=[ka,Ns]}),Yi}function Df(vi,ar){return function(Yi){return vi(ar(Yi))}}function Ol(vi,ar){for(var Yi=-1,Ns=vi.length,ka=0,Do=[];++Yi<Ns;){var El=vi[Yi];(El===ar||El===Te)&&(vi[Yi]=Te,Do[ka++]=Yi)}return Do}function cd(vi){var ar=-1,Yi=Array(vi.size);return vi.forEach(function(Ns){Yi[++ar]=Ns}),Yi}function Hl(vi){return pu(vi)?function hm(vi){for(var ar=Zr.lastIndex=0;Zr.test(vi);)++ar;return ar}(vi):nv(vi)}function cl(vi){return pu(vi)?function Pf(vi){return vi.match(Zr)||[]}(vi):function Qs(vi){return vi.split("")}(vi)}function $u(vi){for(var ar=vi.length;ar--&&nt.test(vi.charAt(ar)););return ar}var Hh=gl({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ef=function vi(ar){var I,Yi=(ar=null==ar?Lu:ef.defaults(Lu.Object(),ar,ef.pick(Lu,um))).Array,Ns=ar.Date,ka=ar.Error,Do=ar.Function,El=ar.Math,kn=ar.Object,ui=ar.RegExp,Wi=ar.String,ir=ar.TypeError,pa=Yi.prototype,Ca=kn.prototype,xo=ar["__core-js_shared__"],rh=Do.prototype.toString,bo=Ca.hasOwnProperty,Cg=0,kf=(I=/[^.]+$/.exec(xo&&xo.keys&&xo.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",wg=Ca.toString,wb=rh.call(kn),Xy=Lu._,Rp=ui("^"+rh.call(bo).replace(ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),iv=vc?ar.Buffer:j,Tl=ar.Symbol,up=ar.Uint8Array,Y_=iv?iv.allocUnsafe:j,Op=Df(kn.getPrototypeOf,kn),Xv=kn.create,rv=Ca.propertyIsEnumerable,dm=pa.splice,fm=Tl?Tl.isConcatSpreadable:j,xg=Tl?Tl.iterator:j,Fl=Tl?Tl.toStringTag:j,Fp=function(){try{var I=Xf(kn,"defineProperty");return I({},"",{}),I}catch{}}(),K_=ar.clearTimeout!==Lu.clearTimeout&&ar.clearTimeout,sv=Ns&&Ns.now!==Lu.Date.now&&Ns.now,Z_=ar.setTimeout!==Lu.setTimeout&&ar.setTimeout,Yv=El.ceil,vl=El.floor,pm=kn.getOwnPropertySymbols,Ag=iv?iv.isBuffer:j,gm=ar.isFinite,dd=pa.join,Yy=Df(kn.keys,kn),Sa=El.max,xu=El.min,Oc=Ns.now,Po=ar.parseInt,qo=El.random,Gs=pa.reverse,io=Xf(ar,"DataView"),na=Xf(ar,"Map"),mm=Xf(ar,"Promise"),da=Xf(ar,"Set"),_a=Xf(ar,"WeakMap"),Fc=Xf(kn,"create"),tf=_a&&new _a,Ig={},Ky=Ud(io),Q_=Ud(na),lo=Ud(mm),sh=Ud(da),br=Ud(_a),Na=Tl?Tl.prototype:j,gn=Na?Na.valueOf:j,vn=Na?Na.toString:j;function ln(I){if(rr(I)&&!Rr(I)&&!(I instanceof Ga)){if(I instanceof _l)return I;if(bo.call(I,"__wrapped__"))return Lm(I)}return new _l(I)}var Xo=function(){function I(){}return function(F){if(!gs(F))return{};if(Xv)return Xv(F);I.prototype=F;var Ie=new I;return I.prototype=j,Ie}}();function zo(){}function _l(I,F){this.__wrapped__=I,this.__actions__=[],this.__chain__=!!F,this.__index__=0,this.__values__=j}function Ga(I){this.__wrapped__=I,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pn,this.__views__=[]}function qu(I){var F=-1,Ie=null==I?0:I.length;for(this.clear();++F<Ie;){var ht=I[F];this.set(ht[0],ht[1])}}function Au(I){var F=-1,Ie=null==I?0:I.length;for(this.clear();++F<Ie;){var ht=I[F];this.set(ht[0],ht[1])}}function ga(I){var F=-1,Ie=null==I?0:I.length;for(this.clear();++F<Ie;){var ht=I[F];this.set(ht[0],ht[1])}}function Bs(I){var F=-1,Ie=null==I?0:I.length;for(this.__data__=new ga;++F<Ie;)this.add(I[F])}function yl(I){var F=this.__data__=new Au(I);this.size=F.size}function nu(I,F){var Ie=Rr(I),ht=!Ie&&ia(I),tn=!Ie&&!ht&&oa(I),wn=!Ie&&!ht&&!tn&&Gc(I),ei=Ie||ht||tn||wn,fi=ei?Vh(I.length,Wi):[],Mi=fi.length;for(var kr in I)(F||bo.call(I,kr))&&(!ei||!("length"==kr||tn&&("offset"==kr||"parent"==kr)||wn&&("buffer"==kr||"byteLength"==kr||"byteOffset"==kr)||Ac(kr,Mi)))&&fi.push(kr);return fi}function Zv(I){var F=I.length;return F?I[lf(0,F-1)]:j}function Qv(I,F){return gf(po(I),gp(F,0,I.length))}function ym(I){return gf(po(I))}function bm(I,F,Ie){(Ie!==j&&!sa(I[F],Ie)||Ie===j&&!(F in I))&&Dd(I,F,Ie)}function dp(I,F,Ie){var ht=I[F];(!bo.call(I,F)||!sa(ht,Ie)||Ie===j&&!(F in I))&&Dd(I,F,Ie)}function av(I,F){for(var Ie=I.length;Ie--;)if(sa(I[Ie][0],F))return Ie;return-1}function fp(I,F,Ie,ht){return nf(I,function(tn,wn,ei){F(ht,tn,Ie(tn),ei)}),ht}function Nf(I,F){return I&&wc(F,qc(F),I)}function Dd(I,F,Ie){"__proto__"==F&&Fp?Fp(I,F,{configurable:!0,enumerable:!0,value:Ie,writable:!0}):I[F]=Ie}function pp(I,F){for(var Ie=-1,ht=F.length,tn=Yi(ht),wn=null==I;++Ie<ht;)tn[Ie]=wn?j:Lb(I,F[Ie]);return tn}function gp(I,F,Ie){return I==I&&(Ie!==j&&(I=I<=Ie?I:Ie),F!==j&&(I=I>=F?I:F)),I}function Iu(I,F,Ie,ht,tn,wn){var ei,fi=1&F,Mi=2&F,kr=4&F;if(Ie&&(ei=tn?Ie(I,ht,tn,wn):Ie(I)),ei!==j)return ei;if(!gs(I))return I;var Or=Rr(I);if(Or){if(ei=function yd(I){var F=I.length,Ie=new I.constructor(F);return F&&"string"==typeof I[0]&&bo.call(I,"index")&&(Ie.index=I.index,Ie.input=I.input),Ie}(I),!fi)return po(I,ei)}else{var Qr=$l(I),zs=Qr==di||Qr==Gt;if(oa(I))return Ch(I,fi);if(Qr==rt||Qr==ri||zs&&!tn){if(ei=Mi||zs?{}:Og(I),!fi)return Mi?function Wp(I,F){return wc(I,Rg(I),F)}(I,function Cm(I,F){return I&&wc(F,Sh(F),I)}(ei,I)):function md(I,F){return wc(I,Yp(I),F)}(I,Nf(ei,I))}else{if(!ul[Qr])return tn?I:{};ei=function pv(I,F,Ie){var ht=I.constructor;switch(F){case nr:return Fu(I);case Oe:case Ft:return new ht(+I);case fr:return function Cc(I,F){var Ie=F?Fu(I.buffer):I.buffer;return new I.constructor(Ie,I.byteOffset,I.byteLength)}(I,Ie);case y:case l:case d:case _:case C:case S:case k:case N:case z:return ac(I,Ie);case Rt:return new ht;case _n:case Di:return new ht(I);case Yn:return function Vo(I){var F=new I.constructor(I.source,We.exec(I));return F.lastIndex=I.lastIndex,F}(I);case Ti:return new ht;case us:return function uv(I){return gn?kn(gn.call(I)):{}}(I)}}(I,Qr,fi)}}wn||(wn=new yl);var Js=wn.get(I);if(Js)return Js;wn.set(I,ei),ru(I)?I.forEach(function(Ra){ei.add(Iu(Ra,F,Ie,Ra,I,wn))}):Ws(I)&&I.forEach(function(Ra,Io){ei.set(Io,Iu(Ra,F,Ie,Io,I,wn))});var Co=Or?j:(kr?Mi?qf:Ah:Mi?Sh:qc)(I);return tl(Co||I,function(Ra,Io){Co&&(Ra=I[Io=Ra]),dp(ei,Io,Iu(Ra,F,Ie,Io,I,wn))}),ei}function J_(I,F,Ie){var ht=Ie.length;if(null==I)return!ht;for(I=kn(I);ht--;){var tn=Ie[ht],ei=I[tn];if(ei===j&&!(tn in I)||!(0,F[tn])(ei))return!1}return!0}function ey(I,F,Ie){if("function"!=typeof I)throw new ir(V);return zd(function(){I.apply(j,Ie)},F)}function Bf(I,F,Ie,ht){var tn=-1,wn=Sd,ei=!0,fi=I.length,Mi=[],kr=F.length;if(!fi)return Mi;Ie&&(F=Il(F,wu(Ie))),ht?(wn=hs,ei=!1):F.length>=200&&(wn=Rl,ei=!1,F=new Bs(F));e:for(;++tn<fi;){var Or=I[tn],Qr=null==Ie?Or:Ie(Or);if(Or=ht||0!==Or?Or:0,ei&&Qr==Qr){for(var zs=kr;zs--;)if(F[zs]===Qr)continue e;Mi.push(Or)}else wn(F,Qr,ht)||Mi.push(Or)}return Mi}ln.templateSettings={escape:me,evaluate:ve,interpolate:ge,variable:"",imports:{_:ln}},(ln.prototype=zo.prototype).constructor=ln,(_l.prototype=Xo(zo.prototype)).constructor=_l,(Ga.prototype=Xo(zo.prototype)).constructor=Ga,qu.prototype.clear=function Nl(){this.__data__=Fc?Fc(null):{},this.size=0},qu.prototype.delete=function Yo(I){var F=this.has(I)&&delete this.__data__[I];return this.size-=F?1:0,F},qu.prototype.get=function eu(I){var F=this.__data__;if(Fc){var Ie=F[I];return Ie===q?j:Ie}return bo.call(F,I)?F[I]:j},qu.prototype.has=function bs(I){var F=this.__data__;return Fc?F[I]!==j:bo.call(F,I)},qu.prototype.set=function Md(I,F){var Ie=this.__data__;return this.size+=this.has(I)?0:1,Ie[I]=Fc&&F===j?q:F,this},Au.prototype.clear=function Rf(){this.__data__=[],this.size=0},Au.prototype.delete=function Bp(I){var F=this.__data__,Ie=av(F,I);return!(Ie<0||(Ie==F.length-1?F.pop():dm.call(F,Ie,1),--this.size,0))},Au.prototype.get=function Of(I){var F=this.__data__,Ie=av(F,I);return Ie<0?j:F[Ie][1]},Au.prototype.has=function cp(I){return av(this.__data__,I)>-1},Au.prototype.set=function Wh(I,F){var Ie=this.__data__,ht=av(Ie,I);return ht<0?(++this.size,Ie.push([I,F])):Ie[ht][1]=F,this},ga.prototype.clear=function Nc(){this.size=0,this.__data__={hash:new qu,map:new(na||Au),string:new qu}},ga.prototype.delete=function vm(I){var F=Xp(this,I).delete(I);return this.size-=F?1:0,F},ga.prototype.get=function Ba(I){return Xp(this,I).get(I)},ga.prototype.has=function Kv(I){return Xp(this,I).has(I)},ga.prototype.set=function _m(I,F){var Ie=Xp(this,I),ht=Ie.size;return Ie.set(I,F),this.size+=Ie.size==ht?0:1,this},Bs.prototype.add=Bs.prototype.push=function Bl(I){return this.__data__.set(I,q),this},Bs.prototype.has=function Xu(I){return this.__data__.has(I)},yl.prototype.clear=function tu(){this.__data__=new Au,this.size=0},yl.prototype.delete=function ku(I){var F=this.__data__,Ie=F.delete(I);return this.size=F.size,Ie},yl.prototype.get=function Ff(I){return this.__data__.get(I)},yl.prototype.has=function yc(I){return this.__data__.has(I)},yl.prototype.set=function hp(I,F){var Ie=this.__data__;if(Ie instanceof Au){var ht=Ie.__data__;if(!na||ht.length<199)return ht.push([I,F]),this.size=++Ie.size,this;Ie=this.__data__=new ga(ht)}return Ie.set(I,F),this.size=Ie.size,this};var nf=_p(Bc),Jv=_p(Ld,!0);function Zy(I,F){var Ie=!0;return nf(I,function(ht,tn,wn){return Ie=!!F(ht,tn,wn)}),Ie}function e_(I,F,Ie){for(var ht=-1,tn=I.length;++ht<tn;){var wn=I[ht],ei=F(wn);if(null!=ei&&(fi===j?ei==ei&&!ec(ei):Ie(ei,fi)))var fi=ei,Mi=wn}return Mi}function Tg(I,F){var Ie=[];return nf(I,function(ht,tn,wn){F(ht,tn,wn)&&Ie.push(ht)}),Ie}function gu(I,F,Ie,ht,tn){var wn=-1,ei=I.length;for(Ie||(Ie=ql),tn||(tn=[]);++wn<ei;){var fi=I[wn];F>0&&Ie(fi)?F>1?gu(fi,F-1,Ie,ht,tn):zh(tn,fi):ht||(tn[tn.length]=fi)}return tn}var zf=yp(),Pd=yp(!0);function Bc(I,F){return I&&zf(I,F,qc)}function Ld(I,F){return I&&Pd(I,F,qc)}function fd(I,F){return mh(F,function(Ie){return hi(I[Ie])})}function jh(I,F){for(var Ie=0,ht=(F=sc(F,I)).length;null!=I&&Ie<ht;)I=I[ed(F[Ie++])];return Ie&&Ie==ht?I:j}function _h(I,F,Ie){var ht=F(I);return Rr(I)?ht:zh(ht,Ie(I))}function bl(I){return null==I?I===j?"[object Undefined]":"[object Null]":Fl&&Fl in kn(I)?function Cp(I){var F=bo.call(I,Fl),Ie=I[Fl];try{I[Fl]=j;var ht=!0}catch{}var tn=wg.call(I);return ht&&(F?I[Fl]=Ie:delete I[Fl]),tn}(I):function Qy(I){return wg.call(I)}(I)}function rf(I,F){return I>F}function ov(I,F){return null!=I&&bo.call(I,F)}function wm(I,F){return null!=I&&F in kn(I)}function yh(I,F,Ie){for(var ht=Ie?hs:Sd,tn=I[0].length,wn=I.length,ei=wn,fi=Yi(wn),Mi=1/0,kr=[];ei--;){var Or=I[ei];ei&&F&&(Or=Il(Or,wu(F))),Mi=xu(Or.length,Mi),fi[ei]=!Ie&&(F||tn>=120&&Or.length>=120)?new Bs(ei&&Or):j}Or=I[0];var Qr=-1,zs=fi[0];e:for(;++Qr<tn&&kr.length<Mi;){var Js=Or[Qr],Pa=F?F(Js):Js;if(Js=Ie||0!==Js?Js:0,!(zs?Rl(zs,Pa):ht(kr,Pa,Ie))){for(ei=wn;--ei;){var Co=fi[ei];if(!(Co?Rl(Co,Pa):ht(I[ei],Pa,Ie)))continue e}zs&&zs.push(Pa),kr.push(Js)}}return kr}function zc(I,F,Ie){var ht=null==(I=Eu(I,F=sc(F,I)))?I:I[ed(Ih(F))];return null==ht?j:pl(ht,I,Ie)}function Ja(I){return rr(I)&&bl(I)==ri}function Vc(I,F,Ie,ht,tn){return I===F||(null==I||null==F||!rr(I)&&!rr(F)?I!=I&&F!=F:function Up(I,F,Ie,ht,tn,wn){var ei=Rr(I),fi=Rr(F),Mi=ei?ni:$l(I),kr=fi?ni:$l(F),Or=(Mi=Mi==ri?rt:Mi)==rt,Qr=(kr=kr==ri?rt:kr)==rt,zs=Mi==kr;if(zs&&oa(I)){if(!oa(F))return!1;ei=!0,Or=!1}if(zs&&!Or)return wn||(wn=new yl),ei||Gc(I)?_d(I,F,Ie,ht,tn,wn):function Mm(I,F,Ie,ht,tn,wn,ei){switch(Ie){case fr:if(I.byteLength!=F.byteLength||I.byteOffset!=F.byteOffset)return!1;I=I.buffer,F=F.buffer;case nr:return!(I.byteLength!=F.byteLength||!wn(new up(I),new up(F)));case Oe:case Ft:case _n:return sa(+I,+F);case li:return I.name==F.name&&I.message==F.message;case Yn:case Di:return I==F+"";case Rt:var fi=Ed;case Ti:if(fi||(fi=cd),I.size!=F.size&&!(1&ht))return!1;var kr=ei.get(I);if(kr)return kr==F;ht|=2,ei.set(I,F);var Or=_d(fi(I),fi(F),ht,tn,wn,ei);return ei.delete(I),Or;case us:if(gn)return gn.call(I)==gn.call(F)}return!1}(I,F,Mi,Ie,ht,tn,wn);if(!(1&Ie)){var Js=Or&&bo.call(I,"__wrapped__"),Pa=Qr&&bo.call(F,"__wrapped__");if(Js||Pa){var Co=Js?I.value():I,Ra=Pa?F.value():F;return wn||(wn=new yl),tn(Co,Ra,Ie,ht,wn)}}return!!zs&&(wn||(wn=new yl),function cf(I,F,Ie,ht,tn,wn){var ei=1&Ie,fi=Ah(I),Mi=fi.length;if(Mi!=Ah(F).length&&!ei)return!1;for(var Qr=Mi;Qr--;){var zs=fi[Qr];if(!(ei?zs in F:bo.call(F,zs)))return!1}var Js=wn.get(I),Pa=wn.get(F);if(Js&&Pa)return Js==F&&Pa==I;var Co=!0;wn.set(I,F),wn.set(F,I);for(var Ra=ei;++Qr<Mi;){var Io=I[zs=fi[Qr]],Ko=F[zs];if(ht)var Gd=ei?ht(Ko,Io,zs,F,I,wn):ht(Io,Ko,zs,I,F,wn);if(!(Gd===j?Io===Ko||tn(Io,Ko,Ie,ht,wn):Gd)){Co=!1;break}Ra||(Ra="constructor"==zs)}if(Co&&!Ra){var Wd=I.constructor,Xc=F.constructor;Wd!=Xc&&"constructor"in I&&"constructor"in F&&!("function"==typeof Wd&&Wd instanceof Wd&&"function"==typeof Xc&&Xc instanceof Xc)&&(Co=!1)}return wn.delete(I),wn.delete(F),Co}(I,F,Ie,ht,tn,wn))}(I,F,Ie,ht,Vc,tn))}function pd(I,F,Ie,ht){var tn=Ie.length,wn=tn,ei=!ht;if(null==I)return!wn;for(I=kn(I);tn--;){var fi=Ie[tn];if(ei&&fi[2]?fi[1]!==I[fi[0]]:!(fi[0]in I))return!1}for(;++tn<wn;){var Mi=(fi=Ie[tn])[0],kr=I[Mi],Or=fi[1];if(ei&&fi[2]){if(kr===j&&!(Mi in I))return!1}else{var Qr=new yl;if(ht)var zs=ht(kr,Or,Mi,I,F,Qr);if(!(zs===j?Vc(Or,kr,3,ht,Qr):zs))return!1}}return!0}function Vf(I){return!(!gs(I)||function wp(I){return!!kf&&kf in I}(I))&&(hi(I)?Rp:Ue).test(Ud(I))}function kd(I){return"function"==typeof I?I:null==I?_f:"object"==typeof I?Rr(I)?Mg(I[0],I[1]):gd(I):c0(I)}function ah(I){if(!bd(I))return Yy(I);var F=[];for(var Ie in kn(I))bo.call(I,Ie)&&"constructor"!=Ie&&F.push(Ie);return F}function Hf(I,F){return I<F}function Hp(I,F){var Ie=-1,ht=Ts(I)?Yi(I.length):[];return nf(I,function(tn,wn,ei){ht[++Ie]=F(tn,wn,ei)}),ht}function gd(I){var F=Dm(I);return 1==F.length&&F[0][2]?uh(F[0][0],F[0][1]):function(Ie){return Ie===I||pd(Ie,I,F)}}function Mg(I,F){return Fg(I)&&Yf(F)?uh(ed(I),F):function(Ie){var ht=Lb(Ie,I);return ht===j&&ht===F?hy(Ie,I):Vc(F,ht,3)}}function nl(I,F,Ie,ht,tn){I!==F&&zf(F,function(wn,ei){if(tn||(tn=new yl),gs(wn))!function Gf(I,F,Ie,ht,tn,wn,ei){var fi=xp(I,Ie),Mi=xp(F,Ie),kr=ei.get(Mi);if(kr)bm(I,Ie,kr);else{var Or=wn?wn(fi,Mi,Ie+"",I,F,ei):j,Qr=Or===j;if(Qr){var zs=Rr(Mi),Js=!zs&&oa(Mi),Pa=!zs&&!Js&&Gc(Mi);Or=Mi,zs||Js||Pa?Rr(fi)?Or=fi:aa(fi)?Or=po(fi):Js?(Qr=!1,Or=Ch(Mi,!0)):Pa?(Qr=!1,Or=ac(Mi,!0)):Or=[]:Uo(Mi)||ia(Mi)?(Or=fi,ia(fi)?Or=a0(fi):(!gs(fi)||hi(fi))&&(Or=Og(Mi))):Qr=!1}Qr&&(ei.set(Mi,Or),tn(Or,Mi,ht,wn,ei),ei.delete(Mi)),bm(I,Ie,Or)}}(I,F,ei,Ie,nl,ht,tn);else{var fi=ht?ht(xp(I,ei),wn,ei+"",I,F,tn):j;fi===j&&(fi=wn),bm(I,ei,fi)}},Sh)}function Rd(I,F){var Ie=I.length;if(Ie)return Ac(F+=F<0?Ie:0,Ie)?I[F]:j}function uu(I,F,Ie){F=F.length?Il(F,function(wn){return Rr(wn)?function(ei){return jh(ei,1===wn.length?wn[0]:wn)}:wn}):[_f];var ht=-1;return F=Il(F,wu(ma())),function vh(vi,ar){var Yi=vi.length;for(vi.sort(ar);Yi--;)vi[Yi]=vi[Yi].value;return vi}(Hp(I,function(wn,ei,fi){return{criteria:Il(F,function(kr){return kr(wn)}),index:++ht,value:wn}}),function(wn,ei){return function Am(I,F,Ie){for(var ht=-1,tn=I.criteria,wn=F.criteria,ei=tn.length,fi=Ie.length;++ht<ei;){var Mi=Ku(tn[ht],wn[ht]);if(Mi)return ht>=fi?Mi:Mi*("desc"==Ie[ht]?-1:1)}return I.index-F.index}(wn,ei,Ie)})}function $h(I,F,Ie){for(var ht=-1,tn=F.length,wn={};++ht<tn;){var ei=F[ht],fi=jh(I,ei);Ie(fi,ei)&&ko(wn,sc(ei,I),fi)}return wn}function Gl(I,F,Ie,ht){var tn=ht?_c:qa,wn=-1,ei=F.length,fi=I;for(I===F&&(F=po(F)),Ie&&(fi=Il(I,wu(Ie)));++wn<ei;)for(var Mi=0,kr=F[wn],Or=Ie?Ie(kr):kr;(Mi=tn(fi,Or,Mi,ht))>-1;)fi!==I&&dm.call(fi,Mi,1),dm.call(I,Mi,1);return I}function oh(I,F){for(var Ie=I?F.length:0,ht=Ie-1;Ie--;){var tn=F[Ie];if(Ie==ht||tn!==wn){var wn=tn;Ac(tn)?dm.call(I,tn,1):qh(I,tn)}}return I}function lf(I,F){return I+vl(qo()*(F-I+1))}function il(I,F){var Ie="";if(!I||F<1||F>Qn)return Ie;do{F%2&&(Ie+=I),(F=vl(F/2))&&(I+=I)}while(F);return Ie}function Xa(I,F){return Vd(Pm(I,F,_f),I+"")}function ls(I){return Zv(dy(I))}function lv(I,F){var Ie=dy(I);return gf(Ie,gp(F,0,Ie.length))}function ko(I,F,Ie,ht){if(!gs(I))return I;for(var tn=-1,wn=(F=sc(F,I)).length,ei=wn-1,fi=I;null!=fi&&++tn<wn;){var Mi=ed(F[tn]),kr=Ie;if("__proto__"===Mi||"constructor"===Mi||"prototype"===Mi)return I;if(tn!=ei){var Or=fi[Mi];(kr=ht?ht(Or,Mi,fi):j)===j&&(kr=gs(Or)?Or:Ac(F[tn+1])?[]:{})}dp(fi,Mi,kr),fi=fi[Mi]}return I}var mp=tf?function(I,F){return tf.set(I,F),I}:_f,Dg=Fp?function(I,F){return Fp(I,"toString",{configurable:!0,enumerable:!1,value:bw(F),writable:!0})}:_f;function Pg(I){return gf(dy(I))}function Su(I,F,Ie){var ht=-1,tn=I.length;F<0&&(F=-F>tn?0:tn+F),(Ie=Ie>tn?tn:Ie)<0&&(Ie+=tn),tn=F>Ie?0:Ie-F>>>0,F>>>=0;for(var wn=Yi(tn);++ht<tn;)wn[ht]=I[ht+F];return wn}function vp(I,F){var Ie;return nf(I,function(ht,tn,wn){return!(Ie=F(ht,tn,wn))}),!!Ie}function rc(I,F,Ie){var ht=0,tn=null==I?ht:I.length;if("number"==typeof F&&F==F&&tn<=2147483647){for(;ht<tn;){var wn=ht+tn>>>1,ei=I[wn];null!==ei&&!ec(ei)&&(Ie?ei<=F:ei<F)?ht=wn+1:tn=wn}return tn}return Lg(I,F,_f,Ie)}function Lg(I,F,Ie,ht){var tn=0,wn=null==I?0:I.length;if(0===wn)return 0;for(var ei=(F=Ie(F))!=F,fi=null===F,Mi=ec(F),kr=F===j;tn<wn;){var Or=vl((tn+wn)/2),Qr=Ie(I[Or]),zs=Qr!==j,Js=null===Qr,Pa=Qr==Qr,Co=ec(Qr);if(ei)var Ra=ht||Pa;else Ra=kr?Pa&&(ht||zs):fi?Pa&&zs&&(ht||!Js):Mi?Pa&&zs&&!Js&&(ht||!Co):!Js&&!Co&&(ht?Qr<=F:Qr<F);Ra?tn=Or+1:wn=Or}return xu(wn,4294967294)}function kg(I,F){for(var Ie=-1,ht=I.length,tn=0,wn=[];++Ie<ht;){var ei=I[Ie],fi=F?F(ei):ei;if(!Ie||!sa(fi,Mi)){var Mi=fi;wn[tn++]=0===ei?0:ei}}return wn}function Wl(I){return"number"==typeof I?I:ec(I)?NaN:+I}function Yu(I){if("string"==typeof I)return I;if(Rr(I))return Il(I,Yu)+"";if(ec(I))return vn?vn.call(I):"";var F=I+"";return"0"==F&&1/I==-Ht?"-0":F}function Ru(I,F,Ie){var ht=-1,tn=Sd,wn=I.length,ei=!0,fi=[],Mi=fi;if(Ie)ei=!1,tn=hs;else if(wn>=200){var kr=F?null:Em(I);if(kr)return cd(kr);ei=!1,tn=Rl,Mi=new Bs}else Mi=F?[]:fi;e:for(;++ht<wn;){var Or=I[ht],Qr=F?F(Or):Or;if(Or=Ie||0!==Or?Or:0,ei&&Qr==Qr){for(var zs=Mi.length;zs--;)if(Mi[zs]===Qr)continue e;F&&Mi.push(Qr),fi.push(Or)}else tn(Mi,Qr,Ie)||(Mi!==fi&&Mi.push(Qr),fi.push(Or))}return fi}function qh(I,F){return null==(I=Eu(I,F=sc(F,I)))||delete I[ed(Ih(F))]}function Wf(I,F,Ie,ht){return ko(I,F,Ie(jh(I,F)),ht)}function iu(I,F,Ie,ht){for(var tn=I.length,wn=ht?tn:-1;(ht?wn--:++wn<tn)&&F(I[wn],wn,I););return Ie?Su(I,ht?0:wn,ht?wn+1:tn):Su(I,ht?wn+1:0,ht?tn:wn)}function bh(I,F){var Ie=I;return Ie instanceof Ga&&(Ie=Ie.value()),Zd(F,function(ht,tn){return tn.func.apply(tn.thisArg,zh([ht],tn.args))},Ie)}function Xh(I,F,Ie){var ht=I.length;if(ht<2)return ht?Ru(I[0]):[];for(var tn=-1,wn=Yi(ht);++tn<ht;)for(var ei=I[tn],fi=-1;++fi<ht;)fi!=tn&&(wn[tn]=Bf(wn[tn]||ei,I[fi],F,Ie));return Ru(gu(wn,1),F,Ie)}function Yh(I,F,Ie){for(var ht=-1,tn=I.length,wn=F.length,ei={};++ht<tn;)Ie(ei,I[ht],ht<wn?F[ht]:j);return ei}function Ou(I){return aa(I)?I:[]}function jl(I){return"function"==typeof I?I:_f}function sc(I,F){return Rr(I)?I:Fg(I,F)?[I]:Bg(hl(I))}var Gp=Xa;function bc(I,F,Ie){var ht=I.length;return Ie=Ie===j?ht:Ie,!F&&Ie>=ht?I:Su(I,F,Ie)}var t_=K_||function(I){return Lu.clearTimeout(I)};function Ch(I,F){if(F)return I.slice();var Ie=I.length,ht=Y_?Y_(Ie):new I.constructor(Ie);return I.copy(ht),ht}function Fu(I){var F=new I.constructor(I.byteLength);return new up(F).set(new up(I)),F}function ac(I,F){var Ie=F?Fu(I.buffer):I.buffer;return new I.constructor(Ie,I.byteOffset,I.length)}function Ku(I,F){if(I!==F){var Ie=I!==j,ht=null===I,tn=I==I,wn=ec(I),ei=F!==j,fi=null===F,Mi=F==F,kr=ec(F);if(!fi&&!kr&&!wn&&I>F||wn&&ei&&Mi&&!fi&&!kr||ht&&ei&&Mi||!Ie&&Mi||!tn)return 1;if(!ht&&!wn&&!kr&&I<F||kr&&Ie&&tn&&!ht&&!wn||fi&&Ie&&tn||!ei&&tn||!Mi)return-1}return 0}function cv(I,F,Ie,ht){for(var tn=-1,wn=I.length,ei=Ie.length,fi=-1,Mi=F.length,kr=Sa(wn-ei,0),Or=Yi(Mi+kr),Qr=!ht;++fi<Mi;)Or[fi]=F[fi];for(;++tn<ei;)(Qr||tn<wn)&&(Or[Ie[tn]]=I[tn]);for(;kr--;)Or[fi++]=I[tn++];return Or}function Fd(I,F,Ie,ht){for(var tn=-1,wn=I.length,ei=-1,fi=Ie.length,Mi=-1,kr=F.length,Or=Sa(wn-fi,0),Qr=Yi(Or+kr),zs=!ht;++tn<Or;)Qr[tn]=I[tn];for(var Js=tn;++Mi<kr;)Qr[Js+Mi]=F[Mi];for(;++ei<fi;)(zs||tn<wn)&&(Qr[Js+Ie[ei]]=I[tn++]);return Qr}function po(I,F){var Ie=-1,ht=I.length;for(F||(F=Yi(ht));++Ie<ht;)F[Ie]=I[Ie];return F}function wc(I,F,Ie,ht){var tn=!Ie;Ie||(Ie={});for(var wn=-1,ei=F.length;++wn<ei;){var fi=F[wn],Mi=ht?ht(Ie[fi],I[fi],fi,Ie,I):j;Mi===j&&(Mi=I[fi]),tn?Dd(Ie,fi,Mi):dp(Ie,fi,Mi)}return Ie}function Nd(I,F){return function(Ie,ht){var tn=Rr(Ie)?Kd:fp,wn=F?F():{};return tn(Ie,I,ma(ht,2),wn)}}function wh(I){return Xa(function(F,Ie){var ht=-1,tn=Ie.length,wn=tn>1?Ie[tn-1]:j,ei=tn>2?Ie[2]:j;for(wn=I.length>3&&"function"==typeof wn?(tn--,wn):j,ei&&Ic(Ie[0],Ie[1],ei)&&(wn=tn<3?j:wn,tn=1),F=kn(F);++ht<tn;){var fi=Ie[ht];fi&&I(F,fi,ht,wn)}return F})}function _p(I,F){return function(Ie,ht){if(null==Ie)return Ie;if(!Ts(Ie))return I(Ie,ht);for(var tn=Ie.length,wn=F?tn:-1,ei=kn(Ie);(F?wn--:++wn<tn)&&!1!==ht(ei[wn],wn,ei););return Ie}}function yp(I){return function(F,Ie,ht){for(var tn=-1,wn=kn(F),ei=ht(F),fi=ei.length;fi--;){var Mi=ei[I?fi:++tn];if(!1===Ie(wn[Mi],Mi,wn))break}return F}}function xc(I){return function(F){var Ie=pu(F=hl(F))?cl(F):j,ht=Ie?Ie[0]:F.charAt(0),tn=Ie?bc(Ie,1).join(""):F.slice(1);return ht[I]()+tn}}function Nu(I){return function(F){return Zd(uA(ro(F).replace(lm,"")),I,"")}}function Bd(I){return function(){var F=arguments;switch(F.length){case 0:return new I;case 1:return new I(F[0]);case 2:return new I(F[0],F[1]);case 3:return new I(F[0],F[1],F[2]);case 4:return new I(F[0],F[1],F[2],F[3]);case 5:return new I(F[0],F[1],F[2],F[3],F[4]);case 6:return new I(F[0],F[1],F[2],F[3],F[4],F[5]);case 7:return new I(F[0],F[1],F[2],F[3],F[4],F[5],F[6])}var Ie=Xo(I.prototype),ht=I.apply(Ie,F);return gs(ht)?ht:Ie}}function Kh(I){return function(F,Ie,ht){var tn=kn(F);if(!Ts(F)){var wn=ma(Ie,3);F=qc(F),Ie=function(fi){return wn(tn[fi],fi,tn)}}var ei=I(F,Ie,ht);return ei>-1?tn[wn?F[ei]:ei]:j}}function uf(I){return oc(function(F){var Ie=F.length,ht=Ie,tn=_l.prototype.thru;for(I&&F.reverse();ht--;){var wn=F[ht];if("function"!=typeof wn)throw new ir(V);if(tn&&!ei&&"wrapper"==qp(wn))var ei=new _l([],!0)}for(ht=ei?ht:Ie;++ht<Ie;){var fi=qp(wn=F[ht]),Mi="wrapper"==fi?hf(wn):j;ei=Mi&&Jh(Mi[0])&&424==Mi[1]&&!Mi[4].length&&1==Mi[9]?ei[qp(Mi[0])].apply(ei,Mi[3]):1==wn.length&&Jh(wn)?ei[fi]():ei.thru(wn)}return function(){var kr=arguments,Or=kr[0];if(ei&&1==kr.length&&Rr(Or))return ei.plant(Or).value();for(var Qr=0,zs=Ie?F[Qr].apply(this,kr):Or;++Qr<Ie;)zs=F[Qr].call(this,zs);return zs}})}function ji(I,F,Ie,ht,tn,wn,ei,fi,Mi,kr){var Or=128&F,Qr=1&F,zs=2&F,Js=24&F,Pa=512&F,Co=zs?j:Bd(I);return function Ra(){for(var Io=arguments.length,Ko=Yi(Io),Gd=Io;Gd--;)Ko[Gd]=arguments[Gd];if(Js)var Wd=Qh(Ra),Xc=ud(Ko,Wd);if(ht&&(Ko=cv(Ko,ht,tn,Js)),wn&&(Ko=Fd(Ko,wn,ei,Js)),Io-=Xc,Js&&Io<kr){var uc=Ol(Ko,Wd);return Zh(I,F,ji,Ra.placeholder,Ie,Ko,uc,fi,Mi,kr-Io)}var ig=Qr?Ie:this,rg=zs?ig[I]:I;return Io=Ko.length,fi?Ko=wl(Ko,fi):Pa&&Io>1&&Ko.reverse(),Or&&Mi<Io&&(Ko.length=Mi),this&&this!==Lu&&this instanceof Ra&&(rg=Co||Bd(rg)),rg.apply(ig,Ko)}}function bp(I,F){return function(Ie,ht){return function Lo(I,F,Ie,ht){return Bc(I,function(tn,wn,ei){F(ht,Ie(tn),wn,ei)}),ht}(Ie,I,F(ht),{})}}function Ml(I,F){return function(Ie,ht){var tn;if(Ie===j&&ht===j)return F;if(Ie!==j&&(tn=Ie),ht!==j){if(tn===j)return ht;"string"==typeof Ie||"string"==typeof ht?(Ie=Yu(Ie),ht=Yu(ht)):(Ie=Wl(Ie),ht=Wl(ht)),tn=I(Ie,ht)}return tn}}function $f(I){return oc(function(F){return F=Il(F,wu(ma())),Xa(function(Ie){var ht=this;return I(F,function(tn){return pl(tn,ht,Ie)})})})}function xh(I,F){var Ie=(F=F===j?" ":Yu(F)).length;if(Ie<2)return Ie?il(F,I):F;var ht=il(F,Yv(I/Hl(F)));return pu(F)?bc(cl(ht),0,I).join(""):ht.slice(0,I)}function Sm(I){return function(F,Ie,ht){return ht&&"number"!=typeof ht&&Ic(F,Ie,ht)&&(Ie=ht=j),F=$c(F),Ie===j?(Ie=F,F=0):Ie=$c(Ie),function Cl(I,F,Ie,ht){for(var tn=-1,wn=Sa(Yv((F-I)/(Ie||1)),0),ei=Yi(wn);wn--;)ei[ht?wn:++tn]=I,I+=Ie;return ei}(F,Ie,ht=ht===j?F<Ie?1:-1:$c(ht),I)}}function jp(I){return function(F,Ie){return"string"==typeof F&&"string"==typeof Ie||(F=mf(F),Ie=mf(Ie)),I(F,Ie)}}function Zh(I,F,Ie,ht,tn,wn,ei,fi,Mi,kr){var Or=8&F;F|=Or?32:64,4&(F&=~(Or?64:32))||(F&=-4);var Co=[I,F,tn,Or?wn:j,Or?ei:j,Or?j:wn,Or?j:ei,fi,Mi,kr],Ra=Ie.apply(j,Co);return Jh(I)&&Ng(Ra,Co),Ra.placeholder=ht,pf(Ra,I,F)}function Bu(I){var F=El[I];return function(Ie,ht){if(Ie=mf(Ie),(ht=null==ht?0:xu(uo(ht),292))&&gm(Ie)){var tn=(hl(Ie)+"e").split("e");return+((tn=(hl(F(tn[0]+"e"+(+tn[1]+ht)))+"e").split("e"))[0]+"e"+(+tn[1]-ht))}return F(Ie)}}var Em=da&&1/cd(new da([,-0]))[1]==Ht?function(I){return new da(I)}:xw;function vd(I){return function(F){var Ie=$l(F);return Ie==Rt?Ed(F):Ie==Ti?function Uh(vi){var ar=-1,Yi=Array(vi.size);return vi.forEach(function(Ns){Yi[++ar]=[Ns,Ns]}),Yi}(F):function ha(vi,ar){return Il(ar,function(Yi){return[Yi,vi[Yi]]})}(F,I(F))}}function lh(I,F,Ie,ht,tn,wn,ei,fi){var Mi=2&F;if(!Mi&&"function"!=typeof I)throw new ir(V);var kr=ht?ht.length:0;if(kr||(F&=-97,ht=tn=j),ei=ei===j?ei:Sa(uo(ei),0),fi=fi===j?fi:uo(fi),kr-=tn?tn.length:0,64&F){var Or=ht,Qr=tn;ht=tn=j}var zs=Mi?j:hf(I),Js=[I,F,Ie,ht,tn,Or,Qr,wn,ei,fi];if(zs&&function Kp(I,F){var Ie=I[1],ht=F[1],tn=Ie|ht;if(!(tn<131||(128==ht&&8==Ie||128==ht&&256==Ie&&I[7].length<=F[8]||384==ht&&F[7].length<=F[8]&&8==Ie)))return I;1&ht&&(I[2]=F[2],tn|=1&Ie?0:4);var fi=F[3];if(fi){var Mi=I[3];I[3]=Mi?cv(Mi,fi,F[4]):fi,I[4]=Mi?Ol(I[3],Te):F[4]}(fi=F[5])&&(I[5]=(Mi=I[5])?Fd(Mi,fi,F[6]):fi,I[6]=Mi?Ol(I[5],Te):F[6]),(fi=F[7])&&(I[7]=fi),128&ht&&(I[8]=null==I[8]?F[8]:xu(I[8],F[8])),null==I[9]&&(I[9]=F[9]),I[0]=F[0],I[1]=tn}(Js,zs),I=Js[0],F=Js[1],Ie=Js[2],ht=Js[3],tn=Js[4],!(fi=Js[9]=Js[9]===j?Mi?0:I.length:Sa(Js[9]-kr,0))&&24&F&&(F&=-25),F&&1!=F)Pa=8==F||16==F?function jf(I,F,Ie){var ht=Bd(I);return function tn(){for(var wn=arguments.length,ei=Yi(wn),fi=wn,Mi=Qh(tn);fi--;)ei[fi]=arguments[fi];var kr=wn<3&&ei[0]!==Mi&&ei[wn-1]!==Mi?[]:Ol(ei,Mi);return(wn-=kr.length)<Ie?Zh(I,F,ji,tn.placeholder,j,ei,kr,j,j,Ie-wn):pl(this&&this!==Lu&&this instanceof tn?ht:I,this,ei)}}(I,F,fi):32!=F&&33!=F||tn.length?ji.apply(j,Js):function hv(I,F,Ie,ht){var tn=1&F,wn=Bd(I);return function ei(){for(var fi=-1,Mi=arguments.length,kr=-1,Or=ht.length,Qr=Yi(Or+Mi),zs=this&&this!==Lu&&this instanceof ei?wn:I;++kr<Or;)Qr[kr]=ht[kr];for(;Mi--;)Qr[kr++]=arguments[++fi];return pl(zs,tn?Ie:this,Qr)}}(I,F,Ie,ht);else var Pa=function Im(I,F,Ie){var ht=1&F,tn=Bd(I);return function wn(){return(this&&this!==Lu&&this instanceof wn?tn:I).apply(ht?Ie:this,arguments)}}(I,F,Ie);return pf((zs?mp:Ng)(Pa,Js),I,F)}function Tm(I,F,Ie,ht){return I===j||sa(I,Ca[Ie])&&!bo.call(ht,Ie)?F:I}function $p(I,F,Ie,ht,tn,wn){return gs(I)&&gs(F)&&(wn.set(F,I),nl(I,F,j,$p,wn),wn.delete(F)),I}function Zu(I){return Uo(I)?j:I}function _d(I,F,Ie,ht,tn,wn){var ei=1&Ie,fi=I.length,Mi=F.length;if(fi!=Mi&&!(ei&&Mi>fi))return!1;var kr=wn.get(I),Or=wn.get(F);if(kr&&Or)return kr==F&&Or==I;var Qr=-1,zs=!0,Js=2&Ie?new Bs:j;for(wn.set(I,F),wn.set(F,I);++Qr<fi;){var Pa=I[Qr],Co=F[Qr];if(ht)var Ra=ei?ht(Co,Pa,Qr,F,I,wn):ht(Pa,Co,Qr,I,F,wn);if(Ra!==j){if(Ra)continue;zs=!1;break}if(Js){if(!bg(F,function(Io,Ko){if(!Rl(Js,Ko)&&(Pa===Io||tn(Pa,Io,Ie,ht,wn)))return Js.push(Ko)})){zs=!1;break}}else if(Pa!==Co&&!tn(Pa,Co,Ie,ht,wn)){zs=!1;break}}return wn.delete(I),wn.delete(F),zs}function oc(I){return Vd(Pm(I,j,Ip),I+"")}function Ah(I){return _h(I,qc,Yp)}function qf(I){return _h(I,Sh,Rg)}var hf=tf?function(I){return tf.get(I)}:xw;function qp(I){for(var F=I.name+"",Ie=Ig[F],ht=bo.call(Ig,F)?Ie.length:0;ht--;){var tn=Ie[ht],wn=tn.func;if(null==wn||wn==I)return tn.name}return F}function Qh(I){return(bo.call(ln,"placeholder")?ln:I).placeholder}function ma(){var I=ln.iteratee||Ob;return I=I===Ob?kd:I,arguments.length?I(arguments[0],arguments[1]):I}function Xp(I,F){var Ie=I.__data__;return function gv(I){var F=typeof I;return"string"==F||"number"==F||"symbol"==F||"boolean"==F?"__proto__"!==I:null===I}(F)?Ie["string"==typeof F?"string":"hash"]:Ie.map}function Dm(I){for(var F=qc(I),Ie=F.length;Ie--;){var ht=F[Ie],tn=I[ht];F[Ie]=[ht,tn,Yf(tn)]}return F}function Xf(I,F){var Ie=function Bo(vi,ar){return null==vi?j:vi[ar]}(I,F);return Vf(Ie)?Ie:j}var Yp=pm?function(I){return null==I?[]:(I=kn(I),mh(pm(I),function(F){return rv.call(I,F)}))}:h0,Rg=pm?function(I){for(var F=[];I;)zh(F,Yp(I)),I=Op(I);return F}:h0,$l=bl;function fv(I,F,Ie){for(var ht=-1,tn=(F=sc(F,I)).length,wn=!1;++ht<tn;){var ei=ed(F[ht]);if(!(wn=null!=I&&Ie(I,ei)))break;I=I[ei]}return wn||++ht!=tn?wn:!!(tn=null==I?0:I.length)&&os(tn)&&Ac(ei,tn)&&(Rr(I)||ia(I))}function Og(I){return"function"!=typeof I.constructor||bd(I)?{}:Xo(Op(I))}function ql(I){return Rr(I)||ia(I)||!!(fm&&I&&I[fm])}function Ac(I,F){var Ie=typeof I;return!!(F=F??Qn)&&("number"==Ie||"symbol"!=Ie&&Dt.test(I))&&I>-1&&I%1==0&&I<F}function Ic(I,F,Ie){if(!gs(Ie))return!1;var ht=typeof F;return!!("number"==ht?Ts(Ie)&&Ac(F,Ie.length):"string"==ht&&F in Ie)&&sa(Ie[F],I)}function Fg(I,F){if(Rr(I))return!1;var Ie=typeof I;return!("number"!=Ie&&"symbol"!=Ie&&"boolean"!=Ie&&null!=I&&!ec(I))||de.test(I)||!pe.test(I)||null!=F&&I in kn(F)}function Jh(I){var F=qp(I),Ie=ln[F];if("function"!=typeof Ie||!(F in Ga.prototype))return!1;if(I===Ie)return!0;var ht=hf(Ie);return!!ht&&I===ht[0]}(io&&$l(new io(new ArrayBuffer(1)))!=fr||na&&$l(new na)!=Rt||mm&&$l(mm.resolve())!=lt||da&&$l(new da)!=Ti||_a&&$l(new _a)!=Hr)&&($l=function(I){var F=bl(I),Ie=F==rt?I.constructor:j,ht=Ie?Ud(Ie):"";if(ht)switch(ht){case Ky:return fr;case Q_:return Rt;case lo:return lt;case sh:return Ti;case br:return Hr}return F});var df=xo?hi:ng;function bd(I){var F=I&&I.constructor;return I===("function"==typeof F&&F.prototype||Ca)}function Yf(I){return I==I&&!gs(I)}function uh(I,F){return function(Ie){return null!=Ie&&Ie[I]===F&&(F!==j||I in kn(Ie))}}function Pm(I,F,Ie){return F=Sa(F===j?I.length-1:F,0),function(){for(var ht=arguments,tn=-1,wn=Sa(ht.length-F,0),ei=Yi(wn);++tn<wn;)ei[tn]=ht[F+tn];tn=-1;for(var fi=Yi(F+1);++tn<F;)fi[tn]=ht[tn];return fi[F]=Ie(ei),pl(I,this,fi)}}function Eu(I,F){return F.length<2?I:jh(I,Su(F,0,-1))}function wl(I,F){for(var Ie=I.length,ht=xu(F.length,Ie),tn=po(I);ht--;){var wn=F[ht];I[ht]=Ac(wn,Ie)?tn[wn]:j}return I}function xp(I,F){if(("constructor"!==F||"function"!=typeof I[F])&&"__proto__"!=F)return I[F]}var Ng=Kf(mp),zd=Z_||function(I,F){return Lu.setTimeout(I,F)},Vd=Kf(Dg);function pf(I,F,Ie){var ht=F+"";return Vd(I,function Uc(I,F){var Ie=F.length;if(!Ie)return I;var ht=Ie-1;return F[ht]=(Ie>1?"& ":"")+F[ht],F=F.join(Ie>2?", ":" "),I.replace(pt,"{\n/* [wrapped with "+F+"] */\n")}(ht,function zg(I,F){return tl(Gn,function(Ie){var ht="_."+Ie[0];F&Ie[1]&&!Sd(I,ht)&&I.push(ht)}),I.sort()}(function Qu(I){var F=I.match(gt);return F?F[1].split(Wt):[]}(ht),Ie)))}function Kf(I){var F=0,Ie=0;return function(){var ht=Oc(),tn=16-(ht-Ie);if(Ie=ht,tn>0){if(++F>=800)return arguments[0]}else F=0;return I.apply(j,arguments)}}function gf(I,F){var Ie=-1,ht=I.length,tn=ht-1;for(F=F===j?ht:F;++Ie<F;){var wn=lf(Ie,tn),ei=I[wn];I[wn]=I[Ie],I[Ie]=ei}return I.length=F,I}var Bg=function ff(I){var F=gi(I,function(ht){return 500===Ie.size&&Ie.clear(),ht}),Ie=F.cache;return F}(function(I){var F=[];return 46===I.charCodeAt(0)&&F.push(""),I.replace(Ee,function(Ie,ht,tn,wn){F.push(tn?wn.replace(qt,"$1"):ht||Ie)}),F});function ed(I){if("string"==typeof I||ec(I))return I;var F=I+"";return"0"==F&&1/I==-Ht?"-0":F}function Ud(I){if(null!=I){try{return rh.call(I)}catch{}try{return I+""}catch{}}return""}function Lm(I){if(I instanceof Ga)return I.clone();var F=new _l(I.__wrapped__,I.__chain__);return F.__actions__=po(I.__actions__),F.__index__=I.__index__,F.__values__=I.__values__,F}var Hc=Xa(function(I,F){return aa(I)?Bf(I,gu(F,1,aa,!0)):[]}),Ap=Xa(function(I,F){var Ie=Ih(F);return aa(Ie)&&(Ie=j),aa(I)?Bf(I,gu(F,1,aa,!0),ma(Ie,2)):[]}),vv=Xa(function(I,F){var Ie=Ih(F);return aa(Ie)&&(Ie=j),aa(I)?Bf(I,gu(F,1,aa,!0),j,Ie):[]});function _u(I,F,Ie){var ht=null==I?0:I.length;if(!ht)return-1;var tn=null==Ie?0:uo(Ie);return tn<0&&(tn=Sa(ht+tn,0)),Sl(I,ma(F,3),tn)}function _v(I,F,Ie){var ht=null==I?0:I.length;if(!ht)return-1;var tn=ht-1;return Ie!==j&&(tn=uo(Ie),tn=Ie<0?Sa(ht+tn,0):xu(tn,ht-1)),Sl(I,ma(F,3),tn,!0)}function Ip(I){return null!=I&&I.length?gu(I,1):[]}function ry(I){return I&&I.length?I[0]:j}var t0=Xa(function(I){var F=Il(I,Ou);return F.length&&F[0]===I[0]?yh(F):[]}),sy=Xa(function(I){var F=Ih(I),Ie=Il(I,Ou);return F===Ih(Ie)?F=j:Ie.pop(),Ie.length&&Ie[0]===I[0]?yh(Ie,ma(F,2)):[]}),yv=Xa(function(I){var F=Ih(I),Ie=Il(I,Ou);return(F="function"==typeof F?F:j)&&Ie.pop(),Ie.length&&Ie[0]===I[0]?yh(Ie,j,F):[]});function Ih(I){var F=null==I?0:I.length;return F?I[F-1]:j}var zl=Xa(s_);function s_(I,F){return I&&I.length&&F&&F.length?Gl(I,F):I}var ay=oc(function(I,F){var Ie=null==I?0:I.length,ht=pp(I,F);return oh(I,Il(F,function(tn){return Ac(tn,Ie)?+tn:tn}).sort(Ku)),ht});function bv(I){return null==I?I:Gs.call(I)}var J=Xa(function(I){return Ru(gu(I,1,aa,!0))}),se=Xa(function(I){var F=Ih(I);return aa(F)&&(F=j),Ru(gu(I,1,aa,!0),ma(F,2))}),Fe=Xa(function(I){var F=Ih(I);return F="function"==typeof F?F:j,Ru(gu(I,1,aa,!0),j,F)});function ft(I){if(!I||!I.length)return[];var F=0;return I=mh(I,function(Ie){if(aa(Ie))return F=Sa(Ie.length,F),!0}),Vh(F,function(Ie){return Il(I,Ta(Ie))})}function mt(I,F){if(!I||!I.length)return[];var Ie=ft(I);return null==F?Ie:Il(Ie,function(ht){return pl(F,j,ht)})}var vt=Xa(function(I,F){return aa(I)?Bf(I,F):[]}),Kt=Xa(function(I){return Xh(mh(I,aa))}),Yt=Xa(function(I){var F=Ih(I);return aa(F)&&(F=j),Xh(mh(I,aa),ma(F,2))}),jt=Xa(function(I){var F=Ih(I);return F="function"==typeof F?F:j,Xh(mh(I,aa),j,F)}),cn=Xa(ft),Ln=Xa(function(I){var F=I.length,Ie=F>1?I[F-1]:j;return Ie="function"==typeof Ie?(I.pop(),Ie):j,mt(I,Ie)});function oi(I){var F=ln(I);return F.__chain__=!0,F}function Xn(I,F){return F(I)}var ci=oc(function(I){var F=I.length,Ie=F?I[0]:0,ht=this.__wrapped__,tn=function(wn){return pp(wn,I)};return!(F>1||this.__actions__.length)&&ht instanceof Ga&&Ac(Ie)?((ht=ht.slice(Ie,+Ie+(F?1:0))).__actions__.push({func:Xn,args:[tn],thisArg:j}),new _l(ht,this.__chain__).thru(function(wn){return F&&!wn.length&&wn.push(j),wn})):this.thru(tn)}),Mr=Nd(function(I,F,Ie){bo.call(I,Ie)?++I[Ie]:Dd(I,Ie,1)}),fs=Kh(_u),Wr=Kh(_v);function c(I,F){return(Rr(I)?tl:nf)(I,ma(F,3))}function p(I,F){return(Rr(I)?Ul:Jv)(I,ma(F,3))}var b=Nd(function(I,F,Ie){bo.call(I,Ie)?I[Ie].push(F):Dd(I,Ie,[F])}),E=Xa(function(I,F,Ie){var ht=-1,tn="function"==typeof F,wn=Ts(I)?Yi(I.length):[];return nf(I,function(ei){wn[++ht]=tn?pl(F,ei,Ie):zc(ei,F,Ie)}),wn}),M=Nd(function(I,F,Ie){Dd(I,Ie,F)});function U(I,F){return(Rr(I)?Il:Hp)(I,ma(F,3))}var X=Nd(function(I,F,Ie){I[Ie?0:1].push(F)},function(){return[[],[]]}),$t=Xa(function(I,F){if(null==I)return[];var Ie=F.length;return Ie>1&&Ic(I,F[0],F[1])?F=[]:Ie>2&&Ic(F[0],F[1],F[2])&&(F=[F[0]]),uu(I,gu(F,1),[])}),Ut=sv||function(){return Lu.Date.now()};function In(I,F,Ie){return F=Ie?j:F,lh(I,128,j,j,j,j,F=I&&null==F?I.length:F)}function En(I,F){var Ie;if("function"!=typeof F)throw new ir(V);return I=uo(I),function(){return--I>0&&(Ie=F.apply(this,arguments)),I<=1&&(F=j),Ie}}var hn=Xa(function(I,F,Ie){var ht=1;if(Ie.length){var tn=Ol(Ie,Qh(hn));ht|=32}return lh(I,ht,F,Ie,tn)}),Mn=Xa(function(I,F,Ie){var ht=3;if(Ie.length){var tn=Ol(Ie,Qh(Mn));ht|=32}return lh(F,ht,I,Ie,tn)});function Rn(I,F,Ie){var ht,tn,wn,ei,fi,Mi,kr=0,Or=!1,Qr=!1,zs=!0;if("function"!=typeof I)throw new ir(V);function Js(uc){var ig=ht,rg=tn;return ht=tn=j,kr=uc,ei=I.apply(rg,ig)}function Pa(uc){return kr=uc,fi=zd(Io,F),Or?Js(uc):ei}function Ra(uc){var ig=uc-Mi;return Mi===j||ig>=F||ig<0||Qr&&uc-kr>=wn}function Io(){var uc=Ut();if(Ra(uc))return Ko(uc);fi=zd(Io,function Co(uc){var bA=F-(uc-Mi);return Qr?xu(bA,wn-(uc-kr)):bA}(uc))}function Ko(uc){return fi=j,zs&&ht?Js(uc):(ht=tn=j,ei)}function Xc(){var uc=Ut(),ig=Ra(uc);if(ht=arguments,tn=this,Mi=uc,ig){if(fi===j)return Pa(Mi);if(Qr)return t_(fi),fi=zd(Io,F),Js(Mi)}return fi===j&&(fi=zd(Io,F)),ei}return F=mf(F)||0,gs(Ie)&&(Or=!!Ie.leading,wn=(Qr="maxWait"in Ie)?Sa(mf(Ie.maxWait)||0,F):wn,zs="trailing"in Ie?!!Ie.trailing:zs),Xc.cancel=function Gd(){fi!==j&&t_(fi),kr=0,ht=Mi=tn=fi=j},Xc.flush=function Wd(){return fi===j?ei:Ko(Ut())},Xc}var Xt=Xa(function(I,F){return ey(I,1,F)}),Nn=Xa(function(I,F,Ie){return ey(I,mf(F)||0,Ie)});function gi(I,F){if("function"!=typeof I||null!=F&&"function"!=typeof F)throw new ir(V);var Ie=function(){var ht=arguments,tn=F?F.apply(this,ht):ht[0],wn=Ie.cache;if(wn.has(tn))return wn.get(tn);var ei=I.apply(this,ht);return Ie.cache=wn.set(tn,ei)||wn,ei};return Ie.cache=new(gi.Cache||ga),Ie}function $n(I){if("function"!=typeof I)throw new ir(V);return function(){var F=arguments;switch(F.length){case 0:return!I.call(this);case 1:return!I.call(this,F[0]);case 2:return!I.call(this,F[0],F[1]);case 3:return!I.call(this,F[0],F[1],F[2])}return!I.apply(this,F)}}gi.Cache=ga;var wi=Gp(function(I,F){var Ie=(F=1==F.length&&Rr(F[0])?Il(F[0],wu(ma())):Il(gu(F,1),wu(ma()))).length;return Xa(function(ht){for(var tn=-1,wn=xu(ht.length,Ie);++tn<wn;)ht[tn]=F[tn].call(this,ht[tn]);return pl(I,this,ht)})}),Pi=Xa(function(I,F){var Ie=Ol(F,Qh(Pi));return lh(I,32,j,F,Ie)}),er=Xa(function(I,F){var Ie=Ol(F,Qh(er));return lh(I,64,j,F,Ie)}),xi=oc(function(I,F){return lh(I,256,j,j,j,F)});function sa(I,F){return I===F||I!=I&&F!=F}var Cs=jp(rf),ds=jp(function(I,F){return I>=F}),ia=Ja(function(){return arguments}())?Ja:function(I){return rr(I)&&bo.call(I,"callee")&&!rv.call(I,"callee")},Rr=Yi.isArray,Is=fl?wu(fl):function zp(I){return rr(I)&&bl(I)==nr};function Ts(I){return null!=I&&os(I.length)&&!hi(I)}function aa(I){return rr(I)&&Ts(I)}var oa=Ag||ng,Yr=ho?wu(ho):function Vp(I){return rr(I)&&bl(I)==Ft};function an(I){if(!rr(I))return!1;var F=bl(I);return F==li||"[object DOMException]"==F||"string"==typeof I.message&&"string"==typeof I.name&&!Uo(I)}function hi(I){if(!gs(I))return!1;var F=bl(I);return F==di||F==Gt||"[object AsyncFunction]"==F||"[object Proxy]"==F}function pi(I){return"number"==typeof I&&I==uo(I)}function os(I){return"number"==typeof I&&I>-1&&I%1==0&&I<=Qn}function gs(I){var F=typeof I;return null!=I&&("object"==F||"function"==F)}function rr(I){return null!=I&&"object"==typeof I}var Ws=ev?wu(ev):function xm(I){return rr(I)&&$l(I)==Rt};function rl(I){return"number"==typeof I||rr(I)&&bl(I)==_n}function Uo(I){if(!rr(I)||bl(I)!=rt)return!1;var F=Op(I);if(null===F)return!0;var Ie=bo.call(F,"constructor")&&F.constructor;return"function"==typeof Ie&&Ie instanceof Ie&&rh.call(Ie)==wb}var al=tv?wu(tv):function Uf(I){return rr(I)&&bl(I)==Yn},ru=gh?wu(gh):function ic(I){return rr(I)&&$l(I)==Ti};function Ju(I){return"string"==typeof I||!Rr(I)&&rr(I)&&bl(I)==Di}function ec(I){return"symbol"==typeof I||rr(I)&&bl(I)==us}var Gc=no?wu(no):function vu(I){return rr(I)&&os(I.length)&&!!Al[bl(I)]},lc=jp(Hf),jc=jp(function(I,F){return I<=F});function Jp(I){if(!I)return[];if(Ts(I))return Ju(I)?cl(I):po(I);if(xg&&I[xg])return function ml(vi){for(var ar,Yi=[];!(ar=vi.next()).done;)Yi.push(ar.value);return Yi}(I[xg]());var F=$l(I);return(F==Rt?Ed:F==Ti?cd:dy)(I)}function $c(I){return I?(I=mf(I))===Ht||I===-Ht?17976931348623157e292*(I<0?-1:1):I==I?I:0:0===I?I:0}function uo(I){var F=$c(I),Ie=F%1;return F==F?Ie?F-Ie:F:0}function Eb(I){return I?gp(uo(I),0,Pn):0}function mf(I){if("number"==typeof I)return I;if(ec(I))return NaN;if(gs(I)){var F="function"==typeof I.valueOf?I.valueOf():I;I=gs(F)?F+"":F}if("string"!=typeof I)return 0===I?I:+I;I=Qd(I);var Ie=we.test(I);return Ie||ct.test(I)?cm(I.slice(2),Ie?2:8):Ye.test(I)?NaN:+I}function a0(I){return wc(I,Sh(I))}function hl(I){return null==I?"":Yu(I)}var l0=wh(function(I,F){if(bd(F)||Ts(F))wc(F,qc(F),I);else for(var Ie in F)bo.call(F,Ie)&&dp(I,Ie,F[Ie])}),Tb=wh(function(I,F){wc(F,Sh(F),I)}),Hg=wh(function(I,F,Ie,ht){wc(F,Sh(F),I,ht)}),cy=wh(function(I,F,Ie,ht){wc(F,qc(F),I,ht)}),l_=oc(pp),u0=Xa(function(I,F){I=kn(I);var Ie=-1,ht=F.length,tn=ht>2?F[2]:j;for(tn&&Ic(F[0],F[1],tn)&&(ht=1);++Ie<ht;)for(var wn=F[Ie],ei=Sh(wn),fi=-1,Mi=ei.length;++fi<Mi;){var kr=ei[fi],Or=I[kr];(Or===j||sa(Or,Ca[kr])&&!bo.call(I,kr))&&(I[kr]=wn[kr])}return I}),Mb=Xa(function(I){return I.push(j,$p),pl($1,j,I)});function Lb(I,F,Ie){var ht=null==I?j:jh(I,F);return ht===j?Ie:ht}function hy(I,F){return null!=I&&fv(I,F,wm)}var G1=bp(function(I,F,Ie){null!=F&&"function"!=typeof F.toString&&(F=wg.call(F)),I[F]=Ie},bw(_f)),gw=bp(function(I,F,Ie){null!=F&&"function"!=typeof F.toString&&(F=wg.call(F)),bo.call(I,F)?I[F].push(Ie):I[F]=[Ie]},ma),W1=Xa(zc);function qc(I){return Ts(I)?nu(I):ah(I)}function Sh(I){return Ts(I)?nu(I,!0):function sf(I){if(!gs(I))return function mv(I){var F=[];if(null!=I)for(var Ie in kn(I))F.push(Ie);return F}(I);var F=bd(I),Ie=[];for(var ht in I)"constructor"==ht&&(F||!bo.call(I,ht))||Ie.push(ht);return Ie}(I)}var vT=wh(function(I,F,Ie){nl(I,F,Ie)}),$1=wh(function(I,F,Ie,ht){nl(I,F,Ie,ht)}),q1=oc(function(I,F){var Ie={};if(null==I)return Ie;var ht=!1;F=Il(F,function(wn){return wn=sc(wn,I),ht||(ht=wn.length>1),wn}),wc(I,qf(I),Ie),ht&&(Ie=Iu(Ie,7,Zu));for(var tn=F.length;tn--;)qh(Ie,F[tn]);return Ie}),X1=oc(function(I,F){return null==I?{}:function af(I,F){return $h(I,F,function(Ie,ht){return hy(I,ht)})}(I,F)});function _T(I,F){if(null==I)return{};var Ie=Il(qf(I),function(ht){return[ht]});return F=ma(F),$h(I,Ie,function(ht,tn){return F(ht,tn[0])})}var Z1=vd(qc),Q1=vd(Sh);function dy(I){return null==I?[]:Ua(I,qc(I))}var IT=Nu(function(I,F,Ie){return F=F.toLowerCase(),I+(Ie?tA(F):F)});function tA(I){return Cv(hl(I).toLowerCase())}function ro(I){return(I=hl(I))&&I.replace(wt,oo).replace(Cu,"")}var ST=Nu(function(I,F,Ie){return I+(Ie?"-":"")+F.toLowerCase()}),ET=Nu(function(I,F,Ie){return I+(Ie?" ":"")+F.toLowerCase()}),rA=xc("toLowerCase"),oA=Nu(function(I,F,Ie){return I+(Ie?"_":"")+F.toLowerCase()}),PT=Nu(function(I,F,Ie){return I+(Ie?" ":"")+Cv(F)}),RT=Nu(function(I,F,Ie){return I+(Ie?" ":"")+F.toUpperCase()}),Cv=xc("toUpperCase");function uA(I,F,Ie){return I=hl(I),(F=Ie?j:F)===j?function kp(vi){return Gu.test(vi)}(I)?function Lf(vi){return vi.match(op)||[]}(I):function kc(vi){return vi.match(Lt)||[]}(I):I.match(F)||[]}var yw=Xa(function(I,F){try{return pl(I,j,F)}catch(Ie){return an(Ie)?Ie:new ka(Ie)}}),Rb=oc(function(I,F){return tl(F,function(Ie){Ie=ed(Ie),Dd(I,Ie,hn(I[Ie],I))}),I});function bw(I){return function(){return I}}var NT=uf(),BT=uf(!0);function _f(I){return I}function Ob(I){return kd("function"==typeof I?I:Iu(I,1))}var dA=Xa(function(I,F){return function(Ie){return zc(Ie,I,F)}}),Cw=Xa(function(I,F){return function(Ie){return zc(I,Ie,F)}});function fA(I,F,Ie){var ht=qc(F),tn=fd(F,ht);null==Ie&&(!gs(F)||!tn.length&&ht.length)&&(Ie=F,F=I,I=this,tn=fd(F,qc(F)));var wn=!(gs(Ie)&&"chain"in Ie&&!Ie.chain),ei=hi(I);return tl(tn,function(fi){var Mi=F[fi];I[fi]=Mi,ei&&(I.prototype[fi]=function(){var kr=this.__chain__;if(wn||kr){var Or=I(this.__wrapped__),Qr=Or.__actions__=po(this.__actions__);return Qr.push({func:Mi,args:arguments,thisArg:I}),Or.__chain__=kr,Or}return Mi.apply(I,zh([this.value()],arguments))})}),I}function xw(){}var Tn=$f(Il),Aw=$f(No),pA=$f(bg);function c0(I){return Fg(I)?Ta(ed(I)):function Od(I){return function(F){return jh(F,I)}}(I)}var gA=Sm(),VT=Sm(!0);function h0(){return[]}function ng(){return!1}var Fb=Ml(function(I,F){return I+F},0),Nb=Bu("ceil"),Ew=Ml(function(I,F){return I/F},1),Tw=Bu("floor"),_A=Ml(function(I,F){return I*F},1),fR=Bu("round"),jT=Ml(function(I,F){return I-F},0);return ln.after=function un(I,F){if("function"!=typeof F)throw new ir(V);return I=uo(I),function(){if(--I<1)return F.apply(this,arguments)}},ln.ary=In,ln.assign=l0,ln.assignIn=Tb,ln.assignInWith=Hg,ln.assignWith=cy,ln.at=l_,ln.before=En,ln.bind=hn,ln.bindAll=Rb,ln.bindKey=Mn,ln.castArray=function Si(){if(!arguments.length)return[];var I=arguments[0];return Rr(I)?I:[I]},ln.chain=oi,ln.chunk=function Vg(I,F,Ie){F=(Ie?Ic(I,F,Ie):F===j)?1:Sa(uo(F),0);var ht=null==I?0:I.length;if(!ht||F<1)return[];for(var tn=0,wn=0,ei=Yi(Yv(ht/F));tn<ht;)ei[wn++]=Su(I,tn,tn+=F);return ei},ln.compact=function Ug(I){for(var F=-1,Ie=null==I?0:I.length,ht=0,tn=[];++F<Ie;){var wn=I[F];wn&&(tn[ht++]=wn)}return tn},ln.concat=function n_(){var I=arguments.length;if(!I)return[];for(var F=Yi(I-1),Ie=arguments[0],ht=I;ht--;)F[ht-1]=arguments[ht];return zh(Rr(Ie)?po(Ie):[Ie],gu(F,1))},ln.cond=function OT(I){var F=null==I?0:I.length,Ie=ma();return I=F?Il(I,function(ht){if("function"!=typeof ht[1])throw new ir(V);return[Ie(ht[0]),ht[1]]}):[],Xa(function(ht){for(var tn=-1;++tn<F;){var wn=I[tn];if(pl(wn[0],this,ht))return pl(wn[1],this,ht)}})},ln.conforms=function cA(I){return function Eg(I){var F=qc(I);return function(Ie){return J_(Ie,I,F)}}(Iu(I,1))},ln.constant=bw,ln.countBy=Mr,ln.create=function Gg(I,F){var Ie=Xo(I);return null==F?Ie:Nf(Ie,F)},ln.curry=function mn(I,F,Ie){var ht=lh(I,8,j,j,j,j,j,F=Ie?j:F);return ht.placeholder=mn.placeholder,ht},ln.curryRight=function Fn(I,F,Ie){var ht=lh(I,16,j,j,j,j,j,F=Ie?j:F);return ht.placeholder=Fn.placeholder,ht},ln.debounce=Rn,ln.defaults=u0,ln.defaultsDeep=Mb,ln.defer=Xt,ln.delay=Nn,ln.difference=Hc,ln.differenceBy=Ap,ln.differenceWith=vv,ln.drop=function ty(I,F,Ie){var ht=null==I?0:I.length;return ht?Su(I,(F=Ie||F===j?1:uo(F))<0?0:F,ht):[]},ln.dropRight=function ny(I,F,Ie){var ht=null==I?0:I.length;return ht?Su(I,0,(F=ht-(F=Ie||F===j?1:uo(F)))<0?0:F):[]},ln.dropRightWhile=function km(I,F){return I&&I.length?iu(I,ma(F,3),!0,!0):[]},ln.dropWhile=function Ab(I,F){return I&&I.length?iu(I,ma(F,3),!0):[]},ln.fill=function Zp(I,F,Ie,ht){var tn=null==I?0:I.length;return tn?(Ie&&"number"!=typeof Ie&&Ic(I,F,Ie)&&(Ie=0,ht=tn),function xb(I,F,Ie,ht){var tn=I.length;for((Ie=uo(Ie))<0&&(Ie=-Ie>tn?0:tn+Ie),(ht=ht===j||ht>tn?tn:uo(ht))<0&&(ht+=tn),ht=Ie>ht?0:Eb(ht);Ie<ht;)I[Ie++]=F;return I}(I,F,Ie,ht)):[]},ln.filter=function gr(I,F){return(Rr(I)?mh:Tg)(I,ma(F,3))},ln.flatMap=function $i(I,F){return gu(U(I,F),1)},ln.flatMapDeep=function Ui(I,F){return gu(U(I,F),Ht)},ln.flatMapDepth=function g(I,F,Ie){return Ie=Ie===j?1:uo(Ie),gu(U(I,F),Ie)},ln.flatten=Ip,ln.flattenDeep=function i_(I){return null!=I&&I.length?gu(I,Ht):[]},ln.flattenDepth=function Ib(I,F){return null!=I&&I.length?gu(I,F=F===j?1:uo(F)):[]},ln.flip=function xn(I){return lh(I,512)},ln.flow=NT,ln.flowRight=BT,ln.fromPairs=function iy(I){for(var F=-1,Ie=null==I?0:I.length,ht={};++F<Ie;){var tn=I[F];ht[tn[0]]=tn[1]}return ht},ln.functions=function H1(I){return null==I?[]:fd(I,qc(I))},ln.functionsIn=function pw(I){return null==I?[]:fd(I,Sh(I))},ln.groupBy=b,ln.initial=function e0(I){return null!=I&&I.length?Su(I,0,-1):[]},ln.intersection=t0,ln.intersectionBy=sy,ln.intersectionWith=yv,ln.invert=G1,ln.invertBy=gw,ln.invokeMap=E,ln.iteratee=Ob,ln.keyBy=M,ln.keys=qc,ln.keysIn=Sh,ln.map=U,ln.mapKeys=function mT(I,F){var Ie={};return F=ma(F,3),Bc(I,function(ht,tn,wn){Dd(Ie,F(ht,tn,wn),ht)}),Ie},ln.mapValues=function j1(I,F){var Ie={};return F=ma(F,3),Bc(I,function(ht,tn,wn){Dd(Ie,tn,F(ht,tn,wn))}),Ie},ln.matches=function zT(I){return gd(Iu(I,1))},ln.matchesProperty=function hA(I,F){return Mg(I,Iu(F,1))},ln.memoize=gi,ln.merge=vT,ln.mergeWith=$1,ln.method=dA,ln.methodOf=Cw,ln.mixin=fA,ln.negate=$n,ln.nthArg=function uR(I){return I=uo(I),Xa(function(F){return Rd(F,I)})},ln.omit=q1,ln.omitBy=function mw(I,F){return _T(I,$n(ma(F)))},ln.once=function ai(I){return En(2,I)},ln.orderBy=function ne(I,F,Ie,ht){return null==I?[]:(Rr(F)||(F=null==F?[]:[F]),Rr(Ie=ht?j:Ie)||(Ie=null==Ie?[]:[Ie]),uu(I,F,Ie))},ln.over=Tn,ln.overArgs=wi,ln.overEvery=Aw,ln.overSome=pA,ln.partial=Pi,ln.partialRight=er,ln.partition=X,ln.pick=X1,ln.pickBy=_T,ln.property=c0,ln.propertyOf=function tg(I){return function(F){return null==I?j:jh(I,F)}},ln.pull=zl,ln.pullAll=s_,ln.pullAllBy=function Hd(I,F,Ie){return I&&I.length&&F&&F.length?Gl(I,F,ma(Ie,2)):I},ln.pullAllWith=function a_(I,F,Ie){return I&&I.length&&F&&F.length?Gl(I,F,j,Ie):I},ln.pullAt=ay,ln.range=gA,ln.rangeRight=VT,ln.rearg=xi,ln.reject=function Ge(I,F){return(Rr(I)?mh:Tg)(I,$n(ma(F,3)))},ln.remove=function r0(I,F){var Ie=[];if(!I||!I.length)return Ie;var ht=-1,tn=[],wn=I.length;for(F=ma(F,3);++ht<wn;){var ei=I[ht];F(ei,ht,I)&&(Ie.push(ei),tn.push(ht))}return oh(I,tn),Ie},ln.rest=function Ki(I,F){if("function"!=typeof I)throw new ir(V);return Xa(I,F=F===j?F:uo(F))},ln.reverse=bv,ln.sampleSize=function Ke(I,F,Ie){return F=(Ie?Ic(I,F,Ie):F===j)?1:uo(F),(Rr(I)?Qv:lv)(I,F)},ln.set=function yT(I,F,Ie){return null==I?I:ko(I,F,Ie)},ln.setWith=function K1(I,F,Ie,ht){return ht="function"==typeof ht?ht:j,null==I?I:ko(I,F,Ie,ht)},ln.shuffle=function ot(I){return(Rr(I)?ym:Pg)(I)},ln.slice=function oy(I,F,Ie){var ht=null==I?0:I.length;return ht?(Ie&&"number"!=typeof Ie&&Ic(I,F,Ie)?(F=0,Ie=ht):(F=null==F?0:uo(F),Ie=Ie===j?ht:uo(Ie)),Su(I,F,Ie)):[]},ln.sortBy=$t,ln.sortedUniq=function uy(I){return I&&I.length?kg(I):[]},ln.sortedUniqBy=function o(I,F){return I&&I.length?kg(I,ma(F,2)):[]},ln.split=function Eh(I,F,Ie){return Ie&&"number"!=typeof Ie&&Ic(I,F,Ie)&&(F=Ie=j),(Ie=Ie===j?Pn:Ie>>>0)?(I=hl(I))&&("string"==typeof F||null!=F&&!al(F))&&!(F=Yu(F))&&pu(I)?bc(cl(I),0,Ie):I.split(F,Ie):[]},ln.spread=function hr(I,F){if("function"!=typeof I)throw new ir(V);return F=null==F?0:Sa(uo(F),0),Xa(function(Ie){var ht=Ie[F],tn=bc(Ie,0,F);return ht&&zh(tn,ht),pl(I,this,tn)})},ln.tail=function f(I){var F=null==I?0:I.length;return F?Su(I,1,F):[]},ln.take=function v(I,F,Ie){return I&&I.length?Su(I,0,(F=Ie||F===j?1:uo(F))<0?0:F):[]},ln.takeRight=function x(I,F,Ie){var ht=null==I?0:I.length;return ht?Su(I,(F=ht-(F=Ie||F===j?1:uo(F)))<0?0:F,ht):[]},ln.takeRightWhile=function P(I,F){return I&&I.length?iu(I,ma(F,3),!1,!0):[]},ln.takeWhile=function G(I,F){return I&&I.length?iu(I,ma(F,3)):[]},ln.tap=function Jn(I,F){return F(I),I},ln.throttle=function Ar(I,F,Ie){var ht=!0,tn=!0;if("function"!=typeof I)throw new ir(V);return gs(Ie)&&(ht="leading"in Ie?!!Ie.leading:ht,tn="trailing"in Ie?!!Ie.trailing:tn),Rn(I,F,{leading:ht,maxWait:F,trailing:tn})},ln.thru=Xn,ln.toArray=Jp,ln.toPairs=Z1,ln.toPairsIn=Q1,ln.toPath=function vA(I){return Rr(I)?Il(I,ed):ec(I)?[I]:po(Bg(hl(I)))},ln.toPlainObject=a0,ln.transform=function eg(I,F,Ie){var ht=Rr(I),tn=ht||oa(I)||Gc(I);if(F=ma(F,4),null==Ie){var wn=I&&I.constructor;Ie=tn?ht?new wn:[]:gs(I)&&hi(wn)?Xo(Op(I)):{}}return(tn?tl:Bc)(I,function(ei,fi,Mi){return F(Ie,ei,fi,Mi)}),Ie},ln.unary=function mr(I){return In(I,1)},ln.union=J,ln.unionBy=se,ln.unionWith=Fe,ln.uniq=function Me(I){return I&&I.length?Ru(I):[]},ln.uniqBy=function qe(I,F){return I&&I.length?Ru(I,ma(F,2)):[]},ln.uniqWith=function Qe(I,F){return F="function"==typeof F?F:j,I&&I.length?Ru(I,j,F):[]},ln.unset=function bT(I,F){return null==I||qh(I,F)},ln.unzip=ft,ln.unzipWith=mt,ln.update=function J1(I,F,Ie){return null==I?I:Wf(I,F,jl(Ie))},ln.updateWith=function CT(I,F,Ie,ht){return ht="function"==typeof ht?ht:j,null==I?I:Wf(I,F,jl(Ie),ht)},ln.values=dy,ln.valuesIn=function wT(I){return null==I?[]:Ua(I,Sh(I))},ln.without=vt,ln.words=uA,ln.wrap=function pr(I,F){return Pi(jl(F),I)},ln.xor=Kt,ln.xorBy=Yt,ln.xorWith=jt,ln.zip=cn,ln.zipObject=function fn(I,F){return Yh(I||[],F||[],dp)},ln.zipObjectDeep=function Hn(I,F){return Yh(I||[],F||[],ko)},ln.zipWith=Ln,ln.entries=Z1,ln.entriesIn=Q1,ln.extend=Tb,ln.extendWith=Hg,fA(ln,ln),ln.add=Fb,ln.attempt=yw,ln.camelCase=IT,ln.capitalize=tA,ln.ceil=Nb,ln.clamp=function xT(I,F,Ie){return Ie===j&&(Ie=F,F=j),Ie!==j&&(Ie=(Ie=mf(Ie))==Ie?Ie:0),F!==j&&(F=(F=mf(F))==F?F:0),gp(mf(I),F,Ie)},ln.clone=function sr(I){return Iu(I,4)},ln.cloneDeep=function ts(I){return Iu(I,5)},ln.cloneDeepWith=function ps(I,F){return Iu(I,5,F="function"==typeof F?F:j)},ln.cloneWith=function Sr(I,F){return Iu(I,4,F="function"==typeof F?F:j)},ln.conformsTo=function Xs(I,F){return null==F||J_(I,F,qc(F))},ln.deburr=ro,ln.defaultTo=function FT(I,F){return null==I||I!=I?F:I},ln.divide=Ew,ln.endsWith=function tt(I,F,Ie){I=hl(I),F=Yu(F);var ht=I.length,tn=Ie=Ie===j?ht:gp(uo(Ie),0,ht);return(Ie-=F.length)>=0&&I.slice(Ie,tn)==F},ln.eq=sa,ln.escape=function nA(I){return(I=hl(I))&&he.test(I)?I.replace(R,Jd):I},ln.escapeRegExp=function iA(I){return(I=hl(I))&&Xe.test(I)?I.replace(ke,"\\$&"):I},ln.every=function xr(I,F,Ie){var ht=Rr(I)?No:Zy;return Ie&&Ic(I,F,Ie)&&(F=j),ht(I,ma(F,3))},ln.find=fs,ln.findIndex=_u,ln.findKey=function Qf(I,F){return $o(I,ma(F,3),Bc)},ln.findLast=Wr,ln.findLastIndex=_v,ln.findLastKey=function Db(I,F){return $o(I,ma(F,3),Ld)},ln.floor=Tw,ln.forEach=c,ln.forEachRight=p,ln.forIn=function u_(I,F){return null==I?I:zf(I,ma(F,3),Sh)},ln.forInRight=function c_(I,F){return null==I?I:Pd(I,ma(F,3),Sh)},ln.forOwn=function vf(I,F){return I&&Bc(I,ma(F,3))},ln.forOwnRight=function Pb(I,F){return I&&Ld(I,ma(F,3))},ln.get=Lb,ln.gt=Cs,ln.gte=ds,ln.has=function kb(I,F){return null!=I&&fv(I,F,ov)},ln.hasIn=hy,ln.head=ry,ln.identity=_f,ln.includes=function A(I,F,Ie,ht){I=Ts(I)?I:dy(I),Ie=Ie&&!ht?uo(Ie):0;var tn=I.length;return Ie<0&&(Ie=Sa(tn+Ie,0)),Ju(I)?Ie<=tn&&I.indexOf(F,Ie)>-1:!!tn&&qa(I,F,Ie)>-1},ln.indexOf=function Jy(I,F,Ie){var ht=null==I?0:I.length;if(!ht)return-1;var tn=null==Ie?0:uo(Ie);return tn<0&&(tn=Sa(ht+tn,0)),qa(I,F,tn)},ln.inRange=function eA(I,F,Ie){return F=$c(F),Ie===j?(Ie=F,F=0):Ie=$c(Ie),function mu(I,F,Ie){return I>=xu(F,Ie)&&I<Sa(F,Ie)}(I=mf(I),F,Ie)},ln.invoke=W1,ln.isArguments=ia,ln.isArray=Rr,ln.isArrayBuffer=Is,ln.isArrayLike=Ts,ln.isArrayLikeObject=aa,ln.isBoolean=function Ya(I){return!0===I||!1===I||rr(I)&&bl(I)==Oe},ln.isBuffer=oa,ln.isDate=Yr,ln.isElement=function Cn(I){return rr(I)&&1===I.nodeType&&!Uo(I)},ln.isEmpty=function qi(I){if(null==I)return!0;if(Ts(I)&&(Rr(I)||"string"==typeof I||"function"==typeof I.splice||oa(I)||Gc(I)||ia(I)))return!I.length;var F=$l(I);if(F==Rt||F==Ti)return!I.size;if(bd(I))return!ah(I).length;for(var Ie in I)if(bo.call(I,Ie))return!1;return!0},ln.isEqual=function Lr(I,F){return Vc(I,F)},ln.isEqualWith=function Tt(I,F,Ie){var ht=(Ie="function"==typeof Ie?Ie:j)?Ie(I,F):j;return ht===j?Vc(I,F,j,Ie):!!ht},ln.isError=an,ln.isFinite=function ti(I){return"number"==typeof I&&gm(I)},ln.isFunction=hi,ln.isInteger=pi,ln.isLength=os,ln.isMap=Ws,ln.isMatch=function Ur(I,F){return I===F||pd(I,F,Dm(F))},ln.isMatchWith=function Gr(I,F,Ie){return Ie="function"==typeof Ie?Ie:j,pd(I,F,Dm(F),Ie)},ln.isNaN=function as(I){return rl(I)&&I!=+I},ln.isNative=function go(I){if(df(I))throw new ka("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Vf(I)},ln.isNil=function Xl(I){return null==I},ln.isNull=function Ao(I){return null===I},ln.isNumber=rl,ln.isObject=gs,ln.isObjectLike=rr,ln.isPlainObject=Uo,ln.isRegExp=al,ln.isSafeInteger=function Os(I){return pi(I)&&I>=-Qn&&I<=Qn},ln.isSet=ru,ln.isString=Ju,ln.isSymbol=ec,ln.isTypedArray=Gc,ln.isUndefined=function Qp(I){return I===j},ln.isWeakMap=function Sp(I){return rr(I)&&$l(I)==Hr},ln.isWeakSet=function Wc(I){return rr(I)&&"[object WeakSet]"==bl(I)},ln.join=function r_(I,F){return null==I?"":dd.call(I,F)},ln.kebabCase=ST,ln.last=Ih,ln.lastIndexOf=function n0(I,F,Ie){var ht=null==I?0:I.length;if(!ht)return-1;var tn=ht;return Ie!==j&&(tn=(tn=uo(Ie))<0?Sa(ht+tn,0):xu(tn,ht-1)),F==F?function hd(vi,ar,Yi){for(var Ns=Yi+1;Ns--;)if(vi[Ns]===ar)return Ns;return Ns}(I,F,tn):Sl(I,Jl,tn,!0)},ln.lowerCase=ET,ln.lowerFirst=rA,ln.lt=lc,ln.lte=jc,ln.max=function Mw(I){return I&&I.length?e_(I,_f,rf):j},ln.maxBy=function dR(I,F){return I&&I.length?e_(I,ma(F,2),rf):j},ln.mean=function UT(I){return Ss(I,_f)},ln.meanBy=function HT(I,F){return Ss(I,ma(F,2))},ln.min=function GT(I){return I&&I.length?e_(I,_f,Hf):j},ln.minBy=function WT(I,F){return I&&I.length?e_(I,ma(F,2),Hf):j},ln.stubArray=h0,ln.stubFalse=ng,ln.stubObject=function Iw(){return{}},ln.stubString=function mA(){return""},ln.stubTrue=function Sw(){return!0},ln.multiply=_A,ln.nth=function Dl(I,F){return I&&I.length?Rd(I,uo(F)):j},ln.noConflict=function ww(){return Lu._===this&&(Lu._=Xy),this},ln.noop=xw,ln.now=Ut,ln.pad=function TT(I,F,Ie){I=hl(I);var ht=(F=uo(F))?Hl(I):0;if(!F||ht>=F)return I;var tn=(F-ht)/2;return xh(vl(tn),Ie)+I+xh(Yv(tn),Ie)},ln.padEnd=function sA(I,F,Ie){I=hl(I);var ht=(F=uo(F))?Hl(I):0;return F&&ht<F?I+xh(F-ht,Ie):I},ln.padStart=function MT(I,F,Ie){I=hl(I);var ht=(F=uo(F))?Hl(I):0;return F&&ht<F?xh(F-ht,Ie)+I:I},ln.parseInt=function DT(I,F,Ie){return Ie||null==F?F=0:F&&(F=+F),Po(hl(I).replace(je,""),F||0)},ln.random=function AT(I,F,Ie){if(Ie&&"boolean"!=typeof Ie&&Ic(I,F,Ie)&&(F=Ie=j),Ie===j&&("boolean"==typeof F?(Ie=F,F=j):"boolean"==typeof I&&(Ie=I,I=j)),I===j&&F===j?(I=0,F=1):(I=$c(I),F===j?(F=I,I=0):F=$c(F)),I>F){var ht=I;I=F,F=ht}if(Ie||I%1||F%1){var tn=qo();return xu(I+tn*(F-I+ua("1e-"+((tn+"").length-1))),F)}return lf(I,F)},ln.reduce=function fe(I,F,Ie){var ht=Rr(I)?Zd:ju,tn=arguments.length<3;return ht(I,ma(F,4),Ie,tn,nf)},ln.reduceRight=function be(I,F,Ie){var ht=Rr(I)?ks:ju,tn=arguments.length<3;return ht(I,ma(F,4),Ie,tn,Jv)},ln.repeat=function rR(I,F,Ie){return F=(Ie?Ic(I,F,Ie):F===j)?1:uo(F),il(hl(I),F)},ln.replace=function aA(){var I=arguments,F=hl(I[0]);return I.length<3?F:F.replace(I[1],I[2])},ln.result=function Y1(I,F,Ie){var ht=-1,tn=(F=sc(F,I)).length;for(tn||(tn=1,I=j);++ht<tn;){var wn=null==I?j:I[ed(F[ht])];wn===j&&(ht=tn,wn=Ie),I=hi(wn)?wn.call(I):wn}return I},ln.round=fR,ln.runInContext=vi,ln.sample=function $e(I){return(Rr(I)?Zv:ls)(I)},ln.size=function _t(I){if(null==I)return 0;if(Ts(I))return Ju(I)?Hl(I):I.length;var F=$l(I);return F==Rt||F==Ti?I.size:ah(I).length},ln.snakeCase=oA,ln.some=function Et(I,F,Ie){var ht=Rr(I)?bg:vp;return Ie&&Ic(I,F,Ie)&&(F=j),ht(I,ma(F,3))},ln.sortedIndex=function s0(I,F){return rc(I,F)},ln.sortedIndexBy=function Sb(I,F,Ie){return Lg(I,F,ma(Ie,2))},ln.sortedIndexOf=function Zf(I,F){var Ie=null==I?0:I.length;if(Ie){var ht=rc(I,F);if(ht<Ie&&sa(I[ht],F))return ht}return-1},ln.sortedLastIndex=function Rm(I,F){return rc(I,F,!0)},ln.sortedLastIndexBy=function o_(I,F,Ie){return Lg(I,F,ma(Ie,2),!0)},ln.sortedLastIndexOf=function ly(I,F){if(null!=I&&I.length){var ht=rc(I,F,!0)-1;if(sa(I[ht],F))return ht}return-1},ln.startCase=PT,ln.startsWith=function vw(I,F,Ie){return I=hl(I),Ie=null==Ie?0:gp(uo(Ie),0,I.length),F=Yu(F),I.slice(Ie,Ie+F.length)==F},ln.subtract=jT,ln.sum=function pR(I){return I&&I.length?lu(I,_f):0},ln.sumBy=function yA(I,F){return I&&I.length?lu(I,ma(F,2)):0},ln.template=function _w(I,F,Ie){var ht=ln.templateSettings;Ie&&Ic(I,F,Ie)&&(F=j),I=hl(I),F=Hg({},F,ht,Tm);var fi,Mi,tn=Hg({},F.imports,ht.imports,Tm),wn=qc(tn),ei=Ua(tn,wn),kr=0,Or=F.interpolate||nn,Qr="__p += '",zs=ui((F.escape||nn).source+"|"+Or.source+"|"+(Or===ge?Pe:nn).source+"|"+(F.evaluate||nn).source+"|$","g"),Js="//# sourceURL="+(bo.call(F,"sourceURL")?(F.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qm+"]")+"\n";I.replace(zs,function(Ra,Io,Ko,Gd,Wd,Xc){return Ko||(Ko=Gd),Qr+=I.slice(kr,Xc).replace(On,ih),Io&&(fi=!0,Qr+="' +\n__e("+Io+") +\n'"),Wd&&(Mi=!0,Qr+="';\n"+Wd+";\n__p += '"),Ko&&(Qr+="' +\n((__t = ("+Ko+")) == null ? '' : __t) +\n'"),kr=Xc+Ra.length,Ra}),Qr+="';\n";var Pa=bo.call(F,"variable")&&F.variable;if(Pa){if(Bt.test(Pa))throw new ka("Invalid `variable` option passed into `_.template`")}else Qr="with (obj) {\n"+Qr+"\n}\n";Qr=(Mi?Qr.replace(D,""):Qr).replace(H,"$1").replace(Z,"$1;"),Qr="function("+(Pa||"obj")+") {\n"+(Pa?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(fi?", __e = _.escape":"")+(Mi?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Qr+"return __p\n}";var Co=yw(function(){return Do(wn,Js+"return "+Qr).apply(j,ei)});if(Co.source=Qr,an(Co))throw Co;return Co},ln.times=function cR(I,F){if((I=uo(I))<1||I>Qn)return[];var Ie=Pn,ht=xu(I,Pn);F=ma(F),I-=Pn;for(var tn=Vh(ht,F);++Ie<I;)F(Ie);return tn},ln.toFinite=$c,ln.toInteger=uo,ln.toLength=Eb,ln.toLower=function LT(I){return hl(I).toLowerCase()},ln.toNumber=mf,ln.toSafeInteger=function o0(I){return I?gp(uo(I),-Qn,Qn):0===I?I:0},ln.toString=hl,ln.toUpper=function sR(I){return hl(I).toUpperCase()},ln.trim=function aR(I,F,Ie){if((I=hl(I))&&(Ie||F===j))return Qd(I);if(!I||!(F=Yu(F)))return I;var ht=cl(I),tn=cl(F);return bc(ht,Rc(ht,tn),Ha(ht,tn)+1).join("")},ln.trimEnd=function oR(I,F,Ie){if((I=hl(I))&&(Ie||F===j))return I.slice(0,$u(I)+1);if(!I||!(F=Yu(F)))return I;var ht=cl(I);return bc(ht,0,Ha(ht,cl(F))+1).join("")},ln.trimStart=function kT(I,F,Ie){if((I=hl(I))&&(Ie||F===j))return I.replace(je,"");if(!I||!(F=Yu(F)))return I;var ht=cl(I);return bc(ht,Rc(ht,cl(F))).join("")},ln.truncate=function lA(I,F){var Ie=30,ht="...";if(gs(F)){var tn="separator"in F?F.separator:tn;Ie="length"in F?uo(F.length):Ie,ht="omission"in F?Yu(F.omission):ht}var wn=(I=hl(I)).length;if(pu(I)){var ei=cl(I);wn=ei.length}if(Ie>=wn)return I;var fi=Ie-Hl(ht);if(fi<1)return ht;var Mi=ei?bc(ei,0,fi).join(""):I.slice(0,fi);if(tn===j)return Mi+ht;if(ei&&(fi+=Mi.length-fi),al(tn)){if(I.slice(fi).search(tn)){var kr,Or=Mi;for(tn.global||(tn=ui(tn.source,hl(We.exec(tn))+"g")),tn.lastIndex=0;kr=tn.exec(Or);)var Qr=kr.index;Mi=Mi.slice(0,Qr===j?fi:Qr)}}else if(I.indexOf(Yu(tn),fi)!=fi){var zs=Mi.lastIndexOf(tn);zs>-1&&(Mi=Mi.slice(0,zs))}return Mi+ht},ln.unescape=function lR(I){return(I=hl(I))&&Y.test(I)?I.replace($,Hh):I},ln.uniqueId=function hR(I){var F=++Cg;return hl(I)+F},ln.upperCase=RT,ln.upperFirst=Cv,ln.each=c,ln.eachRight=p,ln.first=ry,fA(ln,function(){var I={};return Bc(ln,function(F,Ie){bo.call(ln.prototype,Ie)||(I[Ie]=F)}),I}(),{chain:!1}),ln.VERSION="4.17.21",tl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(I){ln[I].placeholder=ln}),tl(["drop","take"],function(I,F){Ga.prototype[I]=function(Ie){Ie=Ie===j?1:Sa(uo(Ie),0);var ht=this.__filtered__&&!F?new Ga(this):this.clone();return ht.__filtered__?ht.__takeCount__=xu(Ie,ht.__takeCount__):ht.__views__.push({size:xu(Ie,Pn),type:I+(ht.__dir__<0?"Right":"")}),ht},Ga.prototype[I+"Right"]=function(Ie){return this.reverse()[I](Ie).reverse()}}),tl(["filter","map","takeWhile"],function(I,F){var Ie=F+1,ht=1==Ie||3==Ie;Ga.prototype[I]=function(tn){var wn=this.clone();return wn.__iteratees__.push({iteratee:ma(tn,3),type:Ie}),wn.__filtered__=wn.__filtered__||ht,wn}}),tl(["head","last"],function(I,F){var Ie="take"+(F?"Right":"");Ga.prototype[I]=function(){return this[Ie](1).value()[0]}}),tl(["initial","tail"],function(I,F){var Ie="drop"+(F?"":"Right");Ga.prototype[I]=function(){return this.__filtered__?new Ga(this):this[Ie](1)}}),Ga.prototype.compact=function(){return this.filter(_f)},Ga.prototype.find=function(I){return this.filter(I).head()},Ga.prototype.findLast=function(I){return this.reverse().find(I)},Ga.prototype.invokeMap=Xa(function(I,F){return"function"==typeof I?new Ga(this):this.map(function(Ie){return zc(Ie,I,F)})}),Ga.prototype.reject=function(I){return this.filter($n(ma(I)))},Ga.prototype.slice=function(I,F){I=uo(I);var Ie=this;return Ie.__filtered__&&(I>0||F<0)?new Ga(Ie):(I<0?Ie=Ie.takeRight(-I):I&&(Ie=Ie.drop(I)),F!==j&&(Ie=(F=uo(F))<0?Ie.dropRight(-F):Ie.take(F-I)),Ie)},Ga.prototype.takeRightWhile=function(I){return this.reverse().takeWhile(I).reverse()},Ga.prototype.toArray=function(){return this.take(Pn)},Bc(Ga.prototype,function(I,F){var Ie=/^(?:filter|find|map|reject)|While$/.test(F),ht=/^(?:head|last)$/.test(F),tn=ln[ht?"take"+("last"==F?"Right":""):F],wn=ht||/^find/.test(F);!tn||(ln.prototype[F]=function(){var ei=this.__wrapped__,fi=ht?[1]:arguments,Mi=ei instanceof Ga,kr=fi[0],Or=Mi||Rr(ei),Qr=function(Io){var Ko=tn.apply(ln,zh([Io],fi));return ht&&zs?Ko[0]:Ko};Or&&Ie&&"function"==typeof kr&&1!=kr.length&&(Mi=Or=!1);var zs=this.__chain__,Js=!!this.__actions__.length,Pa=wn&&!zs,Co=Mi&&!Js;if(!wn&&Or){ei=Co?ei:new Ga(this);var Ra=I.apply(ei,fi);return Ra.__actions__.push({func:Xn,args:[Qr],thisArg:j}),new _l(Ra,zs)}return Pa&&Co?I.apply(this,fi):(Ra=this.thru(Qr),Pa?ht?Ra.value()[0]:Ra.value():Ra)})}),tl(["pop","push","shift","sort","splice","unshift"],function(I){var F=pa[I],Ie=/^(?:push|sort|unshift)$/.test(I)?"tap":"thru",ht=/^(?:pop|shift)$/.test(I);ln.prototype[I]=function(){var tn=arguments;if(ht&&!this.__chain__){var wn=this.value();return F.apply(Rr(wn)?wn:[],tn)}return this[Ie](function(ei){return F.apply(Rr(ei)?ei:[],tn)})}}),Bc(Ga.prototype,function(I,F){var Ie=ln[F];if(Ie){var ht=Ie.name+"";bo.call(Ig,ht)||(Ig[ht]=[]),Ig[ht].push({name:F,func:Ie})}}),Ig[ji(j,2).name]=[{name:"wrapper",func:j}],Ga.prototype.clone=function Sg(){var I=new Ga(this.__wrapped__);return I.__actions__=po(this.__actions__),I.__dir__=this.__dir__,I.__filtered__=this.__filtered__,I.__iteratees__=po(this.__iteratees__),I.__takeCount__=this.__takeCount__,I.__views__=po(this.__views__),I},Ga.prototype.reverse=function Np(){if(this.__filtered__){var I=new Ga(this);I.__dir__=-1,I.__filtered__=!0}else(I=this.clone()).__dir__*=-1;return I},Ga.prototype.value=function Es(){var I=this.__wrapped__.value(),F=this.__dir__,Ie=Rr(I),ht=F<0,tn=Ie?I.length:0,wn=function dv(I,F,Ie){for(var ht=-1,tn=Ie.length;++ht<tn;){var wn=Ie[ht],ei=wn.size;switch(wn.type){case"drop":I+=ei;break;case"dropRight":F-=ei;break;case"take":F=xu(F,I+ei);break;case"takeRight":I=Sa(I,F-ei)}}return{start:I,end:F}}(0,tn,this.__views__),ei=wn.start,fi=wn.end,Mi=fi-ei,kr=ht?fi:ei-1,Or=this.__iteratees__,Qr=Or.length,zs=0,Js=xu(Mi,this.__takeCount__);if(!Ie||!ht&&tn==Mi&&Js==Mi)return bh(I,this.__actions__);var Pa=[];e:for(;Mi--&&zs<Js;){for(var Co=-1,Ra=I[kr+=F];++Co<Qr;){var Io=Or[Co],Gd=Io.type,Wd=(0,Io.iteratee)(Ra);if(2==Gd)Ra=Wd;else if(!Wd){if(1==Gd)continue e;break e}}Pa[zs++]=Ra}return Pa},ln.prototype.at=ci,ln.prototype.chain=function Li(){return oi(this)},ln.prototype.commit=function Tr(){return new _l(this.value(),this.__chain__)},ln.prototype.next=function dr(){this.__values__===j&&(this.__values__=Jp(this.value()));var I=this.__index__>=this.__values__.length;return{done:I,value:I?j:this.__values__[this.__index__++]}},ln.prototype.plant=function Un(I){for(var F,Ie=this;Ie instanceof zo;){var ht=Lm(Ie);ht.__index__=0,ht.__values__=j,F?tn.__wrapped__=ht:F=ht;var tn=ht;Ie=Ie.__wrapped__}return tn.__wrapped__=I,F},ln.prototype.reverse=function Gi(){var I=this.__wrapped__;if(I instanceof Ga){var F=I;return this.__actions__.length&&(F=new Ga(this)),(F=F.reverse()).__actions__.push({func:Xn,args:[bv],thisArg:j}),new _l(F,this.__chain__)}return this.thru(bv)},ln.prototype.toJSON=ln.prototype.valueOf=ln.prototype.value=function tr(){return bh(this.__wrapped__,this.__actions__)},ln.prototype.first=ln.prototype.head,xg&&(ln.prototype[xg]=function zn(){return this}),ln}();Lu._=ef,(ye=function(){return ef}.call(it,ae,it,yt))!==j&&(yt.exports=ye)}.call(this)},535:(yt,it,ae)=>{var ye=ae(9850);function oe(re,ie){if("function"!=typeof re||null!=ie&&"function"!=typeof ie)throw new TypeError("Expected a function");var V=function(){var K=arguments,q=ie?ie.apply(this,K):K[0],le=V.cache;if(le.has(q))return le.get(q);var Te=re.apply(this,K);return V.cache=le.set(q,Te)||le,Te};return V.cache=new(oe.Cache||ye),V}oe.Cache=ye,yt.exports=oe},1710:(yt,it,ae)=>{var ye=ae(2119);yt.exports=function(){return ye.Date.now()}},4793:(yt,it,ae)=>{var ye=ae(5963);yt.exports=function j(oe,re,ie){return null==oe?oe:ye(oe,re,ie)}},1467:(yt,it,ae)=>{var ye=ae(3348),j=ae(5940),oe=ae(4129),ie=/^[-+]0x[0-9a-f]+$/i,V=/^0b[01]+$/i,K=/^0o[0-7]+$/i,q=parseInt;yt.exports=function le(Te){if("number"==typeof Te)return Te;if(oe(Te))return NaN;if(j(Te)){var De="function"==typeof Te.valueOf?Te.valueOf():Te;Te=j(De)?De+"":De}if("string"!=typeof Te)return 0===Te?Te:+Te;Te=ye(Te);var xe=V.test(Te);return xe||K.test(Te)?q(Te.slice(2),xe?2:8):ie.test(Te)?NaN:+Te}},4152:(yt,it,ae)=>{var ye=ae(4633),j=ae(9454),oe=ae(9460),re=ae(4129),ie=ae(2855),V=ae(8533),K=ae(3943);yt.exports=function q(le){return oe(le)?ye(le,V):re(le)?[le]:j(ie(K(le)))}},3943:(yt,it,ae)=>{var ye=ae(3935);yt.exports=function j(oe){return null==oe?"":ye(oe)}},4826:(yt,it,ae)=>{"use strict";yt.exports=ae(6776)},6798:(yt,it,ae)=>{"use strict";yt.exports=ae(5485)},2484:yt=>{"use strict";yt.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},3266:yt=>{"use strict";var ie="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",V="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",De=new RegExp("^(?:"+ie+"|"+V+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),xe=new RegExp("^(?:"+ie+"|"+V+")");yt.exports.n=De,yt.exports.q=xe},3332:(yt,it,ae)=>{"use strict";var oe=Object.prototype.hasOwnProperty;function re(Ct,rn){return oe.call(Ct,rn)}function K(Ct){return!(Ct>=55296&&Ct<=57343||Ct>=64976&&Ct<=65007||65535==(65535&Ct)||65534==(65535&Ct)||Ct>=0&&Ct<=8||11===Ct||Ct>=14&&Ct<=31||Ct>=127&&Ct<=159||Ct>1114111)}function q(Ct){return Ct>65535?(Ct-=65536,String.fromCharCode(55296+(Ct>>10),56320+(1023&Ct))):String.fromCharCode(Ct)}var le=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,De=new RegExp(le.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),xe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,_e=ae(6798),Ve=/[&<>"]/,Ae=/[&<>"]/g,Se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function L(Ct){return Se[Ct]}var Ce=/[.?*+^$[\]\\(){}|-]/g,bt=ae(6020);it.lib={},it.lib.mdurl=ae(7214),it.lib.ucmicro=ae(9315),it.assign=function ie(Ct){var rn=Array.prototype.slice.call(arguments,1);return rn.forEach(function(Qt){if(Qt){if("object"!=typeof Qt)throw new TypeError(Qt+"must be object");Object.keys(Qt).forEach(function(Ht){Ct[Ht]=Qt[Ht]})}}),Ct},it.isString=function j(Ct){return"[object String]"===function ye(Ct){return Object.prototype.toString.call(Ct)}(Ct)},it.has=re,it.unescapeMd=function Re(Ct){return Ct.indexOf("\\")<0?Ct:Ct.replace(le,"$1")},it.unescapeAll=function Le(Ct){return Ct.indexOf("\\")<0&&Ct.indexOf("&")<0?Ct:Ct.replace(De,function(rn,Qt,Ht){return Qt||function Q(Ct,rn){var Qt=0;return re(_e,rn)?_e[rn]:35===rn.charCodeAt(0)&&xe.test(rn)&&K(Qt="x"===rn[1].toLowerCase()?parseInt(rn.slice(2),16):parseInt(rn.slice(1),10))?q(Qt):Ct}(rn,Ht)})},it.isValidEntityCode=K,it.fromCodePoint=q,it.escapeHtml=function ee(Ct){return Ve.test(Ct)?Ct.replace(Ae,L):Ct},it.arrayReplaceAt=function V(Ct,rn,Qt){return[].concat(Ct.slice(0,rn),Qt,Ct.slice(rn+1))},it.isSpace=function dt(Ct){switch(Ct){case 9:case 32:return!0}return!1},it.isWhiteSpace=function st(Ct){if(Ct>=8192&&Ct<=8202)return!0;switch(Ct){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},it.isMdAsciiPunct=function Vt(Ct){switch(Ct){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},it.isPunctChar=function ut(Ct){return bt.test(Ct)},it.escapeRE=function ze(Ct){return Ct.replace(Ce,"\\$&")},it.normalizeReference=function on(Ct){return Ct=Ct.trim().replace(/\s+/g," "),"\u1e7e"==="\u1e9e".toLowerCase()&&(Ct=Ct.replace(/\u1e9e/g,"\xdf")),Ct.toLowerCase().toUpperCase()}},8198:(yt,it,ae)=>{"use strict";it.parseLinkLabel=ae(9605),it.parseLinkDestination=ae(4072),it.parseLinkTitle=ae(4658)},4072:(yt,it,ae)=>{"use strict";var ye=ae(3332).unescapeAll;yt.exports=function(oe,re,ie){var V,K,le=re,Te={ok:!1,pos:0,lines:0,str:""};if(60===oe.charCodeAt(re)){for(re++;re<ie;){if(10===(V=oe.charCodeAt(re))||60===V)return Te;if(62===V)return Te.pos=re+1,Te.str=ye(oe.slice(le+1,re)),Te.ok=!0,Te;92===V&&re+1<ie?re+=2:re++}return Te}for(K=0;re<ie&&!(32===(V=oe.charCodeAt(re))||V<32||127===V);)if(92===V&&re+1<ie){if(32===oe.charCodeAt(re+1))break;re+=2}else{if(40===V&&++K>32)return Te;if(41===V){if(0===K)break;K--}re++}return le===re||0!==K||(Te.str=ye(oe.slice(le,re)),Te.lines=0,Te.pos=re,Te.ok=!0),Te}},9605:yt=>{"use strict";yt.exports=function(ae,ye,j){var oe,re,ie,V,K=-1,q=ae.posMax,le=ae.pos;for(ae.pos=ye+1,oe=1;ae.pos<q;){if(93===(ie=ae.src.charCodeAt(ae.pos))&&0==--oe){re=!0;break}if(V=ae.pos,ae.md.inline.skipToken(ae),91===ie)if(V===ae.pos-1)oe++;else if(j)return ae.pos=le,-1}return re&&(K=ae.pos),ae.pos=le,K}},4658:(yt,it,ae)=>{"use strict";var ye=ae(3332).unescapeAll;yt.exports=function(oe,re,ie){var V,K,q=0,le=re,Te={ok:!1,pos:0,lines:0,str:""};if(re>=ie||34!==(K=oe.charCodeAt(re))&&39!==K&&40!==K)return Te;for(re++,40===K&&(K=41);re<ie;){if((V=oe.charCodeAt(re))===K)return Te.pos=re+1,Te.lines=q,Te.str=ye(oe.slice(le+1,re)),Te.ok=!0,Te;if(40===V&&41===K)return Te;10===V?q++:92===V&&re+1<ie&&(re++,10===oe.charCodeAt(re)&&q++),re++}return Te}},6776:(yt,it,ae)=>{"use strict";var ye=ae(3332),j=ae(8198),oe=ae(7172),re=ae(2080),ie=ae(4223),V=ae(2900),K=ae(3353),q=ae(7214),le=ae(4879),Te={default:ae(4210),zero:ae(7020),commonmark:ae(8687)},De=/^(vbscript|javascript|file|data):/,xe=/^data:image\/(gif|png|jpeg|webp);/;function _e(Ae){var Se=Ae.trim().toLowerCase();return!De.test(Se)||!!xe.test(Se)}var Q=["http:","https:","mailto:"];function Re(Ae){var Se=q.parse(Ae,!0);if(Se.hostname&&(!Se.protocol||Q.indexOf(Se.protocol)>=0))try{Se.hostname=le.toASCII(Se.hostname)}catch{}return q.encode(q.format(Se))}function Le(Ae){var Se=q.parse(Ae,!0);if(Se.hostname&&(!Se.protocol||Q.indexOf(Se.protocol)>=0))try{Se.hostname=le.toUnicode(Se.hostname)}catch{}return q.decode(q.format(Se),q.decode.defaultChars+"%")}function Ve(Ae,Se){if(!(this instanceof Ve))return new Ve(Ae,Se);Se||ye.isString(Ae)||(Se=Ae||{},Ae="default"),this.inline=new V,this.block=new ie,this.core=new re,this.renderer=new oe,this.linkify=new K,this.validateLink=_e,this.normalizeLink=Re,this.normalizeLinkText=Le,this.utils=ye,this.helpers=ye.assign({},j),this.options={},this.configure(Ae),Se&&this.set(Se)}Ve.prototype.set=function(Ae){return ye.assign(this.options,Ae),this},Ve.prototype.configure=function(Ae){var L,Se=this;if(ye.isString(Ae)&&!(Ae=Te[L=Ae]))throw new Error('Wrong `markdown-it` preset "'+L+'", check name');if(!Ae)throw new Error("Wrong `markdown-it` preset, can't be empty");return Ae.options&&Se.set(Ae.options),Ae.components&&Object.keys(Ae.components).forEach(function(ee){Ae.components[ee].rules&&Se[ee].ruler.enableOnly(Ae.components[ee].rules),Ae.components[ee].rules2&&Se[ee].ruler2.enableOnly(Ae.components[ee].rules2)}),this},Ve.prototype.enable=function(Ae,Se){var L=[];Array.isArray(Ae)||(Ae=[Ae]),["core","block","inline"].forEach(function(Ce){L=L.concat(this[Ce].ruler.enable(Ae,!0))},this),L=L.concat(this.inline.ruler2.enable(Ae,!0));var ee=Ae.filter(function(Ce){return L.indexOf(Ce)<0});if(ee.length&&!Se)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+ee);return this},Ve.prototype.disable=function(Ae,Se){var L=[];Array.isArray(Ae)||(Ae=[Ae]),["core","block","inline"].forEach(function(Ce){L=L.concat(this[Ce].ruler.disable(Ae,!0))},this),L=L.concat(this.inline.ruler2.disable(Ae,!0));var ee=Ae.filter(function(Ce){return L.indexOf(Ce)<0});if(ee.length&&!Se)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+ee);return this},Ve.prototype.use=function(Ae){var Se=[this].concat(Array.prototype.slice.call(arguments,1));return Ae.apply(Ae,Se),this},Ve.prototype.parse=function(Ae,Se){if("string"!=typeof Ae)throw new Error("Input data should be a String");var L=new this.core.State(Ae,this,Se);return this.core.process(L),L.tokens},Ve.prototype.render=function(Ae,Se){return this.renderer.render(this.parse(Ae,Se=Se||{}),this.options,Se)},Ve.prototype.parseInline=function(Ae,Se){var L=new this.core.State(Ae,this,Se);return L.inlineMode=!0,this.core.process(L),L.tokens},Ve.prototype.renderInline=function(Ae,Se){return this.renderer.render(this.parseInline(Ae,Se=Se||{}),this.options,Se)},yt.exports=Ve},4223:(yt,it,ae)=>{"use strict";var ye=ae(1368),j=[["table",ae(2281),["paragraph","reference"]],["code",ae(6372)],["fence",ae(7931),["paragraph","reference","blockquote","list"]],["blockquote",ae(72),["paragraph","reference","blockquote","list"]],["hr",ae(8570),["paragraph","reference","blockquote","list"]],["list",ae(7827),["paragraph","reference","blockquote"]],["reference",ae(5886)],["html_block",ae(5134),["paragraph","reference","blockquote"]],["heading",ae(3462),["paragraph","reference","blockquote"]],["lheading",ae(5920)],["paragraph",ae(851)]];function oe(){this.ruler=new ye;for(var re=0;re<j.length;re++)this.ruler.push(j[re][0],j[re][1],{alt:(j[re][2]||[]).slice()})}oe.prototype.tokenize=function(re,ie,V){for(var q,le=this.ruler.getRules(""),Te=le.length,De=ie,xe=!1,_e=re.md.options.maxNesting;De<V&&(re.line=De=re.skipEmptyLines(De),!(De>=V||re.sCount[De]<re.blkIndent));){if(re.level>=_e){re.line=V;break}for(q=0;q<Te&&!le[q](re,De,V,!1);q++);re.tight=!xe,re.isEmpty(re.line-1)&&(xe=!0),(De=re.line)<V&&re.isEmpty(De)&&(xe=!0,De++,re.line=De)}},oe.prototype.parse=function(re,ie,V,K){var q;!re||(q=new this.State(re,ie,V,K),this.tokenize(q,q.line,q.lineMax))},oe.prototype.State=ae(1845),yt.exports=oe},2080:(yt,it,ae)=>{"use strict";var ye=ae(1368),j=[["normalize",ae(7398)],["block",ae(8905)],["inline",ae(3591)],["linkify",ae(9212)],["replacements",ae(1982)],["smartquotes",ae(8157)],["text_join",ae(2245)]];function oe(){this.ruler=new ye;for(var re=0;re<j.length;re++)this.ruler.push(j[re][0],j[re][1])}oe.prototype.process=function(re){var ie,V,K;for(ie=0,V=(K=this.ruler.getRules("")).length;ie<V;ie++)K[ie](re)},oe.prototype.State=ae(1076),yt.exports=oe},2900:(yt,it,ae)=>{"use strict";var ye=ae(1368),j=[["text",ae(1767)],["linkify",ae(6234)],["newline",ae(2921)],["escape",ae(8763)],["backticks",ae(415)],["strikethrough",ae(8165).w],["emphasis",ae(425).w],["link",ae(7219)],["image",ae(7936)],["autolink",ae(6973)],["html_inline",ae(3722)],["entity",ae(3559)]],oe=[["balance_pairs",ae(9269)],["strikethrough",ae(8165).g],["emphasis",ae(425).g],["fragments_join",ae(5767)]];function re(){var ie;for(this.ruler=new ye,ie=0;ie<j.length;ie++)this.ruler.push(j[ie][0],j[ie][1]);for(this.ruler2=new ye,ie=0;ie<oe.length;ie++)this.ruler2.push(oe[ie][0],oe[ie][1])}re.prototype.skipToken=function(ie){var V,K,q=ie.pos,le=this.ruler.getRules(""),Te=le.length,De=ie.md.options.maxNesting,xe=ie.cache;if(typeof xe[q]<"u")ie.pos=xe[q];else{if(ie.level<De)for(K=0;K<Te&&(ie.level++,V=le[K](ie,!0),ie.level--,!V);K++);else ie.pos=ie.posMax;V||ie.pos++,xe[q]=ie.pos}},re.prototype.tokenize=function(ie){for(var V,K,q=this.ruler.getRules(""),le=q.length,Te=ie.posMax,De=ie.md.options.maxNesting;ie.pos<Te;){if(ie.level<De)for(K=0;K<le&&!(V=q[K](ie,!1));K++);if(V){if(ie.pos>=Te)break}else ie.pending+=ie.src[ie.pos++]}ie.pending&&ie.pushPending()},re.prototype.parse=function(ie,V,K,q){var le,Te,De,xe=new this.State(ie,V,K,q);for(this.tokenize(xe),De=(Te=this.ruler2.getRules("")).length,le=0;le<De;le++)Te[le](xe)},re.prototype.State=ae(630),yt.exports=re},8687:yt=>{"use strict";yt.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},4210:yt=>{"use strict";yt.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},7020:yt=>{"use strict";yt.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},7172:(yt,it,ae)=>{"use strict";var ye=ae(3332).assign,j=ae(3332).unescapeAll,oe=ae(3332).escapeHtml,re={};function ie(){this.rules=ye({},re)}re.code_inline=function(V,K,q,le,Te){return"<code"+Te.renderAttrs(V[K])+">"+oe(V[K].content)+"</code>"},re.code_block=function(V,K,q,le,Te){return"<pre"+Te.renderAttrs(V[K])+"><code>"+oe(V[K].content)+"</code></pre>\n"},re.fence=function(V,K,q,le,Te){var Re,Le,Ve,Ae,De=V[K],xe=De.info?j(De.info).trim():"",_e="",Q="";return xe&&(_e=(Ve=xe.split(/(\s+)/g))[0],Q=Ve.slice(2).join("")),0===(Re=q.highlight&&q.highlight(De.content,_e,Q)||oe(De.content)).indexOf("<pre")?Re+"\n":xe?(Le=De.attrIndex("class"),Ae=De.attrs?De.attrs.slice():[],Le<0?Ae.push(["class",q.langPrefix+_e]):(Ae[Le]=Ae[Le].slice(),Ae[Le][1]+=" "+q.langPrefix+_e),"<pre><code"+Te.renderAttrs({attrs:Ae})+">"+Re+"</code></pre>\n"):"<pre><code"+Te.renderAttrs(De)+">"+Re+"</code></pre>\n"},re.image=function(V,K,q,le,Te){var De=V[K];return De.attrs[De.attrIndex("alt")][1]=Te.renderInlineAsText(De.children,q,le),Te.renderToken(V,K,q)},re.hardbreak=function(V,K,q){return q.xhtmlOut?"<br />\n":"<br>\n"},re.softbreak=function(V,K,q){return q.breaks?q.xhtmlOut?"<br />\n":"<br>\n":"\n"},re.text=function(V,K){return oe(V[K].content)},re.html_block=function(V,K){return V[K].content},re.html_inline=function(V,K){return V[K].content},ie.prototype.renderAttrs=function(K){var q,le,Te;if(!K.attrs)return"";for(Te="",q=0,le=K.attrs.length;q<le;q++)Te+=" "+oe(K.attrs[q][0])+'="'+oe(K.attrs[q][1])+'"';return Te},ie.prototype.renderToken=function(K,q,le){var Te,De="",xe=!1,_e=K[q];return _e.hidden?"":(_e.block&&-1!==_e.nesting&&q&&K[q-1].hidden&&(De+="\n"),De+=(-1===_e.nesting?"</":"<")+_e.tag,De+=this.renderAttrs(_e),0===_e.nesting&&le.xhtmlOut&&(De+=" /"),_e.block&&(xe=!0,1===_e.nesting&&q+1<K.length&&("inline"===(Te=K[q+1]).type||Te.hidden||-1===Te.nesting&&Te.tag===_e.tag)&&(xe=!1)),De+=xe?">\n":">")},ie.prototype.renderInline=function(V,K,q){for(var le,Te="",De=this.rules,xe=0,_e=V.length;xe<_e;xe++)Te+=typeof De[le=V[xe].type]<"u"?De[le](V,xe,K,q,this):this.renderToken(V,xe,K);return Te},ie.prototype.renderInlineAsText=function(V,K,q){for(var le="",Te=0,De=V.length;Te<De;Te++)"text"===V[Te].type?le+=V[Te].content:"image"===V[Te].type?le+=this.renderInlineAsText(V[Te].children,K,q):"softbreak"===V[Te].type&&(le+="\n");return le},ie.prototype.render=function(V,K,q){var le,Te,De,xe="",_e=this.rules;for(le=0,Te=V.length;le<Te;le++)xe+="inline"===(De=V[le].type)?this.renderInline(V[le].children,K,q):typeof _e[De]<"u"?_e[V[le].type](V,le,K,q,this):this.renderToken(V,le,K,q);return xe},yt.exports=ie},1368:yt=>{"use strict";function it(){this.__rules__=[],this.__cache__=null}it.prototype.__find__=function(ae){for(var ye=0;ye<this.__rules__.length;ye++)if(this.__rules__[ye].name===ae)return ye;return-1},it.prototype.__compile__=function(){var ae=this,ye=[""];ae.__rules__.forEach(function(j){!j.enabled||j.alt.forEach(function(oe){ye.indexOf(oe)<0&&ye.push(oe)})}),ae.__cache__={},ye.forEach(function(j){ae.__cache__[j]=[],ae.__rules__.forEach(function(oe){!oe.enabled||j&&oe.alt.indexOf(j)<0||ae.__cache__[j].push(oe.fn)})})},it.prototype.at=function(ae,ye,j){var oe=this.__find__(ae),re=j||{};if(-1===oe)throw new Error("Parser rule not found: "+ae);this.__rules__[oe].fn=ye,this.__rules__[oe].alt=re.alt||[],this.__cache__=null},it.prototype.before=function(ae,ye,j,oe){var re=this.__find__(ae),ie=oe||{};if(-1===re)throw new Error("Parser rule not found: "+ae);this.__rules__.splice(re,0,{name:ye,enabled:!0,fn:j,alt:ie.alt||[]}),this.__cache__=null},it.prototype.after=function(ae,ye,j,oe){var re=this.__find__(ae),ie=oe||{};if(-1===re)throw new Error("Parser rule not found: "+ae);this.__rules__.splice(re+1,0,{name:ye,enabled:!0,fn:j,alt:ie.alt||[]}),this.__cache__=null},it.prototype.push=function(ae,ye,j){this.__rules__.push({name:ae,enabled:!0,fn:ye,alt:(j||{}).alt||[]}),this.__cache__=null},it.prototype.enable=function(ae,ye){Array.isArray(ae)||(ae=[ae]);var j=[];return ae.forEach(function(oe){var re=this.__find__(oe);if(re<0){if(ye)return;throw new Error("Rules manager: invalid rule name "+oe)}this.__rules__[re].enabled=!0,j.push(oe)},this),this.__cache__=null,j},it.prototype.enableOnly=function(ae,ye){Array.isArray(ae)||(ae=[ae]),this.__rules__.forEach(function(j){j.enabled=!1}),this.enable(ae,ye)},it.prototype.disable=function(ae,ye){Array.isArray(ae)||(ae=[ae]);var j=[];return ae.forEach(function(oe){var re=this.__find__(oe);if(re<0){if(ye)return;throw new Error("Rules manager: invalid rule name "+oe)}this.__rules__[re].enabled=!1,j.push(oe)},this),this.__cache__=null,j},it.prototype.getRules=function(ae){return null===this.__cache__&&this.__compile__(),this.__cache__[ae]||[]},yt.exports=it},72:(yt,it,ae)=>{"use strict";var ye=ae(3332).isSpace;yt.exports=function(oe,re,ie,V){var K,q,le,Te,De,xe,_e,Q,Re,Le,Ve,Ae,Se,L,ee,Ce,ze,dt,st,bt,ut=oe.lineMax,Vt=oe.bMarks[re]+oe.tShift[re],on=oe.eMarks[re];if(oe.sCount[re]-oe.blkIndent>=4||62!==oe.src.charCodeAt(Vt++))return!1;if(V)return!0;for(Te=Re=oe.sCount[re]+1,32===oe.src.charCodeAt(Vt)?(Vt++,Te++,Re++,K=!1,Ce=!0):9===oe.src.charCodeAt(Vt)?(Ce=!0,(oe.bsCount[re]+Re)%4==3?(Vt++,Te++,Re++,K=!1):K=!0):Ce=!1,Le=[oe.bMarks[re]],oe.bMarks[re]=Vt;Vt<on&&(q=oe.src.charCodeAt(Vt),ye(q));)9===q?Re+=4-(Re+oe.bsCount[re]+(K?1:0))%4:Re++,Vt++;for(Ve=[oe.bsCount[re]],oe.bsCount[re]=oe.sCount[re]+1+(Ce?1:0),xe=Vt>=on,L=[oe.sCount[re]],oe.sCount[re]=Re-Te,ee=[oe.tShift[re]],oe.tShift[re]=Vt-oe.bMarks[re],dt=oe.md.block.ruler.getRules("blockquote"),Se=oe.parentType,oe.parentType="blockquote",Q=re+1;Q<ie&&(bt=oe.sCount[Q]<oe.blkIndent,!((Vt=oe.bMarks[Q]+oe.tShift[Q])>=(on=oe.eMarks[Q])));Q++)if(62!==oe.src.charCodeAt(Vt++)||bt){if(xe)break;for(ze=!1,le=0,De=dt.length;le<De;le++)if(dt[le](oe,Q,ie,!0)){ze=!0;break}if(ze){oe.lineMax=Q,0!==oe.blkIndent&&(Le.push(oe.bMarks[Q]),Ve.push(oe.bsCount[Q]),ee.push(oe.tShift[Q]),L.push(oe.sCount[Q]),oe.sCount[Q]-=oe.blkIndent);break}Le.push(oe.bMarks[Q]),Ve.push(oe.bsCount[Q]),ee.push(oe.tShift[Q]),L.push(oe.sCount[Q]),oe.sCount[Q]=-1}else{for(Te=Re=oe.sCount[Q]+1,32===oe.src.charCodeAt(Vt)?(Vt++,Te++,Re++,K=!1,Ce=!0):9===oe.src.charCodeAt(Vt)?(Ce=!0,(oe.bsCount[Q]+Re)%4==3?(Vt++,Te++,Re++,K=!1):K=!0):Ce=!1,Le.push(oe.bMarks[Q]),oe.bMarks[Q]=Vt;Vt<on&&(q=oe.src.charCodeAt(Vt),ye(q));)9===q?Re+=4-(Re+oe.bsCount[Q]+(K?1:0))%4:Re++,Vt++;xe=Vt>=on,Ve.push(oe.bsCount[Q]),oe.bsCount[Q]=oe.sCount[Q]+1+(Ce?1:0),L.push(oe.sCount[Q]),oe.sCount[Q]=Re-Te,ee.push(oe.tShift[Q]),oe.tShift[Q]=Vt-oe.bMarks[Q]}for(Ae=oe.blkIndent,oe.blkIndent=0,(st=oe.push("blockquote_open","blockquote",1)).markup=">",st.map=_e=[re,0],oe.md.block.tokenize(oe,re,Q),(st=oe.push("blockquote_close","blockquote",-1)).markup=">",oe.lineMax=ut,oe.parentType=Se,_e[1]=oe.line,le=0;le<ee.length;le++)oe.bMarks[le+re]=Le[le],oe.tShift[le+re]=ee[le],oe.sCount[le+re]=L[le],oe.bsCount[le+re]=Ve[le];return oe.blkIndent=Ae,!0}},6372:yt=>{"use strict";yt.exports=function(ae,ye,j){var oe,re,ie;if(ae.sCount[ye]-ae.blkIndent<4)return!1;for(re=oe=ye+1;oe<j;)if(ae.isEmpty(oe))oe++;else{if(!(ae.sCount[oe]-ae.blkIndent>=4))break;re=++oe}return ae.line=re,(ie=ae.push("code_block","code",0)).content=ae.getLines(ye,re,4+ae.blkIndent,!1)+"\n",ie.map=[ye,ae.line],!0}},7931:yt=>{"use strict";yt.exports=function(ae,ye,j,oe){var re,ie,V,K,q,le,Te,De=!1,xe=ae.bMarks[ye]+ae.tShift[ye],_e=ae.eMarks[ye];if(ae.sCount[ye]-ae.blkIndent>=4||xe+3>_e||126!==(re=ae.src.charCodeAt(xe))&&96!==re||(q=xe,(ie=(xe=ae.skipChars(xe,re))-q)<3)||(Te=ae.src.slice(q,xe),V=ae.src.slice(xe,_e),96===re&&V.indexOf(String.fromCharCode(re))>=0))return!1;if(oe)return!0;for(K=ye;!(++K>=j||(xe=q=ae.bMarks[K]+ae.tShift[K],_e=ae.eMarks[K],xe<_e&&ae.sCount[K]<ae.blkIndent));)if(!(ae.src.charCodeAt(xe)!==re||ae.sCount[K]-ae.blkIndent>=4||(xe=ae.skipChars(xe,re),xe-q<ie||(xe=ae.skipSpaces(xe),xe<_e)))){De=!0;break}return ie=ae.sCount[ye],ae.line=K+(De?1:0),(le=ae.push("fence","code",0)).info=V,le.content=ae.getLines(ye+1,K,ie,!0),le.markup=Te,le.map=[ye,ae.line],!0}},3462:(yt,it,ae)=>{"use strict";var ye=ae(3332).isSpace;yt.exports=function(oe,re,ie,V){var K,q,le,Te,De=oe.bMarks[re]+oe.tShift[re],xe=oe.eMarks[re];if(oe.sCount[re]-oe.blkIndent>=4||35!==(K=oe.src.charCodeAt(De))||De>=xe)return!1;for(q=1,K=oe.src.charCodeAt(++De);35===K&&De<xe&&q<=6;)q++,K=oe.src.charCodeAt(++De);return!(q>6||De<xe&&!ye(K)||(V||(xe=oe.skipSpacesBack(xe,De),(le=oe.skipCharsBack(xe,35,De))>De&&ye(oe.src.charCodeAt(le-1))&&(xe=le),oe.line=re+1,(Te=oe.push("heading_open","h"+String(q),1)).markup="########".slice(0,q),Te.map=[re,oe.line],(Te=oe.push("inline","",0)).content=oe.src.slice(De,xe).trim(),Te.map=[re,oe.line],Te.children=[],(Te=oe.push("heading_close","h"+String(q),-1)).markup="########".slice(0,q)),0))}},8570:(yt,it,ae)=>{"use strict";var ye=ae(3332).isSpace;yt.exports=function(oe,re,ie,V){var K,q,le,Te,De=oe.bMarks[re]+oe.tShift[re],xe=oe.eMarks[re];if(oe.sCount[re]-oe.blkIndent>=4||42!==(K=oe.src.charCodeAt(De++))&&45!==K&&95!==K)return!1;for(q=1;De<xe;){if((le=oe.src.charCodeAt(De++))!==K&&!ye(le))return!1;le===K&&q++}return!(q<3||(V||(oe.line=re+1,(Te=oe.push("hr","hr",0)).map=[re,oe.line],Te.markup=Array(q+1).join(String.fromCharCode(K))),0))}},5134:(yt,it,ae)=>{"use strict";var ye=ae(2484),j=ae(3266).q,oe=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+ye.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(j.source+"\\s*$"),/^$/,!1]];yt.exports=function(ie,V,K,q){var le,Te,De,xe,_e=ie.bMarks[V]+ie.tShift[V],Q=ie.eMarks[V];if(ie.sCount[V]-ie.blkIndent>=4||!ie.md.options.html||60!==ie.src.charCodeAt(_e))return!1;for(xe=ie.src.slice(_e,Q),le=0;le<oe.length&&!oe[le][0].test(xe);le++);if(le===oe.length)return!1;if(q)return oe[le][2];if(Te=V+1,!oe[le][1].test(xe))for(;Te<K&&!(ie.sCount[Te]<ie.blkIndent);Te++)if(xe=ie.src.slice(_e=ie.bMarks[Te]+ie.tShift[Te],Q=ie.eMarks[Te]),oe[le][1].test(xe)){0!==xe.length&&Te++;break}return ie.line=Te,(De=ie.push("html_block","",0)).map=[V,Te],De.content=ie.getLines(V,Te,ie.blkIndent,!0),!0}},5920:yt=>{"use strict";yt.exports=function(ae,ye,j){var oe,re,ie,V,K,q,le,Te,De,_e,xe=ye+1,Q=ae.md.block.ruler.getRules("paragraph");if(ae.sCount[ye]-ae.blkIndent>=4)return!1;for(_e=ae.parentType,ae.parentType="paragraph";xe<j&&!ae.isEmpty(xe);xe++)if(!(ae.sCount[xe]-ae.blkIndent>3)){if(ae.sCount[xe]>=ae.blkIndent&&(q=ae.bMarks[xe]+ae.tShift[xe])<(le=ae.eMarks[xe])&&(45===(De=ae.src.charCodeAt(q))||61===De)&&(q=ae.skipChars(q,De),(q=ae.skipSpaces(q))>=le)){Te=61===De?1:2;break}if(!(ae.sCount[xe]<0)){for(re=!1,ie=0,V=Q.length;ie<V;ie++)if(Q[ie](ae,xe,j,!0)){re=!0;break}if(re)break}}return!!Te&&(oe=ae.getLines(ye,xe,ae.blkIndent,!1).trim(),ae.line=xe+1,(K=ae.push("heading_open","h"+String(Te),1)).markup=String.fromCharCode(De),K.map=[ye,ae.line],(K=ae.push("inline","",0)).content=oe,K.map=[ye,ae.line-1],K.children=[],(K=ae.push("heading_close","h"+String(Te),-1)).markup=String.fromCharCode(De),ae.parentType=_e,!0)}},7827:(yt,it,ae)=>{"use strict";var ye=ae(3332).isSpace;function j(ie,V){var K,q,le,Te;return q=ie.bMarks[V]+ie.tShift[V],le=ie.eMarks[V],42!==(K=ie.src.charCodeAt(q++))&&45!==K&&43!==K||q<le&&(Te=ie.src.charCodeAt(q),!ye(Te))?-1:q}function oe(ie,V){var K,q=ie.bMarks[V]+ie.tShift[V],le=q,Te=ie.eMarks[V];if(le+1>=Te||(K=ie.src.charCodeAt(le++))<48||K>57)return-1;for(;;){if(le>=Te)return-1;if(!((K=ie.src.charCodeAt(le++))>=48&&K<=57)){if(41===K||46===K)break;return-1}if(le-q>=10)return-1}return le<Te&&(K=ie.src.charCodeAt(le),!ye(K))?-1:le}yt.exports=function(V,K,q,le){var Te,De,xe,_e,Q,Re,Le,Ve,Ae,Se,L,ee,Ce,ze,dt,st,bt,ut,Vt,on,Ct,rn,Qt,Ht,Qn,en,Sn,Pn,xt=!1,Jt=!0;if(V.sCount[K]-V.blkIndent>=4||V.listIndent>=0&&V.sCount[K]-V.listIndent>=4&&V.sCount[K]<V.blkIndent)return!1;if(le&&"paragraph"===V.parentType&&V.sCount[K]>=V.blkIndent&&(xt=!0),(Qt=oe(V,K))>=0){if(Le=!0,Qn=V.bMarks[K]+V.tShift[K],Ce=Number(V.src.slice(Qn,Qt-1)),xt&&1!==Ce)return!1}else{if(!((Qt=j(V,K))>=0))return!1;Le=!1}if(xt&&V.skipSpaces(Qt)>=V.eMarks[K])return!1;if(ee=V.src.charCodeAt(Qt-1),le)return!0;for(L=V.tokens.length,Le?(Pn=V.push("ordered_list_open","ol",1),1!==Ce&&(Pn.attrs=[["start",Ce]])):Pn=V.push("bullet_list_open","ul",1),Pn.map=Se=[K,0],Pn.markup=String.fromCharCode(ee),dt=K,Ht=!1,Sn=V.md.block.ruler.getRules("list"),ut=V.parentType,V.parentType="list";dt<q;){for(rn=Qt,ze=V.eMarks[dt],Re=st=V.sCount[dt]+Qt-(V.bMarks[K]+V.tShift[K]);rn<ze;){if(9===(Te=V.src.charCodeAt(rn)))st+=4-(st+V.bsCount[dt])%4;else{if(32!==Te)break;st++}rn++}if((Q=(De=rn)>=ze?1:st-Re)>4&&(Q=1),_e=Re+Q,(Pn=V.push("list_item_open","li",1)).markup=String.fromCharCode(ee),Pn.map=Ve=[K,0],Le&&(Pn.info=V.src.slice(Qn,Qt-1)),Ct=V.tight,on=V.tShift[K],Vt=V.sCount[K],bt=V.listIndent,V.listIndent=V.blkIndent,V.blkIndent=_e,V.tight=!0,V.tShift[K]=De-V.bMarks[K],V.sCount[K]=st,De>=ze&&V.isEmpty(K+1)?V.line=Math.min(V.line+2,q):V.md.block.tokenize(V,K,q,!0),(!V.tight||Ht)&&(Jt=!1),Ht=V.line-K>1&&V.isEmpty(V.line-1),V.blkIndent=V.listIndent,V.listIndent=bt,V.tShift[K]=on,V.sCount[K]=Vt,V.tight=Ct,(Pn=V.push("list_item_close","li",-1)).markup=String.fromCharCode(ee),dt=K=V.line,Ve[1]=dt,De=V.bMarks[K],dt>=q||V.sCount[dt]<V.blkIndent||V.sCount[K]-V.blkIndent>=4)break;for(en=!1,xe=0,Ae=Sn.length;xe<Ae;xe++)if(Sn[xe](V,dt,q,!0)){en=!0;break}if(en)break;if(Le){if((Qt=oe(V,dt))<0)break;Qn=V.bMarks[dt]+V.tShift[dt]}else if((Qt=j(V,dt))<0)break;if(ee!==V.src.charCodeAt(Qt-1))break}return(Pn=Le?V.push("ordered_list_close","ol",-1):V.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(ee),Se[1]=dt,V.line=dt,V.parentType=ut,Jt&&function re(ie,V){var K,q,le=ie.level+2;for(K=V+2,q=ie.tokens.length-2;K<q;K++)ie.tokens[K].level===le&&"paragraph_open"===ie.tokens[K].type&&(ie.tokens[K+2].hidden=!0,ie.tokens[K].hidden=!0,K+=2)}(V,L),!0}},851:yt=>{"use strict";yt.exports=function(ae,ye){var j,oe,re,ie,V,K,q=ye+1,le=ae.md.block.ruler.getRules("paragraph"),Te=ae.lineMax;for(K=ae.parentType,ae.parentType="paragraph";q<Te&&!ae.isEmpty(q);q++)if(!(ae.sCount[q]-ae.blkIndent>3||ae.sCount[q]<0)){for(oe=!1,re=0,ie=le.length;re<ie;re++)if(le[re](ae,q,Te,!0)){oe=!0;break}if(oe)break}return j=ae.getLines(ye,q,ae.blkIndent,!1).trim(),ae.line=q,(V=ae.push("paragraph_open","p",1)).map=[ye,ae.line],(V=ae.push("inline","",0)).content=j,V.map=[ye,ae.line],V.children=[],V=ae.push("paragraph_close","p",-1),ae.parentType=K,!0}},5886:(yt,it,ae)=>{"use strict";var ye=ae(3332).normalizeReference,j=ae(3332).isSpace;yt.exports=function(re,ie,V,K){var q,le,Te,De,xe,_e,Q,Re,Le,Ve,Ae,Se,L,ee,Ce,ze,dt=0,st=re.bMarks[ie]+re.tShift[ie],bt=re.eMarks[ie],ut=ie+1;if(re.sCount[ie]-re.blkIndent>=4||91!==re.src.charCodeAt(st))return!1;for(;++st<bt;)if(93===re.src.charCodeAt(st)&&92!==re.src.charCodeAt(st-1)){if(st+1===bt||58!==re.src.charCodeAt(st+1))return!1;break}for(De=re.lineMax,Ce=re.md.block.ruler.getRules("reference"),Ve=re.parentType,re.parentType="reference";ut<De&&!re.isEmpty(ut);ut++)if(!(re.sCount[ut]-re.blkIndent>3||re.sCount[ut]<0)){for(ee=!1,_e=0,Q=Ce.length;_e<Q;_e++)if(Ce[_e](re,ut,De,!0)){ee=!0;break}if(ee)break}for(bt=(L=re.getLines(ie,ut,re.blkIndent,!1).trim()).length,st=1;st<bt;st++){if(91===(q=L.charCodeAt(st)))return!1;if(93===q){Le=st;break}(10===q||92===q&&++st<bt&&10===L.charCodeAt(st))&&dt++}if(Le<0||58!==L.charCodeAt(Le+1))return!1;for(st=Le+2;st<bt;st++)if(10===(q=L.charCodeAt(st)))dt++;else if(!j(q))break;if(!(Ae=re.md.helpers.parseLinkDestination(L,st,bt)).ok||(xe=re.md.normalizeLink(Ae.str),!re.md.validateLink(xe)))return!1;for(le=st=Ae.pos,Te=dt+=Ae.lines,Se=st;st<bt;st++)if(10===(q=L.charCodeAt(st)))dt++;else if(!j(q))break;for(Ae=re.md.helpers.parseLinkTitle(L,st,bt),st<bt&&Se!==st&&Ae.ok?(ze=Ae.str,st=Ae.pos,dt+=Ae.lines):(ze="",st=le,dt=Te);st<bt&&(q=L.charCodeAt(st),j(q));)st++;if(st<bt&&10!==L.charCodeAt(st)&&ze)for(ze="",st=le,dt=Te;st<bt&&(q=L.charCodeAt(st),j(q));)st++;return!(st<bt&&10!==L.charCodeAt(st)||(Re=ye(L.slice(1,Le)),!Re)||(K||(typeof re.env.references>"u"&&(re.env.references={}),typeof re.env.references[Re]>"u"&&(re.env.references[Re]={title:ze,href:xe}),re.parentType=Ve,re.line=ie+dt+1),0))}},1845:(yt,it,ae)=>{"use strict";var ye=ae(6263),j=ae(3332).isSpace;function oe(re,ie,V,K){var q,le,Te,De,xe,_e,Q,Re;for(this.src=re,this.md=ie,this.env=V,this.tokens=K,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",Re=!1,Te=De=_e=Q=0,xe=(le=this.src).length;De<xe;De++){if(q=le.charCodeAt(De),!Re){if(j(q)){_e++,9===q?Q+=4-Q%4:Q++;continue}Re=!0}(10===q||De===xe-1)&&(10!==q&&De++,this.bMarks.push(Te),this.eMarks.push(De),this.tShift.push(_e),this.sCount.push(Q),this.bsCount.push(0),Re=!1,_e=0,Q=0,Te=De+1)}this.bMarks.push(le.length),this.eMarks.push(le.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}oe.prototype.push=function(re,ie,V){var K=new ye(re,ie,V);return K.block=!0,V<0&&this.level--,K.level=this.level,V>0&&this.level++,this.tokens.push(K),K},oe.prototype.isEmpty=function(ie){return this.bMarks[ie]+this.tShift[ie]>=this.eMarks[ie]},oe.prototype.skipEmptyLines=function(ie){for(var V=this.lineMax;ie<V&&!(this.bMarks[ie]+this.tShift[ie]<this.eMarks[ie]);ie++);return ie},oe.prototype.skipSpaces=function(ie){for(var V,K=this.src.length;ie<K&&(V=this.src.charCodeAt(ie),j(V));ie++);return ie},oe.prototype.skipSpacesBack=function(ie,V){if(ie<=V)return ie;for(;ie>V;)if(!j(this.src.charCodeAt(--ie)))return ie+1;return ie},oe.prototype.skipChars=function(ie,V){for(var K=this.src.length;ie<K&&this.src.charCodeAt(ie)===V;ie++);return ie},oe.prototype.skipCharsBack=function(ie,V,K){if(ie<=K)return ie;for(;ie>K;)if(V!==this.src.charCodeAt(--ie))return ie+1;return ie},oe.prototype.getLines=function(ie,V,K,q){var le,Te,De,xe,_e,Q,Re,Le=ie;if(ie>=V)return"";for(Q=new Array(V-ie),le=0;Le<V;Le++,le++){for(Te=0,Re=xe=this.bMarks[Le],_e=Le+1<V||q?this.eMarks[Le]+1:this.eMarks[Le];xe<_e&&Te<K;){if(De=this.src.charCodeAt(xe),j(De))9===De?Te+=4-(Te+this.bsCount[Le])%4:Te++;else{if(!(xe-Re<this.tShift[Le]))break;Te++}xe++}Q[le]=Te>K?new Array(Te-K+1).join(" ")+this.src.slice(xe,_e):this.src.slice(xe,_e)}return Q.join("")},oe.prototype.Token=ye,yt.exports=oe},2281:(yt,it,ae)=>{"use strict";var ye=ae(3332).isSpace;function j(re,ie){return re.src.slice(re.bMarks[ie]+re.tShift[ie],re.eMarks[ie])}function oe(re){var q,ie=[],V=0,K=re.length,le=!1,Te=0,De="";for(q=re.charCodeAt(V);V<K;)124===q&&(le?(De+=re.substring(Te,V-1),Te=V):(ie.push(De+re.substring(Te,V)),De="",Te=V+1)),le=92===q,V++,q=re.charCodeAt(V);return ie.push(De+re.substring(Te)),ie}yt.exports=function(ie,V,K,q){var le,Te,De,xe,_e,Q,Re,Le,Ve,Ae,Se,L,ee,Ce,ze,dt,st,bt;if(V+2>K||ie.sCount[Q=V+1]<ie.blkIndent||ie.sCount[Q]-ie.blkIndent>=4||(De=ie.bMarks[Q]+ie.tShift[Q])>=ie.eMarks[Q]||124!==(st=ie.src.charCodeAt(De++))&&45!==st&&58!==st||De>=ie.eMarks[Q]||124!==(bt=ie.src.charCodeAt(De++))&&45!==bt&&58!==bt&&!ye(bt)||45===st&&ye(bt))return!1;for(;De<ie.eMarks[Q];){if(124!==(le=ie.src.charCodeAt(De))&&45!==le&&58!==le&&!ye(le))return!1;De++}for(Re=(Te=j(ie,V+1)).split("|"),Ae=[],xe=0;xe<Re.length;xe++){if(!(Se=Re[xe].trim())){if(0===xe||xe===Re.length-1)continue;return!1}if(!/^:?-+:?$/.test(Se))return!1;58===Se.charCodeAt(Se.length-1)?Ae.push(58===Se.charCodeAt(0)?"center":"right"):58===Se.charCodeAt(0)?Ae.push("left"):Ae.push("")}if(-1===(Te=j(ie,V).trim()).indexOf("|")||ie.sCount[V]-ie.blkIndent>=4||((Re=oe(Te)).length&&""===Re[0]&&Re.shift(),Re.length&&""===Re[Re.length-1]&&Re.pop(),0===(Le=Re.length)||Le!==Ae.length))return!1;if(q)return!0;for(Ce=ie.parentType,ie.parentType="table",dt=ie.md.block.ruler.getRules("blockquote"),(Ve=ie.push("table_open","table",1)).map=L=[V,0],(Ve=ie.push("thead_open","thead",1)).map=[V,V+1],(Ve=ie.push("tr_open","tr",1)).map=[V,V+1],xe=0;xe<Re.length;xe++)Ve=ie.push("th_open","th",1),Ae[xe]&&(Ve.attrs=[["style","text-align:"+Ae[xe]]]),(Ve=ie.push("inline","",0)).content=Re[xe].trim(),Ve.children=[],Ve=ie.push("th_close","th",-1);for(Ve=ie.push("tr_close","tr",-1),Ve=ie.push("thead_close","thead",-1),Q=V+2;Q<K&&!(ie.sCount[Q]<ie.blkIndent);Q++){for(ze=!1,xe=0,_e=dt.length;xe<_e;xe++)if(dt[xe](ie,Q,K,!0)){ze=!0;break}if(ze||!(Te=j(ie,Q).trim())||ie.sCount[Q]-ie.blkIndent>=4)break;for((Re=oe(Te)).length&&""===Re[0]&&Re.shift(),Re.length&&""===Re[Re.length-1]&&Re.pop(),Q===V+2&&((Ve=ie.push("tbody_open","tbody",1)).map=ee=[V+2,0]),(Ve=ie.push("tr_open","tr",1)).map=[Q,Q+1],xe=0;xe<Le;xe++)Ve=ie.push("td_open","td",1),Ae[xe]&&(Ve.attrs=[["style","text-align:"+Ae[xe]]]),(Ve=ie.push("inline","",0)).content=Re[xe]?Re[xe].trim():"",Ve.children=[],Ve=ie.push("td_close","td",-1);Ve=ie.push("tr_close","tr",-1)}return ee&&(Ve=ie.push("tbody_close","tbody",-1),ee[1]=Q),Ve=ie.push("table_close","table",-1),L[1]=Q,ie.parentType=Ce,ie.line=Q,!0}},8905:yt=>{"use strict";yt.exports=function(ae){var ye;ae.inlineMode?((ye=new ae.Token("inline","",0)).content=ae.src,ye.map=[0,1],ye.children=[],ae.tokens.push(ye)):ae.md.block.parse(ae.src,ae.md,ae.env,ae.tokens)}},3591:yt=>{"use strict";yt.exports=function(ae){var j,oe,re,ye=ae.tokens;for(oe=0,re=ye.length;oe<re;oe++)"inline"===(j=ye[oe]).type&&ae.md.inline.parse(j.content,ae.md,ae.env,j.children)}},9212:(yt,it,ae)=>{"use strict";var ye=ae(3332).arrayReplaceAt;yt.exports=function(ie){var V,K,q,le,Te,De,xe,_e,Q,Re,Le,Ve,Ae,L,ee,ze,Ce=ie.tokens;if(ie.md.options.linkify)for(K=0,q=Ce.length;K<q;K++)if("inline"===Ce[K].type&&ie.md.linkify.pretest(Ce[K].content))for(Ae=0,V=(le=Ce[K].children).length-1;V>=0;V--)if("link_close"!==(De=le[V]).type){if("html_inline"===De.type&&(/^<a[>\s]/i.test(De.content)&&Ae>0&&Ae--,/^<\/a\s*>/i.test(De.content)&&Ae++),!(Ae>0)&&"text"===De.type&&ie.md.linkify.test(De.content)){for(ze=ie.md.linkify.match(Q=De.content),xe=[],Ve=De.level,Le=0,ze.length>0&&0===ze[0].index&&V>0&&"text_special"===le[V-1].type&&(ze=ze.slice(1)),_e=0;_e<ze.length;_e++)L=ie.md.normalizeLink(ze[_e].url),ie.md.validateLink(L)&&(ee=ze[_e].text,ee=ze[_e].schema?"mailto:"!==ze[_e].schema||/^mailto:/i.test(ee)?ie.md.normalizeLinkText(ee):ie.md.normalizeLinkText("mailto:"+ee).replace(/^mailto:/,""):ie.md.normalizeLinkText("http://"+ee).replace(/^http:\/\//,""),(Re=ze[_e].index)>Le&&((Te=new ie.Token("text","",0)).content=Q.slice(Le,Re),Te.level=Ve,xe.push(Te)),(Te=new ie.Token("link_open","a",1)).attrs=[["href",L]],Te.level=Ve++,Te.markup="linkify",Te.info="auto",xe.push(Te),(Te=new ie.Token("text","",0)).content=ee,Te.level=Ve,xe.push(Te),(Te=new ie.Token("link_close","a",-1)).level=--Ve,Te.markup="linkify",Te.info="auto",xe.push(Te),Le=ze[_e].lastIndex);Le<Q.length&&((Te=new ie.Token("text","",0)).content=Q.slice(Le),Te.level=Ve,xe.push(Te)),Ce[K].children=le=ye(le,V,xe)}}else for(V--;le[V].level!==De.level&&"link_open"!==le[V].type;)V--}},7398:yt=>{"use strict";var it=/\r\n?|\n/g,ae=/\0/g;yt.exports=function(j){var oe;oe=(oe=j.src.replace(it,"\n")).replace(ae,"\ufffd"),j.src=oe}},1982:yt=>{"use strict";var it=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,ae=/\((c|tm|r)\)/i,ye=/\((c|tm|r)\)/gi,j={c:"\xa9",r:"\xae",tm:"\u2122"};function oe(V,K){return j[K.toLowerCase()]}function re(V){var K,q,le=0;for(K=V.length-1;K>=0;K--)"text"===(q=V[K]).type&&!le&&(q.content=q.content.replace(ye,oe)),"link_open"===q.type&&"auto"===q.info&&le--,"link_close"===q.type&&"auto"===q.info&&le++}function ie(V){var K,q,le=0;for(K=V.length-1;K>=0;K--)"text"===(q=V[K]).type&&!le&&it.test(q.content)&&(q.content=q.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1\u2014").replace(/(^|\s)--(?=\s|$)/gm,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1\u2013")),"link_open"===q.type&&"auto"===q.info&&le--,"link_close"===q.type&&"auto"===q.info&&le++}yt.exports=function(K){var q;if(K.md.options.typographer)for(q=K.tokens.length-1;q>=0;q--)"inline"===K.tokens[q].type&&(ae.test(K.tokens[q].content)&&re(K.tokens[q].children),it.test(K.tokens[q].content)&&ie(K.tokens[q].children))}},8157:(yt,it,ae)=>{"use strict";var ye=ae(3332).isWhiteSpace,j=ae(3332).isPunctChar,oe=ae(3332).isMdAsciiPunct,re=/['"]/,ie=/['"]/g;function K(le,Te,De){return le.slice(0,Te)+De+le.slice(Te+1)}function q(le,Te){var De,xe,_e,Q,Re,Le,Ve,Ae,Se,L,ee,Ce,ze,dt,st,bt,ut,Vt,on,Ct,rn;for(on=[],De=0;De<le.length;De++){for(xe=le[De],Ve=le[De].level,ut=on.length-1;ut>=0&&!(on[ut].level<=Ve);ut--);if(on.length=ut+1,"text"===xe.type){Re=0,Le=(_e=xe.content).length;e:for(;Re<Le&&(ie.lastIndex=Re,Q=ie.exec(_e),Q);){if(st=bt=!0,Re=Q.index+1,Vt="'"===Q[0],Se=32,Q.index-1>=0)Se=_e.charCodeAt(Q.index-1);else for(ut=De-1;ut>=0&&"softbreak"!==le[ut].type&&"hardbreak"!==le[ut].type;ut--)if(le[ut].content){Se=le[ut].content.charCodeAt(le[ut].content.length-1);break}if(L=32,Re<Le)L=_e.charCodeAt(Re);else for(ut=De+1;ut<le.length&&"softbreak"!==le[ut].type&&"hardbreak"!==le[ut].type;ut++)if(le[ut].content){L=le[ut].content.charCodeAt(0);break}if(ee=oe(Se)||j(String.fromCharCode(Se)),Ce=oe(L)||j(String.fromCharCode(L)),ze=ye(Se),(dt=ye(L))?st=!1:Ce&&(ze||ee||(st=!1)),ze?bt=!1:ee&&(dt||Ce||(bt=!1)),34===L&&'"'===Q[0]&&Se>=48&&Se<=57&&(bt=st=!1),st&&bt&&(st=ee,bt=Ce),st||bt){if(bt)for(ut=on.length-1;ut>=0&&(Ae=on[ut],!(on[ut].level<Ve));ut--)if(Ae.single===Vt&&on[ut].level===Ve){Ae=on[ut],Vt?(Ct=Te.md.options.quotes[2],rn=Te.md.options.quotes[3]):(Ct=Te.md.options.quotes[0],rn=Te.md.options.quotes[1]),xe.content=K(xe.content,Q.index,rn),le[Ae.token].content=K(le[Ae.token].content,Ae.pos,Ct),Re+=rn.length-1,Ae.token===De&&(Re+=Ct.length-1),Le=(_e=xe.content).length,on.length=ut;continue e}st?on.push({token:De,pos:Q.index,single:Vt,level:Ve}):bt&&Vt&&(xe.content=K(xe.content,Q.index,"\u2019"))}else Vt&&(xe.content=K(xe.content,Q.index,"\u2019"))}}}}yt.exports=function(Te){var De;if(Te.md.options.typographer)for(De=Te.tokens.length-1;De>=0;De--)"inline"!==Te.tokens[De].type||!re.test(Te.tokens[De].content)||q(Te.tokens[De].children,Te)}},1076:(yt,it,ae)=>{"use strict";var ye=ae(6263);function j(oe,re,ie){this.src=oe,this.env=ie,this.tokens=[],this.inlineMode=!1,this.md=re}j.prototype.Token=ye,yt.exports=j},2245:yt=>{"use strict";yt.exports=function(ae){var ye,j,oe,re,ie,V,K=ae.tokens;for(ye=0,j=K.length;ye<j;ye++)if("inline"===K[ye].type){for(ie=(oe=K[ye].children).length,re=0;re<ie;re++)"text_special"===oe[re].type&&(oe[re].type="text");for(re=V=0;re<ie;re++)"text"===oe[re].type&&re+1<ie&&"text"===oe[re+1].type?oe[re+1].content=oe[re].content+oe[re+1].content:(re!==V&&(oe[V]=oe[re]),V++);re!==V&&(oe.length=V)}}},6973:yt=>{"use strict";var it=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,ae=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;yt.exports=function(j,oe){var re,ie,V,K,q,le,Te=j.pos;if(60!==j.src.charCodeAt(Te))return!1;for(q=j.pos,le=j.posMax;;){if(++Te>=le||60===(K=j.src.charCodeAt(Te)))return!1;if(62===K)break}return re=j.src.slice(q+1,Te),ae.test(re)?(ie=j.md.normalizeLink(re),!!j.md.validateLink(ie)&&(oe||((V=j.push("link_open","a",1)).attrs=[["href",ie]],V.markup="autolink",V.info="auto",(V=j.push("text","",0)).content=j.md.normalizeLinkText(re),(V=j.push("link_close","a",-1)).markup="autolink",V.info="auto"),j.pos+=re.length+2,!0)):!!it.test(re)&&(ie=j.md.normalizeLink("mailto:"+re),!!j.md.validateLink(ie)&&(oe||((V=j.push("link_open","a",1)).attrs=[["href",ie]],V.markup="autolink",V.info="auto",(V=j.push("text","",0)).content=j.md.normalizeLinkText(re),(V=j.push("link_close","a",-1)).markup="autolink",V.info="auto"),j.pos+=re.length+2,!0))}},415:yt=>{"use strict";yt.exports=function(ae,ye){var j,oe,re,ie,V,K,q,le,Te=ae.pos;if(96!==ae.src.charCodeAt(Te))return!1;for(j=Te,Te++,oe=ae.posMax;Te<oe&&96===ae.src.charCodeAt(Te);)Te++;if(q=(re=ae.src.slice(j,Te)).length,ae.backticksScanned&&(ae.backticks[q]||0)<=j)return ye||(ae.pending+=re),ae.pos+=q,!0;for(V=K=Te;-1!==(V=ae.src.indexOf("`",K));){for(K=V+1;K<oe&&96===ae.src.charCodeAt(K);)K++;if((le=K-V)===q)return ye||((ie=ae.push("code_inline","code",0)).markup=re,ie.content=ae.src.slice(Te,V).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),ae.pos=K,!0;ae.backticks[le]=V}return ae.backticksScanned=!0,ye||(ae.pending+=re),ae.pos+=q,!0}},9269:yt=>{"use strict";function it(ae,ye){var j,oe,re,ie,V,K,q,le,Te={},De=ye.length;if(De){var xe=0,_e=-2,Q=[];for(j=0;j<De;j++)if(re=ye[j],Q.push(0),(ye[xe].marker!==re.marker||_e!==re.token-1)&&(xe=j),_e=re.token,re.length=re.length||0,re.close){for(Te.hasOwnProperty(re.marker)||(Te[re.marker]=[-1,-1,-1,-1,-1,-1]),V=Te[re.marker][(re.open?3:0)+re.length%3],K=oe=xe-Q[xe]-1;oe>V;oe-=Q[oe]+1)if((ie=ye[oe]).marker===re.marker&&ie.open&&ie.end<0&&(q=!1,(ie.close||re.open)&&(ie.length+re.length)%3==0&&(ie.length%3!=0||re.length%3!=0)&&(q=!0),!q)){Q[j]=j-oe+(le=oe>0&&!ye[oe-1].open?Q[oe-1]+1:0),Q[oe]=le,re.open=!1,ie.end=j,ie.close=!1,K=-1,_e=-2;break}-1!==K&&(Te[re.marker][(re.open?3:0)+(re.length||0)%3]=K)}}}yt.exports=function(ye){var j,oe=ye.tokens_meta,re=ye.tokens_meta.length;for(it(0,ye.delimiters),j=0;j<re;j++)oe[j]&&oe[j].delimiters&&it(0,oe[j].delimiters)}},425:yt=>{"use strict";function it(ae,ye){var j,oe,re,ie,V,K;for(j=ye.length-1;j>=0;j--)(95===(oe=ye[j]).marker||42===oe.marker)&&-1!==oe.end&&(re=ye[oe.end],K=j>0&&ye[j-1].end===oe.end+1&&ye[j-1].marker===oe.marker&&ye[j-1].token===oe.token-1&&ye[oe.end+1].token===re.token+1,V=String.fromCharCode(oe.marker),(ie=ae.tokens[oe.token]).type=K?"strong_open":"em_open",ie.tag=K?"strong":"em",ie.nesting=1,ie.markup=K?V+V:V,ie.content="",(ie=ae.tokens[re.token]).type=K?"strong_close":"em_close",ie.tag=K?"strong":"em",ie.nesting=-1,ie.markup=K?V+V:V,ie.content="",K&&(ae.tokens[ye[j-1].token].content="",ae.tokens[ye[oe.end+1].token].content="",j--))}yt.exports.w=function(ye,j){var oe,re,K=ye.src.charCodeAt(ye.pos);if(j||95!==K&&42!==K)return!1;for(re=ye.scanDelims(ye.pos,42===K),oe=0;oe<re.length;oe++)ye.push("text","",0).content=String.fromCharCode(K),ye.delimiters.push({marker:K,length:re.length,token:ye.tokens.length-1,end:-1,open:re.can_open,close:re.can_close});return ye.pos+=re.length,!0},yt.exports.g=function(ye){var j,oe=ye.tokens_meta,re=ye.tokens_meta.length;for(it(ye,ye.delimiters),j=0;j<re;j++)oe[j]&&oe[j].delimiters&&it(ye,oe[j].delimiters)}},3559:(yt,it,ae)=>{"use strict";var ye=ae(6798),j=ae(3332).has,oe=ae(3332).isValidEntityCode,re=ae(3332).fromCodePoint,ie=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,V=/^&([a-z][a-z0-9]{1,31});/i;yt.exports=function(q,le){var De,xe,_e,Q=q.pos,Re=q.posMax;if(38!==q.src.charCodeAt(Q)||Q+1>=Re)return!1;if(35===q.src.charCodeAt(Q+1)){if(xe=q.src.slice(Q).match(ie))return le||(De="x"===xe[1][0].toLowerCase()?parseInt(xe[1].slice(1),16):parseInt(xe[1],10),(_e=q.push("text_special","",0)).content=oe(De)?re(De):re(65533),_e.markup=xe[0],_e.info="entity"),q.pos+=xe[0].length,!0}else if((xe=q.src.slice(Q).match(V))&&j(ye,xe[1]))return le||((_e=q.push("text_special","",0)).content=ye[xe[1]],_e.markup=xe[0],_e.info="entity"),q.pos+=xe[0].length,!0;return!1}},8763:(yt,it,ae)=>{"use strict";for(var ye=ae(3332).isSpace,j=[],oe=0;oe<256;oe++)j.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(re){j[re.charCodeAt(0)]=1}),yt.exports=function(ie,V){var K,q,le,Te,De,xe=ie.pos,_e=ie.posMax;if(92!==ie.src.charCodeAt(xe)||++xe>=_e)return!1;if(10===(K=ie.src.charCodeAt(xe))){for(V||ie.push("hardbreak","br",0),xe++;xe<_e&&(K=ie.src.charCodeAt(xe),ye(K));)xe++;return ie.pos=xe,!0}return Te=ie.src[xe],K>=55296&&K<=56319&&xe+1<_e&&(q=ie.src.charCodeAt(xe+1))>=56320&&q<=57343&&(Te+=ie.src[xe+1],xe++),le="\\"+Te,V||((De=ie.push("text_special","",0)).content=K<256&&0!==j[K]?Te:le,De.markup=le,De.info="escape"),ie.pos=xe+1,!0}},5767:yt=>{"use strict";yt.exports=function(ae){var ye,j,oe=0,re=ae.tokens,ie=ae.tokens.length;for(ye=j=0;ye<ie;ye++)re[ye].nesting<0&&oe--,re[ye].level=oe,re[ye].nesting>0&&oe++,"text"===re[ye].type&&ye+1<ie&&"text"===re[ye+1].type?re[ye+1].content=re[ye].content+re[ye+1].content:(ye!==j&&(re[j]=re[ye]),j++);ye!==j&&(re.length=j)}},3722:(yt,it,ae)=>{"use strict";var ye=ae(3266).n;yt.exports=function(V,K){var q,le,Te,De,xe=V.pos;return!(!V.md.options.html||(Te=V.posMax,60!==V.src.charCodeAt(xe)||xe+2>=Te)||(q=V.src.charCodeAt(xe+1),33!==q&&63!==q&&47!==q&&!function re(ie){var V=32|ie;return V>=97&&V<=122}(q))||(le=V.src.slice(xe).match(ye),!le)||(K||((De=V.push("html_inline","",0)).content=V.src.slice(xe,xe+le[0].length),function j(ie){return/^<a[>\s]/i.test(ie)}(De.content)&&V.linkLevel++,function oe(ie){return/^<\/a\s*>/i.test(ie)}(De.content)&&V.linkLevel--),V.pos+=le[0].length,0))}},7936:(yt,it,ae)=>{"use strict";var ye=ae(3332).normalizeReference,j=ae(3332).isSpace;yt.exports=function(re,ie){var V,K,q,le,Te,De,xe,_e,Q,Re,Le,Ve,Ae,Se="",L=re.pos,ee=re.posMax;if(33!==re.src.charCodeAt(re.pos)||91!==re.src.charCodeAt(re.pos+1)||(De=re.pos+2,(Te=re.md.helpers.parseLinkLabel(re,re.pos+1,!1))<0))return!1;if((xe=Te+1)<ee&&40===re.src.charCodeAt(xe)){for(xe++;xe<ee&&(K=re.src.charCodeAt(xe),j(K)||10===K);xe++);if(xe>=ee)return!1;for(Ae=xe,(Q=re.md.helpers.parseLinkDestination(re.src,xe,re.posMax)).ok&&(Se=re.md.normalizeLink(Q.str),re.md.validateLink(Se)?xe=Q.pos:Se=""),Ae=xe;xe<ee&&(K=re.src.charCodeAt(xe),j(K)||10===K);xe++);if(Q=re.md.helpers.parseLinkTitle(re.src,xe,re.posMax),xe<ee&&Ae!==xe&&Q.ok)for(Re=Q.str,xe=Q.pos;xe<ee&&(K=re.src.charCodeAt(xe),j(K)||10===K);xe++);else Re="";if(xe>=ee||41!==re.src.charCodeAt(xe))return re.pos=L,!1;xe++}else{if(typeof re.env.references>"u")return!1;if(xe<ee&&91===re.src.charCodeAt(xe)?(Ae=xe+1,(xe=re.md.helpers.parseLinkLabel(re,xe))>=0?le=re.src.slice(Ae,xe++):xe=Te+1):xe=Te+1,le||(le=re.src.slice(De,Te)),!(_e=re.env.references[ye(le)]))return re.pos=L,!1;Se=_e.href,Re=_e.title}return ie||(q=re.src.slice(De,Te),re.md.inline.parse(q,re.md,re.env,Ve=[]),(Le=re.push("image","img",0)).attrs=V=[["src",Se],["alt",""]],Le.children=Ve,Le.content=q,Re&&V.push(["title",Re])),re.pos=xe,re.posMax=ee,!0}},7219:(yt,it,ae)=>{"use strict";var ye=ae(3332).normalizeReference,j=ae(3332).isSpace;yt.exports=function(re,ie){var V,K,q,le,Te,De,xe,_e,Re="",Le="",Ve=re.pos,Ae=re.posMax,Se=re.pos,L=!0;if(91!==re.src.charCodeAt(re.pos)||(Te=re.pos+1,(le=re.md.helpers.parseLinkLabel(re,re.pos,!0))<0))return!1;if((De=le+1)<Ae&&40===re.src.charCodeAt(De)){for(L=!1,De++;De<Ae&&(K=re.src.charCodeAt(De),j(K)||10===K);De++);if(De>=Ae)return!1;if(Se=De,(xe=re.md.helpers.parseLinkDestination(re.src,De,re.posMax)).ok){for(Re=re.md.normalizeLink(xe.str),re.md.validateLink(Re)?De=xe.pos:Re="",Se=De;De<Ae&&(K=re.src.charCodeAt(De),j(K)||10===K);De++);if(xe=re.md.helpers.parseLinkTitle(re.src,De,re.posMax),De<Ae&&Se!==De&&xe.ok)for(Le=xe.str,De=xe.pos;De<Ae&&(K=re.src.charCodeAt(De),j(K)||10===K);De++);}(De>=Ae||41!==re.src.charCodeAt(De))&&(L=!0),De++}if(L){if(typeof re.env.references>"u")return!1;if(De<Ae&&91===re.src.charCodeAt(De)?(Se=De+1,(De=re.md.helpers.parseLinkLabel(re,De))>=0?q=re.src.slice(Se,De++):De=le+1):De=le+1,q||(q=re.src.slice(Te,le)),!(_e=re.env.references[ye(q)]))return re.pos=Ve,!1;Re=_e.href,Le=_e.title}return ie||(re.pos=Te,re.posMax=le,re.push("link_open","a",1).attrs=V=[["href",Re]],Le&&V.push(["title",Le]),re.linkLevel++,re.md.inline.tokenize(re),re.linkLevel--,re.push("link_close","a",-1)),re.pos=De,re.posMax=Ae,!0}},6234:yt=>{"use strict";var it=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;yt.exports=function(ye,j){var oe,re,ie,V,K,q,le,Te;return!(!ye.md.options.linkify||ye.linkLevel>0||(oe=ye.pos,re=ye.posMax,oe+3>re)||58!==ye.src.charCodeAt(oe)||47!==ye.src.charCodeAt(oe+1)||47!==ye.src.charCodeAt(oe+2)||(ie=ye.pending.match(it),!ie)||(V=ie[1],K=ye.md.linkify.matchAtStart(ye.src.slice(oe-V.length)),!K)||(q=K.url,q=q.replace(/\*+$/,""),le=ye.md.normalizeLink(q),!ye.md.validateLink(le))||(j||(ye.pending=ye.pending.slice(0,-V.length),(Te=ye.push("link_open","a",1)).attrs=[["href",le]],Te.markup="linkify",Te.info="auto",(Te=ye.push("text","",0)).content=ye.md.normalizeLinkText(q),(Te=ye.push("link_close","a",-1)).markup="linkify",Te.info="auto"),ye.pos+=q.length-V.length,0))}},2921:(yt,it,ae)=>{"use strict";var ye=ae(3332).isSpace;yt.exports=function(oe,re){var ie,V,K,q=oe.pos;if(10!==oe.src.charCodeAt(q))return!1;if(ie=oe.pending.length-1,V=oe.posMax,!re)if(ie>=0&&32===oe.pending.charCodeAt(ie))if(ie>=1&&32===oe.pending.charCodeAt(ie-1)){for(K=ie-1;K>=1&&32===oe.pending.charCodeAt(K-1);)K--;oe.pending=oe.pending.slice(0,K),oe.push("hardbreak","br",0)}else oe.pending=oe.pending.slice(0,-1),oe.push("softbreak","br",0);else oe.push("softbreak","br",0);for(q++;q<V&&ye(oe.src.charCodeAt(q));)q++;return oe.pos=q,!0}},630:(yt,it,ae)=>{"use strict";var ye=ae(6263),j=ae(3332).isWhiteSpace,oe=ae(3332).isPunctChar,re=ae(3332).isMdAsciiPunct;function ie(V,K,q,le){this.src=V,this.env=q,this.md=K,this.tokens=le,this.tokens_meta=Array(le.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}ie.prototype.pushPending=function(){var V=new ye("text","",0);return V.content=this.pending,V.level=this.pendingLevel,this.tokens.push(V),this.pending="",V},ie.prototype.push=function(V,K,q){this.pending&&this.pushPending();var le=new ye(V,K,q),Te=null;return q<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),le.level=this.level,q>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],Te={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(le),this.tokens_meta.push(Te),le},ie.prototype.scanDelims=function(V,K){var le,Te,De,xe,_e,Q,Re,Le,Ve,q=V,Ae=!0,Se=!0,L=this.posMax,ee=this.src.charCodeAt(V);for(le=V>0?this.src.charCodeAt(V-1):32;q<L&&this.src.charCodeAt(q)===ee;)q++;return De=q-V,Te=q<L?this.src.charCodeAt(q):32,Re=re(le)||oe(String.fromCharCode(le)),Ve=re(Te)||oe(String.fromCharCode(Te)),Q=j(le),(Le=j(Te))?Ae=!1:Ve&&(Q||Re||(Ae=!1)),Q?Se=!1:Re&&(Le||Ve||(Se=!1)),K?(xe=Ae,_e=Se):(xe=Ae&&(!Se||Re),_e=Se&&(!Ae||Ve)),{can_open:xe,can_close:_e,length:De}},ie.prototype.Token=ye,yt.exports=ie},8165:yt=>{"use strict";function it(ae,ye){var j,oe,re,ie,V,K=[],q=ye.length;for(j=0;j<q;j++)126===(re=ye[j]).marker&&-1!==re.end&&(ie=ye[re.end],(V=ae.tokens[re.token]).type="s_open",V.tag="s",V.nesting=1,V.markup="~~",V.content="",(V=ae.tokens[ie.token]).type="s_close",V.tag="s",V.nesting=-1,V.markup="~~",V.content="","text"===ae.tokens[ie.token-1].type&&"~"===ae.tokens[ie.token-1].content&&K.push(ie.token-1));for(;K.length;){for(oe=(j=K.pop())+1;oe<ae.tokens.length&&"s_close"===ae.tokens[oe].type;)oe++;j!==--oe&&(V=ae.tokens[oe],ae.tokens[oe]=ae.tokens[j],ae.tokens[j]=V)}}yt.exports.w=function(ye,j){var oe,re,V,K,le=ye.src.charCodeAt(ye.pos);if(j||126!==le||(V=(re=ye.scanDelims(ye.pos,!0)).length,K=String.fromCharCode(le),V<2))return!1;for(V%2&&(ye.push("text","",0).content=K,V--),oe=0;oe<V;oe+=2)ye.push("text","",0).content=K+K,ye.delimiters.push({marker:le,length:0,token:ye.tokens.length-1,end:-1,open:re.can_open,close:re.can_close});return ye.pos+=re.length,!0},yt.exports.g=function(ye){var j,oe=ye.tokens_meta,re=ye.tokens_meta.length;for(it(ye,ye.delimiters),j=0;j<re;j++)oe[j]&&oe[j].delimiters&&it(ye,oe[j].delimiters)}},1767:yt=>{"use strict";function it(ae){switch(ae){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}yt.exports=function(ye,j){for(var oe=ye.pos;oe<ye.posMax&&!it(ye.src.charCodeAt(oe));)oe++;return oe!==ye.pos&&(j||(ye.pending+=ye.src.slice(ye.pos,oe)),ye.pos=oe,!0)}},6263:yt=>{"use strict";function it(ae,ye,j){this.type=ae,this.tag=ye,this.attrs=null,this.map=null,this.nesting=j,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}it.prototype.attrIndex=function(ye){var j,oe,re;if(!this.attrs)return-1;for(oe=0,re=(j=this.attrs).length;oe<re;oe++)if(j[oe][0]===ye)return oe;return-1},it.prototype.attrPush=function(ye){this.attrs?this.attrs.push(ye):this.attrs=[ye]},it.prototype.attrSet=function(ye,j){var oe=this.attrIndex(ye),re=[ye,j];oe<0?this.attrPush(re):this.attrs[oe]=re},it.prototype.attrGet=function(ye){var j=this.attrIndex(ye),oe=null;return j>=0&&(oe=this.attrs[j][1]),oe},it.prototype.attrJoin=function(ye,j){var oe=this.attrIndex(ye);oe<0?this.attrPush([ye,j]):this.attrs[oe][1]=this.attrs[oe][1]+" "+j},yt.exports=it},9801:yt=>{"use strict";var it={};function ye(j,oe){var re;return"string"!=typeof oe&&(oe=ye.defaultChars),re=function ae(j){var oe,re,ie=it[j];if(ie)return ie;for(ie=it[j]=[],oe=0;oe<128;oe++)re=String.fromCharCode(oe),ie.push(re);for(oe=0;oe<j.length;oe++)ie[re=j.charCodeAt(oe)]="%"+("0"+re.toString(16).toUpperCase()).slice(-2);return ie}(oe),j.replace(/(%[a-f0-9]{2})+/gi,function(ie){var V,K,q,le,Te,De,xe,_e="";for(V=0,K=ie.length;V<K;V+=3)(q=parseInt(ie.slice(V+1,V+3),16))<128?_e+=re[q]:192==(224&q)&&V+3<K&&128==(192&(le=parseInt(ie.slice(V+4,V+6),16)))?(_e+=(xe=q<<6&1984|63&le)<128?"\ufffd\ufffd":String.fromCharCode(xe),V+=3):224==(240&q)&&V+6<K&&(le=parseInt(ie.slice(V+4,V+6),16),Te=parseInt(ie.slice(V+7,V+9),16),128==(192&le)&&128==(192&Te))?(_e+=(xe=q<<12&61440|le<<6&4032|63&Te)<2048||xe>=55296&&xe<=57343?"\ufffd\ufffd\ufffd":String.fromCharCode(xe),V+=6):240==(248&q)&&V+9<K&&(le=parseInt(ie.slice(V+4,V+6),16),Te=parseInt(ie.slice(V+7,V+9),16),De=parseInt(ie.slice(V+10,V+12),16),128==(192&le)&&128==(192&Te)&&128==(192&De))?((xe=q<<18&1835008|le<<12&258048|Te<<6&4032|63&De)<65536||xe>1114111?_e+="\ufffd\ufffd\ufffd\ufffd":(xe-=65536,_e+=String.fromCharCode(55296+(xe>>10),56320+(1023&xe))),V+=9):_e+="\ufffd";return _e})}ye.defaultChars=";/?:@&=+$,#",ye.componentChars="",yt.exports=ye},526:yt=>{"use strict";var it={};function ye(j,oe,re){var ie,V,K,q,le,Te="";for("string"!=typeof oe&&(re=oe,oe=ye.defaultChars),typeof re>"u"&&(re=!0),le=function ae(j){var oe,re,ie=it[j];if(ie)return ie;for(ie=it[j]=[],oe=0;oe<128;oe++)re=String.fromCharCode(oe),/^[0-9a-z]$/i.test(re)?ie.push(re):ie.push("%"+("0"+oe.toString(16).toUpperCase()).slice(-2));for(oe=0;oe<j.length;oe++)ie[j.charCodeAt(oe)]=j[oe];return ie}(oe),ie=0,V=j.length;ie<V;ie++)if(K=j.charCodeAt(ie),re&&37===K&&ie+2<V&&/^[0-9a-f]{2}$/i.test(j.slice(ie+1,ie+3)))Te+=j.slice(ie,ie+3),ie+=2;else if(K<128)Te+=le[K];else if(K>=55296&&K<=57343){if(K>=55296&&K<=56319&&ie+1<V&&(q=j.charCodeAt(ie+1))>=56320&&q<=57343){Te+=encodeURIComponent(j[ie]+j[ie+1]),ie++;continue}Te+="%EF%BF%BD"}else Te+=encodeURIComponent(j[ie]);return Te}ye.defaultChars=";/?:@&=+$,-_.!~*'()#",ye.componentChars="-_.!~*'()",yt.exports=ye},381:yt=>{"use strict";yt.exports=function(ae){var ye="";return ye+=ae.protocol||"",ye+=ae.slashes?"//":"",ye+=ae.auth?ae.auth+"@":"",ae.hostname&&-1!==ae.hostname.indexOf(":")?ye+="["+ae.hostname+"]":ye+=ae.hostname||"",ye+=ae.port?":"+ae.port:"",ye+=ae.pathname||"",(ye+=ae.search||"")+(ae.hash||"")}},7214:(yt,it,ae)=>{"use strict";yt.exports.encode=ae(526),yt.exports.decode=ae(9801),yt.exports.format=ae(381),yt.exports.parse=ae(3850)},3850:yt=>{"use strict";function it(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var ae=/^([a-z0-9.+-]+:)/i,ye=/:[0-9]*$/,j=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,re=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),ie=["'"].concat(re),V=["%","/","?",";","#"].concat(ie),K=["/","?","#"],le=/^[+a-z0-9A-Z_-]{0,63}$/,Te=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,De={javascript:!0,"javascript:":!0},xe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};it.prototype.parse=function(Q,Re){var Le,Ve,Ae,Se,L,ee=Q;if(ee=ee.trim(),!Re&&1===Q.split("#").length){var Ce=j.exec(ee);if(Ce)return this.pathname=Ce[1],Ce[2]&&(this.search=Ce[2]),this}var ze=ae.exec(ee);if(ze&&(Ae=(ze=ze[0]).toLowerCase(),this.protocol=ze,ee=ee.substr(ze.length)),(Re||ze||ee.match(/^\/\/[^@\/]+@[^@\/]+/))&&(L="//"===ee.substr(0,2))&&!(ze&&De[ze])&&(ee=ee.substr(2),this.slashes=!0),!De[ze]&&(L||ze&&!xe[ze])){var st,bt,dt=-1;for(Le=0;Le<K.length;Le++)-1!==(Se=ee.indexOf(K[Le]))&&(-1===dt||Se<dt)&&(dt=Se);for(-1!==(bt=-1===dt?ee.lastIndexOf("@"):ee.lastIndexOf("@",dt))&&(st=ee.slice(0,bt),ee=ee.slice(bt+1),this.auth=st),dt=-1,Le=0;Le<V.length;Le++)-1!==(Se=ee.indexOf(V[Le]))&&(-1===dt||Se<dt)&&(dt=Se);-1===dt&&(dt=ee.length),":"===ee[dt-1]&&dt--;var ut=ee.slice(0,dt);ee=ee.slice(dt),this.parseHost(ut),this.hostname=this.hostname||"";var Vt="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Vt){var on=this.hostname.split(/\./);for(Le=0,Ve=on.length;Le<Ve;Le++){var Ct=on[Le];if(Ct&&!Ct.match(le)){for(var rn="",Qt=0,Ht=Ct.length;Qt<Ht;Qt++)Ct.charCodeAt(Qt)>127?rn+="x":rn+=Ct[Qt];if(!rn.match(le)){var Qn=on.slice(0,Le),en=on.slice(Le+1),Sn=Ct.match(Te);Sn&&(Qn.push(Sn[1]),en.unshift(Sn[2])),en.length&&(ee=en.join(".")+ee),this.hostname=Qn.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),Vt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var Pn=ee.indexOf("#");-1!==Pn&&(this.hash=ee.substr(Pn),ee=ee.slice(0,Pn));var xt=ee.indexOf("?");return-1!==xt&&(this.search=ee.substr(xt),ee=ee.slice(0,xt)),ee&&(this.pathname=ee),xe[Ae]&&this.hostname&&!this.pathname&&(this.pathname=""),this},it.prototype.parseHost=function(Q){var Re=ye.exec(Q);Re&&(":"!==(Re=Re[0])&&(this.port=Re.substr(1)),Q=Q.substr(0,Q.length-Re.length)),Q&&(this.hostname=Q)},yt.exports=function _e(Q,Re){if(Q&&Q instanceof it)return Q;var Le=new it;return Le.parse(Q,Re),Le}},2956:function(yt,it,ae){var ye,j;(function(re,ie){var V=(re=re||ae(4158)).window,K=re.document,q=new function(){var y=/^(statics|enumerable|beans|preserve)$/,l=[],d=l.slice,_=Object.create,C=Object.getOwnPropertyDescriptor,S=Object.defineProperty,k=l.forEach||function($,R){for(var Y=0,he=this.length;Y<he;Y++)$.call(R,this[Y],Y,this)},N=function($,R){for(var Y in this)this.hasOwnProperty(Y)&&$.call(R,this[Y],Y,this)},z=Object.assign||function($){for(var R=1,Y=arguments.length;R<Y;R++){var he=arguments[R];for(var me in he)he.hasOwnProperty(me)&&($[me]=he[me])}return $},D=function($,R,Y){if($){var he=C($,"length");(he&&"number"==typeof he.value?k:N).call($,R,Y=Y||$)}return Y};function H($,R,Y,he,me){var ve={};function ge(Xe,je){"string"==typeof(je=je||(je=C(R,Xe))&&(je.get?je:je.value))&&"#"===je[0]&&(je=$[je.substring(1)]||je);var Wt,nt="function"==typeof je,pt=je,gt=me||nt&&!je.base?je&&je.get?Xe in $:$[Xe]:null;(!me||!gt)&&(nt&&gt&&(je.base=gt),nt&&!1!==he&&(Wt=Xe.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(ve[Wt[3].toLowerCase()+Wt[4]]=Wt[2]),(!pt||nt||!pt.get||"function"!=typeof pt.get||!Z.isPlainObject(pt))&&(pt={value:pt,writable:!0}),(C($,Xe)||{configurable:!0}).configurable&&(pt.configurable=!0,pt.enumerable=Y??!Wt),S($,Xe,pt))}if(R){for(var pe in R)R.hasOwnProperty(pe)&&!y.test(pe)&&ge(pe);for(var pe in ve){var de=ve[pe],Ee=$["set"+de],ke=$["get"+de]||Ee&&$["is"+de];ke&&(!0===he||0===ke.length)&&ge(pe,{get:ke,set:Ee})}}return $}function Z(){for(var $=0,R=arguments.length;$<R;$++){var Y=arguments[$];Y&&z(this,Y)}return this}return H(Z,{inject:function($){if($){var R=!0===$.statics?$:$.statics,Y=$.beans,he=$.preserve;R!==$&&H(this.prototype,$,$.enumerable,Y,he),H(this,R,null,Y,he)}for(var me=1,ve=arguments.length;me<ve;me++)this.inject(arguments[me]);return this},extend:function(){for(var R,Y,me,$=this,he=0,ve=arguments.length;he<ve&&(!R||!Y);he++)me=arguments[he],R=R||me.initialize,Y=Y||me.prototype;return R=R||function(){$.apply(this,arguments)},Y=R.prototype=Y||_(this.prototype),S(Y,"constructor",{value:R,writable:!0,configurable:!0}),H(R,this),arguments.length&&this.inject.apply(R,arguments),R.base=$,R}}).inject({enumerable:!1,initialize:Z,set:Z,inject:function(){for(var $=0,R=arguments.length;$<R;$++){var Y=arguments[$];Y&&H(this,Y,Y.enumerable,Y.beans,Y.preserve)}return this},extend:function(){var $=_(this);return $.inject.apply($,arguments)},each:function($,R){return D(this,$,R)},clone:function(){return new this.constructor(this)},statics:{set:z,each:D,create:_,define:S,describe:C,clone:function($){return z(new $.constructor,$)},isPlainObject:function($){var R=null!=$&&$.constructor;return R&&(R===Object||R===Z||"Object"===R.name)},pick:function($,R){return $!==ie?$:R},slice:function($,R,Y){return d.call($,R,Y)}}})};yt.exports=q,q.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+q.each(this,function(y,l){if(!/^_/.test(l)){var d=typeof y;this.push(l+": "+("number"===d?_e.instance.number(y):"string"===d?"'"+y+"'":y))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(y){return q.importJSON(y,this)},exportJSON:function(y){return q.exportJSON(this,y)},toJSON:function(){return q.serialize(this)},set:function(y,l){return y&&q.filter(this,y,l,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function y(){var l=y.base.apply(this,arguments),d=l.prototype._class;return d&&!q.exports[d]&&(q.exports[d]=l),l},equals:function(y,l){if(y===l)return!0;if(y&&y.equals)return y.equals(l);if(l&&l.equals)return l.equals(y);if(y&&l&&"object"==typeof y&&"object"==typeof l){if(Array.isArray(y)&&Array.isArray(l)){if((d=y.length)!==l.length)return!1;for(;d--;)if(!q.equals(y[d],l[d]))return!1}else{var d,_=Object.keys(y);if((d=_.length)!==Object.keys(l).length)return!1;for(;d--;){var C=_[d];if(!l.hasOwnProperty(C)||!q.equals(y[C],l[C]))return!1}}return!0}return!1},read:function(y,l,d,_){if(this===q){var C=this.peek(y,l);return y.__index++,C}var S=this.prototype,k=S._readIndex,N=l||k&&y.__index||0,z=y.length,D=y[N];if(_=_||z-N,D instanceof this||d&&d.readNull&&null==D&&_<=1)return k&&(y.__index=N+1),D&&d&&d.clone?D.clone():D;if(D=q.create(S),k&&(D.__read=!0),D=D.initialize.apply(D,N>0||N+_<z?q.slice(y,N,N+_):y)||D,k){y.__index=N+D.__read;var H=D.__filtered;H&&(y.__filtered=H,D.__filtered=ie),D.__read=ie}return D},peek:function(y,l){return y[y.__index=l||y.__index||0]},remain:function(y){return y.length-(y.__index||0)},readList:function(y,l,d,_){for(var S,C=[],k=l||0,N=_?k+_:y.length,z=k;z<N;z++)C.push(Array.isArray(S=y[z])?this.read(S,0,d):this.read(y,z,d,1));return C},readNamed:function(y,l,d,_,C){var S=this.getNamed(y,l),k=S!==ie;if(k){var N=y.__filtered;if(!N){var z=this.getSource(y);(N=y.__filtered=q.create(z)).__unfiltered=z}N[l]=ie}return this.read(k?[S]:y,d,_,C)},readSupported:function(y,l){var d=this.getSource(y),_=this,C=!1;return d&&Object.keys(d).forEach(function(S){if(S in l){var k=_.readNamed(y,S);k!==ie&&(l[S]=k),C=!0}}),C},getSource:function(y){var l=y.__source;if(l===ie){var d=1===y.length&&y[0];l=y.__source=d&&q.isPlainObject(d)?d:null}return l},getNamed:function(y,l){var d=this.getSource(y);if(d)return l?d[l]:y.__filtered||d},hasNamed:function(y,l){return!!this.getNamed(y,l)},filter:function(y,l,d,_){var C;function S(H){if(!(d&&H in d||C&&H in C)){var Z=l[H];Z!==ie&&(y[H]=Z)}}if(_){for(var z,k={},N=0,D=_.length;N<D;N++)(z=_[N])in l&&(S(z),k[z]=!0);C=k}return Object.keys(l.__unfiltered||l).forEach(S),y},isPlainValue:function(y,l){return q.isPlainObject(y)||Array.isArray(y)||l&&"string"==typeof y},serialize:function(y,l,d,_){l=l||{};var S,C=!_;if(C&&(l.formatter=new _e(l.precision),_={length:0,definitions:{},references:{},add:function(Z,$){var R="#"+Z._id,Y=this.references[R];if(!Y){this.length++;var he=$.call(Z),me=Z._class;me&&he[0]!==me&&he.unshift(me),this.definitions[R]=he,Y=this.references[R]=[R]}return Y}}),y&&y._serialize){S=y._serialize(l,_);var k=y._class;k&&!y._compactSerialize&&(C||!d)&&S[0]!==k&&S.unshift(k)}else if(Array.isArray(y)){S=[];for(var N=0,z=y.length;N<z;N++)S[N]=q.serialize(y[N],l,d,_)}else if(q.isPlainObject(y)){S={};var D=Object.keys(y);for(N=0,z=D.length;N<z;N++){var H=D[N];S[H]=q.serialize(y[H],l,d,_)}}else S="number"==typeof y?l.formatter.number(y,l.precision):y;return C&&_.length>0?[["dictionary",_.definitions],S]:S},deserialize:function(y,l,d,_,C){var S=y,k=!d,N=k&&y&&y.length&&"dictionary"===y[0][0];if(d=d||{},Array.isArray(y)){var z=y[0],D="dictionary"===z;if(1==y.length&&/^#/.test(z))return d.dictionary[z];S=[];for(var H=(z=q.exports[z])?1:0,Z=y.length;H<Z;H++)S.push(q.deserialize(y[H],l,d,D,N));if(z){var $=S;S=l?l(z,$,k||C):new z($)}}else if(q.isPlainObject(y))for(var R in S={},_&&(d.dictionary=S),y)S[R]=q.deserialize(y[R],l,d);return N?S[1]:S},exportJSON:function(y,l){var d=q.serialize(y,l);return l&&0==l.asString?d:JSON.stringify(d)},importJSON:function(y,l){return q.deserialize("string"==typeof y?JSON.parse(y):y,function(d,_,C){var S=C&&l&&l.constructor===d,k=S?l:q.create(d.prototype);if(1===_.length&&k instanceof st&&(S||!(k instanceof ut))){var N=_[0];q.isPlainObject(N)&&(N.insert=!1,S&&(_=_.concat([st.INSERT])))}return(S?k.set:d).apply(k,_),S&&(l=null),k})},push:function(y,l){var d=l.length;if(d<4096)y.push.apply(y,l);else{var _=y.length;y.length+=d;for(var C=0;C<d;C++)y[_+C]=l[C]}return y},splice:function(y,l,d,_){var C=l&&l.length,S=d===ie;(d=S?y.length:d)>y.length&&(d=y.length);for(var k=0;k<C;k++)l[k]._index=d+k;if(S)return q.push(y,l),[];var N=[d,_];l&&q.push(N,l);for(var z=y.splice.apply(y,N),D=(k=0,z.length);k<D;k++)z[k]._index=ie;for(k=d+C,D=y.length;k<D;k++)y[k]._index=k;return z},capitalize:function(y){return y.replace(/\b[a-z]/g,function(l){return l.toUpperCase()})},camelize:function(y){return y.replace(/-(.)/g,function(l,d){return d.toUpperCase()})},hyphenate:function(y){return y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var le={on:function(y,l){if("string"!=typeof y)q.each(y,function(S,k){this.on(k,S)},this);else{var d=this._eventTypes,_=d&&d[y],C=this._callbacks=this._callbacks||{};-1===(C=C[y]=C[y]||[]).indexOf(l)&&(C.push(l),_&&_.install&&1===C.length&&_.install.call(this,y))}return this},off:function(y,l){if("string"==typeof y){var S,d=this._eventTypes,_=d&&d[y],C=this._callbacks&&this._callbacks[y];return C&&(!l||-1!==(S=C.indexOf(l))&&1===C.length?(_&&_.uninstall&&_.uninstall.call(this,y),delete this._callbacks[y]):-1!==S&&C.splice(S,1)),this}q.each(y,function(k,N){this.off(N,k)},this)},once:function(y,l){return this.on(y,function d(){l.apply(this,arguments),this.off(y,d)})},emit:function(y,l){var d=this._callbacks&&this._callbacks[y];if(!d)return!1;var _=q.slice(arguments,1),C=l&&l.target&&!l.currentTarget;d=d.slice(),C&&(l.currentTarget=this);for(var S=0,k=d.length;S<k;S++)if(0==d[S].apply(this,_)){l&&l.stop&&l.stop();break}return C&&delete l.currentTarget,!0},responds:function(y){return!(!this._callbacks||!this._callbacks[y])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(y){var l=this._eventTypes,d=this._callbacks,_=y?"install":"uninstall";if(l)for(var C in d)if(d[C].length>0){var S=l[C],k=S&&S[_];k&&k.call(this,C)}},statics:{inject:function y(l){var d=l._events;if(d){var _={};q.each(d,function(C,S){var k="string"==typeof C,N=k?C:S,z=q.capitalize(N),D=N.substring(2).toLowerCase();_[D]=k?{}:C,N="_"+N,l["get"+z]=function(){return this[N]},l["set"+z]=function(H){var Z=this[N];Z&&this.off(D,Z),H&&this.on(D,H),this[N]=H}}),l._eventTypes=_}return y.base.apply(this,arguments)}}},Te=q.extend({_class:"PaperScope",initialize:function y(){fr=this,this.settings=new q({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=y._id++,y._scopes[this._id]=this;var l=y.prototype;if(!this.support){var d=vs.getContext(1,1)||{};l.support={nativeDash:"setLineDash"in d||"mozDash"in d,nativeBlendModes:Hr.nativeModes},vs.release(d)}if(!this.agent){var _=re.navigator.userAgent.toLowerCase(),C=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(_)||[])[0],S="darwin"===C?"mac":C,k=l.agent=l.browser={platform:S};S&&(k[S]=!0),_.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(N,z,D,H,Z){if(!k.chrome){var $="opera"===z?H:/^(node|trident)$/.test(z)?Z:D;k.version=$,k.versionNumber=parseFloat($),k.name=z={trident:"msie",jsdom:"node"}[z]||z,k[z]=!0}}),k.chrome&&delete k.webkit,k.atom&&delete k.chrome}},version:"0.12.17",getView:function(){var y=this.project;return y&&y._view},getPaper:function(){return this},execute:function(y,l){},install:function(y){var l=this;for(var d in q.each(["project","view","tool"],function(_){q.define(y,_,{configurable:!0,get:function(){return l[_]}})}),this)!/^_/.test(d)&&this[d]&&(y[d]=this[d])},setup:function(y){return fr=this,this.project=new dt(y),this},createCanvas:function(y,l){return vs.getCanvas(y,l)},activate:function(){fr=this},clear:function(){for(var y=this.projects,l=this.tools,d=y.length-1;d>=0;d--)y[d].remove();for(d=l.length-1;d>=0;d--)l[d].remove()},remove:function(){this.clear(),delete Te._scopes[this._id]},statics:new function(){function y(l){return l+="Attribute",function(d,_){return d[l](_)||d[l]("data-paper-"+_)}}return{_scopes:{},_id:0,get:function(l){return this._scopes[l]||null},getAttribute:y("get"),hasAttribute:y("has")}}}),De=q.extend(le,{initialize:function(y){this._scope=fr,this._index=this._scope[this._list].push(this)-1,(y||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var y=this._scope[this._reference];return y&&y!==this&&y.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",y),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(q.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),xe={findItemBoundsCollisions:function(y,l,d){function _(k){for(var N=new Array(k.length),z=0;z<k.length;z++){var D=k[z].getBounds();N[z]=[D.left,D.top,D.right,D.bottom]}return N}var C=_(y),S=l&&l!==y?_(l):C;return this.findBoundsCollisions(C,S,d||0)},findCurveBoundsCollisions:function(y,l,d,_){function C($){for(var R=Math.min,Y=Math.max,he=new Array($.length),me=0;me<$.length;me++){var ve=$[me];he[me]=[R(ve[0],ve[2],ve[4],ve[6]),R(ve[1],ve[3],ve[5],ve[7]),Y(ve[0],ve[2],ve[4],ve[6]),Y(ve[1],ve[3],ve[5],ve[7])]}return he}var S=C(y),k=l&&l!==y?C(l):S;if(_){for(var N=this.findBoundsCollisions(S,k,d||0,!1,!0),z=this.findBoundsCollisions(S,k,d||0,!0,!0),D=[],H=0,Z=N.length;H<Z;H++)D[H]={hor:N[H],ver:z[H]};return D}return this.findBoundsCollisions(S,k,d||0)},findBoundsCollisions:function(y,l,d,_,C){var S=!l||y===l,k=S?y:y.concat(l),N=y.length,z=k.length;function D(we,Ue,ct){for(var Dt=0,wt=we.length;Dt<wt;){var nn=wt+Dt>>>1;k[we[nn]][Ue]<ct?Dt=nn+1:wt=nn}return Dt-1}for(var H=_?1:0,Z=H+2,$=_?0:1,R=$+2,Y=new Array(z),he=0;he<z;he++)Y[he]=he;Y.sort(function(we,Ue){return k[we][H]-k[Ue][H]});var me=[],ve=new Array(N);for(he=0;he<z;he++){var ge=Y[he],pe=k[ge],de=S?ge:ge-N,Ee=ge<N,ke=S||!Ee,Xe=Ee?[]:null;if(me.length){var je=D(me,Z,pe[H]-d)+1;if(me.splice(0,je),S&&C){Xe=Xe.concat(me);for(var nt=0;nt<me.length;nt++)ve[pt=me[nt]].push(de)}else{var gt=pe[R],Wt=pe[$];for(nt=0;nt<me.length;nt++){var pt,Lt=k[pt=me[nt]],Bt=pt<N,qt=S||pt>=N;(C||(Ee&&qt||ke&&Bt)&&gt>=Lt[$]-d&&Wt<=Lt[R]+d)&&(Ee&&qt&&Xe.push(S?pt:pt-N),ke&&Bt&&ve[pt].push(de))}}}if(Ee&&(y===l&&Xe.push(ge),ve[ge]=Xe),me.length){var We=D(me,Z,pe[Z]);me.splice(We+1,0,ge)}else me.push(ge)}for(he=0;he<ve.length;he++){var Ye=ve[he];Ye&&Ye.sort(function(Ue,ct){return Ue-ct})}return ve}},_e=q.extend({initialize:function(y){this.precision=q.pick(y,5),this.multiplier=Math.pow(10,this.precision)},number:function(y){return this.precision<16?Math.round(y*this.multiplier)/this.multiplier:y},pair:function(y,l,d){return this.number(y)+(d||",")+this.number(l)},point:function(y,l){return this.number(y.x)+(l||",")+this.number(y.y)},size:function(y,l){return this.number(y.width)+(l||",")+this.number(y.height)},rectangle:function(y,l){return this.point(y,l)+(l||",")+this.size(y,l)}});_e.instance=new _e;var Q=new function(){var y=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],l=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],d=Math.abs,_=Math.sqrt,C=Math.pow,S=Math.log2||function(Z){return Math.log(Z)*Math.LOG2E},k=1e-12,N=112e-18;function z(Z,$,R){return Z<$?$:Z>R?R:Z}function D(Z,$,R){function Y(je){var nt=134217729*je,gt=je-nt+nt;return[gt,je-gt]}var he=$*$-Z*R,me=$*$+Z*R;if(3*d(he)<me){var ve=Y(Z),ge=Y($),pe=Y(R),de=$*$,ke=Z*R;he=de-ke+(ge[0]*ge[0]-de+2*ge[0]*ge[1]+ge[1]*ge[1]-(ve[0]*pe[0]-ke+ve[0]*pe[1]+ve[1]*pe[0]+ve[1]*pe[1]))}return he}function H(){var Z=Math.max.apply(Math,arguments);return Z&&(Z<1e-8||Z>1e8)?C(2,-Math.round(S(Z))):0}return{EPSILON:k,MACHINE_EPSILON:N,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(_(2)-1)/3,isZero:function(Z){return Z>=-k&&Z<=k},isMachineZero:function(Z){return Z>=-N&&Z<=N},clamp:z,integrate:function(Z,$,R,Y){for(var he=y[Y-2],me=l[Y-2],ve=.5*(R-$),ge=ve+$,pe=0,de=Y+1>>1,Ee=1&Y?me[pe++]*Z(ge):0;pe<de;){var ke=ve*he[pe];Ee+=me[pe++]*(Z(ge+ke)+Z(ge-ke))}return ve*Ee},findRoot:function(Z,$,R,Y,he,me,ve){for(var ge=0;ge<me;ge++){var pe=Z(R),de=pe/$(R),Ee=R-de;if(d(de)<ve){R=Ee;break}pe>0?(he=R,R=Ee<=Y?.5*(Y+he):Ee):(Y=R,R=Ee>=he?.5*(Y+he):Ee)}return z(R,Y,he)},solveQuadratic:function(Z,$,R,Y,he,me){var ve,ge=1/0;if(d(Z)<k){if(d($)<k)return d(R)<k?-1:0;ve=-R/$}else{var pe=D(Z,$*=-.5,R);if(pe&&d(pe)<N){var de=H(d(Z),d($),d(R));de&&(pe=D(Z*=de,$*=de,R*=de))}if(pe>=-N){var Ee=pe<0?0:_(pe),ke=$+($<0?-Ee:Ee);0===ke?ge=-(ve=R/Z):(ve=ke/Z,ge=R/ke)}}var Xe=0,je=null==he,nt=he-k,pt=me+k;return isFinite(ve)&&(je||ve>nt&&ve<pt)&&(Y[Xe++]=je?ve:z(ve,he,me)),ge!==ve&&isFinite(ge)&&(je||ge>nt&&ge<pt)&&(Y[Xe++]=je?ge:z(ge,he,me)),Xe},solveCubic:function(Z,$,R,Y,he,me,ve){var pe,de,Ee,ke,Xe,ge=H(d(Z),d($),d(R),d(Y));function je(We){var Ye=Z*(pe=We);ke=(Ye+(de=Ye+$))*pe+(Ee=de*pe+R),Xe=Ee*pe+Y}if(ge&&(Z*=ge,$*=ge,R*=ge,Y*=ge),d(Z)<k)Z=$,de=R,Ee=Y,pe=1/0;else if(d(Y)<k)de=$,Ee=R,pe=0;else{je(-$/Z/3);var nt=Xe/Z,pt=C(d(nt),1/3),gt=nt<0?-1:1,Wt=-ke/Z,Lt=Wt>0?1.324717957244746*Math.max(pt,_(Wt)):pt,Bt=pe-gt*Lt;if(Bt!==pe){do{je(Bt),Bt=0===ke?pe:pe-Xe/ke/(1+N)}while(gt*Bt>gt*pe);d(Z)*pe*pe>d(Y/pe)&&(de=((Ee=-Y/pe)-R)/pe)}}var qt=Q.solveQuadratic(Z,de,Ee,he,me,ve),Pe=null==me;return isFinite(pe)&&(0===qt||qt>0&&pe!==he[0]&&pe!==he[1])&&(Pe||pe>me-k&&pe<ve+k)&&(he[qt++]=Pe?pe:z(pe,me,ve)),qt}}},Re={_id:1,_pools:{},get:function(y){if(y){var l=this._pools[y];return l||(l=this._pools[y]={_id:1}),l._id++}return this._id++}},Le=q.extend({_class:"Point",_readIndex:!0,initialize:function(l,d){var _=typeof l,C=this.__read,S=0;if("number"===_){var k="number"==typeof d;this._set(l,k?d:l),C&&(S=k?2:1)}else if("undefined"===_||null===l)this._set(0,0),C&&(S=null===l?1:0);else{var N="string"===_?l.split(/[\s,]+/)||[]:l;S=1,Array.isArray(N)?this._set(+N[0],+(N.length>1?N[1]:N[0])):"x"in N?this._set(N.x||0,N.y||0):"width"in N?this._set(N.width||0,N.height||0):"angle"in N?(this._set(N.length||0,0),this.setAngle(N.angle||0)):(this._set(0,0),S=0)}return C&&(this.__read=S),this},set:"#initialize",_set:function(y,l){return this.x=y,this.y=l,this},equals:function(y){return this===y||y&&(this.x===y.x&&this.y===y.y||Array.isArray(y)&&this.x===y[0]&&this.y===y[1])||!1},clone:function(){return new Le(this.x,this.y)},toString:function(){var y=_e.instance;return"{ x: "+y.number(this.x)+", y: "+y.number(this.y)+" }"},_serialize:function(y){var l=y.formatter;return[l.number(this.x),l.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(y){if(this.isZero()){var l=this._angle||0;this._set(Math.cos(l)*y,Math.sin(l)*y)}else{var d=y/this.getLength();Q.isZero(d)&&this.getAngle(),this._set(this.x*d,this.y*d)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(y){this.setAngleInRadians.call(this,y*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var y=Le.read(arguments),l=this.getLength()*y.getLength();if(Q.isZero(l))return NaN;var d=this.dot(y)/l;return Math.acos(d<-1?-1:d>1?1:d)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(y){if(this._angle=y,!this.isZero()){var l=this.getLength();this._set(Math.cos(y)*l,Math.sin(y)*l)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var y=Le.read(arguments);return 180*Math.atan2(this.cross(y),this.dot(y))/Math.PI},getDistance:function(){var y=arguments,l=Le.read(y),d=l.x-this.x,_=l.y-this.y,C=d*d+_*_,S=q.read(y);return S?C:Math.sqrt(C)},normalize:function(y){y===ie&&(y=1);var l=this.getLength(),d=0!==l?y/l:0,_=new Le(this.x*d,this.y*d);return d>=0&&(_._angle=this._angle),_},rotate:function(y,l){if(0===y)return this.clone();y=y*Math.PI/180;var d=l?this.subtract(l):this,_=Math.sin(y),C=Math.cos(y);return d=new Le(d.x*C-d.y*_,d.x*_+d.y*C),l?d.add(l):d},transform:function(y){return y?y._transformPoint(this):this},add:function(){var y=Le.read(arguments);return new Le(this.x+y.x,this.y+y.y)},subtract:function(){var y=Le.read(arguments);return new Le(this.x-y.x,this.y-y.y)},multiply:function(){var y=Le.read(arguments);return new Le(this.x*y.x,this.y*y.y)},divide:function(){var y=Le.read(arguments);return new Le(this.x/y.x,this.y/y.y)},modulo:function(){var y=Le.read(arguments);return new Le(this.x%y.x,this.y%y.y)},negate:function(){return new Le(-this.x,-this.y)},isInside:function(){return L.read(arguments).contains(this)},isClose:function(){var y=arguments,l=Le.read(y),d=q.read(y);return this.getDistance(l)<=d},isCollinear:function(){var y=Le.read(arguments);return Le.isCollinear(this.x,this.y,y.x,y.y)},isColinear:"#isCollinear",isOrthogonal:function(){var y=Le.read(arguments);return Le.isOrthogonal(this.x,this.y,y.x,y.y)},isZero:function(){var y=Q.isZero;return y(this.x)&&y(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(y){return this.x*(y>1&&y<4?-1:1)>=0&&this.y*(y>2?-1:1)>=0},dot:function(){var y=Le.read(arguments);return this.x*y.x+this.y*y.y},cross:function(){var y=Le.read(arguments);return this.x*y.y-this.y*y.x},project:function(){var y=Le.read(arguments),l=y.isZero()?0:this.dot(y)/y.dot(y);return new Le(y.x*l,y.y*l)},statics:{min:function(){var y=arguments,l=Le.read(y),d=Le.read(y);return new Le(Math.min(l.x,d.x),Math.min(l.y,d.y))},max:function(){var y=arguments,l=Le.read(y),d=Le.read(y);return new Le(Math.max(l.x,d.x),Math.max(l.y,d.y))},random:function(){return new Le(Math.random(),Math.random())},isCollinear:function(y,l,d,_){return Math.abs(y*_-l*d)<=1e-8*Math.sqrt((y*y+l*l)*(d*d+_*_))},isOrthogonal:function(y,l,d,_){return Math.abs(y*d+l*_)<=1e-8*Math.sqrt((y*y+l*l)*(d*d+_*_))}}},q.each(["round","ceil","floor","abs"],function(y){var l=Math[y];this[y]=function(){return new Le(l(this.x),l(this.y))}},{})),Ve=Le.extend({initialize:function(l,d,_,C){this._x=l,this._y=d,this._owner=_,this._setter=C},_set:function(y,l,d){return this._x=y,this._y=l,d||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(y){this._x=y,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(y){this._y=y,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(y){this._owner._changeSelection(this._getSelection(),y)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),Ae=q.extend({_class:"Size",_readIndex:!0,initialize:function(l,d){var _=typeof l,C=this.__read,S=0;if("number"===_){var k="number"==typeof d;this._set(l,k?d:l),C&&(S=k?2:1)}else if("undefined"===_||null===l)this._set(0,0),C&&(S=null===l?1:0);else{var N="string"===_?l.split(/[\s,]+/)||[]:l;S=1,Array.isArray(N)?this._set(+N[0],+(N.length>1?N[1]:N[0])):"width"in N?this._set(N.width||0,N.height||0):"x"in N?this._set(N.x||0,N.y||0):(this._set(0,0),S=0)}return C&&(this.__read=S),this},set:"#initialize",_set:function(y,l){return this.width=y,this.height=l,this},equals:function(y){return y===this||y&&(this.width===y.width&&this.height===y.height||Array.isArray(y)&&this.width===y[0]&&this.height===y[1])||!1},clone:function(){return new Ae(this.width,this.height)},toString:function(){var y=_e.instance;return"{ width: "+y.number(this.width)+", height: "+y.number(this.height)+" }"},_serialize:function(y){var l=y.formatter;return[l.number(this.width),l.number(this.height)]},add:function(){var y=Ae.read(arguments);return new Ae(this.width+y.width,this.height+y.height)},subtract:function(){var y=Ae.read(arguments);return new Ae(this.width-y.width,this.height-y.height)},multiply:function(){var y=Ae.read(arguments);return new Ae(this.width*y.width,this.height*y.height)},divide:function(){var y=Ae.read(arguments);return new Ae(this.width/y.width,this.height/y.height)},modulo:function(){var y=Ae.read(arguments);return new Ae(this.width%y.width,this.height%y.height)},negate:function(){return new Ae(-this.width,-this.height)},isZero:function(){var y=Q.isZero;return y(this.width)&&y(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(y,l){return new Ae(Math.min(y.width,l.width),Math.min(y.height,l.height))},max:function(y,l){return new Ae(Math.max(y.width,l.width),Math.max(y.height,l.height))},random:function(){return new Ae(Math.random(),Math.random())}}},q.each(["round","ceil","floor","abs"],function(y){var l=Math[y];this[y]=function(){return new Ae(l(this.width),l(this.height))}},{})),Se=Ae.extend({initialize:function(l,d,_,C){this._width=l,this._height=d,this._owner=_,this._setter=C},_set:function(y,l,d){return this._width=y,this._height=l,d||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(y){this._width=y,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(y){this._height=y,this._owner[this._setter](this)}}),L=q.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(l,d,_,C){var N,S=arguments,k=typeof l;if("number"===k?(this._set(l,d,_,C),N=4):"undefined"===k||null===l?(this._set(0,0,0,0),N=null===l?1:0):1===S.length&&(Array.isArray(l)?(this._set.apply(this,l),N=1):l.x!==ie||l.width!==ie?(this._set(l.x||0,l.y||0,l.width||0,l.height||0),N=1):l.from===ie&&l.to===ie&&(this._set(0,0,0,0),q.readSupported(S,this)&&(N=1))),N===ie){var $,R,z=Le.readNamed(S,"from"),D=q.peek(S),H=z.x,Z=z.y;if(D&&D.x!==ie||q.hasNamed(S,"to")){var Y=Le.readNamed(S,"to");($=Y.x-H)<0&&(H=Y.x,$=-$),(R=Y.y-Z)<0&&(Z=Y.y,R=-R)}else{var he=Ae.read(S);$=he.width,R=he.height}this._set(H,Z,$,R),N=S.__index}var me=S.__filtered;return me&&(this.__filtered=me),this.__read&&(this.__read=N),this},set:"#initialize",_set:function(y,l,d,_){return this.x=y,this.y=l,this.width=d,this.height=_,this},clone:function(){return new L(this.x,this.y,this.width,this.height)},equals:function(y){var l=q.isPlainValue(y)?L.read(arguments):y;return l===this||l&&this.x===l.x&&this.y===l.y&&this.width===l.width&&this.height===l.height||!1},toString:function(){var y=_e.instance;return"{ x: "+y.number(this.x)+", y: "+y.number(this.y)+", width: "+y.number(this.width)+", height: "+y.number(this.height)+" }"},_serialize:function(y){var l=y.formatter;return[l.number(this.x),l.number(this.y),l.number(this.width),l.number(this.height)]},getPoint:function(y){return new(y?Le:Ve)(this.x,this.y,this,"setPoint")},setPoint:function(){var y=Le.read(arguments);this.x=y.x,this.y=y.y},getSize:function(y){return new(y?Ae:Se)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var y=Ae.read(arguments),l=this._sx,d=this._sy,_=y.width,C=y.height;l&&(this.x+=(this.width-_)*l),d&&(this.y+=(this.height-C)*d),this.width=_,this.height=C,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(y){if(!this._fw){var l=y-this.x;this.width-=.5===this._sx?2*l:l}this.x=y,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(y){if(!this._fh){var l=y-this.y;this.height-=.5===this._sy?2*l:l}this.y=y,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(y){if(!this._fw){var l=y-this.x;this.width=.5===this._sx?2*l:l}this.x=y-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(y){if(!this._fh){var l=y-this.y;this.height=.5===this._sy?2*l:l}this.y=y-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(y){this._fw||.5===this._sx?this.x=y-this.width/2:(this._sx&&(this.x+=2*(y-this.x)*this._sx),this.width=2*(y-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(y){this._fh||.5===this._sy?this.y=y-this.height/2:(this._sy&&(this.y+=2*(y-this.y)*this._sy),this.height=2*(y-this.y)),this._sy=.5,this._fh=0},getCenter:function(y){return new(y?Le:Ve)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var y=Le.read(arguments);return this.setCenterX(y.x),this.setCenterY(y.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(y){return y&&y.width!==ie||4===(Array.isArray(y)?y:arguments).length?this._containsRectangle(L.read(arguments)):this._containsPoint(Le.read(arguments))},_containsPoint:function(y){var l=y.x,d=y.y;return l>=this.x&&d>=this.y&&l<=this.x+this.width&&d<=this.y+this.height},_containsRectangle:function(y){var l=y.x,d=y.y;return l>=this.x&&d>=this.y&&l+y.width<=this.x+this.width&&d+y.height<=this.y+this.height},intersects:function(){var y=L.read(arguments),l=q.read(arguments)||0;return y.x+y.width>this.x-l&&y.y+y.height>this.y-l&&y.x<this.x+this.width+l&&y.y<this.y+this.height+l},intersect:function(){var y=L.read(arguments),l=Math.max(this.x,y.x),d=Math.max(this.y,y.y),_=Math.min(this.x+this.width,y.x+y.width),C=Math.min(this.y+this.height,y.y+y.height);return new L(l,d,_-l,C-d)},unite:function(){var y=L.read(arguments),l=Math.min(this.x,y.x),d=Math.min(this.y,y.y),_=Math.max(this.x+this.width,y.x+y.width),C=Math.max(this.y+this.height,y.y+y.height);return new L(l,d,_-l,C-d)},include:function(){var y=Le.read(arguments),l=Math.min(this.x,y.x),d=Math.min(this.y,y.y),_=Math.max(this.x+this.width,y.x),C=Math.max(this.y+this.height,y.y);return new L(l,d,_-l,C-d)},expand:function(){var y=Ae.read(arguments),l=y.width,d=y.height;return new L(this.x-l/2,this.y-d/2,this.width+l,this.height+d)},scale:function(y,l){return this.expand(this.width*y-this.width,this.height*(l===ie?y:l)-this.height)}},q.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(y,l){var d=y.join(""),_=/^[RL]/.test(d);l>=4&&(y[1]+=_?"Y":"X");var C=y[_?0:1],S=y[_?1:0],k="get"+C,N="get"+S,z="set"+C,D="set"+S,Z="set"+d;this["get"+d]=function($){return new($?Le:Ve)(this[k](),this[N](),this,Z)},this[Z]=function(){var $=Le.read(arguments);this[z]($.x),this[D]($.y)}},{beans:!0})),ee=L.extend({initialize:function(l,d,_,C,S,k){this._set(l,d,_,C,!0),this._owner=S,this._setter=k},_set:function(y,l,d,_,C){return this._x=y,this._y=l,this._width=d,this._height=_,C||this._owner[this._setter](this),this}},new function(){var y=L.prototype;return q.each(["x","y","width","height"],function(l){var d=q.capitalize(l),_="_"+l;this["get"+d]=function(){return this[_]},this["set"+d]=function(C){this[_]=C,this._dontNotify||this._owner[this._setter](this)}},q.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(l){var d="set"+l;this[d]=function(){this._dontNotify=!0,y[d].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(l){var d=this._owner;d._changeSelection&&d._changeSelection(2,l)}}))}),Ce=q.extend({_class:"Matrix",initialize:function y(l,d){var _=arguments,C=_.length,S=!0;if(C>=6?this._set.apply(this,_):1===C||2===C?l instanceof y?this._set(l._a,l._b,l._c,l._d,l._tx,l._ty,d):Array.isArray(l)?this._set.apply(this,d?l.concat([d]):l):S=!1:C?S=!1:this.reset(),!S)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(y,l,d,_,C,S,k){return this._a=y,this._b=l,this._c=d,this._d=_,this._tx=C,this._ty=S,k||this._changed(),this},_serialize:function(y,l){return q.serialize(this.getValues(),y,!0,l)},_changed:function(){var y=this._owner;y&&(y._applyMatrix?y.transform(null,!0):y._changed(25))},clone:function(){return new Ce(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(y){return y===this||y&&this._a===y._a&&this._b===y._b&&this._c===y._c&&this._d===y._d&&this._tx===y._tx&&this._ty===y._ty},toString:function(){var y=_e.instance;return"[["+[y.number(this._a),y.number(this._c),y.number(this._tx)].join(", ")+"], ["+[y.number(this._b),y.number(this._d),y.number(this._ty)].join(", ")+"]]"},reset:function(y){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,y||this._changed(),this},apply:function(y,l){var d=this._owner;return!!d&&(d.transform(null,q.pick(y,!0),l),this.isIdentity())},translate:function(){var y=Le.read(arguments),l=y.x,d=y.y;return this._tx+=l*this._a+d*this._c,this._ty+=l*this._b+d*this._d,this._changed(),this},scale:function(){var y=arguments,l=Le.read(y),d=Le.read(y,0,{readNull:!0});return d&&this.translate(d),this._a*=l.x,this._b*=l.x,this._c*=l.y,this._d*=l.y,d&&this.translate(d.negate()),this._changed(),this},rotate:function(y){y*=Math.PI/180;var l=Le.read(arguments,1),d=l.x,_=l.y,C=Math.cos(y),S=Math.sin(y),k=d-d*C+_*S,N=_-d*S-_*C,z=this._a,D=this._b,H=this._c,Z=this._d;return this._a=C*z+S*H,this._b=C*D+S*Z,this._c=-S*z+C*H,this._d=-S*D+C*Z,this._tx+=k*z+N*H,this._ty+=k*D+N*Z,this._changed(),this},shear:function(){var y=arguments,l=Le.read(y),d=Le.read(y,0,{readNull:!0});d&&this.translate(d);var _=this._a,C=this._b;return this._a+=l.y*this._c,this._b+=l.y*this._d,this._c+=l.x*_,this._d+=l.x*C,d&&this.translate(d.negate()),this._changed(),this},skew:function(){var y=arguments,l=Le.read(y),d=Le.read(y,0,{readNull:!0}),_=Math.PI/180,C=new Le(Math.tan(l.x*_),Math.tan(l.y*_));return this.shear(C,d)},append:function(y,l){if(y){var d=this._a,_=this._b,C=this._c,S=this._d,k=y._a,N=y._c,z=y._b,D=y._d,H=y._tx,Z=y._ty;this._a=k*d+z*C,this._c=N*d+D*C,this._b=k*_+z*S,this._d=N*_+D*S,this._tx+=H*d+Z*C,this._ty+=H*_+Z*S,l||this._changed()}return this},prepend:function(y,l){if(y){var d=this._a,_=this._b,C=this._c,S=this._d,k=this._tx,N=this._ty,z=y._a,D=y._c,H=y._b,Z=y._d,$=y._tx,R=y._ty;this._a=z*d+D*_,this._c=z*C+D*S,this._b=H*d+Z*_,this._d=H*C+Z*S,this._tx=z*k+D*N+$,this._ty=H*k+Z*N+R,l||this._changed()}return this},appended:function(y){return this.clone().append(y)},prepended:function(y){return this.clone().prepend(y)},invert:function(){var y=this._a,l=this._b,d=this._c,_=this._d,C=this._tx,S=this._ty,k=y*_-l*d,N=null;return k&&!isNaN(k)&&isFinite(C)&&isFinite(S)&&(this._a=_/k,this._b=-l/k,this._c=-d/k,this._d=y/k,this._tx=(d*S-_*C)/k,this._ty=(l*C-y*S)/k,N=this),N},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new Ce(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var y=this._a*this._d-this._c*this._b;return y&&!isNaN(y)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(y,l,d){return arguments.length<3?this._transformPoint(Le.read(arguments)):this._transformCoordinates(y,l,d)},_transformPoint:function(y,l,d){var _=y.x,C=y.y;return l||(l=new Le),l._set(_*this._a+C*this._c+this._tx,_*this._b+C*this._d+this._ty,d)},_transformCoordinates:function(y,l,d){for(var _=0,C=2*d;_<C;_+=2){var S=y[_],k=y[_+1];l[_]=S*this._a+k*this._c+this._tx,l[_+1]=S*this._b+k*this._d+this._ty}return l},_transformCorners:function(y){var l=y.x,d=y.y,_=l+y.width,C=d+y.height,S=[l,d,_,d,_,C,l,C];return this._transformCoordinates(S,S,4)},_transformBounds:function(y,l,d){for(var _=this._transformCorners(y),C=_.slice(0,2),S=C.slice(),k=2;k<8;k++){var N=_[k],z=1&k;N<C[z]?C[z]=N:N>S[z]&&(S[z]=N)}return l||(l=new L),l._set(C[0],C[1],S[0]-C[0],S[1]-C[1],d)},inverseTransform:function(){return this._inverseTransform(Le.read(arguments))},_inverseTransform:function(y,l,d){var _=this._a,C=this._b,S=this._c,k=this._d,N=this._tx,z=this._ty,D=_*k-C*S,H=null;if(D&&!isNaN(D)&&isFinite(N)&&isFinite(z)){var Z=y.x-this._tx,$=y.y-this._ty;l||(l=new Le),H=l._set((Z*k-$*S)/D,($*_-Z*C)/D,d)}return H},decompose:function(){var z,D,H,y=this._a,l=this._b,d=this._c,_=this._d,C=y*_-l*d,S=Math.sqrt,k=Math.atan2,N=180/Math.PI;if(0!==y||0!==l){var Z=S(y*y+l*l);z=Math.acos(y/Z)*(l>0?1:-1),D=[Z,C/Z],H=[k(y*d+l*_,Z*Z),0]}else if(0!==d||0!==_){var $=S(d*d+_*_);z=Math.asin(d/$)*(_>0?1:-1),D=[C/$,$],H=[0,k(y*d+l*_,$*$)]}else z=0,H=D=[0,0];return{translation:this.getTranslation(),rotation:z*N,scaling:new Le(D),skewing:new Le(H[0]*N,H[1]*N)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new Le(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(y){this.isIdentity()||y.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},q.each(["a","b","c","d","tx","ty"],function(y){var l=q.capitalize(y),d="_"+y;this["get"+l]=function(){return this[d]},this["set"+l]=function(_){this[d]=_,this._changed()}},{})),ze=q.extend({_class:"Line",initialize:function(l,d,_,C,S){var k=!1;arguments.length>=4?(this._px=l,this._py=d,this._vx=_,this._vy=C,k=S):(this._px=l.x,this._py=l.y,this._vx=d.x,this._vy=d.y,k=_),k||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new Le(this._px,this._py)},getVector:function(){return new Le(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(y,l){return ze.intersect(this._px,this._py,this._vx,this._vy,y._px,y._py,y._vx,y._vy,!0,l)},getSide:function(y,l){return ze.getSide(this._px,this._py,this._vx,this._vy,y.x,y.y,!0,l)},getDistance:function(y){return Math.abs(this.getSignedDistance(y))},getSignedDistance:function(y){return ze.getSignedDistance(this._px,this._py,this._vx,this._vy,y.x,y.y,!0)},isCollinear:function(y){return Le.isCollinear(this._vx,this._vy,y._vx,y._vy)},isOrthogonal:function(y){return Le.isOrthogonal(this._vx,this._vy,y._vx,y._vy)},statics:{intersect:function(y,l,d,_,C,S,k,N,z,D){z||(d-=y,_-=l,k-=C,N-=S);var H=d*N-_*k;if(!Q.isMachineZero(H)){var Z=y-C,$=l-S,R=(k*$-N*Z)/H,Y=(d*$-_*Z)/H,ve=1+1e-12;if(D||-1e-12<R&&R<ve&&-1e-12<Y&&Y<ve)return D||(R=R<=0?0:R>=1?1:R),new Le(y+R*d,l+R*_)}},getSide:function(y,l,d,_,C,S,k,N){k||(d-=y,_-=l);var z=C-y,H=z*_-(S-l)*d;return!N&&Q.isMachineZero(H)&&(H=(z*d+z*d)/(d*d+_*_))>=0&&H<=1&&(H=0),H<0?-1:H>0?1:0},getSignedDistance:function(y,l,d,_,C,S,k){return k||(d-=y,_-=l),0===d?_>0?C-y:y-C:0===_?d<0?S-l:l-S:((C-y)*_-(S-l)*d)/(_>d?_*Math.sqrt(1+d*d/(_*_)):d*Math.sqrt(1+_*_/(d*d)))},getDistance:function(y,l,d,_,C,S,k){return Math.abs(ze.getSignedDistance(y,l,d,_,C,S,k))}}}),dt=De.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(l){De.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new li(null,null,this),this._view=Rt.create(this,l||vs.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(y,l){return q.serialize(this._children,y,!0,l)},_changed:function(y,l){if(1&y){var d=this._view;d&&(d._needsUpdate=!0,!d._requested&&d._autoUpdate&&d.requestUpdate())}var _=this._changes;if(_&&l){var C=this._changesById,S=l._id,k=C[S];k?k.flags|=y:_.push(C[S]={item:l,flags:y})}},clear:function(){for(var y=this._children,l=y.length-1;l>=0;l--)y[l].remove()},isEmpty:function(){return!this._children.length},remove:function y(){return!!y.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(y){this._currentStyle.set(y)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ut({project:this,insert:!0})},getSymbolDefinitions:function(){var y=[],l={};return this.getItems({class:Ct,match:function(d){var _=d._definition,C=_._id;return l[C]||(l[C]=!0,y.push(_)),!1}}),y},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var y=this._selectionItems,l=[];for(var d in y){var _=y[d],C=_._selection;1&C&&_.isInserted()?l.push(_):C||this._updateSelection(_)}return l},_updateSelection:function(y){var l=y._id,d=this._selectionItems;y._selection?d[l]!==y&&(this._selectionCount++,d[l]=y):d[l]===y&&(this._selectionCount--,delete d[l])},selectAll:function(){for(var y=this._children,l=0,d=y.length;l<d;l++)y[l].setFullySelected(!0)},deselectAll:function(){var y=this._selectionItems;for(var l in y)y[l].setFullySelected(!1)},addLayer:function(y){return this.insertLayer(ie,y)},insertLayer:function(y,l){if(l instanceof ut){l._remove(!1,!0),q.splice(this._children,[l],y,0),l._setProject(this,!0);var d=l._name;d&&l.setName(d),this._changes&&l._changed(5),this._activeLayer||(this._activeLayer=l)}else l=null;return l},_insertItem:function(y,l,d){return l=this.insertLayer(y,l)||(this._activeLayer||this._insertItem(ie,new ut(st.NO_INSERT),!0)).insertChild(y,l),d&&l.activate&&l.activate(),l},getItems:function(y){return st._getItems(this,y)},getItem:function(y){return st._getItems(this,y,null,null,!0)[0]||null},importJSON:function(y){this.activate();var l=this._activeLayer;return q.importJSON(y,l&&l.isEmpty()&&l)},removeOn:function(y){var l=this._removeSets;if(l){"mouseup"===y&&(l.mousedrag=null);var d=l[y];if(d){for(var _ in d){var C=d[_];for(var S in l){var k=l[S];k&&k!=d&&delete k[C._id]}C.remove()}l[y]=null}}},draw:function(y,l,d){this._updateVersion++,y.save(),l.applyToContext(y);for(var _=this._children,C=new q({offset:new Le(0,0),pixelRatio:d,viewMatrix:l.isIdentity()?null:l,matrices:[new Ce],updateMatrix:!0}),S=0,k=_.length;S<k;S++)_[S].draw(y,C);if(y.restore(),this._selectionCount>0){y.save(),y.strokeWidth=1;var N=this._selectionItems,z=this._scope.settings.handleSize,D=this._updateVersion;for(var H in N)N[H]._drawSelection(y,l,z,N,D);y.restore()}}}),st=q.extend(le,{statics:{extend:function y(l){return l._serializeFields&&(l._serializeFields=q.set({},this.prototype._serializeFields,l._serializeFields)),y.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new Ce,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var y=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return q.each(y,function(l){this._events[l]={install:function(d){this.getView()._countItemEvent(d,1)},uninstall:function(d){this.getView()._countItemEvent(d,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:y}})},{initialize:function(){},_initialize:function(y,l){var d=y&&q.isPlainObject(y),_=d&&!0===y.internal,C=this._matrix=new Ce,S=d&&y.project||fr.project,k=fr.settings;return this._id=_?null:Re.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&k.applyMatrix,l&&C.translate(l),C._owner=this,this._style=new li(S._currentStyle,this,S),_||d&&0==y.insert||!k.insertItems&&(!d||1!=y.insert)?this._setProject(S):(d&&y.parent||S)._insertItem(ie,this,!0),d&&y!==st.NO_INSERT&&y!==st.INSERT&&this.set(y,{internal:!0,insert:!0,project:!0,parent:!0}),d},_serialize:function(y,l){var d={},_=this;function C(S){for(var k in S){var N=_[k];q.equals(N,"leading"===k?1.2*S.fontSize:S[k])||(d[k]=q.serialize(N,y,"data"!==k,l))}}return C(this._serializeFields),this instanceof bt||C(this._style._defaults),[this._class,d]},_changed:function(y){var l=this._symbol,d=this._parent||l,_=this._project;8&y&&(this._bounds=this._position=this._decomposed=ie),16&y&&(this._globalMatrix=ie),d&&72&y&&st._clearBoundsCache(d),2&y&&st._clearBoundsCache(this),_&&_._changed(y,this),l&&l._changed(y)},getId:function(){return this._id},getName:function(){return this._name},setName:function(y){if(this._name&&this._removeNamed(),y===+y+"")throw new Error("Names consisting only of numbers are not supported.");var l=this._getOwner();if(y&&l){var d=l._children,_=l._namedChildren;(_[y]=_[y]||[]).push(this),y in d||(d[y]=this)}this._name=y||ie,this._changed(256)},getStyle:function(){return this._style},setStyle:function(y){this.getStyle().set(y)}},q.each(["locked","visible","blendMode","opacity","guide"],function(y){var l=q.capitalize(y),d="_"+y,_={locked:256,visible:265};this["get"+l]=function(){return this[d]},this["set"+l]=function(C){C!=this[d]&&(this[d]=C,this._changed(_[y]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(y){if(y!==this._selection){this._selection=y;var l=this._project;l&&(l._updateSelection(this),this._changed(257))}},_changeSelection:function(y,l){var d=this._selection;this.setSelection(l?d|y:d&~y)},isSelected:function(){if(this._selectChildren)for(var y=this._children,l=0,d=y.length;l<d;l++)if(y[l].isSelected())return!0;return!!(1&this._selection)},setSelected:function(y){if(this._selectChildren)for(var l=this._children,d=0,_=l.length;d<_;d++)l[d].setSelected(y);this._changeSelection(1,y)},isFullySelected:function(){var y=this._children,l=!!(1&this._selection);if(y&&l){for(var d=0,_=y.length;d<_;d++)if(!y[d].isFullySelected())return!1;return!0}return l},setFullySelected:function(y){var l=this._children;if(l)for(var d=0,_=l.length;d<_;d++)l[d].setFullySelected(y);this._changeSelection(1,y)},isClipMask:function(){return this._clipMask},setClipMask:function(y){this._clipMask!=(y=!!y)&&(this._clipMask=y,y&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(y){this._data=y},getPosition:function(y){var l=y?Le:Ve,d=this._position||(this._position=this._getPositionFromBounds());return new l(d.x,d.y,this,"setPosition")},setPosition:function(){this.translate(Le.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(y){return this._pivot?this._matrix._transformPoint(this._pivot):(y||this.getBounds()).getCenter(!0)},getPivot:function(){var y=this._pivot;return y?new Ve(y.x,y.y,this,"setPivot"):null},setPivot:function(){this._pivot=Le.read(arguments,0,{clone:!0,readNull:!0}),this._position=ie}},q.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(y,l){this[l]=function(d){return this.getBounds(d,y)}},{beans:!0,getBounds:function(y,l){var d=l||y instanceof Ce,_=q.set({},d?l:y,this._boundsOptions);(!_.stroke||this.getStrokeScaling())&&(_.cacheItem=this);var C=this._getCachedBounds(d&&y,_).rect;return arguments.length?C:new ee(C.x,C.y,C.width,C.height,this,"setBounds")},setBounds:function(){var y=L.read(arguments),l=this.getBounds(),d=this._matrix,_=new Ce,C=y.getCenter();_.translate(C),(y.width!=l.width||y.height!=l.height)&&(d.isInvertible()||(d.set(d._backup||(new Ce).translate(d.getTranslation())),l=this.getBounds()),_.scale(0!==l.width?y.width/l.width:0,0!==l.height?y.height/l.height:0)),C=l.getCenter(),_.translate(-C.x,-C.y),this.transform(_)},_getBounds:function(y,l){var d=this._children;return d&&d.length?(st._updateBoundsCache(this,l.cacheItem),st._getBounds(d,y,l)):new L},_getBoundsCacheKey:function(y,l){return[y.stroke?1:0,y.handle?1:0,l?1:0].join("")},_getCachedBounds:function(y,l,d){y=y&&y._orNullIfIdentity();var _=l.internal&&!d,C=l.cacheItem,S=_?null:this._matrix._orNullIfIdentity(),k=C&&(!y||y.equals(S))&&this._getBoundsCacheKey(l,_),N=this._bounds;if(st._updateBoundsCache(this._parent||this._symbol,C),k&&N&&k in N)return{rect:(z=N[k]).rect.clone(),nonscaling:z.nonscaling};var D=this._getBounds(y||S,l),H=D.rect||D,Z=this._style,$=D.nonscaling||Z.hasStroke()&&!Z.getStrokeScaling();if(k){N||(this._bounds=N={});var z=N[k]={rect:H.clone(),nonscaling:$,internal:_}}return{rect:H,nonscaling:$}},_getStrokeMatrix:function(y,l){var d=this.getStrokeScaling()?null:l&&l.internal?this:this._parent||this._symbol&&this._symbol._item,_=d?d.getViewMatrix().invert():y;return _&&_._shiftless()},statics:{_updateBoundsCache:function(y,l){if(y&&l){var d=l._id,_=y._boundsCache=y._boundsCache||{ids:{},list:[]};_.ids[d]||(_.list.push(l),_.ids[d]=l)}},_clearBoundsCache:function(y){var l=y._boundsCache;if(l){y._bounds=y._position=y._boundsCache=ie;for(var d=0,_=l.list,C=_.length;d<C;d++){var S=_[d];S!==y&&(S._bounds=S._position=ie,S._boundsCache&&st._clearBoundsCache(S))}}},_getBounds:function(y,l,d){var _=1/0,C=-_,S=_,k=C,N=!1;d=d||{};for(var z=0,D=y.length;z<D;z++){var H=y[z];if(H._visible&&!H.isEmpty(!0)){var Z=H._getCachedBounds(l&&l.appended(H._matrix),d,!0),$=Z.rect;_=Math.min($.x,_),S=Math.min($.y,S),C=Math.max($.x+$.width,C),k=Math.max($.y+$.height,k),Z.nonscaling&&(N=!0)}}return{rect:isFinite(_)?new L(_,S,C-_,k-S):new L,nonscaling:N}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var y=this._decompose();return y?y.rotation:0},setRotation:function(y){var l=this.getRotation();if(null!=l&&null!=y){var d=this._decomposed;this.rotate(y-l),d&&(d.rotation=y,this._decomposed=d)}},getScaling:function(){var y=this._decompose(),l=y&&y.scaling;return new Ve(l?l.x:1,l?l.y:1,this,"setScaling")},setScaling:function(){var y=this.getScaling(),l=Le.read(arguments,0,{clone:!0,readNull:!0});if(y&&l&&!y.equals(l)){var d=this.getRotation(),_=this._decomposed,C=new Ce,S=Q.isZero;if(S(y.x)||S(y.y))C.translate(_.translation),d&&C.rotate(d),C.scale(l.x,l.y),this._matrix.set(C);else{var k=this.getPosition(!0);C.translate(k),d&&C.rotate(d),C.scale(l.x/y.x,l.y/y.y),d&&C.rotate(-d),C.translate(k.negate()),this.transform(C)}_&&(_.scaling=l,this._decomposed=_)}},getMatrix:function(){return this._matrix},setMatrix:function(){var y=this._matrix;y.set.apply(y,arguments)},getGlobalMatrix:function(y){var l=this._globalMatrix;if(l)for(var d=this._parent,_=[];d;){if(!d._globalMatrix){l=null;for(var C=0,S=_.length;C<S;C++)_[C]._globalMatrix=null;break}_.push(d),d=d._parent}return l||(l=this._globalMatrix=this._matrix.clone(),(d=this._parent)&&l.prepend(d.getGlobalMatrix(!0))),y?l:l.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(y){(this._applyMatrix=this._canApplyMatrix&&!!y)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(y,l){if(this._project!==y){this._project&&this._installEvents(!1),this._project=y;for(var d=this._children,_=0,C=d&&d.length;_<C;_++)d[_]._setProject(y);l=!0}l&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function y(l){y.base.call(this,l);for(var d=this._children,_=0,C=d&&d.length;_<C;_++)d[_]._installEvents(l)},getLayer:function(){for(var y=this;y=y._parent;)if(y instanceof ut)return y;return null},getParent:function(){return this._parent},setParent:function(y){return y.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(y){this.removeChildren(),this.addChildren(y)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var y=this._getOwner();return y&&y._children[this._index+1]||null},getPreviousSibling:function(){var y=this._getOwner();return y&&y._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(y){return y===this||y&&this._class===y._class&&this._style.equals(y._style)&&this._matrix.equals(y._matrix)&&this._locked===y._locked&&this._visible===y._visible&&this._blendMode===y._blendMode&&this._opacity===y._opacity&&this._clipMask===y._clipMask&&this._guide===y._guide&&this._equals(y)||!1},_equals:function(y){return q.equals(this._children,y._children)},clone:function(y){var l=new this.constructor(st.NO_INSERT),d=this._children,_=q.pick(y?y.insert:ie,y===ie||!0===y),C=q.pick(y?y.deep:ie,!0);d&&l.copyAttributes(this),(!d||C)&&l.copyContent(this),d||l.copyAttributes(this),_&&l.insertAbove(this);var S=this._name,k=this._parent;if(S&&k){d=k._children;for(var N=S,z=1;d[S];)S=N+" "+z++;S!==N&&l.setName(S)}return l},copyContent:function(y){for(var l=y._children,d=0,_=l&&l.length;d<_;d++)this.addChild(l[d].clone(!1),!0)},copyAttributes:function(y,l){this.setStyle(y._style);for(var d=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],_=0,C=d.length;_<C;_++){var S=d[_];y.hasOwnProperty(S)&&(this[S]=y[S])}l||this._matrix.set(y._matrix,!0),this.setApplyMatrix(y._applyMatrix),this.setPivot(y._pivot),this.setSelection(y._selection);var k=y._data,N=y._name;this._data=k?q.clone(k):null,N&&this.setName(N)},rasterize:function(y,l){var d,_,C;q.isPlainObject(y)?(d=y.resolution,_=y.insert,C=y.raster):(d=y,_=l),C||(C=new on(st.NO_INSERT));var S=this.getStrokeBounds(),k=(d||this.getView().getResolution())/72,N=S.getTopLeft().floor(),z=S.getBottomRight().ceil(),D=new Ae(z.subtract(N)),H=D.multiply(k);if(C.setSize(H,!0),!H.isZero()){var Z=C.getContext(!0),$=(new Ce).scale(k).translate(N.negate());Z.save(),$.applyToContext(Z),this.draw(Z,new q({matrices:[$]})),Z.restore()}return C._matrix.set((new Ce).translate(N.add(D.divide(2))).scale(1/k)),(_===ie||_)&&C.insertAbove(this),C},contains:function(){var y=this._matrix;return y.isInvertible()&&!!this._contains(y._inverseTransform(Le.read(arguments)))},_contains:function(y){var l=this._children;if(l){for(var d=l.length-1;d>=0;d--)if(l[d].contains(y))return!0;return!1}return y.isInside(this.getInternalBounds())},isInside:function(){return L.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new xt.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(y,l){return y instanceof st&&this._asPathItem().getIntersections(y._asPathItem(),null,l,!0).length>0}},new function(){function y(){var _=arguments;return this._hitTest(Le.read(_),Qt.getOptions(_))}function l(){var _=arguments,C=Le.read(_),S=Qt.getOptions(_),k=[];return this._hitTest(C,new q({all:k},S)),k}function d(_,C,S,k){var N=this._children;if(N)for(var z=N.length-1;z>=0;z--){var D=N[z],H=D!==k&&D._hitTest(_,C,S);if(H&&!C.all)return H}return null}return dt.inject({hitTest:y,hitTestAll:l,_hitTest:d}),{hitTest:y,hitTestAll:l,_hitTestChildren:d}},{_hitTest:function(y,l,d){if(this._locked||!this._visible||this._guide&&!l.guides||this.isEmpty())return null;var _=this._matrix,C=d?d.appended(_):this.getGlobalMatrix().prepend(this.getView()._matrix),S=Math.max(l.tolerance,1e-12),k=l._tolerancePadding=new Ae(xt._getStrokePadding(S,_._shiftless().invert()));if(!(y=_._inverseTransform(y))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(k.multiply(2))._containsPoint(y))return null;var H,Z,N=!(l.guides&&!this._guide||l.selected&&!this.isSelected()||l.type&&l.type!==q.hyphenate(this._class)||l.class&&!(this instanceof l.class)),z=l.match,D=this;function $(pe){return pe&&z&&!z(pe)&&(pe=null),pe&&l.all&&l.all.push(pe),pe}function R(pe,de){var Ee=de?H["get"+de]():D.getPosition();if(y.subtract(Ee).divide(k).length<=1)return new Qt(pe,D,{name:de?q.hyphenate(de):pe,point:Ee})}var Y=l.position,he=l.center,me=l.bounds;if(N&&this._parent&&(Y||he||me)){if((he||me)&&(H=this.getInternalBounds()),!(Z=Y&&R("position")||he&&R("center","Center"))&&me)for(var ve=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],ge=0;ge<8&&!Z;ge++)Z=R("bounds",ve[ge]);Z=$(Z)}return Z||(Z=this._hitTestChildren(y,l,C)||N&&$(this._hitTestSelf(y,l,C,this.getStrokeScaling()?null:C._shiftless().invert()))||null),Z&&Z.point&&(Z.point=_.transform(Z.point)),Z},_hitTestSelf:function(y,l){if(l.fill&&this.hasFill()&&this._contains(y))return new Qt("fill",this)},matches:function(y,l){var _=typeof y;if("object"===_){for(var C in y)if(y.hasOwnProperty(C)&&!this.matches(C,y[C]))return!1;return!0}if("function"===_)return y(this);if("match"===y)return l(this);var S=/^(empty|editable)$/.test(y)?this["is"+q.capitalize(y)]():"type"===y?q.hyphenate(this._class):this[y];if("class"===y){if("function"==typeof l)return this instanceof l;S=this._class}if("function"==typeof l)return!!l(S);if(l){if(l.test)return l.test(S);if(q.isPlainObject(l))return function d(k,N){for(var z in k)if(k.hasOwnProperty(z)){var D=k[z],H=N[z];if(q.isPlainObject(D)&&q.isPlainObject(H)){if(!d(D,H))return!1}else if(!q.equals(D,H))return!1}return!0}(l,S)}return q.equals(S,l)},getItems:function(y){return st._getItems(this,y,this._matrix)},getItem:function(y){return st._getItems(this,y,this._matrix,null,!0)[0]||null},statics:{_getItems:function y(l,d,_,C,S){if(!C){var k="object"==typeof d&&d,N=k&&k.overlapping,z=k&&k.inside,$=(D=N||z)&&L.read([D]);C={items:[],recursive:k&&!1!==k.recursive,inside:!!z,overlapping:!!N,rect:$,path:N&&new xt.Rectangle({rectangle:$,insert:!1})},k&&(d=q.filter({},d,{recursive:!0,inside:!0,overlapping:!0}))}var H=l._children,Z=C.items;_=($=C.rect)&&(_||new Ce);for(var R=0,Y=H&&H.length;R<Y;R++){var he=H[R],me=_&&_.appended(he._matrix),ve=!0;if($){var D=he.getBounds(me);if(!$.intersects(D))continue;$.contains(D)||C.overlapping&&(D.contains($)||C.path.intersects(he,me))||(ve=!1)}if(ve&&he.matches(d)&&(Z.push(he),S)||(!1!==C.recursive&&y(he,d,me,C,S),S&&Z.length>0))break}return Z}}},{importJSON:function(y){var l=q.importJSON(y,this);return l!==this?this.addChild(l):l},addChild:function(y){return this.insertChild(ie,y)},insertChild:function(y,l){var d=l?this.insertChildren(y,[l]):null;return d&&d[0]},addChildren:function(y){return this.insertChildren(this._children.length,y)},insertChildren:function(y,l){var d=this._children;if(d&&l&&l.length>0){for(var _={},C=(l=q.slice(l)).length-1;C>=0;C--){var k=(S=l[C])&&S._id;!S||_[k]?l.splice(C,1):(S._remove(!1,!0),_[k]=!0)}q.splice(d,l,y,0);for(var N=this._project,z=N._changes,D=(C=0,l.length);C<D;C++){var S,H=(S=l[C])._name;S._parent=this,S._setProject(N,!0),H&&S.setName(H),z&&S._changed(5)}this._changed(11)}else l=null;return l},_insertItem:"#insertChild",_insertAt:function(y,l){var d=y&&y._getOwner(),_=y!==this&&d?this:null;return _&&(_._remove(!1,!0),d._insertItem(y._index+l,_)),_},insertAbove:function(y){return this._insertAt(y,1)},insertBelow:function(y){return this._insertAt(y,0)},sendToBack:function(){var y=this._getOwner();return y?y._insertItem(0,this):null},bringToFront:function(){var y=this._getOwner();return y?y._insertItem(ie,this):null},appendTop:"#addChild",appendBottom:function(y){return this.insertChild(0,y)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(y){return y._insertItem(ie,this)},copyTo:function(y){return this.clone(!1).addTo(y)},reduce:function(y){var l=this._children;if(l&&1===l.length){var d=l[0].reduce(y);return this._parent?(d.insertAbove(this),this.remove()):d.remove(),d}return this},_removeNamed:function(){var y=this._getOwner();if(y){var l=y._children,d=y._namedChildren,_=this._name,C=d[_],S=C?C.indexOf(this):-1;-1!==S&&(l[_]==this&&delete l[_],C.splice(S,1),C.length?l[_]=C[0]:delete d[_])}},_remove:function(y,l){var d=this._getOwner(),_=this._project,C=this._index;return this._style&&this._style._dispose(),!!d&&(this._name&&this._removeNamed(),null!=C&&(_._activeLayer===this&&(_._activeLayer=this.getNextSibling()||this.getPreviousSibling()),q.splice(d._children,null,C,1)),this._installEvents(!1),y&&_._changes&&this._changed(5),l&&d._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(y){var l=y&&y.insertBelow(this);return l&&this.remove(),l},removeChildren:function(y,l){if(!this._children)return null;y=y||0,l=q.pick(l,this._children.length);for(var d=q.splice(this._children,null,y,l-y),_=d.length-1;_>=0;_--)d[_]._remove(!0,!1);return d.length>0&&this._changed(11),d},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var y=0,l=this._children.length;y<l;y++)this._children[y]._index=y;this._changed(11)}},isEmpty:function(y){var l=this._children,d=l?l.length:0;if(y){for(var _=0;_<d;_++)if(!l[_].isEmpty(y))return!1;return!0}return!d},isEditable:function(){for(var y=this;y;){if(!y._visible||y._locked)return!1;y=y._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(y){function l(k){var N=[];do{N.unshift(k)}while(k=k._parent);return N}for(var d=l(this),_=l(y),C=0,S=Math.min(d.length,_.length);C<S;C++)if(d[C]!=_[C])return d[C]._index<_[C]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(y){return-1===this._getOrder(y)},isBelow:function(y){return 1===this._getOrder(y)},isParent:function(y){return this._parent===y},isChild:function(y){return y&&y._parent===this},isDescendant:function(y){for(var l=this;l=l._parent;)if(l===y)return!0;return!1},isAncestor:function(y){return!!y&&y.isDescendant(this)},isSibling:function(y){return this._parent===y._parent},isGroupedWith:function(y){for(var l=this._parent;l;){if(l._parent&&/^(Group|Layer|CompoundPath)$/.test(l._class)&&y.isDescendant(l))return!0;l=l._parent}return!1}},q.each(["rotate","scale","shear","skew"],function(y){var l="rotate"===y;this[y]=function(){var d=arguments,_=(l?q:Le).read(d),C=Le.read(d,0,{readNull:!0});return this.transform((new Ce)[y](_,C||this.getPosition(!0)))}},{translate:function(){var y=new Ce;return this.transform(y.translate.apply(y,arguments))},transform:function(y,l,d){var _=this._matrix,C=y&&!y.isIdentity(),S=d&&this._canApplyMatrix||this._applyMatrix&&(C||!_.isIdentity()||l&&this._children);if(!C&&!S)return this;if(C){!y.isInvertible()&&_.isInvertible()&&(_._backup=_.getValues()),_.prepend(y,!0);var k=this._style,N=k.getFillColor(!0),z=k.getStrokeColor(!0);N&&N.transform(y),z&&z.transform(y)}if(S&&(S=this._transformContent(_,l,d))){var D=this._pivot;D&&_._transformPoint(D,D,!0),_.reset(!0),d&&this._canApplyMatrix&&(this._applyMatrix=!0)}var H=this._bounds,Z=this._position;(C||S)&&this._changed(25);var $=C&&H&&y.decompose();if($&&$.skewing.isZero()&&$.rotation%90==0){for(var R in H){var Y=H[R];if(Y.nonscaling)delete H[R];else if(S||!Y.internal){var he=Y.rect;y._transformBounds(he,he)}}this._bounds=H;var me=H[this._getBoundsCacheKey(this._boundsOptions||{})];me&&(this._position=this._getPositionFromBounds(me.rect))}else C&&Z&&this._pivot&&(this._position=y._transformPoint(Z,Z));return this},_transformContent:function(y,l,d){var _=this._children;if(_){for(var C=0,S=_.length;C<S;C++)_[C].transform(y,l,d);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(Le.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(Le.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(Le.read(arguments))},localToParent:function(){return this._matrix._transformPoint(Le.read(arguments))},fitBounds:function(y,l){y=L.read(arguments);var d=this.getBounds(),_=d.height/d.width,C=y.height/y.width,S=(l?_>C:_<C)?y.width/d.width:y.height/d.height,k=new L(new Le,new Ae(d.width*S,d.height*S));k.setCenter(y.getCenter()),this.setBounds(k)}}),{_setStyles:function(y,l,d){var _=this._style,C=this._matrix;if(_.hasFill()&&(y.fillStyle=_.getFillColor().toCanvasStyle(y,C)),_.hasStroke()){y.strokeStyle=_.getStrokeColor().toCanvasStyle(y,C),y.lineWidth=_.getStrokeWidth();var S=_.getStrokeJoin(),k=_.getStrokeCap(),N=_.getMiterLimit();if(S&&(y.lineJoin=S),k&&(y.lineCap=k),N&&(y.miterLimit=N),fr.support.nativeDash){var z=_.getDashArray(),D=_.getDashOffset();z&&z.length&&("setLineDash"in y?(y.setLineDash(z),y.lineDashOffset=D):(y.mozDash=z,y.mozDashOffset=D))}}if(_.hasShadow()){var H=l.pixelRatio||1,Z=d._shiftless().prepend((new Ce).scale(H,H)),$=Z.transform(new Le(_.getShadowBlur(),0)),R=Z.transform(this.getShadowOffset());y.shadowColor=_.getShadowColor().toCanvasStyle(y),y.shadowBlur=$.getLength(),y.shadowOffsetX=R.x,y.shadowOffsetY=R.y}},draw:function(y,l,d){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var C=l.matrices,S=l.viewMatrix,k=this._matrix,N=C[C.length-1].appended(k);if(N.isInvertible()){S=S?S.appended(N):N,C.push(N),l.updateMatrix&&(this._globalMatrix=N);var Y,he,me,z=this._blendMode,D=Q.clamp(this._opacity,0,1),H="normal"===z,Z=Hr.nativeModes[z],$=H&&1===D||l.dontStart||l.clip||(Z||H&&D<1)&&this._canComposite(),R=l.pixelRatio||1;if(!$){var ve=this.getStrokeBounds(S);if(!ve.width||!ve.height)return void C.pop();me=l.offset,he=l.offset=ve.getTopLeft().floor(),Y=y,y=vs.getContext(ve.getSize().ceil().add(1).multiply(R)),1!==R&&y.scale(R,R)}y.save();var ge=d?d.appended(k):this._canScaleStroke&&!this.getStrokeScaling(!0)&&S,pe=!$&&l.clipItem,de=!ge||pe;if($?(y.globalAlpha=D,Z&&(y.globalCompositeOperation=z)):de&&y.translate(-he.x,-he.y),de&&($?k:S).applyToContext(y),pe&&l.clipItem.draw(y,l.extend({clip:!0})),ge){y.setTransform(R,0,0,R,0,0);var Ee=l.offset;Ee&&y.translate(-Ee.x,-Ee.y)}this._draw(y,l,S,ge),y.restore(),C.pop(),l.clip&&!l.dontFinish&&y.clip(this.getFillRule()),$||(Hr.process(z,y,Y,D,he.subtract(me).multiply(R)),vs.release(y),l.offset=me)}}},_isUpdated:function(y){var l=this._parent;if(l instanceof Jt)return l._isUpdated(y);var d=this._updateVersion===y;return!d&&l&&l._visible&&l._isUpdated(y)&&(this._updateVersion=y,d=!0),d},_drawSelection:function(y,l,d,_,C){var S=this._selection,k=1&S,N=2&S||k&&this._selectBounds,z=4&S;if(this._drawSelected||(k=!1),(k||N||z)&&this._isUpdated(C)){var D,H=this.getSelectedColor(!0)||(D=this.getLayer())&&D.getSelectedColor(!0),Z=l.appended(this.getGlobalMatrix(!0)),$=d/2;if(y.strokeStyle=y.fillStyle=H?H.toCanvasStyle(y):"#009dec",k&&this._drawSelected(y,Z,_),z){var R=this.getPosition(!0),Y=this._parent,he=Y?Y.localToGlobal(R):R,me=he.x,ve=he.y;y.beginPath(),y.arc(me,ve,$,0,2*Math.PI,!0),y.stroke();for(var ge=[[0,-1],[1,0],[0,1],[-1,0]],pe=$,de=d+1,Ee=0;Ee<4;Ee++){var ke=ge[Ee],Xe=ke[0],je=ke[1];y.moveTo(me+Xe*pe,ve+je*pe),y.lineTo(me+Xe*de,ve+je*de),y.stroke()}}if(N){var nt=Z._transformCorners(this.getInternalBounds());for(y.beginPath(),Ee=0;Ee<8;Ee++)y[Ee?"lineTo":"moveTo"](nt[Ee],nt[++Ee]);for(y.closePath(),y.stroke(),Ee=0;Ee<8;Ee++)y.fillRect(nt[Ee]-$,nt[++Ee]-$,d,d)}}},_canComposite:function(){return!1}},q.each(["down","drag","up","move"],function(y){this["removeOn"+q.capitalize(y)]=function(){var l={};return l[y]=!0,this.removeOn(l)}},{removeOn:function(y){for(var l in y)if(y[l]){var d="mouse"+l,_=this._project,C=_._removeSets=_._removeSets||{};C[d]=C[d]||{},C[d][this._id]=this}return this}}),{tween:function(y,l,d){d||(d=l,l=y,y=null,d||(d=l,l=null));var S=null!=d&&("number"==typeof d?d:d.duration),k=new Di(this,y,l,S,d&&d.easing,d&&d.start);return S&&this.on("frame",function N(z){k._handleFrame(1e3*z.time),k.running||this.off("frame",N)}),k},tweenTo:function(y,l){return this.tween(null,y,l)},tweenFrom:function(y,l){return this.tween(y,null,l)}}),bt=st.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(l){this._children=[],this._namedChildren={},this._initialize(l)||this.addChildren(Array.isArray(l)?l:arguments)},_changed:function y(l){y.base.call(this,l),2050&l&&(this._clipItem=ie)},_getClipItem:function(){var y=this._clipItem;if(y===ie){y=null;for(var l=this._children,d=0,_=l.length;d<_;d++)if(l[d]._clipMask){y=l[d];break}this._clipItem=y}return y},isClipped:function(){return!!this._getClipItem()},setClipped:function(y){var l=this.getFirstChild();l&&l.setClipMask(y)},_getBounds:function y(l,d){var _=this._getClipItem();return _?_._getCachedBounds(_._matrix.prepended(l),q.set({},d,{stroke:!1})):y.base.call(this,l,d)},_hitTestChildren:function y(l,d,_){var C=this._getClipItem();return(!C||C.contains(l))&&y.base.call(this,l,d,_,C)},_draw:function(y,l){var d=l.clip,_=!d&&this._getClipItem();l=l.extend({clipItem:_,clip:!1}),d?(y.beginPath(),l.dontStart=l.dontFinish=!0):_&&_.draw(y,l.extend({clip:!0}));for(var C=this._children,S=0,k=C.length;S<k;S++){var N=C[S];N!==_&&N.draw(y,l)}}}),ut=bt.extend({_class:"Layer",initialize:function(){bt.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function y(){return this._parent?y.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Vt=st.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(l,d){this._initialize(l,d)},_equals:function(y){return this._type===y._type&&this._size.equals(y._size)&&q.equals(this._radius,y._radius)},copyContent:function(y){this.setType(y._type),this.setSize(y._size),this.setRadius(y._radius)},getType:function(){return this._type},setType:function(y){this._type=y},getShape:"#getType",setShape:"#setType",getSize:function(){var y=this._size;return new Se(y.width,y.height,this,"setSize")},setSize:function(){var y=Ae.read(arguments);if(this._size){if(!this._size.equals(y)){var l=this._type,d=y.width,_=y.height;"rectangle"===l?this._radius.set(Ae.min(this._radius,y.divide(2).abs())):"circle"===l?(d=_=(d+_)/2,this._radius=d/2):"ellipse"===l&&this._radius._set(d/2,_/2),this._size._set(d,_),this._changed(9)}}else this._size=y.clone()},getRadius:function(){var y=this._radius;return"circle"===this._type?y:new Se(y.width,y.height,this,"setRadius")},setRadius:function(y){var l=this._type;if("circle"===l){if(y===this._radius)return;var d=2*y;this._radius=y,this._size._set(d,d)}else if(y=Ae.read(arguments),this._radius){if(this._radius.equals(y))return;this._radius.set(y),"rectangle"===l?(d=Ae.max(this._size,y.multiply(2)),this._size.set(d)):"ellipse"===l&&this._size._set(2*y.width,2*y.height)}else this._radius=y.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(y){var l=new(xt[q.capitalize(this._type)])({center:new Le,size:this._size,radius:this._radius,insert:!1});return l.copyAttributes(this),fr.settings.applyMatrix&&l.setApplyMatrix(!0),(y===ie||y)&&l.insertAbove(this),l},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(y,l,d,_){var C=this._style,S=C.hasFill(),k=C.hasStroke(),N=l.dontFinish||l.clip,z=!_;if(S||k||N){var D=this._type,H=this._radius,Z="circle"===D;if(l.dontStart||y.beginPath(),z&&Z)y.arc(0,0,H,0,2*Math.PI,!0);else{var $=Z?H:H.width,R=Z?H:H.height,Y=this._size,he=Y.width,me=Y.height;if(z&&"rectangle"===D&&0===$&&0===R)y.rect(-he/2,-me/2,he,me);else{var ve=he/2,ge=me/2,pe=.44771525016920644,de=$*pe,Ee=R*pe,ke=[-ve,-ge+R,-ve,-ge+Ee,-ve+de,-ge,-ve+$,-ge,ve-$,-ge,ve-de,-ge,ve,-ge+Ee,ve,-ge+R,ve,ge-R,ve,ge-Ee,ve-de,ge,ve-$,ge,-ve+$,ge,-ve+de,ge,-ve,ge-Ee,-ve,ge-R];_&&_.transform(ke,ke,32),y.moveTo(ke[0],ke[1]),y.bezierCurveTo(ke[2],ke[3],ke[4],ke[5],ke[6],ke[7]),ve!==$&&y.lineTo(ke[8],ke[9]),y.bezierCurveTo(ke[10],ke[11],ke[12],ke[13],ke[14],ke[15]),ge!==R&&y.lineTo(ke[16],ke[17]),y.bezierCurveTo(ke[18],ke[19],ke[20],ke[21],ke[22],ke[23]),ve!==$&&y.lineTo(ke[24],ke[25]),y.bezierCurveTo(ke[26],ke[27],ke[28],ke[29],ke[30],ke[31])}}y.closePath()}!N&&(S||k)&&(this._setStyles(y,l,d),S&&(y.fill(C.getFillRule()),y.shadowColor="rgba(0,0,0,0)"),k&&y.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(y,l){var d=new L(this._size).setCenter(0,0),_=this._style,C=l.stroke&&_.hasStroke()&&_.getStrokeWidth();return y&&(d=y._transformBounds(d)),C?d.expand(xt._getStrokePadding(C,this._getStrokeMatrix(y,l))):d}},new function(){function y(d,_,C){var S=d._radius;if(!S.isZero())for(var k=d._size.divide(2),N=1;N<=4;N++){var z=new Le(N>1&&N<4?-1:1,N>2?-1:1),D=z.multiply(k),H=D.subtract(z.multiply(S));if(new L(C?D.add(z.multiply(C)):D,H).contains(_))return{point:H,quadrant:N}}}function l(d,_,C,S){var k=d.divide(_);return(!S||k.isInQuadrant(S))&&k.subtract(k.normalize()).multiply(_).divide(C).length<=1}return{_contains:function d(_){if("rectangle"===this._type){var C=y(this,_);return C?_.subtract(C.point).divide(this._radius).getLength()<=1:d.base.call(this,_)}return _.divide(this.size).getLength()<=.5},_hitTestSelf:function d(_,C,S,k){var N=!1,z=this._style,D=C.stroke&&z.hasStroke(),H=C.fill&&z.hasFill();if(D||H){var Z=this._type,$=this._radius,R=D?z.getStrokeWidth()/2:0,Y=C._tolerancePadding.add(xt._getStrokePadding(R,!z.getStrokeScaling()&&k));if("rectangle"===Z){var he=Y.multiply(2),me=y(this,_,he);if(me)N=l(_.subtract(me.point),$,Y,me.quadrant);else{var ve=new L(this._size).setCenter(0,0),ge=ve.expand(he),pe=ve.expand(he.negate());N=ge._containsPoint(_)&&!pe._containsPoint(_)}}else N=l(_,$,Y)}return N?new Qt(D?"stroke":"fill",this):d.base.apply(this,arguments)}}},{statics:new function(){function y(l,d,_,C,S){var k=q.create(Vt.prototype);return k._type=l,k._size=_,k._radius=C,k._initialize(q.getNamed(S),d),k}return{Circle:function(){var l=arguments,d=Le.readNamed(l,"center"),_=q.readNamed(l,"radius");return y("circle",d,new Ae(2*_),_,l)},Rectangle:function(){var l=arguments,d=L.readNamed(l,"rectangle"),_=Ae.min(Ae.readNamed(l,"radius"),d.getSize(!0).divide(2));return y("rectangle",d.getCenter(!0),d.getSize(!0),_,l)},Ellipse:function(){var l=arguments,d=Vt._readEllipse(l),_=d.radius;return y("ellipse",d.center,_.multiply(2),_,l)},_readEllipse:function(l){var d,_;if(q.hasNamed(l,"radius"))d=Le.readNamed(l,"center"),_=Ae.readNamed(l,"radius");else{var C=L.readNamed(l,"rectangle");d=C.getCenter(!0),_=C.getSize(!0).divide(2)}return{center:d,radius:_}}}}}),on=st.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(l,d){if(!this._initialize(l,d!==ie&&Le.read(arguments))){var _,C=typeof l,S="string"===C?K.getElementById(l):"object"===C?l:null;if(S&&S!==st.NO_INSERT)if(S.getContext||null!=S.naturalHeight)_=S;else if(S){var k=Ae.read(arguments);k.isZero()||(_=vs.getCanvas(k))}_?this.setImage(_):this.setSource(l)}this._size||(this._size=new Ae,this._loaded=!1)},_equals:function(y){return this.getSource()===y.getSource()},copyContent:function(y){var l=y._image,d=y._canvas;if(l)this._setImage(l);else if(d){var _=vs.getCanvas(y._size);_.getContext("2d").drawImage(d,0,0),this._setImage(_)}this._crossOrigin=y._crossOrigin},getSize:function(){var y=this._size;return new Se(y?y.width:0,y?y.height:0,this,"setSize")},setSize:function(y,l){var d=Ae.read(arguments);if(d.equals(this._size))l&&this.clear();else if(d.width>0&&d.height>0){var _=!l&&this.getElement();this._setImage(vs.getCanvas(d)),_&&this.getContext(!0).drawImage(_,0,0,d.width,d.height)}else this._canvas&&vs.release(this._canvas),this._size=d.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(y){this.setSize(y,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(y){this.setSize(this.getWidth(),y)},getLoaded:function(){return this._loaded},isEmpty:function(){var y=this._size;return!y||0===y.width&&0===y.height},getResolution:function(){var y=this._matrix,l=new Le(0,0).transform(y),d=new Le(1,0).transform(y).subtract(l),_=new Le(0,1).transform(y).subtract(l);return new Ae(72/d.getLength(),72/_.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(y){var l=this;function d(_){var C=l.getView(),S=_&&_.type||"load";C&&l.responds(S)&&(fr=C._scope,l.emit(S,new It(_)))}this._setImage(y),this._loaded?setTimeout(d,0):y&&Gt.add(y,{load:function(_){l._setImage(y),d(_)},error:d})},_setImage:function(y){this._canvas&&vs.release(this._canvas),y&&y.getContext?(this._image=null,this._canvas=y,this._loaded=!0):(this._image=y,this._canvas=null,this._loaded=!!(y&&y.src&&y.complete)),this._size=new Ae(y?y.naturalWidth||y.width:0,y?y.naturalHeight||y.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var y=vs.getContext(this._size);try{this._image&&y.drawImage(this._image,0,0),this._canvas=y.canvas}catch{vs.release(y)}}return this._canvas},setCanvas:"#setImage",getContext:function(y){return this._context||(this._context=this.getCanvas().getContext("2d")),y&&(this._image=null,this._changed(1025)),this._context},setContext:function(y){this._context=y},getSource:function(){var y=this._image;return y&&y.src||this.toDataURL()},setSource:function(y){var l=new re.Image,d=this._crossOrigin;d&&(l.crossOrigin=d),y&&(l.src=y),this.setImage(l)},getCrossOrigin:function(){var y=this._image;return y&&y.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(y){this._crossOrigin=y;var l=this._image;l&&(l.crossOrigin=y)},getSmoothing:function(){return this._smoothing},setSmoothing:function(y){this._smoothing="string"==typeof y?y:y?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var y=L.read(arguments),l=vs.getContext(y.getSize());return l.drawImage(this.getCanvas(),y.x,y.y,y.width,y.height,0,0,y.width,y.height),l.canvas},getSubRaster:function(){var y=L.read(arguments),l=new on(st.NO_INSERT);return l._setImage(this.getSubCanvas(y)),l.translate(y.getCenter().subtract(this.getSize().divide(2))),l._matrix.prepend(this._matrix),l.insertAbove(this),l},toDataURL:function(){var y=this._image,l=y&&y.src;if(/^data:/.test(l))return l;var d=this.getCanvas();return d?d.toDataURL.apply(d,arguments):null},drawImage:function(y){var l=Le.read(arguments,1);this.getContext(!0).drawImage(y,l.x,l.y)},getAverageColor:function(y){var l,d;if(y?y instanceof Pn?(d=y,l=y.getBounds()):"object"==typeof y&&("width"in y?l=new L(y):"x"in y&&(l=new L(y.x-.5,y.y-.5,1,1))):l=this.getBounds(),!l)return null;var C=Math.min(l.width,32),S=Math.min(l.height,32),k=on._sampleContext;k?k.clearRect(0,0,33,33):k=on._sampleContext=vs.getContext(new Ae(32)),k.save();var N=(new Ce).scale(C/l.width,S/l.height).translate(-l.x,-l.y);N.applyToContext(k),d&&d.draw(k,new q({clip:!0,matrices:[N]})),this._matrix.applyToContext(k);var z=this.getElement(),D=this._size;z&&k.drawImage(z,-D.width/2,-D.height/2),k.restore();for(var H=k.getImageData(.5,.5,Math.ceil(C),Math.ceil(S)).data,Z=[0,0,0],$=0,R=0,Y=H.length;R<Y;R+=4){var he=H[R+3];$+=he,Z[0]+=H[R]*(he/=255),Z[1]+=H[R+1]*he,Z[2]+=H[R+2]*he}for(R=0;R<3;R++)Z[R]/=$;return $?Oe.read(Z):null},getPixel:function(){var y=Le.read(arguments),l=this.getContext().getImageData(y.x,y.y,1,1).data;return new Oe("rgb",[l[0]/255,l[1]/255,l[2]/255],l[3]/255)},setPixel:function(){var y=arguments,l=Le.read(y),d=Oe.read(y),_=d._convert("rgb"),C=d._alpha,S=this.getContext(!0),k=S.createImageData(1,1),N=k.data;N[0]=255*_[0],N[1]=255*_[1],N[2]=255*_[2],N[3]=null!=C?255*C:255,S.putImageData(k,l.x,l.y)},clear:function(){var y=this._size;this.getContext(!0).clearRect(0,0,y.width+1,y.height+1)},createImageData:function(){var y=Ae.read(arguments);return this.getContext().createImageData(y.width,y.height)},getImageData:function(){var y=L.read(arguments);return y.isEmpty()&&(y=new L(this._size)),this.getContext().getImageData(y.x,y.y,y.width,y.height)},putImageData:function(y){var l=Le.read(arguments,1);this.getContext(!0).putImageData(y,l.x,l.y)},setImageData:function(y){this.setSize(y),this.getContext(!0).putImageData(y,0,0)},_getBounds:function(y,l){var d=new L(this._size).setCenter(0,0);return y?y._transformBounds(d):d},_hitTestSelf:function(y){if(this._contains(y)){var l=this;return new Qt("pixel",l,{offset:y.add(l._size.divide(2)).round(),color:{get:function(){return l.getPixel(this.offset)}}})}},_draw:function(y,l,d){var _=this.getElement();if(_&&_.width>0&&_.height>0){y.globalAlpha=Q.clamp(this._opacity,0,1),this._setStyles(y,l,d);var C=this._smoothing,S="off"===C;di.setPrefixed(y,S?"imageSmoothingEnabled":"imageSmoothingQuality",!S&&C),y.drawImage(_,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Ct=st.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(l,d){this._initialize(l,d!==ie&&Le.read(arguments,1))||this.setDefinition(l instanceof rn?l:new rn(l))},_equals:function(y){return this._definition===y._definition},copyContent:function(y){this.setDefinition(y._definition)},getDefinition:function(){return this._definition},setDefinition:function(y){this._definition=y,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(y,l){var d=this._definition._item;return d._getCachedBounds(d._matrix.prepended(y),l)},_hitTestSelf:function(y,l,d){var _=l.extend({all:!1}),C=this._definition._item._hitTest(y,_,d);return C&&(C.item=this),C},_draw:function(y,l){this._definition._item.draw(y,l)}}),rn=q.extend({_class:"SymbolDefinition",initialize:function(l,d){this._id=Re.get(),this.project=fr.project,l&&this.setItem(l,d)},_serialize:function(y,l){return l.add(this,function(){return q.serialize([this._class,this._item],y,!1,l)})},_changed:function(y){8&y&&st._clearBoundsCache(this),1&y&&this.project._changed(y)},getItem:function(){return this._item},setItem:function(y,l){y._symbol&&(y=y.clone()),this._item&&(this._item._symbol=null),this._item=y,y.remove(),y.setSelected(!1),l||y.setPosition(new Le),y._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(y){return new Ct(this,y)},clone:function(){return new rn(this._item.clone(!1))},equals:function(y){return y===this||y&&this._item.equals(y._item)||!1}}),Qt=q.extend({_class:"HitResult",initialize:function(l,d,_){this.type=l,this.item=d,_&&this.inject(_)},statics:{getOptions:function(y){var l=y&&q.read(y);return new q({type:null,tolerance:fr.settings.hitTolerance,fill:!l,stroke:!l,segments:!l,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},l)}}}),Ht=q.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(l,d,_,C,S,k){var z,D,H,Z,N=arguments.length;N>0&&(null==l||"object"==typeof l?1===N&&l&&"point"in l?(z=l.point,D=l.handleIn,H=l.handleOut,Z=l.selection):(z=l,D=d,H=_,Z=C):(z=[l,d],D=_!==ie?[_,C]:null,H=S!==ie?[S,k]:null)),new Qn(z,this,"_point"),new Qn(D,this,"_handleIn"),new Qn(H,this,"_handleOut"),Z&&this.setSelection(Z)},_serialize:function(y,l){var d=this._point,_=this._selection,C=_||this.hasHandles()?[d,this._handleIn,this._handleOut]:d;return _&&C.push(_),q.serialize(C,y,!0,l)},_changed:function(y){var l=this._path;if(l){var C,d=l._curves,_=this._index;d&&((!y||y===this._point||y===this._handleIn)&&(C=_>0?d[_-1]:l._closed?d[d.length-1]:null)&&C._changed(),(!y||y===this._point||y===this._handleOut)&&(C=d[_])&&C._changed()),l._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(Le.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(Le.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(Le.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var y=this._handleIn,l=this._handleOut;return!y.isZero()&&!l.isZero()&&y.isCollinear(l)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(y){var l=this._selection,d=this._path;this._selection=y=y||0,d&&y!==l&&(d._updateSelection(this,l,y),d._changed(257))},_changeSelection:function(y,l){var d=this._selection;this.setSelection(l?d|y:d&~y)},isSelected:function(){return!!(7&this._selection)},setSelected:function(y){this._changeSelection(7,y)},getIndex:function(){return this._index!==ie?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var y=this._path,l=this._index;return y?(l>0&&!y._closed&&l===y._segments.length-1&&l--,y.getCurves()[l]||null):null},getLocation:function(){var y=this.getCurve();return y?new Sn(y,this===y._segment1?0:1):null},getNext:function(){var y=this._path&&this._path._segments;return y&&(y[this._index+1]||this._path._closed&&y[0])||null},smooth:function(y,l,d){var _=y||{},C=_.type,S=_.factor,k=this.getPrevious(),N=this.getNext(),z=(k||this)._point,D=this._point,H=(N||this)._point,Z=z.getDistance(D),$=D.getDistance(H);if(C&&"catmull-rom"!==C){if("geometric"!==C)throw new Error("Smoothing method '"+C+"' not supported.");if(k&&N){var de=z.subtract(H),Ee=S===ie?.4:S,ke=Ee*Z/(Z+$);l||this.setHandleIn(de.multiply(ke)),d||this.setHandleOut(de.multiply(ke-Ee))}}else{var pe,R=S===ie?.5:S,Y=Math.pow(Z,R),he=Y*Y,me=Math.pow($,R),ve=me*me;if(!l&&k){var ge=2*ve+3*me*Y+he;this.setHandleIn(0!=(pe=3*me*(me+Y))?new Le((ve*z._x+ge*D._x-he*H._x)/pe-D._x,(ve*z._y+ge*D._y-he*H._y)/pe-D._y):new Le)}if(!d&&N)ge=2*he+3*Y*me+ve,this.setHandleOut(0!=(pe=3*Y*(Y+me))?new Le((he*H._x+ge*D._x-ve*z._x)/pe-D._x,(he*H._y+ge*D._y-ve*z._y)/pe-D._y):new Le)}},getPrevious:function(){var y=this._path&&this._path._segments;return y&&(y[this._index-1]||this._path._closed&&y[y.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var y=this._path;return y&&this._index===y._segments.length-1||!1},reverse:function(){var y=this._handleIn,l=this._handleOut,d=y.clone();y.set(l),l.set(d)},reversed:function(){return new Ht(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new Ht(this._point,this._handleIn,this._handleOut)},equals:function(y){return y===this||y&&this._class===y._class&&this._point.equals(y._point)&&this._handleIn.equals(y._handleIn)&&this._handleOut.equals(y._handleOut)||!1},toString:function(){var y=["point: "+this._point];return this._handleIn.isZero()||y.push("handleIn: "+this._handleIn),this._handleOut.isZero()||y.push("handleOut: "+this._handleOut),"{ "+y.join(", ")+" }"},transform:function(y){this._transformCoordinates(y,new Array(6),!0),this._changed()},interpolate:function(y,l,d){var _=1-d,C=d,S=y._point,k=l._point,N=y._handleIn,z=l._handleIn,D=l._handleOut,H=y._handleOut;this._point._set(_*S._x+C*k._x,_*S._y+C*k._y,!0),this._handleIn._set(_*N._x+C*z._x,_*N._y+C*z._y,!0),this._handleOut._set(_*H._x+C*D._x,_*H._y+C*D._y,!0),this._changed()},_transformCoordinates:function(y,l,d){var _=this._point,C=d&&this._handleIn.isZero()?null:this._handleIn,S=d&&this._handleOut.isZero()?null:this._handleOut,k=_._x,N=_._y,z=2;return l[0]=k,l[1]=N,C&&(l[z++]=C._x+k,l[z++]=C._y+N),S&&(l[z++]=S._x+k,l[z++]=S._y+N),y&&(y._transformCoordinates(l,l,z/2),k=l[0],N=l[1],d?(_._x=k,_._y=N,z=2,C&&(C._x=l[z++]-k,C._y=l[z++]-N),S&&(S._x=l[z++]-k,S._y=l[z++]-N)):(C||(l[z++]=k,l[z++]=N),S||(l[z++]=k,l[z++]=N))),l}}),Qn=Le.extend({initialize:function(l,d,_){var C,S,k;if(l)if((C=l[0])!==ie)S=l[1];else{var N=l;(C=N.x)===ie&&(C=(N=Le.read(arguments)).x),S=N.y,k=N.selected}else C=S=0;this._x=C,this._y=S,this._owner=d,d[_]=this,k&&this.setSelected(!0)},_set:function(y,l){return this._x=y,this._y=l,this._owner._changed(this),this},getX:function(){return this._x},setX:function(y){this._x=y,this._owner._changed(this)},getY:function(){return this._y},setY:function(y){this._y=y,this._owner._changed(this)},isZero:function(){var y=Q.isZero;return y(this._x)&&y(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(y){this._owner._changeSelection(this._getSelection(),y)},_getSelection:function(){var y=this._owner;return this===y._point?1:this===y._handleIn?2:this===y._handleOut?4:0}}),en=q.extend({_class:"Curve",beans:!0,initialize:function(l,d,_,C,S,k,N,z){var H,Z,$,R,Y,he,D=arguments.length;3===D?(this._path=l,H=d,Z=_):D?1===D?"segment1"in l?(H=new Ht(l.segment1),Z=new Ht(l.segment2)):"point1"in l?($=l.point1,Y=l.handle1,he=l.handle2,R=l.point2):Array.isArray(l)&&($=[l[0],l[1]],R=[l[6],l[7]],Y=[l[2]-l[0],l[3]-l[1]],he=[l[4]-l[6],l[5]-l[7]]):2===D?(H=new Ht(l),Z=new Ht(d)):4===D?($=l,Y=d,he=_,R=C):8===D&&($=[l,d],R=[N,z],Y=[_-l,C-d],he=[S-N,k-z]):(H=new Ht,Z=new Ht),this._segment1=H||new Ht($,null,Y),this._segment2=Z||new Ht(R,he,null)},_serialize:function(y,l){return q.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],y,!0,l)},_changed:function(){this._length=this._bounds=ie},clone:function(){return new en(this._segment1,this._segment2)},toString:function(){var y=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||y.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||y.push("handle2: "+this._segment2._handleIn),y.push("point2: "+this._segment2._point),"{ "+y.join(", ")+" }"},classify:function(){return en.classify(this.getValues())},remove:function(){var y=!1;if(this._path){var l=this._segment2,d=l._handleOut;(y=l.remove())&&this._segment1._handleOut.set(d)}return y},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(Le.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(Le.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(Le.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(Le.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var y=this._path&&this._path._curves;return y&&(y[this._segment1._index+1]||this._path._closed&&y[0])||null},getPrevious:function(){var y=this._path&&this._path._curves;return y&&(y[this._segment1._index-1]||this._path._closed&&y[y.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var y=this._path;return y&&this._segment1._index===y._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(y){this.getPoint1().setSelected(y),this.getHandle1().setSelected(y),this.getHandle2().setSelected(y),this.getPoint2().setSelected(y)},getValues:function(y){return en.getValues(this._segment1,this._segment2,y)},getPoints:function(){for(var y=this.getValues(),l=[],d=0;d<8;d+=2)l.push(new Le(y[d],y[d+1]));return l}},{getLength:function(){return null==this._length&&(this._length=en.getLength(this.getValues(),0,1)),this._length},getArea:function(){return en.getArea(this.getValues())},getLine:function(){return new ze(this._segment1._point,this._segment2._point)},getPart:function(y,l){return new en(en.getPart(this.getValues(),y,l))},getPartLength:function(y,l){return en.getLength(this.getValues(),y,l)},divideAt:function(y){return this.divideAtTime(y&&y.curve===this?y.time:this.getTimeAt(y))},divideAtTime:function(y,l){var C=null;if(y>=1e-8&&y<=.99999999){var S=en.subdivide(this.getValues(),y),k=S[0],N=S[1],z=l||this.hasHandles(),D=this._segment1,H=this._segment2,Z=this._path;z&&(D._handleOut._set(k[2]-k[0],k[3]-k[1]),H._handleIn._set(N[4]-N[6],N[5]-N[7]));var $=k[6],R=k[7],Y=new Ht(new Le($,R),z&&new Le(k[4]-$,k[5]-R),z&&new Le(N[2]-$,N[3]-R));Z?(Z.insert(D._index+1,Y),C=this.getNext()):(this._segment2=Y,this._changed(),C=new en(Y,H))}return C},splitAt:function(y){var l=this._path;return l?l.splitAt(y):null},splitAtTime:function(y){return this.splitAt(this.getLocationAtTime(y))},divide:function(y,l){return this.divideAtTime(y===ie?.5:l?y:this.getTimeAt(y))},split:function(y,l){return this.splitAtTime(y===ie?.5:l?y:this.getTimeAt(y))},reversed:function(){return new en(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(y,l,d,_){var C=y._point,S=y._handleOut,k=l._handleIn,N=l._point,z=C.x,D=C.y,H=N.x,Z=N.y,$=_?[z,D,z,D,H,Z,H,Z]:[z,D,z+S._x,D+S._y,H+k._x,Z+k._y,H,Z];return d&&d._transformCoordinates($,$,4),$},subdivide:function(y,l){var d=y[0],_=y[1],C=y[2],S=y[3],k=y[4],N=y[5],z=y[6],D=y[7];l===ie&&(l=.5);var H=1-l,Z=H*d+l*C,$=H*_+l*S,R=H*C+l*k,Y=H*S+l*N,he=H*k+l*z,me=H*N+l*D,ve=H*Z+l*R,ge=H*$+l*Y,pe=H*R+l*he,de=H*Y+l*me,Ee=H*ve+l*pe,ke=H*ge+l*de;return[[d,_,Z,$,ve,ge,Ee,ke],[Ee,ke,pe,de,he,me,z,D]]},getMonoCurves:function(y,l){var d=[],_=l?0:1,C=y[_+0],S=y[_+2],k=y[_+4],N=y[_+6];if(C>=S==S>=k&&S>=k==k>=N||en.isStraight(y))d.push(y);else{var R=[],Y=Q.solveQuadratic(3*(S-k)-C+N,2*(C+k)-4*S,S-C,R,1e-8,.99999999);if(Y){R.sort();var he=R[0],me=en.subdivide(y,he);d.push(me[0]),Y>1&&(me=en.subdivide(me[1],he=(R[1]-he)/(1-he)),d.push(me[0])),d.push(me[1])}else d.push(y)}return d},solveCubic:function(y,l,d,_,C,S){var k=y[l],N=y[l+2],z=y[l+4],D=y[l+6],H=0;if(!(k<d&&D<d&&N<d&&z<d||k>d&&D>d&&N>d&&z>d)){var Z=3*(N-k),$=3*(z-N)-Z;H=Q.solveCubic(D-k-Z-$,$,Z,k-d,_,C,S)}return H},getTimeOf:function(y,l){var d=new Le(y[0],y[1]),_=new Le(y[6],y[7]),S=1e-7;if(null===(l.isClose(d,1e-12)?0:l.isClose(_,1e-12)?1:null))for(var N=[l.x,l.y],z=[],D=0;D<2;D++)for(var H=en.solveCubic(y,D,N[D],z,0,1),Z=0;Z<H;Z++){var $=z[Z];if(l.isClose(en.getPoint(y,$),S))return $}return l.isClose(d,S)?0:l.isClose(_,S)?1:null},getNearestTime:function(y,l){if(en.isStraight(y)){var d=y[0],_=y[1],k=y[6]-d,N=y[7]-_,z=k*k+N*N;if(0===z)return 0;var D=((l.x-d)*k+(l.y-_)*N)/z;return D<1e-12?0:D>.999999999999?1:en.getTimeOf(y,new Le(d+D*k,_+D*N))}var Z=1/0,$=0;function R(me){if(me>=0&&me<=1){var ve=l.getDistance(en.getPoint(y,me),!0);if(ve<Z)return Z=ve,$=me,!0}}for(var Y=0;Y<=100;Y++)R(Y/100);for(var he=.005;he>1e-8;)!R($-he)&&!R($+he)&&(he/=2);return $},getPart:function(y,l,d){var _=l>d;if(_){var C=l;l=d,d=C}return l>0&&(y=en.subdivide(y,l)[1]),d<1&&(y=en.subdivide(y,(d-l)/(1-l))[0]),_?[y[6],y[7],y[4],y[5],y[2],y[3],y[0],y[1]]:y},isFlatEnough:function(y,l){var d=y[0],_=y[1],z=y[6],D=y[7],H=3*y[2]-2*d-z,Z=3*y[3]-2*_-D,$=3*y[4]-2*z-d,R=3*y[5]-2*D-_;return Math.max(H*H,$*$)+Math.max(Z*Z,R*R)<=16*l*l},getArea:function(y){var l=y[0],d=y[1],_=y[2],C=y[3],S=y[4],k=y[5],N=y[6],z=y[7];return 3*((z-d)*(_+S)-(N-l)*(C+k)+C*(l-S)-_*(d-k)+z*(S+l/3)-N*(k+d/3))/20},getBounds:function(y){for(var l=y.slice(0,2),d=l.slice(),_=[0,0],C=0;C<2;C++)en._addBounds(y[C],y[C+2],y[C+4],y[C+6],C,0,l,d,_);return new L(l[0],l[1],d[0]-l[0],d[1]-l[1])},_addBounds:function(y,l,d,_,C,S,k,N,z){function D(Ee,ke){var Xe=Ee-ke,je=Ee+ke;Xe<k[C]&&(k[C]=Xe),je>N[C]&&(N[C]=je)}var H=k[C]+(S/=2),Z=N[C]-S;if(y<H||l<H||d<H||_<H||y>Z||l>Z||d>Z||_>Z)if(l<y!=l<_&&d<y!=d<_)D(y,0),D(_,0);else{var he=Q.solveQuadratic(3*(l-d)-y+_,2*(y+d)-4*l,l-y,z);D(_,0);for(var ge=0;ge<he;ge++){var pe=z[ge],de=1-pe;1e-8<=pe&&pe<=.99999999&&D(de*de*de*y+3*de*de*pe*l+3*de*pe*pe*d+pe*pe*pe*_,S)}}}}},q.each(["getBounds","getStrokeBounds","getHandleBounds"],function(y){this[y]=function(){this._bounds||(this._bounds={});var l=this._bounds[y];return l||(l=this._bounds[y]=xt[y]([this._segment1,this._segment2],!1,this._path)),l.clone()}},{}),q.each({isStraight:function(y,l,d,_){if(l.isZero()&&d.isZero())return!0;var C=_.subtract(y);if(C.isZero())return!1;if(C.isCollinear(l)&&C.isCollinear(d)){var S=new ze(y,_);if(S.getDistance(y.add(l))<1e-7&&S.getDistance(_.add(d))<1e-7){var N=C.dot(C),z=C.dot(l)/N,D=C.dot(d)/N;return z>=0&&z<=1&&D<=0&&D>=-1}}return!1},isLinear:function(y,l,d,_){var C=_.subtract(y).divide(3);return l.equals(C)&&d.negate().equals(C)}},function(y,l){this[l]=function(d){var _=this._segment1,C=this._segment2;return y(_._point,_._handleOut,C._handleIn,C._point,d)},this.statics[l]=function(d,_){var C=d[0],S=d[1],k=d[6],N=d[7];return y(new Le(C,S),new Le(d[2]-C,d[3]-S),new Le(d[4]-k,d[5]-N),new Le(k,N),_)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(y){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(y||0)},isCollinear:function(y){return y&&this.isStraight()&&y.isStraight()&&this.getLine().isCollinear(y.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(y,l){return this.getLocationAtTime(l?y:this.getTimeAt(y))},getLocationAtTime:function(y){return null!=y&&y>=0&&y<=1?new Sn(this,y):null},getTimeAt:function(y,l){return en.getTimeAt(this.getValues(),y,l)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var y=Le.read(arguments);return y.isZero()?[]:en.getTimesWithTangent(this.getValues(),y)},getOffsetAtTime:function(y){return this.getPartLength(0,y)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(Le.read(arguments)))},getOffsetOf:function(){var y=this.getLocationOf.apply(this,arguments);return y?y.getOffset():null},getTimeOf:function(){return en.getTimeOf(this.getValues(),Le.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var y=Le.read(arguments),l=this.getValues(),d=en.getNearestTime(l,y),_=en.getPoint(l,d);return new Sn(this,d,_,null,y.getDistance(_))},getNearestPoint:function(){var y=this.getNearestLocation.apply(this,arguments);return y&&y.getPoint()}},new function(){var y=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return q.each(y,function(l){this[l+"At"]=function(d,_){var C=this.getValues();return en[l](C,_?d:en.getTimeAt(C,d))},this[l+"AtTime"]=function(d){return en[l](this.getValues(),d)}},{statics:{_evaluateMethods:y}})},new function(){function y(_){var C=_[0],S=_[1],k=_[2],N=_[3],z=_[4],D=_[5],$=9*(k-z)+3*(_[6]-C),R=6*(C+z)-12*k,Y=3*(k-C),he=9*(N-D)+3*(_[7]-S),me=6*(S+D)-12*N,ve=3*(N-S);return function(ge){var pe=($*ge+R)*ge+Y,de=(he*ge+me)*ge+ve;return Math.sqrt(pe*pe+de*de)}}function l(_,C){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(C-_))))}function d(_,C,S,k){if(null==C||C<0||C>1)return null;var N=_[0],z=_[1],D=_[2],H=_[3],Z=_[4],$=_[5],R=_[6],Y=_[7],he=Q.isZero;he(D-N)&&he(H-z)&&(D=N,H=z),he(Z-R)&&he($-Y)&&(Z=R,$=Y);var ke,Xe,me=3*(D-N),ve=3*(Z-D)-me,ge=R-N-me-ve,pe=3*(H-z),de=3*($-H)-pe,Ee=Y-z-pe-de;if(0===S)ke=0===C?N:1===C?R:((ge*C+ve)*C+me)*C+N,Xe=0===C?z:1===C?Y:((Ee*C+de)*C+pe)*C+z;else{var nt=1-1e-8;if(C<1e-8?(ke=me,Xe=pe):C>nt?(ke=3*(R-Z),Xe=3*(Y-$)):(ke=(3*ge*C+2*ve)*C+me,Xe=(3*Ee*C+2*de)*C+pe),k){0===ke&&0===Xe&&(C<1e-8||C>nt)&&(ke=Z-D,Xe=$-H);var pt=Math.sqrt(ke*ke+Xe*Xe);pt&&(ke/=pt,Xe/=pt)}if(3===S){Z=6*ge*C+2*ve,$=6*Ee*C+2*de;var gt=Math.pow(ke*ke+Xe*Xe,1.5);ke=0!==gt?(ke*$-Xe*Z)/gt:0,Xe=0}}return 2===S?new Le(Xe,-ke):new Le(ke,Xe)}return{statics:{classify:function(_){var C=_[0],S=_[1],k=_[2],N=_[3],z=_[4],D=_[5],H=_[6],Z=_[7],R=k*(S-Z)+N*(H-C)+C*Z-S*H,he=3*(z*(N-S)+D*(C-k)+k*S-N*C),me=he-R,ve=me-R+(C*(Z-D)+S*(z-H)+H*D-Z*z),ge=Math.sqrt(ve*ve+me*me+he*he),pe=0!==ge?1/ge:0,de=Q.isZero,Ee="serpentine";function ke(pt,gt,Wt){var Lt=gt!==ie,Bt=Lt&&gt>0&&gt<1,qt=Lt&&Wt>0&&Wt<1;return Lt&&(!(Bt||qt)||"loop"===pt&&!(Bt&&qt))&&(pt="arch",Bt=qt=!1),{type:pt,roots:Bt||qt?Bt&&qt?gt<Wt?[gt,Wt]:[Wt,gt]:[Bt?gt:Wt]:null}}if(me*=pe,he*=pe,de(ve*=pe))return de(me)?ke(de(he)?"line":"quadratic"):ke(Ee,he/(3*me));var Xe=3*me*me-4*ve*he;if(de(Xe))return ke("cusp",me/(2*ve));var je=Xe>0?Math.sqrt(Xe/3):Math.sqrt(-Xe),nt=2*ve;return ke(Xe>0?Ee:"loop",(me+je)/nt,(me-je)/nt)},getLength:function(_,C,S,k){if(C===ie&&(C=0),S===ie&&(S=1),en.isStraight(_)){var N=_;S<1&&(N=en.subdivide(N,S)[0],C/=S),C>0&&(N=en.subdivide(N,C)[1]);var z=N[6]-N[0],D=N[7]-N[1];return Math.sqrt(z*z+D*D)}return Q.integrate(k||y(_),C,S,l(C,S))},getTimeAt:function(_,C,S){if(S===ie&&(S=C<0?1:0),0===C)return S;var k=Math.abs,z=C>0,D=z?S:0,H=z?1:S,Z=y(_),$=en.getLength(_,D,H,Z),R=k(C)-$;if(k(R)<1e-12)return z?H:D;if(R>1e-12)return null;var he=0;return Q.findRoot(function me(ve){return he+=Q.integrate(Z,S,ve,l(S,ve)),S=ve,he-C},Z,S+C/$,D,H,32,1e-12)},getPoint:function(_,C){return d(_,C,0,!1)},getTangent:function(_,C){return d(_,C,1,!0)},getWeightedTangent:function(_,C){return d(_,C,1,!1)},getNormal:function(_,C){return d(_,C,2,!0)},getWeightedNormal:function(_,C){return d(_,C,2,!1)},getCurvature:function(_,C){return d(_,C,3,!1).x},getPeaks:function(_){var C=_[0],S=_[1],k=_[2],N=_[3],z=_[4],D=_[5],$=3*k-C-3*z+_[6],R=3*C-6*k+3*z,Y=-3*C+3*k,he=3*N-S-3*D+_[7],me=3*S-6*N+3*D,ve=-3*S+3*N,de=[];return Q.solveCubic(9*($*$+he*he),9*($*R+me*he),2*(R*R+me*me)+3*(Y*$+ve*he),Y*R+me*ve,de,1e-8,.99999999),de.sort()}}}},new function(){function y(R,Y,he,me,ve,ge,pe){var de=!pe&&he.getPrevious()===ve,Ee=!pe&&he!==ve&&he.getNext()===ve,Xe=1-1e-8;if(null!==me&&me>=(de?1e-8:0)&&me<=(Ee?Xe:1)&&null!==ge&&ge>=(Ee?1e-8:0)&&ge<=(de?Xe:1)){var je=new Sn(he,me,null,pe),nt=new Sn(ve,ge,null,pe);je._intersection=nt,nt._intersection=je,(!Y||Y(je))&&Sn.insert(R,je,!0)}}function l(R,Y,he,me,ve,ge,pe,de,Ee,ke,Xe,je,nt){if(++Ee>=4096||++de>=40)return Ee;var Ci,yi,gt=Y[0],Wt=Y[1],Lt=Y[6],Bt=Y[7],qt=ze.getSignedDistance,Pe=qt(gt,Wt,Lt,Bt,Y[2],Y[3]),We=qt(gt,Wt,Lt,Bt,Y[4],Y[5]),Ye=Pe*We>0?3/4:4/9,we=Ye*Math.min(0,Pe,We),Ue=Ye*Math.max(0,Pe,We),ct=qt(gt,Wt,Lt,Bt,R[0],R[1]),Dt=qt(gt,Wt,Lt,Bt,R[2],R[3]),wt=qt(gt,Wt,Lt,Bt,R[4],R[5]),nn=qt(gt,Wt,Lt,Bt,R[6],R[7]),On=function d(R,Y,he,me){var Xe,ve=[0,R],ge=[1/3,Y],pe=[2/3,he],de=[1,me],Ee=Y-(2*R+me)/3,ke=he-(R+2*me)/3;if(Ee*ke<0)Xe=[[ve,ge,de],[ve,pe,de]];else{var je=Ee/ke;Xe=[je>=2?[ve,ge,de]:je<=.5?[ve,pe,de]:[ve,ge,pe,de],[ve,de]]}return(Ee||ke)<0?Xe.reverse():Xe}(ct,Dt,wt,nn),jn=On[0],ii=On[1];if(0===Pe&&0===We&&0===ct&&0===Dt&&0===wt&&0===nn||null==(Ci=_(jn,ii,we,Ue))||null==(yi=_(jn.reverse(),ii.reverse(),we,Ue)))return Ee;var Ei=ke+(Xe-ke)*Ci,Ai=ke+(Xe-ke)*yi;if(Math.max(nt-je,Ai-Ei)<1e-9){var or=(Ei+Ai)/2,is=(je+nt)/2;y(ve,ge,pe?me:he,pe?is:or,pe?he:me,pe?or:is)}else{R=en.getPart(R,Ci,yi);var _r=nt-je;if(yi-Ci>.8)if(Ai-Ei>_r)Ee=l(Y,(ws=en.subdivide(R,.5))[0],me,he,ve,ge,!pe,de,Ee,je,nt,Ei,or=(Ei+Ai)/2),Ee=l(Y,ws[1],me,he,ve,ge,!pe,de,Ee,je,nt,or,Ai);else{var ws;Ee=l((ws=en.subdivide(Y,.5))[0],R,me,he,ve,ge,!pe,de,Ee,je,is=(je+nt)/2,Ei,Ai),Ee=l(ws[1],R,me,he,ve,ge,!pe,de,Ee,is,nt,Ei,Ai)}else Ee=0===_r||_r>=1e-9?l(Y,R,me,he,ve,ge,!pe,de,Ee,je,nt,Ei,Ai):l(R,Y,he,me,ve,ge,pe,de,Ee,Ei,Ai,je,nt)}return Ee}function _(R,Y,he,me){return R[0][1]<he?C(R,!0,he):Y[0][1]>me?C(Y,!1,me):R[0][0]}function C(R,Y,he){for(var me=R[0][0],ve=R[0][1],ge=1,pe=R.length;ge<pe;ge++){var de=R[ge][0],Ee=R[ge][1];if(Y?Ee>=he:Ee<=he)return Ee===he?de:me+(he-ve)*(de-me)/(Ee-ve);me=de,ve=Ee}return null}function S(R,Y,he,me,ve){var ge=Q.isZero;if(ge(me)&&ge(ve)){var pe=en.getTimeOf(R,new Le(Y,he));return null===pe?[]:[pe]}for(var de=Math.atan2(-ve,me),Ee=Math.sin(de),ke=Math.cos(de),Xe=[],je=[],nt=0;nt<8;nt+=2){var pt=R[nt]-Y,gt=R[nt+1]-he;Xe.push(pt*ke-gt*Ee,pt*Ee+gt*ke)}return en.solveCubic(Xe,1,0,je,0,1),je}function k(R,Y,he,me,ve,ge,pe){for(var de=Y[0],Ee=Y[1],je=S(R,de,Ee,Y[6]-de,Y[7]-Ee),nt=0,pt=je.length;nt<pt;nt++){var gt=je[nt],Wt=en.getPoint(R,gt),Lt=en.getTimeOf(Y,Wt);null!==Lt&&y(ve,ge,pe?me:he,pe?Lt:gt,pe?he:me,pe?gt:Lt)}}function N(R,Y,he,me,ve,ge){var pe=ze.intersect(R[0],R[1],R[6],R[7],Y[0],Y[1],Y[6],Y[7]);pe&&y(ve,ge,he,en.getTimeOf(R,pe),me,en.getTimeOf(Y,pe))}function z(R,Y,he,me,ve,ge){var pe=1e-12,de=Math.min,Ee=Math.max;if(Ee(R[0],R[2],R[4],R[6])+pe>de(Y[0],Y[2],Y[4],Y[6])&&de(R[0],R[2],R[4],R[6])-pe<Ee(Y[0],Y[2],Y[4],Y[6])&&Ee(R[1],R[3],R[5],R[7])+pe>de(Y[1],Y[3],Y[5],Y[7])&&de(R[1],R[3],R[5],R[7])-pe<Ee(Y[1],Y[3],Y[5],Y[7])){var ke=Z(R,Y);if(ke)for(var Xe=0;Xe<2;Xe++){var je=ke[Xe];y(ve,ge,he,je[0],me,je[1],!0)}else{var nt=en.isStraight(R),pt=en.isStraight(Y),gt=nt&&pt,Wt=nt&&!pt,Lt=ve.length;if((gt?N:nt||pt?k:l)(Wt?Y:R,Wt?R:Y,Wt?me:he,Wt?he:me,ve,ge,Wt,0,0,0,1,0,1),!gt||ve.length===Lt)for(Xe=0;Xe<4;Xe++){var Bt=Xe>>1,qt=1&Xe,Pe=6*Bt,We=6*qt,Ye=new Le(R[Pe],R[Pe+1]),we=new Le(Y[We],Y[We+1]);Ye.isClose(we,pe)&&y(ve,ge,he,Bt,me,qt)}}}return ve}function D(R,Y,he,me){var ve=en.classify(R);if("loop"===ve.type){var ge=ve.roots;y(he,me,Y,ge[0],Y,ge[1])}return he}function Z(R,Y){function he(nn){var On=nn[6]-nn[0],jn=nn[7]-nn[1];return On*On+jn*jn}var me=Math.abs,ve=ze.getDistance,pe=1e-7,de=en.isStraight(R),Ee=en.isStraight(Y),ke=de&&Ee,Xe=he(R)<he(Y),je=Xe?Y:R,nt=Xe?R:Y,pt=je[0],gt=je[1],Wt=je[6]-pt,Lt=je[7]-gt;if(ve(pt,gt,Wt,Lt,nt[0],nt[1],!0)<pe&&ve(pt,gt,Wt,Lt,nt[6],nt[7],!0)<pe)!ke&&ve(pt,gt,Wt,Lt,je[2],je[3],!0)<pe&&ve(pt,gt,Wt,Lt,je[4],je[5],!0)<pe&&ve(pt,gt,Wt,Lt,nt[2],nt[3],!0)<pe&&ve(pt,gt,Wt,Lt,nt[4],nt[5],!0)<pe&&(de=Ee=ke=!0);else if(ke)return null;if(de^Ee)return null;for(var Bt=[R,Y],qt=[],Pe=0;Pe<4&&qt.length<2;Pe++){var We=1&Pe,Ye=1^We,we=Pe>>1,Ue=en.getTimeOf(Bt[We],new Le(Bt[Ye][we?6:0],Bt[Ye][we?7:1]));if(null!=Ue){var ct=We?[we,Ue]:[Ue,we];(!qt.length||me(ct[0]-qt[0][0])>1e-8&&me(ct[1]-qt[0][1])>1e-8)&&qt.push(ct)}if(Pe>2&&!qt.length)break}if(2!==qt.length)qt=null;else if(!ke){var Dt=en.getPart(R,qt[0][0],qt[1][0]),wt=en.getPart(Y,qt[0][1],qt[1][1]);(me(wt[2]-Dt[2])>pe||me(wt[3]-Dt[3])>pe||me(wt[4]-Dt[4])>pe||me(wt[5]-Dt[5])>pe)&&(qt=null)}return qt}return{getIntersections:function(R){var Y=this.getValues(),he=R&&R!==this&&R.getValues();return he?z(Y,he,this,R,[]):D(Y,this,[])},statics:{getOverlaps:Z,getIntersections:function H(R,Y,he,me,ve,ge){var de=!Y;de&&(Y=R);for(var Ee=R.length,ke=Y.length,Xe=new Array(Ee),je=de?Xe:new Array(ke),nt=[],pt=0;pt<Ee;pt++)Xe[pt]=R[pt].getValues(me);if(!de)for(pt=0;pt<ke;pt++)je[pt]=Y[pt].getValues(ve);for(var gt=xe.findCurveBoundsCollisions(Xe,je,1e-7),Wt=0;Wt<Ee;Wt++){var Lt=R[Wt],Bt=Xe[Wt];de&&D(Bt,Lt,nt,he);var qt=gt[Wt];if(qt)for(var Pe=0;Pe<qt.length;Pe++){if(ge&&nt.length)return nt;var We=qt[Pe];(!de||We>Wt)&&z(Bt,je[We],Lt,Y[We],nt,he)}}return nt},getCurveLineIntersections:S,getTimesWithTangent:function $(R,Y){var he=R[0],me=R[1],ve=R[2],ge=R[3],pe=R[4],de=R[5],Ee=R[6],ke=R[7],Xe=Y.normalize(),je=Xe.x,nt=Xe.y,pt=3*Ee-9*pe+9*ve-3*he,gt=3*ke-9*de+9*ge-3*me,Wt=6*pe-12*ve+6*he,Lt=6*de-12*ge+6*me,Bt=3*ve-3*he,qt=3*ge-3*me,Pe=2*pt*nt-2*gt*je,We=[];if(Math.abs(Pe)<Q.CURVETIME_EPSILON){if(0!=(Pe=pt*Lt-gt*Wt)){var we=-(pt*qt-gt*Bt)/Pe;we>=0&&we<=1&&We.push(we)}}else{var Ue=(Wt*Wt-4*pt*Bt)*nt*nt+(-2*Wt*Lt+4*gt*Bt+4*pt*qt)*je*nt+(Lt*Lt-4*gt*qt)*je*je,ct=Wt*nt-Lt*je;if(Ue>=0&&0!=Pe){var Dt=Math.sqrt(Ue),wt=-(ct+Dt)/Pe,nn=(-ct+Dt)/Pe;wt>=0&&wt<=1&&We.push(wt),nn>=0&&nn<=1&&We.push(nn)}}return We}}}}),Sn=q.extend({_class:"CurveLocation",initialize:function(l,d,_,C,S){if(d>=.99999999){var k=l.getNext();k&&(d=0,l=k)}this._setCurve(l),this._time=d,this._point=_||l.getPointAtTime(d),this._overlap=C,this._distance=S,this._intersection=this._next=this._previous=null},_setPath:function(y){this._path=y,this._version=y?y._version:0},_setCurve:function(y){this._setPath(y._path),this._curve=y,this._segment=null,this._segment1=y._segment1,this._segment2=y._segment2},_setSegment:function(y){var l=y.getCurve();l?this._setCurve(l):(this._setPath(y._path),this._segment1=y,this._segment2=null),this._segment=y,this._time=y===this._segment1?0:1,this._point=y._point.clone()},getSegment:function(){var y=this._segment;if(!y){var l=this.getCurve(),d=this.getTime();0===d?y=l._segment1:1===d?y=l._segment2:null!=d&&(y=l.getPartLength(0,d)<l.getPartLength(d,1)?l._segment1:l._segment2),this._segment=y}return y},getCurve:function(){var y=this._path,l=this;function d(_){var C=_&&_.getCurve();if(C&&null!=(l._time=C.getTimeOf(l._point)))return l._setCurve(C),C}return y&&y._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||d(this._segment)||d(this._segment1)||d(this._segment2.getPrevious())},getPath:function(){var y=this.getCurve();return y&&y._path},getIndex:function(){var y=this.getCurve();return y&&y.getIndex()},getTime:function(){var y=this.getCurve(),l=this._time;return y&&null==l?this._time=y.getTimeOf(this._point):l},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var y=this._offset;if(null==y){y=0;var l=this.getPath(),d=this.getIndex();if(l&&null!=d)for(var _=l.getCurves(),C=0;C<d;C++)y+=_[C].getLength();this._offset=y+=this.getCurveOffset()}return y},getCurveOffset:function(){var y=this._curveOffset;if(null==y){var l=this.getCurve(),d=this.getTime();this._curveOffset=y=null!=d&&l&&l.getPartLength(0,d)}return y},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var y=this.getCurve(),l=y&&y.divideAtTime(this.getTime());return l&&this._setSegment(l._segment1),l},split:function(){var y=this.getCurve(),l=y._path,d=y&&y.splitAtTime(this.getTime());return d&&this._setSegment(l.getLastSegment()),d},equals:function(y,l){var d=this===y;if(!d&&y instanceof Sn){var _=this.getCurve(),C=y.getCurve(),S=_._path;if(S===C._path){var N=Math.abs,D=N(this.getOffset()-y.getOffset()),H=!l&&this._intersection,Z=!l&&y._intersection;d=(D<1e-7||S&&N(S.getLength()-D)<1e-7)&&(!H&&!Z||H&&Z&&H.equals(Z,!0))}}return d},toString:function(){var y=[],l=this.getPoint(),d=_e.instance;l&&y.push("point: "+l);var _=this.getIndex();null!=_&&y.push("index: "+_);var C=this.getTime();return null!=C&&y.push("time: "+d.number(C)),null!=this._distance&&y.push("distance: "+d.number(this._distance)),"{ "+y.join(", ")+" }"},isTouching:function(){var y=this._intersection;if(y&&this.getTangent().isCollinear(y.getTangent())){var l=this.getCurve(),d=y.getCurve();return!(l.isStraight()&&d.isStraight()&&l.getLine().intersect(d.getLine()))}return!1},isCrossing:function(){var y=this._intersection;if(!y)return!1;var l=this.getTime(),d=y.getTime(),_=1e-8,C=1-_,S=l>=_&&l<=C,k=d>=_&&d<=C;if(S&&k)return!this.isTouching();var N=this.getCurve(),z=N&&l<_?N.getPrevious():N,D=y.getCurve(),H=D&&d<_?D.getPrevious():D;if(l>C&&(N=N.getNext()),d>C&&(D=D.getNext()),!(z&&N&&H&&D))return!1;var Z=[];function $(je,nt){var pt=je.getValues(),gt=en.classify(pt).roots||en.getPeaks(pt),Wt=gt.length,Lt=en.getLength(pt,nt&&Wt?gt[Wt-1]:0,!nt&&Wt?gt[0]:1);Z.push(Wt?Lt:Lt/32)}function R(je,nt,pt){return nt<pt?je>nt&&je<pt:je>nt||je<pt}S||($(z,!0),$(N,!1)),k||($(H,!0),$(D,!1));var Y=this.getPoint(),he=Math.min.apply(Math,Z),me=S?N.getTangentAtTime(l):N.getPointAt(he).subtract(Y),ve=S?me.negate():z.getPointAt(-he).subtract(Y),ge=k?D.getTangentAtTime(d):D.getPointAt(he).subtract(Y),pe=k?ge.negate():H.getPointAt(-he).subtract(Y),de=ve.getAngle(),Ee=me.getAngle(),ke=pe.getAngle(),Xe=ge.getAngle();return!!(S?R(de,ke,Xe)^R(Ee,ke,Xe)&&R(de,Xe,ke)^R(Ee,Xe,ke):R(ke,de,Ee)^R(Xe,de,Ee)&&R(ke,Ee,de)^R(Xe,Ee,de))},hasOverlap:function(){return!!this._overlap}},q.each(en._evaluateMethods,function(y){var l=y+"At";this[y]=function(){var d=this.getCurve(),_=this.getTime();return null!=_&&d&&d[l](_,!0)}},{preserve:!0}),new function(){function y(l,d,_){var C=l.length,S=0,k=C-1;function N(Y,he){for(var me=Y+he;me>=-1&&me<=C;me+=he){var ve=l[(me%C+C)%C];if(!d.getPoint().isClose(ve.getPoint(),1e-7))break;if(d.equals(ve))return ve}return null}for(;S<=k;){var H,z=S+k>>>1,D=l[z];if(_&&(H=d.equals(D)?D:N(z,-1)||N(z,1)))return d._overlap&&(H._overlap=H._intersection._overlap=!0),H;var Z=d.getPath(),$=D.getPath();(Z!==$?Z._id-$._id:d.getIndex()+d.getTime()-(D.getIndex()+D.getTime()))<0?k=z-1:S=z+1}return l.splice(S,0,d),d}return{statics:{insert:y,expand:function(l){for(var d=l.slice(),_=l.length-1;_>=0;_--)y(d,l[_]._intersection,!1);return d}}}}),Pn=st.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(y){var l,d,_;if(q.isPlainObject(y)?(d=y.segments,l=y.pathData):Array.isArray(y)?d=y:"string"==typeof y&&(l=y),d){var C=d[0];_=C&&Array.isArray(C[0])}else l&&(_=(l.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(l));return new(_?Jt:xt)(y)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(y){this.isClockwise()!=(y=!!y)&&this.reverse()},setPathData:function(y){var d,C,S,l=y&&y.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),_=!1,k=new Le,N=new Le;function z(pe,de){var Ee=+d[pe];return _&&(Ee+=k[de]),Ee}function D(pe){return new Le(z(pe,"x"),z(pe+1,"y"))}this.clear();for(var H=0,Z=l&&l.length;H<Z;H++){var $=l[H],R=$[0],Y=R.toLowerCase(),he=(d=$.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&d.length;switch(_=R===Y,"z"===C&&!/[mz]/.test(Y)&&this.moveTo(k),Y){case"m":case"l":for(var me="m"===Y,ve=0;ve<he;ve+=2)this[me?"moveTo":"lineTo"](k=D(ve)),me&&(N=k,me=!1);S=k;break;case"h":case"v":var ge="h"===Y?"x":"y";for(k=k.clone(),ve=0;ve<he;ve++)k[ge]=z(ve,ge),this.lineTo(k);S=k;break;case"c":for(ve=0;ve<he;ve+=6)this.cubicCurveTo(D(ve),S=D(ve+2),k=D(ve+4));break;case"s":for(ve=0;ve<he;ve+=4)this.cubicCurveTo(/[cs]/.test(C)?k.multiply(2).subtract(S):k,S=D(ve),k=D(ve+2)),C=Y;break;case"q":for(ve=0;ve<he;ve+=4)this.quadraticCurveTo(S=D(ve),k=D(ve+2));break;case"t":for(ve=0;ve<he;ve+=2)this.quadraticCurveTo(S=/[qt]/.test(C)?k.multiply(2).subtract(S):k,k=D(ve)),C=Y;break;case"a":for(ve=0;ve<he;ve+=7)this.arcTo(k=D(ve+5),new Ae(+d[ve],+d[ve+1]),+d[ve+2],+d[ve+4],+d[ve+3]);break;case"z":this.closePath(1e-12),k=N}C=Y}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(y){var l=y.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(y):{};return l.onPath||!!("evenodd"===this.getFillRule()?1&l.windingL||1&l.windingR:l.winding)},getIntersections:function(y,l,d,_){var C=this===y||!y,S=this._matrix._orNullIfIdentity(),k=C?S:(d||y._matrix)._orNullIfIdentity();return C||this.getBounds(S).intersects(y.getBounds(k),1e-12)?en.getIntersections(this.getCurves(),!C&&y.getCurves(),l,S,k,_):[]},getCrossings:function(y){return this.getIntersections(y,function(l){return l.isCrossing()})},getNearestLocation:function(){for(var y=Le.read(arguments),l=this.getCurves(),d=1/0,_=null,C=0,S=l.length;C<S;C++){var k=l[C].getNearestLocation(y);k._distance<d&&(d=k._distance,_=k)}return _},getNearestPoint:function(){var y=this.getNearestLocation.apply(this,arguments);return y&&y.getPoint()},interpolate:function(y,l,d){var _=!this._children,C=_?"_segments":"_children",S=y[C],k=l[C],N=this[C];if(!S||!k||S.length!==k.length)throw new Error("Invalid operands in interpolate() call: "+y+", "+l);var z=N.length,D=k.length;if(z<D)for(var H=_?Ht:xt,Z=z;Z<D;Z++)this.add(new H);else z>D&&this[_?"removeSegments":"removeChildren"](D,z);for(Z=0;Z<D;Z++)N[Z].interpolate(S[Z],k[Z],d);_&&(this.setClosed(y._closed),this._changed(9))},compare:function(y){var l=!1;if(y){var d=this._children||[this],_=y._children?y._children.slice():[y],C=d.length,S=_.length,k=[],N=0;l=!0;for(var z=xe.findItemBoundsCollisions(d,_,Q.GEOMETRIC_EPSILON),D=C-1;D>=0&&l;D--){var H=d[D];l=!1;var Z=z[D];if(Z)for(var $=Z.length-1;$>=0&&!l;$--)H.compare(_[Z[$]])&&(k[Z[$]]||(k[Z[$]]=!0,N++),l=!0)}l=l&&N===S}return l}}),xt=Pn.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(l){this._closed=!1,this._segments=[],this._version=0;var d=arguments,_=Array.isArray(l)?"object"==typeof l[0]?l:d:!l||l.size!==ie||l.x===ie&&l.point===ie?null:d;_&&_.length>0?this.setSegments(_):(this._curves=ie,this._segmentSelection=0,!_&&"string"==typeof l&&(this.setPathData(l),l=null)),this._initialize(!_&&l)},_equals:function(y){return this._closed===y._closed&&q.equals(this._segments,y._segments)},copyContent:function(y){this.setSegments(y._segments),this._closed=y._closed},_changed:function y(l){if(y.base.call(this,l),8&l){if(this._length=this._area=ie,32&l)this._version++;else if(this._curves)for(var d=0,_=this._curves.length;d<_;d++)this._curves[d]._changed()}else 64&l&&(this._bounds=ie)},getStyle:function(){var y=this._parent;return(y instanceof Jt?y:this)._style},getSegments:function(){return this._segments},setSegments:function(y){var l=this.isFullySelected(),d=y&&y.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=ie,d){var _=y[d-1];"boolean"==typeof _&&(this.setClosed(_),d--),this._add(Ht.readList(y,0,{},d))}l&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var y=this._curves,l=this._segments;if(!y){var d=this._countCurves();y=this._curves=new Array(d);for(var _=0;_<d;_++)y[_]=new en(this,l[_],l[_+1]||l[0])}return y},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var y=this.getCurves();return y[y.length-1]},isClosed:function(){return this._closed},setClosed:function(y){if(this._closed!=(y=!!y)){if(this._closed=y,this._curves){var l=this._curves.length=this._countCurves();y&&(this._curves[l-1]=new en(this,this._segments[l-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(y,l){var N,z,D,H,Z,$,R,Y,d=this._segments,_=d.length,C=new _e(l),S=new Array(6),k=!0,he=[];function me(ge,pe){if(ge._transformCoordinates(y,S),N=S[0],z=S[1],k)he.push("M"+C.pair(N,z)),k=!1;else if($=S[3],(Z=S[2])===N&&$===z&&R===D&&Y===H){if(!pe){var de=N-D,Ee=z-H;he.push(0===de?"v"+C.number(Ee):0===Ee?"h"+C.number(de):"l"+C.pair(de,Ee))}}else he.push("c"+C.pair(R-D,Y-H)+" "+C.pair(Z-D,$-H)+" "+C.pair(N-D,z-H));D=N,H=z,R=S[4],Y=S[5]}if(!_)return"";for(var ve=0;ve<_;ve++)me(d[ve]);return this._closed&&_>0&&(me(d[0],!0),he.push("z")),he.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(y){for(var l=this._segments,d=new Array(6),_=0,C=l.length;_<C;_++)l[_]._transformCoordinates(y,d,!0);return!0},_add:function(y,k){for(var d=this._segments,_=this._curves,C=y.length,S=null==k,N=(k=S?d.length:k,0);N<C;N++){var z=y[N];z._path&&(z=y[N]=z.clone()),z._path=this,z._index=k+N,z._selection&&this._updateSelection(z,0,z._selection)}if(S)q.push(d,y);else{d.splice.apply(d,[k,0].concat(y)),N=k+C;for(var D=d.length;N<D;N++)d[N]._index=N}if(_){var H=this._countCurves(),Z=k>0&&k+C-1===H?k-1:k,$=Z,R=Math.min(Z+C,H);for(y._curves&&(_.splice.apply(_,[Z,0].concat(y._curves)),$+=y._curves.length),N=$;N<R;N++)_.splice(N,0,new en(this,null,null));this._adjustCurves(Z,R)}return this._changed(41),y},_adjustCurves:function(y,l){for(var C,d=this._segments,_=this._curves,S=y;S<l;S++)(C=_[S])._path=this,C._segment1=d[S],C._segment2=d[S+1]||d[0],C._changed();(C=_[this._closed&&!y?d.length-1:y-1])&&(C._segment2=d[y]||d[0],C._changed()),(C=_[l])&&(C._segment1=d[l],C._changed())},_countCurves:function(){var y=this._segments.length;return!this._closed&&y>0?y-1:y},add:function(y){var l=arguments;return l.length>1&&"number"!=typeof y?this._add(Ht.readList(l)):this._add([Ht.read(l)])[0]},insert:function(y,l){var d=arguments;return d.length>2&&"number"!=typeof l?this._add(Ht.readList(d,1),y):this._add([Ht.read(d,1)],y)[0]},addSegment:function(){return this._add([Ht.read(arguments)])[0]},insertSegment:function(y){return this._add([Ht.read(arguments,1)],y)[0]},addSegments:function(y){return this._add(Ht.readList(y))},insertSegments:function(y,l){return this._add(Ht.readList(l),y)},removeSegment:function(y){return this.removeSegments(y,y+1)[0]||null},removeSegments:function(y,l,d){y=y||0,l=q.pick(l,this._segments.length);var _=this._segments,C=this._curves,S=_.length,k=_.splice(y,l-y),N=k.length;if(!N)return k;for(var z=0;z<N;z++){var D=k[z];D._selection&&this._updateSelection(D,D._selection,0),D._index=D._path=null}z=y;for(var H=_.length;z<H;z++)_[z]._index=z;if(C){var Z=y>0&&l===S+(this._closed?1:0)?y-1:y;for(z=(C=C.splice(Z,N)).length-1;z>=0;z--)C[z]._path=null;d&&(k._curves=C.slice(1)),this._adjustCurves(Z,Z)}return this._changed(41),k},clear:"#removeSegments",hasHandles:function(){for(var y=this._segments,l=0,d=y.length;l<d;l++)if(y[l].hasHandles())return!0;return!1},clearHandles:function(){for(var y=this._segments,l=0,d=y.length;l<d;l++)y[l].clearHandles()},getLength:function(){if(null==this._length){for(var y=this.getCurves(),l=0,d=0,_=y.length;d<_;d++)l+=y[d].getLength();this._length=l}return this._length},getArea:function(){var y=this._area;if(null==y){var l=this._segments,d=this._closed;y=0;for(var _=0,C=l.length;_<C;_++){var S=_+1===C;y+=en.getArea(en.getValues(l[_],l[S?0:_+1],null,S&&!d))}this._area=y}return y},isFullySelected:function(){var y=this._segments.length;return this.isSelected()&&y>0&&this._segmentSelection===7*y},setFullySelected:function(y){y&&this._selectSegments(!0),this.setSelected(y)},setSelection:function y(l){1&l||this._selectSegments(!1),y.base.call(this,l)},_selectSegments:function(y){var l=this._segments,d=l.length,_=y?7:0;this._segmentSelection=_*d;for(var C=0;C<d;C++)l[C]._selection=_},_updateSelection:function(y,l,d){y._selection=d,(this._segmentSelection+=d-l)>0&&this.setSelected(!0)},divideAt:function(y){var d,l=this.getLocationAt(y);return l&&(d=l.getCurve().divideAt(l.getCurveOffset()))?d._segment1:null},splitAt:function(y){var l=this.getLocationAt(y),d=l&&l.index,_=l&&l.time;_>.99999999&&(d++,_=0);var k=this.getCurves();if(d>=0&&d<k.length){_>=1e-8&&k[d++].divideAtTime(_);var z,N=this.removeSegments(d,this._segments.length,!0);return this._closed?(this.setClosed(!1),z=this):((z=new xt(st.NO_INSERT)).insertAbove(this),z.copyAttributes(this)),z._add(N,0),this.addSegment(N[0]),z}return null},split:function(y,l){var d,_=l===ie?y:(d=this.getCurves()[y])&&d.getLocationAtTime(l);return null!=_?this.splitAt(_):null},join:function(y,l){var d=l||0;if(y&&y!==this){var _=y._segments,C=this.getLastSegment(),S=y.getLastSegment();if(!S)return this;C&&C._point.isClose(S._point,d)&&y.reverse();var k=y.getFirstSegment();if(C&&C._point.isClose(k._point,d))C.setHandleOut(k._handleOut),this._add(_.slice(1));else{var N=this.getFirstSegment();N&&N._point.isClose(k._point,d)&&y.reverse(),S=y.getLastSegment(),N&&N._point.isClose(S._point,d)?(N.setHandleIn(S._handleIn),this._add(_.slice(0,_.length-1),0)):this._add(_.slice())}y._closed&&this._add([_[0]]),y.remove()}var z=this.getFirstSegment(),D=this.getLastSegment();return z!==D&&z._point.isClose(D._point,d)&&(z.setHandleIn(D._handleIn),D.remove(),this.setClosed(!0)),this},reduce:function(y){for(var l=this.getCurves(),d=y&&y.simplify,_=d?1e-7:0,C=l.length-1;C>=0;C--){var S=l[C];!S.hasHandles()&&(!S.hasLength(_)||d&&S.isCollinear(S.getNext()))&&S.remove()}return this},reverse:function(){this._segments.reverse();for(var y=0,l=this._segments.length;y<l;y++){var d=this._segments[y],_=d._handleIn;d._handleIn=d._handleOut,d._handleOut=_,d._index=y}this._curves=null,this._changed(9)},flatten:function(y){for(var d=new Gn(this,y||.25,256,!0).parts,_=d.length,C=[],S=0;S<_;S++)C.push(new Ht(d[S].curve.slice(0,2)));!this._closed&&_>0&&C.push(new Ht(d[_-1].curve.slice(6))),this.setSegments(C)},simplify:function(y){var l=new ri(this).fit(y||2.5);return l&&this.setSegments(l),!!l},smooth:function(y){var l=this,d=y||{},_=d.type||"asymmetric",C=this._segments,S=C.length,k=this._closed;function N(jn,ii){var Ci=jn&&jn.index;if(null!=Ci){var yi=jn.path;if(yi&&yi!==l)throw new Error(jn._class+" "+Ci+" of "+yi+" is not part of "+l);ii&&jn instanceof en&&Ci++}else Ci="number"==typeof jn?jn:ii;return Math.min(Ci<0&&k?Ci%S:Ci<0?Ci+S:Ci,S-1)}var z=k&&d.from===ie&&d.to===ie,D=N(d.from,0),H=N(d.to,S-1);if(D>H)if(k)D-=S;else{var Z=D;D=H,H=Z}if(/^(?:asymmetric|continuous)$/.test(_)){var $="asymmetric"===_,R=Math.min,Y=H-D+1,he=Y-1,me=z?R(Y,4):1,ve=me,ge=me,pe=[];if(k||(ve=R(1,D),ge=R(1,S-H-1)),(he+=ve+ge)<=1)return;for(var de=0,Ee=D-ve;de<=he;de++,Ee++)pe[de]=C[(Ee<0?Ee+S:Ee)%S]._point;var ke=pe[0]._x+2*pe[1]._x,Xe=pe[0]._y+2*pe[1]._y,je=2,nt=he-1,pt=[ke],gt=[Xe],Wt=[je],Lt=[],Bt=[];for(de=1;de<he;de++){var qt=de<nt,Ye=qt?4:$?3:8,we=qt?2:$?0:1,Ue=(qt||$?1:2)/je;je=Wt[de]=(qt?4:$?2:7)-Ue,ke=pt[de]=Ye*pe[de]._x+we*pe[de+1]._x-Ue*ke,Xe=gt[de]=Ye*pe[de]._y+we*pe[de+1]._y-Ue*Xe}for(Lt[nt]=pt[nt]/Wt[nt],Bt[nt]=gt[nt]/Wt[nt],de=he-2;de>=0;de--)Lt[de]=(pt[de]-Lt[de+1])/Wt[de],Bt[de]=(gt[de]-Bt[de+1])/Wt[de];Lt[he]=(3*pe[he]._x-Lt[nt])/2,Bt[he]=(3*pe[he]._y-Bt[nt])/2,de=ve;var ct=he-ge;for(Ee=D;de<=ct;de++,Ee++){var Dt=C[Ee<0?Ee+S:Ee],wt=Dt._point,nn=Lt[de]-wt._x,On=Bt[de]-wt._y;(z||de<ct)&&Dt.setHandleOut(nn,On),(z||de>ve)&&Dt.setHandleIn(-nn,-On)}}else for(de=D;de<=H;de++)C[de<0?de+S:de].smooth(d,!z&&de===D,!z&&de===H)},toShape:function(y){if(!this._closed)return null;var d,_,C,S,l=this._segments;function k($,R){var Y=l[$],he=Y.getNext(),me=l[R],ve=me.getNext();return Y._handleOut.isZero()&&he._handleIn.isZero()&&me._handleOut.isZero()&&ve._handleIn.isZero()&&he._point.subtract(Y._point).isCollinear(ve._point.subtract(me._point))}function z($){var R=l[$],Y=R.getNext(),he=R._handleOut,me=Y._handleIn,ve=.5522847498307936;if(he.isOrthogonal(me)){var ge=R._point,pe=Y._point,de=new ze(ge,he,!0).intersect(new ze(pe,me,!0),!0);return de&&Q.isZero(he.getLength()/de.subtract(ge).getLength()-ve)&&Q.isZero(me.getLength()/de.subtract(pe).getLength()-ve)}return!1}function D($,R){return l[$]._point.getDistance(l[R]._point)}if(!this.hasHandles()&&4===l.length&&k(0,2)&&k(1,3)&&function N($){var R=l[$],Y=R.getPrevious(),he=R.getNext();return Y._handleOut.isZero()&&R._handleIn.isZero()&&R._handleOut.isZero()&&he._handleIn.isZero()&&R._point.subtract(Y._point).isOrthogonal(he._point.subtract(R._point))}(1)?(d=Vt.Rectangle,_=new Ae(D(0,3),D(0,1)),S=l[1]._point.add(l[2]._point).divide(2)):8===l.length&&z(0)&&z(2)&&z(4)&&z(6)&&k(1,5)&&k(3,7)?(d=Vt.Rectangle,C=(_=new Ae(D(1,6),D(0,3))).subtract(new Ae(D(0,7),D(1,2))).divide(2),S=l[3]._point.add(l[4]._point).divide(2)):4===l.length&&z(0)&&z(1)&&z(2)&&z(3)&&(Q.isZero(D(0,2)-D(1,3))?(d=Vt.Circle,C=D(0,2)/2):(d=Vt.Ellipse,C=new Ae(D(2,0)/2,D(3,1)/2)),S=l[1]._point),d){var H=this.getPosition(!0),Z=new d({center:H,size:_,radius:C,insert:!1});return Z.copyAttributes(this,!0),Z._matrix.prepend(this._matrix),Z.rotate(S.subtract(H).getAngle()+90),(y===ie||y)&&Z.insertAbove(this),Z}return null},toPath:"#clone",compare:function y(l){if(!l||l instanceof Jt)return y.base.call(this,l);var d=this.getCurves(),_=l.getCurves(),C=d.length,S=_.length;if(!C||!S)return C==S;for(var D,Z,k=d[0].getValues(),N=[],z=0,H=0,$=0;$<S;$++){var me=_[$].getValues();if(N.push(me),R=en.getOverlaps(k,me)){D=!$&&R[0][0]>0?S-1:$,Z=R[0][1];break}}var ve,Y=Math.abs;for(me=N[D];k&&me;){var R;if((R=en.getOverlaps(k,me))&&Y(R[0][0]-H)<1e-8){1===(H=R[1][0])&&(k=++z<C?d[z].getValues():null,H=0);var pe=R[0][1];if(Y(pe-Z)<1e-8){if(ve||(ve=[D,pe]),1===(Z=R[1][1])&&(++D>=S&&(D=0),me=N[D]||_[D].getValues(),Z=0),!k)return ve[0]===D&&ve[1]===Z;continue}}break}return!1},_hitTestSelf:function(y,l,d,_){var Z,$,R,Y,he,me,C=this,S=this.getStyle(),k=this._segments,N=k.length,z=this._closed,D=l._tolerancePadding,H=D,ve=l.stroke&&S.hasStroke(),ge=l.fill&&S.hasFill(),pe=l.curves,de=ve?S.getStrokeWidth()/2:ge&&l.tolerance>0||pe?0:null;function Ee(Lt,Bt){return y.subtract(Lt).divide(Bt).length<=1}function ke(Lt,Bt,qt){if(!l.selected||Bt.isSelected()){var Pe=Lt._point;if(Bt!==Pe&&(Bt=Bt.add(Pe)),Ee(Bt,H))return new Qt(qt,C,{segment:Lt,point:Bt})}}function Xe(Lt,Bt){return(Bt||l.segments)&&ke(Lt,Lt._point,"segment")||!Bt&&l.handles&&(ke(Lt,Lt._handleIn,"handle-in")||ke(Lt,Lt._handleOut,"handle-out"))}function je(Lt){Y.add(Lt)}function nt(Lt){var qt,Bt=z||Lt._index>0&&Lt._index<N-1;return"round"===(Bt?Z:$)?Ee(Lt._point,H):(Y=new xt({internal:!0,closed:!0}),Bt?Lt.isSmooth()||xt._addBevelJoin(Lt,Z,de,R,null,_,je,!0):"square"===$&&xt._addSquareCap(Lt,$,de,null,_,je,!0),Y.isEmpty()?void 0:Y.contains(y)||(qt=Y.getNearestLocation(y))&&Ee(qt.getPoint(),D))}if(null!==de&&(de>0?(Z=S.getStrokeJoin(),$=S.getStrokeCap(),R=S.getMiterLimit(),H=H.add(xt._getStrokePadding(de,_))):Z=$="round"),!l.ends||l.segments||z){if(l.segments||l.handles)for(var pt=0;pt<N;pt++)if(me=Xe(k[pt]))return me}else if(me=Xe(k[0],!0)||Xe(k[N-1],!0))return me;if(null!==de){if(he=this.getNearestLocation(y)){var gt=he.getTime();0===gt||1===gt&&N>1?nt(he.getSegment())||(he=null):Ee(he.getPoint(),H)||(he=null)}if(!he&&"miter"===Z&&N>1)for(pt=0;pt<N;pt++){var Wt=k[pt];if(y.getDistance(Wt._point)<=R*de&&nt(Wt)){he=Wt.getLocation();break}}}return!he&&ge&&this._contains(y)||he&&!ve&&!pe?new Qt("fill",this):he?new Qt(ve?"stroke":"curve",this,{location:he,point:he.getPoint()}):null}},q.each(en._evaluateMethods,function(y){this[y+"At"]=function(l){var d=this.getLocationAt(l);return d&&d[y]()}},{beans:!1,getLocationOf:function(){for(var y=Le.read(arguments),l=this.getCurves(),d=0,_=l.length;d<_;d++){var C=l[d].getLocationOf(y);if(C)return C}return null},getOffsetOf:function(){var y=this.getLocationOf.apply(this,arguments);return y?y.getOffset():null},getLocationAt:function(y){if("number"==typeof y){for(var l=this.getCurves(),d=0,_=0,C=l.length;_<C;_++){var S=d,k=l[_];if((d+=k.getLength())>y)return k.getLocationAt(y-S)}if(l.length>0&&y<=this.getLength())return new Sn(l[l.length-1],1)}else if(y&&y.getPath&&y.getPath()===this)return y;return null},getOffsetsWithTangent:function(){var y=Le.read(arguments);if(y.isZero())return[];for(var l=[],d=0,_=this.getCurves(),C=0,S=_.length;C<S;C++){for(var k=_[C],N=k.getTimesWithTangent(y),z=0,D=N.length;z<D;z++){var H=d+k.getOffsetAtTime(N[z]);l.indexOf(H)<0&&l.push(H)}d+=k.length}return l}}),new function(){function l(d,_,C){var D,H,Z,$,R,Y,he,me,S=_._segments,k=S.length,N=new Array(6),z=!0;function ve(pe){if(C)pe._transformCoordinates(C,N),D=N[0],H=N[1];else{var de=pe._point;D=de._x,H=de._y}var Ee;z?(d.moveTo(D,H),z=!1):(C?(R=N[2],Y=N[3]):(R=D+(Ee=pe._handleIn)._x,Y=H+Ee._y),R===D&&Y===H&&he===Z&&me===$?d.lineTo(D,H):d.bezierCurveTo(he,me,R,Y,D,H)),Z=D,$=H,C?(he=N[4],me=N[5]):(he=Z+(Ee=pe._handleOut)._x,me=$+Ee._y)}for(var ge=0;ge<k;ge++)ve(S[ge]);_._closed&&k>0&&ve(S[0])}return{_draw:function(d,_,C,S){var k=_.dontStart,N=_.dontFinish||_.clip,z=this.getStyle(),D=z.hasFill(),H=z.hasStroke(),Z=z.getDashArray(),$=!fr.support.nativeDash&&H&&Z&&Z.length;function R(pe){return Z[(pe%$+$)%$]}if(k||d.beginPath(),(D||H&&!$||N)&&(l(d,this,S),this._closed&&d.closePath()),!N&&(D||H)&&(this._setStyles(d,_,C),D&&(d.fill(z.getFillRule()),d.shadowColor="rgba(0,0,0,0)"),H)){if($){k||d.beginPath();for(var ve,Y=new Gn(this,.25,32,!1,S),he=Y.length,me=-z.getDashOffset(),ge=0;me>0;)me-=R(ge--)+R(ge--);for(;me<he;)ve=me+R(ge++),(me>0||ve>0)&&Y.drawPart(d,Math.max(me,0),Math.max(ve,0)),me=ve+R(ge++)}d.stroke()}},_drawSelected:function(d,_){d.beginPath(),l(d,this,_),d.stroke(),function y(d,_,C,S){if(!(S<=0))for(var H,Z,k=S/2,N=S-2,z=k-1,D=new Array(6),R=0,Y=_.length;R<Y;R++){var he=_[R],me=he._selection;if(he._transformCoordinates(C,D),H=D[0],Z=D[1],2&me&&$(2),4&me&&$(4),d.fillRect(H-k,Z-k,S,S),N>0&&!(1&me)){var ve=d.fillStyle;d.fillStyle="#ffffff",d.fillRect(H-z,Z-z,N,N),d.fillStyle=ve}}function $(ge){var pe=D[ge],de=D[ge+1];(H!=pe||Z!=de)&&(d.beginPath(),d.moveTo(H,Z),d.lineTo(pe,de),d.stroke(),d.beginPath(),d.arc(pe,de,k,0,2*Math.PI,!0),d.fill())}}(d,this._segments,_,fr.settings.handleSize)}}},new function(){function y(l){var d=l._segments;if(!d.length)throw new Error("Use a moveTo() command first");return d[d.length-1]}return{moveTo:function(){var l=this._segments;1===l.length&&this.removeSegment(0),l.length||this._add([new Ht(Le.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Ht(Le.read(arguments))])},cubicCurveTo:function(){var l=arguments,d=Le.read(l),_=Le.read(l),C=Le.read(l),S=y(this);S.setHandleOut(d.subtract(S._point)),this._add([new Ht(C,_.subtract(C))])},quadraticCurveTo:function(){var l=arguments,d=Le.read(l),_=Le.read(l),C=y(this)._point;this.cubicCurveTo(d.add(C.subtract(d).multiply(1/3)),d.add(_.subtract(d).multiply(1/3)),_)},curveTo:function(){var l=arguments,d=Le.read(l),_=Le.read(l),C=q.pick(q.read(l),.5),S=1-C,k=y(this)._point,N=d.subtract(k.multiply(S*S)).subtract(_.multiply(C*C)).divide(2*C*S);if(N.isNaN())throw new Error("Cannot put a curve through points with parameter = "+C);this.quadraticCurveTo(N,_)},arcTo:function(){var H,Z,$,R,l=arguments,d=Math.abs,_=Math.sqrt,C=y(this),S=C._point,k=Le.read(l),z=q.peek(l);if("boolean"==typeof(D=q.pick(z,!0)))var N=(Y=S.add(k).divide(2)).add(Y.subtract(S).rotate(D?-90:90));else if(q.remain(l)<=2)N=k,k=Le.read(l);else if(!S.equals(k)){var he=Ae.read(l),me=Q.isZero;if(me(he.width)||me(he.height))return this.lineTo(k);var ve=q.read(l),D=!!q.read(l),ge=!!q.read(l),Y=S.add(k).divide(2),de=(pe=S.subtract(Y).rotate(-ve)).x,Ee=pe.y,ke=d(he.width),Xe=d(he.height),je=ke*ke,nt=Xe*Xe,pt=de*de,gt=Ee*Ee,Wt=_(pt/je+gt/nt);if(Wt>1&&(je=(ke*=Wt)*ke,nt=(Xe*=Wt)*Xe),d(Wt=(je*nt-je*gt-nt*pt)/(je*gt+nt*pt))<1e-12&&(Wt=0),Wt<0)throw new Error("Cannot create an arc with the given arguments");H=new Le(ke*Ee/Xe,-Xe*de/ke).multiply((ge===D?-1:1)*_(Wt)).rotate(ve).add(Y),Z=($=(R=(new Ce).translate(H).rotate(ve).scale(ke,Xe))._inverseTransform(S)).getDirectedAngle(R._inverseTransform(k)),!D&&Z>0?Z-=360:D&&Z<0&&(Z+=360)}if(N){var Lt=new ze(S.add(N).divide(2),N.subtract(S).rotate(90),!0),Bt=new ze(N.add(k).divide(2),k.subtract(N).rotate(90),!0),qt=new ze(S,k),Pe=qt.getSide(N);if(!(H=Lt.intersect(Bt,!0))){if(!Pe)return this.lineTo(k);throw new Error("Cannot create an arc with the given arguments")}Z=($=S.subtract(H)).getDirectedAngle(k.subtract(H));var We=qt.getSide(H,!0);0===We?Z=Pe*d(Z):Pe===We&&(Z+=Z<0?360:-360)}if(Z){for(var Ye=1e-5,we=d(Z),Ue=we>=360?4:Math.ceil((we-Ye)/90),ct=Z/Ue,Dt=ct*Math.PI/360,wt=4/3*Math.sin(Dt)/(1+Math.cos(Dt)),nn=[],On=0;On<=Ue;On++){var pe=k,jn=null;if(On<Ue&&(jn=$.rotate(90).multiply(wt),R?(pe=R._transformPoint($),jn=R._transformPoint($.add(jn)).subtract(pe)):pe=H.add($)),On){var ii=$.rotate(-90).multiply(wt);R&&(ii=R._transformPoint($.add(ii)).subtract(pe)),nn.push(new Ht(pe,ii,jn))}else C.setHandleOut(jn);$=$.rotate(ct)}this._add(nn)}},lineBy:function(){var l=Le.read(arguments),d=y(this)._point;this.lineTo(d.add(l))},curveBy:function(){var l=arguments,d=Le.read(l),_=Le.read(l),C=q.read(l),S=y(this)._point;this.curveTo(S.add(d),S.add(_),C)},cubicCurveBy:function(){var l=arguments,d=Le.read(l),_=Le.read(l),C=Le.read(l),S=y(this)._point;this.cubicCurveTo(S.add(d),S.add(_),S.add(C))},quadraticCurveBy:function(){var l=arguments,d=Le.read(l),_=Le.read(l),C=y(this)._point;this.quadraticCurveTo(C.add(d),C.add(_))},arcBy:function(){var l=arguments,d=y(this)._point,_=d.add(Le.read(l)),C=q.pick(q.peek(l),!0);this.arcTo(_,"boolean"==typeof C?C:d.add(Le.read(l)))},closePath:function(l){this.setClosed(!0),this.join(this,l)}}},{_getBounds:function(y,l){return xt[l.handle?"getHandleBounds":l.stroke?"getStrokeBounds":"getBounds"](this._segments,this._closed,this,y,l)},statics:{getBounds:function(y,l,d,_,C,S){var k=y[0];if(!k)return new L;var N=new Array(6),z=k._transformCoordinates(_,new Array(6)),D=z.slice(0,2),H=D.slice(),Z=new Array(2);function $(he){he._transformCoordinates(_,N);for(var me=0;me<2;me++)en._addBounds(z[me],z[me+4],N[me+2],N[me],me,S?S[me]:0,D,H,Z);var ve=z;z=N,N=ve}for(var R=1,Y=y.length;R<Y;R++)$(y[R]);return l&&$(k),new L(D[0],D[1],H[0]-D[0],H[1]-D[1])},getStrokeBounds:function(y,l,d,_,C){var S=d.getStyle(),k=S.hasStroke(),N=S.getStrokeWidth(),z=k&&d._getStrokeMatrix(_,C),D=k&&xt._getStrokePadding(N,z),H=xt.getBounds(y,l,d,_,C,D);if(!k)return H;var Z=N/2,$=S.getStrokeJoin(),R=S.getStrokeCap(),Y=S.getMiterLimit(),he=new L(new Ae(D));function me(ke){H=H.include(ke)}function ve(ke){H=H.unite(he.setCenter(ke._point.transform(_)))}function ge(ke,Xe){"round"===Xe||ke.isSmooth()?ve(ke):xt._addBevelJoin(ke,Xe,Z,Y,_,z,me)}function pe(ke,Xe){"round"===Xe?ve(ke):xt._addSquareCap(ke,Xe,Z,_,z,me)}var de=y.length-(l?0:1);if(de>0){for(var Ee=1;Ee<de;Ee++)ge(y[Ee],$);l?ge(y[0],$):(pe(y[0],R),pe(y[y.length-1],R))}return H},_getStrokePadding:function(y,l){if(!l)return[y,y];var d=new Le(y,0).transform(l),_=new Le(0,y).transform(l),C=d.getAngleInRadians(),S=d.getLength(),k=_.getLength(),N=Math.sin(C),z=Math.cos(C),D=Math.tan(C),H=Math.atan2(k*D,S),Z=Math.atan2(k,D*S);return[Math.abs(S*Math.cos(H)*z+k*Math.sin(H)*N),Math.abs(k*Math.sin(Z)*z+S*Math.cos(Z)*N)]},_addBevelJoin:function(y,l,d,_,C,S,k,N){var z=y.getCurve(),D=z.getPrevious(),H=z.getPoint1().transform(C),Z=D.getNormalAtTime(1).multiply(d).transform(S),$=z.getNormalAtTime(0).multiply(d).transform(S),R=Z.getDirectedAngle($);if((R<0||R>=180)&&(Z=Z.negate(),$=$.negate()),N&&k(H),k(H.add(Z)),"miter"===l){var Y=new ze(H.add(Z),new Le(-Z.y,Z.x),!0).intersect(new ze(H.add($),new Le(-$.y,$.x),!0),!0);Y&&H.getDistance(Y)<=_*d&&k(Y)}k(H.add($))},_addSquareCap:function(y,l,d,_,C,S,k){var N=y._point.transform(_),z=y.getLocation(),D=z.getNormal().multiply(0===z.getTime()?d:-d).transform(C);"square"===l&&(k&&(S(N.subtract(D)),S(N.add(D))),N=N.add(D.rotate(-90))),S(N.add(D)),S(N.subtract(D))},getHandleBounds:function(y,l,d,_,C){var N,z,S=d.getStyle();if(C.stroke&&S.hasStroke()){var D=d._getStrokeMatrix(_,C),H=S.getStrokeWidth()/2,Z=H;"miter"===S.getStrokeJoin()&&(Z=H*S.getMiterLimit()),"square"===S.getStrokeCap()&&(Z=Math.max(Z,H*Math.SQRT2)),N=xt._getStrokePadding(H,D),z=xt._getStrokePadding(Z,D)}for(var $=new Array(6),R=1/0,Y=-R,he=R,me=Y,ve=0,ge=y.length;ve<ge;ve++){y[ve]._transformCoordinates(_,$);for(var de=0;de<6;de+=2){var Ee=de?N:z,ke=Ee?Ee[0]:0,Xe=Ee?Ee[1]:0,je=$[de],nt=$[de+1],pt=je-ke,gt=je+ke,Wt=nt-Xe,Lt=nt+Xe;pt<R&&(R=pt),gt>Y&&(Y=gt),Wt<he&&(he=Wt),Lt>me&&(me=Lt)}}return new L(R,he,Y-R,me-he)}}});xt.inject({statics:new function(){var y=.5522847498307936,l=[new Ht([-1,0],[0,y],[0,-y]),new Ht([0,-1],[-y,0],[y,0]),new Ht([1,0],[0,-y],[0,y]),new Ht([0,1],[y,0],[-y,0])];function d(C,S,k){var N=q.getNamed(k),z=new xt(N&&(1==N.insert?st.INSERT:0==N.insert?st.NO_INSERT:null));return z._add(C),z._closed=S,z.set(N,st.INSERT)}function _(C,S,k){for(var N=new Array(4),z=0;z<4;z++){var D=l[z];N[z]=new Ht(D._point.multiply(S).add(C),D._handleIn.multiply(S),D._handleOut.multiply(S))}return d(N,!0,k)}return{Line:function(){var C=arguments;return d([new Ht(Le.readNamed(C,"from")),new Ht(Le.readNamed(C,"to"))],!1,C)},Circle:function(){var C=arguments,S=Le.readNamed(C,"center"),k=q.readNamed(C,"radius");return _(S,new Ae(k),C)},Rectangle:function(){var Z,C=arguments,S=L.readNamed(C,"rectangle"),k=Ae.readNamed(C,"radius",0,{readNull:!0}),N=S.getBottomLeft(!0),z=S.getTopLeft(!0),D=S.getTopRight(!0),H=S.getBottomRight(!0);if(!k||k.isZero())Z=[new Ht(N),new Ht(z),new Ht(D),new Ht(H)];else{var $=(k=Ae.min(k,S.getSize(!0).divide(2))).width,R=k.height,Y=$*y,he=R*y;Z=[new Ht(N.add($,0),null,[-Y,0]),new Ht(N.subtract(0,R),[0,he]),new Ht(z.add(0,R),null,[0,-he]),new Ht(z.add($,0),[-Y,0],null),new Ht(D.subtract($,0),null,[Y,0]),new Ht(D.add(0,R),[0,-he],null),new Ht(H.subtract(0,R),null,[0,he]),new Ht(H.subtract($,0),[Y,0])]}return d(Z,!0,C)},RoundRectangle:"#Rectangle",Ellipse:function(){var C=arguments,S=Vt._readEllipse(C);return _(S.center,S.radius,C)},Oval:"#Ellipse",Arc:function(){var C=arguments,S=Le.readNamed(C,"from"),k=Le.readNamed(C,"through"),N=Le.readNamed(C,"to"),z=q.getNamed(C),D=new xt(z&&0==z.insert&&st.NO_INSERT);return D.moveTo(S),D.arcTo(k,N),D.set(z)},RegularPolygon:function(){for(var C=arguments,S=Le.readNamed(C,"center"),k=q.readNamed(C,"sides"),N=q.readNamed(C,"radius"),z=360/k,D=k%3==0,H=new Le(0,D?-N:N),Z=D?-1:.5,$=new Array(k),R=0;R<k;R++)$[R]=new Ht(S.add(H.rotate((R+Z)*z)));return d($,!0,C)},Star:function(){for(var C=arguments,S=Le.readNamed(C,"center"),k=2*q.readNamed(C,"points"),N=q.readNamed(C,"radius1"),z=q.readNamed(C,"radius2"),D=360/k,H=new Le(0,-1),Z=new Array(k),$=0;$<k;$++)Z[$]=new Ht(S.add(H.rotate(D*$).multiply($%2?z:N)));return d(Z,!0,C)}}}});var Jt=Pn.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(l){this._children=[],this._namedChildren={},this._initialize(l)||("string"==typeof l?this.setPathData(l):this.addChildren(Array.isArray(l)?l:arguments))},insertChildren:function y(l,d){var _=d,C=_[0];C&&"number"==typeof C[0]&&(_=[_]);for(var S=d.length-1;S>=0;S--){var k=_[S];_===d&&!(k instanceof xt)&&(_=q.slice(_)),Array.isArray(k)?_[S]=new xt({segments:k,insert:!1}):k instanceof Jt&&(_.splice.apply(_,[S,1].concat(k.removeChildren())),k.remove())}return y.base.call(this,l,_)},reduce:function y(l){for(var d=this._children,_=d.length-1;_>=0;_--)(C=d[_].reduce(l)).isEmpty()&&C.remove();var C;return d.length?y.base.call(this):((C=new xt(st.NO_INSERT)).copyAttributes(this),C.insertAbove(this),this.remove(),C)},isClosed:function(){for(var y=this._children,l=0,d=y.length;l<d;l++)if(!y[l]._closed)return!1;return!0},setClosed:function(y){for(var l=this._children,d=0,_=l.length;d<_;d++)l[d].setClosed(y)},getFirstSegment:function(){var y=this.getFirstChild();return y&&y.getFirstSegment()},getLastSegment:function(){var y=this.getLastChild();return y&&y.getLastSegment()},getCurves:function(){for(var y=this._children,l=[],d=0,_=y.length;d<_;d++)q.push(l,y[d].getCurves());return l},getFirstCurve:function(){var y=this.getFirstChild();return y&&y.getFirstCurve()},getLastCurve:function(){var y=this.getLastChild();return y&&y.getLastCurve()},getArea:function(){for(var y=this._children,l=0,d=0,_=y.length;d<_;d++)l+=y[d].getArea();return l},getLength:function(){for(var y=this._children,l=0,d=0,_=y.length;d<_;d++)l+=y[d].getLength();return l},getPathData:function(y,l){for(var d=this._children,_=[],C=0,S=d.length;C<S;C++){var k=d[C],N=k._matrix;_.push(k.getPathData(y&&!N.isIdentity()?y.appended(N):y,l))}return _.join("")},_hitTestChildren:function y(l,d,_){return y.base.call(this,l,d.class===xt||"path"===d.type?d:q.set({},d,{fill:!1}),_)},_draw:function(y,l,d,_){var C=this._children;if(C.length){l=l.extend({dontStart:!0,dontFinish:!0}),y.beginPath();for(var S=0,k=C.length;S<k;S++)C[S].draw(y,l,_);if(!l.clip){this._setStyles(y,l,d);var N=this._style;N.hasFill()&&(y.fill(N.getFillRule()),y.shadowColor="rgba(0,0,0,0)"),N.hasStroke()&&y.stroke()}}},_drawSelected:function(y,l,d){for(var _=this._children,C=0,S=_.length;C<S;C++){var k=_[C],N=k._matrix;d[k._id]||k._drawSelected(y,N.isIdentity()?l:l.appended(N))}}},new function(){function y(l,d){var _=l._children;if(d&&!_.length)throw new Error("Use a moveTo() command first");return _[_.length-1]}return q.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(l){this[l]=function(){var d=y(this,!0);d[l].apply(d,arguments)}},{moveTo:function(){var l=y(this),d=l&&l.isEmpty()?l:new xt(st.NO_INSERT);d!==l&&this.addChild(d),d.moveTo.apply(d,arguments)},moveBy:function(){var l=y(this,!0),d=l&&l.getLastSegment(),_=Le.read(arguments);this.moveTo(d?_.add(d._point):_)},closePath:function(l){y(this,!0).closePath(l)}})},q.each(["reverse","flatten","simplify","smooth"],function(y){this[y]=function(l){for(var _,d=this._children,C=0,S=d.length;C<S;C++)_=d[C][y](l)||_;return _}},{}));Pn.inject(new function(){var y=Math.min,l=Math.max,d=Math.abs,_={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function C(ve){return ve._children||[ve]}function S(ve,ge){var pe=ve.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(ge){for(var de=C(pe),Ee=0,ke=de.length;Ee<ke;Ee++)!(ve=de[Ee])._closed&&!ve.isEmpty()&&(ve.closePath(1e-12),ve.getFirstSegment().setHandleIn(0,0),ve.getLastSegment().setHandleOut(0,0));pe=pe.resolveCrossings().reorient("nonzero"===pe.getFillRule(),!0)}return pe}function k(ve,ge,pe,de,Ee){var ke=new Jt(st.NO_INSERT);return ke.addChildren(ve,!0),ke=ke.reduce({simplify:ge}),Ee&&0==Ee.insert||ke.insertAbove(de&&pe.isSibling(de)&&pe.getIndex()<de.getIndex()?de:pe),ke.copyAttributes(pe,!0),ke}function N(ve){return ve.hasOverlap()||ve.isCrossing()}function z(ve,ge,pe,de){if(de&&(0==de.trace||de.stroke)&&/^(subtract|intersect)$/.test(pe))return D(ve,ge,pe);var Ee=S(ve,!0),ke=ge&&ve!==ge&&S(ge,!0),Xe=_[pe];Xe[pe]=!0,ke&&(Xe.subtract||Xe.exclude)^ke.isClockwise()^Ee.isClockwise()&&ke.reverse();var Lt,je=R(Sn.expand(Ee.getIntersections(ke,N))),nt=C(Ee),pt=ke&&C(ke),gt=[],Wt=[];function Bt(jn){for(var ii=0,Ci=jn.length;ii<Ci;ii++){var yi=jn[ii];q.push(gt,yi._segments),q.push(Wt,yi.getCurves()),yi._overlapsOnly=!0}}function qt(jn){for(var ii=[],Ci=0,yi=jn&&jn.length;Ci<yi;Ci++)ii.push(Wt[jn[Ci]]);return ii}if(je.length){Bt(nt),pt&&Bt(pt);for(var Pe=new Array(Wt.length),We=0,Ye=Wt.length;We<Ye;We++)Pe[We]=Wt[We].getValues();var we=xe.findCurveBoundsCollisions(Pe,Pe,0,!0),Ue={};for(We=0;We<Wt.length;We++){var ct=Wt[We],Dt=ct._path._id;(Ue[Dt]=Ue[Dt]||{})[ct.getIndex()]={hor:qt(we[We].hor),ver:qt(we[We].ver)}}for(We=0,Ye=je.length;We<Ye;We++)he(je[We]._segment,Ee,ke,Ue,Xe);for(We=0,Ye=gt.length;We<Ye;We++){var nn=gt[We],On=nn._intersection;nn._winding||he(nn,Ee,ke,Ue,Xe),On&&On._overlap||(nn._path._overlapsOnly=!1)}Lt=me(gt,Xe)}else Lt=$(pt?nt.concat(pt):nt.slice(),function(jn){return!!Xe[jn]});return k(Lt,!0,ve,ge,de)}function D(ve,ge,pe){var de=S(ve),Ee=S(ge),ke=de.getIntersections(Ee,N),Xe="subtract"===pe,je="divide"===pe,nt={},pt=[];function gt(Bt){if(!nt[Bt._id]&&(je||Ee.contains(Bt.getPointAt(Bt.getLength()/2))^Xe))return pt.unshift(Bt),nt[Bt._id]=!0}for(var Wt=ke.length-1;Wt>=0;Wt--){var Lt=ke[Wt].split();Lt&&(gt(Lt)&&Lt.getFirstSegment().setHandleIn(0,0),de.getLastSegment().setHandleOut(0,0))}return gt(de),k(pt,!1,ve,ge)}function H(ve,ge){for(var pe=ve;pe;){if(pe===ge)return;pe=pe._previous}for(;ve._next&&ve._next!==ge;)ve=ve._next;if(!ve._next){for(;ge._previous;)ge=ge._previous;ve._next=ge,ge._previous=ve}}function Z(ve){for(var ge=ve.length-1;ge>=0;ge--)ve[ge].clearHandles()}function $(ve,ge,pe){var de=ve&&ve.length;if(de){var Ee=q.each(ve,function(we,Ue){this[we._id]={container:null,winding:we.isClockwise()?1:-1,index:Ue}},{}),ke=ve.slice().sort(function(we,Ue){return d(Ue.getArea())-d(we.getArea())}),Xe=ke[0],je=xe.findItemBoundsCollisions(ke,null,Q.GEOMETRIC_EPSILON);null==pe&&(pe=Xe.isClockwise());for(var nt=0;nt<de;nt++){var pt=ke[nt],gt=Ee[pt._id],Wt=0,Lt=je[nt];if(Lt)for(var Bt=null,qt=Lt.length-1;qt>=0;qt--)if(Lt[qt]<nt){Bt=Bt||pt.getInteriorPoint();var Pe=ke[Lt[qt]];if(Pe.contains(Bt)){var We=Ee[Pe._id];gt.winding+=Wt=We.winding,gt.container=We.exclude?We.container:Pe;break}}if(ge(gt.winding)===ge(Wt))gt.exclude=!0,ve[gt.index]=null;else{var Ye=gt.container;pt.setClockwise(Ye?!Ye.isClockwise():pe)}}}return ve}function R(ve,ge,pe){var pt,gt,Wt,de=ge&&[],Xe=!1,je=pe||[],nt=pe&&{};function Lt(ii){return ii._path._id+"."+ii._segment1._index}for(var Bt=(pe&&pe.length)-1;Bt>=0;Bt--)(qt=pe[Bt])._path&&(nt[Lt(qt)]=!0);for(Bt=ve.length-1;Bt>=0;Bt--){var qt,Ue,Pe=ve[Bt],We=Pe._time,Ye=We,we=ge&&!ge(Pe);if((qt=Pe._curve)&&(qt!==gt?(Xe=!qt.hasHandles()||nt&&nt[Lt(qt)],pt=[],Wt=null,gt=qt):Wt>=1e-8&&(We/=Wt)),we)pt&&pt.push(Pe);else{if(ge&&de.unshift(Pe),Wt=Ye,We<1e-8)Ue=qt._segment1;else if(We>.99999999)Ue=qt._segment2;else{var ct=qt.divideAtTime(We,!0);Xe&&je.push(qt,ct),Ue=ct._segment1;for(var Dt=pt.length-1;Dt>=0;Dt--){var wt=pt[Dt];wt._time=(wt._time-We)/(1-We)}}Pe._setSegment(Ue);var nn=Ue._intersection,On=Pe._intersection;if(nn){H(nn,On);for(var jn=nn;jn;)H(jn._intersection,nn),jn=jn._next}else Ue._intersection=On}}return pe||Z(je),de||ve}function Y(ve,ge,pe,de,Ee){var nn,On,ke=Array.isArray(ge)?ge:ge[pe?"hor":"ver"],Xe=pe?1:0,je=1^Xe,nt=[ve.x,ve.y],pt=nt[Xe],gt=nt[je],Bt=pt-1e-9,qt=pt+1e-9,Pe=0,We=0,Ye=0,we=0,Ue=!1,ct=!1,Dt=1,wt=[];function jn(wr){var rs=wr[je+0],ss=wr[je+6];if(!(gt<y(rs,ss)||gt>l(rs,ss))){var Xr=wr[Xe+0],Kr=wr[Xe+2],La=wr[Xe+4],eo=wr[Xe+6];if(rs===ss)return void((Xr<qt&&eo>Bt||eo<qt&&Xr>Bt)&&(Ue=!0));var Qi=gt===rs?0:gt===ss||Bt>l(Xr,Kr,La,eo)||qt<y(Xr,Kr,La,eo)?1:en.solveCubic(wr,je,gt,wt,0,1)>0?wt[0]:1,Ea=0===Qi?Xr:1===Qi?eo:en.getPoint(wr,Qi)[pe?"y":"x"],As=rs>ss?1:-1,Be=nn[Xe+6];return gt!==rs?(Ea<Bt?Ye+=As:Ea>qt?we+=As:Ue=!0,Ea>pt-1e-6&&Ea<pt+1e-6&&(Dt/=2)):(As!==(nn[je]>nn[je+6]?1:-1)?Xr<Bt?Ye+=As:Xr>qt&&(we+=As):Xr!=Be&&(Be<qt&&Ea>qt?(we+=As,Ue=!0):Be>Bt&&Ea<Bt&&(Ye+=As,Ue=!0)),Dt/=4),nn=wr,!Ee&&Ea>Bt&&Ea<qt&&0===en.getTangent(wr,Qi)[pe?"x":"y"]&&Y(ve,ge,!pe,de,!0)}}function ii(wr){var rs=wr[je+0],ss=wr[je+2],Xr=wr[je+4],Kr=wr[je+6];if(gt<=l(rs,ss,Xr,Kr)&&gt>=y(rs,ss,Xr,Kr))for(var B,La=wr[Xe+0],eo=wr[Xe+2],Qi=wr[Xe+4],Ea=wr[Xe+6],As=Bt>l(La,eo,Qi,Ea)||qt<y(La,eo,Qi,Ea)?[wr]:en.getMonoCurves(wr,pe),Be=0,Mt=As.length;Be<Mt;Be++)if(B=jn(As[Be]))return B}for(var Ci=0,yi=ke.length;Ci<yi;Ci++){var is,Ei=ke[Ci],Ai=Ei._path,or=Ei.getValues();if(!(Ci&&ke[Ci-1]._path===Ai||(nn=null,Ai._closed||(On=en.getValues(Ai.getLastCurve().getSegment2(),Ei.getSegment1(),null,!de),On[je]!==On[je+6]&&(nn=On)),nn))){nn=or;for(var _r=Ai.getLastCurve();_r&&_r!==Ei;){var ws=_r.getValues();if(ws[je]!==ws[je+6]){nn=ws;break}_r=_r.getPrevious()}}if(is=ii(or))return is;if(Ci+1===yi||ke[Ci+1]._path!==Ai){if(On&&(is=ii(On)))return is;Ue&&!Ye&&!we&&(Ye=we=Ai.isClockwise(de)^pe?1:-1),Pe+=Ye,We+=we,Ye=we=0,Ue&&(ct=!0,Ue=!1),On=null}}return Pe=d(Pe),We=d(We),{winding:l(Pe,We),windingL:Pe,windingR:We,quality:Dt,onPath:ct}}function he(ve,ge,pe,de,Ee){var ke=[],Xe=ve,je=0;do{if(nt=ve.getCurve()){var pt=nt.getLength();ke.push({segment:ve,curve:nt,length:pt}),je+=pt}ve=ve.getNext()}while(ve&&!ve._intersection&&ve!==Xe);for(var gt=[.5,.25,.75],Wt={winding:0,quality:-1},qt=0;qt<gt.length&&Wt.quality<.5;qt++){pt=je*gt[qt];for(var Pe=0,We=ke.length;Pe<We;Pe++){var Ye=ke[Pe],we=Ye.length;if(pt<=we){var nt,Ue=(nt=Ye.curve)._path,ct=Ue._parent,Dt=ct instanceof Jt?ct:Ue,wt=Q.clamp(nt.getTimeAt(pt),.001,.999),nn=nt.getPointAtTime(wt),On=d(nt.getTangentAtTime(wt).y)<Math.SQRT1_2,jn=null;if(Ee.subtract&&pe){var Ci=(Dt===ge?pe:ge)._getWinding(nn,On,!0);if(Dt===ge&&Ci.winding||Dt===pe&&!Ci.winding){if(Ci.quality<1)continue;jn={winding:0,quality:1}}}(jn=jn||Y(nn,de[Ue._id][nt.getIndex()],On,!0)).quality>Wt.quality&&(Wt=jn);break}pt-=we}}for(Pe=ke.length-1;Pe>=0;Pe--)ke[Pe].segment._winding=Wt}function me(ve,ge){var de,pe=[];function Ee(yi){var Ei;return!(!yi||yi._visited||ge&&(!ge[(Ei=yi._winding||{}).winding]||ge.unite&&2===Ei.winding&&Ei.windingL&&Ei.windingR))}function ke(yi){if(yi)for(var Ei=0,Ai=de.length;Ei<Ai;Ei++)if(yi===de[Ei])return!0;return!1}function Xe(yi){for(var Ei=yi._segments,Ai=0,or=Ei.length;Ai<or;Ai++)Ei[Ai]._visited=!0}function je(yi,Ei){var Ai=yi._intersection,or=Ai,is=[];function _r(ws,wr){for(;ws&&ws!==wr;){var rs=ws._segment,ss=rs&&rs._path;if(ss){var Xr=rs.getNext()||ss.getFirstSegment(),Kr=Xr._intersection;rs!==yi&&(ke(rs)||ke(Xr)||Xr&&Ee(rs)&&(Ee(Xr)||Kr&&Ee(Kr._segment)))&&is.push(rs),Ei&&de.push(rs)}ws=ws._next}}if(Ei&&(de=[yi]),Ai){for(_r(Ai);Ai&&Ai._previous;)Ai=Ai._previous;_r(Ai,or)}return is}ve.sort(function(yi,Ei){var Ai=yi._intersection,or=Ei._intersection,is=!(!Ai||!Ai._overlap),ws=yi._path,wr=Ei._path;return is^!(!or||!or._overlap)?is?1:-1:!Ai^!or?Ai?1:-1:ws!==wr?ws._id-wr._id:yi._index-Ei._index});for(var nt=0,pt=ve.length;nt<pt;nt++){var We,Ye,we,gt=ve[nt],Wt=Ee(gt),Lt=null,Bt=!1,qt=!0,Pe=[];if(Wt&&gt._path._overlapsOnly){var Ue=gt._path,ct=gt._intersection._segment._path;Ue.compare(ct)&&(Ue.getArea()&&pe.push(Ue.clone(!1)),Xe(Ue),Xe(ct),Wt=!1)}for(;Wt;){var Dt=!Lt,wt=je(gt,Dt),nn=wt.shift(),On=!(Bt=!Dt&&(ke(gt)||ke(nn)))&&nn;if(Dt&&(Lt=new xt(st.NO_INSERT),We=null),Bt){(gt.isFirst()||gt.isLast())&&(qt=gt._path._closed),gt._visited=!0;break}if(On&&We&&(Pe.push(We),We=null),We||(On&&wt.push(gt),We={start:Lt._segments.length,crossings:wt,visited:Ye=[],handleIn:we}),On&&(gt=nn),!Ee(gt)){Lt.removeSegments(We.start);for(var jn=0,ii=Ye.length;jn<ii;jn++)Ye[jn]._visited=!1;Ye.length=0;do{(!(gt=We&&We.crossings.shift())||!gt._path)&&(gt=null,(We=Pe.pop())&&(Ye=We.visited,we=We.handleIn))}while(We&&!Ee(gt));if(!gt)break}var Ci=gt.getNext();Lt.add(new Ht(gt._point,we,Ci&&gt._handleOut)),gt._visited=!0,Ye.push(gt),gt=Ci||gt._path.getFirstSegment(),we=Ci&&Ci._handleIn}Bt&&(qt&&(Lt.getFirstSegment().setHandleIn(we),Lt.setClosed(qt)),0!==Lt.getArea()&&pe.push(Lt))}return pe}return{_getWinding:function(ve,ge,pe){return Y(ve,this.getCurves(),ge,pe)},unite:function(ve,ge){return z(this,ve,"unite",ge)},intersect:function(ve,ge){return z(this,ve,"intersect",ge)},subtract:function(ve,ge){return z(this,ve,"subtract",ge)},exclude:function(ve,ge){return z(this,ve,"exclude",ge)},divide:function(ve,ge){return ge&&(0==ge.trace||ge.stroke)?D(this,ve,"divide"):k([this.subtract(ve,ge),this.intersect(ve,ge)],!0,this,ve,ge)},resolveCrossings:function(){var ve=this._children,ge=ve||[this];function pe(We,Ye){var we=We&&We._intersection;return we&&we._overlap&&we._path===Ye}var de=!1,Ee=!1,ke=this.getIntersections(null,function(We){return We.hasOverlap()&&(de=!0)||We.isCrossing()&&(Ee=!0)}),Xe=de&&Ee&&[];if(ke=Sn.expand(ke),de)for(var je=R(ke,function(We){return We.hasOverlap()},Xe),nt=je.length-1;nt>=0;nt--){var pt=je[nt],gt=pt._path,Wt=pt._segment,Lt=Wt.getPrevious(),Bt=Wt.getNext();pe(Lt,gt)&&pe(Bt,gt)&&(Wt.remove(),Lt._handleOut._set(0,0),Bt._handleIn._set(0,0),Lt!==Wt&&!Lt.getCurve().hasLength()&&(Bt._handleIn.set(Lt._handleIn),Lt.remove()))}Ee&&(R(ke,de&&function(We){var Ye=We.getCurve(),we=We.getSegment(),Ue=We._intersection,ct=Ue._curve,Dt=Ue._segment;if(Ye&&ct&&Ye._path&&ct._path)return!0;we&&(we._intersection=null),Dt&&(Dt._intersection=null)},Xe),Xe&&Z(Xe),ge=me(q.each(ge,function(We){q.push(this,We._segments)},[])));var Pe,qt=ge.length;return qt>1&&ve?(ge!==ve&&this.setChildren(ge),Pe=this):1===qt&&!ve&&(ge[0]!==this&&this.setSegments(ge[0].removeSegments()),Pe=this),Pe||((Pe=new Jt(st.NO_INSERT)).addChildren(ge),(Pe=Pe.reduce()).copyAttributes(this),this.replaceWith(Pe)),Pe},reorient:function(ve,ge){var pe=this._children;return pe&&pe.length?this.setChildren($(this.removeChildren(),function(de){return!!(ve?de:1&de)},ge)):ge!==ie&&this.setClockwise(ge),this},getInteriorPoint:function(){var ge=this.getBounds().getCenter(!0);if(!this.contains(ge)){for(var pe=this.getCurves(),de=ge.y,Ee=[],ke=[],Xe=0,je=pe.length;Xe<je;Xe++){var nt=pe[Xe].getValues(),pt=nt[1],gt=nt[3],Wt=nt[5],Lt=nt[7];if(de>=y(pt,gt,Wt,Lt)&&de<=l(pt,gt,Wt,Lt))for(var Bt=en.getMonoCurves(nt),qt=0,Pe=Bt.length;qt<Pe;qt++){var We=Bt[qt],Ye=We[1],we=We[7];if(Ye!==we&&(de>=Ye&&de<=we||de>=we&&de<=Ye)){var Ue=de===Ye?We[0]:de===we?We[6]:1===en.solveCubic(We,1,de,ke,0,1)?en.getPoint(We,ke[0]).x:(We[0]+We[6])/2;Ee.push(Ue)}}}Ee.length>1&&(Ee.sort(function(ct,Dt){return ct-Dt}),ge.x=(Ee[0]+Ee[1])/2)}return ge}}});var Gn=q.extend({_class:"PathFlattener",initialize:function(y,l,d,_,C){var Z,S=[],k=[],N=0,z=1/(d||32),D=y._segments,H=D[0];function $(me,ve){var ge=en.getValues(me,ve,C);S.push(ge),R(ge,me._index,0,1)}function R(me,ve,ge,pe){if(!(pe-ge>z)||_&&en.isStraight(me)||en.isFlatEnough(me,l||.25)){var ke=me[6]-me[0],Xe=me[7]-me[1],je=Math.sqrt(ke*ke+Xe*Xe);je>0&&k.push({offset:N+=je,curve:me,index:ve,time:pe})}else{var de=en.subdivide(me,.5),Ee=(ge+pe)/2;R(de[0],ve,ge,Ee),R(de[1],ve,Ee,pe)}}for(var Y=1,he=D.length;Y<he;Y++)$(H,Z=D[Y]),H=Z;y._closed&&$(Z||H,D[0]),this.curves=S,this.parts=k,this.length=N,this.index=0},_get:function(y){for(var C,l=this.parts,d=l.length,S=this.index;C=S,S&&!(l[--S].offset<y););for(;C<d;C++){var k=l[C];if(k.offset>=y){this.index=C;var N=l[C-1],z=N&&N.index===k.index?N.time:0,D=N?N.offset:0;return{index:k.index,time:z+(k.time-z)*(y-D)/(k.offset-D)}}}return{index:l[d-1].index,time:1}},drawPart:function(y,l,d){for(var _=this._get(l),C=this._get(d),S=_.index,k=C.index;S<=k;S++){var N=en.getPart(this.curves[S],S===_.index?_.time:0,S===C.index?C.time:1);S===_.index&&y.moveTo(N[0],N[1]),y.bezierCurveTo.apply(y,N.slice(2))}}},q.each(en._evaluateMethods,function(y){this[y+"At"]=function(l){var d=this._get(l);return en[y](this.curves[d.index],d.time)}},{})),ri=q.extend({initialize:function(y){for(var S,l=this.points=[],d=y._segments,_=y._closed,C=0,k=d.length;C<k;C++){var N=d[C].point;(!S||!S.equals(N))&&l.push(S=N.clone())}_&&(l.unshift(l[l.length-1]),l.push(l[1])),this.closed=_},fit:function(y){var l=this.points,d=l.length,_=null;return d>0&&(_=[new Ht(l[0])],d>1&&(this.fitCubic(_,y,0,d-1,l[1].subtract(l[0]),l[d-2].subtract(l[d-1])),this.closed&&(_.shift(),_.pop()))),_},fitCubic:function(y,l,d,_,C,S){var k=this.points;if(_-d!=1){for(var $,H=this.chordLengthParameterize(d,_),Z=Math.max(l,l*l),R=!0,Y=0;Y<=4;Y++){var he=this.generateBezier(d,_,H,C,S),me=this.findMaxError(d,_,he,H);if(me.error<l&&R)return void this.addCurve(y,he);if($=me.index,me.error>=Z)break;R=this.reparameterize(d,_,H,he),Z=me.error}var ve=k[$-1].subtract(k[$+1]);this.fitCubic(y,l,d,$,C,ve),this.fitCubic(y,l,$,_,ve.negate(),S)}else{var N=k[d],z=k[_],D=N.getDistance(z)/3;this.addCurve(y,[N,N.add(C.normalize(D)),z.add(S.normalize(D)),z])}},addCurve:function(y,l){y[y.length-1].setHandleOut(l[1].subtract(l[0])),y.push(new Ht(l[3],l[2].subtract(l[3])))},generateBezier:function(y,l,d,_,C){for(var S=1e-12,k=Math.abs,N=this.points,z=N[y],D=N[l],H=[[0,0],[0,0]],Z=[0,0],$=0,R=l-y+1;$<R;$++){var Y=d[$],he=1-Y,me=3*Y*he,ve=he*he*he,ge=me*he,pe=me*Y,de=Y*Y*Y,Ee=_.normalize(ge),ke=C.normalize(pe),Xe=N[y+$].subtract(z.multiply(ve+ge)).subtract(D.multiply(pe+de));H[0][0]+=Ee.dot(Ee),H[0][1]+=Ee.dot(ke),H[1][0]=H[0][1],H[1][1]+=ke.dot(ke),Z[0]+=Ee.dot(Xe),Z[1]+=ke.dot(Xe)}var nt,pt,je=H[0][0]*H[1][1]-H[1][0]*H[0][1];if(k(je)>S)nt=(Z[0]*H[1][1]-Z[1]*H[0][1])/je,pt=(H[0][0]*Z[1]-H[1][0]*Z[0])/je;else{var Lt=H[0][0]+H[0][1],Bt=H[1][0]+H[1][1];nt=pt=k(Lt)>S?Z[0]/Lt:k(Bt)>S?Z[1]/Bt:0}var We,Ye,qt=D.getDistance(z),Pe=S*qt;if(nt<Pe||pt<Pe)nt=pt=qt/3;else{var we=D.subtract(z);We=_.normalize(nt),Ye=C.normalize(pt),We.dot(we)-Ye.dot(we)>qt*qt&&(nt=pt=qt/3,We=Ye=null)}return[z,z.add(We||_.normalize(nt)),D.add(Ye||C.normalize(pt)),D]},reparameterize:function(y,l,d,_){for(var C=y;C<=l;C++)d[C-y]=this.findRoot(_,this.points[C],d[C-y]);C=1;for(var S=d.length;C<S;C++)if(d[C]<=d[C-1])return!1;return!0},findRoot:function(y,l,d){for(var _=[],C=[],S=0;S<=2;S++)_[S]=y[S+1].subtract(y[S]).multiply(3);for(S=0;S<=1;S++)C[S]=_[S+1].subtract(_[S]).multiply(2);var k=this.evaluate(3,y,d),N=this.evaluate(2,_,d),z=this.evaluate(1,C,d),D=k.subtract(l),H=N.dot(N)+D.dot(z);return Q.isMachineZero(H)?d:d-D.dot(N)/H},evaluate:function(y,l,d){for(var _=l.slice(),C=1;C<=y;C++)for(var S=0;S<=y-C;S++)_[S]=_[S].multiply(1-d).add(_[S+1].multiply(d));return _[0]},chordLengthParameterize:function(y,l){for(var d=[0],_=y+1;_<=l;_++)d[_-y]=d[_-y-1]+this.points[_].getDistance(this.points[_-1]);_=1;for(var C=l-y;_<=C;_++)d[_]/=d[C];return d},findMaxError:function(y,l,d,_){for(var C=Math.floor((l-y+1)/2),S=0,k=y+1;k<l;k++){var z=this.evaluate(3,d,_[k-y]).subtract(this.points[k]),D=z.x*z.x+z.y*z.y;D>=S&&(S=D,C=k)}return{error:S,index:C}}}),ni=st.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(l){this._content="",this._lines=[];var d=l&&q.isPlainObject(l)&&l.x===ie&&l.y===ie;this._initialize(d&&l,!d&&Le.read(arguments))},_equals:function(y){return this._content===y._content},copyContent:function(y){this.setContent(y._content)},getContent:function(){return this._content},setContent:function(y){this._content=""+y,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),St=ni.extend({_class:"PointText",initialize:function(){ni.apply(this,arguments)},getPoint:function(){var y=this._matrix.getTranslation();return new Ve(y.x,y.y,this,"setPoint")},setPoint:function(){var y=Le.read(arguments);this.translate(y.subtract(this._matrix.getTranslation()))},_draw:function(y,l,d){if(this._content){this._setStyles(y,l,d);var _=this._lines,C=this._style,S=C.hasFill(),k=C.hasStroke(),N=C.getLeading(),z=y.shadowColor;y.font=C.getFontStyle(),y.textAlign=C.getJustification();for(var D=0,H=_.length;D<H;D++){y.shadowColor=z;var Z=_[D];S&&(y.fillText(Z,0,0),y.shadowColor="rgba(0,0,0,0)"),k&&y.strokeText(Z,0,0),y.translate(0,N)}}},_getBounds:function(y,l){var d=this._style,_=this._lines,C=_.length,S=d.getJustification(),k=d.getLeading(),N=this.getView().getTextWidth(d.getFontStyle(),_),z=0;"left"!==S&&(z-=N/("center"===S?2:1));var D=new L(z,C?-.75*k:0,N,C*k);return y?y._transformBounds(D,D):D}}),Oe=q.extend(new function(){var _,y={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},l={},d={transparent:[0,0,0,0]};function C(N){var H,z=N.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||N.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),D="rgb";if(z){var Z=z[4]?4:3;H=new Array(Z);for(var $=0;$<Z;$++){var R=z[$+1];H[$]=parseInt(1==R.length?R+R:R,16)/255}}else if(z=N.match(/^(rgb|hsl)a?\((.*)\)$/)){D=z[1],H=z[2].trim().split(/[,\s]+/g);for(var Y="hsl"===D,he=($=0,Math.min(H.length,4));$<he;$++){var me=H[$];if(R=parseFloat(me),Y)if(0===$){var ve=me.match(/([a-z]*)$/)[1];R*={turn:360,rad:180/Math.PI,grad:.9}[ve]||1}else $<3&&(R/=100);else $<3&&(R/=/%$/.test(me)?100:255);H[$]=R}}else{var ge=d[N];if(!ge)if(V){_||((_=vs.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),_.fillStyle="rgba(0,0,0,0)",_.fillStyle=N,_.fillRect(0,0,1,1);var pe=_.getImageData(0,0,1,1).data;ge=d[N]=[pe[0]/255,pe[1]/255,pe[2]/255]}else ge=[0,0,0];H=ge.slice()}return[D,H]}var S=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],k={"rgb-hsb":function(N,z,D){var H=Math.max(N,z,D),$=H-Math.min(N,z,D);return[0===$?0:60*(H==N?(z-D)/$+(z<D?6:0):H==z?(D-N)/$+2:(N-z)/$+4),0===H?0:$/H,H]},"hsb-rgb":function(N,z,D){var Z,H=(N=(N/60%6+6)%6)-(Z=Math.floor(N)),$=[D,D*(1-z),D*(1-z*H),D*(1-z*(1-H))];return[$[(Z=S[Z])[0]],$[Z[1]],$[Z[2]]]},"rgb-hsl":function(N,z,D){var H=Math.max(N,z,D),Z=Math.min(N,z,D),$=H-Z,R=0===$,he=(H+Z)/2;return[R?0:60*(H==N?(z-D)/$+(z<D?6:0):H==z?(D-N)/$+2:(N-z)/$+4),R?0:he<.5?$/(H+Z):$/(2-H-Z),he]},"hsl-rgb":function(N,z,D){if(0===z)return[D,D,D];for(var H=[(N=(N/360%1+1)%1)+1/3,N,N-1/3],Z=D<.5?D*(1+z):D+z-D*z,$=2*D-Z,R=[],Y=0;Y<3;Y++){var he=H[Y];he<0&&(he+=1),he>1&&(he-=1),R[Y]=6*he<1?$+6*(Z-$)*he:2*he<1?Z:3*he<2?$+(Z-$)*(2/3-he)*6:$}return R},"rgb-gray":function(N,z,D){return[.2989*N+.587*z+.114*D]},"gray-rgb":function(N){return[N,N,N]},"gray-hsb":function(N){return[0,0,N]},"gray-hsl":function(N){return[0,0,N]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return q.each(y,function(N,z){l[z]=[],q.each(N,function(D,H){var Z=q.capitalize(D),$=/^(hue|saturation)$/.test(D),R=l[z][H]="gradient"===z?"gradient"===D?function(Y){var he=this._components[0];return he!==(Y=Ft.read(Array.isArray(Y)?Y:arguments,0,{readNull:!0}))&&(he&&he._removeOwner(this),Y&&Y._addOwner(this)),Y}:function(){return Le.read(arguments,0,{readNull:"highlight"===D,clone:!0})}:function(Y){return null==Y||isNaN(Y)?0:+Y};this["get"+Z]=function(){return this._type===z||$&&/^hs[bl]$/.test(this._type)?this._components[H]:this._convert(z)[H]},this["set"+Z]=function(Y){this._type!==z&&!($&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(z),this._properties=y[z],this._type=z),this._components[H]=R.call(this,Y),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function N(z){var $,R,Y,he,D=arguments,H=this.__read,Z=0;Array.isArray(z)&&(z=(D=z)[0]);var me=null!=z&&typeof z;if("string"===me&&z in y&&($=z,z=D[1],Array.isArray(z)?(R=z,Y=D[2]):(H&&(Z=1),D=q.slice(D,1),me=typeof z)),!R){if(he="number"===me?D:"object"===me&&null!=z.length?z:null){$||($=he.length>=3?"rgb":"gray");var ve=y[$].length;Y=he[ve],H&&(Z+=he===arguments?ve+(null!=Y?1:0):1),he.length>ve&&(he=q.slice(he,0,ve))}else if("string"===me){var ge=C(z);$=ge[0],4===(R=ge[1]).length&&(Y=R[3],R.length--)}else if("object"===me)if(z.constructor===N){if($=z._type,R=z._components.slice(),Y=z._alpha,"gradient"===$)for(var pe=1,de=R.length;pe<de;pe++){var Ee=R[pe];Ee&&(R[pe]=Ee.clone())}}else if(z.constructor===Ft)$="gradient",he=D;else{var ke=y[$="hue"in z?"lightness"in z?"hsl":"hsb":"gradient"in z||"stops"in z||"radial"in z?"gradient":"gray"in z?"gray":"rgb"],Xe=l[$];for(this._components=R=[],pe=0,de=ke.length;pe<de;pe++)null==(je=z[ke[pe]])&&!pe&&"gradient"===$&&"stops"in z&&(je={stops:z.stops,radial:z.radial}),null!=(je=Xe[pe].call(this,je))&&(R[pe]=je);Y=z.alpha}H&&$&&(Z=1)}if(this._type=$||"rgb",!R)for(this._components=R=[],pe=0,de=(Xe=l[this._type]).length;pe<de;pe++){var je;null!=(je=Xe[pe].call(this,he&&he[pe]))&&(R[pe]=je)}return this._components=R,this._properties=y[this._type],this._alpha=Y,H&&(this.__read=Z),this},set:"#initialize",_serialize:function(N,z){var D=this.getComponents();return q.serialize(/^(gray|rgb)$/.test(this._type)?D:[this._type].concat(D),N,!0,z)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(N){var z;return this._type===N?this._components.slice():(z=k[this._type+"-"+N])?z.apply(this,this._components):k["rgb-"+N].apply(this,k[this._type+"-rgb"].apply(this,this._components))},convert:function(N){return new Oe(N,this._convert(N),this._alpha)},getType:function(){return this._type},setType:function(N){this._components=this._convert(N),this._properties=y[N],this._type=N},getComponents:function(){var N=this._components.slice();return null!=this._alpha&&N.push(this._alpha),N},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(N){this._alpha=null==N?null:Math.min(Math.max(N,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(N){var z=q.isPlainValue(N,!0)?Oe.read(arguments):N;return z===this||z&&this._class===z._class&&this._type===z._type&&this.getAlpha()===z.getAlpha()&&q.equals(this._components,z._components)||!1},toString:function(){for(var N=this._properties,z=[],D="gradient"===this._type,H=_e.instance,Z=0,$=N.length;Z<$;Z++){var R=this._components[Z];null!=R&&z.push(N[Z]+": "+(D?R:H.number(R)))}return null!=this._alpha&&z.push("alpha: "+H.number(this._alpha)),"{ "+z.join(", ")+" }"},toCSS:function(N){var z=this._convert("rgb"),D=N||null==this._alpha?1:this._alpha;function H(Z){return Math.round(255*(Z<0?0:Z>1?1:Z))}return z=[H(z[0]),H(z[1]),H(z[2])],D<1&&z.push(D<0?0:D),N?"#"+((1<<24)+(z[0]<<16)+(z[1]<<8)+z[2]).toString(16).slice(1):(4==z.length?"rgba(":"rgb(")+z.join(",")+")"},toCanvasStyle:function(N,z){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var me,D=this._components,H=D[0],Z=H._stops,$=D[1],R=D[2],Y=D[3],he=z&&z.inverted();if(he&&($=he._transformPoint($),R=he._transformPoint(R),Y&&(Y=he._transformPoint(Y))),H._radial){var ve=R.getDistance($);if(Y){var ge=Y.subtract($);ge.getLength()>ve&&(Y=$.add(ge.normalize(ve-.1)))}var pe=Y||$;me=N.createRadialGradient(pe.x,pe.y,0,$.x,$.y,ve)}else me=N.createLinearGradient($.x,$.y,R.x,R.y);for(var de=0,Ee=Z.length;de<Ee;de++){var ke=Z[de];me.addColorStop(ke._offset??de/(Ee-1),ke._color.toCanvasStyle())}return this._canvasStyle=me},transform:function(N){if("gradient"===this._type){for(var z=this._components,D=1,H=z.length;D<H;D++){var Z=z[D];N._transformPoint(Z,Z,!0)}this._changed()}},statics:{_types:y,random:function(){var N=Math.random;return new Oe(N(),N(),N())},_setOwner:function(N,z,D){return N&&(N._owner&&z&&N._owner!==z&&(N=N.clone()),!N._owner^!z&&(N._owner=z||null,N._setter=D||null)),N}}})},new function(){return q.each({add:function(l,d){return l+d},subtract:function(l,d){return l-d},multiply:function(l,d){return l*d},divide:function(l,d){return l/d}},function(l,d){this[d]=function(_){_=Oe.read(arguments);for(var C=this._type,S=this._components,k=_._convert(C),N=0,z=S.length;N<z;N++)k[N]=l(S[N],k[N]);return new Oe(C,k,null!=this._alpha?l(this._alpha,_.getAlpha()):null)}},{})}),Ft=q.extend({_class:"Gradient",initialize:function(l,d){this._id=Re.get(),l&&q.isPlainObject(l)&&(this.set(l),l=d=null),null==this._stops&&this.setStops(l||["white","black"]),null==this._radial&&this.setRadial("string"==typeof d&&"radial"===d||d||!1)},_serialize:function(y,l){return l.add(this,function(){return q.serialize([this._stops,this._radial],y,!0,l)})},_changed:function(){for(var y=0,l=this._owners&&this._owners.length;y<l;y++)this._owners[y]._changed()},_addOwner:function(y){this._owners||(this._owners=[]),this._owners.push(y)},_removeOwner:function(y){var l=this._owners?this._owners.indexOf(y):-1;-1!=l&&(this._owners.splice(l,1),this._owners.length||(this._owners=ie))},clone:function(){for(var y=[],l=0,d=this._stops.length;l<d;l++)y[l]=this._stops[l].clone();return new Ft(y,this._radial)},getStops:function(){return this._stops},setStops:function(y){if(y.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var l=this._stops;if(l)for(var d=0,_=l.length;d<_;d++)l[d]._owner=ie;for(d=0,_=(l=this._stops=Ot.readList(y,0,{clone:!0})).length;d<_;d++)l[d]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(y){this._radial=y,this._changed()},equals:function(y){if(y===this)return!0;if(y&&this._class===y._class){var l=this._stops,d=y._stops,_=l.length;if(_===d.length){for(var C=0;C<_;C++)if(!l[C].equals(d[C]))return!1;return!0}}return!1}}),Ot=q.extend({_class:"GradientStop",initialize:function(l,d){var _=l,C=d;"object"==typeof l&&d===ie&&(Array.isArray(l)&&"number"!=typeof l[0]?(_=l[0],C=l[1]):("color"in l||"offset"in l||"rampPoint"in l)&&(_=l.color,C=l.offset||l.rampPoint||0)),this.setColor(_),this.setOffset(C)},clone:function(){return new Ot(this._color.clone(),this._offset)},_serialize:function(y,l){var d=this._color,_=this._offset;return q.serialize(null==_?[d]:[d,_],y,!0,l)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(y){this._offset=y,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Oe._setOwner(this._color,null),this._color=Oe._setOwner(Oe.read(arguments,0),this,"setColor"),this._changed()},equals:function(y){return y===this||y&&this._class===y._class&&this._color.equals(y._color)&&this._offset==y._offset||!1}}),li=q.extend(new function(){var y={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new Le,selectedColor:null},l=q.set({},y,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),d=q.set({},l,{fillColor:new Oe}),_={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},C={beans:!0},S={_class:"Style",beans:!0,initialize:function(N,z,D){this._values={},this._owner=z,this._project=z&&z._project||D||fr.project,this._defaults=!z||z instanceof bt?l:z instanceof ni?d:y,N&&this.set(N)}};return q.each(l,function(k,N){var z=/Color$/.test(N),D="shadowOffset"===N,H=q.capitalize(N),Z=_[N],$="set"+H,R="get"+H;S[$]=function(Y){var he=this._owner,me=he&&he._children,ve=me&&me.length>0&&!(he instanceof Jt);if(ve)for(var ge=0,pe=me.length;ge<pe;ge++)me[ge]._style[$](Y);if(("selectedColor"===N||!ve)&&N in this._defaults){var de=this._values[N];de!==Y&&(z&&(de&&(Oe._setOwner(de,null),de._canvasStyle=null),Y&&Y.constructor===Oe&&(Y=Oe._setOwner(Y,he,ve&&$))),this._values[N]=Y,he&&he._changed(Z||129))}},S[R]=function(Y){var he=this._owner,me=he&&he._children,ve=me&&me.length>0&&!(he instanceof Jt);if(ve&&!Y)for(var pe=0,de=me.length;pe<de;pe++){var Ee=me[pe]._style[R]();if(pe){if(!q.equals(ge,Ee))return ie}else ge=Ee}else if(N in this._defaults){var ge;if((ge=this._values[N])===ie)(ge=this._defaults[N])&&ge.clone&&(ge=ge.clone());else{var ke=z?Oe:D?Le:null;ke&&(!ge||ge.constructor!==ke)&&(this._values[N]=ge=ke.read([ge],0,{readNull:!0,clone:!0}))}}return ge&&z&&(ge=Oe._setOwner(ge,he,ve&&$)),ge},C[R]=function(Y){return this._style[R](Y)},C[$]=function(Y){this._style[$](Y)}}),q.each({Font:"FontFamily",WindingRule:"FillRule"},function(k,N){var z="get"+N,D="set"+N;S[z]=C[z]="#get"+k,S[D]=C[D]="#set"+k}),st.inject(C),S},{set:function(y){var l=y instanceof li,d=l?y._values:y;if(d)for(var _ in d)if(_ in this._defaults){var C=d[_];this[_]=C&&l&&C.clone?C.clone():C}},equals:function(y){function l(d,_,C){var S=d._values,k=_._values,N=_._defaults;for(var z in S){var H=k[z];if(!(C&&z in k||q.equals(S[z],H===ie?N[z]:H)))return!1}return!0}return y===this||y&&this._class===y._class&&l(this,y)&&l(y,this,!0)||!1},_dispose:function(){var y;(y=this.getFillColor())&&(y._canvasStyle=null),(y=this.getStrokeColor())&&(y._canvasStyle=null),(y=this.getShadowColor())&&(y._canvasStyle=null)},hasFill:function(){var y=this.getFillColor();return!!y&&y.alpha>0},hasStroke:function(){var y=this.getStrokeColor();return!!y&&y.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var y=this.getShadowColor();return!!y&&y.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var y=this.getFontSize();return this.getFontWeight()+" "+y+(/[a-z]/i.test(y+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function y(){var l=y.base.call(this),d=this.getFontSize();return/pt|em|%|px/.test(d)&&(d=this.getView().getPixelSize(d)),l??1.2*d}}),di=new function(){function y(l,d,_,C){for(var S=["","webkit","moz","Moz","ms","o"],k=d[0].toUpperCase()+d.substring(1),N=0;N<6;N++){var z=S[N],D=z?z+k:d;if(D in l){if(!_)return l[D];l[D]=C;break}}}return{getStyles:function(l){var d=l&&9!==l.nodeType?l.ownerDocument:l,_=d&&d.defaultView;return _&&_.getComputedStyle(l,"")},getBounds:function(l,d){var k,_=l.ownerDocument,C=_.body,S=_.documentElement;try{k=l.getBoundingClientRect()}catch{k={left:0,top:0,width:0,height:0}}var N=k.left-(S.clientLeft||C.clientLeft||0),z=k.top-(S.clientTop||C.clientTop||0);if(!d){var D=_.defaultView;N+=D.pageXOffset||S.scrollLeft||C.scrollLeft,z+=D.pageYOffset||S.scrollTop||C.scrollTop}return new L(N,z,k.width,k.height)},getViewportBounds:function(l){var d=l.ownerDocument,_=d.defaultView,C=d.documentElement;return new L(0,0,_.innerWidth||C.clientWidth,_.innerHeight||C.clientHeight)},getOffset:function(l,d){return di.getBounds(l,d).getPoint()},getSize:function(l){return di.getBounds(l,!0).getSize()},isInvisible:function(l){return di.getSize(l).equals(new Ae(0,0))},isInView:function(l){return!di.isInvisible(l)&&di.getViewportBounds(l).intersects(di.getBounds(l,!0))},isInserted:function(l){return K.body.contains(l)},getPrefixed:function(l,d){return l&&y(l,d)},setPrefixed:function(l,d,_){if("object"==typeof d)for(var C in d)y(l,C,!0,d[C]);else y(l,d,!0,_)}}},Gt={add:function(y,l){if(y)for(var d in l)for(var _=l[d],C=d.split(/[\s,]+/g),S=0,k=C.length;S<k;S++){var N=C[S];y.addEventListener(N,_,y===K&&("touchstart"===N||"touchmove"===N)&&{passive:!1})}},remove:function(y,l){if(y)for(var d in l)for(var _=l[d],C=d.split(/[\s,]+/g),S=0,k=C.length;S<k;S++)y.removeEventListener(C[S],_,!1)},getPoint:function(y){var l=y.targetTouches?y.targetTouches.length?y.targetTouches[0]:y.changedTouches[0]:y;return new Le(l.pageX||l.clientX+K.documentElement.scrollLeft,l.pageY||l.clientY+K.documentElement.scrollTop)},getTarget:function(y){return y.target||y.srcElement},getRelatedTarget:function(y){return y.relatedTarget||y.toElement},getOffset:function(y,l){return Gt.getPoint(y).subtract(di.getOffset(l||Gt.getTarget(y)))}};Gt.requestAnimationFrame=new function(){var _,y=di.getPrefixed(V,"requestAnimationFrame"),l=!1,d=[];function C(){var S=d;d=[];for(var k=0,N=S.length;k<N;k++)S[k]();(l=y&&d.length)&&y(C)}return function(S){d.push(S),y?l||(y(C),l=!0):_||(_=setInterval(C,16.666666666666668))}};var Rt=q.extend(le,{_class:"View",initialize:function y(l,d){function _(Z){return d[Z]||parseInt(d.getAttribute(Z),10)}function C(){var Z=di.getSize(d);return Z.isNaN()||Z.isZero()?new Ae(_("width"),_("height")):Z}var S;if(V&&d){this._id=d.getAttribute("id"),null==this._id&&d.setAttribute("id",this._id="paper-view-"+y._id++),Gt.add(d,this._viewEvents);var k="none";if(di.setPrefixed(d.style,{userDrag:k,userSelect:k,touchCallout:k,contentZooming:k,tapHighlightColor:"rgba(0,0,0,0)"}),Te.hasAttribute(d,"resize")){var N=this;Gt.add(V,this._windowEvents={resize:function(){N.setViewSize(C())}})}if(S=C(),Te.hasAttribute(d,"stats")&&typeof Stats<"u"){this._stats=new Stats;var z=this._stats.domElement,D=z.style,H=di.getOffset(d);D.position="absolute",D.left=H.x+"px",D.top=H.y+"px",K.body.appendChild(z)}}else S=new Ae(d),d=null;this._project=l,this._scope=l._scope,this._element=d,this._pixelRatio||(this._pixelRatio=V&&V.devicePixelRatio||1),this._setElementSize(S.width,S.height),this._viewSize=S,y._views.push(this),y._viewsById[this._id]=this,(this._matrix=new Ce)._owner=this,y._focused||(y._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!fr.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Rt._focused===this&&(Rt._focused=null),Rt._views.splice(Rt._views.indexOf(this),1),delete Rt._viewsById[this._id];var y=this._project;return y._view===this&&(y._view=null),Gt.remove(this._element,this._viewEvents),Gt.remove(V,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:q.each(st._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(y){this[y]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(y){this._autoUpdate=y,y&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var y=this;Gt.requestAnimationFrame(function(){if(y._requested=!1,y._animate){y.requestUpdate();var l=y._element;(!di.getPrefixed(K,"hidden")||"true"===Te.getAttribute(l,"keepalive"))&&di.isInView(l)&&y._handleFrame()}y._autoUpdate&&y.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){fr=this._scope;var y=Date.now()/1e3,l=this._last?y-this._last:0;this._last=y,this.emit("frame",new q({delta:l,time:this._time+=l,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(y,l){var d=this._frameItems;l?(d[y._id]={item:y,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete d[y._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(y){for(var l in this._frameItems){var d=this._frameItems[l];d.item.emit("frame",new q(y,{time:d.time+=y.delta,count:d.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=ie},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var y=this._viewSize;return new Se(y.width,y.height,this,"setViewSize")},setViewSize:function(){var y=Ae.read(arguments),l=y.subtract(this._viewSize);l.isZero()||(this._setElementSize(y.width,y.height),this._viewSize.set(y),this._changed(),this.emit("resize",{size:y,delta:l}),this._autoUpdate&&this.update())},_setElementSize:function(y,l){var d=this._element;d&&(d.width!==y&&(d.width=y),d.height!==l&&(d.height=l))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new L(new Le,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return di.isInView(this._element)},isInserted:function(){return di.isInserted(this._element)},getPixelSize:function(y){var d,l=this._element;if(l){var _=l.parentNode,C=K.createElement("div");C.style.fontSize=y,_.appendChild(C),d=parseFloat(di.getStyles(C).fontSize),_.removeChild(C)}else d=parseFloat(d);return d},getTextWidth:function(y,l){return 0}},q.each(["rotate","scale","shear","skew"],function(y){var l="rotate"===y;this[y]=function(){var d=arguments,_=(l?q:Le).read(d),C=Le.read(d,0,{readNull:!0});return this.transform((new Ce)[y](_,C||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var y=new Ce;return this.transform(y.translate.apply(y,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var y=Le.read(arguments);this.translate(this.getCenter().subtract(y))},getZoom:function(){var y=this._decompose().scaling;return(y.x+y.y)/2},setZoom:function(y){this.transform((new Ce).scale(y/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(y){var l=this.getRotation();null!=l&&null!=y&&this.rotate(y-l)},getScaling:function(){var y=this._decompose().scaling;return new Ve(y.x,y.y,this,"setScaling")},setScaling:function(){var y=this.getScaling(),l=Le.read(arguments,0,{clone:!0,readNull:!0});y&&l&&this.scale(l.x/y.x,l.y/y.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var y=this._matrix;y.set.apply(y,arguments)},transform:function(y){this._matrix.append(y)},scrollBy:function(){this.translate(Le.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(Le.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(Le.read(arguments))},getEventPoint:function(y){return this.viewToProject(Gt.getOffset(y,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(y,l){return K&&"string"==typeof l&&(l=K.getElementById(l)),new(V?_n:Rt)(y,l)}}},new function(){if(V){var y,l,z,D,H,d=!1,_=!1,N=V.navigator;N.pointerEnabled||N.msPointerEnabled?(z="pointerdown MSPointerDown",D="pointermove MSPointerMove",H="pointerup pointercancel MSPointerUp MSPointerCancel"):(z="touchstart",D="touchmove",H="touchend touchcancel","ontouchstart"in V&&N.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(z+=" mousedown",D+=" mousemove",H+=" mouseup"));var Z={},$={mouseout:function(Lt){var Bt=Rt._focused,qt=Gt.getRelatedTarget(Lt);if(Bt&&(!qt||"HTML"===qt.nodeName)){var Pe=Gt.getOffset(Lt,Bt._element),We=Pe.x,Ye=Math.abs,we=Ye(We),ct=we-(1<<25);Pe.x=Ye(ct)<we?ct*(We<0?-1:1):We,k(Bt,Lt,Bt.viewToProject(Pe))}},scroll:S};Z[z]=function(Lt){var Bt=Rt._focused=C(Lt);d||(d=!0,Bt._handleMouseEvent("mousedown",Lt))},$[D]=function(Lt){var Bt=Rt._focused;if(!_){var qt=C(Lt);qt?Bt!==qt&&(Bt&&k(Bt,Lt),y||(y=Bt),Bt=Rt._focused=l=qt):l&&l===Bt&&(y&&!y.isInserted()&&(y=null),Bt=Rt._focused=y,y=null,S())}Bt&&k(Bt,Lt)},$[z]=function(){_=!0},$[H]=function(Lt){var Bt=Rt._focused;Bt&&d&&Bt._handleMouseEvent("mouseup",Lt),_=d=!1},Gt.add(K,$),Gt.add(V,{load:S});var ge,pe,de,Ee,ke,Xe,je,nt,R=!1,Y=!1,he={doubleclick:"click",mousedrag:"mousemove"},me=!1,Wt={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:Z,_handleMouseEvent:function(Lt,Bt,qt){var Pe=this._itemEvents,We=Pe.native[Lt],Ye="mousemove"===Lt,we=this._scope.tool,Ue=this;function ct(Ci){return Pe.virtual[Ci]||Ue.responds(Ci)||we&&we.responds(Ci)}Ye&&d&&ct("mousedrag")&&(Lt="mousedrag"),qt||(qt=this.getEventPoint(Bt));var Dt=this.getBounds().contains(qt),wt=We&&Dt&&Ue._project.hitTest(qt,{tolerance:0,fill:!0,stroke:!0}),nn=wt&&wt.item||null,On=!1,jn={};if(jn[Lt.substr(5)]=!0,We&&nn!==Ee&&(Ee&&pt(Ee,null,"mouseleave",Bt,qt),nn&&pt(nn,null,"mouseenter",Bt,qt),Ee=nn),me^Dt&&(pt(this,null,Dt?"mouseenter":"mouseleave",Bt,qt),On=!0),(Dt||jn.drag)&&!qt.equals(pe)&&(gt(this,nn,Ye?Lt:"mousemove",Bt,qt,pe),On=!0),me=Dt,jn.down&&Dt||jn.up&&ge){if(gt(this,nn,Lt,Bt,qt,ge),jn.down){if(nt=nn===Xe&&Date.now()-je<300,de=Xe=nn,!Y&&nn){for(var ii=nn;ii&&!ii.responds("mousedrag");)ii=ii._parent;ii&&(ke=nn)}ge=qt}else jn.up&&(!Y&&nn===de&&(je=Date.now(),gt(this,nn,nt?"doubleclick":"click",Bt,qt,ge),nt=!1),de=ke=null);me=!1,On=!0}pe=qt,On&&we&&(R=we._handleMouseEvent(Lt,Bt,qt,jn)||R),!1!==Bt.cancelable&&(R&&!jn.move||jn.down&&ct("mouseup"))&&Bt.preventDefault()},_handleKeyEvent:function(Lt,Bt,qt,Pe){var we,We=this._scope,Ye=We.tool;function Ue(ct){ct.responds(Lt)&&(fr=We,ct.emit(Lt,we=we||new rt(Lt,Bt,qt,Pe)))}this.isVisible()&&(Ue(this),Ye&&Ye.responds(Lt)&&Ue(Ye))},_countItemEvent:function(Lt,Bt){var qt=this._itemEvents,Pe=qt.native,We=qt.virtual;for(var Ye in Wt)Pe[Ye]=(Pe[Ye]||0)+(Wt[Ye][Lt]||0)*Bt;We[Lt]=(We[Lt]||0)+Bt},statics:{updateFocus:S,_resetState:function(){d=_=R=me=!1,y=l=ge=pe=de=Ee=ke=Xe=je=nt=null}}}}function C(Lt){var Bt=Gt.getTarget(Lt);return Bt.getAttribute&&Rt._viewsById[Bt.getAttribute("id")]}function S(){var Lt=Rt._focused;if(!Lt||!Lt.isVisible())for(var Bt=0,qt=Rt._views.length;Bt<qt;Bt++)if((Lt=Rt._views[Bt]).isVisible()){Rt._focused=l=Lt;break}}function k(Lt,Bt,qt){Lt._handleMouseEvent("mousemove",Bt,qt)}function pt(Lt,Bt,qt,Pe,We,Ye,we){var ct,Ue=!1;function Dt(wt,nn){if(wt.responds(nn)){if(ct||(ct=new dn(nn,Pe,We,Bt||wt,Ye?We.subtract(Ye):null)),wt.emit(nn,ct)&&(R=!0,ct.prevented&&(Y=!0),ct.stopped))return Ue=!0}else{var On=he[nn];if(On)return Dt(wt,On)}}for(;Lt&&Lt!==we&&!Dt(Lt,qt);)Lt=Lt._parent;return Ue}function gt(Lt,Bt,qt,Pe,We,Ye){return Lt._project.removeOn(qt),Y=R=!1,ke&&pt(ke,null,qt,Pe,We,Ye)||Bt&&Bt!==ke&&!Bt.isDescendant(ke)&&pt(Bt,null,"mousedrag"===qt?"mousemove":qt,Pe,We,Ye,ke)||pt(Lt,ke||Bt||Lt,qt,Pe,We,Ye)}}),_n=Rt.extend({_class:"CanvasView",initialize:function(l,d){if(!(d instanceof V.HTMLCanvasElement)){var _=Ae.read(arguments,1);if(_.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+q.slice(arguments,1));d=vs.getCanvas(_)}var C=this._context=d.getContext("2d");if(C.save(),this._pixelRatio=1,!/^off|false$/.test(Te.getAttribute(d,"hidpi"))){var S=V.devicePixelRatio||1,k=di.getPrefixed(C,"backingStorePixelRatio")||1;this._pixelRatio=S/k}Rt.call(this,l,d),this._needsUpdate=!0},remove:function y(){return this._context.restore(),y.base.call(this)},_setElementSize:function y(l,d){var _=this._pixelRatio;if(y.base.call(this,l*_,d*_),1!==_){var C=this._element,S=this._context;if(!Te.hasAttribute(C,"resize")){var k=C.style;k.width=l+"px",k.height=d+"px"}S.restore(),S.save(),S.scale(_,_)}},getContext:function(){return this._context},getPixelSize:function y(l){var _,d=fr.agent;if(d&&d.firefox)_=y.base.call(this,l);else{var C=this._context,S=C.font;C.font=l+" serif",_=parseFloat(C.font),C.font=S}return _},getTextWidth:function(y,l){var d=this._context,_=d.font,C=0;d.font=y;for(var S=0,k=l.length;S<k;S++)C=Math.max(C,d.measureText(l[S]).width);return d.font=_,C},update:function(){if(!this._needsUpdate)return!1;var y=this._project,l=this._context,d=this._viewSize;return l.clearRect(0,0,d.width+1,d.height+1),y&&y.draw(l,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),It=q.extend({_class:"Event",initialize:function(l){this.event=l,this.type=l&&l.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return lt.modifiers}}),rt=It.extend({_class:"KeyEvent",initialize:function(l,d,_,C){this.type=l,this.event=d,this.key=_,this.character=C},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),lt=new function(){var C,S,y={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},l={tab:"\t",space:" ",enter:"\r"},d={},_={},k=new q({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var D=fr&&fr.agent;return D&&D.mac?this.meta:this.control}}});function N(D){var H=D.key||D.keyIdentifier;return H=/^U\+/.test(H)?String.fromCharCode(parseInt(H.substr(2),16)):/^Arrow[A-Z]/.test(H)?H.substr(5):"Unidentified"===H||H===ie?String.fromCharCode(D.keyCode):H,y[H]||(H.length>1?q.hyphenate(H):H.toLowerCase())}function z(D,H,Z,$){var he,Y=Rt._focused;if(d[H]=D,D?_[H]=Z:delete _[H],H.length>1&&(he=q.camelize(H))in k){k[he]=D;var me=fr&&fr.agent;if("meta"===he&&me&&me.mac)if(D)C={};else{for(var ve in C)ve in _&&z(!1,ve,C[ve],$);C=null}}else D&&C&&(C[H]=Z);Y&&Y._handleKeyEvent(D?"keydown":"keyup",$,H,Z)}return Gt.add(K,{keydown:function(D){var H=N(D),Z=fr&&fr.agent;H.length>1||Z&&Z.chrome&&(D.altKey||Z.mac&&D.metaKey||!Z.mac&&D.ctrlKey)?z(!0,H,l[H]||(H.length>1?"":H),D):S=H},keypress:function(D){if(S){var H=N(D),Z=D.charCode,$=Z>=32?String.fromCharCode(Z):H.length>1?"":H;H!==S&&(H=$.toLowerCase()),z(!0,H,$,D),S=null}},keyup:function(D){var H=N(D);H in _&&z(!1,H,_[H],D)}}),Gt.add(V,{blur:function(D){for(var H in _)z(!1,H,_[H],D)}}),{modifiers:k,isDown:function(D){return!!d[D]}}},dn=It.extend({_class:"MouseEvent",initialize:function(l,d,_,C,S){this.type=l,this.event=d,this.point=_,this.target=C,this.delta=S},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Yn=It.extend({_class:"ToolEvent",_item:null,initialize:function(l,d,_){this.tool=l,this.type=d,this.event=_},_choosePoint:function(y,l){return y||(l?l.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(y){this._point=y},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(y){this._lastPoint=y},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(y){this._downPoint=y},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(y){this._middlePoint=y},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(y){this._delta=y},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(y){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=y},getItem:function(){if(!this._item){var y=this.tool._scope.project.hitTest(this.getPoint());if(y){for(var l=y.item,d=l._parent;/^(Group|CompoundPath)$/.test(d._class);)l=d,d=d._parent;this._item=l}}return this._item},setItem:function(y){this._item=y},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Di=(De.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(l){De.call(this),this._moveCount=-1,this._downCount=-1,this.set(l)},getMinDistance:function(){return this._minDistance},setMinDistance:function(y){this._minDistance=y,null!=y&&null!=this._maxDistance&&y>this._maxDistance&&(this._maxDistance=y)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(y){this._maxDistance=y,null!=this._minDistance&&null!=y&&y<this._minDistance&&(this._minDistance=y)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(y){this._minDistance=this._maxDistance=y},_handleMouseEvent:function(y,l,d,_){fr=this._scope,_.drag&&!this.responds(y)&&(y="mousemove");var C=_.move||_.drag,S=this.responds(y),k=this.minDistance,N=this.maxDistance,z=!1,D=this;function H($,R){var Y=d,he=C?D._point:D._downPoint||Y;if(C){if(D._moveCount>=0&&Y.equals(he))return!1;if(he&&(null!=$||null!=R)){var me=Y.subtract(he),ve=me.getLength();if(ve<($||0))return!1;R&&(Y=he.add(me.normalize(Math.min(ve,R))))}D._moveCount++}return D._point=Y,D._lastPoint=he||Y,_.down&&(D._moveCount=-1,D._downPoint=Y,D._downCount++),!0}function Z(){S&&(z=D.emit(y,new Yn(D,y,l))||z)}if(_.down)H(),Z();else if(_.up)H(null,N),Z();else if(S)for(;H(k,N);)Z();return z}}),q.extend(le,{_class:"Tween",statics:{easings:new q({linear:function(y){return y},easeInQuad:function(y){return y*y},easeOutQuad:function(y){return y*(2-y)},easeInOutQuad:function(y){return y<.5?2*y*y:2*(2-y)*y-1},easeInCubic:function(y){return y*y*y},easeOutCubic:function(y){return--y*y*y+1},easeInOutCubic:function(y){return y<.5?4*y*y*y:(y-1)*(2*y-2)*(2*y-2)+1},easeInQuart:function(y){return y*y*y*y},easeOutQuart:function(y){return 1- --y*y*y*y},easeInOutQuart:function(y){return y<.5?8*y*y*y*y:1-8*--y*y*y*y},easeInQuint:function(y){return y*y*y*y*y},easeOutQuint:function(y){return 1+--y*y*y*y*y},easeInOutQuint:function(y){return y<.5?16*y*y*y*y*y:1+16*--y*y*y*y*y}})},initialize:function y(l,d,_,C,S,k){this.object=l;var N=typeof S,z="function"===N;this.type=z?N:"string"===N?S:"linear",this.easing=z?S:y.easings[this.type],this.duration=C,this.running=!1,this._then=null,this._startTime=null;var D=d||_;this._keys=D?Object.keys(D):[],this._parsedKeys=this._parseKeys(this._keys),this._from=D&&this._getState(d),this._to=D&&this._getState(_),!1!==k&&this.start()},then:function(y){return this._then=y,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(y){if(this.running){y>=1&&(y=1,this.running=!1);for(var l=this.easing(y),d=this._keys,_=function(H){return"function"==typeof H?H(l,y):H},C=0,S=d&&d.length;C<S;C++){var k=d[C],N=_(this._from[k]),z=_(this._to[k]),D=N&&z&&N.__add&&z.__add?z.__subtract(N).__multiply(l).__add(N):(z-N)*l+N;this._setProperty(this._parsedKeys[k],D)}this.responds("update")&&this.emit("update",new q({progress:y,factor:l})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(y){var l=this._startTime,d=l?(y-l)/this.duration:0;l||(this._startTime=y),this.update(d)},_getState:function(y){for(var l=this._keys,d={},_=0,C=l.length;_<C;_++){var z,S=l[_],k=this._parsedKeys[S],N=this._getProperty(k);if(y){var D=this._resolveValue(N,y[S]);this._setProperty(k,D),z=(z=this._getProperty(k))&&z.clone?z.clone():z,this._setProperty(k,N)}else z=N&&N.clone?N.clone():N;d[S]=z}return d},_resolveValue:function(y,l){if(l){if(Array.isArray(l)&&2===l.length){var d=l[0];return d&&d.match&&d.match(/^[+\-\*\/]=/)?this._calculate(y,d[0],l[1]):l}if("string"==typeof l){var _=l.match(/^[+\-*/]=(.*)/);if(_){var C=JSON.parse(_[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(y,l[0],C)}}}return l},_calculate:function(y,l,d){return fr.PaperScript.calculateBinary(y,l,d)},_parseKeys:function(y){for(var l={},d=0,_=y.length;d<_;d++){var C=y[d],S=C.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");l[C]=S.split("/")}return l},_getProperty:function(y,l){for(var d=this.object,_=0,C=y.length-(l||0);_<C&&d;_++)d=d[y[_]];return d},_setProperty:function(y,l){var d=this._getProperty(y,1);d&&(d[y[y.length-1]]=l)}})),vs=q.exports.CanvasProvider={canvases:[],getCanvas:function(y,l,d){if(!V)return null;var _,C=!0;"object"==typeof y&&(l=y.height,y=y.width),this.canvases.length?_=this.canvases.pop():(_=K.createElement("canvas"),C=!1);var S=_.getContext("2d",d||{});if(!S)throw new Error("Canvas "+_+" is unable to provide a 2D context.");return _.width===y&&_.height===l?C&&S.clearRect(0,0,y+1,l+1):(_.width=y,_.height=l),S.save(),_},getContext:function(y,l,d){var _=this.getCanvas(y,l,d);return _?_.getContext("2d",d||{}):null},release:function(y){var l=y&&y.canvas?y.canvas:y;l&&l.getContext&&(l.getContext("2d").restore(),this.canvases.push(l))}},Hr=new function(){var _,C,S,k,N,z,D,H,Z,$,R,y=Math.min,l=Math.max,d=Math.abs;function Y(Ee,ke,Xe){return.2989*Ee+.587*ke+.114*Xe}function he(Ee,ke,Xe,pt){var nt=pt-Y(Ee,ke,Xe),gt=(pt=Y(Z=Ee+nt,$=ke+nt,R=Xe+nt),y(Z,$,R)),Wt=l(Z,$,R);if(gt<0){var Lt=pt-gt;Z=pt+(Z-pt)*pt/Lt,$=pt+($-pt)*pt/Lt,R=pt+(R-pt)*pt/Lt}if(Wt>255){var Bt=255-pt,qt=Wt-pt;Z=pt+(Z-pt)*Bt/qt,$=pt+($-pt)*Bt/qt,R=pt+(R-pt)*Bt/qt}}function me(Ee,ke,Xe){return l(Ee,ke,Xe)-y(Ee,ke,Xe)}function ve(Ee,ke,Xe,je){var Wt,nt=[Ee,ke,Xe],pt=l(Ee,ke,Xe),gt=y(Ee,ke,Xe);Wt=0===y(gt=gt===Ee?0:gt===ke?1:2,pt=pt===Ee?0:pt===ke?1:2)?1===l(gt,pt)?2:1:0,nt[pt]>nt[gt]?(nt[Wt]=(nt[Wt]-nt[gt])*je/(nt[pt]-nt[gt]),nt[pt]=je):nt[Wt]=nt[pt]=0,nt[gt]=0,Z=nt[0],$=nt[1],R=nt[2]}var ge={multiply:function(){Z=N*_/255,$=z*C/255,R=D*S/255},screen:function(){Z=N+_-N*_/255,$=z+C-z*C/255,R=D+S-D*S/255},overlay:function(){Z=N<128?2*N*_/255:255-2*(255-N)*(255-_)/255,$=z<128?2*z*C/255:255-2*(255-z)*(255-C)/255,R=D<128?2*D*S/255:255-2*(255-D)*(255-S)/255},"soft-light":function(){var Ee=_*N/255;Z=Ee+N*(255-(255-N)*(255-_)/255-Ee)/255,$=(Ee=C*z/255)+z*(255-(255-z)*(255-C)/255-Ee)/255,R=(Ee=S*D/255)+D*(255-(255-D)*(255-S)/255-Ee)/255},"hard-light":function(){Z=_<128?2*_*N/255:255-2*(255-_)*(255-N)/255,$=C<128?2*C*z/255:255-2*(255-C)*(255-z)/255,R=S<128?2*S*D/255:255-2*(255-S)*(255-D)/255},"color-dodge":function(){Z=0===N?0:255===_?255:y(255,255*N/(255-_)),$=0===z?0:255===C?255:y(255,255*z/(255-C)),R=0===D?0:255===S?255:y(255,255*D/(255-S))},"color-burn":function(){Z=255===N?255:0===_?0:l(0,255-255*(255-N)/_),$=255===z?255:0===C?0:l(0,255-255*(255-z)/C),R=255===D?255:0===S?0:l(0,255-255*(255-D)/S)},darken:function(){Z=N<_?N:_,$=z<C?z:C,R=D<S?D:S},lighten:function(){Z=N>_?N:_,$=z>C?z:C,R=D>S?D:S},difference:function(){(Z=N-_)<0&&(Z=-Z),($=z-C)<0&&($=-$),(R=D-S)<0&&(R=-R)},exclusion:function(){Z=N+_*(255-N-N)/255,$=z+C*(255-z-z)/255,R=D+S*(255-D-D)/255},hue:function(){ve(_,C,S,me(N,z,D)),he(Z,$,R,Y(N,z,D))},saturation:function(){ve(N,z,D,me(_,C,S)),he(Z,$,R,Y(N,z,D))},luminosity:function(){he(N,z,D,Y(_,C,S))},color:function(){he(_,C,S,Y(N,z,D))},add:function(){Z=y(N+_,255),$=y(z+C,255),R=y(D+S,255)},subtract:function(){Z=l(N-_,0),$=l(z-C,0),R=l(D-S,0)},average:function(){Z=(N+_)/2,$=(z+C)/2,R=(D+S)/2},negation:function(){Z=255-d(255-_-N),$=255-d(255-C-z),R=255-d(255-S-D)}},pe=this.nativeModes=q.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(Ee){this[Ee]=!0},{}),de=vs.getContext(1,1,{willReadFrequently:!0});de&&(q.each(ge,function(Ee,ke){var Xe="darken"===ke,je=!1;de.save();try{de.fillStyle=Xe?"#300":"#a00",de.fillRect(0,0,1,1),de.globalCompositeOperation=ke,de.globalCompositeOperation===ke&&(de.fillStyle=Xe?"#a00":"#300",de.fillRect(0,0,1,1),je=de.getImageData(0,0,1,1).data[0]!==Xe?170:51)}catch{}de.restore(),pe[ke]=je}),vs.release(de)),this.process=function(Ee,ke,Xe,je,nt){var pt=ke.canvas,gt="normal"===Ee;if(gt||pe[Ee])Xe.save(),Xe.setTransform(1,0,0,1,0,0),Xe.globalAlpha=je,gt||(Xe.globalCompositeOperation=Ee),Xe.drawImage(pt,nt.x,nt.y),Xe.restore();else{var Wt=ge[Ee];if(!Wt)return;for(var Lt=Xe.getImageData(nt.x,nt.y,pt.width,pt.height),Bt=Lt.data,qt=ke.getImageData(0,0,pt.width,pt.height).data,Pe=0,We=Bt.length;Pe<We;Pe+=4){_=qt[Pe],N=Bt[Pe],C=qt[Pe+1],z=Bt[Pe+1],S=qt[Pe+2],D=Bt[Pe+2],k=qt[Pe+3],H=Bt[Pe+3],Wt();var Ye=k*je/255,we=1-Ye;Bt[Pe]=Ye*Z+we*N,Bt[Pe+1]=Ye*$+we*z,Bt[Pe+2]=Ye*R+we*D,Bt[Pe+3]=k*je+we*H}Xe.putImageData(Lt,nt.x,nt.y)}}},Ds=new function(){var y="http://www.w3.org/2000/svg",l="http://www.w3.org/2000/xmlns",d="http://www.w3.org/1999/xlink",_={href:d,xlink:l,xmlns:l+"/","xmlns:xlink":l+"/"};function k(N,z,D){for(var H in z){var Z=z[H],$=_[H];"number"==typeof Z&&D&&(Z=D.number(Z)),$?N.setAttributeNS($,H,Z):N.setAttribute(H,Z)}return N}return{svg:y,xmlns:l,xlink:d,create:function C(N,z,D){return k(K.createElementNS(y,N),z,D)},get:function S(N,z){var D=_[z],H=D?N.getAttributeNS(D,z):N.getAttribute(z);return"null"===H?null:H},set:k}},nr=q.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(y,l){return!l&&(y instanceof Pn||y instanceof Vt||y instanceof ni)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(y,l){var d=q.capitalize(l),_=y[2];this[l]={type:y[1],property:l,attribute:y[0],toSVG:_,fromSVG:_&&q.each(_,function(C,S){this[C]=S},{}),exportFilter:y[3],get:"get"+d,set:"set"+d}},{});new function(){var y;function l(ge,pe,de){var Xe,Ee=new q,ke=ge.getTranslation();if(pe&&(ge.isInvertible()?(Xe=(ge=ge._shiftless())._inverseTransform(ke),ke=null):Xe=new Le,Ee[de?"cx":"x"]=Xe.x,Ee[de?"cy":"y"]=Xe.y),!ge.isIdentity()){var je=ge.decompose();if(je){var nt=[],pt=je.rotation,gt=je.scaling,Wt=je.skewing;ke&&!ke.isZero()&&nt.push("translate("+y.point(ke)+")"),pt&&nt.push("rotate("+y.number(pt)+")"),(!Q.isZero(gt.x-1)||!Q.isZero(gt.y-1))&&nt.push("scale("+y.point(gt)+")"),Wt.x&&nt.push("skewX("+y.number(Wt.x)+")"),Wt.y&&nt.push("skewY("+y.number(Wt.y)+")"),Ee.transform=nt.join(" ")}else Ee.transform="matrix("+ge.getValues().join(",")+")"}return Ee}function d(ge,pe){for(var de=l(ge._matrix),Ee=ge._children,ke=Ds.create("g",de,y),Xe=0,je=Ee.length;Xe<je;Xe++){var nt=Ee[Xe],pt=me(nt,pe);if(pt)if(nt.isClipMask()){var gt=Ds.create("clipPath");gt.appendChild(pt),Y(nt,gt,"clip"),Ds.set(ke,{"clip-path":"url(#"+gt.id+")"})}else ke.appendChild(pt)}return ke}function S(ge){var pe=ge._type,de=ge._radius,Ee=l(ge._matrix,!0,"rectangle"!==pe);if("rectangle"===pe){pe="rect";var ke=ge._size,Xe=ke.width,je=ke.height;Ee.x-=Xe/2,Ee.y-=je/2,Ee.width=Xe,Ee.height=je,de.isZero()&&(de=null)}return de&&("circle"===pe?Ee.r=de:(Ee.rx=de.width,Ee.ry=de.height)),Ds.create(pe,Ee,y)}var $,H={Group:d,Layer:d,Raster:function _(ge,pe){var de=l(ge._matrix,!0),Ee=ge.getSize(),ke=ge.getImage();return de.x-=Ee.width/2,de.y-=Ee.height/2,de.width=Ee.width,de.height=Ee.height,de.href=0==pe.embedImages&&ke&&ke.src||ge.toDataURL(),Ds.create("image",de,y)},Path:function C(ge,pe){var de=pe.matchShapes;if(de){var Ee=ge.toShape(!1);if(Ee)return S(Ee)}var je,ke=ge._segments,Xe=ke.length,nt=l(ge._matrix);if(de&&Xe>=2&&!ge.hasHandles())if(Xe>2){je=ge._closed?"polygon":"polyline";for(var pt=[],gt=0;gt<Xe;gt++)pt.push(y.point(ke[gt]._point));nt.points=pt.join(" ")}else{je="line";var Wt=ke[0]._point,Lt=ke[1]._point;nt.set({x1:Wt.x,y1:Wt.y,x2:Lt.x,y2:Lt.y})}else je="path",nt.d=ge.getPathData(null,pe.precision);return Ds.create(je,nt,y)},Shape:S,CompoundPath:function k(ge,pe){var de=l(ge._matrix),Ee=ge.getPathData(null,pe.precision);return Ee&&(de.d=Ee),Ds.create("path",de,y)},SymbolItem:function N(ge,pe){var de=l(ge._matrix,!0),Ee=ge._definition,ke=R(Ee,"symbol"),Xe=Ee._item,je=Xe.getStrokeBounds();return ke||((ke=Ds.create("symbol",{viewBox:y.rectangle(je)})).appendChild(me(Xe,pe)),Y(Ee,ke,"symbol")),de.href="#"+ke.id,de.x+=je.x,de.y+=je.y,de.width=je.width,de.height=je.height,de.overflow="visible",Ds.create("use",de,y)},PointText:function D(ge){var pe=Ds.create("text",l(ge._matrix,!0),y);return pe.textContent=ge._content,pe}};function R(ge,pe){return $||($={ids:{},svgs:{}}),ge&&$.svgs[pe+"-"+(ge._id||ge.__id||(ge.__id=Re.get("svg")))]}function Y(ge,pe,de){$||R();var Ee=$.ids[de]=($.ids[de]||0)+1;pe.id=de+"-"+Ee,$.svgs[de+"-"+(ge._id||ge.__id)]=pe}function he(ge,pe){var de=ge,Ee=null;if($){for(var ke in de="svg"===ge.nodeName.toLowerCase()&&ge,$.svgs)Ee||(de||(de=Ds.create("svg")).appendChild(ge),Ee=de.insertBefore(Ds.create("defs"),de.firstChild)),Ee.appendChild($.svgs[ke]);$=null}return pe.asString?(new re.XMLSerializer).serializeToString(de):de}function me(ge,pe,de){var Ee=H[ge._class],ke=Ee&&Ee(ge,pe);if(ke){var Xe=pe.onExport;Xe&&(ke=Xe(ge,ke,pe)||ke);var je=JSON.stringify(ge._data);je&&"{}"!==je&&"null"!==je&&ke.setAttribute("data-paper-data",je)}return ke&&function Z(ge,pe,de){var Ee={},ke=!de&&ge.getParent(),Xe=[];return null!=ge._name&&(Ee.id=ge._name),q.each(nr,function(je){var nt=je.get,pt=je.type,gt=ge[nt]();if(je.exportFilter?je.exportFilter(ge,gt):!ke||!q.equals(ke[nt](),gt)){if("color"===pt&&null!=gt){var Wt=gt.getAlpha();Wt<1&&(Ee[je.attribute+"-opacity"]=Wt)}"style"===pt?Xe.push(je.attribute+": "+gt):Ee[je.attribute]=null==gt?"none":"color"===pt?gt.gradient?function z(ge){var pe=R(ge,"color");if(!pe){var je,de=ge.getGradient(),Ee=de._radial,ke=ge.getOrigin(),Xe=ge.getDestination();if(Ee){je={cx:ke.x,cy:ke.y,r:ke.getDistance(Xe)};var nt=ge.getHighlight();nt&&(je.fx=nt.x,je.fy=nt.y)}else je={x1:ke.x,y1:ke.y,x2:Xe.x,y2:Xe.y};je.gradientUnits="userSpaceOnUse",pe=Ds.create((Ee?"radial":"linear")+"Gradient",je,y);for(var pt=de._stops,gt=0,Wt=pt.length;gt<Wt;gt++){var Lt=pt[gt],Bt=Lt._color,qt=Bt.getAlpha();je={offset:Lt._offset??gt/(Wt-1)},Bt&&(je["stop-color"]=Bt.toCSS(!0)),qt<1&&(je["stop-opacity"]=qt),pe.appendChild(Ds.create("stop",je,y))}Y(ge,pe,"color")}return"url(#"+pe.id+")"}(gt):gt.toCSS(!0):"array"===pt?gt.join(","):"lookup"===pt?je.toSVG[gt]:gt}}),Xe.length&&(Ee.style=Xe.join(";")),1===Ee.opacity&&delete Ee.opacity,ge._visible||(Ee.visibility="hidden"),Ds.set(pe,Ee,y)}(ge,ke,de)}function ve(ge){return ge||(ge={}),y=new _e(ge.precision),ge}st.inject({exportSVG:function(ge){return he(me(this,ge=ve(ge),!0),ge)}}),dt.inject({exportSVG:function(ge){ge=ve(ge);var pe=this._children,de=this.getView(),Ee=q.pick(ge.bounds,"view"),ke=ge.matrix||"view"===Ee&&de._matrix,Xe=ke&&Ce.read([ke]),je="view"===Ee?new L([0,0],de.getViewSize()):"content"===Ee?st._getBounds(pe,Xe,{stroke:!0}).rect:L.read([Ee],0,{readNull:!0}),nt={version:"1.1",xmlns:Ds.svg,"xmlns:xlink":Ds.xlink};je&&(nt.width=je.width,nt.height=je.height,(je.x||0===je.x||je.y||0===je.y)&&(nt.viewBox=y.rectangle(je)));var pt=Ds.create("svg",nt,y),gt=pt;Xe&&!Xe.isIdentity()&&(gt=pt.appendChild(Ds.create("g",l(Xe),y)));for(var Wt=0,Lt=pe.length;Wt<Lt;Wt++)gt.appendChild(me(pe[Wt],ge,!0));return he(pt,ge)}})},new function(){var l,y={};function d(pe,de,Ee,ke,Xe,je){var nt=Ds.get(pe,de)||je,pt=null==nt?ke?null:Ee?"":0:Ee?nt:parseFloat(nt);return/%\s*$/.test(nt)?pt/100*(Xe?1:l[/x|^width/.test(de)?"width":"height"]):pt}function _(pe,de,Ee,ke,Xe,je,nt){return de=d(pe,de||"x",!1,ke,Xe,je),Ee=d(pe,Ee||"y",!1,ke,Xe,nt),!ke||null!=de&&null!=Ee?new Le(de,Ee):null}function C(pe,de,Ee,ke,Xe){return de=d(pe,de||"width",!1,ke,Xe),Ee=d(pe,Ee||"height",!1,ke,Xe),!ke||null!=de&&null!=Ee?new Ae(de,Ee):null}function S(pe,de,Ee){return"none"===pe?null:"number"===de?parseFloat(pe):"array"===de?pe?pe.split(/[\s,]+/g).map(parseFloat):[]:"color"===de?me(pe)||pe:"lookup"===de?Ee[pe]:pe}function k(pe,de,Ee,ke){var Xe=pe.childNodes,je="clippath"===de,nt="defs"===de,pt=new bt,gt=pt._project,Wt=gt._currentStyle,Lt=[];if(!je&&!nt&&(pt=he(pt,pe,ke),gt._currentStyle=pt._style.clone()),ke)for(var Bt=pe.querySelectorAll("defs"),qt=0,Pe=Bt.length;qt<Pe;qt++)ve(Bt[qt],Ee,!1);for(qt=0,Pe=Xe.length;qt<Pe;qt++){var Ye,We=Xe[qt];1===We.nodeType&&!/^defs$/i.test(We.nodeName)&&(Ye=ve(We,Ee,!1))&&!(Ye instanceof rn)&&Lt.push(Ye)}return pt.addChildren(Lt),je&&(pt=he(pt.reduce(),pe,ke)),gt._currentStyle=Wt,(je||nt)&&(pt.remove(),pt=null),pt}function N(pe,de){for(var Ee=pe.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),ke=[],Xe=0,je=Ee.length;Xe<je;Xe+=2)ke.push(new Le(parseFloat(Ee[Xe]),parseFloat(Ee[Xe+1])));var nt=new xt(ke);return"polygon"===de&&nt.closePath(),nt}function D(pe,de){var Xe,Ee=(d(pe,"href",!0)||"").substring(1),ke="radialgradient"===de;if(Ee)(Xe=y[Ee].getGradient())._radial^ke&&((Xe=Xe.clone())._radial=ke);else{for(var je=pe.childNodes,nt=[],pt=0,gt=je.length;pt<gt;pt++){var Wt=je[pt];1===Wt.nodeType&&nt.push(he(new Ot,Wt))}Xe=new Ft(nt,ke)}var Lt,Bt,qt,Pe="userSpaceOnUse"!==d(pe,"gradientUnits",!0);return ke?(Bt=(Lt=_(pe,"cx","cy",!1,Pe,"50%","50%")).add(d(pe,"r",!1,!1,Pe,"50%"),0),qt=_(pe,"fx","fy",!0,Pe)):(Lt=_(pe,"x1","y1",!1,Pe,"0%","0%"),Bt=_(pe,"x2","y2",!1,Pe,"100%","0%")),he(new Oe(Xe,Lt,Bt,qt),pe)._scaleToBounds=Pe,null}var H={"#document":function(pe,de,Ee,ke){for(var Xe=pe.childNodes,je=0,nt=Xe.length;je<nt;je++){var pt=Xe[je];if(1===pt.nodeType)return ve(pt,Ee,ke)}},g:k,svg:k,clippath:k,polygon:N,polyline:N,path:function z(pe){return Pn.create(pe.getAttribute("d"))},lineargradient:D,radialgradient:D,image:function(pe){var de=new on(d(pe,"href",!0));return de.on("load",function(){var Ee=C(pe);this.setSize(Ee);var ke=_(pe).add(Ee.divide(2));this._matrix.append((new Ce).translate(ke))}),de},symbol:function(pe,de,Ee,ke){return new rn(k(pe,de,Ee,ke),!0)},defs:k,use:function(pe){var de=(d(pe,"href",!0)||"").substring(1),Ee=y[de],ke=_(pe);return Ee?Ee instanceof rn?Ee.place(ke):Ee.clone().translate(ke):null},circle:function(pe){return new Vt.Circle(_(pe,"cx","cy"),d(pe,"r"))},ellipse:function(pe){return new Vt.Ellipse({center:_(pe,"cx","cy"),radius:C(pe,"rx","ry")})},rect:function(pe){return new Vt.Rectangle(new L(_(pe),C(pe)),C(pe,"rx","ry"))},line:function(pe){return new xt.Line(_(pe,"x1","y1"),_(pe,"x2","y2"))},text:function(pe){var de=new St(_(pe).add(_(pe,"dx","dy")));return de.setContent(pe.textContent.trim()||""),de},switch:k};function Z(pe,de,Ee,ke){if(pe.transform){for(var Xe=(ke.getAttribute(Ee)||"").split(/\)\s*/g),je=new Ce,nt=0,pt=Xe.length;nt<pt;nt++){var gt=Xe[nt];if(!gt)break;for(var Wt=gt.split(/\(\s*/),Lt=Wt[0],Bt=Wt[1].split(/[\s,]+/g),qt=0,Pe=Bt.length;qt<Pe;qt++)Bt[qt]=parseFloat(Bt[qt]);switch(Lt){case"matrix":je.append(new Ce(Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5]));break;case"rotate":je.rotate(Bt[0],Bt[1]||0,Bt[2]||0);break;case"translate":je.translate(Bt[0],Bt[1]||0);break;case"scale":je.scale(Bt);break;case"skewX":je.skew(Bt[0],0);break;case"skewY":je.skew(0,Bt[0])}}pe.transform(je)}}function $(pe,de,Ee){var ke="fill-opacity"===Ee?"getFillColor":"getStrokeColor",Xe=pe[ke]&&pe[ke]();Xe&&Xe.setAlpha(parseFloat(de))}var R=q.set(q.each(nr,function(pe){this[pe.attribute]=function(de,Ee){if(de[pe.set]&&(de[pe.set](S(Ee,pe.type,pe.fromSVG)),"color"===pe.type)){var ke=de[pe.get]();if(ke&&ke._scaleToBounds){var Xe=de.getBounds();ke.transform((new Ce).translate(Xe.getPoint()).scale(Xe.getSize()))}}}},{}),{id:function(pe,de){y[de]=pe,pe.setName&&pe.setName(de)},"clip-path":function(pe,de){var Ee=me(de);if(Ee){if((Ee=Ee.clone()).setClipMask(!0),!(pe instanceof bt))return new bt(Ee,pe);pe.insertChild(0,Ee)}},gradientTransform:Z,transform:Z,"fill-opacity":$,"stroke-opacity":$,visibility:function(pe,de){pe.setVisible&&pe.setVisible("visible"===de)},display:function(pe,de){pe.setVisible&&pe.setVisible(null!==de)},"stop-color":function(pe,de){pe.setColor&&pe.setColor(de)},"stop-opacity":function(pe,de){pe._color&&pe._color.setAlpha(parseFloat(de))},offset:function(pe,de){if(pe.setOffset){var Ee=de.match(/(.*)%$/);pe.setOffset(Ee?Ee[1]/100:parseFloat(de))}},viewBox:function(pe,de,Ee,ke,Xe){var pt,je=new L(S(de,"array")),nt=C(ke,null,null,!0);if(pe instanceof bt){var Wt=nt?nt.divide(je.getSize()):1,gt=(new Ce).scale(Wt).translate(je.getPoint().negate());pt=pe}else pe instanceof rn&&(nt&&je.setSize(nt),pt=pe._item);if(pt){if("visible"!==Y(ke,"overflow",Xe)){var Lt=new Vt.Rectangle(je);Lt.setClipMask(!0),pt.addChild(Lt)}gt&&pt.transform(gt)}}});function Y(pe,de,Ee){var ke=pe.attributes[de],Xe=ke&&ke.value;if(!Xe&&pe.style){var je=q.camelize(de);!(Xe=pe.style[je])&&Ee.node[je]!==Ee.parent[je]&&(Xe=Ee.node[je])}return Xe?"none"===Xe?null:Xe:ie}function he(pe,de,Ee){var ke=de.parentNode,Xe={node:di.getStyles(de)||{},parent:!Ee&&!/^defs$/i.test(ke.tagName)&&di.getStyles(ke)||{}};return q.each(R,function(je,nt){var pt=Y(de,nt,Xe);pe=pt!==ie&&je(pe,pt,nt,de,Xe)||pe}),pe}function me(pe){var de=pe&&pe.match(/\((?:["'#]*)([^"')]+)/),Ee=de&&de[1],ke=Ee&&y[V?Ee.replace(V.location.href.split("#")[0]+"#",""):Ee];return ke&&ke._scaleToBounds&&((ke=ke.clone())._scaleToBounds=!0),ke}function ve(pe,de,Ee){var nt,pt,gt,ke=pe.nodeName.toLowerCase(),Xe="#document"!==ke,je=K.body;Ee&&Xe&&(l=fr.getView().getSize(),l=C(pe,null,null,!0)||l,nt=Ds.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),pt=pe.parentNode,gt=pe.nextSibling,nt.appendChild(pe),je.appendChild(nt));var Wt=fr.settings,Lt=Wt.applyMatrix,Bt=Wt.insertItems;Wt.applyMatrix=!1,Wt.insertItems=!1;var qt=H[ke],Pe=qt&&qt(pe,ke,de,Ee)||null;if(Wt.insertItems=Bt,Wt.applyMatrix=Lt,Pe){Xe&&!(Pe instanceof bt)&&(Pe=he(Pe,pe,Ee));var We=de.onImport,Ye=Xe&&pe.getAttribute("data-paper-data");We&&(Pe=We(pe,Pe,de)||Pe),de.expandShapes&&Pe instanceof Vt&&(Pe.remove(),Pe=Pe.toPath()),Ye&&(Pe._data=JSON.parse(Ye))}return nt&&(je.removeChild(nt),pt&&(gt?pt.insertBefore(pe,gt):pt.appendChild(pe))),Ee&&(y={},Pe&&q.pick(de.applyMatrix,Lt)&&Pe.matrix.apply(!0,!0)),Pe}function ge(pe,de,Ee){if(!pe)return null;de="function"==typeof de?{onLoad:de}:de||{};var ke=fr,Xe=null;function je(Wt){try{var Lt="object"==typeof Wt?Wt:(new re.DOMParser).parseFromString(Wt.trim(),"image/svg+xml");if(!Lt.nodeName)throw Lt=null,new Error("Unsupported SVG source: "+pe);fr=ke,Xe=ve(Lt,de,!0),(!de||!1!==de.insert)&&Ee._insertItem(ie,Xe);var Bt=de.onLoad;Bt&&Bt(Xe,Wt)}catch(qt){nt(qt)}}function nt(Wt,Lt){var Bt=de.onError;if(!Bt)throw new Error(Wt);Bt(Wt,Lt)}if("string"!=typeof pe||/^[\s\S]*</.test(pe)){if(typeof File<"u"&&pe instanceof File){var gt=new FileReader;return gt.onload=function(){je(gt.result)},gt.onerror=function(){nt(gt.error)},gt.readAsText(pe)}je(pe)}else{var pt=K.getElementById(pe);pt?je(pt):function(y){var l=new re.XMLHttpRequest;l.open((y.method||"get").toUpperCase(),y.url,q.pick(y.async,!0)),y.mimeType&&l.overrideMimeType(y.mimeType),l.onload=function(){var d=l.status;0===d||200===d?y.onLoad&&y.onLoad.call(l,l.responseText):l.onerror()},l.onerror=function(){var d=l.status,_='Could not load "'+y.url+'" (Status: '+d+")";if(!y.onError)throw new Error(_);y.onError(_,d)},l.send(null)}({url:pe,async:!0,onLoad:je,onError:nt})}return Xe}st.inject({importSVG:function(pe,de){return ge(pe,de,this)}}),dt.inject({importSVG:function(pe,de){return this.activate(),ge(pe,de,this)}})};var fr=new(Te.inject(q.exports,{Base:q,Numerical:Q,Key:lt,DomEvent:Gt,DomElement:di,document:K,window:V,Symbol:rn,PlacedSymbol:Ct}));return fr.agent.node&&ae(1839)(fr),(j="function"==typeof(ye=fr)?ye.call(it,ae,it,yt):ye)!==ie&&(yt.exports=j),fr}).call(this,"object"==typeof self?self:null)},8946:function(yt,it,ae){var ye,j,oe;(function(ie,V){var K=(ie=ie||ae(4158)).window,q=ie.document,le=new function(){var l=/^(statics|enumerable|beans|preserve)$/,d=[],_=d.slice,C=Object.create,S=Object.getOwnPropertyDescriptor,k=Object.defineProperty,N=d.forEach||function(R,Y){for(var he=0,me=this.length;he<me;he++)R.call(Y,this[he],he,this)},z=function(R,Y){for(var he in this)this.hasOwnProperty(he)&&R.call(Y,this[he],he,this)},D=Object.assign||function(R){for(var Y=1,he=arguments.length;Y<he;Y++){var me=arguments[Y];for(var ve in me)me.hasOwnProperty(ve)&&(R[ve]=me[ve])}return R},H=function(R,Y,he){if(R){var me=S(R,"length");(me&&"number"==typeof me.value?N:z).call(R,Y,he=he||R)}return he};function Z(R,Y,he,me,ve){var ge={};function pe(je,nt){"string"==typeof(nt=nt||(nt=S(Y,je))&&(nt.get?nt:nt.value))&&"#"===nt[0]&&(nt=R[nt.substring(1)]||nt);var Lt,pt="function"==typeof nt,gt=nt,Wt=ve||pt&&!nt.base?nt&&nt.get?je in R:R[je]:null;(!ve||!Wt)&&(pt&&Wt&&(nt.base=Wt),pt&&!1!==me&&(Lt=je.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(ge[Lt[3].toLowerCase()+Lt[4]]=Lt[2]),(!gt||pt||!gt.get||"function"!=typeof gt.get||!$.isPlainObject(gt))&&(gt={value:gt,writable:!0}),(S(R,je)||{configurable:!0}).configurable&&(gt.configurable=!0,gt.enumerable=he??!Lt),k(R,je,gt))}if(Y){for(var de in Y)Y.hasOwnProperty(de)&&!l.test(de)&&pe(de);for(var de in ge){var Ee=ge[de],ke=R["set"+Ee],Xe=R["get"+Ee]||ke&&R["is"+Ee];Xe&&(!0===me||0===Xe.length)&&pe(de,{get:Xe,set:ke})}}return R}function $(){for(var R=0,Y=arguments.length;R<Y;R++){var he=arguments[R];he&&D(this,he)}return this}return Z($,{inject:function(R){if(R){var Y=!0===R.statics?R:R.statics,he=R.beans,me=R.preserve;Y!==R&&Z(this.prototype,R,R.enumerable,he,me),Z(this,Y,null,he,me)}for(var ve=1,ge=arguments.length;ve<ge;ve++)this.inject(arguments[ve]);return this},extend:function(){for(var Y,he,ve,R=this,me=0,ge=arguments.length;me<ge&&(!Y||!he);me++)ve=arguments[me],Y=Y||ve.initialize,he=he||ve.prototype;return Y=Y||function(){R.apply(this,arguments)},he=Y.prototype=he||C(this.prototype),k(he,"constructor",{value:Y,writable:!0,configurable:!0}),Z(Y,this),arguments.length&&this.inject.apply(Y,arguments),Y.base=R,Y}}).inject({enumerable:!1,initialize:$,set:$,inject:function(){for(var R=0,Y=arguments.length;R<Y;R++){var he=arguments[R];he&&Z(this,he,he.enumerable,he.beans,he.preserve)}return this},extend:function(){var R=C(this);return R.inject.apply(R,arguments)},each:function(R,Y){return H(this,R,Y)},clone:function(){return new this.constructor(this)},statics:{set:D,each:H,create:C,define:k,describe:S,clone:function(R){return D(new R.constructor,R)},isPlainObject:function(R){var Y=null!=R&&R.constructor;return Y&&(Y===Object||Y===$||"Object"===Y.name)},pick:function(R,Y){return R!==V?R:Y},slice:function(R,Y,he){return _.call(R,Y,he)}}})};yt.exports=le,le.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+le.each(this,function(l,d){if(!/^_/.test(d)){var _=typeof l;this.push(d+": "+("number"===_?Q.instance.number(l):"string"===_?"'"+l+"'":l))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(l){return le.importJSON(l,this)},exportJSON:function(l){return le.exportJSON(this,l)},toJSON:function(){return le.serialize(this)},set:function(l,d){return l&&le.filter(this,l,d,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function l(){var d=l.base.apply(this,arguments),_=d.prototype._class;return _&&!le.exports[_]&&(le.exports[_]=d),d},equals:function(l,d){if(l===d)return!0;if(l&&l.equals)return l.equals(d);if(d&&d.equals)return d.equals(l);if(l&&d&&"object"==typeof l&&"object"==typeof d){if(Array.isArray(l)&&Array.isArray(d)){if((_=l.length)!==d.length)return!1;for(;_--;)if(!le.equals(l[_],d[_]))return!1}else{var _,C=Object.keys(l);if((_=C.length)!==Object.keys(d).length)return!1;for(;_--;){var S=C[_];if(!d.hasOwnProperty(S)||!le.equals(l[S],d[S]))return!1}}return!0}return!1},read:function(l,d,_,C){if(this===le){var S=this.peek(l,d);return l.__index++,S}var k=this.prototype,N=k._readIndex,z=d||N&&l.__index||0,D=l.length,H=l[z];if(C=C||D-z,H instanceof this||_&&_.readNull&&null==H&&C<=1)return N&&(l.__index=z+1),H&&_&&_.clone?H.clone():H;if(H=le.create(k),N&&(H.__read=!0),H=H.initialize.apply(H,z>0||z+C<D?le.slice(l,z,z+C):l)||H,N){l.__index=z+H.__read;var Z=H.__filtered;Z&&(l.__filtered=Z,H.__filtered=V),H.__read=V}return H},peek:function(l,d){return l[l.__index=d||l.__index||0]},remain:function(l){return l.length-(l.__index||0)},readList:function(l,d,_,C){for(var k,S=[],N=d||0,z=C?N+C:l.length,D=N;D<z;D++)S.push(Array.isArray(k=l[D])?this.read(k,0,_):this.read(l,D,_,1));return S},readNamed:function(l,d,_,C,S){var k=this.getNamed(l,d),N=k!==V;if(N){var z=l.__filtered;if(!z){var D=this.getSource(l);(z=l.__filtered=le.create(D)).__unfiltered=D}z[d]=V}return this.read(N?[k]:l,_,C,S)},readSupported:function(l,d){var _=this.getSource(l),C=this,S=!1;return _&&Object.keys(_).forEach(function(k){if(k in d){var N=C.readNamed(l,k);N!==V&&(d[k]=N),S=!0}}),S},getSource:function(l){var d=l.__source;if(d===V){var _=1===l.length&&l[0];d=l.__source=_&&le.isPlainObject(_)?_:null}return d},getNamed:function(l,d){var _=this.getSource(l);if(_)return d?_[d]:l.__filtered||_},hasNamed:function(l,d){return!!this.getNamed(l,d)},filter:function(l,d,_,C){var S;function k(Z){if(!(_&&Z in _||S&&Z in S)){var $=d[Z];$!==V&&(l[Z]=$)}}if(C){for(var D,N={},z=0,H=C.length;z<H;z++)(D=C[z])in d&&(k(D),N[D]=!0);S=N}return Object.keys(d.__unfiltered||d).forEach(k),l},isPlainValue:function(l,d){return le.isPlainObject(l)||Array.isArray(l)||d&&"string"==typeof l},serialize:function(l,d,_,C){d=d||{};var k,S=!C;if(S&&(d.formatter=new Q(d.precision),C={length:0,definitions:{},references:{},add:function($,R){var Y="#"+$._id,he=this.references[Y];if(!he){this.length++;var me=R.call($),ve=$._class;ve&&me[0]!==ve&&me.unshift(ve),this.definitions[Y]=me,he=this.references[Y]=[Y]}return he}}),l&&l._serialize){k=l._serialize(d,C);var N=l._class;N&&!l._compactSerialize&&(S||!_)&&k[0]!==N&&k.unshift(N)}else if(Array.isArray(l)){k=[];for(var z=0,D=l.length;z<D;z++)k[z]=le.serialize(l[z],d,_,C)}else if(le.isPlainObject(l)){k={};var H=Object.keys(l);for(z=0,D=H.length;z<D;z++){var Z=H[z];k[Z]=le.serialize(l[Z],d,_,C)}}else k="number"==typeof l?d.formatter.number(l,d.precision):l;return S&&C.length>0?[["dictionary",C.definitions],k]:k},deserialize:function(l,d,_,C,S){var k=l,N=!_,z=N&&l&&l.length&&"dictionary"===l[0][0];if(_=_||{},Array.isArray(l)){var D=l[0],H="dictionary"===D;if(1==l.length&&/^#/.test(D))return _.dictionary[D];k=[];for(var Z=(D=le.exports[D])?1:0,$=l.length;Z<$;Z++)k.push(le.deserialize(l[Z],d,_,H,z));if(D){var R=k;k=d?d(D,R,N||S):new D(R)}}else if(le.isPlainObject(l))for(var Y in k={},C&&(_.dictionary=k),l)k[Y]=le.deserialize(l[Y],d,_);return z?k[1]:k},exportJSON:function(l,d){var _=le.serialize(l,d);return d&&0==d.asString?_:JSON.stringify(_)},importJSON:function(l,d){return le.deserialize("string"==typeof l?JSON.parse(l):l,function(_,C,S){var k=S&&d&&d.constructor===_,N=k?d:le.create(_.prototype);if(1===C.length&&N instanceof bt&&(k||!(N instanceof Vt))){var z=C[0];le.isPlainObject(z)&&(z.insert=!1,k&&(C=C.concat([bt.INSERT])))}return(k?N.set:_).apply(N,C),k&&(d=null),N})},push:function(l,d){var _=d.length;if(_<4096)l.push.apply(l,d);else{var C=l.length;l.length+=_;for(var S=0;S<_;S++)l[C+S]=d[S]}return l},splice:function(l,d,_,C){var S=d&&d.length,k=_===V;(_=k?l.length:_)>l.length&&(_=l.length);for(var N=0;N<S;N++)d[N]._index=_+N;if(k)return le.push(l,d),[];var z=[_,C];d&&le.push(z,d);for(var D=l.splice.apply(l,z),H=(N=0,D.length);N<H;N++)D[N]._index=V;for(N=_+S,H=l.length;N<H;N++)l[N]._index=N;return D},capitalize:function(l){return l.replace(/\b[a-z]/g,function(d){return d.toUpperCase()})},camelize:function(l){return l.replace(/-(.)/g,function(d,_){return _.toUpperCase()})},hyphenate:function(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var Te={on:function(l,d){if("string"!=typeof l)le.each(l,function(k,N){this.on(N,k)},this);else{var _=this._eventTypes,C=_&&_[l],S=this._callbacks=this._callbacks||{};-1===(S=S[l]=S[l]||[]).indexOf(d)&&(S.push(d),C&&C.install&&1===S.length&&C.install.call(this,l))}return this},off:function(l,d){if("string"==typeof l){var k,_=this._eventTypes,C=_&&_[l],S=this._callbacks&&this._callbacks[l];return S&&(!d||-1!==(k=S.indexOf(d))&&1===S.length?(C&&C.uninstall&&C.uninstall.call(this,l),delete this._callbacks[l]):-1!==k&&S.splice(k,1)),this}le.each(l,function(N,z){this.off(z,N)},this)},once:function(l,d){return this.on(l,function _(){d.apply(this,arguments),this.off(l,_)})},emit:function(l,d){var _=this._callbacks&&this._callbacks[l];if(!_)return!1;var C=le.slice(arguments,1),S=d&&d.target&&!d.currentTarget;_=_.slice(),S&&(d.currentTarget=this);for(var k=0,N=_.length;k<N;k++)if(0==_[k].apply(this,C)){d&&d.stop&&d.stop();break}return S&&delete d.currentTarget,!0},responds:function(l){return!(!this._callbacks||!this._callbacks[l])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(l){var d=this._eventTypes,_=this._callbacks,C=l?"install":"uninstall";if(d)for(var S in _)if(_[S].length>0){var k=d[S],N=k&&k[C];N&&N.call(this,S)}},statics:{inject:function l(d){var _=d._events;if(_){var C={};le.each(_,function(S,k){var N="string"==typeof S,z=N?S:k,D=le.capitalize(z),H=z.substring(2).toLowerCase();C[H]=N?{}:S,z="_"+z,d["get"+D]=function(){return this[z]},d["set"+D]=function(Z){var $=this[z];$&&this.off(H,$),Z&&this.on(H,Z),this[z]=Z}}),d._eventTypes=C}return l.base.apply(this,arguments)}}},De=le.extend({_class:"PaperScope",initialize:function l(){y=this,this.settings=new le({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=l._id++,l._scopes[this._id]=this;var d=l.prototype;if(!this.support){var _=Hr.getContext(1,1)||{};d.support={nativeDash:"setLineDash"in _||"mozDash"in _,nativeBlendModes:Ds.nativeModes},Hr.release(_)}if(!this.agent){var C=ie.navigator.userAgent.toLowerCase(),S=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(C)||[])[0],k="darwin"===S?"mac":S,N=d.agent=d.browser={platform:k};k&&(N[k]=!0),C.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(z,D,H,Z,$){if(!N.chrome){var R="opera"===D?Z:/^(node|trident)$/.test(D)?$:H;N.version=R,N.versionNumber=parseFloat(R),N.name=D={trident:"msie",jsdom:"node"}[D]||D,N[D]=!0}}),N.chrome&&delete N.webkit,N.atom&&delete N.chrome}},version:"0.12.17",getView:function(){var l=this.project;return l&&l._view},getPaper:function(){return this},execute:function(l,d){var _=y.PaperScript.execute(l,this,d);return _n.updateFocus(),_},install:function(l){var d=this;for(var _ in le.each(["project","view","tool"],function(C){le.define(l,C,{configurable:!0,get:function(){return d[C]}})}),this)!/^_/.test(_)&&this[_]&&(l[_]=this[_])},setup:function(l){return y=this,this.project=new st(l),this},createCanvas:function(l,d){return Hr.getCanvas(l,d)},activate:function(){y=this},clear:function(){for(var l=this.projects,d=this.tools,_=l.length-1;_>=0;_--)l[_].remove();for(_=d.length-1;_>=0;_--)d[_].remove()},remove:function(){this.clear(),delete De._scopes[this._id]},statics:new function(){function l(d){return d+="Attribute",function(_,C){return _[d](C)||_[d]("data-paper-"+C)}}return{_scopes:{},_id:0,get:function(d){return this._scopes[d]||null},getAttribute:l("get"),hasAttribute:l("has")}}}),xe=le.extend(Te,{initialize:function(l){this._scope=y,this._index=this._scope[this._list].push(this)-1,(l||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var l=this._scope[this._reference];return l&&l!==this&&l.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",l),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(le.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),_e={findItemBoundsCollisions:function(l,d,_){function C(N){for(var z=new Array(N.length),D=0;D<N.length;D++){var H=N[D].getBounds();z[D]=[H.left,H.top,H.right,H.bottom]}return z}var S=C(l),k=d&&d!==l?C(d):S;return this.findBoundsCollisions(S,k,_||0)},findCurveBoundsCollisions:function(l,d,_,C){function S(R){for(var Y=Math.min,he=Math.max,me=new Array(R.length),ve=0;ve<R.length;ve++){var ge=R[ve];me[ve]=[Y(ge[0],ge[2],ge[4],ge[6]),Y(ge[1],ge[3],ge[5],ge[7]),he(ge[0],ge[2],ge[4],ge[6]),he(ge[1],ge[3],ge[5],ge[7])]}return me}var k=S(l),N=d&&d!==l?S(d):k;if(C){for(var z=this.findBoundsCollisions(k,N,_||0,!1,!0),D=this.findBoundsCollisions(k,N,_||0,!0,!0),H=[],Z=0,$=z.length;Z<$;Z++)H[Z]={hor:z[Z],ver:D[Z]};return H}return this.findBoundsCollisions(k,N,_||0)},findBoundsCollisions:function(l,d,_,C,S){var k=!d||l===d,N=k?l:l.concat(d),z=l.length,D=N.length;function H(Ue,ct,Dt){for(var wt=0,nn=Ue.length;wt<nn;){var On=nn+wt>>>1;N[Ue[On]][ct]<Dt?wt=On+1:nn=On}return wt-1}for(var Z=C?1:0,$=Z+2,R=C?0:1,Y=R+2,he=new Array(D),me=0;me<D;me++)he[me]=me;he.sort(function(Ue,ct){return N[Ue][Z]-N[ct][Z]});var ve=[],ge=new Array(z);for(me=0;me<D;me++){var pe=he[me],de=N[pe],Ee=k?pe:pe-z,ke=pe<z,Xe=k||!ke,je=ke?[]:null;if(ve.length){var nt=H(ve,$,de[Z]-_)+1;if(ve.splice(0,nt),k&&S){je=je.concat(ve);for(var pt=0;pt<ve.length;pt++)ge[gt=ve[pt]].push(Ee)}else{var Wt=de[Y],Lt=de[R];for(pt=0;pt<ve.length;pt++){var gt,Bt=N[gt=ve[pt]],qt=gt<z,Pe=k||gt>=z;(S||(ke&&Pe||Xe&&qt)&&Wt>=Bt[R]-_&&Lt<=Bt[Y]+_)&&(ke&&Pe&&je.push(k?gt:gt-z),Xe&&qt&&ge[gt].push(Ee))}}}if(ke&&(l===d&&je.push(pe),ge[pe]=je),ve.length){var Ye=H(ve,$,de[$]);ve.splice(Ye+1,0,pe)}else ve.push(pe)}for(me=0;me<ge.length;me++){var we=ge[me];we&&we.sort(function(ct,Dt){return ct-Dt})}return ge}},Q=le.extend({initialize:function(l){this.precision=le.pick(l,5),this.multiplier=Math.pow(10,this.precision)},number:function(l){return this.precision<16?Math.round(l*this.multiplier)/this.multiplier:l},pair:function(l,d,_){return this.number(l)+(_||",")+this.number(d)},point:function(l,d){return this.number(l.x)+(d||",")+this.number(l.y)},size:function(l,d){return this.number(l.width)+(d||",")+this.number(l.height)},rectangle:function(l,d){return this.point(l,d)+(d||",")+this.size(l,d)}});Q.instance=new Q;var Re=new function(){var l=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],d=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],_=Math.abs,C=Math.sqrt,S=Math.pow,k=Math.log2||function($){return Math.log($)*Math.LOG2E},N=1e-12,z=112e-18;function D($,R,Y){return $<R?R:$>Y?Y:$}function H($,R,Y){function he(nt){var pt=134217729*nt,Wt=nt-pt+pt;return[Wt,nt-Wt]}var me=R*R-$*Y,ve=R*R+$*Y;if(3*_(me)<ve){var ge=he($),pe=he(R),de=he(Y),Ee=R*R,Xe=$*Y;me=Ee-Xe+(pe[0]*pe[0]-Ee+2*pe[0]*pe[1]+pe[1]*pe[1]-(ge[0]*de[0]-Xe+ge[0]*de[1]+ge[1]*de[0]+ge[1]*de[1]))}return me}function Z(){var $=Math.max.apply(Math,arguments);return $&&($<1e-8||$>1e8)?S(2,-Math.round(k($))):0}return{EPSILON:N,MACHINE_EPSILON:z,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(C(2)-1)/3,isZero:function($){return $>=-N&&$<=N},isMachineZero:function($){return $>=-z&&$<=z},clamp:D,integrate:function($,R,Y,he){for(var me=l[he-2],ve=d[he-2],ge=.5*(Y-R),pe=ge+R,de=0,Ee=he+1>>1,ke=1&he?ve[de++]*$(pe):0;de<Ee;){var Xe=ge*me[de];ke+=ve[de++]*($(pe+Xe)+$(pe-Xe))}return ge*ke},findRoot:function($,R,Y,he,me,ve,ge){for(var pe=0;pe<ve;pe++){var de=$(Y),Ee=de/R(Y),ke=Y-Ee;if(_(Ee)<ge){Y=ke;break}de>0?(me=Y,Y=ke<=he?.5*(he+me):ke):(he=Y,Y=ke>=me?.5*(he+me):ke)}return D(Y,he,me)},solveQuadratic:function($,R,Y,he,me,ve){var ge,pe=1/0;if(_($)<N){if(_(R)<N)return _(Y)<N?-1:0;ge=-Y/R}else{var de=H($,R*=-.5,Y);if(de&&_(de)<z){var Ee=Z(_($),_(R),_(Y));Ee&&(de=H($*=Ee,R*=Ee,Y*=Ee))}if(de>=-z){var ke=de<0?0:C(de),Xe=R+(R<0?-ke:ke);0===Xe?pe=-(ge=Y/$):(ge=Xe/$,pe=Y/Xe)}}var je=0,nt=null==me,pt=me-N,gt=ve+N;return isFinite(ge)&&(nt||ge>pt&&ge<gt)&&(he[je++]=nt?ge:D(ge,me,ve)),pe!==ge&&isFinite(pe)&&(nt||pe>pt&&pe<gt)&&(he[je++]=nt?pe:D(pe,me,ve)),je},solveCubic:function($,R,Y,he,me,ve,ge){var de,Ee,ke,Xe,je,pe=Z(_($),_(R),_(Y),_(he));function nt(Ye){var we=$*(de=Ye);Xe=(we+(Ee=we+R))*de+(ke=Ee*de+Y),je=ke*de+he}if(pe&&($*=pe,R*=pe,Y*=pe,he*=pe),_($)<N)$=R,Ee=Y,ke=he,de=1/0;else if(_(he)<N)Ee=R,ke=Y,de=0;else{nt(-R/$/3);var pt=je/$,gt=S(_(pt),1/3),Wt=pt<0?-1:1,Lt=-Xe/$,Bt=Lt>0?1.324717957244746*Math.max(gt,C(Lt)):gt,qt=de-Wt*Bt;if(qt!==de){do{nt(qt),qt=0===Xe?de:de-je/Xe/(1+z)}while(Wt*qt>Wt*de);_($)*de*de>_(he/de)&&(Ee=((ke=-he/de)-Y)/de)}}var Pe=Re.solveQuadratic($,Ee,ke,me,ve,ge),We=null==ve;return isFinite(de)&&(0===Pe||Pe>0&&de!==me[0]&&de!==me[1])&&(We||de>ve-N&&de<ge+N)&&(me[Pe++]=We?de:D(de,ve,ge)),Pe}}},Le={_id:1,_pools:{},get:function(l){if(l){var d=this._pools[l];return d||(d=this._pools[l]={_id:1}),d._id++}return this._id++}},Ve=le.extend({_class:"Point",_readIndex:!0,initialize:function(d,_){var C=typeof d,S=this.__read,k=0;if("number"===C){var N="number"==typeof _;this._set(d,N?_:d),S&&(k=N?2:1)}else if("undefined"===C||null===d)this._set(0,0),S&&(k=null===d?1:0);else{var z="string"===C?d.split(/[\s,]+/)||[]:d;k=1,Array.isArray(z)?this._set(+z[0],+(z.length>1?z[1]:z[0])):"x"in z?this._set(z.x||0,z.y||0):"width"in z?this._set(z.width||0,z.height||0):"angle"in z?(this._set(z.length||0,0),this.setAngle(z.angle||0)):(this._set(0,0),k=0)}return S&&(this.__read=k),this},set:"#initialize",_set:function(l,d){return this.x=l,this.y=d,this},equals:function(l){return this===l||l&&(this.x===l.x&&this.y===l.y||Array.isArray(l)&&this.x===l[0]&&this.y===l[1])||!1},clone:function(){return new Ve(this.x,this.y)},toString:function(){var l=Q.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+" }"},_serialize:function(l){var d=l.formatter;return[d.number(this.x),d.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(l){if(this.isZero()){var d=this._angle||0;this._set(Math.cos(d)*l,Math.sin(d)*l)}else{var _=l/this.getLength();Re.isZero(_)&&this.getAngle(),this._set(this.x*_,this.y*_)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(l){this.setAngleInRadians.call(this,l*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var l=Ve.read(arguments),d=this.getLength()*l.getLength();if(Re.isZero(d))return NaN;var _=this.dot(l)/d;return Math.acos(_<-1?-1:_>1?1:_)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(l){if(this._angle=l,!this.isZero()){var d=this.getLength();this._set(Math.cos(l)*d,Math.sin(l)*d)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var l=Ve.read(arguments);return 180*Math.atan2(this.cross(l),this.dot(l))/Math.PI},getDistance:function(){var l=arguments,d=Ve.read(l),_=d.x-this.x,C=d.y-this.y,S=_*_+C*C,k=le.read(l);return k?S:Math.sqrt(S)},normalize:function(l){l===V&&(l=1);var d=this.getLength(),_=0!==d?l/d:0,C=new Ve(this.x*_,this.y*_);return _>=0&&(C._angle=this._angle),C},rotate:function(l,d){if(0===l)return this.clone();l=l*Math.PI/180;var _=d?this.subtract(d):this,C=Math.sin(l),S=Math.cos(l);return _=new Ve(_.x*S-_.y*C,_.x*C+_.y*S),d?_.add(d):_},transform:function(l){return l?l._transformPoint(this):this},add:function(){var l=Ve.read(arguments);return new Ve(this.x+l.x,this.y+l.y)},subtract:function(){var l=Ve.read(arguments);return new Ve(this.x-l.x,this.y-l.y)},multiply:function(){var l=Ve.read(arguments);return new Ve(this.x*l.x,this.y*l.y)},divide:function(){var l=Ve.read(arguments);return new Ve(this.x/l.x,this.y/l.y)},modulo:function(){var l=Ve.read(arguments);return new Ve(this.x%l.x,this.y%l.y)},negate:function(){return new Ve(-this.x,-this.y)},isInside:function(){return ee.read(arguments).contains(this)},isClose:function(){var l=arguments,d=Ve.read(l),_=le.read(l);return this.getDistance(d)<=_},isCollinear:function(){var l=Ve.read(arguments);return Ve.isCollinear(this.x,this.y,l.x,l.y)},isColinear:"#isCollinear",isOrthogonal:function(){var l=Ve.read(arguments);return Ve.isOrthogonal(this.x,this.y,l.x,l.y)},isZero:function(){var l=Re.isZero;return l(this.x)&&l(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(l){return this.x*(l>1&&l<4?-1:1)>=0&&this.y*(l>2?-1:1)>=0},dot:function(){var l=Ve.read(arguments);return this.x*l.x+this.y*l.y},cross:function(){var l=Ve.read(arguments);return this.x*l.y-this.y*l.x},project:function(){var l=Ve.read(arguments),d=l.isZero()?0:this.dot(l)/l.dot(l);return new Ve(l.x*d,l.y*d)},statics:{min:function(){var l=arguments,d=Ve.read(l),_=Ve.read(l);return new Ve(Math.min(d.x,_.x),Math.min(d.y,_.y))},max:function(){var l=arguments,d=Ve.read(l),_=Ve.read(l);return new Ve(Math.max(d.x,_.x),Math.max(d.y,_.y))},random:function(){return new Ve(Math.random(),Math.random())},isCollinear:function(l,d,_,C){return Math.abs(l*C-d*_)<=1e-8*Math.sqrt((l*l+d*d)*(_*_+C*C))},isOrthogonal:function(l,d,_,C){return Math.abs(l*_+d*C)<=1e-8*Math.sqrt((l*l+d*d)*(_*_+C*C))}}},le.each(["round","ceil","floor","abs"],function(l){var d=Math[l];this[l]=function(){return new Ve(d(this.x),d(this.y))}},{})),Ae=Ve.extend({initialize:function(d,_,C,S){this._x=d,this._y=_,this._owner=C,this._setter=S},_set:function(l,d,_){return this._x=l,this._y=d,_||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),Se=le.extend({_class:"Size",_readIndex:!0,initialize:function(d,_){var C=typeof d,S=this.__read,k=0;if("number"===C){var N="number"==typeof _;this._set(d,N?_:d),S&&(k=N?2:1)}else if("undefined"===C||null===d)this._set(0,0),S&&(k=null===d?1:0);else{var z="string"===C?d.split(/[\s,]+/)||[]:d;k=1,Array.isArray(z)?this._set(+z[0],+(z.length>1?z[1]:z[0])):"width"in z?this._set(z.width||0,z.height||0):"x"in z?this._set(z.x||0,z.y||0):(this._set(0,0),k=0)}return S&&(this.__read=k),this},set:"#initialize",_set:function(l,d){return this.width=l,this.height=d,this},equals:function(l){return l===this||l&&(this.width===l.width&&this.height===l.height||Array.isArray(l)&&this.width===l[0]&&this.height===l[1])||!1},clone:function(){return new Se(this.width,this.height)},toString:function(){var l=Q.instance;return"{ width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var d=l.formatter;return[d.number(this.width),d.number(this.height)]},add:function(){var l=Se.read(arguments);return new Se(this.width+l.width,this.height+l.height)},subtract:function(){var l=Se.read(arguments);return new Se(this.width-l.width,this.height-l.height)},multiply:function(){var l=Se.read(arguments);return new Se(this.width*l.width,this.height*l.height)},divide:function(){var l=Se.read(arguments);return new Se(this.width/l.width,this.height/l.height)},modulo:function(){var l=Se.read(arguments);return new Se(this.width%l.width,this.height%l.height)},negate:function(){return new Se(-this.width,-this.height)},isZero:function(){var l=Re.isZero;return l(this.width)&&l(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(l,d){return new Se(Math.min(l.width,d.width),Math.min(l.height,d.height))},max:function(l,d){return new Se(Math.max(l.width,d.width),Math.max(l.height,d.height))},random:function(){return new Se(Math.random(),Math.random())}}},le.each(["round","ceil","floor","abs"],function(l){var d=Math[l];this[l]=function(){return new Se(d(this.width),d(this.height))}},{})),L=Se.extend({initialize:function(d,_,C,S){this._width=d,this._height=_,this._owner=C,this._setter=S},_set:function(l,d,_){return this._width=l,this._height=d,_||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(l){this._width=l,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(l){this._height=l,this._owner[this._setter](this)}}),ee=le.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(d,_,C,S){var z,k=arguments,N=typeof d;if("number"===N?(this._set(d,_,C,S),z=4):"undefined"===N||null===d?(this._set(0,0,0,0),z=null===d?1:0):1===k.length&&(Array.isArray(d)?(this._set.apply(this,d),z=1):d.x!==V||d.width!==V?(this._set(d.x||0,d.y||0,d.width||0,d.height||0),z=1):d.from===V&&d.to===V&&(this._set(0,0,0,0),le.readSupported(k,this)&&(z=1))),z===V){var R,Y,D=Ve.readNamed(k,"from"),H=le.peek(k),Z=D.x,$=D.y;if(H&&H.x!==V||le.hasNamed(k,"to")){var he=Ve.readNamed(k,"to");(R=he.x-Z)<0&&(Z=he.x,R=-R),(Y=he.y-$)<0&&($=he.y,Y=-Y)}else{var me=Se.read(k);R=me.width,Y=me.height}this._set(Z,$,R,Y),z=k.__index}var ve=k.__filtered;return ve&&(this.__filtered=ve),this.__read&&(this.__read=z),this},set:"#initialize",_set:function(l,d,_,C){return this.x=l,this.y=d,this.width=_,this.height=C,this},clone:function(){return new ee(this.x,this.y,this.width,this.height)},equals:function(l){var d=le.isPlainValue(l)?ee.read(arguments):l;return d===this||d&&this.x===d.x&&this.y===d.y&&this.width===d.width&&this.height===d.height||!1},toString:function(){var l=Q.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+", width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var d=l.formatter;return[d.number(this.x),d.number(this.y),d.number(this.width),d.number(this.height)]},getPoint:function(l){return new(l?Ve:Ae)(this.x,this.y,this,"setPoint")},setPoint:function(){var l=Ve.read(arguments);this.x=l.x,this.y=l.y},getSize:function(l){return new(l?Se:L)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var l=Se.read(arguments),d=this._sx,_=this._sy,C=l.width,S=l.height;d&&(this.x+=(this.width-C)*d),_&&(this.y+=(this.height-S)*_),this.width=C,this.height=S,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(l){if(!this._fw){var d=l-this.x;this.width-=.5===this._sx?2*d:d}this.x=l,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(l){if(!this._fh){var d=l-this.y;this.height-=.5===this._sy?2*d:d}this.y=l,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(l){if(!this._fw){var d=l-this.x;this.width=.5===this._sx?2*d:d}this.x=l-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(l){if(!this._fh){var d=l-this.y;this.height=.5===this._sy?2*d:d}this.y=l-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(l){this._fw||.5===this._sx?this.x=l-this.width/2:(this._sx&&(this.x+=2*(l-this.x)*this._sx),this.width=2*(l-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(l){this._fh||.5===this._sy?this.y=l-this.height/2:(this._sy&&(this.y+=2*(l-this.y)*this._sy),this.height=2*(l-this.y)),this._sy=.5,this._fh=0},getCenter:function(l){return new(l?Ve:Ae)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var l=Ve.read(arguments);return this.setCenterX(l.x),this.setCenterY(l.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(l){return l&&l.width!==V||4===(Array.isArray(l)?l:arguments).length?this._containsRectangle(ee.read(arguments)):this._containsPoint(Ve.read(arguments))},_containsPoint:function(l){var d=l.x,_=l.y;return d>=this.x&&_>=this.y&&d<=this.x+this.width&&_<=this.y+this.height},_containsRectangle:function(l){var d=l.x,_=l.y;return d>=this.x&&_>=this.y&&d+l.width<=this.x+this.width&&_+l.height<=this.y+this.height},intersects:function(){var l=ee.read(arguments),d=le.read(arguments)||0;return l.x+l.width>this.x-d&&l.y+l.height>this.y-d&&l.x<this.x+this.width+d&&l.y<this.y+this.height+d},intersect:function(){var l=ee.read(arguments),d=Math.max(this.x,l.x),_=Math.max(this.y,l.y),C=Math.min(this.x+this.width,l.x+l.width),S=Math.min(this.y+this.height,l.y+l.height);return new ee(d,_,C-d,S-_)},unite:function(){var l=ee.read(arguments),d=Math.min(this.x,l.x),_=Math.min(this.y,l.y),C=Math.max(this.x+this.width,l.x+l.width),S=Math.max(this.y+this.height,l.y+l.height);return new ee(d,_,C-d,S-_)},include:function(){var l=Ve.read(arguments),d=Math.min(this.x,l.x),_=Math.min(this.y,l.y),C=Math.max(this.x+this.width,l.x),S=Math.max(this.y+this.height,l.y);return new ee(d,_,C-d,S-_)},expand:function(){var l=Se.read(arguments),d=l.width,_=l.height;return new ee(this.x-d/2,this.y-_/2,this.width+d,this.height+_)},scale:function(l,d){return this.expand(this.width*l-this.width,this.height*(d===V?l:d)-this.height)}},le.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(l,d){var _=l.join(""),C=/^[RL]/.test(_);d>=4&&(l[1]+=C?"Y":"X");var S=l[C?0:1],k=l[C?1:0],N="get"+S,z="get"+k,D="set"+S,H="set"+k,$="set"+_;this["get"+_]=function(R){return new(R?Ve:Ae)(this[N](),this[z](),this,$)},this[$]=function(){var R=Ve.read(arguments);this[D](R.x),this[H](R.y)}},{beans:!0})),Ce=ee.extend({initialize:function(d,_,C,S,k,N){this._set(d,_,C,S,!0),this._owner=k,this._setter=N},_set:function(l,d,_,C,S){return this._x=l,this._y=d,this._width=_,this._height=C,S||this._owner[this._setter](this),this}},new function(){var l=ee.prototype;return le.each(["x","y","width","height"],function(d){var _=le.capitalize(d),C="_"+d;this["get"+_]=function(){return this[C]},this["set"+_]=function(S){this[C]=S,this._dontNotify||this._owner[this._setter](this)}},le.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(d){var _="set"+d;this[_]=function(){this._dontNotify=!0,l[_].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(d){var _=this._owner;_._changeSelection&&_._changeSelection(2,d)}}))}),ze=le.extend({_class:"Matrix",initialize:function l(d,_){var C=arguments,S=C.length,k=!0;if(S>=6?this._set.apply(this,C):1===S||2===S?d instanceof l?this._set(d._a,d._b,d._c,d._d,d._tx,d._ty,_):Array.isArray(d)?this._set.apply(this,_?d.concat([_]):d):k=!1:S?k=!1:this.reset(),!k)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(l,d,_,C,S,k,N){return this._a=l,this._b=d,this._c=_,this._d=C,this._tx=S,this._ty=k,N||this._changed(),this},_serialize:function(l,d){return le.serialize(this.getValues(),l,!0,d)},_changed:function(){var l=this._owner;l&&(l._applyMatrix?l.transform(null,!0):l._changed(25))},clone:function(){return new ze(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(l){return l===this||l&&this._a===l._a&&this._b===l._b&&this._c===l._c&&this._d===l._d&&this._tx===l._tx&&this._ty===l._ty},toString:function(){var l=Q.instance;return"[["+[l.number(this._a),l.number(this._c),l.number(this._tx)].join(", ")+"], ["+[l.number(this._b),l.number(this._d),l.number(this._ty)].join(", ")+"]]"},reset:function(l){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,l||this._changed(),this},apply:function(l,d){var _=this._owner;return!!_&&(_.transform(null,le.pick(l,!0),d),this.isIdentity())},translate:function(){var l=Ve.read(arguments),d=l.x,_=l.y;return this._tx+=d*this._a+_*this._c,this._ty+=d*this._b+_*this._d,this._changed(),this},scale:function(){var l=arguments,d=Ve.read(l),_=Ve.read(l,0,{readNull:!0});return _&&this.translate(_),this._a*=d.x,this._b*=d.x,this._c*=d.y,this._d*=d.y,_&&this.translate(_.negate()),this._changed(),this},rotate:function(l){l*=Math.PI/180;var d=Ve.read(arguments,1),_=d.x,C=d.y,S=Math.cos(l),k=Math.sin(l),N=_-_*S+C*k,z=C-_*k-C*S,D=this._a,H=this._b,Z=this._c,$=this._d;return this._a=S*D+k*Z,this._b=S*H+k*$,this._c=-k*D+S*Z,this._d=-k*H+S*$,this._tx+=N*D+z*Z,this._ty+=N*H+z*$,this._changed(),this},shear:function(){var l=arguments,d=Ve.read(l),_=Ve.read(l,0,{readNull:!0});_&&this.translate(_);var C=this._a,S=this._b;return this._a+=d.y*this._c,this._b+=d.y*this._d,this._c+=d.x*C,this._d+=d.x*S,_&&this.translate(_.negate()),this._changed(),this},skew:function(){var l=arguments,d=Ve.read(l),_=Ve.read(l,0,{readNull:!0}),C=Math.PI/180,S=new Ve(Math.tan(d.x*C),Math.tan(d.y*C));return this.shear(S,_)},append:function(l,d){if(l){var _=this._a,C=this._b,S=this._c,k=this._d,N=l._a,z=l._c,D=l._b,H=l._d,Z=l._tx,$=l._ty;this._a=N*_+D*S,this._c=z*_+H*S,this._b=N*C+D*k,this._d=z*C+H*k,this._tx+=Z*_+$*S,this._ty+=Z*C+$*k,d||this._changed()}return this},prepend:function(l,d){if(l){var _=this._a,C=this._b,S=this._c,k=this._d,N=this._tx,z=this._ty,D=l._a,H=l._c,Z=l._b,$=l._d,R=l._tx,Y=l._ty;this._a=D*_+H*C,this._c=D*S+H*k,this._b=Z*_+$*C,this._d=Z*S+$*k,this._tx=D*N+H*z+R,this._ty=Z*N+$*z+Y,d||this._changed()}return this},appended:function(l){return this.clone().append(l)},prepended:function(l){return this.clone().prepend(l)},invert:function(){var l=this._a,d=this._b,_=this._c,C=this._d,S=this._tx,k=this._ty,N=l*C-d*_,z=null;return N&&!isNaN(N)&&isFinite(S)&&isFinite(k)&&(this._a=C/N,this._b=-d/N,this._c=-_/N,this._d=l/N,this._tx=(_*k-C*S)/N,this._ty=(d*S-l*k)/N,z=this),z},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new ze(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var l=this._a*this._d-this._c*this._b;return l&&!isNaN(l)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(l,d,_){return arguments.length<3?this._transformPoint(Ve.read(arguments)):this._transformCoordinates(l,d,_)},_transformPoint:function(l,d,_){var C=l.x,S=l.y;return d||(d=new Ve),d._set(C*this._a+S*this._c+this._tx,C*this._b+S*this._d+this._ty,_)},_transformCoordinates:function(l,d,_){for(var C=0,S=2*_;C<S;C+=2){var k=l[C],N=l[C+1];d[C]=k*this._a+N*this._c+this._tx,d[C+1]=k*this._b+N*this._d+this._ty}return d},_transformCorners:function(l){var d=l.x,_=l.y,C=d+l.width,S=_+l.height,k=[d,_,C,_,C,S,d,S];return this._transformCoordinates(k,k,4)},_transformBounds:function(l,d,_){for(var C=this._transformCorners(l),S=C.slice(0,2),k=S.slice(),N=2;N<8;N++){var z=C[N],D=1&N;z<S[D]?S[D]=z:z>k[D]&&(k[D]=z)}return d||(d=new ee),d._set(S[0],S[1],k[0]-S[0],k[1]-S[1],_)},inverseTransform:function(){return this._inverseTransform(Ve.read(arguments))},_inverseTransform:function(l,d,_){var C=this._a,S=this._b,k=this._c,N=this._d,z=this._tx,D=this._ty,H=C*N-S*k,Z=null;if(H&&!isNaN(H)&&isFinite(z)&&isFinite(D)){var $=l.x-this._tx,R=l.y-this._ty;d||(d=new Ve),Z=d._set(($*N-R*k)/H,(R*C-$*S)/H,_)}return Z},decompose:function(){var D,H,Z,l=this._a,d=this._b,_=this._c,C=this._d,S=l*C-d*_,k=Math.sqrt,N=Math.atan2,z=180/Math.PI;if(0!==l||0!==d){var $=k(l*l+d*d);D=Math.acos(l/$)*(d>0?1:-1),H=[$,S/$],Z=[N(l*_+d*C,$*$),0]}else if(0!==_||0!==C){var R=k(_*_+C*C);D=Math.asin(_/R)*(C>0?1:-1),H=[S/R,R],Z=[0,N(l*_+d*C,R*R)]}else D=0,Z=H=[0,0];return{translation:this.getTranslation(),rotation:D*z,scaling:new Ve(H),skewing:new Ve(Z[0]*z,Z[1]*z)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new Ve(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(l){this.isIdentity()||l.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},le.each(["a","b","c","d","tx","ty"],function(l){var d=le.capitalize(l),_="_"+l;this["get"+d]=function(){return this[_]},this["set"+d]=function(C){this[_]=C,this._changed()}},{})),dt=le.extend({_class:"Line",initialize:function(d,_,C,S,k){var N=!1;arguments.length>=4?(this._px=d,this._py=_,this._vx=C,this._vy=S,N=k):(this._px=d.x,this._py=d.y,this._vx=_.x,this._vy=_.y,N=C),N||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new Ve(this._px,this._py)},getVector:function(){return new Ve(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(l,d){return dt.intersect(this._px,this._py,this._vx,this._vy,l._px,l._py,l._vx,l._vy,!0,d)},getSide:function(l,d){return dt.getSide(this._px,this._py,this._vx,this._vy,l.x,l.y,!0,d)},getDistance:function(l){return Math.abs(this.getSignedDistance(l))},getSignedDistance:function(l){return dt.getSignedDistance(this._px,this._py,this._vx,this._vy,l.x,l.y,!0)},isCollinear:function(l){return Ve.isCollinear(this._vx,this._vy,l._vx,l._vy)},isOrthogonal:function(l){return Ve.isOrthogonal(this._vx,this._vy,l._vx,l._vy)},statics:{intersect:function(l,d,_,C,S,k,N,z,D,H){D||(_-=l,C-=d,N-=S,z-=k);var Z=_*z-C*N;if(!Re.isMachineZero(Z)){var $=l-S,R=d-k,Y=(N*R-z*$)/Z,he=(_*R-C*$)/Z,ge=1+1e-12;if(H||-1e-12<Y&&Y<ge&&-1e-12<he&&he<ge)return H||(Y=Y<=0?0:Y>=1?1:Y),new Ve(l+Y*_,d+Y*C)}},getSide:function(l,d,_,C,S,k,N,z){N||(_-=l,C-=d);var D=S-l,Z=D*C-(k-d)*_;return!z&&Re.isMachineZero(Z)&&(Z=(D*_+D*_)/(_*_+C*C))>=0&&Z<=1&&(Z=0),Z<0?-1:Z>0?1:0},getSignedDistance:function(l,d,_,C,S,k,N){return N||(_-=l,C-=d),0===_?C>0?S-l:l-S:0===C?_<0?k-d:d-k:((S-l)*C-(k-d)*_)/(C>_?C*Math.sqrt(1+_*_/(C*C)):_*Math.sqrt(1+C*C/(_*_)))},getDistance:function(l,d,_,C,S,k,N){return Math.abs(dt.getSignedDistance(l,d,_,C,S,k,N))}}}),st=xe.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(d){xe.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new di(null,null,this),this._view=_n.create(this,d||Hr.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(l,d){return le.serialize(this._children,l,!0,d)},_changed:function(l,d){if(1&l){var _=this._view;_&&(_._needsUpdate=!0,!_._requested&&_._autoUpdate&&_.requestUpdate())}var C=this._changes;if(C&&d){var S=this._changesById,k=d._id,N=S[k];N?N.flags|=l:C.push(S[k]={item:d,flags:l})}},clear:function(){for(var l=this._children,d=l.length-1;d>=0;d--)l[d].remove()},isEmpty:function(){return!this._children.length},remove:function l(){return!!l.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(l){this._currentStyle.set(l)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Vt({project:this,insert:!0})},getSymbolDefinitions:function(){var l=[],d={};return this.getItems({class:rn,match:function(_){var C=_._definition,S=C._id;return d[S]||(d[S]=!0,l.push(C)),!1}}),l},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var l=this._selectionItems,d=[];for(var _ in l){var C=l[_],S=C._selection;1&S&&C.isInserted()?d.push(C):S||this._updateSelection(C)}return d},_updateSelection:function(l){var d=l._id,_=this._selectionItems;l._selection?_[d]!==l&&(this._selectionCount++,_[d]=l):_[d]===l&&(this._selectionCount--,delete _[d])},selectAll:function(){for(var l=this._children,d=0,_=l.length;d<_;d++)l[d].setFullySelected(!0)},deselectAll:function(){var l=this._selectionItems;for(var d in l)l[d].setFullySelected(!1)},addLayer:function(l){return this.insertLayer(V,l)},insertLayer:function(l,d){if(d instanceof Vt){d._remove(!1,!0),le.splice(this._children,[d],l,0),d._setProject(this,!0);var _=d._name;_&&d.setName(_),this._changes&&d._changed(5),this._activeLayer||(this._activeLayer=d)}else d=null;return d},_insertItem:function(l,d,_){return d=this.insertLayer(l,d)||(this._activeLayer||this._insertItem(V,new Vt(bt.NO_INSERT),!0)).insertChild(l,d),_&&d.activate&&d.activate(),d},getItems:function(l){return bt._getItems(this,l)},getItem:function(l){return bt._getItems(this,l,null,null,!0)[0]||null},importJSON:function(l){this.activate();var d=this._activeLayer;return le.importJSON(l,d&&d.isEmpty()&&d)},removeOn:function(l){var d=this._removeSets;if(d){"mouseup"===l&&(d.mousedrag=null);var _=d[l];if(_){for(var C in _){var S=_[C];for(var k in d){var N=d[k];N&&N!=_&&delete N[S._id]}S.remove()}d[l]=null}}},draw:function(l,d,_){this._updateVersion++,l.save(),d.applyToContext(l);for(var C=this._children,S=new le({offset:new Ve(0,0),pixelRatio:_,viewMatrix:d.isIdentity()?null:d,matrices:[new ze],updateMatrix:!0}),k=0,N=C.length;k<N;k++)C[k].draw(l,S);if(l.restore(),this._selectionCount>0){l.save(),l.strokeWidth=1;var z=this._selectionItems,D=this._scope.settings.handleSize,H=this._updateVersion;for(var Z in z)z[Z]._drawSelection(l,d,D,z,H);l.restore()}}}),bt=le.extend(Te,{statics:{extend:function l(d){return d._serializeFields&&(d._serializeFields=le.set({},this.prototype._serializeFields,d._serializeFields)),l.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new ze,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var l=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return le.each(l,function(d){this._events[d]={install:function(_){this.getView()._countItemEvent(_,1)},uninstall:function(_){this.getView()._countItemEvent(_,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:l}})},{initialize:function(){},_initialize:function(l,d){var _=l&&le.isPlainObject(l),C=_&&!0===l.internal,S=this._matrix=new ze,k=_&&l.project||y.project,N=y.settings;return this._id=C?null:Le.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&N.applyMatrix,d&&S.translate(d),S._owner=this,this._style=new di(k._currentStyle,this,k),C||_&&0==l.insert||!N.insertItems&&(!_||1!=l.insert)?this._setProject(k):(_&&l.parent||k)._insertItem(V,this,!0),_&&l!==bt.NO_INSERT&&l!==bt.INSERT&&this.set(l,{internal:!0,insert:!0,project:!0,parent:!0}),_},_serialize:function(l,d){var _={},C=this;function S(k){for(var N in k){var z=C[N];le.equals(z,"leading"===N?1.2*k.fontSize:k[N])||(_[N]=le.serialize(z,l,"data"!==N,d))}}return S(this._serializeFields),this instanceof ut||S(this._style._defaults),[this._class,_]},_changed:function(l){var d=this._symbol,_=this._parent||d,C=this._project;8&l&&(this._bounds=this._position=this._decomposed=V),16&l&&(this._globalMatrix=V),_&&72&l&&bt._clearBoundsCache(_),2&l&&bt._clearBoundsCache(this),C&&C._changed(l,this),d&&d._changed(l)},getId:function(){return this._id},getName:function(){return this._name},setName:function(l){if(this._name&&this._removeNamed(),l===+l+"")throw new Error("Names consisting only of numbers are not supported.");var d=this._getOwner();if(l&&d){var _=d._children,C=d._namedChildren;(C[l]=C[l]||[]).push(this),l in _||(_[l]=this)}this._name=l||V,this._changed(256)},getStyle:function(){return this._style},setStyle:function(l){this.getStyle().set(l)}},le.each(["locked","visible","blendMode","opacity","guide"],function(l){var d=le.capitalize(l),_="_"+l,C={locked:256,visible:265};this["get"+d]=function(){return this[_]},this["set"+d]=function(S){S!=this[_]&&(this[_]=S,this._changed(C[l]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(l){if(l!==this._selection){this._selection=l;var d=this._project;d&&(d._updateSelection(this),this._changed(257))}},_changeSelection:function(l,d){var _=this._selection;this.setSelection(d?_|l:_&~l)},isSelected:function(){if(this._selectChildren)for(var l=this._children,d=0,_=l.length;d<_;d++)if(l[d].isSelected())return!0;return!!(1&this._selection)},setSelected:function(l){if(this._selectChildren)for(var d=this._children,_=0,C=d.length;_<C;_++)d[_].setSelected(l);this._changeSelection(1,l)},isFullySelected:function(){var l=this._children,d=!!(1&this._selection);if(l&&d){for(var _=0,C=l.length;_<C;_++)if(!l[_].isFullySelected())return!1;return!0}return d},setFullySelected:function(l){var d=this._children;if(d)for(var _=0,C=d.length;_<C;_++)d[_].setFullySelected(l);this._changeSelection(1,l)},isClipMask:function(){return this._clipMask},setClipMask:function(l){this._clipMask!=(l=!!l)&&(this._clipMask=l,l&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(l){this._data=l},getPosition:function(l){var d=l?Ve:Ae,_=this._position||(this._position=this._getPositionFromBounds());return new d(_.x,_.y,this,"setPosition")},setPosition:function(){this.translate(Ve.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(l){return this._pivot?this._matrix._transformPoint(this._pivot):(l||this.getBounds()).getCenter(!0)},getPivot:function(){var l=this._pivot;return l?new Ae(l.x,l.y,this,"setPivot"):null},setPivot:function(){this._pivot=Ve.read(arguments,0,{clone:!0,readNull:!0}),this._position=V}},le.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(l,d){this[d]=function(_){return this.getBounds(_,l)}},{beans:!0,getBounds:function(l,d){var _=d||l instanceof ze,C=le.set({},_?d:l,this._boundsOptions);(!C.stroke||this.getStrokeScaling())&&(C.cacheItem=this);var S=this._getCachedBounds(_&&l,C).rect;return arguments.length?S:new Ce(S.x,S.y,S.width,S.height,this,"setBounds")},setBounds:function(){var l=ee.read(arguments),d=this.getBounds(),_=this._matrix,C=new ze,S=l.getCenter();C.translate(S),(l.width!=d.width||l.height!=d.height)&&(_.isInvertible()||(_.set(_._backup||(new ze).translate(_.getTranslation())),d=this.getBounds()),C.scale(0!==d.width?l.width/d.width:0,0!==d.height?l.height/d.height:0)),S=d.getCenter(),C.translate(-S.x,-S.y),this.transform(C)},_getBounds:function(l,d){var _=this._children;return _&&_.length?(bt._updateBoundsCache(this,d.cacheItem),bt._getBounds(_,l,d)):new ee},_getBoundsCacheKey:function(l,d){return[l.stroke?1:0,l.handle?1:0,d?1:0].join("")},_getCachedBounds:function(l,d,_){l=l&&l._orNullIfIdentity();var C=d.internal&&!_,S=d.cacheItem,k=C?null:this._matrix._orNullIfIdentity(),N=S&&(!l||l.equals(k))&&this._getBoundsCacheKey(d,C),z=this._bounds;if(bt._updateBoundsCache(this._parent||this._symbol,S),N&&z&&N in z)return{rect:(D=z[N]).rect.clone(),nonscaling:D.nonscaling};var H=this._getBounds(l||k,d),Z=H.rect||H,$=this._style,R=H.nonscaling||$.hasStroke()&&!$.getStrokeScaling();if(N){z||(this._bounds=z={});var D=z[N]={rect:Z.clone(),nonscaling:R,internal:C}}return{rect:Z,nonscaling:R}},_getStrokeMatrix:function(l,d){var _=this.getStrokeScaling()?null:d&&d.internal?this:this._parent||this._symbol&&this._symbol._item,C=_?_.getViewMatrix().invert():l;return C&&C._shiftless()},statics:{_updateBoundsCache:function(l,d){if(l&&d){var _=d._id,C=l._boundsCache=l._boundsCache||{ids:{},list:[]};C.ids[_]||(C.list.push(d),C.ids[_]=d)}},_clearBoundsCache:function(l){var d=l._boundsCache;if(d){l._bounds=l._position=l._boundsCache=V;for(var _=0,C=d.list,S=C.length;_<S;_++){var k=C[_];k!==l&&(k._bounds=k._position=V,k._boundsCache&&bt._clearBoundsCache(k))}}},_getBounds:function(l,d,_){var C=1/0,S=-C,k=C,N=S,z=!1;_=_||{};for(var D=0,H=l.length;D<H;D++){var Z=l[D];if(Z._visible&&!Z.isEmpty(!0)){var $=Z._getCachedBounds(d&&d.appended(Z._matrix),_,!0),R=$.rect;C=Math.min(R.x,C),k=Math.min(R.y,k),S=Math.max(R.x+R.width,S),N=Math.max(R.y+R.height,N),$.nonscaling&&(z=!0)}}return{rect:isFinite(C)?new ee(C,k,S-C,N-k):new ee,nonscaling:z}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var l=this._decompose();return l?l.rotation:0},setRotation:function(l){var d=this.getRotation();if(null!=d&&null!=l){var _=this._decomposed;this.rotate(l-d),_&&(_.rotation=l,this._decomposed=_)}},getScaling:function(){var l=this._decompose(),d=l&&l.scaling;return new Ae(d?d.x:1,d?d.y:1,this,"setScaling")},setScaling:function(){var l=this.getScaling(),d=Ve.read(arguments,0,{clone:!0,readNull:!0});if(l&&d&&!l.equals(d)){var _=this.getRotation(),C=this._decomposed,S=new ze,k=Re.isZero;if(k(l.x)||k(l.y))S.translate(C.translation),_&&S.rotate(_),S.scale(d.x,d.y),this._matrix.set(S);else{var N=this.getPosition(!0);S.translate(N),_&&S.rotate(_),S.scale(d.x/l.x,d.y/l.y),_&&S.rotate(-_),S.translate(N.negate()),this.transform(S)}C&&(C.scaling=d,this._decomposed=C)}},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},getGlobalMatrix:function(l){var d=this._globalMatrix;if(d)for(var _=this._parent,C=[];_;){if(!_._globalMatrix){d=null;for(var S=0,k=C.length;S<k;S++)C[S]._globalMatrix=null;break}C.push(_),_=_._parent}return d||(d=this._globalMatrix=this._matrix.clone(),(_=this._parent)&&d.prepend(_.getGlobalMatrix(!0))),l?d:d.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(l){(this._applyMatrix=this._canApplyMatrix&&!!l)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(l,d){if(this._project!==l){this._project&&this._installEvents(!1),this._project=l;for(var _=this._children,C=0,S=_&&_.length;C<S;C++)_[C]._setProject(l);d=!0}d&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function l(d){l.base.call(this,d);for(var _=this._children,C=0,S=_&&_.length;C<S;C++)_[C]._installEvents(d)},getLayer:function(){for(var l=this;l=l._parent;)if(l instanceof Vt)return l;return null},getParent:function(){return this._parent},setParent:function(l){return l.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(l){this.removeChildren(),this.addChildren(l)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var l=this._getOwner();return l&&l._children[this._index+1]||null},getPreviousSibling:function(){var l=this._getOwner();return l&&l._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(l){return l===this||l&&this._class===l._class&&this._style.equals(l._style)&&this._matrix.equals(l._matrix)&&this._locked===l._locked&&this._visible===l._visible&&this._blendMode===l._blendMode&&this._opacity===l._opacity&&this._clipMask===l._clipMask&&this._guide===l._guide&&this._equals(l)||!1},_equals:function(l){return le.equals(this._children,l._children)},clone:function(l){var d=new this.constructor(bt.NO_INSERT),_=this._children,C=le.pick(l?l.insert:V,l===V||!0===l),S=le.pick(l?l.deep:V,!0);_&&d.copyAttributes(this),(!_||S)&&d.copyContent(this),_||d.copyAttributes(this),C&&d.insertAbove(this);var k=this._name,N=this._parent;if(k&&N){_=N._children;for(var z=k,D=1;_[k];)k=z+" "+D++;k!==z&&d.setName(k)}return d},copyContent:function(l){for(var d=l._children,_=0,C=d&&d.length;_<C;_++)this.addChild(d[_].clone(!1),!0)},copyAttributes:function(l,d){this.setStyle(l._style);for(var _=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],C=0,S=_.length;C<S;C++){var k=_[C];l.hasOwnProperty(k)&&(this[k]=l[k])}d||this._matrix.set(l._matrix,!0),this.setApplyMatrix(l._applyMatrix),this.setPivot(l._pivot),this.setSelection(l._selection);var N=l._data,z=l._name;this._data=N?le.clone(N):null,z&&this.setName(z)},rasterize:function(l,d){var _,C,S;le.isPlainObject(l)?(_=l.resolution,C=l.insert,S=l.raster):(_=l,C=d),S||(S=new Ct(bt.NO_INSERT));var k=this.getStrokeBounds(),N=(_||this.getView().getResolution())/72,z=k.getTopLeft().floor(),D=k.getBottomRight().ceil(),H=new Se(D.subtract(z)),Z=H.multiply(N);if(S.setSize(Z,!0),!Z.isZero()){var $=S.getContext(!0),R=(new ze).scale(N).translate(z.negate());$.save(),R.applyToContext($),this.draw($,new le({matrices:[R]})),$.restore()}return S._matrix.set((new ze).translate(z.add(H.divide(2))).scale(1/N)),(C===V||C)&&S.insertAbove(this),S},contains:function(){var l=this._matrix;return l.isInvertible()&&!!this._contains(l._inverseTransform(Ve.read(arguments)))},_contains:function(l){var d=this._children;if(d){for(var _=d.length-1;_>=0;_--)if(d[_].contains(l))return!0;return!1}return l.isInside(this.getInternalBounds())},isInside:function(){return ee.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Jt.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(l,d){return l instanceof bt&&this._asPathItem().getIntersections(l._asPathItem(),null,d,!0).length>0}},new function(){function l(){var C=arguments;return this._hitTest(Ve.read(C),Ht.getOptions(C))}function d(){var C=arguments,S=Ve.read(C),k=Ht.getOptions(C),N=[];return this._hitTest(S,new le({all:N},k)),N}function _(C,S,k,N){var z=this._children;if(z)for(var D=z.length-1;D>=0;D--){var H=z[D],Z=H!==N&&H._hitTest(C,S,k);if(Z&&!S.all)return Z}return null}return st.inject({hitTest:l,hitTestAll:d,_hitTest:_}),{hitTest:l,hitTestAll:d,_hitTestChildren:_}},{_hitTest:function(l,d,_){if(this._locked||!this._visible||this._guide&&!d.guides||this.isEmpty())return null;var C=this._matrix,S=_?_.appended(C):this.getGlobalMatrix().prepend(this.getView()._matrix),k=Math.max(d.tolerance,1e-12),N=d._tolerancePadding=new Se(Jt._getStrokePadding(k,C._shiftless().invert()));if(!(l=C._inverseTransform(l))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(N.multiply(2))._containsPoint(l))return null;var Z,$,z=!(d.guides&&!this._guide||d.selected&&!this.isSelected()||d.type&&d.type!==le.hyphenate(this._class)||d.class&&!(this instanceof d.class)),D=d.match,H=this;function R(de){return de&&D&&!D(de)&&(de=null),de&&d.all&&d.all.push(de),de}function Y(de,Ee){var ke=Ee?Z["get"+Ee]():H.getPosition();if(l.subtract(ke).divide(N).length<=1)return new Ht(de,H,{name:Ee?le.hyphenate(Ee):de,point:ke})}var he=d.position,me=d.center,ve=d.bounds;if(z&&this._parent&&(he||me||ve)){if((me||ve)&&(Z=this.getInternalBounds()),!($=he&&Y("position")||me&&Y("center","Center"))&&ve)for(var ge=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],pe=0;pe<8&&!$;pe++)$=Y("bounds",ge[pe]);$=R($)}return $||($=this._hitTestChildren(l,d,S)||z&&R(this._hitTestSelf(l,d,S,this.getStrokeScaling()?null:S._shiftless().invert()))||null),$&&$.point&&($.point=C.transform($.point)),$},_hitTestSelf:function(l,d){if(d.fill&&this.hasFill()&&this._contains(l))return new Ht("fill",this)},matches:function(l,d){var C=typeof l;if("object"===C){for(var S in l)if(l.hasOwnProperty(S)&&!this.matches(S,l[S]))return!1;return!0}if("function"===C)return l(this);if("match"===l)return d(this);var k=/^(empty|editable)$/.test(l)?this["is"+le.capitalize(l)]():"type"===l?le.hyphenate(this._class):this[l];if("class"===l){if("function"==typeof d)return this instanceof d;k=this._class}if("function"==typeof d)return!!d(k);if(d){if(d.test)return d.test(k);if(le.isPlainObject(d))return function _(N,z){for(var D in N)if(N.hasOwnProperty(D)){var H=N[D],Z=z[D];if(le.isPlainObject(H)&&le.isPlainObject(Z)){if(!_(H,Z))return!1}else if(!le.equals(H,Z))return!1}return!0}(d,k)}return le.equals(k,d)},getItems:function(l){return bt._getItems(this,l,this._matrix)},getItem:function(l){return bt._getItems(this,l,this._matrix,null,!0)[0]||null},statics:{_getItems:function l(d,_,C,S,k){if(!S){var N="object"==typeof _&&_,z=N&&N.overlapping,D=N&&N.inside,R=(H=z||D)&&ee.read([H]);S={items:[],recursive:N&&!1!==N.recursive,inside:!!D,overlapping:!!z,rect:R,path:z&&new Jt.Rectangle({rectangle:R,insert:!1})},N&&(_=le.filter({},_,{recursive:!0,inside:!0,overlapping:!0}))}var Z=d._children,$=S.items;C=(R=S.rect)&&(C||new ze);for(var Y=0,he=Z&&Z.length;Y<he;Y++){var me=Z[Y],ve=C&&C.appended(me._matrix),ge=!0;if(R){var H=me.getBounds(ve);if(!R.intersects(H))continue;R.contains(H)||S.overlapping&&(H.contains(R)||S.path.intersects(me,ve))||(ge=!1)}if(ge&&me.matches(_)&&($.push(me),k)||(!1!==S.recursive&&l(me,_,ve,S,k),k&&$.length>0))break}return $}}},{importJSON:function(l){var d=le.importJSON(l,this);return d!==this?this.addChild(d):d},addChild:function(l){return this.insertChild(V,l)},insertChild:function(l,d){var _=d?this.insertChildren(l,[d]):null;return _&&_[0]},addChildren:function(l){return this.insertChildren(this._children.length,l)},insertChildren:function(l,d){var _=this._children;if(_&&d&&d.length>0){for(var C={},S=(d=le.slice(d)).length-1;S>=0;S--){var N=(k=d[S])&&k._id;!k||C[N]?d.splice(S,1):(k._remove(!1,!0),C[N]=!0)}le.splice(_,d,l,0);for(var z=this._project,D=z._changes,H=(S=0,d.length);S<H;S++){var k,Z=(k=d[S])._name;k._parent=this,k._setProject(z,!0),Z&&k.setName(Z),D&&k._changed(5)}this._changed(11)}else d=null;return d},_insertItem:"#insertChild",_insertAt:function(l,d){var _=l&&l._getOwner(),C=l!==this&&_?this:null;return C&&(C._remove(!1,!0),_._insertItem(l._index+d,C)),C},insertAbove:function(l){return this._insertAt(l,1)},insertBelow:function(l){return this._insertAt(l,0)},sendToBack:function(){var l=this._getOwner();return l?l._insertItem(0,this):null},bringToFront:function(){var l=this._getOwner();return l?l._insertItem(V,this):null},appendTop:"#addChild",appendBottom:function(l){return this.insertChild(0,l)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(l){return l._insertItem(V,this)},copyTo:function(l){return this.clone(!1).addTo(l)},reduce:function(l){var d=this._children;if(d&&1===d.length){var _=d[0].reduce(l);return this._parent?(_.insertAbove(this),this.remove()):_.remove(),_}return this},_removeNamed:function(){var l=this._getOwner();if(l){var d=l._children,_=l._namedChildren,C=this._name,S=_[C],k=S?S.indexOf(this):-1;-1!==k&&(d[C]==this&&delete d[C],S.splice(k,1),S.length?d[C]=S[0]:delete _[C])}},_remove:function(l,d){var _=this._getOwner(),C=this._project,S=this._index;return this._style&&this._style._dispose(),!!_&&(this._name&&this._removeNamed(),null!=S&&(C._activeLayer===this&&(C._activeLayer=this.getNextSibling()||this.getPreviousSibling()),le.splice(_._children,null,S,1)),this._installEvents(!1),l&&C._changes&&this._changed(5),d&&_._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(l){var d=l&&l.insertBelow(this);return d&&this.remove(),d},removeChildren:function(l,d){if(!this._children)return null;l=l||0,d=le.pick(d,this._children.length);for(var _=le.splice(this._children,null,l,d-l),C=_.length-1;C>=0;C--)_[C]._remove(!0,!1);return _.length>0&&this._changed(11),_},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var l=0,d=this._children.length;l<d;l++)this._children[l]._index=l;this._changed(11)}},isEmpty:function(l){var d=this._children,_=d?d.length:0;if(l){for(var C=0;C<_;C++)if(!d[C].isEmpty(l))return!1;return!0}return!_},isEditable:function(){for(var l=this;l;){if(!l._visible||l._locked)return!1;l=l._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(l){function d(N){var z=[];do{z.unshift(N)}while(N=N._parent);return z}for(var _=d(this),C=d(l),S=0,k=Math.min(_.length,C.length);S<k;S++)if(_[S]!=C[S])return _[S]._index<C[S]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(l){return-1===this._getOrder(l)},isBelow:function(l){return 1===this._getOrder(l)},isParent:function(l){return this._parent===l},isChild:function(l){return l&&l._parent===this},isDescendant:function(l){for(var d=this;d=d._parent;)if(d===l)return!0;return!1},isAncestor:function(l){return!!l&&l.isDescendant(this)},isSibling:function(l){return this._parent===l._parent},isGroupedWith:function(l){for(var d=this._parent;d;){if(d._parent&&/^(Group|Layer|CompoundPath)$/.test(d._class)&&l.isDescendant(d))return!0;d=d._parent}return!1}},le.each(["rotate","scale","shear","skew"],function(l){var d="rotate"===l;this[l]=function(){var _=arguments,C=(d?le:Ve).read(_),S=Ve.read(_,0,{readNull:!0});return this.transform((new ze)[l](C,S||this.getPosition(!0)))}},{translate:function(){var l=new ze;return this.transform(l.translate.apply(l,arguments))},transform:function(l,d,_){var C=this._matrix,S=l&&!l.isIdentity(),k=_&&this._canApplyMatrix||this._applyMatrix&&(S||!C.isIdentity()||d&&this._children);if(!S&&!k)return this;if(S){!l.isInvertible()&&C.isInvertible()&&(C._backup=C.getValues()),C.prepend(l,!0);var N=this._style,z=N.getFillColor(!0),D=N.getStrokeColor(!0);z&&z.transform(l),D&&D.transform(l)}if(k&&(k=this._transformContent(C,d,_))){var H=this._pivot;H&&C._transformPoint(H,H,!0),C.reset(!0),_&&this._canApplyMatrix&&(this._applyMatrix=!0)}var Z=this._bounds,$=this._position;(S||k)&&this._changed(25);var R=S&&Z&&l.decompose();if(R&&R.skewing.isZero()&&R.rotation%90==0){for(var Y in Z){var he=Z[Y];if(he.nonscaling)delete Z[Y];else if(k||!he.internal){var me=he.rect;l._transformBounds(me,me)}}this._bounds=Z;var ve=Z[this._getBoundsCacheKey(this._boundsOptions||{})];ve&&(this._position=this._getPositionFromBounds(ve.rect))}else S&&$&&this._pivot&&(this._position=l._transformPoint($,$));return this},_transformContent:function(l,d,_){var C=this._children;if(C){for(var S=0,k=C.length;S<k;S++)C[S].transform(l,d,_);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(Ve.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(Ve.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(Ve.read(arguments))},localToParent:function(){return this._matrix._transformPoint(Ve.read(arguments))},fitBounds:function(l,d){l=ee.read(arguments);var _=this.getBounds(),C=_.height/_.width,S=l.height/l.width,k=(d?C>S:C<S)?l.width/_.width:l.height/_.height,N=new ee(new Ve,new Se(_.width*k,_.height*k));N.setCenter(l.getCenter()),this.setBounds(N)}}),{_setStyles:function(l,d,_){var C=this._style,S=this._matrix;if(C.hasFill()&&(l.fillStyle=C.getFillColor().toCanvasStyle(l,S)),C.hasStroke()){l.strokeStyle=C.getStrokeColor().toCanvasStyle(l,S),l.lineWidth=C.getStrokeWidth();var k=C.getStrokeJoin(),N=C.getStrokeCap(),z=C.getMiterLimit();if(k&&(l.lineJoin=k),N&&(l.lineCap=N),z&&(l.miterLimit=z),y.support.nativeDash){var D=C.getDashArray(),H=C.getDashOffset();D&&D.length&&("setLineDash"in l?(l.setLineDash(D),l.lineDashOffset=H):(l.mozDash=D,l.mozDashOffset=H))}}if(C.hasShadow()){var Z=d.pixelRatio||1,$=_._shiftless().prepend((new ze).scale(Z,Z)),R=$.transform(new Ve(C.getShadowBlur(),0)),Y=$.transform(this.getShadowOffset());l.shadowColor=C.getShadowColor().toCanvasStyle(l),l.shadowBlur=R.getLength(),l.shadowOffsetX=Y.x,l.shadowOffsetY=Y.y}},draw:function(l,d,_){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var S=d.matrices,k=d.viewMatrix,N=this._matrix,z=S[S.length-1].appended(N);if(z.isInvertible()){k=k?k.appended(z):z,S.push(z),d.updateMatrix&&(this._globalMatrix=z);var he,me,ve,D=this._blendMode,H=Re.clamp(this._opacity,0,1),Z="normal"===D,$=Ds.nativeModes[D],R=Z&&1===H||d.dontStart||d.clip||($||Z&&H<1)&&this._canComposite(),Y=d.pixelRatio||1;if(!R){var ge=this.getStrokeBounds(k);if(!ge.width||!ge.height)return void S.pop();ve=d.offset,me=d.offset=ge.getTopLeft().floor(),he=l,l=Hr.getContext(ge.getSize().ceil().add(1).multiply(Y)),1!==Y&&l.scale(Y,Y)}l.save();var pe=_?_.appended(N):this._canScaleStroke&&!this.getStrokeScaling(!0)&&k,de=!R&&d.clipItem,Ee=!pe||de;if(R?(l.globalAlpha=H,$&&(l.globalCompositeOperation=D)):Ee&&l.translate(-me.x,-me.y),Ee&&(R?N:k).applyToContext(l),de&&d.clipItem.draw(l,d.extend({clip:!0})),pe){l.setTransform(Y,0,0,Y,0,0);var ke=d.offset;ke&&l.translate(-ke.x,-ke.y)}this._draw(l,d,k,pe),l.restore(),S.pop(),d.clip&&!d.dontFinish&&l.clip(this.getFillRule()),R||(Ds.process(D,l,he,H,me.subtract(ve).multiply(Y)),Hr.release(l),d.offset=ve)}}},_isUpdated:function(l){var d=this._parent;if(d instanceof Gn)return d._isUpdated(l);var _=this._updateVersion===l;return!_&&d&&d._visible&&d._isUpdated(l)&&(this._updateVersion=l,_=!0),_},_drawSelection:function(l,d,_,C,S){var k=this._selection,N=1&k,z=2&k||N&&this._selectBounds,D=4&k;if(this._drawSelected||(N=!1),(N||z||D)&&this._isUpdated(S)){var H,Z=this.getSelectedColor(!0)||(H=this.getLayer())&&H.getSelectedColor(!0),$=d.appended(this.getGlobalMatrix(!0)),R=_/2;if(l.strokeStyle=l.fillStyle=Z?Z.toCanvasStyle(l):"#009dec",N&&this._drawSelected(l,$,C),D){var Y=this.getPosition(!0),he=this._parent,me=he?he.localToGlobal(Y):Y,ve=me.x,ge=me.y;l.beginPath(),l.arc(ve,ge,R,0,2*Math.PI,!0),l.stroke();for(var pe=[[0,-1],[1,0],[0,1],[-1,0]],de=R,Ee=_+1,ke=0;ke<4;ke++){var Xe=pe[ke],je=Xe[0],nt=Xe[1];l.moveTo(ve+je*de,ge+nt*de),l.lineTo(ve+je*Ee,ge+nt*Ee),l.stroke()}}if(z){var pt=$._transformCorners(this.getInternalBounds());for(l.beginPath(),ke=0;ke<8;ke++)l[ke?"lineTo":"moveTo"](pt[ke],pt[++ke]);for(l.closePath(),l.stroke(),ke=0;ke<8;ke++)l.fillRect(pt[ke]-R,pt[++ke]-R,_,_)}}},_canComposite:function(){return!1}},le.each(["down","drag","up","move"],function(l){this["removeOn"+le.capitalize(l)]=function(){var d={};return d[l]=!0,this.removeOn(d)}},{removeOn:function(l){for(var d in l)if(l[d]){var _="mouse"+d,C=this._project,S=C._removeSets=C._removeSets||{};S[_]=S[_]||{},S[_][this._id]=this}return this}}),{tween:function(l,d,_){_||(_=d,d=l,l=null,_||(_=d,d=null));var k=null!=_&&("number"==typeof _?_:_.duration),N=new us(this,l,d,k,_&&_.easing,_&&_.start);return k&&this.on("frame",function z(D){N._handleFrame(1e3*D.time),N.running||this.off("frame",z)}),N},tweenTo:function(l,d){return this.tween(null,l,d)},tweenFrom:function(l,d){return this.tween(l,null,d)}}),ut=bt.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(d){this._children=[],this._namedChildren={},this._initialize(d)||this.addChildren(Array.isArray(d)?d:arguments)},_changed:function l(d){l.base.call(this,d),2050&d&&(this._clipItem=V)},_getClipItem:function(){var l=this._clipItem;if(l===V){l=null;for(var d=this._children,_=0,C=d.length;_<C;_++)if(d[_]._clipMask){l=d[_];break}this._clipItem=l}return l},isClipped:function(){return!!this._getClipItem()},setClipped:function(l){var d=this.getFirstChild();d&&d.setClipMask(l)},_getBounds:function l(d,_){var C=this._getClipItem();return C?C._getCachedBounds(C._matrix.prepended(d),le.set({},_,{stroke:!1})):l.base.call(this,d,_)},_hitTestChildren:function l(d,_,C){var S=this._getClipItem();return(!S||S.contains(d))&&l.base.call(this,d,_,C,S)},_draw:function(l,d){var _=d.clip,C=!_&&this._getClipItem();d=d.extend({clipItem:C,clip:!1}),_?(l.beginPath(),d.dontStart=d.dontFinish=!0):C&&C.draw(l,d.extend({clip:!0}));for(var S=this._children,k=0,N=S.length;k<N;k++){var z=S[k];z!==C&&z.draw(l,d)}}}),Vt=ut.extend({_class:"Layer",initialize:function(){ut.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function l(){return this._parent?l.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),on=bt.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(d,_){this._initialize(d,_)},_equals:function(l){return this._type===l._type&&this._size.equals(l._size)&&le.equals(this._radius,l._radius)},copyContent:function(l){this.setType(l._type),this.setSize(l._size),this.setRadius(l._radius)},getType:function(){return this._type},setType:function(l){this._type=l},getShape:"#getType",setShape:"#setType",getSize:function(){var l=this._size;return new L(l.width,l.height,this,"setSize")},setSize:function(){var l=Se.read(arguments);if(this._size){if(!this._size.equals(l)){var d=this._type,_=l.width,C=l.height;"rectangle"===d?this._radius.set(Se.min(this._radius,l.divide(2).abs())):"circle"===d?(_=C=(_+C)/2,this._radius=_/2):"ellipse"===d&&this._radius._set(_/2,C/2),this._size._set(_,C),this._changed(9)}}else this._size=l.clone()},getRadius:function(){var l=this._radius;return"circle"===this._type?l:new L(l.width,l.height,this,"setRadius")},setRadius:function(l){var d=this._type;if("circle"===d){if(l===this._radius)return;var _=2*l;this._radius=l,this._size._set(_,_)}else if(l=Se.read(arguments),this._radius){if(this._radius.equals(l))return;this._radius.set(l),"rectangle"===d?(_=Se.max(this._size,l.multiply(2)),this._size.set(_)):"ellipse"===d&&this._size._set(2*l.width,2*l.height)}else this._radius=l.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(l){var d=new(Jt[le.capitalize(this._type)])({center:new Ve,size:this._size,radius:this._radius,insert:!1});return d.copyAttributes(this),y.settings.applyMatrix&&d.setApplyMatrix(!0),(l===V||l)&&d.insertAbove(this),d},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(l,d,_,C){var S=this._style,k=S.hasFill(),N=S.hasStroke(),z=d.dontFinish||d.clip,D=!C;if(k||N||z){var H=this._type,Z=this._radius,$="circle"===H;if(d.dontStart||l.beginPath(),D&&$)l.arc(0,0,Z,0,2*Math.PI,!0);else{var R=$?Z:Z.width,Y=$?Z:Z.height,he=this._size,me=he.width,ve=he.height;if(D&&"rectangle"===H&&0===R&&0===Y)l.rect(-me/2,-ve/2,me,ve);else{var ge=me/2,pe=ve/2,de=.44771525016920644,Ee=R*de,ke=Y*de,Xe=[-ge,-pe+Y,-ge,-pe+ke,-ge+Ee,-pe,-ge+R,-pe,ge-R,-pe,ge-Ee,-pe,ge,-pe+ke,ge,-pe+Y,ge,pe-Y,ge,pe-ke,ge-Ee,pe,ge-R,pe,-ge+R,pe,-ge+Ee,pe,-ge,pe-ke,-ge,pe-Y];C&&C.transform(Xe,Xe,32),l.moveTo(Xe[0],Xe[1]),l.bezierCurveTo(Xe[2],Xe[3],Xe[4],Xe[5],Xe[6],Xe[7]),ge!==R&&l.lineTo(Xe[8],Xe[9]),l.bezierCurveTo(Xe[10],Xe[11],Xe[12],Xe[13],Xe[14],Xe[15]),pe!==Y&&l.lineTo(Xe[16],Xe[17]),l.bezierCurveTo(Xe[18],Xe[19],Xe[20],Xe[21],Xe[22],Xe[23]),ge!==R&&l.lineTo(Xe[24],Xe[25]),l.bezierCurveTo(Xe[26],Xe[27],Xe[28],Xe[29],Xe[30],Xe[31])}}l.closePath()}!z&&(k||N)&&(this._setStyles(l,d,_),k&&(l.fill(S.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),N&&l.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(l,d){var _=new ee(this._size).setCenter(0,0),C=this._style,S=d.stroke&&C.hasStroke()&&C.getStrokeWidth();return l&&(_=l._transformBounds(_)),S?_.expand(Jt._getStrokePadding(S,this._getStrokeMatrix(l,d))):_}},new function(){function l(_,C,S){var k=_._radius;if(!k.isZero())for(var N=_._size.divide(2),z=1;z<=4;z++){var D=new Ve(z>1&&z<4?-1:1,z>2?-1:1),H=D.multiply(N),Z=H.subtract(D.multiply(k));if(new ee(S?H.add(D.multiply(S)):H,Z).contains(C))return{point:Z,quadrant:z}}}function d(_,C,S,k){var N=_.divide(C);return(!k||N.isInQuadrant(k))&&N.subtract(N.normalize()).multiply(C).divide(S).length<=1}return{_contains:function _(C){if("rectangle"===this._type){var S=l(this,C);return S?C.subtract(S.point).divide(this._radius).getLength()<=1:_.base.call(this,C)}return C.divide(this.size).getLength()<=.5},_hitTestSelf:function _(C,S,k,N){var z=!1,D=this._style,H=S.stroke&&D.hasStroke(),Z=S.fill&&D.hasFill();if(H||Z){var $=this._type,R=this._radius,Y=H?D.getStrokeWidth()/2:0,he=S._tolerancePadding.add(Jt._getStrokePadding(Y,!D.getStrokeScaling()&&N));if("rectangle"===$){var me=he.multiply(2),ve=l(this,C,me);if(ve)z=d(C.subtract(ve.point),R,he,ve.quadrant);else{var ge=new ee(this._size).setCenter(0,0),pe=ge.expand(me),de=ge.expand(me.negate());z=pe._containsPoint(C)&&!de._containsPoint(C)}}else z=d(C,R,he)}return z?new Ht(H?"stroke":"fill",this):_.base.apply(this,arguments)}}},{statics:new function(){function l(d,_,C,S,k){var N=le.create(on.prototype);return N._type=d,N._size=C,N._radius=S,N._initialize(le.getNamed(k),_),N}return{Circle:function(){var d=arguments,_=Ve.readNamed(d,"center"),C=le.readNamed(d,"radius");return l("circle",_,new Se(2*C),C,d)},Rectangle:function(){var d=arguments,_=ee.readNamed(d,"rectangle"),C=Se.min(Se.readNamed(d,"radius"),_.getSize(!0).divide(2));return l("rectangle",_.getCenter(!0),_.getSize(!0),C,d)},Ellipse:function(){var d=arguments,_=on._readEllipse(d),C=_.radius;return l("ellipse",_.center,C.multiply(2),C,d)},_readEllipse:function(d){var _,C;if(le.hasNamed(d,"radius"))_=Ve.readNamed(d,"center"),C=Se.readNamed(d,"radius");else{var S=ee.readNamed(d,"rectangle");_=S.getCenter(!0),C=S.getSize(!0).divide(2)}return{center:_,radius:C}}}}}),Ct=bt.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(d,_){if(!this._initialize(d,_!==V&&Ve.read(arguments))){var C,S=typeof d,k="string"===S?q.getElementById(d):"object"===S?d:null;if(k&&k!==bt.NO_INSERT)if(k.getContext||null!=k.naturalHeight)C=k;else if(k){var N=Se.read(arguments);N.isZero()||(C=Hr.getCanvas(N))}C?this.setImage(C):this.setSource(d)}this._size||(this._size=new Se,this._loaded=!1)},_equals:function(l){return this.getSource()===l.getSource()},copyContent:function(l){var d=l._image,_=l._canvas;if(d)this._setImage(d);else if(_){var C=Hr.getCanvas(l._size);C.getContext("2d").drawImage(_,0,0),this._setImage(C)}this._crossOrigin=l._crossOrigin},getSize:function(){var l=this._size;return new L(l?l.width:0,l?l.height:0,this,"setSize")},setSize:function(l,d){var _=Se.read(arguments);if(_.equals(this._size))d&&this.clear();else if(_.width>0&&_.height>0){var C=!d&&this.getElement();this._setImage(Hr.getCanvas(_)),C&&this.getContext(!0).drawImage(C,0,0,_.width,_.height)}else this._canvas&&Hr.release(this._canvas),this._size=_.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(l){this.setSize(l,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(l){this.setSize(this.getWidth(),l)},getLoaded:function(){return this._loaded},isEmpty:function(){var l=this._size;return!l||0===l.width&&0===l.height},getResolution:function(){var l=this._matrix,d=new Ve(0,0).transform(l),_=new Ve(1,0).transform(l).subtract(d),C=new Ve(0,1).transform(l).subtract(d);return new Se(72/_.getLength(),72/C.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(l){var d=this;function _(C){var S=d.getView(),k=C&&C.type||"load";S&&d.responds(k)&&(y=S._scope,d.emit(k,new rt(C)))}this._setImage(l),this._loaded?setTimeout(_,0):l&&Rt.add(l,{load:function(C){d._setImage(l),_(C)},error:_})},_setImage:function(l){this._canvas&&Hr.release(this._canvas),l&&l.getContext?(this._image=null,this._canvas=l,this._loaded=!0):(this._image=l,this._canvas=null,this._loaded=!!(l&&l.src&&l.complete)),this._size=new Se(l?l.naturalWidth||l.width:0,l?l.naturalHeight||l.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var l=Hr.getContext(this._size);try{this._image&&l.drawImage(this._image,0,0),this._canvas=l.canvas}catch{Hr.release(l)}}return this._canvas},setCanvas:"#setImage",getContext:function(l){return this._context||(this._context=this.getCanvas().getContext("2d")),l&&(this._image=null,this._changed(1025)),this._context},setContext:function(l){this._context=l},getSource:function(){var l=this._image;return l&&l.src||this.toDataURL()},setSource:function(l){var d=new ie.Image,_=this._crossOrigin;_&&(d.crossOrigin=_),l&&(d.src=l),this.setImage(d)},getCrossOrigin:function(){var l=this._image;return l&&l.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(l){this._crossOrigin=l;var d=this._image;d&&(d.crossOrigin=l)},getSmoothing:function(){return this._smoothing},setSmoothing:function(l){this._smoothing="string"==typeof l?l:l?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var l=ee.read(arguments),d=Hr.getContext(l.getSize());return d.drawImage(this.getCanvas(),l.x,l.y,l.width,l.height,0,0,l.width,l.height),d.canvas},getSubRaster:function(){var l=ee.read(arguments),d=new Ct(bt.NO_INSERT);return d._setImage(this.getSubCanvas(l)),d.translate(l.getCenter().subtract(this.getSize().divide(2))),d._matrix.prepend(this._matrix),d.insertAbove(this),d},toDataURL:function(){var l=this._image,d=l&&l.src;if(/^data:/.test(d))return d;var _=this.getCanvas();return _?_.toDataURL.apply(_,arguments):null},drawImage:function(l){var d=Ve.read(arguments,1);this.getContext(!0).drawImage(l,d.x,d.y)},getAverageColor:function(l){var d,_;if(l?l instanceof xt?(_=l,d=l.getBounds()):"object"==typeof l&&("width"in l?d=new ee(l):"x"in l&&(d=new ee(l.x-.5,l.y-.5,1,1))):d=this.getBounds(),!d)return null;var S=Math.min(d.width,32),k=Math.min(d.height,32),N=Ct._sampleContext;N?N.clearRect(0,0,33,33):N=Ct._sampleContext=Hr.getContext(new Se(32)),N.save();var z=(new ze).scale(S/d.width,k/d.height).translate(-d.x,-d.y);z.applyToContext(N),_&&_.draw(N,new le({clip:!0,matrices:[z]})),this._matrix.applyToContext(N);var D=this.getElement(),H=this._size;D&&N.drawImage(D,-H.width/2,-H.height/2),N.restore();for(var Z=N.getImageData(.5,.5,Math.ceil(S),Math.ceil(k)).data,$=[0,0,0],R=0,Y=0,he=Z.length;Y<he;Y+=4){var me=Z[Y+3];R+=me,$[0]+=Z[Y]*(me/=255),$[1]+=Z[Y+1]*me,$[2]+=Z[Y+2]*me}for(Y=0;Y<3;Y++)$[Y]/=R;return R?Ft.read($):null},getPixel:function(){var l=Ve.read(arguments),d=this.getContext().getImageData(l.x,l.y,1,1).data;return new Ft("rgb",[d[0]/255,d[1]/255,d[2]/255],d[3]/255)},setPixel:function(){var l=arguments,d=Ve.read(l),_=Ft.read(l),C=_._convert("rgb"),S=_._alpha,k=this.getContext(!0),N=k.createImageData(1,1),z=N.data;z[0]=255*C[0],z[1]=255*C[1],z[2]=255*C[2],z[3]=null!=S?255*S:255,k.putImageData(N,d.x,d.y)},clear:function(){var l=this._size;this.getContext(!0).clearRect(0,0,l.width+1,l.height+1)},createImageData:function(){var l=Se.read(arguments);return this.getContext().createImageData(l.width,l.height)},getImageData:function(){var l=ee.read(arguments);return l.isEmpty()&&(l=new ee(this._size)),this.getContext().getImageData(l.x,l.y,l.width,l.height)},putImageData:function(l){var d=Ve.read(arguments,1);this.getContext(!0).putImageData(l,d.x,d.y)},setImageData:function(l){this.setSize(l),this.getContext(!0).putImageData(l,0,0)},_getBounds:function(l,d){var _=new ee(this._size).setCenter(0,0);return l?l._transformBounds(_):_},_hitTestSelf:function(l){if(this._contains(l)){var d=this;return new Ht("pixel",d,{offset:l.add(d._size.divide(2)).round(),color:{get:function(){return d.getPixel(this.offset)}}})}},_draw:function(l,d,_){var C=this.getElement();if(C&&C.width>0&&C.height>0){l.globalAlpha=Re.clamp(this._opacity,0,1),this._setStyles(l,d,_);var S=this._smoothing,k="off"===S;Gt.setPrefixed(l,k?"imageSmoothingEnabled":"imageSmoothingQuality",!k&&S),l.drawImage(C,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),rn=bt.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(d,_){this._initialize(d,_!==V&&Ve.read(arguments,1))||this.setDefinition(d instanceof Qt?d:new Qt(d))},_equals:function(l){return this._definition===l._definition},copyContent:function(l){this.setDefinition(l._definition)},getDefinition:function(){return this._definition},setDefinition:function(l){this._definition=l,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(l,d){var _=this._definition._item;return _._getCachedBounds(_._matrix.prepended(l),d)},_hitTestSelf:function(l,d,_){var C=d.extend({all:!1}),S=this._definition._item._hitTest(l,C,_);return S&&(S.item=this),S},_draw:function(l,d){this._definition._item.draw(l,d)}}),Qt=le.extend({_class:"SymbolDefinition",initialize:function(d,_){this._id=Le.get(),this.project=y.project,d&&this.setItem(d,_)},_serialize:function(l,d){return d.add(this,function(){return le.serialize([this._class,this._item],l,!1,d)})},_changed:function(l){8&l&&bt._clearBoundsCache(this),1&l&&this.project._changed(l)},getItem:function(){return this._item},setItem:function(l,d){l._symbol&&(l=l.clone()),this._item&&(this._item._symbol=null),this._item=l,l.remove(),l.setSelected(!1),d||l.setPosition(new Ve),l._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(l){return new rn(this,l)},clone:function(){return new Qt(this._item.clone(!1))},equals:function(l){return l===this||l&&this._item.equals(l._item)||!1}}),Ht=le.extend({_class:"HitResult",initialize:function(d,_,C){this.type=d,this.item=_,C&&this.inject(C)},statics:{getOptions:function(l){var d=l&&le.read(l);return new le({type:null,tolerance:y.settings.hitTolerance,fill:!d,stroke:!d,segments:!d,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},d)}}}),Qn=le.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(d,_,C,S,k,N){var D,H,Z,$,z=arguments.length;z>0&&(null==d||"object"==typeof d?1===z&&d&&"point"in d?(D=d.point,H=d.handleIn,Z=d.handleOut,$=d.selection):(D=d,H=_,Z=C,$=S):(D=[d,_],H=C!==V?[C,S]:null,Z=k!==V?[k,N]:null)),new en(D,this,"_point"),new en(H,this,"_handleIn"),new en(Z,this,"_handleOut"),$&&this.setSelection($)},_serialize:function(l,d){var _=this._point,C=this._selection,S=C||this.hasHandles()?[_,this._handleIn,this._handleOut]:_;return C&&S.push(C),le.serialize(S,l,!0,d)},_changed:function(l){var d=this._path;if(d){var S,_=d._curves,C=this._index;_&&((!l||l===this._point||l===this._handleIn)&&(S=C>0?_[C-1]:d._closed?_[_.length-1]:null)&&S._changed(),(!l||l===this._point||l===this._handleOut)&&(S=_[C])&&S._changed()),d._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(Ve.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(Ve.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(Ve.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var l=this._handleIn,d=this._handleOut;return!l.isZero()&&!d.isZero()&&l.isCollinear(d)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(l){var d=this._selection,_=this._path;this._selection=l=l||0,_&&l!==d&&(_._updateSelection(this,d,l),_._changed(257))},_changeSelection:function(l,d){var _=this._selection;this.setSelection(d?_|l:_&~l)},isSelected:function(){return!!(7&this._selection)},setSelected:function(l){this._changeSelection(7,l)},getIndex:function(){return this._index!==V?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var l=this._path,d=this._index;return l?(d>0&&!l._closed&&d===l._segments.length-1&&d--,l.getCurves()[d]||null):null},getLocation:function(){var l=this.getCurve();return l?new Pn(l,this===l._segment1?0:1):null},getNext:function(){var l=this._path&&this._path._segments;return l&&(l[this._index+1]||this._path._closed&&l[0])||null},smooth:function(l,d,_){var C=l||{},S=C.type,k=C.factor,N=this.getPrevious(),z=this.getNext(),D=(N||this)._point,H=this._point,Z=(z||this)._point,$=D.getDistance(H),R=H.getDistance(Z);if(S&&"catmull-rom"!==S){if("geometric"!==S)throw new Error("Smoothing method '"+S+"' not supported.");if(N&&z){var Ee=D.subtract(Z),ke=k===V?.4:k,Xe=ke*$/($+R);d||this.setHandleIn(Ee.multiply(Xe)),_||this.setHandleOut(Ee.multiply(Xe-ke))}}else{var de,Y=k===V?.5:k,he=Math.pow($,Y),me=he*he,ve=Math.pow(R,Y),ge=ve*ve;if(!d&&N){var pe=2*ge+3*ve*he+me;this.setHandleIn(0!=(de=3*ve*(ve+he))?new Ve((ge*D._x+pe*H._x-me*Z._x)/de-H._x,(ge*D._y+pe*H._y-me*Z._y)/de-H._y):new Ve)}if(!_&&z)pe=2*me+3*he*ve+ge,this.setHandleOut(0!=(de=3*he*(he+ve))?new Ve((me*Z._x+pe*H._x-ge*D._x)/de-H._x,(me*Z._y+pe*H._y-ge*D._y)/de-H._y):new Ve)}},getPrevious:function(){var l=this._path&&this._path._segments;return l&&(l[this._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var l=this._path;return l&&this._index===l._segments.length-1||!1},reverse:function(){var l=this._handleIn,d=this._handleOut,_=l.clone();l.set(d),d.set(_)},reversed:function(){return new Qn(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new Qn(this._point,this._handleIn,this._handleOut)},equals:function(l){return l===this||l&&this._class===l._class&&this._point.equals(l._point)&&this._handleIn.equals(l._handleIn)&&this._handleOut.equals(l._handleOut)||!1},toString:function(){var l=["point: "+this._point];return this._handleIn.isZero()||l.push("handleIn: "+this._handleIn),this._handleOut.isZero()||l.push("handleOut: "+this._handleOut),"{ "+l.join(", ")+" }"},transform:function(l){this._transformCoordinates(l,new Array(6),!0),this._changed()},interpolate:function(l,d,_){var C=1-_,S=_,k=l._point,N=d._point,z=l._handleIn,D=d._handleIn,H=d._handleOut,Z=l._handleOut;this._point._set(C*k._x+S*N._x,C*k._y+S*N._y,!0),this._handleIn._set(C*z._x+S*D._x,C*z._y+S*D._y,!0),this._handleOut._set(C*Z._x+S*H._x,C*Z._y+S*H._y,!0),this._changed()},_transformCoordinates:function(l,d,_){var C=this._point,S=_&&this._handleIn.isZero()?null:this._handleIn,k=_&&this._handleOut.isZero()?null:this._handleOut,N=C._x,z=C._y,D=2;return d[0]=N,d[1]=z,S&&(d[D++]=S._x+N,d[D++]=S._y+z),k&&(d[D++]=k._x+N,d[D++]=k._y+z),l&&(l._transformCoordinates(d,d,D/2),N=d[0],z=d[1],_?(C._x=N,C._y=z,D=2,S&&(S._x=d[D++]-N,S._y=d[D++]-z),k&&(k._x=d[D++]-N,k._y=d[D++]-z)):(S||(d[D++]=N,d[D++]=z),k||(d[D++]=N,d[D++]=z))),d}}),en=Ve.extend({initialize:function(d,_,C){var S,k,N;if(d)if((S=d[0])!==V)k=d[1];else{var z=d;(S=z.x)===V&&(S=(z=Ve.read(arguments)).x),k=z.y,N=z.selected}else S=k=0;this._x=S,this._y=k,this._owner=_,_[C]=this,N&&this.setSelected(!0)},_set:function(l,d){return this._x=l,this._y=d,this._owner._changed(this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner._changed(this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner._changed(this)},isZero:function(){var l=Re.isZero;return l(this._x)&&l(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){var l=this._owner;return this===l._point?1:this===l._handleIn?2:this===l._handleOut?4:0}}),Sn=le.extend({_class:"Curve",beans:!0,initialize:function(d,_,C,S,k,N,z,D){var Z,$,R,Y,he,me,H=arguments.length;3===H?(this._path=d,Z=_,$=C):H?1===H?"segment1"in d?(Z=new Qn(d.segment1),$=new Qn(d.segment2)):"point1"in d?(R=d.point1,he=d.handle1,me=d.handle2,Y=d.point2):Array.isArray(d)&&(R=[d[0],d[1]],Y=[d[6],d[7]],he=[d[2]-d[0],d[3]-d[1]],me=[d[4]-d[6],d[5]-d[7]]):2===H?(Z=new Qn(d),$=new Qn(_)):4===H?(R=d,he=_,me=C,Y=S):8===H&&(R=[d,_],Y=[z,D],he=[C-d,S-_],me=[k-z,N-D]):(Z=new Qn,$=new Qn),this._segment1=Z||new Qn(R,null,he),this._segment2=$||new Qn(Y,me,null)},_serialize:function(l,d){return le.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],l,!0,d)},_changed:function(){this._length=this._bounds=V},clone:function(){return new Sn(this._segment1,this._segment2)},toString:function(){var l=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||l.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||l.push("handle2: "+this._segment2._handleIn),l.push("point2: "+this._segment2._point),"{ "+l.join(", ")+" }"},classify:function(){return Sn.classify(this.getValues())},remove:function(){var l=!1;if(this._path){var d=this._segment2,_=d._handleOut;(l=d.remove())&&this._segment1._handleOut.set(_)}return l},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(Ve.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(Ve.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(Ve.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(Ve.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index+1]||this._path._closed&&l[0])||null},getPrevious:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var l=this._path;return l&&this._segment1._index===l._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(l){this.getPoint1().setSelected(l),this.getHandle1().setSelected(l),this.getHandle2().setSelected(l),this.getPoint2().setSelected(l)},getValues:function(l){return Sn.getValues(this._segment1,this._segment2,l)},getPoints:function(){for(var l=this.getValues(),d=[],_=0;_<8;_+=2)d.push(new Ve(l[_],l[_+1]));return d}},{getLength:function(){return null==this._length&&(this._length=Sn.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Sn.getArea(this.getValues())},getLine:function(){return new dt(this._segment1._point,this._segment2._point)},getPart:function(l,d){return new Sn(Sn.getPart(this.getValues(),l,d))},getPartLength:function(l,d){return Sn.getLength(this.getValues(),l,d)},divideAt:function(l){return this.divideAtTime(l&&l.curve===this?l.time:this.getTimeAt(l))},divideAtTime:function(l,d){var S=null;if(l>=1e-8&&l<=.99999999){var k=Sn.subdivide(this.getValues(),l),N=k[0],z=k[1],D=d||this.hasHandles(),H=this._segment1,Z=this._segment2,$=this._path;D&&(H._handleOut._set(N[2]-N[0],N[3]-N[1]),Z._handleIn._set(z[4]-z[6],z[5]-z[7]));var R=N[6],Y=N[7],he=new Qn(new Ve(R,Y),D&&new Ve(N[4]-R,N[5]-Y),D&&new Ve(z[2]-R,z[3]-Y));$?($.insert(H._index+1,he),S=this.getNext()):(this._segment2=he,this._changed(),S=new Sn(he,Z))}return S},splitAt:function(l){var d=this._path;return d?d.splitAt(l):null},splitAtTime:function(l){return this.splitAt(this.getLocationAtTime(l))},divide:function(l,d){return this.divideAtTime(l===V?.5:d?l:this.getTimeAt(l))},split:function(l,d){return this.splitAtTime(l===V?.5:d?l:this.getTimeAt(l))},reversed:function(){return new Sn(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(l,d,_,C){var S=l._point,k=l._handleOut,N=d._handleIn,z=d._point,D=S.x,H=S.y,Z=z.x,$=z.y,R=C?[D,H,D,H,Z,$,Z,$]:[D,H,D+k._x,H+k._y,Z+N._x,$+N._y,Z,$];return _&&_._transformCoordinates(R,R,4),R},subdivide:function(l,d){var _=l[0],C=l[1],S=l[2],k=l[3],N=l[4],z=l[5],D=l[6],H=l[7];d===V&&(d=.5);var Z=1-d,$=Z*_+d*S,R=Z*C+d*k,Y=Z*S+d*N,he=Z*k+d*z,me=Z*N+d*D,ve=Z*z+d*H,ge=Z*$+d*Y,pe=Z*R+d*he,de=Z*Y+d*me,Ee=Z*he+d*ve,ke=Z*ge+d*de,Xe=Z*pe+d*Ee;return[[_,C,$,R,ge,pe,ke,Xe],[ke,Xe,de,Ee,me,ve,D,H]]},getMonoCurves:function(l,d){var _=[],C=d?0:1,S=l[C+0],k=l[C+2],N=l[C+4],z=l[C+6];if(S>=k==k>=N&&k>=N==N>=z||Sn.isStraight(l))_.push(l);else{var Y=[],he=Re.solveQuadratic(3*(k-N)-S+z,2*(S+N)-4*k,k-S,Y,1e-8,.99999999);if(he){Y.sort();var me=Y[0],ve=Sn.subdivide(l,me);_.push(ve[0]),he>1&&(ve=Sn.subdivide(ve[1],me=(Y[1]-me)/(1-me)),_.push(ve[0])),_.push(ve[1])}else _.push(l)}return _},solveCubic:function(l,d,_,C,S,k){var N=l[d],z=l[d+2],D=l[d+4],H=l[d+6],Z=0;if(!(N<_&&H<_&&z<_&&D<_||N>_&&H>_&&z>_&&D>_)){var $=3*(z-N),R=3*(D-z)-$;Z=Re.solveCubic(H-N-$-R,R,$,N-_,C,S,k)}return Z},getTimeOf:function(l,d){var _=new Ve(l[0],l[1]),C=new Ve(l[6],l[7]),k=1e-7;if(null===(d.isClose(_,1e-12)?0:d.isClose(C,1e-12)?1:null))for(var z=[d.x,d.y],D=[],H=0;H<2;H++)for(var Z=Sn.solveCubic(l,H,z[H],D,0,1),$=0;$<Z;$++){var R=D[$];if(d.isClose(Sn.getPoint(l,R),k))return R}return d.isClose(_,k)?0:d.isClose(C,k)?1:null},getNearestTime:function(l,d){if(Sn.isStraight(l)){var _=l[0],C=l[1],N=l[6]-_,z=l[7]-C,D=N*N+z*z;if(0===D)return 0;var H=((d.x-_)*N+(d.y-C)*z)/D;return H<1e-12?0:H>.999999999999?1:Sn.getTimeOf(l,new Ve(_+H*N,C+H*z))}var $=1/0,R=0;function Y(ve){if(ve>=0&&ve<=1){var ge=d.getDistance(Sn.getPoint(l,ve),!0);if(ge<$)return $=ge,R=ve,!0}}for(var he=0;he<=100;he++)Y(he/100);for(var me=.005;me>1e-8;)!Y(R-me)&&!Y(R+me)&&(me/=2);return R},getPart:function(l,d,_){var C=d>_;if(C){var S=d;d=_,_=S}return d>0&&(l=Sn.subdivide(l,d)[1]),_<1&&(l=Sn.subdivide(l,(_-d)/(1-d))[0]),C?[l[6],l[7],l[4],l[5],l[2],l[3],l[0],l[1]]:l},isFlatEnough:function(l,d){var _=l[0],C=l[1],D=l[6],H=l[7],Z=3*l[2]-2*_-D,$=3*l[3]-2*C-H,R=3*l[4]-2*D-_,Y=3*l[5]-2*H-C;return Math.max(Z*Z,R*R)+Math.max($*$,Y*Y)<=16*d*d},getArea:function(l){var d=l[0],_=l[1],C=l[2],S=l[3],k=l[4],N=l[5],z=l[6],D=l[7];return 3*((D-_)*(C+k)-(z-d)*(S+N)+S*(d-k)-C*(_-N)+D*(k+d/3)-z*(N+_/3))/20},getBounds:function(l){for(var d=l.slice(0,2),_=d.slice(),C=[0,0],S=0;S<2;S++)Sn._addBounds(l[S],l[S+2],l[S+4],l[S+6],S,0,d,_,C);return new ee(d[0],d[1],_[0]-d[0],_[1]-d[1])},_addBounds:function(l,d,_,C,S,k,N,z,D){function H(ke,Xe){var je=ke-Xe,nt=ke+Xe;je<N[S]&&(N[S]=je),nt>z[S]&&(z[S]=nt)}var Z=N[S]+(k/=2),$=z[S]-k;if(l<Z||d<Z||_<Z||C<Z||l>$||d>$||_>$||C>$)if(d<l!=d<C&&_<l!=_<C)H(l,0),H(C,0);else{var me=Re.solveQuadratic(3*(d-_)-l+C,2*(l+_)-4*d,d-l,D);H(C,0);for(var pe=0;pe<me;pe++){var de=D[pe],Ee=1-de;1e-8<=de&&de<=.99999999&&H(Ee*Ee*Ee*l+3*Ee*Ee*de*d+3*Ee*de*de*_+de*de*de*C,k)}}}}},le.each(["getBounds","getStrokeBounds","getHandleBounds"],function(l){this[l]=function(){this._bounds||(this._bounds={});var d=this._bounds[l];return d||(d=this._bounds[l]=Jt[l]([this._segment1,this._segment2],!1,this._path)),d.clone()}},{}),le.each({isStraight:function(l,d,_,C){if(d.isZero()&&_.isZero())return!0;var S=C.subtract(l);if(S.isZero())return!1;if(S.isCollinear(d)&&S.isCollinear(_)){var k=new dt(l,C);if(k.getDistance(l.add(d))<1e-7&&k.getDistance(C.add(_))<1e-7){var z=S.dot(S),D=S.dot(d)/z,H=S.dot(_)/z;return D>=0&&D<=1&&H<=0&&H>=-1}}return!1},isLinear:function(l,d,_,C){var S=C.subtract(l).divide(3);return d.equals(S)&&_.negate().equals(S)}},function(l,d){this[d]=function(_){var C=this._segment1,S=this._segment2;return l(C._point,C._handleOut,S._handleIn,S._point,_)},this.statics[d]=function(_,C){var S=_[0],k=_[1],N=_[6],z=_[7];return l(new Ve(S,k),new Ve(_[2]-S,_[3]-k),new Ve(_[4]-N,_[5]-z),new Ve(N,z),C)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(l){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(l||0)},isCollinear:function(l){return l&&this.isStraight()&&l.isStraight()&&this.getLine().isCollinear(l.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(l,d){return this.getLocationAtTime(d?l:this.getTimeAt(l))},getLocationAtTime:function(l){return null!=l&&l>=0&&l<=1?new Pn(this,l):null},getTimeAt:function(l,d){return Sn.getTimeAt(this.getValues(),l,d)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var l=Ve.read(arguments);return l.isZero()?[]:Sn.getTimesWithTangent(this.getValues(),l)},getOffsetAtTime:function(l){return this.getPartLength(0,l)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(Ve.read(arguments)))},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getTimeOf:function(){return Sn.getTimeOf(this.getValues(),Ve.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var l=Ve.read(arguments),d=this.getValues(),_=Sn.getNearestTime(d,l),C=Sn.getPoint(d,_);return new Pn(this,_,C,null,l.getDistance(C))},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()}},new function(){var l=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return le.each(l,function(d){this[d+"At"]=function(_,C){var S=this.getValues();return Sn[d](S,C?_:Sn.getTimeAt(S,_))},this[d+"AtTime"]=function(_){return Sn[d](this.getValues(),_)}},{statics:{_evaluateMethods:l}})},new function(){function l(C){var S=C[0],k=C[1],N=C[2],z=C[3],D=C[4],H=C[5],R=9*(N-D)+3*(C[6]-S),Y=6*(S+D)-12*N,he=3*(N-S),me=9*(z-H)+3*(C[7]-k),ve=6*(k+H)-12*z,ge=3*(z-k);return function(pe){var de=(R*pe+Y)*pe+he,Ee=(me*pe+ve)*pe+ge;return Math.sqrt(de*de+Ee*Ee)}}function d(C,S){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(S-C))))}function _(C,S,k,N){if(null==S||S<0||S>1)return null;var z=C[0],D=C[1],H=C[2],Z=C[3],$=C[4],R=C[5],Y=C[6],he=C[7],me=Re.isZero;me(H-z)&&me(Z-D)&&(H=z,Z=D),me($-Y)&&me(R-he)&&($=Y,R=he);var Xe,je,ve=3*(H-z),ge=3*($-H)-ve,pe=Y-z-ve-ge,de=3*(Z-D),Ee=3*(R-Z)-de,ke=he-D-de-Ee;if(0===k)Xe=0===S?z:1===S?Y:((pe*S+ge)*S+ve)*S+z,je=0===S?D:1===S?he:((ke*S+Ee)*S+de)*S+D;else{var pt=1-1e-8;if(S<1e-8?(Xe=ve,je=de):S>pt?(Xe=3*(Y-$),je=3*(he-R)):(Xe=(3*pe*S+2*ge)*S+ve,je=(3*ke*S+2*Ee)*S+de),N){0===Xe&&0===je&&(S<1e-8||S>pt)&&(Xe=$-H,je=R-Z);var gt=Math.sqrt(Xe*Xe+je*je);gt&&(Xe/=gt,je/=gt)}if(3===k){$=6*pe*S+2*ge,R=6*ke*S+2*Ee;var Wt=Math.pow(Xe*Xe+je*je,1.5);Xe=0!==Wt?(Xe*R-je*$)/Wt:0,je=0}}return 2===k?new Ve(je,-Xe):new Ve(Xe,je)}return{statics:{classify:function(C){var S=C[0],k=C[1],N=C[2],z=C[3],D=C[4],H=C[5],Z=C[6],$=C[7],Y=N*(k-$)+z*(Z-S)+S*$-k*Z,me=3*(D*(z-k)+H*(S-N)+N*k-z*S),ve=me-Y,ge=ve-Y+(S*($-H)+k*(D-Z)+Z*H-$*D),pe=Math.sqrt(ge*ge+ve*ve+me*me),de=0!==pe?1/pe:0,Ee=Re.isZero,ke="serpentine";function Xe(gt,Wt,Lt){var Bt=Wt!==V,qt=Bt&&Wt>0&&Wt<1,Pe=Bt&&Lt>0&&Lt<1;return Bt&&(!(qt||Pe)||"loop"===gt&&!(qt&&Pe))&&(gt="arch",qt=Pe=!1),{type:gt,roots:qt||Pe?qt&&Pe?Wt<Lt?[Wt,Lt]:[Lt,Wt]:[qt?Wt:Lt]:null}}if(ve*=de,me*=de,Ee(ge*=de))return Ee(ve)?Xe(Ee(me)?"line":"quadratic"):Xe(ke,me/(3*ve));var je=3*ve*ve-4*ge*me;if(Ee(je))return Xe("cusp",ve/(2*ge));var nt=je>0?Math.sqrt(je/3):Math.sqrt(-je),pt=2*ge;return Xe(je>0?ke:"loop",(ve+nt)/pt,(ve-nt)/pt)},getLength:function(C,S,k,N){if(S===V&&(S=0),k===V&&(k=1),Sn.isStraight(C)){var z=C;k<1&&(z=Sn.subdivide(z,k)[0],S/=k),S>0&&(z=Sn.subdivide(z,S)[1]);var D=z[6]-z[0],H=z[7]-z[1];return Math.sqrt(D*D+H*H)}return Re.integrate(N||l(C),S,k,d(S,k))},getTimeAt:function(C,S,k){if(k===V&&(k=S<0?1:0),0===S)return k;var N=Math.abs,D=S>0,H=D?k:0,Z=D?1:k,$=l(C),R=Sn.getLength(C,H,Z,$),Y=N(S)-R;if(N(Y)<1e-12)return D?Z:H;if(Y>1e-12)return null;var me=0;return Re.findRoot(function ve(ge){return me+=Re.integrate($,k,ge,d(k,ge)),k=ge,me-S},$,k+S/R,H,Z,32,1e-12)},getPoint:function(C,S){return _(C,S,0,!1)},getTangent:function(C,S){return _(C,S,1,!0)},getWeightedTangent:function(C,S){return _(C,S,1,!1)},getNormal:function(C,S){return _(C,S,2,!0)},getWeightedNormal:function(C,S){return _(C,S,2,!1)},getCurvature:function(C,S){return _(C,S,3,!1).x},getPeaks:function(C){var S=C[0],k=C[1],N=C[2],z=C[3],D=C[4],H=C[5],R=3*N-S-3*D+C[6],Y=3*S-6*N+3*D,he=-3*S+3*N,me=3*z-k-3*H+C[7],ve=3*k-6*z+3*H,ge=-3*k+3*z,Ee=[];return Re.solveCubic(9*(R*R+me*me),9*(R*Y+ve*me),2*(Y*Y+ve*ve)+3*(he*R+ge*me),he*Y+ve*ge,Ee,1e-8,.99999999),Ee.sort()}}}},new function(){function l(Y,he,me,ve,ge,pe,de){var Ee=!de&&me.getPrevious()===ge,ke=!de&&me!==ge&&me.getNext()===ge,je=1-1e-8;if(null!==ve&&ve>=(Ee?1e-8:0)&&ve<=(ke?je:1)&&null!==pe&&pe>=(ke?1e-8:0)&&pe<=(Ee?je:1)){var nt=new Pn(me,ve,null,de),pt=new Pn(ge,pe,null,de);nt._intersection=pt,pt._intersection=nt,(!he||he(nt))&&Pn.insert(Y,nt,!0)}}function d(Y,he,me,ve,ge,pe,de,Ee,ke,Xe,je,nt,pt){if(++ke>=4096||++Ee>=40)return ke;var yi,Ei,Wt=he[0],Lt=he[1],Bt=he[6],qt=he[7],Pe=dt.getSignedDistance,We=Pe(Wt,Lt,Bt,qt,he[2],he[3]),Ye=Pe(Wt,Lt,Bt,qt,he[4],he[5]),we=We*Ye>0?3/4:4/9,Ue=we*Math.min(0,We,Ye),ct=we*Math.max(0,We,Ye),Dt=Pe(Wt,Lt,Bt,qt,Y[0],Y[1]),wt=Pe(Wt,Lt,Bt,qt,Y[2],Y[3]),nn=Pe(Wt,Lt,Bt,qt,Y[4],Y[5]),On=Pe(Wt,Lt,Bt,qt,Y[6],Y[7]),jn=function _(Y,he,me,ve){var je,ge=[0,Y],pe=[1/3,he],de=[2/3,me],Ee=[1,ve],ke=he-(2*Y+ve)/3,Xe=me-(Y+2*ve)/3;if(ke*Xe<0)je=[[ge,pe,Ee],[ge,de,Ee]];else{var nt=ke/Xe;je=[nt>=2?[ge,pe,Ee]:nt<=.5?[ge,de,Ee]:[ge,pe,de,Ee],[ge,Ee]]}return(ke||Xe)<0?je.reverse():je}(Dt,wt,nn,On),ii=jn[0],Ci=jn[1];if(0===We&&0===Ye&&0===Dt&&0===wt&&0===nn&&0===On||null==(yi=C(ii,Ci,Ue,ct))||null==(Ei=C(ii.reverse(),Ci.reverse(),Ue,ct)))return ke;var Ai=Xe+(je-Xe)*yi,or=Xe+(je-Xe)*Ei;if(Math.max(pt-nt,or-Ai)<1e-9){var is=(Ai+or)/2,_r=(nt+pt)/2;l(ge,pe,de?ve:me,de?_r:is,de?me:ve,de?is:_r)}else{Y=Sn.getPart(Y,yi,Ei);var ws=pt-nt;if(Ei-yi>.8)if(or-Ai>ws)ke=d(he,(wr=Sn.subdivide(Y,.5))[0],ve,me,ge,pe,!de,Ee,ke,nt,pt,Ai,is=(Ai+or)/2),ke=d(he,wr[1],ve,me,ge,pe,!de,Ee,ke,nt,pt,is,or);else{var wr;ke=d((wr=Sn.subdivide(he,.5))[0],Y,ve,me,ge,pe,!de,Ee,ke,nt,_r=(nt+pt)/2,Ai,or),ke=d(wr[1],Y,ve,me,ge,pe,!de,Ee,ke,_r,pt,Ai,or)}else ke=0===ws||ws>=1e-9?d(he,Y,ve,me,ge,pe,!de,Ee,ke,nt,pt,Ai,or):d(Y,he,me,ve,ge,pe,de,Ee,ke,Ai,or,nt,pt)}return ke}function C(Y,he,me,ve){return Y[0][1]<me?S(Y,!0,me):he[0][1]>ve?S(he,!1,ve):Y[0][0]}function S(Y,he,me){for(var ve=Y[0][0],ge=Y[0][1],pe=1,de=Y.length;pe<de;pe++){var Ee=Y[pe][0],ke=Y[pe][1];if(he?ke>=me:ke<=me)return ke===me?Ee:ve+(me-ge)*(Ee-ve)/(ke-ge);ve=Ee,ge=ke}return null}function k(Y,he,me,ve,ge){var pe=Re.isZero;if(pe(ve)&&pe(ge)){var de=Sn.getTimeOf(Y,new Ve(he,me));return null===de?[]:[de]}for(var Ee=Math.atan2(-ge,ve),ke=Math.sin(Ee),Xe=Math.cos(Ee),je=[],nt=[],pt=0;pt<8;pt+=2){var gt=Y[pt]-he,Wt=Y[pt+1]-me;je.push(gt*Xe-Wt*ke,gt*ke+Wt*Xe)}return Sn.solveCubic(je,1,0,nt,0,1),nt}function N(Y,he,me,ve,ge,pe,de){for(var Ee=he[0],ke=he[1],nt=k(Y,Ee,ke,he[6]-Ee,he[7]-ke),pt=0,gt=nt.length;pt<gt;pt++){var Wt=nt[pt],Lt=Sn.getPoint(Y,Wt),Bt=Sn.getTimeOf(he,Lt);null!==Bt&&l(ge,pe,de?ve:me,de?Bt:Wt,de?me:ve,de?Wt:Bt)}}function z(Y,he,me,ve,ge,pe){var de=dt.intersect(Y[0],Y[1],Y[6],Y[7],he[0],he[1],he[6],he[7]);de&&l(ge,pe,me,Sn.getTimeOf(Y,de),ve,Sn.getTimeOf(he,de))}function D(Y,he,me,ve,ge,pe){var de=1e-12,Ee=Math.min,ke=Math.max;if(ke(Y[0],Y[2],Y[4],Y[6])+de>Ee(he[0],he[2],he[4],he[6])&&Ee(Y[0],Y[2],Y[4],Y[6])-de<ke(he[0],he[2],he[4],he[6])&&ke(Y[1],Y[3],Y[5],Y[7])+de>Ee(he[1],he[3],he[5],he[7])&&Ee(Y[1],Y[3],Y[5],Y[7])-de<ke(he[1],he[3],he[5],he[7])){var Xe=$(Y,he);if(Xe)for(var je=0;je<2;je++){var nt=Xe[je];l(ge,pe,me,nt[0],ve,nt[1],!0)}else{var pt=Sn.isStraight(Y),gt=Sn.isStraight(he),Wt=pt&&gt,Lt=pt&&!gt,Bt=ge.length;if((Wt?z:pt||gt?N:d)(Lt?he:Y,Lt?Y:he,Lt?ve:me,Lt?me:ve,ge,pe,Lt,0,0,0,1,0,1),!Wt||ge.length===Bt)for(je=0;je<4;je++){var qt=je>>1,Pe=1&je,We=6*qt,Ye=6*Pe,we=new Ve(Y[We],Y[We+1]),Ue=new Ve(he[Ye],he[Ye+1]);we.isClose(Ue,de)&&l(ge,pe,me,qt,ve,Pe)}}}return ge}function H(Y,he,me,ve){var ge=Sn.classify(Y);if("loop"===ge.type){var pe=ge.roots;l(me,ve,he,pe[0],he,pe[1])}return me}function $(Y,he){function me(On){var jn=On[6]-On[0],ii=On[7]-On[1];return jn*jn+ii*ii}var ve=Math.abs,ge=dt.getDistance,de=1e-7,Ee=Sn.isStraight(Y),ke=Sn.isStraight(he),Xe=Ee&&ke,je=me(Y)<me(he),nt=je?he:Y,pt=je?Y:he,gt=nt[0],Wt=nt[1],Lt=nt[6]-gt,Bt=nt[7]-Wt;if(ge(gt,Wt,Lt,Bt,pt[0],pt[1],!0)<de&&ge(gt,Wt,Lt,Bt,pt[6],pt[7],!0)<de)!Xe&&ge(gt,Wt,Lt,Bt,nt[2],nt[3],!0)<de&&ge(gt,Wt,Lt,Bt,nt[4],nt[5],!0)<de&&ge(gt,Wt,Lt,Bt,pt[2],pt[3],!0)<de&&ge(gt,Wt,Lt,Bt,pt[4],pt[5],!0)<de&&(Ee=ke=Xe=!0);else if(Xe)return null;if(Ee^ke)return null;for(var qt=[Y,he],Pe=[],We=0;We<4&&Pe.length<2;We++){var Ye=1&We,we=1^Ye,Ue=We>>1,ct=Sn.getTimeOf(qt[Ye],new Ve(qt[we][Ue?6:0],qt[we][Ue?7:1]));if(null!=ct){var Dt=Ye?[Ue,ct]:[ct,Ue];(!Pe.length||ve(Dt[0]-Pe[0][0])>1e-8&&ve(Dt[1]-Pe[0][1])>1e-8)&&Pe.push(Dt)}if(We>2&&!Pe.length)break}if(2!==Pe.length)Pe=null;else if(!Xe){var wt=Sn.getPart(Y,Pe[0][0],Pe[1][0]),nn=Sn.getPart(he,Pe[0][1],Pe[1][1]);(ve(nn[2]-wt[2])>de||ve(nn[3]-wt[3])>de||ve(nn[4]-wt[4])>de||ve(nn[5]-wt[5])>de)&&(Pe=null)}return Pe}return{getIntersections:function(Y){var he=this.getValues(),me=Y&&Y!==this&&Y.getValues();return me?D(he,me,this,Y,[]):H(he,this,[])},statics:{getOverlaps:$,getIntersections:function Z(Y,he,me,ve,ge,pe){var Ee=!he;Ee&&(he=Y);for(var ke=Y.length,Xe=he.length,je=new Array(ke),nt=Ee?je:new Array(Xe),pt=[],gt=0;gt<ke;gt++)je[gt]=Y[gt].getValues(ve);if(!Ee)for(gt=0;gt<Xe;gt++)nt[gt]=he[gt].getValues(ge);for(var Wt=_e.findCurveBoundsCollisions(je,nt,1e-7),Lt=0;Lt<ke;Lt++){var Bt=Y[Lt],qt=je[Lt];Ee&&H(qt,Bt,pt,me);var Pe=Wt[Lt];if(Pe)for(var We=0;We<Pe.length;We++){if(pe&&pt.length)return pt;var Ye=Pe[We];(!Ee||Ye>Lt)&&D(qt,nt[Ye],Bt,he[Ye],pt,me)}}return pt},getCurveLineIntersections:k,getTimesWithTangent:function R(Y,he){var me=Y[0],ve=Y[1],ge=Y[2],pe=Y[3],de=Y[4],Ee=Y[5],ke=Y[6],Xe=Y[7],je=he.normalize(),nt=je.x,pt=je.y,gt=3*ke-9*de+9*ge-3*me,Wt=3*Xe-9*Ee+9*pe-3*ve,Lt=6*de-12*ge+6*me,Bt=6*Ee-12*pe+6*ve,qt=3*ge-3*me,Pe=3*pe-3*ve,We=2*gt*pt-2*Wt*nt,Ye=[];if(Math.abs(We)<Re.CURVETIME_EPSILON){if(0!=(We=gt*Bt-Wt*Lt)){var Ue=-(gt*Pe-Wt*qt)/We;Ue>=0&&Ue<=1&&Ye.push(Ue)}}else{var ct=(Lt*Lt-4*gt*qt)*pt*pt+(-2*Lt*Bt+4*Wt*qt+4*gt*Pe)*nt*pt+(Bt*Bt-4*Wt*Pe)*nt*nt,Dt=Lt*pt-Bt*nt;if(ct>=0&&0!=We){var wt=Math.sqrt(ct),nn=-(Dt+wt)/We,On=(-Dt+wt)/We;nn>=0&&nn<=1&&Ye.push(nn),On>=0&&On<=1&&Ye.push(On)}}return Ye}}}}),Pn=le.extend({_class:"CurveLocation",initialize:function(d,_,C,S,k){if(_>=.99999999){var N=d.getNext();N&&(_=0,d=N)}this._setCurve(d),this._time=_,this._point=C||d.getPointAtTime(_),this._overlap=S,this._distance=k,this._intersection=this._next=this._previous=null},_setPath:function(l){this._path=l,this._version=l?l._version:0},_setCurve:function(l){this._setPath(l._path),this._curve=l,this._segment=null,this._segment1=l._segment1,this._segment2=l._segment2},_setSegment:function(l){var d=l.getCurve();d?this._setCurve(d):(this._setPath(l._path),this._segment1=l,this._segment2=null),this._segment=l,this._time=l===this._segment1?0:1,this._point=l._point.clone()},getSegment:function(){var l=this._segment;if(!l){var d=this.getCurve(),_=this.getTime();0===_?l=d._segment1:1===_?l=d._segment2:null!=_&&(l=d.getPartLength(0,_)<d.getPartLength(_,1)?d._segment1:d._segment2),this._segment=l}return l},getCurve:function(){var l=this._path,d=this;function _(C){var S=C&&C.getCurve();if(S&&null!=(d._time=S.getTimeOf(d._point)))return d._setCurve(S),S}return l&&l._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||_(this._segment)||_(this._segment1)||_(this._segment2.getPrevious())},getPath:function(){var l=this.getCurve();return l&&l._path},getIndex:function(){var l=this.getCurve();return l&&l.getIndex()},getTime:function(){var l=this.getCurve(),d=this._time;return l&&null==d?this._time=l.getTimeOf(this._point):d},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var l=this._offset;if(null==l){l=0;var d=this.getPath(),_=this.getIndex();if(d&&null!=_)for(var C=d.getCurves(),S=0;S<_;S++)l+=C[S].getLength();this._offset=l+=this.getCurveOffset()}return l},getCurveOffset:function(){var l=this._curveOffset;if(null==l){var d=this.getCurve(),_=this.getTime();this._curveOffset=l=null!=_&&d&&d.getPartLength(0,_)}return l},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var l=this.getCurve(),d=l&&l.divideAtTime(this.getTime());return d&&this._setSegment(d._segment1),d},split:function(){var l=this.getCurve(),d=l._path,_=l&&l.splitAtTime(this.getTime());return _&&this._setSegment(d.getLastSegment()),_},equals:function(l,d){var _=this===l;if(!_&&l instanceof Pn){var C=this.getCurve(),S=l.getCurve(),k=C._path;if(k===S._path){var z=Math.abs,H=z(this.getOffset()-l.getOffset()),Z=!d&&this._intersection,$=!d&&l._intersection;_=(H<1e-7||k&&z(k.getLength()-H)<1e-7)&&(!Z&&!$||Z&&$&&Z.equals($,!0))}}return _},toString:function(){var l=[],d=this.getPoint(),_=Q.instance;d&&l.push("point: "+d);var C=this.getIndex();null!=C&&l.push("index: "+C);var S=this.getTime();return null!=S&&l.push("time: "+_.number(S)),null!=this._distance&&l.push("distance: "+_.number(this._distance)),"{ "+l.join(", ")+" }"},isTouching:function(){var l=this._intersection;if(l&&this.getTangent().isCollinear(l.getTangent())){var d=this.getCurve(),_=l.getCurve();return!(d.isStraight()&&_.isStraight()&&d.getLine().intersect(_.getLine()))}return!1},isCrossing:function(){var l=this._intersection;if(!l)return!1;var d=this.getTime(),_=l.getTime(),C=1e-8,S=1-C,k=d>=C&&d<=S,N=_>=C&&_<=S;if(k&&N)return!this.isTouching();var z=this.getCurve(),D=z&&d<C?z.getPrevious():z,H=l.getCurve(),Z=H&&_<C?H.getPrevious():H;if(d>S&&(z=z.getNext()),_>S&&(H=H.getNext()),!(D&&z&&Z&&H))return!1;var $=[];function R(nt,pt){var gt=nt.getValues(),Wt=Sn.classify(gt).roots||Sn.getPeaks(gt),Lt=Wt.length,Bt=Sn.getLength(gt,pt&&Lt?Wt[Lt-1]:0,!pt&&Lt?Wt[0]:1);$.push(Lt?Bt:Bt/32)}function Y(nt,pt,gt){return pt<gt?nt>pt&&nt<gt:nt>pt||nt<gt}k||(R(D,!0),R(z,!1)),N||(R(Z,!0),R(H,!1));var he=this.getPoint(),me=Math.min.apply(Math,$),ve=k?z.getTangentAtTime(d):z.getPointAt(me).subtract(he),ge=k?ve.negate():D.getPointAt(-me).subtract(he),pe=N?H.getTangentAtTime(_):H.getPointAt(me).subtract(he),de=N?pe.negate():Z.getPointAt(-me).subtract(he),Ee=ge.getAngle(),ke=ve.getAngle(),Xe=de.getAngle(),je=pe.getAngle();return!!(k?Y(Ee,Xe,je)^Y(ke,Xe,je)&&Y(Ee,je,Xe)^Y(ke,je,Xe):Y(Xe,Ee,ke)^Y(je,Ee,ke)&&Y(Xe,ke,Ee)^Y(je,ke,Ee))},hasOverlap:function(){return!!this._overlap}},le.each(Sn._evaluateMethods,function(l){var d=l+"At";this[l]=function(){var _=this.getCurve(),C=this.getTime();return null!=C&&_&&_[d](C,!0)}},{preserve:!0}),new function(){function l(d,_,C){var S=d.length,k=0,N=S-1;function z(he,me){for(var ve=he+me;ve>=-1&&ve<=S;ve+=me){var ge=d[(ve%S+S)%S];if(!_.getPoint().isClose(ge.getPoint(),1e-7))break;if(_.equals(ge))return ge}return null}for(;k<=N;){var Z,D=k+N>>>1,H=d[D];if(C&&(Z=_.equals(H)?H:z(D,-1)||z(D,1)))return _._overlap&&(Z._overlap=Z._intersection._overlap=!0),Z;var $=_.getPath(),R=H.getPath();($!==R?$._id-R._id:_.getIndex()+_.getTime()-(H.getIndex()+H.getTime()))<0?N=D-1:k=D+1}return d.splice(k,0,_),_}return{statics:{insert:l,expand:function(d){for(var _=d.slice(),C=d.length-1;C>=0;C--)l(_,d[C]._intersection,!1);return _}}}}),xt=bt.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(l){var d,_,C;if(le.isPlainObject(l)?(_=l.segments,d=l.pathData):Array.isArray(l)?_=l:"string"==typeof l&&(d=l),_){var S=_[0];C=S&&Array.isArray(S[0])}else d&&(C=(d.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(d));return new(C?Gn:Jt)(l)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(l){this.isClockwise()!=(l=!!l)&&this.reverse()},setPathData:function(l){var _,S,k,d=l&&l.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),C=!1,N=new Ve,z=new Ve;function D(de,Ee){var ke=+_[de];return C&&(ke+=N[Ee]),ke}function H(de){return new Ve(D(de,"x"),D(de+1,"y"))}this.clear();for(var Z=0,$=d&&d.length;Z<$;Z++){var R=d[Z],Y=R[0],he=Y.toLowerCase(),me=(_=R.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&_.length;switch(C=Y===he,"z"===S&&!/[mz]/.test(he)&&this.moveTo(N),he){case"m":case"l":for(var ve="m"===he,ge=0;ge<me;ge+=2)this[ve?"moveTo":"lineTo"](N=H(ge)),ve&&(z=N,ve=!1);k=N;break;case"h":case"v":var pe="h"===he?"x":"y";for(N=N.clone(),ge=0;ge<me;ge++)N[pe]=D(ge,pe),this.lineTo(N);k=N;break;case"c":for(ge=0;ge<me;ge+=6)this.cubicCurveTo(H(ge),k=H(ge+2),N=H(ge+4));break;case"s":for(ge=0;ge<me;ge+=4)this.cubicCurveTo(/[cs]/.test(S)?N.multiply(2).subtract(k):N,k=H(ge),N=H(ge+2)),S=he;break;case"q":for(ge=0;ge<me;ge+=4)this.quadraticCurveTo(k=H(ge),N=H(ge+2));break;case"t":for(ge=0;ge<me;ge+=2)this.quadraticCurveTo(k=/[qt]/.test(S)?N.multiply(2).subtract(k):N,N=H(ge)),S=he;break;case"a":for(ge=0;ge<me;ge+=7)this.arcTo(N=H(ge+5),new Se(+_[ge],+_[ge+1]),+_[ge+2],+_[ge+4],+_[ge+3]);break;case"z":this.closePath(1e-12),N=z}S=he}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(l){var d=l.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(l):{};return d.onPath||!!("evenodd"===this.getFillRule()?1&d.windingL||1&d.windingR:d.winding)},getIntersections:function(l,d,_,C){var S=this===l||!l,k=this._matrix._orNullIfIdentity(),N=S?k:(_||l._matrix)._orNullIfIdentity();return S||this.getBounds(k).intersects(l.getBounds(N),1e-12)?Sn.getIntersections(this.getCurves(),!S&&l.getCurves(),d,k,N,C):[]},getCrossings:function(l){return this.getIntersections(l,function(d){return d.isCrossing()})},getNearestLocation:function(){for(var l=Ve.read(arguments),d=this.getCurves(),_=1/0,C=null,S=0,k=d.length;S<k;S++){var N=d[S].getNearestLocation(l);N._distance<_&&(_=N._distance,C=N)}return C},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()},interpolate:function(l,d,_){var C=!this._children,S=C?"_segments":"_children",k=l[S],N=d[S],z=this[S];if(!k||!N||k.length!==N.length)throw new Error("Invalid operands in interpolate() call: "+l+", "+d);var D=z.length,H=N.length;if(D<H)for(var Z=C?Qn:Jt,$=D;$<H;$++)this.add(new Z);else D>H&&this[C?"removeSegments":"removeChildren"](H,D);for($=0;$<H;$++)z[$].interpolate(k[$],N[$],_);C&&(this.setClosed(l._closed),this._changed(9))},compare:function(l){var d=!1;if(l){var _=this._children||[this],C=l._children?l._children.slice():[l],S=_.length,k=C.length,N=[],z=0;d=!0;for(var D=_e.findItemBoundsCollisions(_,C,Re.GEOMETRIC_EPSILON),H=S-1;H>=0&&d;H--){var Z=_[H];d=!1;var $=D[H];if($)for(var R=$.length-1;R>=0&&!d;R--)Z.compare(C[$[R]])&&(N[$[R]]||(N[$[R]]=!0,z++),d=!0)}d=d&&z===k}return d}}),Jt=xt.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(d){this._closed=!1,this._segments=[],this._version=0;var _=arguments,C=Array.isArray(d)?"object"==typeof d[0]?d:_:!d||d.size!==V||d.x===V&&d.point===V?null:_;C&&C.length>0?this.setSegments(C):(this._curves=V,this._segmentSelection=0,!C&&"string"==typeof d&&(this.setPathData(d),d=null)),this._initialize(!C&&d)},_equals:function(l){return this._closed===l._closed&&le.equals(this._segments,l._segments)},copyContent:function(l){this.setSegments(l._segments),this._closed=l._closed},_changed:function l(d){if(l.base.call(this,d),8&d){if(this._length=this._area=V,32&d)this._version++;else if(this._curves)for(var _=0,C=this._curves.length;_<C;_++)this._curves[_]._changed()}else 64&d&&(this._bounds=V)},getStyle:function(){var l=this._parent;return(l instanceof Gn?l:this)._style},getSegments:function(){return this._segments},setSegments:function(l){var d=this.isFullySelected(),_=l&&l.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=V,_){var C=l[_-1];"boolean"==typeof C&&(this.setClosed(C),_--),this._add(Qn.readList(l,0,{},_))}d&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var l=this._curves,d=this._segments;if(!l){var _=this._countCurves();l=this._curves=new Array(_);for(var C=0;C<_;C++)l[C]=new Sn(this,d[C],d[C+1]||d[0])}return l},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var l=this.getCurves();return l[l.length-1]},isClosed:function(){return this._closed},setClosed:function(l){if(this._closed!=(l=!!l)){if(this._closed=l,this._curves){var d=this._curves.length=this._countCurves();l&&(this._curves[d-1]=new Sn(this,this._segments[d-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(l,d){var z,D,H,Z,$,R,Y,he,_=this._segments,C=_.length,S=new Q(d),k=new Array(6),N=!0,me=[];function ve(pe,de){if(pe._transformCoordinates(l,k),z=k[0],D=k[1],N)me.push("M"+S.pair(z,D)),N=!1;else if(R=k[3],($=k[2])===z&&R===D&&Y===H&&he===Z){if(!de){var Ee=z-H,ke=D-Z;me.push(0===Ee?"v"+S.number(ke):0===ke?"h"+S.number(Ee):"l"+S.pair(Ee,ke))}}else me.push("c"+S.pair(Y-H,he-Z)+" "+S.pair($-H,R-Z)+" "+S.pair(z-H,D-Z));H=z,Z=D,Y=k[4],he=k[5]}if(!C)return"";for(var ge=0;ge<C;ge++)ve(_[ge]);return this._closed&&C>0&&(ve(_[0],!0),me.push("z")),me.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(l){for(var d=this._segments,_=new Array(6),C=0,S=d.length;C<S;C++)d[C]._transformCoordinates(l,_,!0);return!0},_add:function(l,N){for(var _=this._segments,C=this._curves,S=l.length,k=null==N,z=(N=k?_.length:N,0);z<S;z++){var D=l[z];D._path&&(D=l[z]=D.clone()),D._path=this,D._index=N+z,D._selection&&this._updateSelection(D,0,D._selection)}if(k)le.push(_,l);else{_.splice.apply(_,[N,0].concat(l)),z=N+S;for(var H=_.length;z<H;z++)_[z]._index=z}if(C){var Z=this._countCurves(),$=N>0&&N+S-1===Z?N-1:N,R=$,Y=Math.min($+S,Z);for(l._curves&&(C.splice.apply(C,[$,0].concat(l._curves)),R+=l._curves.length),z=R;z<Y;z++)C.splice(z,0,new Sn(this,null,null));this._adjustCurves($,Y)}return this._changed(41),l},_adjustCurves:function(l,d){for(var S,_=this._segments,C=this._curves,k=l;k<d;k++)(S=C[k])._path=this,S._segment1=_[k],S._segment2=_[k+1]||_[0],S._changed();(S=C[this._closed&&!l?_.length-1:l-1])&&(S._segment2=_[l]||_[0],S._changed()),(S=C[d])&&(S._segment1=_[d],S._changed())},_countCurves:function(){var l=this._segments.length;return!this._closed&&l>0?l-1:l},add:function(l){var d=arguments;return d.length>1&&"number"!=typeof l?this._add(Qn.readList(d)):this._add([Qn.read(d)])[0]},insert:function(l,d){var _=arguments;return _.length>2&&"number"!=typeof d?this._add(Qn.readList(_,1),l):this._add([Qn.read(_,1)],l)[0]},addSegment:function(){return this._add([Qn.read(arguments)])[0]},insertSegment:function(l){return this._add([Qn.read(arguments,1)],l)[0]},addSegments:function(l){return this._add(Qn.readList(l))},insertSegments:function(l,d){return this._add(Qn.readList(d),l)},removeSegment:function(l){return this.removeSegments(l,l+1)[0]||null},removeSegments:function(l,d,_){l=l||0,d=le.pick(d,this._segments.length);var C=this._segments,S=this._curves,k=C.length,N=C.splice(l,d-l),z=N.length;if(!z)return N;for(var D=0;D<z;D++){var H=N[D];H._selection&&this._updateSelection(H,H._selection,0),H._index=H._path=null}D=l;for(var Z=C.length;D<Z;D++)C[D]._index=D;if(S){var $=l>0&&d===k+(this._closed?1:0)?l-1:l;for(D=(S=S.splice($,z)).length-1;D>=0;D--)S[D]._path=null;_&&(N._curves=S.slice(1)),this._adjustCurves($,$)}return this._changed(41),N},clear:"#removeSegments",hasHandles:function(){for(var l=this._segments,d=0,_=l.length;d<_;d++)if(l[d].hasHandles())return!0;return!1},clearHandles:function(){for(var l=this._segments,d=0,_=l.length;d<_;d++)l[d].clearHandles()},getLength:function(){if(null==this._length){for(var l=this.getCurves(),d=0,_=0,C=l.length;_<C;_++)d+=l[_].getLength();this._length=d}return this._length},getArea:function(){var l=this._area;if(null==l){var d=this._segments,_=this._closed;l=0;for(var C=0,S=d.length;C<S;C++){var k=C+1===S;l+=Sn.getArea(Sn.getValues(d[C],d[k?0:C+1],null,k&&!_))}this._area=l}return l},isFullySelected:function(){var l=this._segments.length;return this.isSelected()&&l>0&&this._segmentSelection===7*l},setFullySelected:function(l){l&&this._selectSegments(!0),this.setSelected(l)},setSelection:function l(d){1&d||this._selectSegments(!1),l.base.call(this,d)},_selectSegments:function(l){var d=this._segments,_=d.length,C=l?7:0;this._segmentSelection=C*_;for(var S=0;S<_;S++)d[S]._selection=C},_updateSelection:function(l,d,_){l._selection=_,(this._segmentSelection+=_-d)>0&&this.setSelected(!0)},divideAt:function(l){var _,d=this.getLocationAt(l);return d&&(_=d.getCurve().divideAt(d.getCurveOffset()))?_._segment1:null},splitAt:function(l){var d=this.getLocationAt(l),_=d&&d.index,C=d&&d.time;C>.99999999&&(_++,C=0);var N=this.getCurves();if(_>=0&&_<N.length){C>=1e-8&&N[_++].divideAtTime(C);var D,z=this.removeSegments(_,this._segments.length,!0);return this._closed?(this.setClosed(!1),D=this):((D=new Jt(bt.NO_INSERT)).insertAbove(this),D.copyAttributes(this)),D._add(z,0),this.addSegment(z[0]),D}return null},split:function(l,d){var _,C=d===V?l:(_=this.getCurves()[l])&&_.getLocationAtTime(d);return null!=C?this.splitAt(C):null},join:function(l,d){var _=d||0;if(l&&l!==this){var C=l._segments,S=this.getLastSegment(),k=l.getLastSegment();if(!k)return this;S&&S._point.isClose(k._point,_)&&l.reverse();var N=l.getFirstSegment();if(S&&S._point.isClose(N._point,_))S.setHandleOut(N._handleOut),this._add(C.slice(1));else{var z=this.getFirstSegment();z&&z._point.isClose(N._point,_)&&l.reverse(),k=l.getLastSegment(),z&&z._point.isClose(k._point,_)?(z.setHandleIn(k._handleIn),this._add(C.slice(0,C.length-1),0)):this._add(C.slice())}l._closed&&this._add([C[0]]),l.remove()}var D=this.getFirstSegment(),H=this.getLastSegment();return D!==H&&D._point.isClose(H._point,_)&&(D.setHandleIn(H._handleIn),H.remove(),this.setClosed(!0)),this},reduce:function(l){for(var d=this.getCurves(),_=l&&l.simplify,C=_?1e-7:0,S=d.length-1;S>=0;S--){var k=d[S];!k.hasHandles()&&(!k.hasLength(C)||_&&k.isCollinear(k.getNext()))&&k.remove()}return this},reverse:function(){this._segments.reverse();for(var l=0,d=this._segments.length;l<d;l++){var _=this._segments[l],C=_._handleIn;_._handleIn=_._handleOut,_._handleOut=C,_._index=l}this._curves=null,this._changed(9)},flatten:function(l){for(var _=new ri(this,l||.25,256,!0).parts,C=_.length,S=[],k=0;k<C;k++)S.push(new Qn(_[k].curve.slice(0,2)));!this._closed&&C>0&&S.push(new Qn(_[C-1].curve.slice(6))),this.setSegments(S)},simplify:function(l){var d=new ni(this).fit(l||2.5);return d&&this.setSegments(d),!!d},smooth:function(l){var d=this,_=l||{},C=_.type||"asymmetric",S=this._segments,k=S.length,N=this._closed;function z(ii,Ci){var yi=ii&&ii.index;if(null!=yi){var Ei=ii.path;if(Ei&&Ei!==d)throw new Error(ii._class+" "+yi+" of "+Ei+" is not part of "+d);Ci&&ii instanceof Sn&&yi++}else yi="number"==typeof ii?ii:Ci;return Math.min(yi<0&&N?yi%k:yi<0?yi+k:yi,k-1)}var D=N&&_.from===V&&_.to===V,H=z(_.from,0),Z=z(_.to,k-1);if(H>Z)if(N)H-=k;else{var $=H;H=Z,Z=$}if(/^(?:asymmetric|continuous)$/.test(C)){var R="asymmetric"===C,Y=Math.min,he=Z-H+1,me=he-1,ve=D?Y(he,4):1,ge=ve,pe=ve,de=[];if(N||(ge=Y(1,H),pe=Y(1,k-Z-1)),(me+=ge+pe)<=1)return;for(var Ee=0,ke=H-ge;Ee<=me;Ee++,ke++)de[Ee]=S[(ke<0?ke+k:ke)%k]._point;var Xe=de[0]._x+2*de[1]._x,je=de[0]._y+2*de[1]._y,nt=2,pt=me-1,gt=[Xe],Wt=[je],Lt=[nt],Bt=[],qt=[];for(Ee=1;Ee<me;Ee++){var Pe=Ee<pt,we=Pe?4:R?3:8,Ue=Pe?2:R?0:1,ct=(Pe||R?1:2)/nt;nt=Lt[Ee]=(Pe?4:R?2:7)-ct,Xe=gt[Ee]=we*de[Ee]._x+Ue*de[Ee+1]._x-ct*Xe,je=Wt[Ee]=we*de[Ee]._y+Ue*de[Ee+1]._y-ct*je}for(Bt[pt]=gt[pt]/Lt[pt],qt[pt]=Wt[pt]/Lt[pt],Ee=me-2;Ee>=0;Ee--)Bt[Ee]=(gt[Ee]-Bt[Ee+1])/Lt[Ee],qt[Ee]=(Wt[Ee]-qt[Ee+1])/Lt[Ee];Bt[me]=(3*de[me]._x-Bt[pt])/2,qt[me]=(3*de[me]._y-qt[pt])/2,Ee=ge;var Dt=me-pe;for(ke=H;Ee<=Dt;Ee++,ke++){var wt=S[ke<0?ke+k:ke],nn=wt._point,On=Bt[Ee]-nn._x,jn=qt[Ee]-nn._y;(D||Ee<Dt)&&wt.setHandleOut(On,jn),(D||Ee>ge)&&wt.setHandleIn(-On,-jn)}}else for(Ee=H;Ee<=Z;Ee++)S[Ee<0?Ee+k:Ee].smooth(_,!D&&Ee===H,!D&&Ee===Z)},toShape:function(l){if(!this._closed)return null;var _,C,S,k,d=this._segments;function N(R,Y){var he=d[R],me=he.getNext(),ve=d[Y],ge=ve.getNext();return he._handleOut.isZero()&&me._handleIn.isZero()&&ve._handleOut.isZero()&&ge._handleIn.isZero()&&me._point.subtract(he._point).isCollinear(ge._point.subtract(ve._point))}function D(R){var Y=d[R],he=Y.getNext(),me=Y._handleOut,ve=he._handleIn,ge=.5522847498307936;if(me.isOrthogonal(ve)){var pe=Y._point,de=he._point,Ee=new dt(pe,me,!0).intersect(new dt(de,ve,!0),!0);return Ee&&Re.isZero(me.getLength()/Ee.subtract(pe).getLength()-ge)&&Re.isZero(ve.getLength()/Ee.subtract(de).getLength()-ge)}return!1}function H(R,Y){return d[R]._point.getDistance(d[Y]._point)}if(!this.hasHandles()&&4===d.length&&N(0,2)&&N(1,3)&&function z(R){var Y=d[R],he=Y.getPrevious(),me=Y.getNext();return he._handleOut.isZero()&&Y._handleIn.isZero()&&Y._handleOut.isZero()&&me._handleIn.isZero()&&Y._point.subtract(he._point).isOrthogonal(me._point.subtract(Y._point))}(1)?(_=on.Rectangle,C=new Se(H(0,3),H(0,1)),k=d[1]._point.add(d[2]._point).divide(2)):8===d.length&&D(0)&&D(2)&&D(4)&&D(6)&&N(1,5)&&N(3,7)?(_=on.Rectangle,S=(C=new Se(H(1,6),H(0,3))).subtract(new Se(H(0,7),H(1,2))).divide(2),k=d[3]._point.add(d[4]._point).divide(2)):4===d.length&&D(0)&&D(1)&&D(2)&&D(3)&&(Re.isZero(H(0,2)-H(1,3))?(_=on.Circle,S=H(0,2)/2):(_=on.Ellipse,S=new Se(H(2,0)/2,H(3,1)/2)),k=d[1]._point),_){var Z=this.getPosition(!0),$=new _({center:Z,size:C,radius:S,insert:!1});return $.copyAttributes(this,!0),$._matrix.prepend(this._matrix),$.rotate(k.subtract(Z).getAngle()+90),(l===V||l)&&$.insertAbove(this),$}return null},toPath:"#clone",compare:function l(d){if(!d||d instanceof Gn)return l.base.call(this,d);var _=this.getCurves(),C=d.getCurves(),S=_.length,k=C.length;if(!S||!k)return S==k;for(var H,$,N=_[0].getValues(),z=[],D=0,Z=0,R=0;R<k;R++){var ve=C[R].getValues();if(z.push(ve),Y=Sn.getOverlaps(N,ve)){H=!R&&Y[0][0]>0?k-1:R,$=Y[0][1];break}}var ge,he=Math.abs;for(ve=z[H];N&&ve;){var Y;if((Y=Sn.getOverlaps(N,ve))&&he(Y[0][0]-Z)<1e-8){1===(Z=Y[1][0])&&(N=++D<S?_[D].getValues():null,Z=0);var de=Y[0][1];if(he(de-$)<1e-8){if(ge||(ge=[H,de]),1===($=Y[1][1])&&(++H>=k&&(H=0),ve=z[H]||C[H].getValues(),$=0),!N)return ge[0]===H&&ge[1]===$;continue}}break}return!1},_hitTestSelf:function(l,d,_,C){var $,R,Y,he,me,ve,S=this,k=this.getStyle(),N=this._segments,z=N.length,D=this._closed,H=d._tolerancePadding,Z=H,ge=d.stroke&&k.hasStroke(),pe=d.fill&&k.hasFill(),de=d.curves,Ee=ge?k.getStrokeWidth()/2:pe&&d.tolerance>0||de?0:null;function ke(Bt,qt){return l.subtract(Bt).divide(qt).length<=1}function Xe(Bt,qt,Pe){if(!d.selected||qt.isSelected()){var We=Bt._point;if(qt!==We&&(qt=qt.add(We)),ke(qt,Z))return new Ht(Pe,S,{segment:Bt,point:qt})}}function je(Bt,qt){return(qt||d.segments)&&Xe(Bt,Bt._point,"segment")||!qt&&d.handles&&(Xe(Bt,Bt._handleIn,"handle-in")||Xe(Bt,Bt._handleOut,"handle-out"))}function nt(Bt){he.add(Bt)}function pt(Bt){var Pe,qt=D||Bt._index>0&&Bt._index<z-1;return"round"===(qt?$:R)?ke(Bt._point,Z):(he=new Jt({internal:!0,closed:!0}),qt?Bt.isSmooth()||Jt._addBevelJoin(Bt,$,Ee,Y,null,C,nt,!0):"square"===R&&Jt._addSquareCap(Bt,R,Ee,null,C,nt,!0),he.isEmpty()?void 0:he.contains(l)||(Pe=he.getNearestLocation(l))&&ke(Pe.getPoint(),H))}if(null!==Ee&&(Ee>0?($=k.getStrokeJoin(),R=k.getStrokeCap(),Y=k.getMiterLimit(),Z=Z.add(Jt._getStrokePadding(Ee,C))):$=R="round"),!d.ends||d.segments||D){if(d.segments||d.handles)for(var gt=0;gt<z;gt++)if(ve=je(N[gt]))return ve}else if(ve=je(N[0],!0)||je(N[z-1],!0))return ve;if(null!==Ee){if(me=this.getNearestLocation(l)){var Wt=me.getTime();0===Wt||1===Wt&&z>1?pt(me.getSegment())||(me=null):ke(me.getPoint(),Z)||(me=null)}if(!me&&"miter"===$&&z>1)for(gt=0;gt<z;gt++){var Lt=N[gt];if(l.getDistance(Lt._point)<=Y*Ee&&pt(Lt)){me=Lt.getLocation();break}}}return!me&&pe&&this._contains(l)||me&&!ge&&!de?new Ht("fill",this):me?new Ht(ge?"stroke":"curve",this,{location:me,point:me.getPoint()}):null}},le.each(Sn._evaluateMethods,function(l){this[l+"At"]=function(d){var _=this.getLocationAt(d);return _&&_[l]()}},{beans:!1,getLocationOf:function(){for(var l=Ve.read(arguments),d=this.getCurves(),_=0,C=d.length;_<C;_++){var S=d[_].getLocationOf(l);if(S)return S}return null},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getLocationAt:function(l){if("number"==typeof l){for(var d=this.getCurves(),_=0,C=0,S=d.length;C<S;C++){var k=_,N=d[C];if((_+=N.getLength())>l)return N.getLocationAt(l-k)}if(d.length>0&&l<=this.getLength())return new Pn(d[d.length-1],1)}else if(l&&l.getPath&&l.getPath()===this)return l;return null},getOffsetsWithTangent:function(){var l=Ve.read(arguments);if(l.isZero())return[];for(var d=[],_=0,C=this.getCurves(),S=0,k=C.length;S<k;S++){for(var N=C[S],z=N.getTimesWithTangent(l),D=0,H=z.length;D<H;D++){var Z=_+N.getOffsetAtTime(z[D]);d.indexOf(Z)<0&&d.push(Z)}_+=N.length}return d}}),new function(){function d(_,C,S){var H,Z,$,R,Y,he,me,ve,k=C._segments,N=k.length,z=new Array(6),D=!0;function ge(de){if(S)de._transformCoordinates(S,z),H=z[0],Z=z[1];else{var Ee=de._point;H=Ee._x,Z=Ee._y}var ke;D?(_.moveTo(H,Z),D=!1):(S?(Y=z[2],he=z[3]):(Y=H+(ke=de._handleIn)._x,he=Z+ke._y),Y===H&&he===Z&&me===$&&ve===R?_.lineTo(H,Z):_.bezierCurveTo(me,ve,Y,he,H,Z)),$=H,R=Z,S?(me=z[4],ve=z[5]):(me=$+(ke=de._handleOut)._x,ve=R+ke._y)}for(var pe=0;pe<N;pe++)ge(k[pe]);C._closed&&N>0&&ge(k[0])}return{_draw:function(_,C,S,k){var N=C.dontStart,z=C.dontFinish||C.clip,D=this.getStyle(),H=D.hasFill(),Z=D.hasStroke(),$=D.getDashArray(),R=!y.support.nativeDash&&Z&&$&&$.length;function Y(de){return $[(de%R+R)%R]}if(N||_.beginPath(),(H||Z&&!R||z)&&(d(_,this,k),this._closed&&_.closePath()),!z&&(H||Z)&&(this._setStyles(_,C,S),H&&(_.fill(D.getFillRule()),_.shadowColor="rgba(0,0,0,0)"),Z)){if(R){N||_.beginPath();for(var ge,he=new ri(this,.25,32,!1,k),me=he.length,ve=-D.getDashOffset(),pe=0;ve>0;)ve-=Y(pe--)+Y(pe--);for(;ve<me;)ge=ve+Y(pe++),(ve>0||ge>0)&&he.drawPart(_,Math.max(ve,0),Math.max(ge,0)),ve=ge+Y(pe++)}_.stroke()}},_drawSelected:function(_,C){_.beginPath(),d(_,this,C),_.stroke(),function l(_,C,S,k){if(!(k<=0))for(var Z,$,N=k/2,z=k-2,D=N-1,H=new Array(6),Y=0,he=C.length;Y<he;Y++){var me=C[Y],ve=me._selection;if(me._transformCoordinates(S,H),Z=H[0],$=H[1],2&ve&&R(2),4&ve&&R(4),_.fillRect(Z-N,$-N,k,k),z>0&&!(1&ve)){var ge=_.fillStyle;_.fillStyle="#ffffff",_.fillRect(Z-D,$-D,z,z),_.fillStyle=ge}}function R(pe){var de=H[pe],Ee=H[pe+1];(Z!=de||$!=Ee)&&(_.beginPath(),_.moveTo(Z,$),_.lineTo(de,Ee),_.stroke(),_.beginPath(),_.arc(de,Ee,N,0,2*Math.PI,!0),_.fill())}}(_,this._segments,C,y.settings.handleSize)}}},new function(){function l(d){var _=d._segments;if(!_.length)throw new Error("Use a moveTo() command first");return _[_.length-1]}return{moveTo:function(){var d=this._segments;1===d.length&&this.removeSegment(0),d.length||this._add([new Qn(Ve.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Qn(Ve.read(arguments))])},cubicCurveTo:function(){var d=arguments,_=Ve.read(d),C=Ve.read(d),S=Ve.read(d),k=l(this);k.setHandleOut(_.subtract(k._point)),this._add([new Qn(S,C.subtract(S))])},quadraticCurveTo:function(){var d=arguments,_=Ve.read(d),C=Ve.read(d),S=l(this)._point;this.cubicCurveTo(_.add(S.subtract(_).multiply(1/3)),_.add(C.subtract(_).multiply(1/3)),C)},curveTo:function(){var d=arguments,_=Ve.read(d),C=Ve.read(d),S=le.pick(le.read(d),.5),k=1-S,N=l(this)._point,z=_.subtract(N.multiply(k*k)).subtract(C.multiply(S*S)).divide(2*S*k);if(z.isNaN())throw new Error("Cannot put a curve through points with parameter = "+S);this.quadraticCurveTo(z,C)},arcTo:function(){var Z,$,R,Y,d=arguments,_=Math.abs,C=Math.sqrt,S=l(this),k=S._point,N=Ve.read(d),D=le.peek(d);if("boolean"==typeof(H=le.pick(D,!0)))var z=(he=k.add(N).divide(2)).add(he.subtract(k).rotate(H?-90:90));else if(le.remain(d)<=2)z=N,N=Ve.read(d);else if(!k.equals(N)){var me=Se.read(d),ve=Re.isZero;if(ve(me.width)||ve(me.height))return this.lineTo(N);var ge=le.read(d),H=!!le.read(d),pe=!!le.read(d),he=k.add(N).divide(2),Ee=(de=k.subtract(he).rotate(-ge)).x,ke=de.y,Xe=_(me.width),je=_(me.height),nt=Xe*Xe,pt=je*je,gt=Ee*Ee,Wt=ke*ke,Lt=C(gt/nt+Wt/pt);if(Lt>1&&(nt=(Xe*=Lt)*Xe,pt=(je*=Lt)*je),_(Lt=(nt*pt-nt*Wt-pt*gt)/(nt*Wt+pt*gt))<1e-12&&(Lt=0),Lt<0)throw new Error("Cannot create an arc with the given arguments");Z=new Ve(Xe*ke/je,-je*Ee/Xe).multiply((pe===H?-1:1)*C(Lt)).rotate(ge).add(he),$=(R=(Y=(new ze).translate(Z).rotate(ge).scale(Xe,je))._inverseTransform(k)).getDirectedAngle(Y._inverseTransform(N)),!H&&$>0?$-=360:H&&$<0&&($+=360)}if(z){var Bt=new dt(k.add(z).divide(2),z.subtract(k).rotate(90),!0),qt=new dt(z.add(N).divide(2),N.subtract(z).rotate(90),!0),Pe=new dt(k,N),We=Pe.getSide(z);if(!(Z=Bt.intersect(qt,!0))){if(!We)return this.lineTo(N);throw new Error("Cannot create an arc with the given arguments")}$=(R=k.subtract(Z)).getDirectedAngle(N.subtract(Z));var Ye=Pe.getSide(Z,!0);0===Ye?$=We*_($):We===Ye&&($+=$<0?360:-360)}if($){for(var we=1e-5,Ue=_($),ct=Ue>=360?4:Math.ceil((Ue-we)/90),Dt=$/ct,wt=Dt*Math.PI/360,nn=4/3*Math.sin(wt)/(1+Math.cos(wt)),On=[],jn=0;jn<=ct;jn++){var de=N,ii=null;if(jn<ct&&(ii=R.rotate(90).multiply(nn),Y?(de=Y._transformPoint(R),ii=Y._transformPoint(R.add(ii)).subtract(de)):de=Z.add(R)),jn){var Ci=R.rotate(-90).multiply(nn);Y&&(Ci=Y._transformPoint(R.add(Ci)).subtract(de)),On.push(new Qn(de,Ci,ii))}else S.setHandleOut(ii);R=R.rotate(Dt)}this._add(On)}},lineBy:function(){var d=Ve.read(arguments),_=l(this)._point;this.lineTo(_.add(d))},curveBy:function(){var d=arguments,_=Ve.read(d),C=Ve.read(d),S=le.read(d),k=l(this)._point;this.curveTo(k.add(_),k.add(C),S)},cubicCurveBy:function(){var d=arguments,_=Ve.read(d),C=Ve.read(d),S=Ve.read(d),k=l(this)._point;this.cubicCurveTo(k.add(_),k.add(C),k.add(S))},quadraticCurveBy:function(){var d=arguments,_=Ve.read(d),C=Ve.read(d),S=l(this)._point;this.quadraticCurveTo(S.add(_),S.add(C))},arcBy:function(){var d=arguments,_=l(this)._point,C=_.add(Ve.read(d)),S=le.pick(le.peek(d),!0);this.arcTo(C,"boolean"==typeof S?S:_.add(Ve.read(d)))},closePath:function(d){this.setClosed(!0),this.join(this,d)}}},{_getBounds:function(l,d){return Jt[d.handle?"getHandleBounds":d.stroke?"getStrokeBounds":"getBounds"](this._segments,this._closed,this,l,d)},statics:{getBounds:function(l,d,_,C,S,k){var N=l[0];if(!N)return new ee;var z=new Array(6),D=N._transformCoordinates(C,new Array(6)),H=D.slice(0,2),Z=H.slice(),$=new Array(2);function R(me){me._transformCoordinates(C,z);for(var ve=0;ve<2;ve++)Sn._addBounds(D[ve],D[ve+4],z[ve+2],z[ve],ve,k?k[ve]:0,H,Z,$);var ge=D;D=z,z=ge}for(var Y=1,he=l.length;Y<he;Y++)R(l[Y]);return d&&R(N),new ee(H[0],H[1],Z[0]-H[0],Z[1]-H[1])},getStrokeBounds:function(l,d,_,C,S){var k=_.getStyle(),N=k.hasStroke(),z=k.getStrokeWidth(),D=N&&_._getStrokeMatrix(C,S),H=N&&Jt._getStrokePadding(z,D),Z=Jt.getBounds(l,d,_,C,S,H);if(!N)return Z;var $=z/2,R=k.getStrokeJoin(),Y=k.getStrokeCap(),he=k.getMiterLimit(),me=new ee(new Se(H));function ve(Xe){Z=Z.include(Xe)}function ge(Xe){Z=Z.unite(me.setCenter(Xe._point.transform(C)))}function pe(Xe,je){"round"===je||Xe.isSmooth()?ge(Xe):Jt._addBevelJoin(Xe,je,$,he,C,D,ve)}function de(Xe,je){"round"===je?ge(Xe):Jt._addSquareCap(Xe,je,$,C,D,ve)}var Ee=l.length-(d?0:1);if(Ee>0){for(var ke=1;ke<Ee;ke++)pe(l[ke],R);d?pe(l[0],R):(de(l[0],Y),de(l[l.length-1],Y))}return Z},_getStrokePadding:function(l,d){if(!d)return[l,l];var _=new Ve(l,0).transform(d),C=new Ve(0,l).transform(d),S=_.getAngleInRadians(),k=_.getLength(),N=C.getLength(),z=Math.sin(S),D=Math.cos(S),H=Math.tan(S),Z=Math.atan2(N*H,k),$=Math.atan2(N,H*k);return[Math.abs(k*Math.cos(Z)*D+N*Math.sin(Z)*z),Math.abs(N*Math.sin($)*D+k*Math.cos($)*z)]},_addBevelJoin:function(l,d,_,C,S,k,N,z){var D=l.getCurve(),H=D.getPrevious(),Z=D.getPoint1().transform(S),$=H.getNormalAtTime(1).multiply(_).transform(k),R=D.getNormalAtTime(0).multiply(_).transform(k),Y=$.getDirectedAngle(R);if((Y<0||Y>=180)&&($=$.negate(),R=R.negate()),z&&N(Z),N(Z.add($)),"miter"===d){var he=new dt(Z.add($),new Ve(-$.y,$.x),!0).intersect(new dt(Z.add(R),new Ve(-R.y,R.x),!0),!0);he&&Z.getDistance(he)<=C*_&&N(he)}N(Z.add(R))},_addSquareCap:function(l,d,_,C,S,k,N){var z=l._point.transform(C),D=l.getLocation(),H=D.getNormal().multiply(0===D.getTime()?_:-_).transform(S);"square"===d&&(N&&(k(z.subtract(H)),k(z.add(H))),z=z.add(H.rotate(-90))),k(z.add(H)),k(z.subtract(H))},getHandleBounds:function(l,d,_,C,S){var z,D,k=_.getStyle();if(S.stroke&&k.hasStroke()){var H=_._getStrokeMatrix(C,S),Z=k.getStrokeWidth()/2,$=Z;"miter"===k.getStrokeJoin()&&($=Z*k.getMiterLimit()),"square"===k.getStrokeCap()&&($=Math.max($,Z*Math.SQRT2)),z=Jt._getStrokePadding(Z,H),D=Jt._getStrokePadding($,H)}for(var R=new Array(6),Y=1/0,he=-Y,me=Y,ve=he,ge=0,pe=l.length;ge<pe;ge++){l[ge]._transformCoordinates(C,R);for(var Ee=0;Ee<6;Ee+=2){var ke=Ee?z:D,Xe=ke?ke[0]:0,je=ke?ke[1]:0,nt=R[Ee],pt=R[Ee+1],gt=nt-Xe,Wt=nt+Xe,Lt=pt-je,Bt=pt+je;gt<Y&&(Y=gt),Wt>he&&(he=Wt),Lt<me&&(me=Lt),Bt>ve&&(ve=Bt)}}return new ee(Y,me,he-Y,ve-me)}}});Jt.inject({statics:new function(){var l=.5522847498307936,d=[new Qn([-1,0],[0,l],[0,-l]),new Qn([0,-1],[-l,0],[l,0]),new Qn([1,0],[0,-l],[0,l]),new Qn([0,1],[l,0],[-l,0])];function _(S,k,N){var z=le.getNamed(N),D=new Jt(z&&(1==z.insert?bt.INSERT:0==z.insert?bt.NO_INSERT:null));return D._add(S),D._closed=k,D.set(z,bt.INSERT)}function C(S,k,N){for(var z=new Array(4),D=0;D<4;D++){var H=d[D];z[D]=new Qn(H._point.multiply(k).add(S),H._handleIn.multiply(k),H._handleOut.multiply(k))}return _(z,!0,N)}return{Line:function(){var S=arguments;return _([new Qn(Ve.readNamed(S,"from")),new Qn(Ve.readNamed(S,"to"))],!1,S)},Circle:function(){var S=arguments,k=Ve.readNamed(S,"center"),N=le.readNamed(S,"radius");return C(k,new Se(N),S)},Rectangle:function(){var $,S=arguments,k=ee.readNamed(S,"rectangle"),N=Se.readNamed(S,"radius",0,{readNull:!0}),z=k.getBottomLeft(!0),D=k.getTopLeft(!0),H=k.getTopRight(!0),Z=k.getBottomRight(!0);if(!N||N.isZero())$=[new Qn(z),new Qn(D),new Qn(H),new Qn(Z)];else{var R=(N=Se.min(N,k.getSize(!0).divide(2))).width,Y=N.height,he=R*l,me=Y*l;$=[new Qn(z.add(R,0),null,[-he,0]),new Qn(z.subtract(0,Y),[0,me]),new Qn(D.add(0,Y),null,[0,-me]),new Qn(D.add(R,0),[-he,0],null),new Qn(H.subtract(R,0),null,[he,0]),new Qn(H.add(0,Y),[0,-me],null),new Qn(Z.subtract(0,Y),null,[0,me]),new Qn(Z.subtract(R,0),[he,0])]}return _($,!0,S)},RoundRectangle:"#Rectangle",Ellipse:function(){var S=arguments,k=on._readEllipse(S);return C(k.center,k.radius,S)},Oval:"#Ellipse",Arc:function(){var S=arguments,k=Ve.readNamed(S,"from"),N=Ve.readNamed(S,"through"),z=Ve.readNamed(S,"to"),D=le.getNamed(S),H=new Jt(D&&0==D.insert&&bt.NO_INSERT);return H.moveTo(k),H.arcTo(N,z),H.set(D)},RegularPolygon:function(){for(var S=arguments,k=Ve.readNamed(S,"center"),N=le.readNamed(S,"sides"),z=le.readNamed(S,"radius"),D=360/N,H=N%3==0,Z=new Ve(0,H?-z:z),$=H?-1:.5,R=new Array(N),Y=0;Y<N;Y++)R[Y]=new Qn(k.add(Z.rotate((Y+$)*D)));return _(R,!0,S)},Star:function(){for(var S=arguments,k=Ve.readNamed(S,"center"),N=2*le.readNamed(S,"points"),z=le.readNamed(S,"radius1"),D=le.readNamed(S,"radius2"),H=360/N,Z=new Ve(0,-1),$=new Array(N),R=0;R<N;R++)$[R]=new Qn(k.add(Z.rotate(H*R).multiply(R%2?D:z)));return _($,!0,S)}}}});var Gn=xt.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(d){this._children=[],this._namedChildren={},this._initialize(d)||("string"==typeof d?this.setPathData(d):this.addChildren(Array.isArray(d)?d:arguments))},insertChildren:function l(d,_){var C=_,S=C[0];S&&"number"==typeof S[0]&&(C=[C]);for(var k=_.length-1;k>=0;k--){var N=C[k];C===_&&!(N instanceof Jt)&&(C=le.slice(C)),Array.isArray(N)?C[k]=new Jt({segments:N,insert:!1}):N instanceof Gn&&(C.splice.apply(C,[k,1].concat(N.removeChildren())),N.remove())}return l.base.call(this,d,C)},reduce:function l(d){for(var _=this._children,C=_.length-1;C>=0;C--)(S=_[C].reduce(d)).isEmpty()&&S.remove();var S;return _.length?l.base.call(this):((S=new Jt(bt.NO_INSERT)).copyAttributes(this),S.insertAbove(this),this.remove(),S)},isClosed:function(){for(var l=this._children,d=0,_=l.length;d<_;d++)if(!l[d]._closed)return!1;return!0},setClosed:function(l){for(var d=this._children,_=0,C=d.length;_<C;_++)d[_].setClosed(l)},getFirstSegment:function(){var l=this.getFirstChild();return l&&l.getFirstSegment()},getLastSegment:function(){var l=this.getLastChild();return l&&l.getLastSegment()},getCurves:function(){for(var l=this._children,d=[],_=0,C=l.length;_<C;_++)le.push(d,l[_].getCurves());return d},getFirstCurve:function(){var l=this.getFirstChild();return l&&l.getFirstCurve()},getLastCurve:function(){var l=this.getLastChild();return l&&l.getLastCurve()},getArea:function(){for(var l=this._children,d=0,_=0,C=l.length;_<C;_++)d+=l[_].getArea();return d},getLength:function(){for(var l=this._children,d=0,_=0,C=l.length;_<C;_++)d+=l[_].getLength();return d},getPathData:function(l,d){for(var _=this._children,C=[],S=0,k=_.length;S<k;S++){var N=_[S],z=N._matrix;C.push(N.getPathData(l&&!z.isIdentity()?l.appended(z):l,d))}return C.join("")},_hitTestChildren:function l(d,_,C){return l.base.call(this,d,_.class===Jt||"path"===_.type?_:le.set({},_,{fill:!1}),C)},_draw:function(l,d,_,C){var S=this._children;if(S.length){d=d.extend({dontStart:!0,dontFinish:!0}),l.beginPath();for(var k=0,N=S.length;k<N;k++)S[k].draw(l,d,C);if(!d.clip){this._setStyles(l,d,_);var z=this._style;z.hasFill()&&(l.fill(z.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),z.hasStroke()&&l.stroke()}}},_drawSelected:function(l,d,_){for(var C=this._children,S=0,k=C.length;S<k;S++){var N=C[S],z=N._matrix;_[N._id]||N._drawSelected(l,z.isIdentity()?d:d.appended(z))}}},new function(){function l(d,_){var C=d._children;if(_&&!C.length)throw new Error("Use a moveTo() command first");return C[C.length-1]}return le.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(d){this[d]=function(){var _=l(this,!0);_[d].apply(_,arguments)}},{moveTo:function(){var d=l(this),_=d&&d.isEmpty()?d:new Jt(bt.NO_INSERT);_!==d&&this.addChild(_),_.moveTo.apply(_,arguments)},moveBy:function(){var d=l(this,!0),_=d&&d.getLastSegment(),C=Ve.read(arguments);this.moveTo(_?C.add(_._point):C)},closePath:function(d){l(this,!0).closePath(d)}})},le.each(["reverse","flatten","simplify","smooth"],function(l){this[l]=function(d){for(var C,_=this._children,S=0,k=_.length;S<k;S++)C=_[S][l](d)||C;return C}},{}));xt.inject(new function(){var l=Math.min,d=Math.max,_=Math.abs,C={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function S(ge){return ge._children||[ge]}function k(ge,pe){var de=ge.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(pe){for(var Ee=S(de),ke=0,Xe=Ee.length;ke<Xe;ke++)!(ge=Ee[ke])._closed&&!ge.isEmpty()&&(ge.closePath(1e-12),ge.getFirstSegment().setHandleIn(0,0),ge.getLastSegment().setHandleOut(0,0));de=de.resolveCrossings().reorient("nonzero"===de.getFillRule(),!0)}return de}function N(ge,pe,de,Ee,ke){var Xe=new Gn(bt.NO_INSERT);return Xe.addChildren(ge,!0),Xe=Xe.reduce({simplify:pe}),ke&&0==ke.insert||Xe.insertAbove(Ee&&de.isSibling(Ee)&&de.getIndex()<Ee.getIndex()?Ee:de),Xe.copyAttributes(de,!0),Xe}function z(ge){return ge.hasOverlap()||ge.isCrossing()}function D(ge,pe,de,Ee){if(Ee&&(0==Ee.trace||Ee.stroke)&&/^(subtract|intersect)$/.test(de))return H(ge,pe,de);var ke=k(ge,!0),Xe=pe&&ge!==pe&&k(pe,!0),je=C[de];je[de]=!0,Xe&&(je.subtract||je.exclude)^Xe.isClockwise()^ke.isClockwise()&&Xe.reverse();var Bt,nt=Y(Pn.expand(ke.getIntersections(Xe,z))),pt=S(ke),gt=Xe&&S(Xe),Wt=[],Lt=[];function qt(ii){for(var Ci=0,yi=ii.length;Ci<yi;Ci++){var Ei=ii[Ci];le.push(Wt,Ei._segments),le.push(Lt,Ei.getCurves()),Ei._overlapsOnly=!0}}function Pe(ii){for(var Ci=[],yi=0,Ei=ii&&ii.length;yi<Ei;yi++)Ci.push(Lt[ii[yi]]);return Ci}if(nt.length){qt(pt),gt&&qt(gt);for(var We=new Array(Lt.length),Ye=0,we=Lt.length;Ye<we;Ye++)We[Ye]=Lt[Ye].getValues();var Ue=_e.findCurveBoundsCollisions(We,We,0,!0),ct={};for(Ye=0;Ye<Lt.length;Ye++){var Dt=Lt[Ye],wt=Dt._path._id;(ct[wt]=ct[wt]||{})[Dt.getIndex()]={hor:Pe(Ue[Ye].hor),ver:Pe(Ue[Ye].ver)}}for(Ye=0,we=nt.length;Ye<we;Ye++)me(nt[Ye]._segment,ke,Xe,ct,je);for(Ye=0,we=Wt.length;Ye<we;Ye++){var On=Wt[Ye],jn=On._intersection;On._winding||me(On,ke,Xe,ct,je),jn&&jn._overlap||(On._path._overlapsOnly=!1)}Bt=ve(Wt,je)}else Bt=R(gt?pt.concat(gt):pt.slice(),function(ii){return!!je[ii]});return N(Bt,!0,ge,pe,Ee)}function H(ge,pe,de){var Ee=k(ge),ke=k(pe),Xe=Ee.getIntersections(ke,z),je="subtract"===de,nt="divide"===de,pt={},gt=[];function Wt(qt){if(!pt[qt._id]&&(nt||ke.contains(qt.getPointAt(qt.getLength()/2))^je))return gt.unshift(qt),pt[qt._id]=!0}for(var Lt=Xe.length-1;Lt>=0;Lt--){var Bt=Xe[Lt].split();Bt&&(Wt(Bt)&&Bt.getFirstSegment().setHandleIn(0,0),Ee.getLastSegment().setHandleOut(0,0))}return Wt(Ee),N(gt,!1,ge,pe)}function Z(ge,pe){for(var de=ge;de;){if(de===pe)return;de=de._previous}for(;ge._next&&ge._next!==pe;)ge=ge._next;if(!ge._next){for(;pe._previous;)pe=pe._previous;ge._next=pe,pe._previous=ge}}function $(ge){for(var pe=ge.length-1;pe>=0;pe--)ge[pe].clearHandles()}function R(ge,pe,de){var Ee=ge&&ge.length;if(Ee){var ke=le.each(ge,function(Ue,ct){this[Ue._id]={container:null,winding:Ue.isClockwise()?1:-1,index:ct}},{}),Xe=ge.slice().sort(function(Ue,ct){return _(ct.getArea())-_(Ue.getArea())}),je=Xe[0],nt=_e.findItemBoundsCollisions(Xe,null,Re.GEOMETRIC_EPSILON);null==de&&(de=je.isClockwise());for(var pt=0;pt<Ee;pt++){var gt=Xe[pt],Wt=ke[gt._id],Lt=0,Bt=nt[pt];if(Bt)for(var qt=null,Pe=Bt.length-1;Pe>=0;Pe--)if(Bt[Pe]<pt){qt=qt||gt.getInteriorPoint();var We=Xe[Bt[Pe]];if(We.contains(qt)){var Ye=ke[We._id];Wt.winding+=Lt=Ye.winding,Wt.container=Ye.exclude?Ye.container:We;break}}if(pe(Wt.winding)===pe(Lt))Wt.exclude=!0,ge[Wt.index]=null;else{var we=Wt.container;gt.setClockwise(we?!we.isClockwise():de)}}}return ge}function Y(ge,pe,de){var gt,Wt,Lt,Ee=pe&&[],je=!1,nt=de||[],pt=de&&{};function Bt(Ci){return Ci._path._id+"."+Ci._segment1._index}for(var qt=(de&&de.length)-1;qt>=0;qt--)(Pe=de[qt])._path&&(pt[Bt(Pe)]=!0);for(qt=ge.length-1;qt>=0;qt--){var Pe,ct,We=ge[qt],Ye=We._time,we=Ye,Ue=pe&&!pe(We);if((Pe=We._curve)&&(Pe!==Wt?(je=!Pe.hasHandles()||pt&&pt[Bt(Pe)],gt=[],Lt=null,Wt=Pe):Lt>=1e-8&&(Ye/=Lt)),Ue)gt&&gt.push(We);else{if(pe&&Ee.unshift(We),Lt=we,Ye<1e-8)ct=Pe._segment1;else if(Ye>.99999999)ct=Pe._segment2;else{var Dt=Pe.divideAtTime(Ye,!0);je&&nt.push(Pe,Dt),ct=Dt._segment1;for(var wt=gt.length-1;wt>=0;wt--){var nn=gt[wt];nn._time=(nn._time-Ye)/(1-Ye)}}We._setSegment(ct);var On=ct._intersection,jn=We._intersection;if(On){Z(On,jn);for(var ii=On;ii;)Z(ii._intersection,On),ii=ii._next}else ct._intersection=jn}}return de||$(nt),Ee||ge}function he(ge,pe,de,Ee,ke){var On,jn,Xe=Array.isArray(pe)?pe:pe[de?"hor":"ver"],je=de?1:0,nt=1^je,pt=[ge.x,ge.y],gt=pt[je],Wt=pt[nt],qt=gt-1e-9,Pe=gt+1e-9,We=0,Ye=0,we=0,Ue=0,ct=!1,Dt=!1,wt=1,nn=[];function ii(rs){var ss=rs[nt+0],Xr=rs[nt+6];if(!(Wt<l(ss,Xr)||Wt>d(ss,Xr))){var Kr=rs[je+0],La=rs[je+2],eo=rs[je+4],Qi=rs[je+6];if(ss===Xr)return void((Kr<Pe&&Qi>qt||Qi<Pe&&Kr>qt)&&(ct=!0));var Ea=Wt===ss?0:Wt===Xr||qt>d(Kr,La,eo,Qi)||Pe<l(Kr,La,eo,Qi)?1:Sn.solveCubic(rs,nt,Wt,nn,0,1)>0?nn[0]:1,As=0===Ea?Kr:1===Ea?Qi:Sn.getPoint(rs,Ea)[de?"y":"x"],B=ss>Xr?1:-1,Mt=On[je+6];return Wt!==ss?(As<qt?we+=B:As>Pe?Ue+=B:ct=!0,As>gt-1e-6&&As<gt+1e-6&&(wt/=2)):(B!==(On[nt]>On[nt+6]?1:-1)?Kr<qt?we+=B:Kr>Pe&&(Ue+=B):Kr!=Mt&&(Mt<Pe&&As>Pe?(Ue+=B,ct=!0):Mt>qt&&As<qt&&(we+=B,ct=!0)),wt/=4),On=rs,!ke&&As>qt&&As<Pe&&0===Sn.getTangent(rs,Ea)[de?"x":"y"]&&he(ge,pe,!de,Ee,!0)}}function Ci(rs){var ss=rs[nt+0],Xr=rs[nt+2],Kr=rs[nt+4],La=rs[nt+6];if(Wt<=d(ss,Xr,Kr,La)&&Wt>=l(ss,Xr,Kr,La))for(var Be,eo=rs[je+0],Qi=rs[je+2],Ea=rs[je+4],As=rs[je+6],B=qt>d(eo,Qi,Ea,As)||Pe<l(eo,Qi,Ea,As)?[rs]:Sn.getMonoCurves(rs,de),Mt=0,sn=B.length;Mt<sn;Mt++)if(Be=ii(B[Mt]))return Be}for(var yi=0,Ei=Xe.length;yi<Ei;yi++){var _r,Ai=Xe[yi],or=Ai._path,is=Ai.getValues();if(!(yi&&Xe[yi-1]._path===or||(On=null,or._closed||(jn=Sn.getValues(or.getLastCurve().getSegment2(),Ai.getSegment1(),null,!Ee),jn[nt]!==jn[nt+6]&&(On=jn)),On))){On=is;for(var ws=or.getLastCurve();ws&&ws!==Ai;){var wr=ws.getValues();if(wr[nt]!==wr[nt+6]){On=wr;break}ws=ws.getPrevious()}}if(_r=Ci(is))return _r;if(yi+1===Ei||Xe[yi+1]._path!==or){if(jn&&(_r=Ci(jn)))return _r;ct&&!we&&!Ue&&(we=Ue=or.isClockwise(Ee)^de?1:-1),We+=we,Ye+=Ue,we=Ue=0,ct&&(Dt=!0,ct=!1),jn=null}}return We=_(We),Ye=_(Ye),{winding:d(We,Ye),windingL:We,windingR:Ye,quality:wt,onPath:Dt}}function me(ge,pe,de,Ee,ke){var Xe=[],je=ge,nt=0;do{if(pt=ge.getCurve()){var gt=pt.getLength();Xe.push({segment:ge,curve:pt,length:gt}),nt+=gt}ge=ge.getNext()}while(ge&&!ge._intersection&&ge!==je);for(var Wt=[.5,.25,.75],Lt={winding:0,quality:-1},Pe=0;Pe<Wt.length&&Lt.quality<.5;Pe++){gt=nt*Wt[Pe];for(var We=0,Ye=Xe.length;We<Ye;We++){var we=Xe[We],Ue=we.length;if(gt<=Ue){var pt,ct=(pt=we.curve)._path,Dt=ct._parent,wt=Dt instanceof Gn?Dt:ct,nn=Re.clamp(pt.getTimeAt(gt),.001,.999),On=pt.getPointAtTime(nn),jn=_(pt.getTangentAtTime(nn).y)<Math.SQRT1_2,ii=null;if(ke.subtract&&de){var yi=(wt===pe?de:pe)._getWinding(On,jn,!0);if(wt===pe&&yi.winding||wt===de&&!yi.winding){if(yi.quality<1)continue;ii={winding:0,quality:1}}}(ii=ii||he(On,Ee[ct._id][pt.getIndex()],jn,!0)).quality>Lt.quality&&(Lt=ii);break}gt-=Ue}}for(We=Xe.length-1;We>=0;We--)Xe[We].segment._winding=Lt}function ve(ge,pe){var Ee,de=[];function ke(Ei){var Ai;return!(!Ei||Ei._visited||pe&&(!pe[(Ai=Ei._winding||{}).winding]||pe.unite&&2===Ai.winding&&Ai.windingL&&Ai.windingR))}function Xe(Ei){if(Ei)for(var Ai=0,or=Ee.length;Ai<or;Ai++)if(Ei===Ee[Ai])return!0;return!1}function je(Ei){for(var Ai=Ei._segments,or=0,is=Ai.length;or<is;or++)Ai[or]._visited=!0}function nt(Ei,Ai){var or=Ei._intersection,is=or,_r=[];function ws(wr,rs){for(;wr&&wr!==rs;){var ss=wr._segment,Xr=ss&&ss._path;if(Xr){var Kr=ss.getNext()||Xr.getFirstSegment(),La=Kr._intersection;ss!==Ei&&(Xe(ss)||Xe(Kr)||Kr&&ke(ss)&&(ke(Kr)||La&&ke(La._segment)))&&_r.push(ss),Ai&&Ee.push(ss)}wr=wr._next}}if(Ai&&(Ee=[Ei]),or){for(ws(or);or&&or._previous;)or=or._previous;ws(or,is)}return _r}ge.sort(function(Ei,Ai){var or=Ei._intersection,is=Ai._intersection,_r=!(!or||!or._overlap),wr=Ei._path,rs=Ai._path;return _r^!(!is||!is._overlap)?_r?1:-1:!or^!is?or?1:-1:wr!==rs?wr._id-rs._id:Ei._index-Ai._index});for(var pt=0,gt=ge.length;pt<gt;pt++){var Ye,we,Ue,Wt=ge[pt],Lt=ke(Wt),Bt=null,qt=!1,Pe=!0,We=[];if(Lt&&Wt._path._overlapsOnly){var ct=Wt._path,Dt=Wt._intersection._segment._path;ct.compare(Dt)&&(ct.getArea()&&de.push(ct.clone(!1)),je(ct),je(Dt),Lt=!1)}for(;Lt;){var wt=!Bt,nn=nt(Wt,wt),On=nn.shift(),jn=!(qt=!wt&&(Xe(Wt)||Xe(On)))&&On;if(wt&&(Bt=new Jt(bt.NO_INSERT),Ye=null),qt){(Wt.isFirst()||Wt.isLast())&&(Pe=Wt._path._closed),Wt._visited=!0;break}if(jn&&Ye&&(We.push(Ye),Ye=null),Ye||(jn&&nn.push(Wt),Ye={start:Bt._segments.length,crossings:nn,visited:we=[],handleIn:Ue}),jn&&(Wt=On),!ke(Wt)){Bt.removeSegments(Ye.start);for(var ii=0,Ci=we.length;ii<Ci;ii++)we[ii]._visited=!1;we.length=0;do{(!(Wt=Ye&&Ye.crossings.shift())||!Wt._path)&&(Wt=null,(Ye=We.pop())&&(we=Ye.visited,Ue=Ye.handleIn))}while(Ye&&!ke(Wt));if(!Wt)break}var yi=Wt.getNext();Bt.add(new Qn(Wt._point,Ue,yi&&Wt._handleOut)),Wt._visited=!0,we.push(Wt),Wt=yi||Wt._path.getFirstSegment(),Ue=yi&&yi._handleIn}qt&&(Pe&&(Bt.getFirstSegment().setHandleIn(Ue),Bt.setClosed(Pe)),0!==Bt.getArea()&&de.push(Bt))}return de}return{_getWinding:function(ge,pe,de){return he(ge,this.getCurves(),pe,de)},unite:function(ge,pe){return D(this,ge,"unite",pe)},intersect:function(ge,pe){return D(this,ge,"intersect",pe)},subtract:function(ge,pe){return D(this,ge,"subtract",pe)},exclude:function(ge,pe){return D(this,ge,"exclude",pe)},divide:function(ge,pe){return pe&&(0==pe.trace||pe.stroke)?H(this,ge,"divide"):N([this.subtract(ge,pe),this.intersect(ge,pe)],!0,this,ge,pe)},resolveCrossings:function(){var ge=this._children,pe=ge||[this];function de(Ye,we){var Ue=Ye&&Ye._intersection;return Ue&&Ue._overlap&&Ue._path===we}var Ee=!1,ke=!1,Xe=this.getIntersections(null,function(Ye){return Ye.hasOverlap()&&(Ee=!0)||Ye.isCrossing()&&(ke=!0)}),je=Ee&&ke&&[];if(Xe=Pn.expand(Xe),Ee)for(var nt=Y(Xe,function(Ye){return Ye.hasOverlap()},je),pt=nt.length-1;pt>=0;pt--){var gt=nt[pt],Wt=gt._path,Lt=gt._segment,Bt=Lt.getPrevious(),qt=Lt.getNext();de(Bt,Wt)&&de(qt,Wt)&&(Lt.remove(),Bt._handleOut._set(0,0),qt._handleIn._set(0,0),Bt!==Lt&&!Bt.getCurve().hasLength()&&(qt._handleIn.set(Bt._handleIn),Bt.remove()))}ke&&(Y(Xe,Ee&&function(Ye){var we=Ye.getCurve(),Ue=Ye.getSegment(),ct=Ye._intersection,Dt=ct._curve,wt=ct._segment;if(we&&Dt&&we._path&&Dt._path)return!0;Ue&&(Ue._intersection=null),wt&&(wt._intersection=null)},je),je&&$(je),pe=ve(le.each(pe,function(Ye){le.push(this,Ye._segments)},[])));var We,Pe=pe.length;return Pe>1&&ge?(pe!==ge&&this.setChildren(pe),We=this):1===Pe&&!ge&&(pe[0]!==this&&this.setSegments(pe[0].removeSegments()),We=this),We||((We=new Gn(bt.NO_INSERT)).addChildren(pe),(We=We.reduce()).copyAttributes(this),this.replaceWith(We)),We},reorient:function(ge,pe){var de=this._children;return de&&de.length?this.setChildren(R(this.removeChildren(),function(Ee){return!!(ge?Ee:1&Ee)},pe)):pe!==V&&this.setClockwise(pe),this},getInteriorPoint:function(){var pe=this.getBounds().getCenter(!0);if(!this.contains(pe)){for(var de=this.getCurves(),Ee=pe.y,ke=[],Xe=[],je=0,nt=de.length;je<nt;je++){var pt=de[je].getValues(),gt=pt[1],Wt=pt[3],Lt=pt[5],Bt=pt[7];if(Ee>=l(gt,Wt,Lt,Bt)&&Ee<=d(gt,Wt,Lt,Bt))for(var qt=Sn.getMonoCurves(pt),Pe=0,We=qt.length;Pe<We;Pe++){var Ye=qt[Pe],we=Ye[1],Ue=Ye[7];if(we!==Ue&&(Ee>=we&&Ee<=Ue||Ee>=Ue&&Ee<=we)){var ct=Ee===we?Ye[0]:Ee===Ue?Ye[6]:1===Sn.solveCubic(Ye,1,Ee,Xe,0,1)?Sn.getPoint(Ye,Xe[0]).x:(Ye[0]+Ye[6])/2;ke.push(ct)}}}ke.length>1&&(ke.sort(function(Dt,wt){return Dt-wt}),pe.x=(ke[0]+ke[1])/2)}return pe}}});var ri=le.extend({_class:"PathFlattener",initialize:function(l,d,_,C,S){var $,k=[],N=[],z=0,D=1/(_||32),H=l._segments,Z=H[0];function R(ve,ge){var pe=Sn.getValues(ve,ge,S);k.push(pe),Y(pe,ve._index,0,1)}function Y(ve,ge,pe,de){if(!(de-pe>D)||C&&Sn.isStraight(ve)||Sn.isFlatEnough(ve,d||.25)){var Xe=ve[6]-ve[0],je=ve[7]-ve[1],nt=Math.sqrt(Xe*Xe+je*je);nt>0&&N.push({offset:z+=nt,curve:ve,index:ge,time:de})}else{var Ee=Sn.subdivide(ve,.5),ke=(pe+de)/2;Y(Ee[0],ge,pe,ke),Y(Ee[1],ge,ke,de)}}for(var he=1,me=H.length;he<me;he++)R(Z,$=H[he]),Z=$;l._closed&&R($||Z,H[0]),this.curves=k,this.parts=N,this.length=z,this.index=0},_get:function(l){for(var S,d=this.parts,_=d.length,k=this.index;S=k,k&&!(d[--k].offset<l););for(;S<_;S++){var N=d[S];if(N.offset>=l){this.index=S;var z=d[S-1],D=z&&z.index===N.index?z.time:0,H=z?z.offset:0;return{index:N.index,time:D+(N.time-D)*(l-H)/(N.offset-H)}}}return{index:d[_-1].index,time:1}},drawPart:function(l,d,_){for(var C=this._get(d),S=this._get(_),k=C.index,N=S.index;k<=N;k++){var z=Sn.getPart(this.curves[k],k===C.index?C.time:0,k===S.index?S.time:1);k===C.index&&l.moveTo(z[0],z[1]),l.bezierCurveTo.apply(l,z.slice(2))}}},le.each(Sn._evaluateMethods,function(l){this[l+"At"]=function(d){var _=this._get(d);return Sn[l](this.curves[_.index],_.time)}},{})),ni=le.extend({initialize:function(l){for(var k,d=this.points=[],_=l._segments,C=l._closed,S=0,N=_.length;S<N;S++){var z=_[S].point;(!k||!k.equals(z))&&d.push(k=z.clone())}C&&(d.unshift(d[d.length-1]),d.push(d[1])),this.closed=C},fit:function(l){var d=this.points,_=d.length,C=null;return _>0&&(C=[new Qn(d[0])],_>1&&(this.fitCubic(C,l,0,_-1,d[1].subtract(d[0]),d[_-2].subtract(d[_-1])),this.closed&&(C.shift(),C.pop()))),C},fitCubic:function(l,d,_,C,S,k){var N=this.points;if(C-_!=1){for(var R,Z=this.chordLengthParameterize(_,C),$=Math.max(d,d*d),Y=!0,he=0;he<=4;he++){var me=this.generateBezier(_,C,Z,S,k),ve=this.findMaxError(_,C,me,Z);if(ve.error<d&&Y)return void this.addCurve(l,me);if(R=ve.index,ve.error>=$)break;Y=this.reparameterize(_,C,Z,me),$=ve.error}var ge=N[R-1].subtract(N[R+1]);this.fitCubic(l,d,_,R,S,ge),this.fitCubic(l,d,R,C,ge.negate(),k)}else{var z=N[_],D=N[C],H=z.getDistance(D)/3;this.addCurve(l,[z,z.add(S.normalize(H)),D.add(k.normalize(H)),D])}},addCurve:function(l,d){l[l.length-1].setHandleOut(d[1].subtract(d[0])),l.push(new Qn(d[3],d[2].subtract(d[3])))},generateBezier:function(l,d,_,C,S){for(var k=1e-12,N=Math.abs,z=this.points,D=z[l],H=z[d],Z=[[0,0],[0,0]],$=[0,0],R=0,Y=d-l+1;R<Y;R++){var he=_[R],me=1-he,ve=3*he*me,ge=me*me*me,pe=ve*me,de=ve*he,Ee=he*he*he,ke=C.normalize(pe),Xe=S.normalize(de),je=z[l+R].subtract(D.multiply(ge+pe)).subtract(H.multiply(de+Ee));Z[0][0]+=ke.dot(ke),Z[0][1]+=ke.dot(Xe),Z[1][0]=Z[0][1],Z[1][1]+=Xe.dot(Xe),$[0]+=ke.dot(je),$[1]+=Xe.dot(je)}var pt,gt,nt=Z[0][0]*Z[1][1]-Z[1][0]*Z[0][1];if(N(nt)>k)pt=($[0]*Z[1][1]-$[1]*Z[0][1])/nt,gt=(Z[0][0]*$[1]-Z[1][0]*$[0])/nt;else{var Bt=Z[0][0]+Z[0][1],qt=Z[1][0]+Z[1][1];pt=gt=N(Bt)>k?$[0]/Bt:N(qt)>k?$[1]/qt:0}var Ye,we,Pe=H.getDistance(D),We=k*Pe;if(pt<We||gt<We)pt=gt=Pe/3;else{var Ue=H.subtract(D);Ye=C.normalize(pt),we=S.normalize(gt),Ye.dot(Ue)-we.dot(Ue)>Pe*Pe&&(pt=gt=Pe/3,Ye=we=null)}return[D,D.add(Ye||C.normalize(pt)),H.add(we||S.normalize(gt)),H]},reparameterize:function(l,d,_,C){for(var S=l;S<=d;S++)_[S-l]=this.findRoot(C,this.points[S],_[S-l]);S=1;for(var k=_.length;S<k;S++)if(_[S]<=_[S-1])return!1;return!0},findRoot:function(l,d,_){for(var C=[],S=[],k=0;k<=2;k++)C[k]=l[k+1].subtract(l[k]).multiply(3);for(k=0;k<=1;k++)S[k]=C[k+1].subtract(C[k]).multiply(2);var N=this.evaluate(3,l,_),z=this.evaluate(2,C,_),D=this.evaluate(1,S,_),H=N.subtract(d),Z=z.dot(z)+H.dot(D);return Re.isMachineZero(Z)?_:_-H.dot(z)/Z},evaluate:function(l,d,_){for(var C=d.slice(),S=1;S<=l;S++)for(var k=0;k<=l-S;k++)C[k]=C[k].multiply(1-_).add(C[k+1].multiply(_));return C[0]},chordLengthParameterize:function(l,d){for(var _=[0],C=l+1;C<=d;C++)_[C-l]=_[C-l-1]+this.points[C].getDistance(this.points[C-1]);C=1;for(var S=d-l;C<=S;C++)_[C]/=_[S];return _},findMaxError:function(l,d,_,C){for(var S=Math.floor((d-l+1)/2),k=0,N=l+1;N<d;N++){var D=this.evaluate(3,_,C[N-l]).subtract(this.points[N]),H=D.x*D.x+D.y*D.y;H>=k&&(k=H,S=N)}return{error:k,index:S}}}),St=bt.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(d){this._content="",this._lines=[];var _=d&&le.isPlainObject(d)&&d.x===V&&d.y===V;this._initialize(_&&d,!_&&Ve.read(arguments))},_equals:function(l){return this._content===l._content},copyContent:function(l){this.setContent(l._content)},getContent:function(){return this._content},setContent:function(l){this._content=""+l,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Oe=St.extend({_class:"PointText",initialize:function(){St.apply(this,arguments)},getPoint:function(){var l=this._matrix.getTranslation();return new Ae(l.x,l.y,this,"setPoint")},setPoint:function(){var l=Ve.read(arguments);this.translate(l.subtract(this._matrix.getTranslation()))},_draw:function(l,d,_){if(this._content){this._setStyles(l,d,_);var C=this._lines,S=this._style,k=S.hasFill(),N=S.hasStroke(),z=S.getLeading(),D=l.shadowColor;l.font=S.getFontStyle(),l.textAlign=S.getJustification();for(var H=0,Z=C.length;H<Z;H++){l.shadowColor=D;var $=C[H];k&&(l.fillText($,0,0),l.shadowColor="rgba(0,0,0,0)"),N&&l.strokeText($,0,0),l.translate(0,z)}}},_getBounds:function(l,d){var _=this._style,C=this._lines,S=C.length,k=_.getJustification(),N=_.getLeading(),z=this.getView().getTextWidth(_.getFontStyle(),C),D=0;"left"!==k&&(D-=z/("center"===k?2:1));var H=new ee(D,S?-.75*N:0,z,S*N);return l?l._transformBounds(H,H):H}}),Ft=le.extend(new function(){var C,l={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},d={},_={transparent:[0,0,0,0]};function S(z){var Z,D=z.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||z.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),H="rgb";if(D){var $=D[4]?4:3;Z=new Array($);for(var R=0;R<$;R++){var Y=D[R+1];Z[R]=parseInt(1==Y.length?Y+Y:Y,16)/255}}else if(D=z.match(/^(rgb|hsl)a?\((.*)\)$/)){H=D[1],Z=D[2].trim().split(/[,\s]+/g);for(var he="hsl"===H,me=(R=0,Math.min(Z.length,4));R<me;R++){var ve=Z[R];if(Y=parseFloat(ve),he)if(0===R){var ge=ve.match(/([a-z]*)$/)[1];Y*={turn:360,rad:180/Math.PI,grad:.9}[ge]||1}else R<3&&(Y/=100);else R<3&&(Y/=/%$/.test(ve)?100:255);Z[R]=Y}}else{var pe=_[z];if(!pe)if(K){C||((C=Hr.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),C.fillStyle="rgba(0,0,0,0)",C.fillStyle=z,C.fillRect(0,0,1,1);var de=C.getImageData(0,0,1,1).data;pe=_[z]=[de[0]/255,de[1]/255,de[2]/255]}else pe=[0,0,0];Z=pe.slice()}return[H,Z]}var k=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],N={"rgb-hsb":function(z,D,H){var Z=Math.max(z,D,H),R=Z-Math.min(z,D,H);return[0===R?0:60*(Z==z?(D-H)/R+(D<H?6:0):Z==D?(H-z)/R+2:(z-D)/R+4),0===Z?0:R/Z,Z]},"hsb-rgb":function(z,D,H){var $,Z=(z=(z/60%6+6)%6)-($=Math.floor(z)),R=[H,H*(1-D),H*(1-D*Z),H*(1-D*(1-Z))];return[R[($=k[$])[0]],R[$[1]],R[$[2]]]},"rgb-hsl":function(z,D,H){var Z=Math.max(z,D,H),$=Math.min(z,D,H),R=Z-$,Y=0===R,me=(Z+$)/2;return[Y?0:60*(Z==z?(D-H)/R+(D<H?6:0):Z==D?(H-z)/R+2:(z-D)/R+4),Y?0:me<.5?R/(Z+$):R/(2-Z-$),me]},"hsl-rgb":function(z,D,H){if(0===D)return[H,H,H];for(var Z=[(z=(z/360%1+1)%1)+1/3,z,z-1/3],$=H<.5?H*(1+D):H+D-H*D,R=2*H-$,Y=[],he=0;he<3;he++){var me=Z[he];me<0&&(me+=1),me>1&&(me-=1),Y[he]=6*me<1?R+6*($-R)*me:2*me<1?$:3*me<2?R+($-R)*(2/3-me)*6:R}return Y},"rgb-gray":function(z,D,H){return[.2989*z+.587*D+.114*H]},"gray-rgb":function(z){return[z,z,z]},"gray-hsb":function(z){return[0,0,z]},"gray-hsl":function(z){return[0,0,z]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return le.each(l,function(z,D){d[D]=[],le.each(z,function(H,Z){var $=le.capitalize(H),R=/^(hue|saturation)$/.test(H),Y=d[D][Z]="gradient"===D?"gradient"===H?function(he){var me=this._components[0];return me!==(he=Ot.read(Array.isArray(he)?he:arguments,0,{readNull:!0}))&&(me&&me._removeOwner(this),he&&he._addOwner(this)),he}:function(){return Ve.read(arguments,0,{readNull:"highlight"===H,clone:!0})}:function(he){return null==he||isNaN(he)?0:+he};this["get"+$]=function(){return this._type===D||R&&/^hs[bl]$/.test(this._type)?this._components[Z]:this._convert(D)[Z]},this["set"+$]=function(he){this._type!==D&&!(R&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(D),this._properties=l[D],this._type=D),this._components[Z]=Y.call(this,he),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function z(D){var R,Y,he,me,H=arguments,Z=this.__read,$=0;Array.isArray(D)&&(D=(H=D)[0]);var ve=null!=D&&typeof D;if("string"===ve&&D in l&&(R=D,D=H[1],Array.isArray(D)?(Y=D,he=H[2]):(Z&&($=1),H=le.slice(H,1),ve=typeof D)),!Y){if(me="number"===ve?H:"object"===ve&&null!=D.length?D:null){R||(R=me.length>=3?"rgb":"gray");var ge=l[R].length;he=me[ge],Z&&($+=me===arguments?ge+(null!=he?1:0):1),me.length>ge&&(me=le.slice(me,0,ge))}else if("string"===ve){var pe=S(D);R=pe[0],4===(Y=pe[1]).length&&(he=Y[3],Y.length--)}else if("object"===ve)if(D.constructor===z){if(R=D._type,Y=D._components.slice(),he=D._alpha,"gradient"===R)for(var de=1,Ee=Y.length;de<Ee;de++){var ke=Y[de];ke&&(Y[de]=ke.clone())}}else if(D.constructor===Ot)R="gradient",me=H;else{var Xe=l[R="hue"in D?"lightness"in D?"hsl":"hsb":"gradient"in D||"stops"in D||"radial"in D?"gradient":"gray"in D?"gray":"rgb"],je=d[R];for(this._components=Y=[],de=0,Ee=Xe.length;de<Ee;de++)null==(nt=D[Xe[de]])&&!de&&"gradient"===R&&"stops"in D&&(nt={stops:D.stops,radial:D.radial}),null!=(nt=je[de].call(this,nt))&&(Y[de]=nt);he=D.alpha}Z&&R&&($=1)}if(this._type=R||"rgb",!Y)for(this._components=Y=[],de=0,Ee=(je=d[this._type]).length;de<Ee;de++){var nt;null!=(nt=je[de].call(this,me&&me[de]))&&(Y[de]=nt)}return this._components=Y,this._properties=l[this._type],this._alpha=he,Z&&(this.__read=$),this},set:"#initialize",_serialize:function(z,D){var H=this.getComponents();return le.serialize(/^(gray|rgb)$/.test(this._type)?H:[this._type].concat(H),z,!0,D)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(z){var D;return this._type===z?this._components.slice():(D=N[this._type+"-"+z])?D.apply(this,this._components):N["rgb-"+z].apply(this,N[this._type+"-rgb"].apply(this,this._components))},convert:function(z){return new Ft(z,this._convert(z),this._alpha)},getType:function(){return this._type},setType:function(z){this._components=this._convert(z),this._properties=l[z],this._type=z},getComponents:function(){var z=this._components.slice();return null!=this._alpha&&z.push(this._alpha),z},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(z){this._alpha=null==z?null:Math.min(Math.max(z,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(z){var D=le.isPlainValue(z,!0)?Ft.read(arguments):z;return D===this||D&&this._class===D._class&&this._type===D._type&&this.getAlpha()===D.getAlpha()&&le.equals(this._components,D._components)||!1},toString:function(){for(var z=this._properties,D=[],H="gradient"===this._type,Z=Q.instance,$=0,R=z.length;$<R;$++){var Y=this._components[$];null!=Y&&D.push(z[$]+": "+(H?Y:Z.number(Y)))}return null!=this._alpha&&D.push("alpha: "+Z.number(this._alpha)),"{ "+D.join(", ")+" }"},toCSS:function(z){var D=this._convert("rgb"),H=z||null==this._alpha?1:this._alpha;function Z($){return Math.round(255*($<0?0:$>1?1:$))}return D=[Z(D[0]),Z(D[1]),Z(D[2])],H<1&&D.push(H<0?0:H),z?"#"+((1<<24)+(D[0]<<16)+(D[1]<<8)+D[2]).toString(16).slice(1):(4==D.length?"rgba(":"rgb(")+D.join(",")+")"},toCanvasStyle:function(z,D){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var ve,H=this._components,Z=H[0],$=Z._stops,R=H[1],Y=H[2],he=H[3],me=D&&D.inverted();if(me&&(R=me._transformPoint(R),Y=me._transformPoint(Y),he&&(he=me._transformPoint(he))),Z._radial){var ge=Y.getDistance(R);if(he){var pe=he.subtract(R);pe.getLength()>ge&&(he=R.add(pe.normalize(ge-.1)))}var de=he||R;ve=z.createRadialGradient(de.x,de.y,0,R.x,R.y,ge)}else ve=z.createLinearGradient(R.x,R.y,Y.x,Y.y);for(var Ee=0,ke=$.length;Ee<ke;Ee++){var Xe=$[Ee];ve.addColorStop(Xe._offset??Ee/(ke-1),Xe._color.toCanvasStyle())}return this._canvasStyle=ve},transform:function(z){if("gradient"===this._type){for(var D=this._components,H=1,Z=D.length;H<Z;H++){var $=D[H];z._transformPoint($,$,!0)}this._changed()}},statics:{_types:l,random:function(){var z=Math.random;return new Ft(z(),z(),z())},_setOwner:function(z,D,H){return z&&(z._owner&&D&&z._owner!==D&&(z=z.clone()),!z._owner^!D&&(z._owner=D||null,z._setter=H||null)),z}}})},new function(){return le.each({add:function(d,_){return d+_},subtract:function(d,_){return d-_},multiply:function(d,_){return d*_},divide:function(d,_){return d/_}},function(d,_){this[_]=function(C){C=Ft.read(arguments);for(var S=this._type,k=this._components,N=C._convert(S),z=0,D=k.length;z<D;z++)N[z]=d(k[z],N[z]);return new Ft(S,N,null!=this._alpha?d(this._alpha,C.getAlpha()):null)}},{})}),Ot=le.extend({_class:"Gradient",initialize:function(d,_){this._id=Le.get(),d&&le.isPlainObject(d)&&(this.set(d),d=_=null),null==this._stops&&this.setStops(d||["white","black"]),null==this._radial&&this.setRadial("string"==typeof _&&"radial"===_||_||!1)},_serialize:function(l,d){return d.add(this,function(){return le.serialize([this._stops,this._radial],l,!0,d)})},_changed:function(){for(var l=0,d=this._owners&&this._owners.length;l<d;l++)this._owners[l]._changed()},_addOwner:function(l){this._owners||(this._owners=[]),this._owners.push(l)},_removeOwner:function(l){var d=this._owners?this._owners.indexOf(l):-1;-1!=d&&(this._owners.splice(d,1),this._owners.length||(this._owners=V))},clone:function(){for(var l=[],d=0,_=this._stops.length;d<_;d++)l[d]=this._stops[d].clone();return new Ot(l,this._radial)},getStops:function(){return this._stops},setStops:function(l){if(l.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var d=this._stops;if(d)for(var _=0,C=d.length;_<C;_++)d[_]._owner=V;for(_=0,C=(d=this._stops=li.readList(l,0,{clone:!0})).length;_<C;_++)d[_]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(l){this._radial=l,this._changed()},equals:function(l){if(l===this)return!0;if(l&&this._class===l._class){var d=this._stops,_=l._stops,C=d.length;if(C===_.length){for(var S=0;S<C;S++)if(!d[S].equals(_[S]))return!1;return!0}}return!1}}),li=le.extend({_class:"GradientStop",initialize:function(d,_){var C=d,S=_;"object"==typeof d&&_===V&&(Array.isArray(d)&&"number"!=typeof d[0]?(C=d[0],S=d[1]):("color"in d||"offset"in d||"rampPoint"in d)&&(C=d.color,S=d.offset||d.rampPoint||0)),this.setColor(C),this.setOffset(S)},clone:function(){return new li(this._color.clone(),this._offset)},_serialize:function(l,d){var _=this._color,C=this._offset;return le.serialize(null==C?[_]:[_,C],l,!0,d)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(l){this._offset=l,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Ft._setOwner(this._color,null),this._color=Ft._setOwner(Ft.read(arguments,0),this,"setColor"),this._changed()},equals:function(l){return l===this||l&&this._class===l._class&&this._color.equals(l._color)&&this._offset==l._offset||!1}}),di=le.extend(new function(){var l={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new Ve,selectedColor:null},d=le.set({},l,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),_=le.set({},d,{fillColor:new Ft}),C={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},S={beans:!0},k={_class:"Style",beans:!0,initialize:function(z,D,H){this._values={},this._owner=D,this._project=D&&D._project||H||y.project,this._defaults=!D||D instanceof ut?d:D instanceof St?_:l,z&&this.set(z)}};return le.each(d,function(N,z){var D=/Color$/.test(z),H="shadowOffset"===z,Z=le.capitalize(z),$=C[z],R="set"+Z,Y="get"+Z;k[R]=function(he){var me=this._owner,ve=me&&me._children,ge=ve&&ve.length>0&&!(me instanceof Gn);if(ge)for(var pe=0,de=ve.length;pe<de;pe++)ve[pe]._style[R](he);if(("selectedColor"===z||!ge)&&z in this._defaults){var Ee=this._values[z];Ee!==he&&(D&&(Ee&&(Ft._setOwner(Ee,null),Ee._canvasStyle=null),he&&he.constructor===Ft&&(he=Ft._setOwner(he,me,ge&&R))),this._values[z]=he,me&&me._changed($||129))}},k[Y]=function(he){var me=this._owner,ve=me&&me._children,ge=ve&&ve.length>0&&!(me instanceof Gn);if(ge&&!he)for(var de=0,Ee=ve.length;de<Ee;de++){var ke=ve[de]._style[Y]();if(de){if(!le.equals(pe,ke))return V}else pe=ke}else if(z in this._defaults){var pe;if((pe=this._values[z])===V)(pe=this._defaults[z])&&pe.clone&&(pe=pe.clone());else{var Xe=D?Ft:H?Ve:null;Xe&&(!pe||pe.constructor!==Xe)&&(this._values[z]=pe=Xe.read([pe],0,{readNull:!0,clone:!0}))}}return pe&&D&&(pe=Ft._setOwner(pe,me,ge&&R)),pe},S[Y]=function(he){return this._style[Y](he)},S[R]=function(he){this._style[R](he)}}),le.each({Font:"FontFamily",WindingRule:"FillRule"},function(N,z){var D="get"+z,H="set"+z;k[D]=S[D]="#get"+N,k[H]=S[H]="#set"+N}),bt.inject(S),k},{set:function(l){var d=l instanceof di,_=d?l._values:l;if(_)for(var C in _)if(C in this._defaults){var S=_[C];this[C]=S&&d&&S.clone?S.clone():S}},equals:function(l){function d(_,C,S){var k=_._values,N=C._values,z=C._defaults;for(var D in k){var Z=N[D];if(!(S&&D in N||le.equals(k[D],Z===V?z[D]:Z)))return!1}return!0}return l===this||l&&this._class===l._class&&d(this,l)&&d(l,this,!0)||!1},_dispose:function(){var l;(l=this.getFillColor())&&(l._canvasStyle=null),(l=this.getStrokeColor())&&(l._canvasStyle=null),(l=this.getShadowColor())&&(l._canvasStyle=null)},hasFill:function(){var l=this.getFillColor();return!!l&&l.alpha>0},hasStroke:function(){var l=this.getStrokeColor();return!!l&&l.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var l=this.getShadowColor();return!!l&&l.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var l=this.getFontSize();return this.getFontWeight()+" "+l+(/[a-z]/i.test(l+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function l(){var d=l.base.call(this),_=this.getFontSize();return/pt|em|%|px/.test(_)&&(_=this.getView().getPixelSize(_)),d??1.2*_}}),Gt=new function(){function l(d,_,C,S){for(var k=["","webkit","moz","Moz","ms","o"],N=_[0].toUpperCase()+_.substring(1),z=0;z<6;z++){var D=k[z],H=D?D+N:_;if(H in d){if(!C)return d[H];d[H]=S;break}}}return{getStyles:function(d){var _=d&&9!==d.nodeType?d.ownerDocument:d,C=_&&_.defaultView;return C&&C.getComputedStyle(d,"")},getBounds:function(d,_){var N,C=d.ownerDocument,S=C.body,k=C.documentElement;try{N=d.getBoundingClientRect()}catch{N={left:0,top:0,width:0,height:0}}var z=N.left-(k.clientLeft||S.clientLeft||0),D=N.top-(k.clientTop||S.clientTop||0);if(!_){var H=C.defaultView;z+=H.pageXOffset||k.scrollLeft||S.scrollLeft,D+=H.pageYOffset||k.scrollTop||S.scrollTop}return new ee(z,D,N.width,N.height)},getViewportBounds:function(d){var _=d.ownerDocument,C=_.defaultView,S=_.documentElement;return new ee(0,0,C.innerWidth||S.clientWidth,C.innerHeight||S.clientHeight)},getOffset:function(d,_){return Gt.getBounds(d,_).getPoint()},getSize:function(d){return Gt.getBounds(d,!0).getSize()},isInvisible:function(d){return Gt.getSize(d).equals(new Se(0,0))},isInView:function(d){return!Gt.isInvisible(d)&&Gt.getViewportBounds(d).intersects(Gt.getBounds(d,!0))},isInserted:function(d){return q.body.contains(d)},getPrefixed:function(d,_){return d&&l(d,_)},setPrefixed:function(d,_,C){if("object"==typeof _)for(var S in _)l(d,S,!0,_[S]);else l(d,_,!0,C)}}},Rt={add:function(l,d){if(l)for(var _ in d)for(var C=d[_],S=_.split(/[\s,]+/g),k=0,N=S.length;k<N;k++){var z=S[k];l.addEventListener(z,C,l===q&&("touchstart"===z||"touchmove"===z)&&{passive:!1})}},remove:function(l,d){if(l)for(var _ in d)for(var C=d[_],S=_.split(/[\s,]+/g),k=0,N=S.length;k<N;k++)l.removeEventListener(S[k],C,!1)},getPoint:function(l){var d=l.targetTouches?l.targetTouches.length?l.targetTouches[0]:l.changedTouches[0]:l;return new Ve(d.pageX||d.clientX+q.documentElement.scrollLeft,d.pageY||d.clientY+q.documentElement.scrollTop)},getTarget:function(l){return l.target||l.srcElement},getRelatedTarget:function(l){return l.relatedTarget||l.toElement},getOffset:function(l,d){return Rt.getPoint(l).subtract(Gt.getOffset(d||Rt.getTarget(l)))}};Rt.requestAnimationFrame=new function(){var C,l=Gt.getPrefixed(K,"requestAnimationFrame"),d=!1,_=[];function S(){var k=_;_=[];for(var N=0,z=k.length;N<z;N++)k[N]();(d=l&&_.length)&&l(S)}return function(k){_.push(k),l?d||(l(S),d=!0):C||(C=setInterval(S,16.666666666666668))}};var _n=le.extend(Te,{_class:"View",initialize:function l(d,_){function C($){return _[$]||parseInt(_.getAttribute($),10)}function S(){var $=Gt.getSize(_);return $.isNaN()||$.isZero()?new Se(C("width"),C("height")):$}var k;if(K&&_){this._id=_.getAttribute("id"),null==this._id&&_.setAttribute("id",this._id="paper-view-"+l._id++),Rt.add(_,this._viewEvents);var N="none";if(Gt.setPrefixed(_.style,{userDrag:N,userSelect:N,touchCallout:N,contentZooming:N,tapHighlightColor:"rgba(0,0,0,0)"}),De.hasAttribute(_,"resize")){var z=this;Rt.add(K,this._windowEvents={resize:function(){z.setViewSize(S())}})}if(k=S(),De.hasAttribute(_,"stats")&&typeof Stats<"u"){this._stats=new Stats;var D=this._stats.domElement,H=D.style,Z=Gt.getOffset(_);H.position="absolute",H.left=Z.x+"px",H.top=Z.y+"px",q.body.appendChild(D)}}else k=new Se(_),_=null;this._project=d,this._scope=d._scope,this._element=_,this._pixelRatio||(this._pixelRatio=K&&K.devicePixelRatio||1),this._setElementSize(k.width,k.height),this._viewSize=k,l._views.push(this),l._viewsById[this._id]=this,(this._matrix=new ze)._owner=this,l._focused||(l._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!y.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;_n._focused===this&&(_n._focused=null),_n._views.splice(_n._views.indexOf(this),1),delete _n._viewsById[this._id];var l=this._project;return l._view===this&&(l._view=null),Rt.remove(this._element,this._viewEvents),Rt.remove(K,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:le.each(bt._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(l){this[l]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(l){this._autoUpdate=l,l&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var l=this;Rt.requestAnimationFrame(function(){if(l._requested=!1,l._animate){l.requestUpdate();var d=l._element;(!Gt.getPrefixed(q,"hidden")||"true"===De.getAttribute(d,"keepalive"))&&Gt.isInView(d)&&l._handleFrame()}l._autoUpdate&&l.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){y=this._scope;var l=Date.now()/1e3,d=this._last?l-this._last:0;this._last=l,this.emit("frame",new le({delta:d,time:this._time+=d,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(l,d){var _=this._frameItems;d?(_[l._id]={item:l,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete _[l._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(l){for(var d in this._frameItems){var _=this._frameItems[d];_.item.emit("frame",new le(l,{time:_.time+=l.delta,count:_.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=V},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var l=this._viewSize;return new L(l.width,l.height,this,"setViewSize")},setViewSize:function(){var l=Se.read(arguments),d=l.subtract(this._viewSize);d.isZero()||(this._setElementSize(l.width,l.height),this._viewSize.set(l),this._changed(),this.emit("resize",{size:l,delta:d}),this._autoUpdate&&this.update())},_setElementSize:function(l,d){var _=this._element;_&&(_.width!==l&&(_.width=l),_.height!==d&&(_.height=d))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new ee(new Ve,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Gt.isInView(this._element)},isInserted:function(){return Gt.isInserted(this._element)},getPixelSize:function(l){var _,d=this._element;if(d){var C=d.parentNode,S=q.createElement("div");S.style.fontSize=l,C.appendChild(S),_=parseFloat(Gt.getStyles(S).fontSize),C.removeChild(S)}else _=parseFloat(_);return _},getTextWidth:function(l,d){return 0}},le.each(["rotate","scale","shear","skew"],function(l){var d="rotate"===l;this[l]=function(){var _=arguments,C=(d?le:Ve).read(_),S=Ve.read(_,0,{readNull:!0});return this.transform((new ze)[l](C,S||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var l=new ze;return this.transform(l.translate.apply(l,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var l=Ve.read(arguments);this.translate(this.getCenter().subtract(l))},getZoom:function(){var l=this._decompose().scaling;return(l.x+l.y)/2},setZoom:function(l){this.transform((new ze).scale(l/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(l){var d=this.getRotation();null!=d&&null!=l&&this.rotate(l-d)},getScaling:function(){var l=this._decompose().scaling;return new Ae(l.x,l.y,this,"setScaling")},setScaling:function(){var l=this.getScaling(),d=Ve.read(arguments,0,{clone:!0,readNull:!0});l&&d&&this.scale(d.x/l.x,d.y/l.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},transform:function(l){this._matrix.append(l)},scrollBy:function(){this.translate(Ve.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(Ve.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(Ve.read(arguments))},getEventPoint:function(l){return this.viewToProject(Rt.getOffset(l,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(l,d){return q&&"string"==typeof d&&(d=q.getElementById(d)),new(K?It:_n)(l,d)}}},new function(){if(K){var l,d,D,H,Z,_=!1,C=!1,z=K.navigator;z.pointerEnabled||z.msPointerEnabled?(D="pointerdown MSPointerDown",H="pointermove MSPointerMove",Z="pointerup pointercancel MSPointerUp MSPointerCancel"):(D="touchstart",H="touchmove",Z="touchend touchcancel","ontouchstart"in K&&z.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(D+=" mousedown",H+=" mousemove",Z+=" mouseup"));var $={},R={mouseout:function(Bt){var qt=_n._focused,Pe=Rt.getRelatedTarget(Bt);if(qt&&(!Pe||"HTML"===Pe.nodeName)){var We=Rt.getOffset(Bt,qt._element),Ye=We.x,we=Math.abs,Ue=we(Ye),Dt=Ue-(1<<25);We.x=we(Dt)<Ue?Dt*(Ye<0?-1:1):Ye,N(qt,Bt,qt.viewToProject(We))}},scroll:k};$[D]=function(Bt){var qt=_n._focused=S(Bt);_||(_=!0,qt._handleMouseEvent("mousedown",Bt))},R[H]=function(Bt){var qt=_n._focused;if(!C){var Pe=S(Bt);Pe?qt!==Pe&&(qt&&N(qt,Bt),l||(l=qt),qt=_n._focused=d=Pe):d&&d===qt&&(l&&!l.isInserted()&&(l=null),qt=_n._focused=l,l=null,k())}qt&&N(qt,Bt)},R[D]=function(){C=!0},R[Z]=function(Bt){var qt=_n._focused;qt&&_&&qt._handleMouseEvent("mouseup",Bt),C=_=!1},Rt.add(q,R),Rt.add(K,{load:k});var pe,de,Ee,ke,Xe,je,nt,pt,Y=!1,he=!1,me={doubleclick:"click",mousedrag:"mousemove"},ve=!1,Lt={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:$,_handleMouseEvent:function(Bt,qt,Pe){var We=this._itemEvents,Ye=We.native[Bt],we="mousemove"===Bt,Ue=this._scope.tool,ct=this;function Dt(yi){return We.virtual[yi]||ct.responds(yi)||Ue&&Ue.responds(yi)}we&&_&&Dt("mousedrag")&&(Bt="mousedrag"),Pe||(Pe=this.getEventPoint(qt));var wt=this.getBounds().contains(Pe),nn=Ye&&wt&&ct._project.hitTest(Pe,{tolerance:0,fill:!0,stroke:!0}),On=nn&&nn.item||null,jn=!1,ii={};if(ii[Bt.substr(5)]=!0,Ye&&On!==ke&&(ke&&gt(ke,null,"mouseleave",qt,Pe),On&&gt(On,null,"mouseenter",qt,Pe),ke=On),ve^wt&&(gt(this,null,wt?"mouseenter":"mouseleave",qt,Pe),jn=!0),(wt||ii.drag)&&!Pe.equals(de)&&(Wt(this,On,we?Bt:"mousemove",qt,Pe,de),jn=!0),ve=wt,ii.down&&wt||ii.up&&pe){if(Wt(this,On,Bt,qt,Pe,pe),ii.down){if(pt=On===je&&Date.now()-nt<300,Ee=je=On,!he&&On){for(var Ci=On;Ci&&!Ci.responds("mousedrag");)Ci=Ci._parent;Ci&&(Xe=On)}pe=Pe}else ii.up&&(!he&&On===Ee&&(nt=Date.now(),Wt(this,On,pt?"doubleclick":"click",qt,Pe,pe),pt=!1),Ee=Xe=null);ve=!1,jn=!0}de=Pe,jn&&Ue&&(Y=Ue._handleMouseEvent(Bt,qt,Pe,ii)||Y),!1!==qt.cancelable&&(Y&&!ii.move||ii.down&&Dt("mouseup"))&&qt.preventDefault()},_handleKeyEvent:function(Bt,qt,Pe,We){var Ue,Ye=this._scope,we=Ye.tool;function ct(Dt){Dt.responds(Bt)&&(y=Ye,Dt.emit(Bt,Ue=Ue||new lt(Bt,qt,Pe,We)))}this.isVisible()&&(ct(this),we&&we.responds(Bt)&&ct(we))},_countItemEvent:function(Bt,qt){var Pe=this._itemEvents,We=Pe.native,Ye=Pe.virtual;for(var we in Lt)We[we]=(We[we]||0)+(Lt[we][Bt]||0)*qt;Ye[Bt]=(Ye[Bt]||0)+qt},statics:{updateFocus:k,_resetState:function(){_=C=Y=ve=!1,l=d=pe=de=Ee=ke=Xe=je=nt=pt=null}}}}function S(Bt){var qt=Rt.getTarget(Bt);return qt.getAttribute&&_n._viewsById[qt.getAttribute("id")]}function k(){var Bt=_n._focused;if(!Bt||!Bt.isVisible())for(var qt=0,Pe=_n._views.length;qt<Pe;qt++)if((Bt=_n._views[qt]).isVisible()){_n._focused=d=Bt;break}}function N(Bt,qt,Pe){Bt._handleMouseEvent("mousemove",qt,Pe)}function gt(Bt,qt,Pe,We,Ye,we,Ue){var Dt,ct=!1;function wt(nn,On){if(nn.responds(On)){if(Dt||(Dt=new Yn(On,We,Ye,qt||nn,we?Ye.subtract(we):null)),nn.emit(On,Dt)&&(Y=!0,Dt.prevented&&(he=!0),Dt.stopped))return ct=!0}else{var jn=me[On];if(jn)return wt(nn,jn)}}for(;Bt&&Bt!==Ue&&!wt(Bt,Pe);)Bt=Bt._parent;return ct}function Wt(Bt,qt,Pe,We,Ye,we){return Bt._project.removeOn(Pe),he=Y=!1,Xe&&gt(Xe,null,Pe,We,Ye,we)||qt&&qt!==Xe&&!qt.isDescendant(Xe)&&gt(qt,null,"mousedrag"===Pe?"mousemove":Pe,We,Ye,we,Xe)||gt(Bt,Xe||qt||Bt,Pe,We,Ye,we)}}),It=_n.extend({_class:"CanvasView",initialize:function(d,_){if(!(_ instanceof K.HTMLCanvasElement)){var C=Se.read(arguments,1);if(C.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+le.slice(arguments,1));_=Hr.getCanvas(C)}var S=this._context=_.getContext("2d");if(S.save(),this._pixelRatio=1,!/^off|false$/.test(De.getAttribute(_,"hidpi"))){var k=K.devicePixelRatio||1,N=Gt.getPrefixed(S,"backingStorePixelRatio")||1;this._pixelRatio=k/N}_n.call(this,d,_),this._needsUpdate=!0},remove:function l(){return this._context.restore(),l.base.call(this)},_setElementSize:function l(d,_){var C=this._pixelRatio;if(l.base.call(this,d*C,_*C),1!==C){var S=this._element,k=this._context;if(!De.hasAttribute(S,"resize")){var N=S.style;N.width=d+"px",N.height=_+"px"}k.restore(),k.save(),k.scale(C,C)}},getContext:function(){return this._context},getPixelSize:function l(d){var C,_=y.agent;if(_&&_.firefox)C=l.base.call(this,d);else{var S=this._context,k=S.font;S.font=d+" serif",C=parseFloat(S.font),S.font=k}return C},getTextWidth:function(l,d){var _=this._context,C=_.font,S=0;_.font=l;for(var k=0,N=d.length;k<N;k++)S=Math.max(S,_.measureText(d[k]).width);return _.font=C,S},update:function(){if(!this._needsUpdate)return!1;var l=this._project,d=this._context,_=this._viewSize;return d.clearRect(0,0,_.width+1,_.height+1),l&&l.draw(d,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),rt=le.extend({_class:"Event",initialize:function(d){this.event=d,this.type=d&&d.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return dn.modifiers}}),lt=rt.extend({_class:"KeyEvent",initialize:function(d,_,C,S){this.type=d,this.event=_,this.key=C,this.character=S},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),dn=new function(){var S,k,l={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},d={tab:"\t",space:" ",enter:"\r"},_={},C={},N=new le({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var H=y&&y.agent;return H&&H.mac?this.meta:this.control}}});function z(H){var Z=H.key||H.keyIdentifier;return Z=/^U\+/.test(Z)?String.fromCharCode(parseInt(Z.substr(2),16)):/^Arrow[A-Z]/.test(Z)?Z.substr(5):"Unidentified"===Z||Z===V?String.fromCharCode(H.keyCode):Z,l[Z]||(Z.length>1?le.hyphenate(Z):Z.toLowerCase())}function D(H,Z,$,R){var me,he=_n._focused;if(_[Z]=H,H?C[Z]=$:delete C[Z],Z.length>1&&(me=le.camelize(Z))in N){N[me]=H;var ve=y&&y.agent;if("meta"===me&&ve&&ve.mac)if(H)S={};else{for(var ge in S)ge in C&&D(!1,ge,S[ge],R);S=null}}else H&&S&&(S[Z]=$);he&&he._handleKeyEvent(H?"keydown":"keyup",R,Z,$)}return Rt.add(q,{keydown:function(H){var Z=z(H),$=y&&y.agent;Z.length>1||$&&$.chrome&&(H.altKey||$.mac&&H.metaKey||!$.mac&&H.ctrlKey)?D(!0,Z,d[Z]||(Z.length>1?"":Z),H):k=Z},keypress:function(H){if(k){var Z=z(H),$=H.charCode,R=$>=32?String.fromCharCode($):Z.length>1?"":Z;Z!==k&&(Z=R.toLowerCase()),D(!0,Z,R,H),k=null}},keyup:function(H){var Z=z(H);Z in C&&D(!1,Z,C[Z],H)}}),Rt.add(K,{blur:function(H){for(var Z in C)D(!1,Z,C[Z],H)}}),{modifiers:N,isDown:function(H){return!!_[H]}}},Yn=rt.extend({_class:"MouseEvent",initialize:function(d,_,C,S,k){this.type=d,this.event=_,this.point=C,this.target=S,this.delta=k},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Ti=rt.extend({_class:"ToolEvent",_item:null,initialize:function(d,_,C){this.tool=d,this.type=_,this.event=C},_choosePoint:function(l,d){return l||(d?d.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(l){this._point=l},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(l){this._lastPoint=l},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(l){this._downPoint=l},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(l){this._middlePoint=l},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(l){this._delta=l},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(l){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=l},getItem:function(){if(!this._item){var l=this.tool._scope.project.hitTest(this.getPoint());if(l){for(var d=l.item,_=d._parent;/^(Group|CompoundPath)$/.test(_._class);)d=_,_=_._parent;this._item=d}}return this._item},setItem:function(l){this._item=l},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Di=xe.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(d){xe.call(this),this._moveCount=-1,this._downCount=-1,this.set(d)},getMinDistance:function(){return this._minDistance},setMinDistance:function(l){this._minDistance=l,null!=l&&null!=this._maxDistance&&l>this._maxDistance&&(this._maxDistance=l)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(l){this._maxDistance=l,null!=this._minDistance&&null!=l&&l<this._minDistance&&(this._minDistance=l)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(l){this._minDistance=this._maxDistance=l},_handleMouseEvent:function(l,d,_,C){y=this._scope,C.drag&&!this.responds(l)&&(l="mousemove");var S=C.move||C.drag,k=this.responds(l),N=this.minDistance,z=this.maxDistance,D=!1,H=this;function Z(R,Y){var he=_,me=S?H._point:H._downPoint||he;if(S){if(H._moveCount>=0&&he.equals(me))return!1;if(me&&(null!=R||null!=Y)){var ve=he.subtract(me),ge=ve.getLength();if(ge<(R||0))return!1;Y&&(he=me.add(ve.normalize(Math.min(ge,Y))))}H._moveCount++}return H._point=he,H._lastPoint=me||he,C.down&&(H._moveCount=-1,H._downPoint=he,H._downCount++),!0}function $(){k&&(D=H.emit(l,new Ti(H,l,d))||D)}if(C.down)Z(),$();else if(C.up)Z(null,z),$();else if(k)for(;Z(N,z);)$();return D}}),us=le.extend(Te,{_class:"Tween",statics:{easings:new le({linear:function(l){return l},easeInQuad:function(l){return l*l},easeOutQuad:function(l){return l*(2-l)},easeInOutQuad:function(l){return l<.5?2*l*l:2*(2-l)*l-1},easeInCubic:function(l){return l*l*l},easeOutCubic:function(l){return--l*l*l+1},easeInOutCubic:function(l){return l<.5?4*l*l*l:(l-1)*(2*l-2)*(2*l-2)+1},easeInQuart:function(l){return l*l*l*l},easeOutQuart:function(l){return 1- --l*l*l*l},easeInOutQuart:function(l){return l<.5?8*l*l*l*l:1-8*--l*l*l*l},easeInQuint:function(l){return l*l*l*l*l},easeOutQuint:function(l){return 1+--l*l*l*l*l},easeInOutQuint:function(l){return l<.5?16*l*l*l*l*l:1+16*--l*l*l*l*l}})},initialize:function l(d,_,C,S,k,N){this.object=d;var z=typeof k,D="function"===z;this.type=D?z:"string"===z?k:"linear",this.easing=D?k:l.easings[this.type],this.duration=S,this.running=!1,this._then=null,this._startTime=null;var H=_||C;this._keys=H?Object.keys(H):[],this._parsedKeys=this._parseKeys(this._keys),this._from=H&&this._getState(_),this._to=H&&this._getState(C),!1!==N&&this.start()},then:function(l){return this._then=l,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(l){if(this.running){l>=1&&(l=1,this.running=!1);for(var d=this.easing(l),_=this._keys,C=function(Z){return"function"==typeof Z?Z(d,l):Z},S=0,k=_&&_.length;S<k;S++){var N=_[S],z=C(this._from[N]),D=C(this._to[N]),H=z&&D&&z.__add&&D.__add?D.__subtract(z).__multiply(d).__add(z):(D-z)*d+z;this._setProperty(this._parsedKeys[N],H)}this.responds("update")&&this.emit("update",new le({progress:l,factor:d})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(l){var d=this._startTime,_=d?(l-d)/this.duration:0;d||(this._startTime=l),this.update(_)},_getState:function(l){for(var d=this._keys,_={},C=0,S=d.length;C<S;C++){var D,k=d[C],N=this._parsedKeys[k],z=this._getProperty(N);if(l){var H=this._resolveValue(z,l[k]);this._setProperty(N,H),D=(D=this._getProperty(N))&&D.clone?D.clone():D,this._setProperty(N,z)}else D=z&&z.clone?z.clone():z;_[k]=D}return _},_resolveValue:function(l,d){if(d){if(Array.isArray(d)&&2===d.length){var _=d[0];return _&&_.match&&_.match(/^[+\-\*\/]=/)?this._calculate(l,_[0],d[1]):d}if("string"==typeof d){var C=d.match(/^[+\-*/]=(.*)/);if(C){var S=JSON.parse(C[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(l,d[0],S)}}}return d},_calculate:function(l,d,_){return y.PaperScript.calculateBinary(l,d,_)},_parseKeys:function(l){for(var d={},_=0,C=l.length;_<C;_++){var S=l[_],k=S.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");d[S]=k.split("/")}return d},_getProperty:function(l,d){for(var _=this.object,C=0,S=l.length-(d||0);C<S&&_;C++)_=_[l[C]];return _},_setProperty:function(l,d){var _=this._getProperty(l,1);_&&(_[l[l.length-1]]=d)}}),vs_request=function(l){var d=new ie.XMLHttpRequest;return d.open((l.method||"get").toUpperCase(),l.url,le.pick(l.async,!0)),l.mimeType&&d.overrideMimeType(l.mimeType),d.onload=function(){var _=d.status;0===_||200===_?l.onLoad&&l.onLoad.call(d,d.responseText):d.onerror()},d.onerror=function(){var _=d.status,C='Could not load "'+l.url+'" (Status: '+_+")";if(!l.onError)throw new Error(C);l.onError(C,_)},d.send(null)},Hr=le.exports.CanvasProvider={canvases:[],getCanvas:function(l,d,_){if(!K)return null;var C,S=!0;"object"==typeof l&&(d=l.height,l=l.width),this.canvases.length?C=this.canvases.pop():(C=q.createElement("canvas"),S=!1);var k=C.getContext("2d",_||{});if(!k)throw new Error("Canvas "+C+" is unable to provide a 2D context.");return C.width===l&&C.height===d?S&&k.clearRect(0,0,l+1,d+1):(C.width=l,C.height=d),k.save(),C},getContext:function(l,d,_){var C=this.getCanvas(l,d,_);return C?C.getContext("2d",_||{}):null},release:function(l){var d=l&&l.canvas?l.canvas:l;d&&d.getContext&&(d.getContext("2d").restore(),this.canvases.push(d))}},Ds=new function(){var C,S,k,N,z,D,H,Z,$,R,Y,l=Math.min,d=Math.max,_=Math.abs;function he(ke,Xe,je){return.2989*ke+.587*Xe+.114*je}function me(ke,Xe,je,gt){var pt=gt-he(ke,Xe,je),Wt=(gt=he($=ke+pt,R=Xe+pt,Y=je+pt),l($,R,Y)),Lt=d($,R,Y);if(Wt<0){var Bt=gt-Wt;$=gt+($-gt)*gt/Bt,R=gt+(R-gt)*gt/Bt,Y=gt+(Y-gt)*gt/Bt}if(Lt>255){var qt=255-gt,Pe=Lt-gt;$=gt+($-gt)*qt/Pe,R=gt+(R-gt)*qt/Pe,Y=gt+(Y-gt)*qt/Pe}}function ve(ke,Xe,je){return d(ke,Xe,je)-l(ke,Xe,je)}function ge(ke,Xe,je,nt){var Lt,pt=[ke,Xe,je],gt=d(ke,Xe,je),Wt=l(ke,Xe,je);Lt=0===l(Wt=Wt===ke?0:Wt===Xe?1:2,gt=gt===ke?0:gt===Xe?1:2)?1===d(Wt,gt)?2:1:0,pt[gt]>pt[Wt]?(pt[Lt]=(pt[Lt]-pt[Wt])*nt/(pt[gt]-pt[Wt]),pt[gt]=nt):pt[Lt]=pt[gt]=0,pt[Wt]=0,$=pt[0],R=pt[1],Y=pt[2]}var pe={multiply:function(){$=z*C/255,R=D*S/255,Y=H*k/255},screen:function(){$=z+C-z*C/255,R=D+S-D*S/255,Y=H+k-H*k/255},overlay:function(){$=z<128?2*z*C/255:255-2*(255-z)*(255-C)/255,R=D<128?2*D*S/255:255-2*(255-D)*(255-S)/255,Y=H<128?2*H*k/255:255-2*(255-H)*(255-k)/255},"soft-light":function(){var ke=C*z/255;$=ke+z*(255-(255-z)*(255-C)/255-ke)/255,R=(ke=S*D/255)+D*(255-(255-D)*(255-S)/255-ke)/255,Y=(ke=k*H/255)+H*(255-(255-H)*(255-k)/255-ke)/255},"hard-light":function(){$=C<128?2*C*z/255:255-2*(255-C)*(255-z)/255,R=S<128?2*S*D/255:255-2*(255-S)*(255-D)/255,Y=k<128?2*k*H/255:255-2*(255-k)*(255-H)/255},"color-dodge":function(){$=0===z?0:255===C?255:l(255,255*z/(255-C)),R=0===D?0:255===S?255:l(255,255*D/(255-S)),Y=0===H?0:255===k?255:l(255,255*H/(255-k))},"color-burn":function(){$=255===z?255:0===C?0:d(0,255-255*(255-z)/C),R=255===D?255:0===S?0:d(0,255-255*(255-D)/S),Y=255===H?255:0===k?0:d(0,255-255*(255-H)/k)},darken:function(){$=z<C?z:C,R=D<S?D:S,Y=H<k?H:k},lighten:function(){$=z>C?z:C,R=D>S?D:S,Y=H>k?H:k},difference:function(){($=z-C)<0&&($=-$),(R=D-S)<0&&(R=-R),(Y=H-k)<0&&(Y=-Y)},exclusion:function(){$=z+C*(255-z-z)/255,R=D+S*(255-D-D)/255,Y=H+k*(255-H-H)/255},hue:function(){ge(C,S,k,ve(z,D,H)),me($,R,Y,he(z,D,H))},saturation:function(){ge(z,D,H,ve(C,S,k)),me($,R,Y,he(z,D,H))},luminosity:function(){me(z,D,H,he(C,S,k))},color:function(){me(C,S,k,he(z,D,H))},add:function(){$=l(z+C,255),R=l(D+S,255),Y=l(H+k,255)},subtract:function(){$=d(z-C,0),R=d(D-S,0),Y=d(H-k,0)},average:function(){$=(z+C)/2,R=(D+S)/2,Y=(H+k)/2},negation:function(){$=255-_(255-C-z),R=255-_(255-S-D),Y=255-_(255-k-H)}},de=this.nativeModes=le.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(ke){this[ke]=!0},{}),Ee=Hr.getContext(1,1,{willReadFrequently:!0});Ee&&(le.each(pe,function(ke,Xe){var je="darken"===Xe,nt=!1;Ee.save();try{Ee.fillStyle=je?"#300":"#a00",Ee.fillRect(0,0,1,1),Ee.globalCompositeOperation=Xe,Ee.globalCompositeOperation===Xe&&(Ee.fillStyle=je?"#a00":"#300",Ee.fillRect(0,0,1,1),nt=Ee.getImageData(0,0,1,1).data[0]!==je?170:51)}catch{}Ee.restore(),de[Xe]=nt}),Hr.release(Ee)),this.process=function(ke,Xe,je,nt,pt){var gt=Xe.canvas,Wt="normal"===ke;if(Wt||de[ke])je.save(),je.setTransform(1,0,0,1,0,0),je.globalAlpha=nt,Wt||(je.globalCompositeOperation=ke),je.drawImage(gt,pt.x,pt.y),je.restore();else{var Lt=pe[ke];if(!Lt)return;for(var Bt=je.getImageData(pt.x,pt.y,gt.width,gt.height),qt=Bt.data,Pe=Xe.getImageData(0,0,gt.width,gt.height).data,We=0,Ye=qt.length;We<Ye;We+=4){C=Pe[We],z=qt[We],S=Pe[We+1],D=qt[We+1],k=Pe[We+2],H=qt[We+2],N=Pe[We+3],Z=qt[We+3],Lt();var we=N*nt/255,Ue=1-we;qt[We]=we*$+Ue*z,qt[We+1]=we*R+Ue*D,qt[We+2]=we*Y+Ue*H,qt[We+3]=N*nt+Ue*Z}je.putImageData(Bt,pt.x,pt.y)}}},nr=new function(){var l="http://www.w3.org/2000/svg",d="http://www.w3.org/2000/xmlns",_="http://www.w3.org/1999/xlink",C={href:_,xlink:d,xmlns:d+"/","xmlns:xlink":d+"/"};function N(z,D,H){for(var Z in D){var $=D[Z],R=C[Z];"number"==typeof $&&H&&($=H.number($)),R?z.setAttributeNS(R,Z,$):z.setAttribute(Z,$)}return z}return{svg:l,xmlns:d,xlink:_,create:function S(z,D,H){return N(q.createElementNS(l,z),D,H)},get:function k(z,D){var H=C[D],Z=H?z.getAttributeNS(H,D):z.getAttribute(D);return"null"===Z?null:Z},set:N}},fr=le.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(l,d){return!d&&(l instanceof xt||l instanceof on||l instanceof St)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(l,d){var _=le.capitalize(d),C=l[2];this[d]={type:l[1],property:d,attribute:l[0],toSVG:C,fromSVG:C&&le.each(C,function(S,k){this[S]=k},{}),exportFilter:l[3],get:"get"+_,set:"set"+_}},{});new function(){var l;function d(pe,de,Ee){var je,ke=new le,Xe=pe.getTranslation();if(de&&(pe.isInvertible()?(je=(pe=pe._shiftless())._inverseTransform(Xe),Xe=null):je=new Ve,ke[Ee?"cx":"x"]=je.x,ke[Ee?"cy":"y"]=je.y),!pe.isIdentity()){var nt=pe.decompose();if(nt){var pt=[],gt=nt.rotation,Wt=nt.scaling,Lt=nt.skewing;Xe&&!Xe.isZero()&&pt.push("translate("+l.point(Xe)+")"),gt&&pt.push("rotate("+l.number(gt)+")"),(!Re.isZero(Wt.x-1)||!Re.isZero(Wt.y-1))&&pt.push("scale("+l.point(Wt)+")"),Lt.x&&pt.push("skewX("+l.number(Lt.x)+")"),Lt.y&&pt.push("skewY("+l.number(Lt.y)+")"),ke.transform=pt.join(" ")}else ke.transform="matrix("+pe.getValues().join(",")+")"}return ke}function _(pe,de){for(var Ee=d(pe._matrix),ke=pe._children,Xe=nr.create("g",Ee,l),je=0,nt=ke.length;je<nt;je++){var pt=ke[je],gt=ve(pt,de);if(gt)if(pt.isClipMask()){var Wt=nr.create("clipPath");Wt.appendChild(gt),he(pt,Wt,"clip"),nr.set(Xe,{"clip-path":"url(#"+Wt.id+")"})}else Xe.appendChild(gt)}return Xe}function k(pe){var de=pe._type,Ee=pe._radius,ke=d(pe._matrix,!0,"rectangle"!==de);if("rectangle"===de){de="rect";var Xe=pe._size,je=Xe.width,nt=Xe.height;ke.x-=je/2,ke.y-=nt/2,ke.width=je,ke.height=nt,Ee.isZero()&&(Ee=null)}return Ee&&("circle"===de?ke.r=Ee:(ke.rx=Ee.width,ke.ry=Ee.height)),nr.create(de,ke,l)}var R,Z={Group:_,Layer:_,Raster:function C(pe,de){var Ee=d(pe._matrix,!0),ke=pe.getSize(),Xe=pe.getImage();return Ee.x-=ke.width/2,Ee.y-=ke.height/2,Ee.width=ke.width,Ee.height=ke.height,Ee.href=0==de.embedImages&&Xe&&Xe.src||pe.toDataURL(),nr.create("image",Ee,l)},Path:function S(pe,de){var Ee=de.matchShapes;if(Ee){var ke=pe.toShape(!1);if(ke)return k(ke)}var nt,Xe=pe._segments,je=Xe.length,pt=d(pe._matrix);if(Ee&&je>=2&&!pe.hasHandles())if(je>2){nt=pe._closed?"polygon":"polyline";for(var gt=[],Wt=0;Wt<je;Wt++)gt.push(l.point(Xe[Wt]._point));pt.points=gt.join(" ")}else{nt="line";var Lt=Xe[0]._point,Bt=Xe[1]._point;pt.set({x1:Lt.x,y1:Lt.y,x2:Bt.x,y2:Bt.y})}else nt="path",pt.d=pe.getPathData(null,de.precision);return nr.create(nt,pt,l)},Shape:k,CompoundPath:function N(pe,de){var Ee=d(pe._matrix),ke=pe.getPathData(null,de.precision);return ke&&(Ee.d=ke),nr.create("path",Ee,l)},SymbolItem:function z(pe,de){var Ee=d(pe._matrix,!0),ke=pe._definition,Xe=Y(ke,"symbol"),je=ke._item,nt=je.getStrokeBounds();return Xe||((Xe=nr.create("symbol",{viewBox:l.rectangle(nt)})).appendChild(ve(je,de)),he(ke,Xe,"symbol")),Ee.href="#"+Xe.id,Ee.x+=nt.x,Ee.y+=nt.y,Ee.width=nt.width,Ee.height=nt.height,Ee.overflow="visible",nr.create("use",Ee,l)},PointText:function H(pe){var de=nr.create("text",d(pe._matrix,!0),l);return de.textContent=pe._content,de}};function Y(pe,de){return R||(R={ids:{},svgs:{}}),pe&&R.svgs[de+"-"+(pe._id||pe.__id||(pe.__id=Le.get("svg")))]}function he(pe,de,Ee){R||Y();var ke=R.ids[Ee]=(R.ids[Ee]||0)+1;de.id=Ee+"-"+ke,R.svgs[Ee+"-"+(pe._id||pe.__id)]=de}function me(pe,de){var Ee=pe,ke=null;if(R){for(var Xe in Ee="svg"===pe.nodeName.toLowerCase()&&pe,R.svgs)ke||(Ee||(Ee=nr.create("svg")).appendChild(pe),ke=Ee.insertBefore(nr.create("defs"),Ee.firstChild)),ke.appendChild(R.svgs[Xe]);R=null}return de.asString?(new ie.XMLSerializer).serializeToString(Ee):Ee}function ve(pe,de,Ee){var ke=Z[pe._class],Xe=ke&&ke(pe,de);if(Xe){var je=de.onExport;je&&(Xe=je(pe,Xe,de)||Xe);var nt=JSON.stringify(pe._data);nt&&"{}"!==nt&&"null"!==nt&&Xe.setAttribute("data-paper-data",nt)}return Xe&&function $(pe,de,Ee){var ke={},Xe=!Ee&&pe.getParent(),je=[];return null!=pe._name&&(ke.id=pe._name),le.each(fr,function(nt){var pt=nt.get,gt=nt.type,Wt=pe[pt]();if(nt.exportFilter?nt.exportFilter(pe,Wt):!Xe||!le.equals(Xe[pt](),Wt)){if("color"===gt&&null!=Wt){var Lt=Wt.getAlpha();Lt<1&&(ke[nt.attribute+"-opacity"]=Lt)}"style"===gt?je.push(nt.attribute+": "+Wt):ke[nt.attribute]=null==Wt?"none":"color"===gt?Wt.gradient?function D(pe){var de=Y(pe,"color");if(!de){var nt,Ee=pe.getGradient(),ke=Ee._radial,Xe=pe.getOrigin(),je=pe.getDestination();if(ke){nt={cx:Xe.x,cy:Xe.y,r:Xe.getDistance(je)};var pt=pe.getHighlight();pt&&(nt.fx=pt.x,nt.fy=pt.y)}else nt={x1:Xe.x,y1:Xe.y,x2:je.x,y2:je.y};nt.gradientUnits="userSpaceOnUse",de=nr.create((ke?"radial":"linear")+"Gradient",nt,l);for(var gt=Ee._stops,Wt=0,Lt=gt.length;Wt<Lt;Wt++){var Bt=gt[Wt],qt=Bt._color,Pe=qt.getAlpha();nt={offset:Bt._offset??Wt/(Lt-1)},qt&&(nt["stop-color"]=qt.toCSS(!0)),Pe<1&&(nt["stop-opacity"]=Pe),de.appendChild(nr.create("stop",nt,l))}he(pe,de,"color")}return"url(#"+de.id+")"}(Wt):Wt.toCSS(!0):"array"===gt?Wt.join(","):"lookup"===gt?nt.toSVG[Wt]:Wt}}),je.length&&(ke.style=je.join(";")),1===ke.opacity&&delete ke.opacity,pe._visible||(ke.visibility="hidden"),nr.set(de,ke,l)}(pe,Xe,Ee)}function ge(pe){return pe||(pe={}),l=new Q(pe.precision),pe}bt.inject({exportSVG:function(pe){return me(ve(this,pe=ge(pe),!0),pe)}}),st.inject({exportSVG:function(pe){pe=ge(pe);var de=this._children,Ee=this.getView(),ke=le.pick(pe.bounds,"view"),Xe=pe.matrix||"view"===ke&&Ee._matrix,je=Xe&&ze.read([Xe]),nt="view"===ke?new ee([0,0],Ee.getViewSize()):"content"===ke?bt._getBounds(de,je,{stroke:!0}).rect:ee.read([ke],0,{readNull:!0}),pt={version:"1.1",xmlns:nr.svg,"xmlns:xlink":nr.xlink};nt&&(pt.width=nt.width,pt.height=nt.height,(nt.x||0===nt.x||nt.y||0===nt.y)&&(pt.viewBox=l.rectangle(nt)));var gt=nr.create("svg",pt,l),Wt=gt;je&&!je.isIdentity()&&(Wt=gt.appendChild(nr.create("g",d(je),l)));for(var Lt=0,Bt=de.length;Lt<Bt;Lt++)Wt.appendChild(ve(de[Lt],pe,!0));return me(gt,pe)}})},new function(){var d,l={};function _(de,Ee,ke,Xe,je,nt){var pt=nr.get(de,Ee)||nt,gt=null==pt?Xe?null:ke?"":0:ke?pt:parseFloat(pt);return/%\s*$/.test(pt)?gt/100*(je?1:d[/x|^width/.test(Ee)?"width":"height"]):gt}function C(de,Ee,ke,Xe,je,nt,pt){return Ee=_(de,Ee||"x",!1,Xe,je,nt),ke=_(de,ke||"y",!1,Xe,je,pt),!Xe||null!=Ee&&null!=ke?new Ve(Ee,ke):null}function S(de,Ee,ke,Xe,je){return Ee=_(de,Ee||"width",!1,Xe,je),ke=_(de,ke||"height",!1,Xe,je),!Xe||null!=Ee&&null!=ke?new Se(Ee,ke):null}function k(de,Ee,ke){return"none"===de?null:"number"===Ee?parseFloat(de):"array"===Ee?de?de.split(/[\s,]+/g).map(parseFloat):[]:"color"===Ee?ve(de)||de:"lookup"===Ee?ke[de]:de}function N(de,Ee,ke,Xe){var je=de.childNodes,nt="clippath"===Ee,pt="defs"===Ee,gt=new ut,Wt=gt._project,Lt=Wt._currentStyle,Bt=[];if(!nt&&!pt&&(gt=me(gt,de,Xe),Wt._currentStyle=gt._style.clone()),Xe)for(var qt=de.querySelectorAll("defs"),Pe=0,We=qt.length;Pe<We;Pe++)ge(qt[Pe],ke,!1);for(Pe=0,We=je.length;Pe<We;Pe++){var we,Ye=je[Pe];1===Ye.nodeType&&!/^defs$/i.test(Ye.nodeName)&&(we=ge(Ye,ke,!1))&&!(we instanceof Qt)&&Bt.push(we)}return gt.addChildren(Bt),nt&&(gt=me(gt.reduce(),de,Xe)),Wt._currentStyle=Lt,(nt||pt)&&(gt.remove(),gt=null),gt}function z(de,Ee){for(var ke=de.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),Xe=[],je=0,nt=ke.length;je<nt;je+=2)Xe.push(new Ve(parseFloat(ke[je]),parseFloat(ke[je+1])));var pt=new Jt(Xe);return"polygon"===Ee&&pt.closePath(),pt}function H(de,Ee){var je,ke=(_(de,"href",!0)||"").substring(1),Xe="radialgradient"===Ee;if(ke)(je=l[ke].getGradient())._radial^Xe&&((je=je.clone())._radial=Xe);else{for(var nt=de.childNodes,pt=[],gt=0,Wt=nt.length;gt<Wt;gt++){var Lt=nt[gt];1===Lt.nodeType&&pt.push(me(new li,Lt))}je=new Ot(pt,Xe)}var Bt,qt,Pe,We="userSpaceOnUse"!==_(de,"gradientUnits",!0);return Xe?(qt=(Bt=C(de,"cx","cy",!1,We,"50%","50%")).add(_(de,"r",!1,!1,We,"50%"),0),Pe=C(de,"fx","fy",!0,We)):(Bt=C(de,"x1","y1",!1,We,"0%","0%"),qt=C(de,"x2","y2",!1,We,"100%","0%")),me(new Ft(je,Bt,qt,Pe),de)._scaleToBounds=We,null}var Z={"#document":function(de,Ee,ke,Xe){for(var je=de.childNodes,nt=0,pt=je.length;nt<pt;nt++){var gt=je[nt];if(1===gt.nodeType)return ge(gt,ke,Xe)}},g:N,svg:N,clippath:N,polygon:z,polyline:z,path:function D(de){return xt.create(de.getAttribute("d"))},lineargradient:H,radialgradient:H,image:function(de){var Ee=new Ct(_(de,"href",!0));return Ee.on("load",function(){var ke=S(de);this.setSize(ke);var Xe=C(de).add(ke.divide(2));this._matrix.append((new ze).translate(Xe))}),Ee},symbol:function(de,Ee,ke,Xe){return new Qt(N(de,Ee,ke,Xe),!0)},defs:N,use:function(de){var Ee=(_(de,"href",!0)||"").substring(1),ke=l[Ee],Xe=C(de);return ke?ke instanceof Qt?ke.place(Xe):ke.clone().translate(Xe):null},circle:function(de){return new on.Circle(C(de,"cx","cy"),_(de,"r"))},ellipse:function(de){return new on.Ellipse({center:C(de,"cx","cy"),radius:S(de,"rx","ry")})},rect:function(de){return new on.Rectangle(new ee(C(de),S(de)),S(de,"rx","ry"))},line:function(de){return new Jt.Line(C(de,"x1","y1"),C(de,"x2","y2"))},text:function(de){var Ee=new Oe(C(de).add(C(de,"dx","dy")));return Ee.setContent(de.textContent.trim()||""),Ee},switch:N};function $(de,Ee,ke,Xe){if(de.transform){for(var je=(Xe.getAttribute(ke)||"").split(/\)\s*/g),nt=new ze,pt=0,gt=je.length;pt<gt;pt++){var Wt=je[pt];if(!Wt)break;for(var Lt=Wt.split(/\(\s*/),Bt=Lt[0],qt=Lt[1].split(/[\s,]+/g),Pe=0,We=qt.length;Pe<We;Pe++)qt[Pe]=parseFloat(qt[Pe]);switch(Bt){case"matrix":nt.append(new ze(qt[0],qt[1],qt[2],qt[3],qt[4],qt[5]));break;case"rotate":nt.rotate(qt[0],qt[1]||0,qt[2]||0);break;case"translate":nt.translate(qt[0],qt[1]||0);break;case"scale":nt.scale(qt);break;case"skewX":nt.skew(qt[0],0);break;case"skewY":nt.skew(0,qt[0])}}de.transform(nt)}}function R(de,Ee,ke){var Xe="fill-opacity"===ke?"getFillColor":"getStrokeColor",je=de[Xe]&&de[Xe]();je&&je.setAlpha(parseFloat(Ee))}var Y=le.set(le.each(fr,function(de){this[de.attribute]=function(Ee,ke){if(Ee[de.set]&&(Ee[de.set](k(ke,de.type,de.fromSVG)),"color"===de.type)){var Xe=Ee[de.get]();if(Xe&&Xe._scaleToBounds){var je=Ee.getBounds();Xe.transform((new ze).translate(je.getPoint()).scale(je.getSize()))}}}},{}),{id:function(de,Ee){l[Ee]=de,de.setName&&de.setName(Ee)},"clip-path":function(de,Ee){var ke=ve(Ee);if(ke){if((ke=ke.clone()).setClipMask(!0),!(de instanceof ut))return new ut(ke,de);de.insertChild(0,ke)}},gradientTransform:$,transform:$,"fill-opacity":R,"stroke-opacity":R,visibility:function(de,Ee){de.setVisible&&de.setVisible("visible"===Ee)},display:function(de,Ee){de.setVisible&&de.setVisible(null!==Ee)},"stop-color":function(de,Ee){de.setColor&&de.setColor(Ee)},"stop-opacity":function(de,Ee){de._color&&de._color.setAlpha(parseFloat(Ee))},offset:function(de,Ee){if(de.setOffset){var ke=Ee.match(/(.*)%$/);de.setOffset(ke?ke[1]/100:parseFloat(Ee))}},viewBox:function(de,Ee,ke,Xe,je){var gt,nt=new ee(k(Ee,"array")),pt=S(Xe,null,null,!0);if(de instanceof ut){var Lt=pt?pt.divide(nt.getSize()):1,Wt=(new ze).scale(Lt).translate(nt.getPoint().negate());gt=de}else de instanceof Qt&&(pt&&nt.setSize(pt),gt=de._item);if(gt){if("visible"!==he(Xe,"overflow",je)){var Bt=new on.Rectangle(nt);Bt.setClipMask(!0),gt.addChild(Bt)}Wt&&gt.transform(Wt)}}});function he(de,Ee,ke){var Xe=de.attributes[Ee],je=Xe&&Xe.value;if(!je&&de.style){var nt=le.camelize(Ee);!(je=de.style[nt])&&ke.node[nt]!==ke.parent[nt]&&(je=ke.node[nt])}return je?"none"===je?null:je:V}function me(de,Ee,ke){var Xe=Ee.parentNode,je={node:Gt.getStyles(Ee)||{},parent:!ke&&!/^defs$/i.test(Xe.tagName)&&Gt.getStyles(Xe)||{}};return le.each(Y,function(nt,pt){var gt=he(Ee,pt,je);de=gt!==V&&nt(de,gt,pt,Ee,je)||de}),de}function ve(de){var Ee=de&&de.match(/\((?:["'#]*)([^"')]+)/),ke=Ee&&Ee[1],Xe=ke&&l[K?ke.replace(K.location.href.split("#")[0]+"#",""):ke];return Xe&&Xe._scaleToBounds&&((Xe=Xe.clone())._scaleToBounds=!0),Xe}function ge(de,Ee,ke){var pt,gt,Wt,Xe=de.nodeName.toLowerCase(),je="#document"!==Xe,nt=q.body;ke&&je&&(d=y.getView().getSize(),d=S(de,null,null,!0)||d,pt=nr.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),gt=de.parentNode,Wt=de.nextSibling,pt.appendChild(de),nt.appendChild(pt));var Lt=y.settings,Bt=Lt.applyMatrix,qt=Lt.insertItems;Lt.applyMatrix=!1,Lt.insertItems=!1;var Pe=Z[Xe],We=Pe&&Pe(de,Xe,Ee,ke)||null;if(Lt.insertItems=qt,Lt.applyMatrix=Bt,We){je&&!(We instanceof ut)&&(We=me(We,de,ke));var Ye=Ee.onImport,we=je&&de.getAttribute("data-paper-data");Ye&&(We=Ye(de,We,Ee)||We),Ee.expandShapes&&We instanceof on&&(We.remove(),We=We.toPath()),we&&(We._data=JSON.parse(we))}return pt&&(nt.removeChild(pt),gt&&(Wt?gt.insertBefore(de,Wt):gt.appendChild(de))),ke&&(l={},We&&le.pick(Ee.applyMatrix,Bt)&&We.matrix.apply(!0,!0)),We}function pe(de,Ee,ke){if(!de)return null;Ee="function"==typeof Ee?{onLoad:Ee}:Ee||{};var Xe=y,je=null;function nt(Lt){try{var Bt="object"==typeof Lt?Lt:(new ie.DOMParser).parseFromString(Lt.trim(),"image/svg+xml");if(!Bt.nodeName)throw Bt=null,new Error("Unsupported SVG source: "+de);y=Xe,je=ge(Bt,Ee,!0),(!Ee||!1!==Ee.insert)&&ke._insertItem(V,je);var qt=Ee.onLoad;qt&&qt(je,Lt)}catch(Pe){pt(Pe)}}function pt(Lt,Bt){var qt=Ee.onError;if(!qt)throw new Error(Lt);qt(Lt,Bt)}if("string"!=typeof de||/^[\s\S]*</.test(de)){if(typeof File<"u"&&de instanceof File){var Wt=new FileReader;return Wt.onload=function(){nt(Wt.result)},Wt.onerror=function(){pt(Wt.error)},Wt.readAsText(de)}nt(de)}else{var gt=q.getElementById(de);gt?nt(gt):vs_request({url:de,async:!0,onLoad:nt,onError:pt})}return je}bt.inject({importSVG:function(de,Ee){return pe(de,Ee,this)}}),st.inject({importSVG:function(de,Ee){return this.activate(),pe(de,Ee,this)}})},le.exports.PaperScript=function(){var _,C,ve,l=this,d=l.acorn;if(!d)try{d=ae(7077)}catch{}function S(me,ve){return(l.acorn||d).parse(me,ve)}d||(d=_=C={},ve=function(me){"use strict";var ve,ge,pe,de;me.version="0.5.0",me.parse=function(kn,ui){return ge=String(kn),pe=ge.length,ke(ui),Ul(),function ml(kn){Ye=we=je,ve.locations&&(Ue=new tl),ct=wt=null,Dt=[],Sl();var ui=kn||Rl(),Wi=!0;for(kn||(ui.body=[]);Lt!==Ei;){var ir=Ol();ui.body.push(ir),Wi&&ud(ir)&&Qd(!0),Wi=!1}return Ha(ui,"Program")}(ve.program)};var Ee=me.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function ke(kn){for(var ui in ve=kn||{},Ee)Object.prototype.hasOwnProperty.call(ve,ui)||(ve[ui]=Ee[ui]);de=ve.sourceFile||null}var je,nt,pt,gt,Wt,Lt,Bt,qt,Pe,We,Ye,we,Ue,ct,Dt,wt,Xe=me.getLineInfo=function(kn,ui){for(var Wi=1,ir=0;;){no.lastIndex=ir;var pa=no.exec(kn);if(!(pa&&pa.index<ui))break;++Wi,ir=pa.index+pa[0].length}return{line:Wi,column:ui-ir}};function nn(kn,ui){var Wi=Xe(ge,kn),ir=new SyntaxError(ui+=" ("+Wi.line+":"+Wi.column+")");throw ir.pos=kn,ir.loc=Wi,ir.raisedAt=je,ir}me.tokenize=function(kn,ui){ge=String(kn),pe=ge.length,ke(ui),Ul();var Wi={};function ir(pa){return we=pt,Sl(pa),Wi.start=nt,Wi.end=pt,Wi.startLoc=gt,Wi.endLoc=Wt,Wi.type=Lt,Wi.value=Bt,Wi}return ir.jumpTo=function(pa,Ia){if(je=pa,ve.locations){Pe=1,We=no.lastIndex=0;for(var Ca;(Ca=no.exec(ge))&&Ca.index<pa;)++Pe,We=Ca.index+Ca[0].length}qt=Ia,hs()},ir};var On=[],jn={type:"num"},ii={type:"regexp"},Ci={type:"string"},yi={type:"name"},Ei={type:"eof"},Ai={keyword:"break"},or={keyword:"case",beforeExpr:!0},is={keyword:"catch"},_r={keyword:"continue"},ws={keyword:"debugger"},wr={keyword:"default"},rs={keyword:"do",isLoop:!0},ss={keyword:"else",beforeExpr:!0},Xr={keyword:"finally"},Kr={keyword:"for",isLoop:!0},La={keyword:"function"},eo={keyword:"if"},Qi={keyword:"return",beforeExpr:!0},Ea={keyword:"switch"},As={keyword:"throw",beforeExpr:!0},B={keyword:"try"},Be={keyword:"var"},Mt={keyword:"while",isLoop:!0},sn={keyword:"with"},An={keyword:"new",beforeExpr:!0},qn={keyword:"this"},Xi={keyword:"null",atomValue:null},lr={keyword:"true",atomValue:!0},Pr={keyword:"false",atomValue:!1},Ys={keyword:"in",binop:7,beforeExpr:!0},ba={break:Ai,case:or,catch:is,continue:_r,debugger:ws,default:wr,do:rs,else:ss,finally:Xr,for:Kr,function:La,if:eo,return:Qi,switch:Ea,throw:As,try:B,var:Be,while:Mt,with:sn,null:Xi,true:lr,false:Pr,new:An,in:Ys,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:qn,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},to={type:"[",beforeExpr:!0},Bn={type:"]"},Zs={type:"{",beforeExpr:!0},Zl={type:"}"},mc={type:"(",beforeExpr:!0},Ql={type:")"},Pu={type:",",beforeExpr:!0},xl={type:";",beforeExpr:!0},$a={type:":",beforeExpr:!0},th={type:"."},lm={type:"?",beforeExpr:!0},Cu={binop:10,beforeExpr:!0},Zr={isAssign:!0,beforeExpr:!0},op={isAssign:!0,beforeExpr:!0},Ps={postfix:!0,prefix:!0,isUpdate:!0},Gu={prefix:!0,beforeExpr:!0},um={binop:1,beforeExpr:!0},Qm={binop:2,beforeExpr:!0},Al={binop:3,beforeExpr:!0},ul={binop:4,beforeExpr:!0},Mf={binop:5,beforeExpr:!0},lp={binop:6,beforeExpr:!0},vg={binop:7,beforeExpr:!0},_g={binop:8,beforeExpr:!0},ua={binop:9,prefix:!0,beforeExpr:!0},cm={binop:10,beforeExpr:!0};for(var yg in me.tokTypes={bracketL:to,bracketR:Bn,braceL:Zs,braceR:Zl,parenL:mc,parenR:Ql,comma:Pu,semi:xl,colon:$a,dot:th,question:lm,slash:Cu,eq:Zr,name:yi,eof:Ei,num:jn,regexp:ii,string:Ci},ba)me.tokTypes["_"+yg]=ba[yg];function Wu(kn){kn=kn.split(" ");var ui="",Wi=[];e:for(var ir=0;ir<kn.length;++ir){for(var pa=0;pa<Wi.length;++pa)if(Wi[pa][0].length==kn[ir].length){Wi[pa].push(kn[ir]);continue e}Wi.push([kn[ir]])}function Ia(xo){if(1==xo.length)return ui+="return str === "+JSON.stringify(xo[0])+";";ui+="switch(str){";for(var rh=0;rh<xo.length;++rh)ui+="case "+JSON.stringify(xo[rh])+":";ui+="return true}return false;"}if(Wi.length>3){for(Wi.sort(function(xo,rh){return rh.length-xo.length}),ui+="switch(str.length){",ir=0;ir<Wi.length;++ir){var Ca=Wi[ir];ui+="case "+Ca[0].length+":",Ia(Ca)}ui+="}"}else Ia(kn);return new Function("str",ui)}var vh,Lu=Wu("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),qv=Wu("class enum extends super const export import"),nh=Wu("implements interface let package private protected public static yield"),vc=Wu("eval arguments"),Jm=Wu("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Bh=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,fl="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",ev=new RegExp("["+fl+"]"),tv=new RegExp("["+fl+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),gh=/[\n\r\u2028\u2029]/,no=/\r\n|[\n\r\u2028\u2029]/g,pl=me.isIdentifierStart=function(kn){return kn<65?36===kn:kn<91||(kn<97?95===kn:kn<123||kn>=170&&ev.test(String.fromCharCode(kn)))},Kd=me.isIdentifierChar=function(kn){return kn<48?36===kn:kn<58||!(kn<65)&&(kn<91||(kn<97?95===kn:kn<123||kn>=170&&tv.test(String.fromCharCode(kn))))};function tl(){this.line=Pe,this.column=je-We}function Ul(){Pe=1,je=We=0,qt=!0,hs()}function No(kn,ui){pt=je,ve.locations&&(Wt=new tl),Lt=kn,hs(),Bt=ui,qt=kn.beforeExpr}function mh(){var kn=ve.onComment&&ve.locations&&new tl,ui=je,Wi=ge.indexOf("*/",je+=2);if(-1===Wi&&nn(je-2,"Unterminated comment"),je=Wi+2,ve.locations){no.lastIndex=ui;for(var ir;(ir=no.exec(ge))&&ir.index<je;)++Pe,We=ir.index+ir[0].length}ve.onComment&&ve.onComment(!0,ge.slice(ui+2,Wi),ui,je,kn,ve.locations&&new tl)}function Sd(){for(var kn=je,ui=ve.onComment&&ve.locations&&new tl,Wi=ge.charCodeAt(je+=2);je<pe&&10!==Wi&&13!==Wi&&8232!==Wi&&8233!==Wi;)++je,Wi=ge.charCodeAt(je);ve.onComment&&ve.onComment(!1,ge.slice(kn+2,je),kn,je,ui,ve.locations&&new tl)}function hs(){for(;je<pe;){var kn=ge.charCodeAt(je);if(32===kn)++je;else if(13===kn)++je,10===(ui=ge.charCodeAt(je))&&++je,ve.locations&&(++Pe,We=je);else if(10===kn||8232===kn||8233===kn)++je,ve.locations&&(++Pe,We=je);else if(kn>8&&kn<14)++je;else if(47===kn){var ui;if(42===(ui=ge.charCodeAt(je+1)))mh();else{if(47!==ui)break;Sd()}}else if(160===kn)++je;else{if(!(kn>=5760&&Bh.test(String.fromCharCode(kn))))break;++je}}}function Sl(kn){if(kn?je=nt+1:nt=je,ve.locations&&(gt=new tl),kn)return _c();if(je>=pe)return No(Ei);var ui=ge.charCodeAt(je);if(pl(ui)||92===ui)return Vh();var Wi=function $o(kn){switch(kn){case 46:return function Il(){var kn=ge.charCodeAt(je+1);return kn>=48&&kn<=57?Ta(!0):(++je,No(th))}();case 40:return++je,No(mc);case 41:return++je,No(Ql);case 59:return++je,No(xl);case 44:return++je,No(Pu);case 91:return++je,No(to);case 93:return++je,No(Bn);case 123:return++je,No(Zs);case 125:return++je,No(Zl);case 58:return++je,No($a);case 63:return++je,No(lm);case 48:var ui=ge.charCodeAt(je+1);if(120===ui||88===ui)return function Ss(){je+=2;var kn=Jl(16);return null==kn&&nn(nt+2,"Expected hexadecimal number"),pl(ge.charCodeAt(je))&&nn(je,"Identifier directly after number"),No(jn,kn)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Ta(!1);case 34:case 39:return function gl(kn){je++;for(var ui="";;){je>=pe&&nn(nt,"Unterminated string constant");var Wi=ge.charCodeAt(je);if(Wi===kn)return++je,No(Ci,ui);if(92===Wi){Wi=ge.charCodeAt(++je);var ir=/^[0-7]+/.exec(ge.slice(je,je+3));for(ir&&(ir=ir[0]);ir&&parseInt(ir,8)>255;)ir=ir.slice(0,-1);if("0"===ir&&(ir=null),++je,ir)wt&&nn(je-2,"Octal literal in strict mode"),ui+=String.fromCharCode(parseInt(ir,8)),je+=ir.length-1;else switch(Wi){case 110:ui+="\n";break;case 114:ui+="\r";break;case 120:ui+=String.fromCharCode(ju(2));break;case 117:ui+=String.fromCharCode(ju(4));break;case 85:ui+=String.fromCharCode(ju(8));break;case 116:ui+="\t";break;case 98:ui+="\b";break;case 118:ui+="\v";break;case 102:ui+="\f";break;case 48:ui+="\0";break;case 13:10===ge.charCodeAt(je)&&++je;case 10:ve.locations&&(We=je,++Pe);break;default:ui+=String.fromCharCode(Wi)}}else(13===Wi||10===Wi||8232===Wi||8233===Wi)&&nn(nt,"Unterminated string constant"),ui+=String.fromCharCode(Wi),++je}}(kn);case 47:return function zh(){var kn=ge.charCodeAt(je+1);return qt?(++je,_c()):61===kn?qa(op,2):qa(Cu,1)}();case 37:case 42:return function Zd(){return 61===ge.charCodeAt(je+1)?qa(op,2):qa(cm,1)}();case 124:case 38:return function ks(kn){var ui=ge.charCodeAt(je+1);return ui===kn?qa(124===kn?um:Qm,2):61===ui?qa(op,2):qa(124===kn?Al:Mf,1)}(kn);case 94:return function bg(){return 61===ge.charCodeAt(je+1)?qa(op,2):qa(ul,1)}();case 43:case 45:return function nv(kn){var ui=ge.charCodeAt(je+1);return ui===kn?45==ui&&62==ge.charCodeAt(je+2)&&gh.test(ge.slice(we,je))?(je+=3,Sd(),hs(),Sl()):qa(Ps,2):61===ui?qa(op,2):qa(ua,1)}(kn);case 60:case 62:return function Qs(kn){var ui=ge.charCodeAt(je+1),Wi=1;return ui===kn?(Wi=62===kn&&62===ge.charCodeAt(je+2)?3:2,61===ge.charCodeAt(je+Wi)?qa(op,Wi+1):qa(_g,Wi)):33==ui&&60==kn&&45==ge.charCodeAt(je+2)&&45==ge.charCodeAt(je+3)?(je+=4,Sd(),hs(),Sl()):(61===ui&&(Wi=61===ge.charCodeAt(je+2)?3:2),qa(vg,Wi))}(kn);case 61:case 33:return function kc(kn){return 61===ge.charCodeAt(je+1)?qa(lp,61===ge.charCodeAt(je+2)?3:2):qa(61===kn?Zr:Gu,1)}(kn);case 126:return qa(Gu,1)}return!1}(ui);if(!1===Wi){var ir=String.fromCharCode(ui);if("\\"===ir||ev.test(ir))return Vh();nn(je,"Unexpected character '"+ir+"'")}return Wi}function qa(kn,ui){var Wi=ge.slice(je,je+ui);je+=ui,No(kn,Wi)}function _c(){for(var kn,ui,Wi=je;;){je>=pe&&nn(Wi,"Unterminated regular expression");var ir=ge.charAt(je);if(gh.test(ir)&&nn(Wi,"Unterminated regular expression"),kn)kn=!1;else{if("["===ir)ui=!0;else if("]"===ir&&ui)ui=!1;else if("/"===ir&&!ui)break;kn="\\"===ir}++je}var pa=ge.slice(Wi,je);++je;var Ia=lu();Ia&&!/^[gmsiy]*$/.test(Ia)&&nn(Wi,"Invalid regexp flag");try{var Ca=new RegExp(pa,Ia)}catch(xo){xo instanceof SyntaxError&&nn(Wi,xo.message),nn(xo)}return No(ii,Ca)}function Jl(kn,ui){for(var Wi=je,ir=0,pa=0,Ia=ui??1/0;pa<Ia;++pa){var xo,Ca=ge.charCodeAt(je);if((xo=Ca>=97?Ca-97+10:Ca>=65?Ca-65+10:Ca>=48&&Ca<=57?Ca-48:1/0)>=kn)break;++je,ir=ir*kn+xo}return je===Wi||null!=ui&&je-Wi!==ui?null:ir}function Ta(kn){var ui=je,Wi=!1,ir=48===ge.charCodeAt(je);!kn&&null===Jl(10)&&nn(ui,"Invalid number"),46===ge.charCodeAt(je)&&(++je,Jl(10),Wi=!0);var pa=ge.charCodeAt(je);(69===pa||101===pa)&&((43===(pa=ge.charCodeAt(++je))||45===pa)&&++je,null===Jl(10)&&nn(ui,"Invalid number"),Wi=!0),pl(ge.charCodeAt(je))&&nn(je,"Identifier directly after number");var Ca,Ia=ge.slice(ui,je);return Wi?Ca=parseFloat(Ia):ir&&1!==Ia.length?/[89]/.test(Ia)||wt?nn(ui,"Invalid number"):Ca=parseInt(Ia,8):Ca=parseInt(Ia,10),No(jn,Ca)}function ju(kn){var ui=Jl(16,kn);return null===ui&&nn(nt,"Bad character escape sequence"),ui}function lu(){vh=!1;for(var kn,ui=!0,Wi=je;;){var ir=ge.charCodeAt(je);if(Kd(ir))vh&&(kn+=ge.charAt(je)),++je;else{if(92!==ir)break;vh||(kn=ge.slice(Wi,je)),vh=!0,117!=ge.charCodeAt(++je)&&nn(je,"Expecting Unicode escape sequence \\uXXXX"),++je;var pa=ju(4),Ia=String.fromCharCode(pa);Ia||nn(je-1,"Invalid Unicode escape"),(ui?pl(pa):Kd(pa))||nn(je-4,"Invalid Unicode escape"),kn+=Ia}ui=!1}return vh?kn:ge.slice(Wi,je)}function Vh(){var kn=lu(),ui=yi;return!vh&&Jm(kn)&&(ui=ba[kn]),No(ui,kn)}function ha(){Ye=nt,we=pt,Ue=Wt,Sl()}function Qd(kn){if(wt=kn,je=nt,ve.locations)for(;je<We;)We=ge.lastIndexOf("\n",We-2)+1,--Pe;hs(),Sl()}function wu(){this.type=null,this.start=nt,this.end=null}function Ua(){this.start=gt,this.end=null,null!==de&&(this.source=de)}function Rl(){var kn=new wu;return ve.locations&&(kn.loc=new Ua),ve.directSourceFile&&(kn.sourceFile=ve.directSourceFile),ve.ranges&&(kn.range=[nt,0]),kn}function Rc(kn){var ui=new wu;return ui.start=kn.start,ve.locations&&(ui.loc=new Ua,ui.loc.start=kn.loc.start),ve.ranges&&(ui.range=[kn.range[0],0]),ui}function Ha(kn,ui){return kn.type=ui,kn.end=we,ve.locations&&(kn.loc.end=Ue),ve.ranges&&(kn.range[1]=we),kn}function ud(kn){return ve.ecmaVersion>=5&&"ExpressionStatement"===kn.type&&"Literal"===kn.expression.type&&"use strict"===kn.expression.value}function oo(kn){if(Lt===kn)return ha(),!0}function Jd(){return!ve.strictSemicolons&&(Lt===Ei||Lt===Zl||gh.test(ge.slice(we,nt)))}function ih(){!oo(xl)&&!Jd()&&pu()}function Bo(kn){Lt===kn?ha():pu()}function pu(){nn(nt,"Unexpected token")}function kp(kn){"Identifier"!==kn.type&&"MemberExpression"!==kn.type&&nn(kn.start,"Assigning to rvalue"),wt&&"Identifier"===kn.type&&vc(kn.name)&&nn(kn.start,"Assigning to "+kn.name+" in strict mode")}var Ed={kind:"loop"},Df={kind:"switch"};function Ol(){(Lt===Cu||Lt===op&&"/="==Bt)&&Sl(!0);var kn=Lt,ui=Rl();switch(kn){case Ai:case _r:ha();var Wi=kn===Ai;oo(xl)||Jd()?ui.label=null:Lt!==yi?pu():(ui.label=El(),ih());for(var ir=0;ir<Dt.length;++ir){var pa=Dt[ir];if((null==ui.label||pa.name===ui.label.name)&&(null!=pa.kind&&(Wi||"loop"===pa.kind)||ui.label&&Wi))break}return ir===Dt.length&&nn(ui.start,"Unsyntactic "+kn.keyword),Ha(ui,Wi?"BreakStatement":"ContinueStatement");case ws:return ha(),ih(),Ha(ui,"DebuggerStatement");case rs:return ha(),Dt.push(Ed),ui.body=Ol(),Dt.pop(),Bo(Mt),ui.test=cd(),ih(),Ha(ui,"DoWhileStatement");case Kr:if(ha(),Dt.push(Ed),Bo(mc),Lt===xl)return Td(ui,null);if(Lt===Be){var Ia=Rl();return ha(),Hl(Ia,!0),Ha(Ia,"VariableDeclaration"),1===Ia.declarations.length&&oo(Ys)?hd(ui,Ia):Td(ui,Ia)}return Ia=cl(!1,!0),oo(Ys)?(kp(Ia),hd(ui,Ia)):Td(ui,Ia);case La:return ha(),ka(ui,!0);case eo:return ha(),ui.test=cd(),ui.consequent=Ol(),ui.alternate=oo(ss)?Ol():null,Ha(ui,"IfStatement");case Qi:return!ct&&!ve.allowReturnOutsideFunction&&nn(nt,"'return' outside of function"),ha(),oo(xl)||Jd()?ui.argument=null:(ui.argument=cl(),ih()),Ha(ui,"ReturnStatement");case Ea:ha(),ui.discriminant=cd(),ui.cases=[],Bo(Zs),Dt.push(Df);for(var Ca,xo;Lt!=Zl;)if(Lt===or||Lt===wr){var rh=Lt===or;Ca&&Ha(Ca,"SwitchCase"),ui.cases.push(Ca=Rl()),Ca.consequent=[],ha(),rh?Ca.test=cl():(xo&&nn(Ye,"Multiple default clauses"),xo=!0,Ca.test=null),Bo($a)}else Ca||pu(),Ca.consequent.push(Ol());return Ca&&Ha(Ca,"SwitchCase"),ha(),Dt.pop(),Ha(ui,"SwitchStatement");case As:return ha(),gh.test(ge.slice(we,nt))&&nn(we,"Illegal newline after throw"),ui.argument=cl(),ih(),Ha(ui,"ThrowStatement");case B:if(ha(),ui.block=Uh(),ui.handler=null,Lt===is){var bo=Rl();ha(),Bo(mc),bo.param=El(),wt&&vc(bo.param.name)&&nn(bo.param.start,"Binding "+bo.param.name+" in strict mode"),Bo(Ql),bo.guard=null,bo.body=Uh(),ui.handler=Ha(bo,"CatchClause")}return ui.guardedHandlers=On,ui.finalizer=oo(Xr)?Uh():null,!ui.handler&&!ui.finalizer&&nn(ui.start,"Missing catch or finally clause"),Ha(ui,"TryStatement");case Be:return ha(),Hl(ui),ih(),Ha(ui,"VariableDeclaration");case Mt:return ha(),ui.test=cd(),Dt.push(Ed),ui.body=Ol(),Dt.pop(),Ha(ui,"WhileStatement");case sn:return wt&&nn(nt,"'with' in strict mode"),ha(),ui.object=cd(),ui.body=Ol(),Ha(ui,"WithStatement");case Zs:return Uh();case xl:return ha(),Ha(ui,"EmptyStatement");default:var Cg=Bt,kf=cl();if(kn===yi&&"Identifier"===kf.type&&oo($a)){for(ir=0;ir<Dt.length;++ir)Dt[ir].name===Cg&&nn(kf.start,"Label '"+Cg+"' is already declared");return Dt.push({name:Cg,kind:Lt.isLoop?"loop":Lt===Ea?"switch":null}),ui.body=Ol(),Dt.pop(),ui.label=kf,Ha(ui,"LabeledStatement")}return ui.expression=kf,ih(),Ha(ui,"ExpressionStatement")}}function cd(){Bo(mc);var kn=cl();return Bo(Ql),kn}function Uh(kn){var pa,ui=Rl(),Wi=!0,ir=!1;for(ui.body=[],Bo(Zs);!oo(Zl);){var Ia=Ol();ui.body.push(Ia),Wi&&kn&&ud(Ia)&&(pa=ir,Qd(ir=!0)),Wi=!1}return ir&&!pa&&Qd(!1),Ha(ui,"BlockStatement")}function Td(kn,ui){return kn.init=ui,Bo(xl),kn.test=Lt===xl?null:cl(),Bo(xl),kn.update=Lt===Ql?null:cl(),Bo(Ql),kn.body=Ol(),Dt.pop(),Ha(kn,"ForStatement")}function hd(kn,ui){return kn.left=ui,kn.right=cl(),Bo(Ql),kn.body=Ol(),Dt.pop(),Ha(kn,"ForInStatement")}function Hl(kn,ui){for(kn.declarations=[],kn.kind="var";;){var Wi=Rl();if(Wi.id=El(),wt&&vc(Wi.id.name)&&nn(Wi.id.start,"Binding "+Wi.id.name+" in strict mode"),Wi.init=oo(Zr)?cl(!0,ui):null,kn.declarations.push(Ha(Wi,"VariableDeclarator")),!oo(Pu))break}return kn}function cl(kn,ui){var Wi=$u(ui);if(!kn&&Lt===Pu){var ir=Rc(Wi);for(ir.expressions=[Wi];oo(Pu);)ir.expressions.push($u(ui));return Ha(ir,"SequenceExpression")}return Wi}function $u(kn){var ui=function Hh(kn){var ui=function hm(kn){return Pf(Lf(),-1,kn)}(kn);if(oo(lm)){var Wi=Rc(ui);return Wi.test=ui,Wi.consequent=cl(!0),Bo($a),Wi.alternate=cl(!0,kn),Ha(Wi,"ConditionalExpression")}return ui}(kn);if(Lt.isAssign){var Wi=Rc(ui);return Wi.operator=Bt,Wi.left=ui,ha(),Wi.right=$u(kn),kp(ui),Ha(Wi,"AssignmentExpression")}return ui}function Pf(kn,ui,Wi){var ir=Lt.binop;if(null!=ir&&(!Wi||Lt!==Ys)&&ir>ui){var pa=Rc(kn);pa.left=kn,pa.operator=Bt;var Ia=Lt;return ha(),pa.right=Pf(Lf(),ir,Wi),Pf(Ha(pa,Ia===um||Ia===Qm?"LogicalExpression":"BinaryExpression"),ui,Wi)}return kn}function Lf(){if(Lt.prefix){var kn=Rl(),ui=Lt.isUpdate;return kn.operator=Bt,kn.prefix=!0,qt=!0,ha(),kn.argument=Lf(),ui?kp(kn.argument):wt&&"delete"===kn.operator&&"Identifier"===kn.argument.type&&nn(kn.start,"Deleting local variable in strict mode"),Ha(kn,ui?"UpdateExpression":"UnaryExpression")}for(var Wi=function Gh(){return ef(vi())}();Lt.postfix&&!Jd();)(kn=Rc(Wi)).operator=Bt,kn.prefix=!1,kn.argument=Wi,kp(Wi),ha(),Wi=Ha(kn,"UpdateExpression");return Wi}function ef(kn,ui){var Wi;return oo(th)?((Wi=Rc(kn)).object=kn,Wi.property=El(!0),Wi.computed=!1,ef(Ha(Wi,"MemberExpression"),ui)):oo(to)?((Wi=Rc(kn)).object=kn,Wi.property=cl(),Wi.computed=!0,Bo(Bn),ef(Ha(Wi,"MemberExpression"),ui)):!ui&&oo(mc)?((Wi=Rc(kn)).callee=kn,Wi.arguments=Do(Ql,!1),ef(Ha(Wi,"CallExpression"),ui)):kn}function vi(){switch(Lt){case qn:var ir=Rl();return ha(),Ha(ir,"ThisExpression");case yi:return El();case jn:case Ci:case ii:return(ir=Rl()).value=Bt,ir.raw=ge.slice(nt,pt),ha(),Ha(ir,"Literal");case Xi:case lr:case Pr:return(ir=Rl()).value=Lt.atomValue,ir.raw=Lt.keyword,ha(),Ha(ir,"Literal");case mc:var kn=gt,ui=nt;ha();var Wi=cl();return Wi.start=ui,Wi.end=pt,ve.locations&&(Wi.loc.start=kn,Wi.loc.end=Wt),ve.ranges&&(Wi.range=[ui,pt]),Bo(Ql),Wi;case to:return ir=Rl(),ha(),ir.elements=Do(Bn,!0,!0),Ha(ir,"ArrayExpression");case Zs:return function Yi(){var kn=Rl(),ui=!0,Wi=!1;for(kn.properties=[],ha();!oo(Zl);){if(ui)ui=!1;else if(Bo(Pu),ve.allowTrailingCommas&&oo(Zl))break;var Ia,ir={key:Ns()},pa=!1;if(oo($a)?(ir.value=cl(!0),Ia=ir.kind="init"):ve.ecmaVersion>=5&&"Identifier"===ir.key.type&&("get"===ir.key.name||"set"===ir.key.name)?(pa=Wi=!0,Ia=ir.kind=ir.key.name,ir.key=Ns(),Lt!==mc&&pu(),ir.value=ka(Rl(),!1)):pu(),"Identifier"===ir.key.type&&(wt||Wi))for(var Ca=0;Ca<kn.properties.length;++Ca){var xo=kn.properties[Ca];if(xo.key.name===ir.key.name){var rh=Ia==xo.kind||pa&&"init"===xo.kind||"init"===Ia&&("get"===xo.kind||"set"===xo.kind);rh&&!wt&&"init"===Ia&&"init"===xo.kind&&(rh=!1),rh&&nn(ir.key.start,"Redefinition of property")}}kn.properties.push(ir)}return Ha(kn,"ObjectExpression")}();case La:return ir=Rl(),ha(),ka(ir,!1);case An:return function ar(){var kn=Rl();return ha(),kn.callee=ef(vi(),!0),kn.arguments=oo(mc)?Do(Ql,!1):On,Ha(kn,"NewExpression")}();default:pu()}}function Ns(){return Lt===jn||Lt===Ci?vi():El(!0)}function ka(kn,ui){Lt===yi?kn.id=El():ui?pu():kn.id=null,kn.params=[];var Wi=!0;for(Bo(mc);!oo(Ql);)Wi?Wi=!1:Bo(Pu),kn.params.push(El());var ir=ct,pa=Dt;if(ct=!0,Dt=[],kn.body=Uh(!0),ct=ir,Dt=pa,wt||kn.body.body.length&&ud(kn.body.body[0]))for(var Ia=kn.id?-1:0;Ia<kn.params.length;++Ia){var Ca=Ia<0?kn.id:kn.params[Ia];if((nh(Ca.name)||vc(Ca.name))&&nn(Ca.start,"Defining '"+Ca.name+"' in strict mode"),Ia>=0)for(var xo=0;xo<Ia;++xo)Ca.name===kn.params[xo].name&&nn(Ca.start,"Argument name clash in strict mode")}return Ha(kn,ui?"FunctionDeclaration":"FunctionExpression")}function Do(kn,ui,Wi){for(var ir=[],pa=!0;!oo(kn);){if(pa)pa=!1;else if(Bo(Pu),ui&&ve.allowTrailingCommas&&oo(kn))break;ir.push(Wi&&Lt===Pu?null:cl(!0))}return ir}function El(kn){var ui=Rl();return kn&&"everywhere"==ve.forbidReserved&&(kn=!1),Lt===yi?(!kn&&(ve.forbidReserved&&(3===ve.ecmaVersion?Lu:qv)(Bt)||wt&&nh(Bt))&&-1==ge.slice(nt,pt).indexOf("\\")&&nn(nt,"The keyword '"+Bt+"' is reserved"),ui.name=Bt):kn&&Lt.keyword?ui.name=Lt.keyword:pu(),qt=!1,ha(),Ha(ui,"Identifier")}},"object"==typeof _&&"object"==typeof C?ve(_):(ye=[_],(oe="function"==typeof(j=ve)?j.apply(_,ye):j)!==V&&(C.exports=oe)),d.version||(d=null));var k={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},N={"-":"__negate","+":"__self"},z=le.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(me){this["__"+me]="#"+me},{__self:function(){return this}});function D(me,ve,ge){var pe=k[ve];if(me&&me[pe]){var de=me[pe](ge);return"!="===ve?!de:de}switch(ve){case"+":return me+ge;case"-":return me-ge;case"*":return me*ge;case"/":return me/ge;case"%":return me%ge;case"==":return me==ge;case"!=":return me!=ge}}function H(me,ve){var ge=N[me];if(ve&&ve[ge])return ve[ge]();switch(me){case"+":return+ve;case"-":return-ve}}function Z(me,ve){if(!me)return"";var ge=[];function pe(wt){for(var nn=0,On=ge.length;nn<On;nn++){var jn=ge[nn];if(jn[0]>=wt)break;wt+=jn[1]}return wt}function de(wt){return me.substring(pe(wt.range[0]),pe(wt.range[1]))}function ke(wt,nn){for(var On=pe(wt.range[0]),jn=pe(wt.range[1]),ii=0,Ci=ge.length-1;Ci>=0;Ci--)if(On>ge[Ci][0]){ii=Ci+1;break}ge.splice(ii,0,[On,nn.length-jn+On]),me=me.substring(0,On)+nn+me.substring(jn)}var Ue,gt=(ve=ve||{}).url||"",Wt=ve.sourceMaps,Lt=ve.paperFeatures||{},Bt=ve.source||me,qt=ve.offset||0,Pe=y.agent,We=Pe.versionNumber,Ye=!1,we=/\r\n|\n|\r/gm;if(Wt&&(Pe.chrome&&We>=30||Pe.webkit&&We>=537.76||Pe.firefox&&We>=23||Pe.node)){if(Pe.node)qt-=2;else if(K&&gt&&!K.location.href.indexOf(gt)){var ct=q.getElementsByTagName("html")[0].innerHTML;qt=ct.substr(0,ct.indexOf(me)+1).match(we).length+1}var Dt=["AA"+function pt(wt){var nn="";for(wt=(Math.abs(wt)<<1)+(wt<0?1:0);wt||!nn;){var jn=31&wt;(wt>>=5)&&(jn|=32),nn+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[jn]}return nn}((Ye=qt>0&&!(Pe.chrome&&We>=36||Pe.safari&&We>=600||Pe.firefox&&We>=40||Pe.node))?0:qt)+"A"];Dt.length=(me.match(we)||[]).length+1+(Ye?qt:0),Ue={version:3,file:gt,names:[],mappings:Dt.join(";AACA"),sourceRoot:"",sources:[gt],sourcesContent:[Bt]}}return(!1!==Lt.operatorOverloading||!1!==Lt.moduleExports)&&function nt(wt,nn,On){if(wt){for(var jn in wt)if("range"!==jn&&"loc"!==jn){var ii=wt[jn];if(Array.isArray(ii))for(var Ci=0,yi=ii.length;Ci<yi;Ci++)nt(ii[Ci],wt,On);else ii&&"object"==typeof ii&&nt(ii,wt,On)}!1!==On.operatorOverloading&&function Xe(wt,nn){switch(wt.type){case"UnaryExpression":if(wt.operator in N&&"Literal"!==wt.argument.type){var On=de(wt.argument);ke(wt,'$__("'+wt.operator+'", '+On+")")}break;case"BinaryExpression":if(wt.operator in k&&"Literal"!==wt.left.type){var jn=de(wt.left),ii=de(wt.right),Ci=function Ee(wt,nn){return me.substring(pe(wt.range[1]),pe(nn.range[0]))}(wt.left,wt.right),yi=wt.operator;ke(wt,"__$__("+jn+","+Ci.replace(new RegExp("\\"+yi),'"'+yi+'"')+", "+ii+")")}break;case"UpdateExpression":case"AssignmentExpression":var Ei=nn&&nn.type;if(!("ForStatement"===Ei||"BinaryExpression"===Ei&&/^[=!<>]/.test(nn.operator)||"MemberExpression"===Ei&&nn.computed))if("UpdateExpression"===wt.type){var or=(On=de(wt.argument))+" = "+(Ai="__$__("+On+', "'+wt.operator[0]+'", 1)');wt.prefix?or="("+or+")":("AssignmentExpression"===Ei||"VariableDeclarator"===Ei||"BinaryExpression"===Ei)&&(de(nn.left||nn.id)===On&&(or=Ai),or=On+"; "+or),ke(wt,or)}else if(/^.=$/.test(wt.operator)&&"Literal"!==wt.left.type){jn=de(wt.left),ii=de(wt.right);var Ai=jn+" = __$__("+jn+', "'+wt.operator[0]+'", '+ii+")";ke(wt,/^\(.*\)$/.test(de(wt))?"("+Ai+")":Ai)}}}(wt,nn),!1!==On.moduleExports&&function je(wt){switch(wt.type){case"ExportDefaultDeclaration":ke({range:[wt.start,wt.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var nn=wt.declaration,On=wt.specifiers;if(nn){var jn=nn.declarations;jn&&(jn.forEach(function(Ci){ke(Ci,"module.exports."+de(Ci))}),ke({range:[wt.start,nn.start+nn.kind.length]},""))}else if(On){var ii=On.map(function(Ci){var yi=de(Ci);return"module.exports."+yi+" = "+yi+"; "}).join("");ii&&ke(wt,ii)}}}(wt)}}(S(me,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,Lt),Ue&&(Ye&&(me=new Array(qt+1).join("\n")+me),/^(inline|both)$/.test(Wt)&&(me+="\n//# sourceMappingURL=data:application/json;base64,"+ie.btoa(unescape(encodeURIComponent(JSON.stringify(Ue))))),me+="\n//# sourceURL="+(gt||"paperscript")),{url:gt,source:Bt,code:me,map:Ue}}function $(me,ve,ge){y=ve;var nt,pe=ve.getView(),de=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(me)&&!/\bnew\s+Tool\b/.test(me)?new Di:null,Ee=de?de._events:[],ke=["onFrame","onResize"].concat(Ee),Xe=[],je=[],pt="object"==typeof me?me:Z(me,ge);function gt(We,Ye){for(var we in We)(Ye||!/^_/.test(we))&&new RegExp("([\\b\\s\\W]|^)"+we.replace(/\$/g,"\\$")+"\\b").test(me)&&(Xe.push(we),je.push(We[we]))}me=pt.code,gt({__$__:D,$__:H,paper:ve,tool:de},!0),gt(ve),me="var module = { exports: {} }; "+me,(qt=le.each(ke,function(We){new RegExp("\\s+"+We+"\\b").test(me)&&(Xe.push(We),this.push("module.exports."+We+" = "+We+";"))},[]).join("\n"))&&(me+="\n"+qt),me+="\nreturn module.exports;";var Wt=y.agent;if(q&&(Wt.chrome||Wt.firefox&&Wt.versionNumber<40)){var Lt=q.createElement("script"),Bt=q.head||q.getElementsByTagName("head")[0];Wt.firefox&&(me="\n"+me),Lt.appendChild(q.createTextNode("document.__paperscript__ = function("+Xe+") {"+me+"\n}")),Bt.appendChild(Lt),nt=q.__paperscript__,delete q.__paperscript__,Bt.removeChild(Lt)}else nt=Function(Xe,me);var qt,Pe=(qt=nt&&nt.apply(ve,je))||{};return le.each(Ee,function(We){var Ye=Pe[We];Ye&&(de[We]=Ye)}),pe&&(Pe.onResize&&pe.setOnResize(Pe.onResize),pe.emit("resize",{size:pe.size,delta:new Ve}),Pe.onFrame&&pe.setOnFrame(Pe.onFrame),pe.requestUpdate()),qt}function R(me){if(/^text\/(?:x-|)paperscript$/.test(me.type)&&"true"!==De.getAttribute(me,"ignore")){var ve=De.getAttribute(me,"canvas"),ge=q.getElementById(ve),pe=me.src||me.getAttribute("data-src"),de=De.hasAttribute(me,"async"),Ee="data-paper-scope";if(!ge)throw new Error('Unable to find canvas with id "'+ve+'"');var ke=De.get(ge.getAttribute(Ee))||(new De).setup(ge);return ge.setAttribute(Ee,ke._id),pe?vs_request({url:pe,async:de,mimeType:"text/plain",onLoad:function(Xe){$(Xe,ke,pe)}}):$(me.innerHTML,ke,me.baseURI),me.setAttribute("data-paper-ignore","true"),ke}}function Y(){le.each(q&&q.getElementsByTagName("script"),R)}return Ve.inject(z),Se.inject(z),Ft.inject(z),K&&("complete"===q.readyState?setTimeout(Y):Rt.add(K,{load:Y})),{compile:Z,execute:$,load:function he(me){return me?R(me):Y()},parse:S,calculateBinary:D,calculateUnary:H}}.call(this);var y=new(De.inject(le.exports,{Base:le,Numerical:Re,Key:dn,DomEvent:Rt,DomElement:Gt,document:q,window:K,Symbol:Qt,PlacedSymbol:rn}));return y.agent.node&&ae(1839)(y),(oe="function"==typeof(j=y)?j.call(it,ae,it,yt):j)!==V&&(yt.exports=oe),y}).call(this,"object"==typeof self?self:null)},4879:(yt,it,ae)=>{"use strict";ae.r(it),ae.d(it,{decode:()=>st,default:()=>Ct,encode:()=>bt,toASCII:()=>Vt,toUnicode:()=>ut,ucs2decode:()=>L,ucs2encode:()=>ee});const ye=2147483647,j=36,Te=/^xn--/,De=/[^\0-\x7E]/,xe=/[\x2E\u3002\uFF0E\uFF61]/g,_e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Re=Math.floor,Le=String.fromCharCode;function Ve(rn){throw new RangeError(_e[rn])}function Se(rn,Qt){const Ht=rn.split("@");let Qn="";Ht.length>1&&(Qn=Ht[0]+"@",rn=Ht[1]);const Sn=function Ae(rn,Qt){const Ht=[];let Qn=rn.length;for(;Qn--;)Ht[Qn]=Qt(rn[Qn]);return Ht}((rn=rn.replace(xe,".")).split("."),Qt).join(".");return Qn+Sn}function L(rn){const Qt=[];let Ht=0;const Qn=rn.length;for(;Ht<Qn;){const en=rn.charCodeAt(Ht++);if(en>=55296&&en<=56319&&Ht<Qn){const Sn=rn.charCodeAt(Ht++);56320==(64512&Sn)?Qt.push(((1023&en)<<10)+(1023&Sn)+65536):(Qt.push(en),Ht--)}else Qt.push(en)}return Qt}const ee=rn=>String.fromCodePoint(...rn),Ce=function(rn){return rn-48<10?rn-22:rn-65<26?rn-65:rn-97<26?rn-97:j},ze=function(rn,Qt){return rn+22+75*(rn<26)-((0!=Qt)<<5)},dt=function(rn,Qt,Ht){let Qn=0;for(rn=Ht?Re(rn/700):rn>>1,rn+=Re(rn/Qt);rn>455;Qn+=j)rn=Re(rn/35);return Re(Qn+36*rn/(rn+38))},st=function(rn){const Qt=[],Ht=rn.length;let Qn=0,en=128,Sn=72,Pn=rn.lastIndexOf("-");Pn<0&&(Pn=0);for(let xt=0;xt<Pn;++xt)rn.charCodeAt(xt)>=128&&Ve("not-basic"),Qt.push(rn.charCodeAt(xt));for(let xt=Pn>0?Pn+1:0;xt<Ht;){let Jt=Qn;for(let ri=1,ni=j;;ni+=j){xt>=Ht&&Ve("invalid-input");const St=Ce(rn.charCodeAt(xt++));(St>=j||St>Re((ye-Qn)/ri))&&Ve("overflow"),Qn+=St*ri;const Oe=ni<=Sn?1:ni>=Sn+26?26:ni-Sn;if(St<Oe)break;const Ft=j-Oe;ri>Re(ye/Ft)&&Ve("overflow"),ri*=Ft}const Gn=Qt.length+1;Sn=dt(Qn-Jt,Gn,0==Jt),Re(Qn/Gn)>ye-en&&Ve("overflow"),en+=Re(Qn/Gn),Qn%=Gn,Qt.splice(Qn++,0,en)}return String.fromCodePoint(...Qt)},bt=function(rn){const Qt=[];let Ht=(rn=L(rn)).length,Qn=128,en=0,Sn=72;for(const Jt of rn)Jt<128&&Qt.push(Le(Jt));let Pn=Qt.length,xt=Pn;for(Pn&&Qt.push("-");xt<Ht;){let Jt=ye;for(const ri of rn)ri>=Qn&&ri<Jt&&(Jt=ri);const Gn=xt+1;Jt-Qn>Re((ye-en)/Gn)&&Ve("overflow"),en+=(Jt-Qn)*Gn,Qn=Jt;for(const ri of rn)if(ri<Qn&&++en>ye&&Ve("overflow"),ri==Qn){let ni=en;for(let St=j;;St+=j){const Oe=St<=Sn?1:St>=Sn+26?26:St-Sn;if(ni<Oe)break;const Ft=ni-Oe,Ot=j-Oe;Qt.push(Le(ze(Oe+Ft%Ot,0))),ni=Re(Ft/Ot)}Qt.push(Le(ze(ni,0))),Sn=dt(en,Gn,xt==Pn),en=0,++xt}++en,++Qn}return Qt.join("")},ut=function(rn){return Se(rn,function(Qt){return Te.test(Qt)?st(Qt.slice(4).toLowerCase()):Qt})},Vt=function(rn){return Se(rn,function(Qt){return De.test(Qt)?"xn--"+bt(Qt):Qt})},Ct={version:"2.1.0",ucs2:{decode:L,encode:ee},decode:st,encode:bt,toASCII:Vt,toUnicode:ut}},891:yt=>{"use strict";var ae={};function ye(V,K,q){q||(q=Error);var Te=function(De){function xe(_e,Q,Re){return De.call(this,function le(De,xe,_e){return"string"==typeof K?K:K(De,xe,_e)}(_e,Q,Re))||this}return function it(V,K){V.prototype=Object.create(K.prototype),V.prototype.constructor=V,V.__proto__=K}(xe,De),xe}(q);Te.prototype.name=q.name,Te.prototype.code=V,ae[V]=Te}function j(V,K){if(Array.isArray(V)){var q=V.length;return V=V.map(function(le){return String(le)}),q>2?"one of ".concat(K," ").concat(V.slice(0,q-1).join(", "),", or ")+V[q-1]:2===q?"one of ".concat(K," ").concat(V[0]," or ").concat(V[1]):"of ".concat(K," ").concat(V[0])}return"of ".concat(K," ").concat(String(V))}ye("ERR_INVALID_OPT_VALUE",function(V,K){return'The value "'+K+'" is invalid for option "'+V+'"'},TypeError),ye("ERR_INVALID_ARG_TYPE",function(V,K,q){var le,Te;if("string"==typeof K&&function oe(V,K,q){return V.substr(!q||q<0?0:+q,K.length)===K}(K,"not ")?(le="must not be",K=K.replace(/^not /,"")):le="must be",function re(V,K,q){return(void 0===q||q>V.length)&&(q=V.length),V.substring(q-K.length,q)===K}(V," argument"))Te="The ".concat(V," ").concat(le," ").concat(j(K,"type"));else{var De=function ie(V,K,q){return"number"!=typeof q&&(q=0),!(q+K.length>V.length)&&-1!==V.indexOf(K,q)}(V,".")?"property":"argument";Te='The "'.concat(V,'" ').concat(De," ").concat(le," ").concat(j(K,"type"))}return Te+". Received type ".concat(typeof q)},TypeError),ye("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ye("ERR_METHOD_NOT_IMPLEMENTED",function(V){return"The "+V+" method is not implemented"}),ye("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ye("ERR_STREAM_DESTROYED",function(V){return"Cannot call "+V+" after a stream was destroyed"}),ye("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ye("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ye("ERR_STREAM_WRITE_AFTER_END","write after end"),ye("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ye("ERR_UNKNOWN_ENCODING",function(V){return"Unknown encoding: "+V},TypeError),ye("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),yt.exports.q=ae},1339:(yt,it,ae)=>{"use strict";var ye=Object.keys||function(Te){var De=[];for(var xe in Te)De.push(xe);return De};yt.exports=K;var j=ae(3154),oe=ae(520);ae(3894)(K,j);for(var re=ye(oe.prototype),ie=0;ie<re.length;ie++){var V=re[ie];K.prototype[V]||(K.prototype[V]=oe.prototype[V])}function K(Te){if(!(this instanceof K))return new K(Te);j.call(this,Te),oe.call(this,Te),this.allowHalfOpen=!0,Te&&(!1===Te.readable&&(this.readable=!1),!1===Te.writable&&(this.writable=!1),!1===Te.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",q)))}function q(){this._writableState.ended||process.nextTick(le,this)}function le(Te){Te.end()}Object.defineProperty(K.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(K.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(K.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(De){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=De,this._writableState.destroyed=De)}})},6071:(yt,it,ae)=>{"use strict";yt.exports=j;var ye=ae(6025);function j(oe){if(!(this instanceof j))return new j(oe);ye.call(this,oe)}ae(3894)(j,ye),j.prototype._transform=function(oe,re,ie){ie(null,oe)}},3154:(yt,it,ae)=>{"use strict";var ye;yt.exports=ut,ut.ReadableState=bt,ae(9069);var Te,oe=function(Rt,_n){return Rt.listeners(_n).length},re=ae(4970),ie=ae(3172).Buffer,V=global.Uint8Array||function(){},le=ae(4616);Te=le&&le.debuglog?le.debuglog("stream"):function(){};var L,ee,Ce,De=ae(5019),xe=ae(1920),Q=ae(7102).getHighWaterMark,Re=ae(891).q,Le=Re.ERR_INVALID_ARG_TYPE,Ve=Re.ERR_STREAM_PUSH_AFTER_EOF,Ae=Re.ERR_METHOD_NOT_IMPLEMENTED,Se=Re.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;ae(3894)(ut,re);var ze=xe.errorOrDestroy,dt=["error","close","destroy","pause","resume"];function bt(Gt,Rt,_n){ye=ye||ae(1339),"boolean"!=typeof _n&&(_n=Rt instanceof ye),this.objectMode=!!(Gt=Gt||{}).objectMode,_n&&(this.objectMode=this.objectMode||!!Gt.readableObjectMode),this.highWaterMark=Q(this,Gt,"readableHighWaterMark",_n),this.buffer=new De,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==Gt.emitClose,this.autoDestroy=!!Gt.autoDestroy,this.destroyed=!1,this.defaultEncoding=Gt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Gt.encoding&&(L||(L=ae(3054).s),this.decoder=new L(Gt.encoding),this.encoding=Gt.encoding)}function ut(Gt){if(ye=ye||ae(1339),!(this instanceof ut))return new ut(Gt);this._readableState=new bt(Gt,this,this instanceof ye),this.readable=!0,Gt&&("function"==typeof Gt.read&&(this._read=Gt.read),"function"==typeof Gt.destroy&&(this._destroy=Gt.destroy)),re.call(this)}function Vt(Gt,Rt,_n,It,rt){Te("readableAddChunk",Rt);var dn,lt=Gt._readableState;if(null===Rt)lt.reading=!1,function Qn(Gt,Rt){if(Te("onEofChunk"),!Rt.ended){if(Rt.decoder){var _n=Rt.decoder.end();_n&&_n.length&&(Rt.buffer.push(_n),Rt.length+=Rt.objectMode?1:_n.length)}Rt.ended=!0,Rt.sync?en(Gt):(Rt.needReadable=!1,Rt.emittedReadable||(Rt.emittedReadable=!0,Sn(Gt)))}}(Gt,lt);else if(rt||(dn=function Ct(Gt,Rt){var _n;return!function q(Gt){return ie.isBuffer(Gt)||Gt instanceof V}(Rt)&&"string"!=typeof Rt&&void 0!==Rt&&!Gt.objectMode&&(_n=new Le("chunk",["string","Buffer","Uint8Array"],Rt)),_n}(lt,Rt)),dn)ze(Gt,dn);else if(lt.objectMode||Rt&&Rt.length>0)if("string"!=typeof Rt&&!lt.objectMode&&Object.getPrototypeOf(Rt)!==ie.prototype&&(Rt=function K(Gt){return ie.from(Gt)}(Rt)),It)lt.endEmitted?ze(Gt,new Se):on(Gt,lt,Rt,!0);else if(lt.ended)ze(Gt,new Ve);else{if(lt.destroyed)return!1;lt.reading=!1,lt.decoder&&!_n?(Rt=lt.decoder.write(Rt),lt.objectMode||0!==Rt.length?on(Gt,lt,Rt,!1):Pn(Gt,lt)):on(Gt,lt,Rt,!1)}else It||(lt.reading=!1,Pn(Gt,lt));return!lt.ended&&(lt.length<lt.highWaterMark||0===lt.length)}function on(Gt,Rt,_n,It){Rt.flowing&&0===Rt.length&&!Rt.sync?(Rt.awaitDrain=0,Gt.emit("data",_n)):(Rt.length+=Rt.objectMode?1:_n.length,It?Rt.buffer.unshift(_n):Rt.buffer.push(_n),Rt.needReadable&&en(Gt)),Pn(Gt,Rt)}Object.defineProperty(ut.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Rt){!this._readableState||(this._readableState.destroyed=Rt)}}),ut.prototype.destroy=xe.destroy,ut.prototype._undestroy=xe.undestroy,ut.prototype._destroy=function(Gt,Rt){Rt(Gt)},ut.prototype.push=function(Gt,Rt){var It,_n=this._readableState;return _n.objectMode?It=!0:"string"==typeof Gt&&((Rt=Rt||_n.defaultEncoding)!==_n.encoding&&(Gt=ie.from(Gt,Rt),Rt=""),It=!0),Vt(this,Gt,Rt,!1,It)},ut.prototype.unshift=function(Gt){return Vt(this,Gt,null,!0,!1)},ut.prototype.isPaused=function(){return!1===this._readableState.flowing},ut.prototype.setEncoding=function(Gt){L||(L=ae(3054).s);var Rt=new L(Gt);this._readableState.decoder=Rt,this._readableState.encoding=this._readableState.decoder.encoding;for(var _n=this._readableState.buffer.head,It="";null!==_n;)It+=Rt.write(_n.data),_n=_n.next;return this._readableState.buffer.clear(),""!==It&&this._readableState.buffer.push(It),this._readableState.length=It.length,this};var rn=1073741824;function Ht(Gt,Rt){return Gt<=0||0===Rt.length&&Rt.ended?0:Rt.objectMode?1:Gt!=Gt?Rt.flowing&&Rt.length?Rt.buffer.head.data.length:Rt.length:(Gt>Rt.highWaterMark&&(Rt.highWaterMark=function Qt(Gt){return Gt>=rn?Gt=rn:(Gt--,Gt|=Gt>>>1,Gt|=Gt>>>2,Gt|=Gt>>>4,Gt|=Gt>>>8,Gt|=Gt>>>16,Gt++),Gt}(Gt)),Gt<=Rt.length?Gt:Rt.ended?Rt.length:(Rt.needReadable=!0,0))}function en(Gt){var Rt=Gt._readableState;Te("emitReadable",Rt.needReadable,Rt.emittedReadable),Rt.needReadable=!1,Rt.emittedReadable||(Te("emitReadable",Rt.flowing),Rt.emittedReadable=!0,process.nextTick(Sn,Gt))}function Sn(Gt){var Rt=Gt._readableState;Te("emitReadable_",Rt.destroyed,Rt.length,Rt.ended),!Rt.destroyed&&(Rt.length||Rt.ended)&&(Gt.emit("readable"),Rt.emittedReadable=!1),Rt.needReadable=!Rt.flowing&&!Rt.ended&&Rt.length<=Rt.highWaterMark,Oe(Gt)}function Pn(Gt,Rt){Rt.readingMore||(Rt.readingMore=!0,process.nextTick(xt,Gt,Rt))}function xt(Gt,Rt){for(;!Rt.reading&&!Rt.ended&&(Rt.length<Rt.highWaterMark||Rt.flowing&&0===Rt.length);){var _n=Rt.length;if(Te("maybeReadMore read 0"),Gt.read(0),_n===Rt.length)break}Rt.readingMore=!1}function Gn(Gt){var Rt=Gt._readableState;Rt.readableListening=Gt.listenerCount("readable")>0,Rt.resumeScheduled&&!Rt.paused?Rt.flowing=!0:Gt.listenerCount("data")>0&&Gt.resume()}function ri(Gt){Te("readable nexttick read 0"),Gt.read(0)}function St(Gt,Rt){Te("resume",Rt.reading),Rt.reading||Gt.read(0),Rt.resumeScheduled=!1,Gt.emit("resume"),Oe(Gt),Rt.flowing&&!Rt.reading&&Gt.read(0)}function Oe(Gt){var Rt=Gt._readableState;for(Te("flow",Rt.flowing);Rt.flowing&&null!==Gt.read(););}function Ft(Gt,Rt){return 0===Rt.length?null:(Rt.objectMode?_n=Rt.buffer.shift():!Gt||Gt>=Rt.length?(_n=Rt.decoder?Rt.buffer.join(""):1===Rt.buffer.length?Rt.buffer.first():Rt.buffer.concat(Rt.length),Rt.buffer.clear()):_n=Rt.buffer.consume(Gt,Rt.decoder),_n);var _n}function Ot(Gt){var Rt=Gt._readableState;Te("endReadable",Rt.endEmitted),Rt.endEmitted||(Rt.ended=!0,process.nextTick(li,Rt,Gt))}function li(Gt,Rt){if(Te("endReadableNT",Gt.endEmitted,Gt.length),!Gt.endEmitted&&0===Gt.length&&(Gt.endEmitted=!0,Rt.readable=!1,Rt.emit("end"),Gt.autoDestroy)){var _n=Rt._writableState;(!_n||_n.autoDestroy&&_n.finished)&&Rt.destroy()}}function di(Gt,Rt){for(var _n=0,It=Gt.length;_n<It;_n++)if(Gt[_n]===Rt)return _n;return-1}ut.prototype.read=function(Gt){Te("read",Gt),Gt=parseInt(Gt,10);var Rt=this._readableState,_n=Gt;if(0!==Gt&&(Rt.emittedReadable=!1),0===Gt&&Rt.needReadable&&((0!==Rt.highWaterMark?Rt.length>=Rt.highWaterMark:Rt.length>0)||Rt.ended))return Te("read: emitReadable",Rt.length,Rt.ended),0===Rt.length&&Rt.ended?Ot(this):en(this),null;if(0===(Gt=Ht(Gt,Rt))&&Rt.ended)return 0===Rt.length&&Ot(this),null;var rt,It=Rt.needReadable;return Te("need readable",It),(0===Rt.length||Rt.length-Gt<Rt.highWaterMark)&&Te("length less than watermark",It=!0),Rt.ended||Rt.reading?Te("reading or ended",It=!1):It&&(Te("do read"),Rt.reading=!0,Rt.sync=!0,0===Rt.length&&(Rt.needReadable=!0),this._read(Rt.highWaterMark),Rt.sync=!1,Rt.reading||(Gt=Ht(_n,Rt))),null===(rt=Gt>0?Ft(Gt,Rt):null)?(Rt.needReadable=Rt.length<=Rt.highWaterMark,Gt=0):(Rt.length-=Gt,Rt.awaitDrain=0),0===Rt.length&&(Rt.ended||(Rt.needReadable=!0),_n!==Gt&&Rt.ended&&Ot(this)),null!==rt&&this.emit("data",rt),rt},ut.prototype._read=function(Gt){ze(this,new Ae("_read()"))},ut.prototype.pipe=function(Gt,Rt){var _n=this,It=this._readableState;switch(It.pipesCount){case 0:It.pipes=Gt;break;case 1:It.pipes=[It.pipes,Gt];break;default:It.pipes.push(Gt)}It.pipesCount+=1,Te("pipe count=%d opts=%j",It.pipesCount,Rt);var lt=Rt&&!1===Rt.end||Gt===process.stdout||Gt===process.stderr?fr:Yn;function Yn(){Te("onend"),Gt.end()}It.endEmitted?process.nextTick(lt):_n.once("end",lt),Gt.on("unpipe",function dn(y,l){Te("onunpipe"),y===_n&&l&&!1===l.hasUnpiped&&(l.hasUnpiped=!0,function us(){Te("cleanup"),Gt.removeListener("close",Ds),Gt.removeListener("finish",nr),Gt.removeListener("drain",Ti),Gt.removeListener("error",Hr),Gt.removeListener("unpipe",dn),_n.removeListener("end",Yn),_n.removeListener("end",fr),_n.removeListener("data",vs),Di=!0,It.awaitDrain&&(!Gt._writableState||Gt._writableState.needDrain)&&Ti()}())});var Ti=function Jt(Gt){return function(){var _n=Gt._readableState;Te("pipeOnDrain",_n.awaitDrain),_n.awaitDrain&&_n.awaitDrain--,0===_n.awaitDrain&&oe(Gt,"data")&&(_n.flowing=!0,Oe(Gt))}}(_n);Gt.on("drain",Ti);var Di=!1;function vs(y){Te("ondata");var l=Gt.write(y);Te("dest.write",l),!1===l&&((1===It.pipesCount&&It.pipes===Gt||It.pipesCount>1&&-1!==di(It.pipes,Gt))&&!Di&&(Te("false write response, pause",It.awaitDrain),It.awaitDrain++),_n.pause())}function Hr(y){Te("onerror",y),fr(),Gt.removeListener("error",Hr),0===oe(Gt,"error")&&ze(Gt,y)}function Ds(){Gt.removeListener("finish",nr),fr()}function nr(){Te("onfinish"),Gt.removeListener("close",Ds),fr()}function fr(){Te("unpipe"),_n.unpipe(Gt)}return _n.on("data",vs),function st(Gt,Rt,_n){if("function"==typeof Gt.prependListener)return Gt.prependListener(Rt,_n);Gt._events&&Gt._events[Rt]?Array.isArray(Gt._events[Rt])?Gt._events[Rt].unshift(_n):Gt._events[Rt]=[_n,Gt._events[Rt]]:Gt.on(Rt,_n)}(Gt,"error",Hr),Gt.once("close",Ds),Gt.once("finish",nr),Gt.emit("pipe",_n),It.flowing||(Te("pipe resume"),_n.resume()),Gt},ut.prototype.unpipe=function(Gt){var Rt=this._readableState,_n={hasUnpiped:!1};if(0===Rt.pipesCount)return this;if(1===Rt.pipesCount)return Gt&&Gt!==Rt.pipes||(Gt||(Gt=Rt.pipes),Rt.pipes=null,Rt.pipesCount=0,Rt.flowing=!1,Gt&&Gt.emit("unpipe",this,_n)),this;if(!Gt){var It=Rt.pipes,rt=Rt.pipesCount;Rt.pipes=null,Rt.pipesCount=0,Rt.flowing=!1;for(var lt=0;lt<rt;lt++)It[lt].emit("unpipe",this,{hasUnpiped:!1});return this}var dn=di(Rt.pipes,Gt);return-1===dn||(Rt.pipes.splice(dn,1),Rt.pipesCount-=1,1===Rt.pipesCount&&(Rt.pipes=Rt.pipes[0]),Gt.emit("unpipe",this,_n)),this},ut.prototype.addListener=ut.prototype.on=function(Gt,Rt){var _n=re.prototype.on.call(this,Gt,Rt),It=this._readableState;return"data"===Gt?(It.readableListening=this.listenerCount("readable")>0,!1!==It.flowing&&this.resume()):"readable"===Gt&&!It.endEmitted&&!It.readableListening&&(It.readableListening=It.needReadable=!0,It.flowing=!1,It.emittedReadable=!1,Te("on readable",It.length,It.reading),It.length?en(this):It.reading||process.nextTick(ri,this)),_n},ut.prototype.removeListener=function(Gt,Rt){var _n=re.prototype.removeListener.call(this,Gt,Rt);return"readable"===Gt&&process.nextTick(Gn,this),_n},ut.prototype.removeAllListeners=function(Gt){var Rt=re.prototype.removeAllListeners.apply(this,arguments);return("readable"===Gt||void 0===Gt)&&process.nextTick(Gn,this),Rt},ut.prototype.resume=function(){var Gt=this._readableState;return Gt.flowing||(Te("resume"),Gt.flowing=!Gt.readableListening,function ni(Gt,Rt){Rt.resumeScheduled||(Rt.resumeScheduled=!0,process.nextTick(St,Gt,Rt))}(this,Gt)),Gt.paused=!1,this},ut.prototype.pause=function(){return Te("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Te("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ut.prototype.wrap=function(Gt){var Rt=this,_n=this._readableState,It=!1;for(var rt in Gt.on("end",function(){if(Te("wrapped end"),_n.decoder&&!_n.ended){var dn=_n.decoder.end();dn&&dn.length&&Rt.push(dn)}Rt.push(null)}),Gt.on("data",function(dn){Te("wrapped data"),_n.decoder&&(dn=_n.decoder.write(dn)),_n.objectMode&&null==dn||!(_n.objectMode||dn&&dn.length)||Rt.push(dn)||(It=!0,Gt.pause())}),Gt)void 0===this[rt]&&"function"==typeof Gt[rt]&&(this[rt]=function(Yn){return function(){return Gt[Yn].apply(Gt,arguments)}}(rt));for(var lt=0;lt<dt.length;lt++)Gt.on(dt[lt],this.emit.bind(this,dt[lt]));return this._read=function(dn){Te("wrapped _read",dn),It&&(It=!1,Gt.resume())},this},"function"==typeof Symbol&&(ut.prototype[Symbol.asyncIterator]=function(){return void 0===ee&&(ee=ae(3872)),ee(this)}),Object.defineProperty(ut.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ut.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ut.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Rt){this._readableState&&(this._readableState.flowing=Rt)}}),ut._fromList=Ft,Object.defineProperty(ut.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(ut.from=function(Gt,Rt){return void 0===Ce&&(Ce=ae(7412)),Ce(ut,Gt,Rt)})},6025:(yt,it,ae)=>{"use strict";yt.exports=q;var ye=ae(891).q,j=ye.ERR_METHOD_NOT_IMPLEMENTED,oe=ye.ERR_MULTIPLE_CALLBACK,re=ye.ERR_TRANSFORM_ALREADY_TRANSFORMING,ie=ye.ERR_TRANSFORM_WITH_LENGTH_0,V=ae(1339);function K(De,xe){var _e=this._transformState;_e.transforming=!1;var Q=_e.writecb;if(null===Q)return this.emit("error",new oe);_e.writechunk=null,_e.writecb=null,null!=xe&&this.push(xe),Q(De);var Re=this._readableState;Re.reading=!1,(Re.needReadable||Re.length<Re.highWaterMark)&&this._read(Re.highWaterMark)}function q(De){if(!(this instanceof q))return new q(De);V.call(this,De),this._transformState={afterTransform:K.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,De&&("function"==typeof De.transform&&(this._transform=De.transform),"function"==typeof De.flush&&(this._flush=De.flush)),this.on("prefinish",le)}function le(){var De=this;"function"!=typeof this._flush||this._readableState.destroyed?Te(this,null,null):this._flush(function(xe,_e){Te(De,xe,_e)})}function Te(De,xe,_e){if(xe)return De.emit("error",xe);if(null!=_e&&De.push(_e),De._writableState.length)throw new ie;if(De._transformState.transforming)throw new re;return De.push(null)}ae(3894)(q,V),q.prototype.push=function(De,xe){return this._transformState.needTransform=!1,V.prototype.push.call(this,De,xe)},q.prototype._transform=function(De,xe,_e){_e(new j("_transform()"))},q.prototype._write=function(De,xe,_e){var Q=this._transformState;if(Q.writecb=_e,Q.writechunk=De,Q.writeencoding=xe,!Q.transforming){var Re=this._readableState;(Q.needTransform||Re.needReadable||Re.length<Re.highWaterMark)&&this._read(Re.highWaterMark)}},q.prototype._read=function(De){var xe=this._transformState;null===xe.writechunk||xe.transforming?xe.needTransform=!0:(xe.transforming=!0,this._transform(xe.writechunk,xe.writeencoding,xe.afterTransform))},q.prototype._destroy=function(De,xe){V.prototype._destroy.call(this,De,function(_e){xe(_e)})}},520:(yt,it,ae)=>{"use strict";function j(Oe){var Ft=this;this.next=null,this.entry=null,this.finish=function(){!function St(Oe,Ft,Ot){var li=Oe.entry;for(Oe.entry=null;li;){var di=li.callback;Ft.pendingcb--,di(Ot),li=li.next}Ft.corkedRequestsFree.next=Oe}(Ft,Oe)}}var oe;yt.exports=bt,bt.WritableState=dt;var st,re={deprecate:ae(3532)},ie=ae(4970),V=ae(3172).Buffer,K=global.Uint8Array||function(){},Te=ae(1920),xe=ae(7102).getHighWaterMark,_e=ae(891).q,Q=_e.ERR_INVALID_ARG_TYPE,Re=_e.ERR_METHOD_NOT_IMPLEMENTED,Le=_e.ERR_MULTIPLE_CALLBACK,Ve=_e.ERR_STREAM_CANNOT_PIPE,Ae=_e.ERR_STREAM_DESTROYED,Se=_e.ERR_STREAM_NULL_VALUES,L=_e.ERR_STREAM_WRITE_AFTER_END,ee=_e.ERR_UNKNOWN_ENCODING,Ce=Te.errorOrDestroy;function ze(){}function dt(Oe,Ft,Ot){oe=oe||ae(1339),"boolean"!=typeof Ot&&(Ot=Ft instanceof oe),this.objectMode=!!(Oe=Oe||{}).objectMode,Ot&&(this.objectMode=this.objectMode||!!Oe.writableObjectMode),this.highWaterMark=xe(this,Oe,"writableHighWaterMark",Ot),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Oe.decodeStrings),this.defaultEncoding=Oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(di){!function Qn(Oe,Ft){var Ot=Oe._writableState,li=Ot.sync,di=Ot.writecb;if("function"!=typeof di)throw new Le;if(function Ht(Oe){Oe.writing=!1,Oe.writecb=null,Oe.length-=Oe.writelen,Oe.writelen=0}(Ot),Ft)!function Qt(Oe,Ft,Ot,li,di){--Ft.pendingcb,Ot?(process.nextTick(di,li),process.nextTick(ri,Oe,Ft),Oe._writableState.errorEmitted=!0,Ce(Oe,li)):(di(li),Oe._writableState.errorEmitted=!0,Ce(Oe,li),ri(Oe,Ft))}(Oe,Ot,li,Ft,di);else{var Gt=xt(Ot)||Oe.destroyed;!Gt&&!Ot.corked&&!Ot.bufferProcessing&&Ot.bufferedRequest&&Pn(Oe,Ot),li?process.nextTick(en,Oe,Ot,Gt,di):en(Oe,Ot,Gt,di)}}(Ft,di)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==Oe.emitClose,this.autoDestroy=!!Oe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new j(this)}function bt(Oe){var Ft=this instanceof(oe=oe||ae(1339));if(!Ft&&!st.call(bt,this))return new bt(Oe);this._writableState=new dt(Oe,this,Ft),this.writable=!0,Oe&&("function"==typeof Oe.write&&(this._write=Oe.write),"function"==typeof Oe.writev&&(this._writev=Oe.writev),"function"==typeof Oe.destroy&&(this._destroy=Oe.destroy),"function"==typeof Oe.final&&(this._final=Oe.final)),ie.call(this)}function rn(Oe,Ft,Ot,li,di,Gt,Rt){Ft.writelen=li,Ft.writecb=Rt,Ft.writing=!0,Ft.sync=!0,Ft.destroyed?Ft.onwrite(new Ae("write")):Ot?Oe._writev(di,Ft.onwrite):Oe._write(di,Gt,Ft.onwrite),Ft.sync=!1}function en(Oe,Ft,Ot,li){Ot||function Sn(Oe,Ft){0===Ft.length&&Ft.needDrain&&(Ft.needDrain=!1,Oe.emit("drain"))}(Oe,Ft),Ft.pendingcb--,li(),ri(Oe,Ft)}function Pn(Oe,Ft){Ft.bufferProcessing=!0;var Ot=Ft.bufferedRequest;if(Oe._writev&&Ot&&Ot.next){var di=new Array(Ft.bufferedRequestCount),Gt=Ft.corkedRequestsFree;Gt.entry=Ot;for(var Rt=0,_n=!0;Ot;)di[Rt]=Ot,Ot.isBuf||(_n=!1),Ot=Ot.next,Rt+=1;di.allBuffers=_n,rn(Oe,Ft,!0,Ft.length,di,"",Gt.finish),Ft.pendingcb++,Ft.lastBufferedRequest=null,Gt.next?(Ft.corkedRequestsFree=Gt.next,Gt.next=null):Ft.corkedRequestsFree=new j(Ft),Ft.bufferedRequestCount=0}else{for(;Ot;){var It=Ot.chunk;if(rn(Oe,Ft,!1,Ft.objectMode?1:It.length,It,Ot.encoding,Ot.callback),Ot=Ot.next,Ft.bufferedRequestCount--,Ft.writing)break}null===Ot&&(Ft.lastBufferedRequest=null)}Ft.bufferedRequest=Ot,Ft.bufferProcessing=!1}function xt(Oe){return Oe.ending&&0===Oe.length&&null===Oe.bufferedRequest&&!Oe.finished&&!Oe.writing}function Jt(Oe,Ft){Oe._final(function(Ot){Ft.pendingcb--,Ot&&Ce(Oe,Ot),Ft.prefinished=!0,Oe.emit("prefinish"),ri(Oe,Ft)})}function ri(Oe,Ft){var Ot=xt(Ft);if(Ot&&(function Gn(Oe,Ft){!Ft.prefinished&&!Ft.finalCalled&&("function"!=typeof Oe._final||Ft.destroyed?(Ft.prefinished=!0,Oe.emit("prefinish")):(Ft.pendingcb++,Ft.finalCalled=!0,process.nextTick(Jt,Oe,Ft)))}(Oe,Ft),0===Ft.pendingcb&&(Ft.finished=!0,Oe.emit("finish"),Ft.autoDestroy))){var li=Oe._readableState;(!li||li.autoDestroy&&li.endEmitted)&&Oe.destroy()}return Ot}ae(3894)(bt,ie),dt.prototype.getBuffer=function(){for(var Ft=this.bufferedRequest,Ot=[];Ft;)Ot.push(Ft),Ft=Ft.next;return Ot},function(){try{Object.defineProperty(dt.prototype,"buffer",{get:re.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(st=Function.prototype[Symbol.hasInstance],Object.defineProperty(bt,Symbol.hasInstance,{value:function(Ft){return!!st.call(this,Ft)||this===bt&&Ft&&Ft._writableState instanceof dt}})):st=function(Ft){return Ft instanceof this},bt.prototype.pipe=function(){Ce(this,new Ve)},bt.prototype.write=function(Oe,Ft,Ot){var li=this._writableState,di=!1,Gt=!li.objectMode&&function le(Oe){return V.isBuffer(Oe)||Oe instanceof K}(Oe);return Gt&&!V.isBuffer(Oe)&&(Oe=function q(Oe){return V.from(Oe)}(Oe)),"function"==typeof Ft&&(Ot=Ft,Ft=null),Gt?Ft="buffer":Ft||(Ft=li.defaultEncoding),"function"!=typeof Ot&&(Ot=ze),li.ending?function ut(Oe,Ft){var Ot=new L;Ce(Oe,Ot),process.nextTick(Ft,Ot)}(this,Ot):(Gt||function Vt(Oe,Ft,Ot,li){var di;return null===Ot?di=new Se:"string"!=typeof Ot&&!Ft.objectMode&&(di=new Q("chunk",["string","Buffer"],Ot)),!di||(Ce(Oe,di),process.nextTick(li,di),!1)}(this,li,Oe,Ot))&&(li.pendingcb++,di=function Ct(Oe,Ft,Ot,li,di,Gt){if(!Ot){var Rt=function on(Oe,Ft,Ot){return!Oe.objectMode&&!1!==Oe.decodeStrings&&"string"==typeof Ft&&(Ft=V.from(Ft,Ot)),Ft}(Ft,li,di);li!==Rt&&(Ot=!0,di="buffer",li=Rt)}var _n=Ft.objectMode?1:li.length;Ft.length+=_n;var It=Ft.length<Ft.highWaterMark;if(It||(Ft.needDrain=!0),Ft.writing||Ft.corked){var rt=Ft.lastBufferedRequest;Ft.lastBufferedRequest={chunk:li,encoding:di,isBuf:Ot,callback:Gt,next:null},rt?rt.next=Ft.lastBufferedRequest:Ft.bufferedRequest=Ft.lastBufferedRequest,Ft.bufferedRequestCount+=1}else rn(Oe,Ft,!1,_n,li,di,Gt);return It}(this,li,Gt,Oe,Ft,Ot)),di},bt.prototype.cork=function(){this._writableState.corked++},bt.prototype.uncork=function(){var Oe=this._writableState;Oe.corked&&(Oe.corked--,!Oe.writing&&!Oe.corked&&!Oe.bufferProcessing&&Oe.bufferedRequest&&Pn(this,Oe))},bt.prototype.setDefaultEncoding=function(Ft){if("string"==typeof Ft&&(Ft=Ft.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ft+"").toLowerCase())>-1))throw new ee(Ft);return this._writableState.defaultEncoding=Ft,this},Object.defineProperty(bt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(bt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),bt.prototype._write=function(Oe,Ft,Ot){Ot(new Re("_write()"))},bt.prototype._writev=null,bt.prototype.end=function(Oe,Ft,Ot){var li=this._writableState;return"function"==typeof Oe?(Ot=Oe,Oe=null,Ft=null):"function"==typeof Ft&&(Ot=Ft,Ft=null),null!=Oe&&this.write(Oe,Ft),li.corked&&(li.corked=1,this.uncork()),li.ending||function ni(Oe,Ft,Ot){Ft.ending=!0,ri(Oe,Ft),Ot&&(Ft.finished?process.nextTick(Ot):Oe.once("finish",Ot)),Ft.ended=!0,Oe.writable=!1}(this,li,Ot),this},Object.defineProperty(bt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(bt.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Ft){!this._writableState||(this._writableState.destroyed=Ft)}}),bt.prototype.destroy=Te.destroy,bt.prototype._undestroy=Te.undestroy,bt.prototype._destroy=function(Oe,Ft){Ft(Oe)}},3872:(yt,it,ae)=>{"use strict";var ye;function j(Ae,Se,L){return Se in Ae?Object.defineProperty(Ae,Se,{value:L,enumerable:!0,configurable:!0,writable:!0}):Ae[Se]=L,Ae}var oe=ae(7542),re=Symbol("lastResolve"),ie=Symbol("lastReject"),V=Symbol("error"),K=Symbol("ended"),q=Symbol("lastPromise"),le=Symbol("handlePromise"),Te=Symbol("stream");function De(Ae,Se){return{value:Ae,done:Se}}function xe(Ae){var Se=Ae[re];if(null!==Se){var L=Ae[Te].read();null!==L&&(Ae[q]=null,Ae[re]=null,Ae[ie]=null,Se(De(L,!1)))}}function _e(Ae){process.nextTick(xe,Ae)}var Re=Object.getPrototypeOf(function(){}),Le=Object.setPrototypeOf((j(ye={get stream(){return this[Te]},next:function(){var Se=this,L=this[V];if(null!==L)return Promise.reject(L);if(this[K])return Promise.resolve(De(void 0,!0));if(this[Te].destroyed)return new Promise(function(dt,st){process.nextTick(function(){Se[V]?st(Se[V]):dt(De(void 0,!0))})});var Ce,ee=this[q];if(ee)Ce=new Promise(function Q(Ae,Se){return function(L,ee){Ae.then(function(){Se[K]?L(De(void 0,!0)):Se[le](L,ee)},ee)}}(ee,this));else{var ze=this[Te].read();if(null!==ze)return Promise.resolve(De(ze,!1));Ce=new Promise(this[le])}return this[q]=Ce,Ce}},Symbol.asyncIterator,function(){return this}),j(ye,"return",function(){var Se=this;return new Promise(function(L,ee){Se[Te].destroy(null,function(Ce){Ce?ee(Ce):L(De(void 0,!0))})})}),ye),Re);yt.exports=function(Se){var L,ee=Object.create(Le,(j(L={},Te,{value:Se,writable:!0}),j(L,re,{value:null,writable:!0}),j(L,ie,{value:null,writable:!0}),j(L,V,{value:null,writable:!0}),j(L,K,{value:Se._readableState.endEmitted,writable:!0}),j(L,le,{value:function(ze,dt){var st=ee[Te].read();st?(ee[q]=null,ee[re]=null,ee[ie]=null,ze(De(st,!1))):(ee[re]=ze,ee[ie]=dt)},writable:!0}),L));return ee[q]=null,oe(Se,function(Ce){if(Ce&&"ERR_STREAM_PREMATURE_CLOSE"!==Ce.code){var ze=ee[ie];return null!==ze&&(ee[q]=null,ee[re]=null,ee[ie]=null,ze(Ce)),void(ee[V]=Ce)}var dt=ee[re];null!==dt&&(ee[q]=null,ee[re]=null,ee[ie]=null,dt(De(void 0,!0))),ee[K]=!0}),Se.on("readable",_e.bind(null,ee)),ee}},5019:(yt,it,ae)=>{"use strict";function ye(_e,Q){var Re=Object.keys(_e);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(_e);Q&&(Le=Le.filter(function(Ve){return Object.getOwnPropertyDescriptor(_e,Ve).enumerable})),Re.push.apply(Re,Le)}return Re}function oe(_e,Q,Re){return Q in _e?Object.defineProperty(_e,Q,{value:Re,enumerable:!0,configurable:!0,writable:!0}):_e[Q]=Re,_e}function ie(_e,Q){for(var Re=0;Re<Q.length;Re++){var Le=Q[Re];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(_e,Le.key,Le)}}var q=ae(3172).Buffer,Te=ae(2361).inspect,De=Te&&Te.custom||"inspect";function xe(_e,Q,Re){q.prototype.copy.call(_e,Q,Re)}yt.exports=function(){function _e(){(function re(_e,Q){if(!(_e instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,_e),this.head=null,this.tail=null,this.length=0}return function V(_e,Q,Re){Q&&ie(_e.prototype,Q),Re&&ie(_e,Re)}(_e,[{key:"push",value:function(Re){var Le={data:Re,next:null};this.length>0?this.tail.next=Le:this.head=Le,this.tail=Le,++this.length}},{key:"unshift",value:function(Re){var Le={data:Re,next:this.head};0===this.length&&(this.tail=Le),this.head=Le,++this.length}},{key:"shift",value:function(){if(0!==this.length){var Re=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,Re}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(Re){if(0===this.length)return"";for(var Le=this.head,Ve=""+Le.data;Le=Le.next;)Ve+=Re+Le.data;return Ve}},{key:"concat",value:function(Re){if(0===this.length)return q.alloc(0);for(var Le=q.allocUnsafe(Re>>>0),Ve=this.head,Ae=0;Ve;)xe(Ve.data,Le,Ae),Ae+=Ve.data.length,Ve=Ve.next;return Le}},{key:"consume",value:function(Re,Le){var Ve;return Re<this.head.data.length?(Ve=this.head.data.slice(0,Re),this.head.data=this.head.data.slice(Re)):Ve=Re===this.head.data.length?this.shift():Le?this._getString(Re):this._getBuffer(Re),Ve}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(Re){var Le=this.head,Ve=1,Ae=Le.data;for(Re-=Ae.length;Le=Le.next;){var Se=Le.data,L=Re>Se.length?Se.length:Re;if(Ae+=L===Se.length?Se:Se.slice(0,Re),0==(Re-=L)){L===Se.length?(++Ve,this.head=Le.next?Le.next:this.tail=null):(this.head=Le,Le.data=Se.slice(L));break}++Ve}return this.length-=Ve,Ae}},{key:"_getBuffer",value:function(Re){var Le=q.allocUnsafe(Re),Ve=this.head,Ae=1;for(Ve.data.copy(Le),Re-=Ve.data.length;Ve=Ve.next;){var Se=Ve.data,L=Re>Se.length?Se.length:Re;if(Se.copy(Le,Le.length-Re,0,L),0==(Re-=L)){L===Se.length?(++Ae,this.head=Ve.next?Ve.next:this.tail=null):(this.head=Ve,Ve.data=Se.slice(L));break}++Ae}return this.length-=Ae,Le}},{key:De,value:function(Re,Le){return Te(this,function j(_e){for(var Q=1;Q<arguments.length;Q++){var Re=null!=arguments[Q]?arguments[Q]:{};Q%2?ye(Object(Re),!0).forEach(function(Le){oe(_e,Le,Re[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(Re)):ye(Object(Re)).forEach(function(Le){Object.defineProperty(_e,Le,Object.getOwnPropertyDescriptor(Re,Le))})}return _e}({},Le,{depth:0,customInspect:!1}))}}]),_e}()},1920:yt=>{"use strict";function ae(ie,V){oe(ie,V),ye(ie)}function ye(ie){ie._writableState&&!ie._writableState.emitClose||ie._readableState&&!ie._readableState.emitClose||ie.emit("close")}function oe(ie,V){ie.emit("error",V)}yt.exports={destroy:function it(ie,V){var K=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(V?V(ie):ie&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(oe,this,ie)):process.nextTick(oe,this,ie)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(ie||null,function(Te){!V&&Te?K._writableState?K._writableState.errorEmitted?process.nextTick(ye,K):(K._writableState.errorEmitted=!0,process.nextTick(ae,K,Te)):process.nextTick(ae,K,Te):V?(process.nextTick(ye,K),V(Te)):process.nextTick(ye,K)}),this)},undestroy:function j(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function re(ie,V){var K=ie._readableState,q=ie._writableState;K&&K.autoDestroy||q&&q.autoDestroy?ie.destroy(V):ie.emit("error",V)}}},7542:(yt,it,ae)=>{"use strict";var ye=ae(891).q.ERR_STREAM_PREMATURE_CLOSE;function oe(){}yt.exports=function ie(V,K,q){if("function"==typeof K)return ie(V,null,K);K||(K={}),q=function j(V){var K=!1;return function(){if(!K){K=!0;for(var q=arguments.length,le=new Array(q),Te=0;Te<q;Te++)le[Te]=arguments[Te];V.apply(this,le)}}}(q||oe);var le=K.readable||!1!==K.readable&&V.readable,Te=K.writable||!1!==K.writable&&V.writable,De=function(){V.writable||_e()},xe=V._writableState&&V._writableState.finished,_e=function(){Te=!1,xe=!0,le||q.call(V)},Q=V._readableState&&V._readableState.endEmitted,Re=function(){le=!1,Q=!0,Te||q.call(V)},Le=function(L){q.call(V,L)},Ve=function(){var L;return le&&!Q?((!V._readableState||!V._readableState.ended)&&(L=new ye),q.call(V,L)):Te&&!xe?((!V._writableState||!V._writableState.ended)&&(L=new ye),q.call(V,L)):void 0},Ae=function(){V.req.on("finish",_e)};return function re(V){return V.setHeader&&"function"==typeof V.abort}(V)?(V.on("complete",_e),V.on("abort",Ve),V.req?Ae():V.on("request",Ae)):Te&&!V._writableState&&(V.on("end",De),V.on("close",De)),V.on("end",Re),V.on("finish",_e),!1!==K.error&&V.on("error",Le),V.on("close",Ve),function(){V.removeListener("complete",_e),V.removeListener("abort",Ve),V.removeListener("request",Ae),V.req&&V.req.removeListener("finish",_e),V.removeListener("end",De),V.removeListener("close",De),V.removeListener("finish",_e),V.removeListener("end",Re),V.removeListener("error",Le),V.removeListener("close",Ve)}}},7412:yt=>{yt.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(yt,it,ae)=>{"use strict";var ye,oe=ae(891).q,re=oe.ERR_MISSING_ARGS,ie=oe.ERR_STREAM_DESTROYED;function V(_e){if(_e)throw _e}function q(_e,Q,Re,Le){Le=function j(_e){var Q=!1;return function(){Q||(Q=!0,_e.apply(void 0,arguments))}}(Le);var Ve=!1;_e.on("close",function(){Ve=!0}),void 0===ye&&(ye=ae(7542)),ye(_e,{readable:Q,writable:Re},function(Se){if(Se)return Le(Se);Ve=!0,Le()});var Ae=!1;return function(Se){if(!Ve&&!Ae){if(Ae=!0,function K(_e){return _e.setHeader&&"function"==typeof _e.abort}(_e))return _e.abort();if("function"==typeof _e.destroy)return _e.destroy();Le(Se||new ie("pipe"))}}}function le(_e){_e()}function Te(_e,Q){return _e.pipe(Q)}function De(_e){return _e.length&&"function"==typeof _e[_e.length-1]?_e.pop():V}yt.exports=function xe(){for(var _e=arguments.length,Q=new Array(_e),Re=0;Re<_e;Re++)Q[Re]=arguments[Re];var Le=De(Q);if(Array.isArray(Q[0])&&(Q=Q[0]),Q.length<2)throw new re("streams");var Ve,Ae=Q.map(function(Se,L){var ee=L<Q.length-1;return q(Se,ee,L>0,function(ze){Ve||(Ve=ze),ze&&Ae.forEach(le),!ee&&(Ae.forEach(le),Le(Ve))})});return Q.reduce(Te)}},7102:(yt,it,ae)=>{"use strict";var ye=ae(891).q.ERR_INVALID_OPT_VALUE;yt.exports={getHighWaterMark:function oe(re,ie,V,K){var q=function j(re,ie,V){return null!=re.highWaterMark?re.highWaterMark:ie?re[V]:null}(ie,K,V);if(null!=q){if(!isFinite(q)||Math.floor(q)!==q||q<0)throw new ye(K?V:"highWaterMark",q);return Math.floor(q)}return re.objectMode?16:16384}}},4970:(yt,it,ae)=>{yt.exports=ae(9069).EventEmitter},1503:(yt,it,ae)=>{!function(ye){ye.parser=function(St,Oe){return new oe(St,Oe)},ye.SAXParser=oe,ye.SAXStream=Te,ye.createStream=function le(St,Oe){return new Te(St,Oe)},ye.MAX_BUFFER_LENGTH=65536;var K,j=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function oe(St,Oe){if(!(this instanceof oe))return new oe(St,Oe);var Ft=this;(function ie(St){for(var Oe=0,Ft=j.length;Oe<Ft;Oe++)St[j[Oe]]=""})(Ft),Ft.q=Ft.c="",Ft.bufferCheckPosition=ye.MAX_BUFFER_LENGTH,Ft.opt=Oe||{},Ft.opt.lowercase=Ft.opt.lowercase||Ft.opt.lowercasetags,Ft.looseCase=Ft.opt.lowercase?"toLowerCase":"toUpperCase",Ft.tags=[],Ft.closed=Ft.closedRoot=Ft.sawRoot=!1,Ft.tag=Ft.error=null,Ft.strict=!!St,Ft.noscript=!(!St&&!Ft.opt.noscript),Ft.state=st.BEGIN,Ft.strictEntities=Ft.opt.strictEntities,Ft.ENTITIES=Object.create(Ft.strictEntities?ye.XML_ENTITIES:ye.ENTITIES),Ft.attribList=[],Ft.opt.xmlns&&(Ft.ns=Object.create(Re)),Ft.trackPosition=!1!==Ft.opt.position,Ft.trackPosition&&(Ft.position=Ft.line=Ft.column=0),ut(Ft,"onready")}ye.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(St){function Oe(){}return Oe.prototype=St,new Oe}),Object.keys||(Object.keys=function(St){var Oe=[];for(var Ft in St)St.hasOwnProperty(Ft)&&Oe.push(Ft);return Oe}),oe.prototype={end:function(){Qt(this)},write:function ni(St){var Oe=this;if(this.error)throw this.error;if(Oe.closed)return rn(Oe,"Cannot write after close. Assign an onready handler.");if(null===St)return Qt(Oe);"object"==typeof St&&(St=St.toString());for(var Ft=0,Ot="";Ot=ri(St,Ft++),Oe.c=Ot,Ot;)switch(Oe.trackPosition&&(Oe.position++,"\n"===Ot?(Oe.line++,Oe.column=0):Oe.column++),Oe.state){case st.BEGIN:if(Oe.state=st.BEGIN_WHITESPACE,"\ufeff"===Ot)continue;Gn(Oe,Ot);continue;case st.BEGIN_WHITESPACE:Gn(Oe,Ot);continue;case st.TEXT:if(Oe.sawRoot&&!Oe.closedRoot){for(var li=Ft-1;Ot&&"<"!==Ot&&"&"!==Ot;)(Ot=ri(St,Ft++))&&Oe.trackPosition&&(Oe.position++,"\n"===Ot?(Oe.line++,Oe.column=0):Oe.column++);Oe.textNode+=St.substring(li,Ft-1)}"<"!==Ot||Oe.sawRoot&&Oe.closedRoot&&!Oe.strict?(!L(Ot)&&(!Oe.sawRoot||Oe.closedRoot)&&Ht(Oe,"Text data outside of root node."),"&"===Ot?Oe.state=st.TEXT_ENTITY:Oe.textNode+=Ot):(Oe.state=st.OPEN_WAKA,Oe.startTagPosition=Oe.position);continue;case st.SCRIPT:"<"===Ot?Oe.state=st.SCRIPT_ENDING:Oe.script+=Ot;continue;case st.SCRIPT_ENDING:"/"===Ot?Oe.state=st.CLOSE_TAG:(Oe.script+="<"+Ot,Oe.state=st.SCRIPT);continue;case st.OPEN_WAKA:"!"===Ot?(Oe.state=st.SGML_DECL,Oe.sgmlDecl=""):L(Ot)||(ze(Le,Ot)?(Oe.state=st.OPEN_TAG,Oe.tagName=Ot):"/"===Ot?(Oe.state=st.CLOSE_TAG,Oe.tagName=""):"?"===Ot?(Oe.state=st.PROC_INST,Oe.procInstName=Oe.procInstBody=""):(Ht(Oe,"Unencoded <"),Oe.startTagPosition+1<Oe.position&&(Ot=new Array(Oe.position-Oe.startTagPosition).join(" ")+Ot),Oe.textNode+="<"+Ot,Oe.state=st.TEXT));continue;case st.SGML_DECL:"[CDATA["===(Oe.sgmlDecl+Ot).toUpperCase()?(Vt(Oe,"onopencdata"),Oe.state=st.CDATA,Oe.sgmlDecl="",Oe.cdata=""):Oe.sgmlDecl+Ot==="--"?(Oe.state=st.COMMENT,Oe.comment="",Oe.sgmlDecl=""):"DOCTYPE"===(Oe.sgmlDecl+Ot).toUpperCase()?(Oe.state=st.DOCTYPE,(Oe.doctype||Oe.sawRoot)&&Ht(Oe,"Inappropriately located doctype declaration"),Oe.doctype="",Oe.sgmlDecl=""):">"===Ot?(Vt(Oe,"onsgmldeclaration",Oe.sgmlDecl),Oe.sgmlDecl="",Oe.state=st.TEXT):(ee(Ot)&&(Oe.state=st.SGML_DECL_QUOTED),Oe.sgmlDecl+=Ot);continue;case st.SGML_DECL_QUOTED:Ot===Oe.q&&(Oe.state=st.SGML_DECL,Oe.q=""),Oe.sgmlDecl+=Ot;continue;case st.DOCTYPE:">"===Ot?(Oe.state=st.TEXT,Vt(Oe,"ondoctype",Oe.doctype),Oe.doctype=!0):(Oe.doctype+=Ot,"["===Ot?Oe.state=st.DOCTYPE_DTD:ee(Ot)&&(Oe.state=st.DOCTYPE_QUOTED,Oe.q=Ot));continue;case st.DOCTYPE_QUOTED:Oe.doctype+=Ot,Ot===Oe.q&&(Oe.q="",Oe.state=st.DOCTYPE);continue;case st.DOCTYPE_DTD:Oe.doctype+=Ot,"]"===Ot?Oe.state=st.DOCTYPE:ee(Ot)&&(Oe.state=st.DOCTYPE_DTD_QUOTED,Oe.q=Ot);continue;case st.DOCTYPE_DTD_QUOTED:Oe.doctype+=Ot,Ot===Oe.q&&(Oe.state=st.DOCTYPE_DTD,Oe.q="");continue;case st.COMMENT:"-"===Ot?Oe.state=st.COMMENT_ENDING:Oe.comment+=Ot;continue;case st.COMMENT_ENDING:"-"===Ot?(Oe.state=st.COMMENT_ENDED,Oe.comment=Ct(Oe.opt,Oe.comment),Oe.comment&&Vt(Oe,"oncomment",Oe.comment),Oe.comment=""):(Oe.comment+="-"+Ot,Oe.state=st.COMMENT);continue;case st.COMMENT_ENDED:">"!==Ot?(Ht(Oe,"Malformed comment"),Oe.comment+="--"+Ot,Oe.state=st.COMMENT):Oe.state=st.TEXT;continue;case st.CDATA:"]"===Ot?Oe.state=st.CDATA_ENDING:Oe.cdata+=Ot;continue;case st.CDATA_ENDING:"]"===Ot?Oe.state=st.CDATA_ENDING_2:(Oe.cdata+="]"+Ot,Oe.state=st.CDATA);continue;case st.CDATA_ENDING_2:">"===Ot?(Oe.cdata&&Vt(Oe,"oncdata",Oe.cdata),Vt(Oe,"onclosecdata"),Oe.cdata="",Oe.state=st.TEXT):"]"===Ot?Oe.cdata+="]":(Oe.cdata+="]]"+Ot,Oe.state=st.CDATA);continue;case st.PROC_INST:"?"===Ot?Oe.state=st.PROC_INST_ENDING:L(Ot)?Oe.state=st.PROC_INST_BODY:Oe.procInstName+=Ot;continue;case st.PROC_INST_BODY:if(!Oe.procInstBody&&L(Ot))continue;"?"===Ot?Oe.state=st.PROC_INST_ENDING:Oe.procInstBody+=Ot;continue;case st.PROC_INST_ENDING:">"===Ot?(Vt(Oe,"onprocessinginstruction",{name:Oe.procInstName,body:Oe.procInstBody}),Oe.procInstName=Oe.procInstBody="",Oe.state=st.TEXT):(Oe.procInstBody+="?"+Ot,Oe.state=st.PROC_INST_BODY);continue;case st.OPEN_TAG:ze(Ve,Ot)?Oe.tagName+=Ot:(Qn(Oe),">"===Ot?Pn(Oe):"/"===Ot?Oe.state=st.OPEN_TAG_SLASH:(L(Ot)||Ht(Oe,"Invalid character in tag name"),Oe.state=st.ATTRIB));continue;case st.OPEN_TAG_SLASH:">"===Ot?(Pn(Oe,!0),xt(Oe)):(Ht(Oe,"Forward-slash in opening tag not followed by >"),Oe.state=st.ATTRIB);continue;case st.ATTRIB:if(L(Ot))continue;">"===Ot?Pn(Oe):"/"===Ot?Oe.state=st.OPEN_TAG_SLASH:ze(Le,Ot)?(Oe.attribName=Ot,Oe.attribValue="",Oe.state=st.ATTRIB_NAME):Ht(Oe,"Invalid attribute name");continue;case st.ATTRIB_NAME:"="===Ot?Oe.state=st.ATTRIB_VALUE:">"===Ot?(Ht(Oe,"Attribute without value"),Oe.attribValue=Oe.attribName,Sn(Oe),Pn(Oe)):L(Ot)?Oe.state=st.ATTRIB_NAME_SAW_WHITE:ze(Ve,Ot)?Oe.attribName+=Ot:Ht(Oe,"Invalid attribute name");continue;case st.ATTRIB_NAME_SAW_WHITE:if("="===Ot)Oe.state=st.ATTRIB_VALUE;else{if(L(Ot))continue;Ht(Oe,"Attribute without value"),Oe.tag.attributes[Oe.attribName]="",Oe.attribValue="",Vt(Oe,"onattribute",{name:Oe.attribName,value:""}),Oe.attribName="",">"===Ot?Pn(Oe):ze(Le,Ot)?(Oe.attribName=Ot,Oe.state=st.ATTRIB_NAME):(Ht(Oe,"Invalid attribute name"),Oe.state=st.ATTRIB)}continue;case st.ATTRIB_VALUE:if(L(Ot))continue;ee(Ot)?(Oe.q=Ot,Oe.state=st.ATTRIB_VALUE_QUOTED):(Ht(Oe,"Unquoted attribute value"),Oe.state=st.ATTRIB_VALUE_UNQUOTED,Oe.attribValue=Ot);continue;case st.ATTRIB_VALUE_QUOTED:if(Ot!==Oe.q){"&"===Ot?Oe.state=st.ATTRIB_VALUE_ENTITY_Q:Oe.attribValue+=Ot;continue}Sn(Oe),Oe.q="",Oe.state=st.ATTRIB_VALUE_CLOSED;continue;case st.ATTRIB_VALUE_CLOSED:L(Ot)?Oe.state=st.ATTRIB:">"===Ot?Pn(Oe):"/"===Ot?Oe.state=st.OPEN_TAG_SLASH:ze(Le,Ot)?(Ht(Oe,"No whitespace between attributes"),Oe.attribName=Ot,Oe.attribValue="",Oe.state=st.ATTRIB_NAME):Ht(Oe,"Invalid attribute name");continue;case st.ATTRIB_VALUE_UNQUOTED:if(!Ce(Ot)){"&"===Ot?Oe.state=st.ATTRIB_VALUE_ENTITY_U:Oe.attribValue+=Ot;continue}Sn(Oe),">"===Ot?Pn(Oe):Oe.state=st.ATTRIB;continue;case st.CLOSE_TAG:if(Oe.tagName)">"===Ot?xt(Oe):ze(Ve,Ot)?Oe.tagName+=Ot:Oe.script?(Oe.script+="</"+Oe.tagName,Oe.tagName="",Oe.state=st.SCRIPT):(L(Ot)||Ht(Oe,"Invalid tagname in closing tag"),Oe.state=st.CLOSE_TAG_SAW_WHITE);else{if(L(Ot))continue;dt(Le,Ot)?Oe.script?(Oe.script+="</"+Ot,Oe.state=st.SCRIPT):Ht(Oe,"Invalid tagname in closing tag."):Oe.tagName=Ot}continue;case st.CLOSE_TAG_SAW_WHITE:if(L(Ot))continue;">"===Ot?xt(Oe):Ht(Oe,"Invalid characters in closing tag");continue;case st.TEXT_ENTITY:case st.ATTRIB_VALUE_ENTITY_Q:case st.ATTRIB_VALUE_ENTITY_U:var Gt,Rt;switch(Oe.state){case st.TEXT_ENTITY:Gt=st.TEXT,Rt="textNode";break;case st.ATTRIB_VALUE_ENTITY_Q:Gt=st.ATTRIB_VALUE_QUOTED,Rt="attribValue";break;case st.ATTRIB_VALUE_ENTITY_U:Gt=st.ATTRIB_VALUE_UNQUOTED,Rt="attribValue"}";"===Ot?(Oe[Rt]+=Jt(Oe),Oe.entity="",Oe.state=Gt):ze(Oe.entity.length?Se:Ae,Ot)?Oe.entity+=Ot:(Ht(Oe,"Invalid character in entity name"),Oe[Rt]+="&"+Oe.entity+Ot,Oe.entity="",Oe.state=Gt);continue;default:throw new Error(Oe,"Unknown state: "+Oe.state)}return Oe.position>=Oe.bufferCheckPosition&&function re(St){for(var Oe=Math.max(ye.MAX_BUFFER_LENGTH,10),Ft=0,Ot=0,li=j.length;Ot<li;Ot++){var di=St[j[Ot]].length;if(di>Oe)switch(j[Ot]){case"textNode":on(St);break;case"cdata":Vt(St,"oncdata",St.cdata),St.cdata="";break;case"script":Vt(St,"onscript",St.script),St.script="";break;default:rn(St,"Max buffer length exceeded: "+j[Ot])}Ft=Math.max(Ft,di)}St.bufferCheckPosition=ye.MAX_BUFFER_LENGTH-Ft+St.position}(Oe),Oe},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function V(St){on(St),""!==St.cdata&&(Vt(St,"oncdata",St.cdata),St.cdata=""),""!==St.script&&(Vt(St,"onscript",St.script),St.script="")}(this)}};try{K=ae(295).Stream}catch{K=function(){}}var q=ye.EVENTS.filter(function(St){return"error"!==St&&"end"!==St});function Te(St,Oe){if(!(this instanceof Te))return new Te(St,Oe);K.apply(this),this._parser=new oe(St,Oe),this.writable=!0,this.readable=!0;var Ft=this;this._parser.onend=function(){Ft.emit("end")},this._parser.onerror=function(Ot){Ft.emit("error",Ot),Ft._parser.error=null},this._decoder=null,q.forEach(function(Ot){Object.defineProperty(Ft,"on"+Ot,{get:function(){return Ft._parser["on"+Ot]},set:function(li){if(!li)return Ft.removeAllListeners(Ot),Ft._parser["on"+Ot]=li,li;Ft.on(Ot,li)},enumerable:!0,configurable:!1})})}(Te.prototype=Object.create(K.prototype,{constructor:{value:Te}})).write=function(St){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(St)){if(!this._decoder){var Oe=ae(3054).s;this._decoder=new Oe("utf8")}St=this._decoder.write(St)}return this._parser.write(St.toString()),this.emit("data",St),!0},Te.prototype.end=function(St){return St&&St.length&&this.write(St),this._parser.end(),!0},Te.prototype.on=function(St,Oe){var Ft=this;return!Ft._parser["on"+St]&&-1!==q.indexOf(St)&&(Ft._parser["on"+St]=function(){var Ot=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);Ot.splice(0,0,St),Ft.emit.apply(Ft,Ot)}),K.prototype.on.call(Ft,St,Oe)};var _e="http://www.w3.org/XML/1998/namespace",Q="http://www.w3.org/2000/xmlns/",Re={xml:_e,xmlns:Q},Le=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ve=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,Ae=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Se=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function L(St){return" "===St||"\n"===St||"\r"===St||"\t"===St}function ee(St){return'"'===St||"'"===St}function Ce(St){return">"===St||L(St)}function ze(St,Oe){return St.test(Oe)}function dt(St,Oe){return!ze(St,Oe)}var St,Oe,Ft,st=0;for(var bt in ye.STATE={BEGIN:st++,BEGIN_WHITESPACE:st++,TEXT:st++,TEXT_ENTITY:st++,OPEN_WAKA:st++,SGML_DECL:st++,SGML_DECL_QUOTED:st++,DOCTYPE:st++,DOCTYPE_QUOTED:st++,DOCTYPE_DTD:st++,DOCTYPE_DTD_QUOTED:st++,COMMENT_STARTING:st++,COMMENT:st++,COMMENT_ENDING:st++,COMMENT_ENDED:st++,CDATA:st++,CDATA_ENDING:st++,CDATA_ENDING_2:st++,PROC_INST:st++,PROC_INST_BODY:st++,PROC_INST_ENDING:st++,OPEN_TAG:st++,OPEN_TAG_SLASH:st++,ATTRIB:st++,ATTRIB_NAME:st++,ATTRIB_NAME_SAW_WHITE:st++,ATTRIB_VALUE:st++,ATTRIB_VALUE_QUOTED:st++,ATTRIB_VALUE_CLOSED:st++,ATTRIB_VALUE_UNQUOTED:st++,ATTRIB_VALUE_ENTITY_Q:st++,ATTRIB_VALUE_ENTITY_U:st++,CLOSE_TAG:st++,CLOSE_TAG_SAW_WHITE:st++,SCRIPT:st++,SCRIPT_ENDING:st++},ye.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},ye.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(ye.ENTITIES).forEach(function(St){var Oe=ye.ENTITIES[St],Ft="number"==typeof Oe?String.fromCharCode(Oe):Oe;ye.ENTITIES[St]=Ft}),ye.STATE)ye.STATE[ye.STATE[bt]]=bt;function ut(St,Oe,Ft){St[Oe]&&St[Oe](Ft)}function Vt(St,Oe,Ft){St.textNode&&on(St),ut(St,Oe,Ft)}function on(St){St.textNode=Ct(St.opt,St.textNode),St.textNode&&ut(St,"ontext",St.textNode),St.textNode=""}function Ct(St,Oe){return St.trim&&(Oe=Oe.trim()),St.normalize&&(Oe=Oe.replace(/\s+/g," ")),Oe}function rn(St,Oe){return on(St),St.trackPosition&&(Oe+="\nLine: "+St.line+"\nColumn: "+St.column+"\nChar: "+St.c),Oe=new Error(Oe),St.error=Oe,ut(St,"onerror",Oe),St}function Qt(St){return St.sawRoot&&!St.closedRoot&&Ht(St,"Unclosed root tag"),St.state!==st.BEGIN&&St.state!==st.BEGIN_WHITESPACE&&St.state!==st.TEXT&&rn(St,"Unexpected end"),on(St),St.c="",St.closed=!0,ut(St,"onend"),oe.call(St,St.strict,St.opt),St}function Ht(St,Oe){if("object"!=typeof St||!(St instanceof oe))throw new Error("bad call to strictFail");St.strict&&rn(St,Oe)}function Qn(St){St.strict||(St.tagName=St.tagName[St.looseCase]());var Oe=St.tags[St.tags.length-1]||St,Ft=St.tag={name:St.tagName,attributes:{}};St.opt.xmlns&&(Ft.ns=Oe.ns),St.attribList.length=0,Vt(St,"onopentagstart",Ft)}function en(St,Oe){var Ot=St.indexOf(":")<0?["",St]:St.split(":"),li=Ot[0],di=Ot[1];return Oe&&"xmlns"===St&&(li="xmlns",di=""),{prefix:li,local:di}}function Sn(St){if(St.strict||(St.attribName=St.attribName[St.looseCase]()),-1!==St.attribList.indexOf(St.attribName)||St.tag.attributes.hasOwnProperty(St.attribName))St.attribName=St.attribValue="";else{if(St.opt.xmlns){var Oe=en(St.attribName,!0),Ot=Oe.local;if("xmlns"===Oe.prefix)if("xml"===Ot&&St.attribValue!==_e)Ht(St,"xml: prefix must be bound to "+_e+"\nActual: "+St.attribValue);else if("xmlns"===Ot&&St.attribValue!==Q)Ht(St,"xmlns: prefix must be bound to "+Q+"\nActual: "+St.attribValue);else{var li=St.tag,di=St.tags[St.tags.length-1]||St;li.ns===di.ns&&(li.ns=Object.create(di.ns)),li.ns[Ot]=St.attribValue}St.attribList.push([St.attribName,St.attribValue])}else St.tag.attributes[St.attribName]=St.attribValue,Vt(St,"onattribute",{name:St.attribName,value:St.attribValue});St.attribName=St.attribValue=""}}function Pn(St,Oe){if(St.opt.xmlns){var Ft=St.tag,Ot=en(St.tagName);Ft.prefix=Ot.prefix,Ft.local=Ot.local,Ft.uri=Ft.ns[Ot.prefix]||"",Ft.prefix&&!Ft.uri&&(Ht(St,"Unbound namespace prefix: "+JSON.stringify(St.tagName)),Ft.uri=Ot.prefix),Ft.ns&&(St.tags[St.tags.length-1]||St).ns!==Ft.ns&&Object.keys(Ft.ns).forEach(function(Di){Vt(St,"onopennamespace",{prefix:Di,uri:Ft.ns[Di]})});for(var di=0,Gt=St.attribList.length;di<Gt;di++){var Rt=St.attribList[di],_n=Rt[0],It=Rt[1],rt=en(_n,!0),lt=rt.prefix,Yn=""===lt?"":Ft.ns[lt]||"",Ti={name:_n,value:It,prefix:lt,local:rt.local,uri:Yn};lt&&"xmlns"!==lt&&!Yn&&(Ht(St,"Unbound namespace prefix: "+JSON.stringify(lt)),Ti.uri=lt),St.tag.attributes[_n]=Ti,Vt(St,"onattribute",Ti)}St.attribList.length=0}St.tag.isSelfClosing=!!Oe,St.sawRoot=!0,St.tags.push(St.tag),Vt(St,"onopentag",St.tag),Oe||(St.state=St.noscript||"script"!==St.tagName.toLowerCase()?st.TEXT:st.SCRIPT,St.tag=null,St.tagName=""),St.attribName=St.attribValue="",St.attribList.length=0}function xt(St){if(!St.tagName)return Ht(St,"Weird empty close tag."),St.textNode+="</>",void(St.state=st.TEXT);if(St.script){if("script"!==St.tagName)return St.script+="</"+St.tagName+">",St.tagName="",void(St.state=st.SCRIPT);Vt(St,"onscript",St.script),St.script=""}var Oe=St.tags.length,Ft=St.tagName;St.strict||(Ft=Ft[St.looseCase]());for(var Ot=Ft;Oe--&&St.tags[Oe].name!==Ot;)Ht(St,"Unexpected close tag");if(Oe<0)return Ht(St,"Unmatched closing tag: "+St.tagName),St.textNode+="</"+St.tagName+">",void(St.state=st.TEXT);St.tagName=Ft;for(var di=St.tags.length;di-- >Oe;){var Gt=St.tag=St.tags.pop();St.tagName=St.tag.name,Vt(St,"onclosetag",St.tagName);var Rt={};for(var _n in Gt.ns)Rt[_n]=Gt.ns[_n];St.opt.xmlns&&Gt.ns!==(St.tags[St.tags.length-1]||St).ns&&Object.keys(Gt.ns).forEach(function(rt){Vt(St,"onclosenamespace",{prefix:rt,uri:Gt.ns[rt]})})}0===Oe&&(St.closedRoot=!0),St.tagName=St.attribValue=St.attribName="",St.attribList.length=0,St.state=st.TEXT}function Jt(St){var Ot,Oe=St.entity,Ft=Oe.toLowerCase(),li="";return St.ENTITIES[Oe]?St.ENTITIES[Oe]:St.ENTITIES[Ft]?St.ENTITIES[Ft]:("#"===(Oe=Ft).charAt(0)&&("x"===Oe.charAt(1)?(Oe=Oe.slice(2),li=(Ot=parseInt(Oe,16)).toString(16)):(Oe=Oe.slice(1),li=(Ot=parseInt(Oe,10)).toString(10))),Oe=Oe.replace(/^0+/,""),isNaN(Ot)||li.toLowerCase()!==Oe?(Ht(St,"Invalid character entity"),"&"+St.entity+";"):String.fromCodePoint(Ot))}function Gn(St,Oe){"<"===Oe?(St.state=st.OPEN_WAKA,St.startTagPosition=St.position):L(Oe)||(Ht(St,"Non-whitespace before first tag."),St.textNode=Oe,St.state=st.TEXT)}function ri(St,Oe){var Ft="";return Oe<St.length&&(Ft=St.charAt(Oe)),Ft}st=ye.STATE,String.fromCodePoint||(St=String.fromCharCode,Oe=Math.floor,Ft=function(){var Ot=16384,li=[],Rt=-1,_n=arguments.length;if(!_n)return"";for(var It="";++Rt<_n;){var rt=Number(arguments[Rt]);if(!isFinite(rt)||rt<0||rt>1114111||Oe(rt)!==rt)throw RangeError("Invalid code point: "+rt);rt<=65535?li.push(rt):li.push(55296+((rt-=65536)>>10),rt%1024+56320),(Rt+1===_n||li.length>Ot)&&(It+=St.apply(null,li),li.length=0)}return It},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Ft,configurable:!0,writable:!0}):String.fromCodePoint=Ft)}(it)},6563:function(){!function(yt,it){"use strict";if(!yt.setImmediate){var re,ae=1,ye={},j=!1,oe=yt.document,Re=Object.getPrototypeOf&&Object.getPrototypeOf(yt);Re=Re&&Re.setTimeout?Re:yt,"[object process]"==={}.toString.call(yt.process)?function le(){re=function(Le){process.nextTick(function(){q(Le)})}}():function Te(){if(yt.postMessage&&!yt.importScripts){var Le=!0,Ve=yt.onmessage;return yt.onmessage=function(){Le=!1},yt.postMessage("","*"),yt.onmessage=Ve,Le}}()?function De(){var Le="setImmediate$"+Math.random()+"$",Ve=function(Ae){Ae.source===yt&&"string"==typeof Ae.data&&0===Ae.data.indexOf(Le)&&q(+Ae.data.slice(Le.length))};yt.addEventListener?yt.addEventListener("message",Ve,!1):yt.attachEvent("onmessage",Ve),re=function(Ae){yt.postMessage(Le+Ae,"*")}}():yt.MessageChannel?function xe(){var Le=new MessageChannel;Le.port1.onmessage=function(Ve){q(Ve.data)},re=function(Ve){Le.port2.postMessage(Ve)}}():oe&&"onreadystatechange"in oe.createElement("script")?function _e(){var Le=oe.documentElement;re=function(Ve){var Ae=oe.createElement("script");Ae.onreadystatechange=function(){q(Ve),Ae.onreadystatechange=null,Le.removeChild(Ae),Ae=null},Le.appendChild(Ae)}}():function Q(){re=function(Le){setTimeout(q,0,Le)}}(),Re.setImmediate=function ie(Le){"function"!=typeof Le&&(Le=new Function(""+Le));for(var Ve=new Array(arguments.length-1),Ae=0;Ae<Ve.length;Ae++)Ve[Ae]=arguments[Ae+1];var Se={callback:Le,args:Ve};return ye[ae]=Se,re(ae),ae++},Re.clearImmediate=V}function V(Le){delete ye[Le]}function q(Le){if(j)setTimeout(q,0,Le);else{var Ve=ye[Le];if(Ve){j=!0;try{!function K(Le){var Ve=Le.callback,Ae=Le.args;switch(Ae.length){case 0:Ve();break;case 1:Ve(Ae[0]);break;case 2:Ve(Ae[0],Ae[1]);break;case 3:Ve(Ae[0],Ae[1],Ae[2]);break;default:Ve.apply(void 0,Ae)}}(Ve)}finally{V(Le),j=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},2002:function(yt,it,ae){"use strict";var le,ye=this&&this.__extends||(le=function(Te,De){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,_e){xe.__proto__=_e}||function(xe,_e){for(var Q in _e)Object.prototype.hasOwnProperty.call(_e,Q)&&(xe[Q]=_e[Q])})(Te,De)},function(Te,De){if("function"!=typeof De&&null!==De)throw new TypeError("Class extends value "+String(De)+" is not a constructor or null");function xe(){this.constructor=Te}le(Te,De),Te.prototype=null===De?Object.create(De):(xe.prototype=De.prototype,new xe)}),j=this&&this.__importDefault||function(le){return le&&le.__esModule?le:{default:le}};Object.defineProperty(it,"__esModule",{value:!0});var oe=ae(2630),re=j(ae(4539)),ie=ae(1699),V=ae(57),K=1.5,q=function(le){function Te(){var De=le.call(this)||this;return De.x=.5,De.y=.5,De.angle=0,De.ratio=1,De.minRatio=null,De.maxRatio=null,De.nextFrame=null,De.previousState=null,De.enabled=!0,De.previousState=De.getState(),De}return ye(Te,le),Te.from=function(De){return(new Te).setState(De)},Te.prototype.enable=function(){return this.enabled=!0,this},Te.prototype.disable=function(){return this.enabled=!1,this},Te.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},Te.prototype.hasState=function(De){return this.x===De.x&&this.y===De.y&&this.ratio===De.ratio&&this.angle===De.angle},Te.prototype.getPreviousState=function(){var De=this.previousState;return De?{x:De.x,y:De.y,angle:De.angle,ratio:De.ratio}:null},Te.prototype.getBoundedRatio=function(De){var xe=De;return"number"==typeof this.minRatio&&(xe=Math.max(xe,this.minRatio)),"number"==typeof this.maxRatio&&(xe=Math.min(xe,this.maxRatio)),xe},Te.prototype.validateState=function(De){var xe={};return"number"==typeof De.x&&(xe.x=De.x),"number"==typeof De.y&&(xe.y=De.y),"number"==typeof De.angle&&(xe.angle=De.angle),"number"==typeof De.ratio&&(xe.ratio=this.getBoundedRatio(De.ratio)),xe},Te.prototype.isAnimated=function(){return!!this.nextFrame},Te.prototype.setState=function(De){if(!this.enabled)return this;this.previousState=this.getState();var xe=this.validateState(De);return"number"==typeof xe.x&&(this.x=xe.x),"number"==typeof xe.y&&(this.y=xe.y),"number"==typeof xe.angle&&(this.angle=xe.angle),"number"==typeof xe.ratio&&(this.ratio=xe.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},Te.prototype.animate=function(De,xe,_e){var Q=this;if(this.enabled){var Re=Object.assign({},oe.ANIMATE_DEFAULTS,xe),Le=this.validateState(De),Ve="function"==typeof Re.easing?Re.easing:re.default[Re.easing],Ae=Date.now(),Se=this.getState(),L=function(){var ee=(Date.now()-Ae)/Re.duration;if(ee>=1)return Q.nextFrame=null,Q.setState(Le),void(Q.animationCallback&&(Q.animationCallback.call(null),Q.animationCallback=void 0));var Ce=Ve(ee),ze={};"number"==typeof Le.x&&(ze.x=Se.x+(Le.x-Se.x)*Ce),"number"==typeof Le.y&&(ze.y=Se.y+(Le.y-Se.y)*Ce),"number"==typeof Le.angle&&(ze.angle=Se.angle+(Le.angle-Se.angle)*Ce),"number"==typeof Le.ratio&&(ze.ratio=Se.ratio+(Le.ratio-Se.ratio)*Ce),Q.setState(ze),Q.nextFrame=(0,ie.requestFrame)(L)};this.nextFrame?((0,ie.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,ie.requestFrame)(L)):L(),this.animationCallback=_e}},Te.prototype.animatedZoom=function(De){if(De){if("number"==typeof De)return this.animate({ratio:this.ratio/De});this.animate({ratio:this.ratio/(De.factor||K)},De)}else this.animate({ratio:this.ratio/K})},Te.prototype.animatedUnzoom=function(De){if(De){if("number"==typeof De)return this.animate({ratio:this.ratio*De});this.animate({ratio:this.ratio*(De.factor||K)},De)}else this.animate({ratio:this.ratio*K})},Te.prototype.animatedReset=function(De){this.animate({x:.5,y:.5,ratio:1,angle:0},De)},Te.prototype.copy=function(){return Te.from(this.getState())},Te}(V.TypedEventEmitter);it.default=q},5473:function(yt,it,ae){"use strict";var xe,ye=this&&this.__extends||(xe=function(_e,Q){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Le){Re.__proto__=Le}||function(Re,Le){for(var Ve in Le)Object.prototype.hasOwnProperty.call(Le,Ve)&&(Re[Ve]=Le[Ve])})(_e,Q)},function(_e,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function Re(){this.constructor=_e}xe(_e,Q),_e.prototype=null===Q?Object.create(Q):(Re.prototype=Q.prototype,new Re)}),j=this&&this.__assign||function(){return j=Object.assign||function(xe){for(var _e,Q=1,Re=arguments.length;Q<Re;Q++)for(var Le in _e=arguments[Q])Object.prototype.hasOwnProperty.call(_e,Le)&&(xe[Le]=_e[Le]);return xe},j.apply(this,arguments)};Object.defineProperty(it,"__esModule",{value:!0}),it.getWheelDelta=it.getTouchCoords=it.getTouchesArray=it.getWheelCoords=it.getMouseCoords=it.getPosition=void 0;var oe=ae(57);function re(xe,_e){var Q=_e.getBoundingClientRect();return{x:xe.clientX-Q.left,y:xe.clientY-Q.top}}function ie(xe,_e){var Q=j(j({},re(xe,_e)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){Q.sigmaDefaultPrevented=!0},original:xe});return Q}function q(xe){for(var _e=[],Q=0,Re=Math.min(xe.length,2);Q<Re;Q++)_e.push(xe[Q]);return _e}function Te(xe){if(typeof xe.deltaY<"u")return-3*xe.deltaY/360;if(typeof xe.detail<"u")return xe.detail/-9;throw new Error("Captor: could not extract delta from event.")}it.getPosition=re,it.getMouseCoords=ie,it.getWheelCoords=function V(xe,_e){return j(j({},ie(xe,_e)),{delta:Te(xe)})},it.getTouchesArray=q,it.getTouchCoords=function le(xe,_e){return{touches:q(xe.touches).map(function(Q){return re(Q,_e)}),original:xe}},it.getWheelDelta=Te;var De=function(xe){function _e(Q,Re){var Le=xe.call(this)||this;return Le.container=Q,Le.renderer=Re,Le}return ye(_e,xe),_e}(oe.TypedEventEmitter);it.default=De},2465:function(yt,it,ae){"use strict";var Le,ye=this&&this.__extends||(Le=function(Ve,Ae){return(Le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,L){Se.__proto__=L}||function(Se,L){for(var ee in L)Object.prototype.hasOwnProperty.call(L,ee)&&(Se[ee]=L[ee])})(Ve,Ae)},function(Ve,Ae){if("function"!=typeof Ae&&null!==Ae)throw new TypeError("Class extends value "+String(Ae)+" is not a constructor or null");function Se(){this.constructor=Ve}Le(Ve,Ae),Ve.prototype=null===Ae?Object.create(Ae):(Se.prototype=Ae.prototype,new Se)}),j=this&&this.__createBinding||(Object.create?function(Le,Ve,Ae,Se){void 0===Se&&(Se=Ae),Object.defineProperty(Le,Se,{enumerable:!0,get:function(){return Ve[Ae]}})}:function(Le,Ve,Ae,Se){void 0===Se&&(Se=Ae),Le[Se]=Ve[Ae]}),oe=this&&this.__setModuleDefault||(Object.create?function(Le,Ve){Object.defineProperty(Le,"default",{enumerable:!0,value:Ve})}:function(Le,Ve){Le.default=Ve}),re=this&&this.__importStar||function(Le){if(Le&&Le.__esModule)return Le;var Ve={};if(null!=Le)for(var Ae in Le)"default"!==Ae&&Object.prototype.hasOwnProperty.call(Le,Ae)&&j(Ve,Le,Ae);return oe(Ve,Le),Ve};Object.defineProperty(it,"__esModule",{value:!0});var ie=re(ae(5473)),Re=function(Le){function Ve(Ae,Se){var L=Le.call(this,Ae,Se)||this;return L.enabled=!0,L.draggedEvents=0,L.downStartTime=null,L.lastMouseX=null,L.lastMouseY=null,L.isMouseDown=!1,L.isMoving=!1,L.movingTimeout=null,L.startCameraState=null,L.clicks=0,L.doubleClickTimeout=null,L.currentWheelDirection=0,L.handleClick=L.handleClick.bind(L),L.handleRightClick=L.handleRightClick.bind(L),L.handleDown=L.handleDown.bind(L),L.handleUp=L.handleUp.bind(L),L.handleMove=L.handleMove.bind(L),L.handleWheel=L.handleWheel.bind(L),L.handleOut=L.handleOut.bind(L),Ae.addEventListener("click",L.handleClick,!1),Ae.addEventListener("contextmenu",L.handleRightClick,!1),Ae.addEventListener("mousedown",L.handleDown,!1),Ae.addEventListener("wheel",L.handleWheel,!1),Ae.addEventListener("mouseout",L.handleOut,!1),document.addEventListener("mousemove",L.handleMove,!1),document.addEventListener("mouseup",L.handleUp,!1),L}return ye(Ve,Le),Ve.prototype.kill=function(){var Ae=this.container;Ae.removeEventListener("click",this.handleClick),Ae.removeEventListener("contextmenu",this.handleRightClick),Ae.removeEventListener("mousedown",this.handleDown),Ae.removeEventListener("wheel",this.handleWheel),Ae.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},Ve.prototype.handleClick=function(Ae){var Se=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(Ae);setTimeout(function(){Se.clicks=0,Se.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",(0,ie.getMouseCoords)(Ae,this.container))}},Ve.prototype.handleRightClick=function(Ae){!this.enabled||this.emit("rightClick",(0,ie.getMouseCoords)(Ae,this.container))},Ve.prototype.handleDoubleClick=function(Ae){if(this.enabled){Ae.preventDefault(),Ae.stopPropagation();var Se=(0,ie.getMouseCoords)(Ae,this.container);if(this.emit("doubleClick",Se),!Se.sigmaDefaultPrevented){var L=this.renderer.getCamera(),ee=L.getBoundedRatio(L.getState().ratio/2.2);L.animate(this.renderer.getViewportZoomedState((0,ie.getPosition)(Ae,this.container),ee),{easing:"quadraticInOut",duration:200})}}},Ve.prototype.handleDown=function(Ae){if(this.enabled){this.startCameraState=this.renderer.getCamera().getState();var Se=(0,ie.getPosition)(Ae,this.container),ee=Se.y;this.lastMouseX=Se.x,this.lastMouseY=ee,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0,this.emit("mousedown",(0,ie.getMouseCoords)(Ae,this.container))}},Ve.prototype.handleUp=function(Ae){var Se=this;if(this.enabled&&this.isMouseDown){var L=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var ee=(0,ie.getPosition)(Ae,this.container),Ce=ee.x,ze=ee.y,dt=L.getState(),st=L.getPreviousState()||{x:0,y:0};this.isMoving?L.animate({x:dt.x+3*(dt.x-st.x),y:dt.y+3*(dt.y-st.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==Ce||this.lastMouseY!==ze)&&L.setState({x:dt.x,y:dt.y}),this.isMoving=!1,setTimeout(function(){Se.draggedEvents=0,Se.renderer.refresh()},0),this.emit("mouseup",(0,ie.getMouseCoords)(Ae,this.container))}},Ve.prototype.handleMove=function(Ae){var Se=this;if(this.enabled){var L=(0,ie.getMouseCoords)(Ae,this.container);if(this.emit("mousemovebody",L),Ae.target===this.container&&this.emit("mousemove",L),!L.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){Se.movingTimeout=null,Se.isMoving=!1},100);var ee=this.renderer.getCamera(),Ce=(0,ie.getPosition)(Ae,this.container),ze=Ce.x,dt=Ce.y,st=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),bt=this.renderer.viewportToFramedGraph({x:ze,y:dt}),ut=st.x-bt.x,Vt=st.y-bt.y,on=ee.getState();ee.setState({x:on.x+ut,y:on.y+Vt}),this.lastMouseX=ze,this.lastMouseY=dt,Ae.preventDefault(),Ae.stopPropagation()}}},Ve.prototype.handleWheel=function(Ae){var Se=this;if(this.enabled){Ae.preventDefault(),Ae.stopPropagation();var L=(0,ie.getWheelDelta)(Ae);if(L){var ee=(0,ie.getWheelCoords)(Ae,this.container);if(this.emit("wheel",ee),!ee.sigmaDefaultPrevented){var Ce=L>0?1/1.7:1.7,ze=this.renderer.getCamera(),dt=ze.getBoundedRatio(ze.getState().ratio*Ce),st=L>0?1:-1,bt=Date.now();this.currentWheelDirection===st&&this.lastWheelTriggerTime&&bt-this.lastWheelTriggerTime<50||(ze.animate(this.renderer.getViewportZoomedState((0,ie.getPosition)(Ae,this.container),dt),{easing:"quadraticOut",duration:250},function(){Se.currentWheelDirection=0}),this.currentWheelDirection=st,this.lastWheelTriggerTime=bt)}}}},Ve.prototype.handleOut=function(){},Ve}(ie.default);it.default=Re},1565:function(yt,it,ae){"use strict";var De,ye=this&&this.__extends||(De=function(xe,_e){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,Re){Q.__proto__=Re}||function(Q,Re){for(var Le in Re)Object.prototype.hasOwnProperty.call(Re,Le)&&(Q[Le]=Re[Le])})(xe,_e)},function(xe,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Class extends value "+String(_e)+" is not a constructor or null");function Q(){this.constructor=xe}De(xe,_e),xe.prototype=null===_e?Object.create(_e):(Q.prototype=_e.prototype,new Q)}),j=this&&this.__createBinding||(Object.create?function(De,xe,_e,Q){void 0===Q&&(Q=_e),Object.defineProperty(De,Q,{enumerable:!0,get:function(){return xe[_e]}})}:function(De,xe,_e,Q){void 0===Q&&(Q=_e),De[Q]=xe[_e]}),oe=this&&this.__setModuleDefault||(Object.create?function(De,xe){Object.defineProperty(De,"default",{enumerable:!0,value:xe})}:function(De,xe){De.default=xe}),re=this&&this.__importStar||function(De){if(De&&De.__esModule)return De;var xe={};if(null!=De)for(var _e in De)"default"!==_e&&Object.prototype.hasOwnProperty.call(De,_e)&&j(xe,De,_e);return oe(xe,De),xe},ie=this&&this.__read||function(De,xe){var _e="function"==typeof Symbol&&De[Symbol.iterator];if(!_e)return De;var Re,Ve,Q=_e.call(De),Le=[];try{for(;(void 0===xe||xe-- >0)&&!(Re=Q.next()).done;)Le.push(Re.value)}catch(Ae){Ve={error:Ae}}finally{try{Re&&!Re.done&&(_e=Q.return)&&_e.call(Q)}finally{if(Ve)throw Ve.error}}return Le};Object.defineProperty(it,"__esModule",{value:!0});var V=re(ae(5473)),Te=function(De){function xe(_e,Q){var Re=De.call(this,_e,Q)||this;return Re.enabled=!0,Re.isMoving=!1,Re.touchMode=0,Re.handleStart=Re.handleStart.bind(Re),Re.handleLeave=Re.handleLeave.bind(Re),Re.handleMove=Re.handleMove.bind(Re),_e.addEventListener("touchstart",Re.handleStart,!1),_e.addEventListener("touchend",Re.handleLeave,!1),_e.addEventListener("touchcancel",Re.handleLeave,!1),_e.addEventListener("touchmove",Re.handleMove,!1),Re}return ye(xe,De),xe.prototype.kill=function(){var _e=this.container;_e.removeEventListener("touchstart",this.handleStart),_e.removeEventListener("touchend",this.handleLeave),_e.removeEventListener("touchcancel",this.handleLeave),_e.removeEventListener("touchmove",this.handleMove)},xe.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},xe.prototype.dispatchRelatedMouseEvent=function(_e,Q,Re,Le){var Ve=Re||(0,V.getPosition)(Q.touches[0],this.container),Ae=new MouseEvent(_e,{clientX:Ve.x,clientY:Ve.y,altKey:Q.altKey,ctrlKey:Q.ctrlKey});Ae.isFakeSigmaMouseEvent=!0,(Le||this.container).dispatchEvent(Ae)},xe.prototype.handleStart=function(_e){var Q=this;if(this.enabled){_e.preventDefault(),1===_e.touches.length&&this.dispatchRelatedMouseEvent("mousedown",_e);var Re=(0,V.getTouchesArray)(_e.touches);if(this.isMoving=!0,this.touchMode=Re.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=Re.map(function(ze){return(0,V.getPosition)(ze,Q.container)}),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var Le=ie(this.startTouchesPositions,2),Ve=Le[0],Ae=Ve.x,Se=Ve.y,L=Le[1],ee=L.x,Ce=L.y;this.startTouchesAngle=Math.atan2(Ce-Se,ee-Ae),this.startTouchesDistance=Math.sqrt(Math.pow(ee-Ae,2)+Math.pow(Ce-Se,2))}this.emit("touchdown",(0,V.getTouchCoords)(_e,this.container))}},xe.prototype.handleLeave=function(_e){if(this.enabled){switch(_e.preventDefault(),0===_e.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",_e,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",_e,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===_e.touches.length){this.handleStart(_e),_e.preventDefault();break}case 1:if(this.isMoving){var Q=this.renderer.getCamera(),Re=Q.getState(),Le=Q.getPreviousState()||{x:0,y:0};Q.animate({x:Re.x+3*(Re.x-Le.x),y:Re.y+3*(Re.y-Le.y)},{duration:200,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,V.getTouchCoords)(_e,this.container))}},xe.prototype.handleMove=function(_e){var Q,Re=this;if(this.enabled){_e.preventDefault(),1===_e.touches.length&&this.dispatchRelatedMouseEvent("mousemove",_e);var Le=this.renderer.getCamera(),Ve=this.startCameraState,Se=(0,V.getTouchesArray)(_e.touches).map(function(ni){return(0,V.getPosition)(ni,Re.container)});switch(this.lastTouchesPositions=Se,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){Re.isMoving=!1},200),this.touchMode){case 1:var L=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),ee=L.x,Ce=L.y,ze=this.renderer.viewportToFramedGraph(Se[0]);Le.setState({x:Ve.x+ee-(dt=ze.x),y:Ve.y+Ce-(st=ze.y)});break;case 2:var bt={},ut=Se[0],Vt=ut.x,on=ut.y,Ct=Se[1],rn=Ct.x,Qt=Ct.y,Ht=Math.atan2(Qt-on,rn-Vt)-this.startTouchesAngle,Qn=Math.hypot(Qt-on,rn-Vt)/this.startTouchesDistance,en=Le.getBoundedRatio(Ve.ratio/Qn);bt.ratio=en,bt.angle=Ve.angle+Ht;var dt,Sn=this.getDimensions(),Pn=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:Ve}),xt=Math.min(Sn.width,Sn.height),ri=en/xt,st=on-xt/2/(xt/Sn.height);st=(Q=ie([(dt=Vt-xt/2/(xt/Sn.width))*Math.cos(-bt.angle)-st*Math.sin(-bt.angle),st*Math.cos(-bt.angle)+dt*Math.sin(-bt.angle)],2))[1],bt.x=Pn.x-(dt=Q[0])*ri,bt.y=Pn.y+st*ri,Le.setState(bt)}this.emit("touchmove",(0,V.getTouchCoords)(_e,this.container))}},xe}(V.default);it.default=Te},4942:(yt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.edgeLabelsToDisplayFromNodes=it.LabelGrid=void 0;var ae=function(){function oe(re,ie){this.key=re,this.size=ie}return oe.compare=function(re,ie){return re.size>ie.size?-1:re.size<ie.size||re.key>ie.key?1:-1},oe}(),ye=function(){function oe(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return oe.prototype.resizeAndClear=function(re,ie){this.width=re.width,this.height=re.height,this.cellSize=ie,this.columns=Math.ceil(re.width/ie),this.rows=Math.ceil(re.height/ie),this.cells={}},oe.prototype.getIndex=function(re){var ie=Math.floor(re.x/this.cellSize);return Math.floor(re.y/this.cellSize)*this.columns+ie},oe.prototype.add=function(re,ie,V){var K=new ae(re,ie),q=this.getIndex(V),le=this.cells[q];le||(this.cells[q]=le=[]),le.push(K)},oe.prototype.organize=function(){for(var re in this.cells)this.cells[re].sort(ae.compare)},oe.prototype.getLabelsToDisplay=function(re,ie){var V=this.cellSize*this.cellSize,le=Math.ceil(V/re/re*ie/V),Te=[];for(var De in this.cells)for(var xe=this.cells[De],_e=0;_e<Math.min(le,xe.length);_e++)Te.push(xe[_e].key);return Te},oe}();it.LabelGrid=ye,it.edgeLabelsToDisplayFromNodes=function j(oe){var ie=oe.hoveredNode,V=oe.highlightedNodes,K=oe.displayedNodeLabels,q=[];return oe.graph.forEachEdge(function(le,Te,De,xe){(De===ie||xe===ie||V.has(De)||V.has(xe)||K.has(De)&&K.has(xe))&&q.push(le)}),q}},3650:function(yt,it,ae){"use strict";var ye=this&&this.__read||function(bt,ut){var Vt="function"==typeof Symbol&&bt[Symbol.iterator];if(!Vt)return bt;var Ct,Qt,on=Vt.call(bt),rn=[];try{for(;(void 0===ut||ut-- >0)&&!(Ct=on.next()).done;)rn.push(Ct.value)}catch(Ht){Qt={error:Ht}}finally{try{Ct&&!Ct.done&&(Vt=on.return)&&Vt.call(on)}finally{if(Qt)throw Qt.error}}return rn},j=this&&this.__spreadArray||function(bt,ut,Vt){if(Vt||2===arguments.length)for(var rn,on=0,Ct=ut.length;on<Ct;on++)(rn||!(on in ut))&&(rn||(rn=Array.prototype.slice.call(ut,0,on)),rn[on]=ut[on]);return bt.concat(rn||Array.prototype.slice.call(ut))},oe=this&&this.__importDefault||function(bt){return bt&&bt.__esModule?bt:{default:bt}};Object.defineProperty(it,"__esModule",{value:!0}),it.rectangleCollidesWithQuad=it.squareCollidesWithQuad=it.getCircumscribedAlignedRectangle=it.isRectangleAligned=void 0;var re=oe(ae(3333)),K="outside",Le=!1;function Ve(bt){return bt.x1===bt.x2||bt.y1===bt.y2}function Ae(bt){var ut=Math.sqrt(Math.pow(bt.x2-bt.x1,2)+Math.pow(bt.y2-bt.y1,2)),Vt_x=(bt.y1-bt.y2)*bt.height/ut,Vt_y=(bt.x2-bt.x1)*bt.height/ut,on={x:bt.x1,y:bt.y1},Ct={x:bt.x2,y:bt.y2},rn={x:bt.x1+Vt_x,y:bt.y1+Vt_y},Qt={x:bt.x2+Vt_x,y:bt.y2+Vt_y},Ht=Math.min(on.x,Ct.x,rn.x,Qt.x),Qn=Math.max(on.x,Ct.x,rn.x,Qt.x),en=Math.min(on.y,Ct.y,rn.y,Qt.y);return{x1:Ht,y1:en,x2:Qn,y2:en,height:Math.max(on.y,Ct.y,rn.y,Qt.y)-en}}function Se(bt,ut,Vt,on,Ct,rn,Qt){return bt<on+rn&&bt+Vt>on&&ut<Ct+Qt&&ut+Vt>Ct}function L(bt,ut,Vt,on,Ct,rn,Qt,Ht){return bt<Ct+Qt&&bt+Vt>Ct&&ut<rn+Ht&&ut+on>rn}function ee(bt,ut,Vt,on,Ct,rn){var en=bt<Vt+Ct/2;return ut<on+rn/2?en?1:2:en?3:4}it.isRectangleAligned=Ve,it.getCircumscribedAlignedRectangle=Ae,it.squareCollidesWithQuad=Se,it.rectangleCollidesWithQuad=L;var st=function(){function bt(ut){var Vt;void 0===ut&&(ut={}),this.containers=((Vt={})[K]=[],Vt),this.cache=null,this.lastRectangle=null;var on=Math.pow(4,5);this.data=new Float32Array((4*on-1)/3*4),this.resize(ut.boundaries?ut.boundaries:{x:0,y:0,width:1,height:1})}return bt.prototype.add=function(ut,Vt,on,Ct){return function ze(bt,ut,Vt,on,Ct,rn,Qt){for(var Ht=Ct-Qt,Qn=rn-Qt,en=2*Qt,Sn=0,Pn=0;;){if(Sn>=bt)return Vt[Pn]=Vt[Pn]||[],void Vt[Pn].push(on);var xt=4*Pn+4,Jt=4*Pn+8,Gn=4*Pn+12,ri=4*Pn+16,ni=Se(Ht,Qn,en,ut[xt+0],ut[xt+1],ut[xt+2],ut[xt+3]),St=Se(Ht,Qn,en,ut[Jt+0],ut[Jt+1],ut[Jt+2],ut[Jt+3]),Oe=Se(Ht,Qn,en,ut[Gn+0],ut[Gn+1],ut[Gn+2],ut[Gn+3]),Ft=Se(Ht,Qn,en,ut[ri+0],ut[ri+1],ut[ri+2],ut[ri+3]),Ot=[ni,St,Oe,Ft].reduce(function(li,di){return di?li+1:li},0);if(0===Ot&&0===Sn)return Vt[K].push(on),void(!Le&&Vt[K].length>=5&&(Le=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===Ot)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(Sn,", key: ").concat(on,", x: ").concat(Ct,", y: ").concat(rn,", size: ").concat(Qt,")."));if(3===Ot)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(Sn,", key: ").concat(on,", x: ").concat(Ct,", y: ").concat(rn,", size: ").concat(Qt,")."));if(Ot>1)return Vt[Pn]=Vt[Pn]||[],void Vt[Pn].push(on);Sn++,ni&&(Pn=xt),St&&(Pn=Jt),Oe&&(Pn=Gn),Ft&&(Pn=ri)}}(5,this.data,this.containers,ut,Vt,on,Ct),this},bt.prototype.resize=function(ut){this.clear(),this.data[0]=ut.x,this.data[1]=ut.y,this.data[2]=ut.width,this.data[3]=ut.height,function Ce(bt,ut){for(var Vt=[0,0];Vt.length;){var on=Vt.pop(),Ct=Vt.pop(),rn=4*Ct+4,Qt=4*Ct+8,Ht=4*Ct+12,Qn=4*Ct+16,en=ut[Ct+0],Sn=ut[Ct+1],Jt=ut[Ct+2]/2,Gn=ut[Ct+3]/2;ut[rn+0]=en,ut[rn+1]=Sn,ut[rn+2]=Jt,ut[rn+3]=Gn,ut[Qt+0]=en+Jt,ut[Qt+1]=Sn,ut[Qt+2]=Jt,ut[Qt+3]=Gn,ut[Ht+0]=en,ut[Ht+1]=Sn+Gn,ut[Ht+2]=Jt,ut[Ht+3]=Gn,ut[Qn+0]=en+Jt,ut[Qn+1]=Sn+Gn,ut[Qn+2]=Jt,ut[Qn+3]=Gn,on<bt-1&&(Vt.push(Qn,on+1),Vt.push(Ht,on+1),Vt.push(Qt,on+1),Vt.push(rn,on+1))}}(5,this.data)},bt.prototype.clear=function(){var ut;return this.containers=((ut={})[K]=[],ut),this},bt.prototype.point=function(ut,Vt){var on=this.containers[K],Ct=0,rn=0;do{this.containers[Ct]&&on.push.apply(on,j([],ye(this.containers[Ct]),!1)),Ct=4*Ct+4*ee(ut,Vt,this.data[Ct+0],this.data[Ct+1],this.data[Ct+2],this.data[Ct+3]),rn++}while(rn<=5);return on},bt.prototype.rectangle=function(ut,Vt,on,Ct,rn){var Qt,Ht=this.lastRectangle;return Ht&&ut===Ht.x1&&on===Ht.x2&&Vt===Ht.y1&&Ct===Ht.y2&&rn===Ht.height||(this.lastRectangle={x1:ut,y1:Vt,x2:on,y2:Ct,height:rn},Ve(this.lastRectangle)||(this.lastRectangle=Ae(this.lastRectangle)),this.cache=function dt(bt,ut,Vt,on,Ct,rn,Qt){for(var en,Ht=[0,0],Qn=[];Ht.length;){var Sn=Ht.pop(),Pn=Ht.pop();if((en=Vt[Pn])&&(0,re.default)(Qn,en),!(Sn>=bt)){var xt=4*Pn+4,Jt=4*Pn+8,Gn=4*Pn+12,ri=4*Pn+16,ni=L(on,Ct,rn,Qt,ut[xt+0],ut[xt+1],ut[xt+2],ut[xt+3]),St=L(on,Ct,rn,Qt,ut[Jt+0],ut[Jt+1],ut[Jt+2],ut[Jt+3]),Oe=L(on,Ct,rn,Qt,ut[Gn+0],ut[Gn+1],ut[Gn+2],ut[Gn+3]),Ft=L(on,Ct,rn,Qt,ut[ri+0],ut[ri+1],ut[ri+2],ut[ri+3]);ni&&Ht.push(xt,Sn+1),St&&Ht.push(Jt,Sn+1),Oe&&Ht.push(Gn,Sn+1),Ft&&Ht.push(ri,Sn+1)}}return Qn}(5,this.data,this.containers,ut,Vt,Math.abs(ut-on)||Math.abs(Vt-Ct),rn),(Qt=this.cache).push.apply(Qt,j([],ye(this.containers[K]),!1))),this.cache},bt}();it.default=st},756:function(yt,it,ae){"use strict";var ye=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(it,"__esModule",{value:!0}),it.Sigma=it.MouseCaptor=it.QuadTree=it.Camera=void 0;var j=ye(ae(4870));it.Sigma=j.default;var oe=ye(ae(2002));it.Camera=oe.default;var re=ye(ae(3650));it.QuadTree=re.default;var ie=ye(ae(2465));it.MouseCaptor=ie.default,it.default=j.default},1285:(yt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.default=function ae(ye,j,oe,re,ie){var V=ie.edgeLabelSize,K=ie.edgeLabelFont,q=ie.edgeLabelWeight,Te=j.label;if(Te){ye.fillStyle=ie.edgeLabelColor.attribute?j[ie.edgeLabelColor.attribute]||ie.edgeLabelColor.color||"#000":ie.edgeLabelColor.color,ye.font="".concat(q," ").concat(V,"px ").concat(K);var De=oe.size,xe=re.size,_e=oe.x,Q=oe.y,Re=re.x,Le=re.y,Ve=(_e+Re)/2,Ae=(Q+Le)/2,Se=Re-_e,L=Le-Q,ee=Math.sqrt(Se*Se+L*L);if(!(ee<De+xe)){Ve=((_e+=Se*De/ee)+(Re-=Se*xe/ee))/2,Ae=((Q+=L*De/ee)+(Le-=L*xe/ee))/2,Se=Re-_e,L=Le-Q,ee=Math.sqrt(Se*Se+L*L);var dt,Ce=ye.measureText(Te).width;if(Ce>ee){for(Ce=ye.measureText(Te+="\u2026").width;Ce>ee&&Te.length>1;)Te=Te.slice(0,-2)+"\u2026",Ce=ye.measureText(Te).width;if(Te.length<4)return}dt=Se>0?L>0?Math.acos(Se/ee):Math.asin(L/ee):L>0?Math.acos(Se/ee)+Math.PI:Math.asin(Se/ee)+Math.PI/2,ye.save(),ye.translate(Ve,Ae),ye.rotate(dt),ye.fillText(Te,-Ce/2,j.size/2+V),ye.restore()}}}},4997:function(yt,it,ae){"use strict";var ye=this&&this.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(it,"__esModule",{value:!0});var j=ye(ae(9597));it.default=function oe(re,ie,V){var K=V.labelSize,q=V.labelFont;if(re.font="".concat(V.labelWeight," ").concat(K,"px ").concat(q),re.fillStyle="#FFF",re.shadowOffsetX=0,re.shadowOffsetY=0,re.shadowBlur=8,re.shadowColor="#000","string"==typeof ie.label){var De=re.measureText(ie.label).width,xe=Math.round(De+5),_e=Math.round(K+4),Q=Math.max(ie.size,K/2)+2,Re=Math.asin(_e/2/Q),Le=Math.sqrt(Math.abs(Math.pow(Q,2)-Math.pow(_e/2,2)));re.beginPath(),re.moveTo(ie.x+Le,ie.y+_e/2),re.lineTo(ie.x+Q+xe,ie.y+_e/2),re.lineTo(ie.x+Q+xe,ie.y-_e/2),re.lineTo(ie.x+Le,ie.y-_e/2),re.arc(ie.x,ie.y,Q,Re,-Re),re.closePath(),re.fill()}else re.beginPath(),re.arc(ie.x,ie.y,ie.size+2,0,2*Math.PI),re.closePath(),re.fill();re.shadowOffsetX=0,re.shadowOffsetY=0,re.shadowBlur=0,(0,j.default)(re,ie,V)}},9597:(yt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.default=function ae(ye,j,oe){if(j.label){var re=oe.labelSize,ie=oe.labelFont,V=oe.labelWeight;ye.fillStyle=oe.labelColor.attribute?j[oe.labelColor.attribute]||oe.labelColor.color||"#000":oe.labelColor.color,ye.font="".concat(V," ").concat(re,"px ").concat(ie),ye.fillText(j.label,j.x+j.size+3,j.y+re/3)}}},6160:function(yt,it,ae){"use strict";var ie,ye=this&&this.__extends||(ie=function(V,K){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,le){q.__proto__=le}||function(q,le){for(var Te in le)Object.prototype.hasOwnProperty.call(le,Te)&&(q[Te]=le[Te])})(V,K)},function(V,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function q(){this.constructor=V}ie(V,K),V.prototype=null===K?Object.create(K):(q.prototype=K.prototype,new q)});Object.defineProperty(it,"__esModule",{value:!0}),it.createEdgeCompoundProgram=it.AbstractEdgeProgram=void 0;var oe=function(ie){function V(K,q,le,Te,De){return ie.call(this,K,q,le,Te,De)||this}return ye(V,ie),V}(ae(727).AbstractProgram);it.AbstractEdgeProgram=oe,it.createEdgeCompoundProgram=function re(ie){return function(){function V(K,q){this.programs=ie.map(function(le){return new le(K,q)})}return V.prototype.bufferData=function(){this.programs.forEach(function(K){return K.bufferData()})},V.prototype.allocate=function(K){this.programs.forEach(function(q){return q.allocate(K)})},V.prototype.bind=function(){},V.prototype.computeIndices=function(){this.programs.forEach(function(K){return K.computeIndices()})},V.prototype.render=function(K){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(K)})},V.prototype.process=function(K,q,le,Te,De){this.programs.forEach(function(xe){return xe.process(K,q,le,Te,De)})},V}()}},4588:function(yt,it,ae){"use strict";var ie,ye=this&&this.__extends||(ie=function(V,K){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,le){q.__proto__=le}||function(q,le){for(var Te in le)Object.prototype.hasOwnProperty.call(le,Te)&&(q[Te]=le[Te])})(V,K)},function(V,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function q(){this.constructor=V}ie(V,K),V.prototype=null===K?Object.create(K):(q.prototype=K.prototype,new q)});Object.defineProperty(it,"__esModule",{value:!0}),it.createNodeCompoundProgram=it.AbstractNodeProgram=void 0;var oe=function(ie){function V(K,q,le,Te,De){var xe=ie.call(this,K,q,le,Te,De)||this;xe.positionLocation=K.getAttribLocation(xe.program,"a_position"),xe.sizeLocation=K.getAttribLocation(xe.program,"a_size"),xe.colorLocation=K.getAttribLocation(xe.program,"a_color");var _e=K.getUniformLocation(xe.program,"u_matrix");if(null===_e)throw new Error("AbstractNodeProgram: error while getting matrixLocation");xe.matrixLocation=_e;var Q=K.getUniformLocation(xe.program,"u_ratio");if(null===Q)throw new Error("AbstractNodeProgram: error while getting ratioLocation");xe.ratioLocation=Q;var Re=K.getUniformLocation(xe.program,"u_scale");if(null===Re)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return xe.scaleLocation=Re,xe}return ye(V,ie),V.prototype.bind=function(){var K=this.gl;K.enableVertexAttribArray(this.positionLocation),K.enableVertexAttribArray(this.sizeLocation),K.enableVertexAttribArray(this.colorLocation),K.vertexAttribPointer(this.positionLocation,2,K.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),K.vertexAttribPointer(this.sizeLocation,1,K.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),K.vertexAttribPointer(this.colorLocation,4,K.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},V}(ae(727).AbstractProgram);it.AbstractNodeProgram=oe,it.createNodeCompoundProgram=function re(ie){return function(){function V(K,q){this.programs=ie.map(function(le){return new le(K,q)})}return V.prototype.bufferData=function(){this.programs.forEach(function(K){return K.bufferData()})},V.prototype.allocate=function(K){this.programs.forEach(function(q){return q.allocate(K)})},V.prototype.bind=function(){},V.prototype.render=function(K){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(K)})},V.prototype.process=function(K,q,le){this.programs.forEach(function(Te){return Te.process(K,q,le)})},V}()}},727:(yt,it,ae)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.AbstractProgram=void 0;var ye=ae(5166),j=function(){function oe(re,ie,V,K,q){this.array=new Float32Array,this.points=K,this.attributes=q,this.gl=re,this.vertexShaderSource=ie,this.fragmentShaderSource=V;var le=re.createBuffer();if(null===le)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=le,re.bindBuffer(re.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,ye.loadVertexShader)(re,this.vertexShaderSource),this.fragmentShader=(0,ye.loadFragmentShader)(re,this.fragmentShaderSource),this.program=(0,ye.loadProgram)(re,[this.vertexShader,this.fragmentShader])}return oe.prototype.bufferData=function(){var re=this.gl;re.bufferData(re.ARRAY_BUFFER,this.array,re.DYNAMIC_DRAW)},oe.prototype.allocate=function(re){this.array=new Float32Array(this.points*this.attributes*re)},oe.prototype.hasNothingToRender=function(){return 0===this.array.length},oe}();it.AbstractProgram=j},1391:function(yt,it,ae){"use strict";var ye=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(it,"__esModule",{value:!0});var j=ae(6160),oe=ye(ae(1034)),re=ye(ae(2542)),ie=(0,j.createEdgeCompoundProgram)([re.default,oe.default]);it.default=ie},1034:function(yt,it,ae){"use strict";var De,ye=this&&this.__extends||(De=function(xe,_e){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,Re){Q.__proto__=Re}||function(Q,Re){for(var Le in Re)Object.prototype.hasOwnProperty.call(Re,Le)&&(Q[Le]=Re[Le])})(xe,_e)},function(xe,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Class extends value "+String(_e)+" is not a constructor or null");function Q(){this.constructor=xe}De(xe,_e),xe.prototype=null===_e?Object.create(_e):(Q.prototype=_e.prototype,new Q)}),j=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(it,"__esModule",{value:!0});var oe=ae(1699),re=j(ae(4647)),ie=j(ae(2018)),Te=function(De){function xe(_e){var Q=De.call(this,_e,re.default,ie.default,3,9)||this;Q.positionLocation=_e.getAttribLocation(Q.program,"a_position"),Q.colorLocation=_e.getAttribLocation(Q.program,"a_color"),Q.normalLocation=_e.getAttribLocation(Q.program,"a_normal"),Q.radiusLocation=_e.getAttribLocation(Q.program,"a_radius"),Q.barycentricLocation=_e.getAttribLocation(Q.program,"a_barycentric");var Re=_e.getUniformLocation(Q.program,"u_matrix");if(null===Re)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");Q.matrixLocation=Re;var Le=_e.getUniformLocation(Q.program,"u_sqrtZoomRatio");if(null===Le)throw new Error("EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation");Q.sqrtZoomRatioLocation=Le;var Ve=_e.getUniformLocation(Q.program,"u_correctionRatio");if(null===Ve)throw new Error("EdgeArrowHeadProgram: error while getting correctionRatioLocation");return Q.correctionRatioLocation=Ve,Q.bind(),Q}return ye(xe,De),xe.prototype.bind=function(){var _e=this.gl;_e.enableVertexAttribArray(this.positionLocation),_e.enableVertexAttribArray(this.normalLocation),_e.enableVertexAttribArray(this.radiusLocation),_e.enableVertexAttribArray(this.colorLocation),_e.enableVertexAttribArray(this.barycentricLocation),_e.vertexAttribPointer(this.positionLocation,2,_e.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,0),_e.vertexAttribPointer(this.normalLocation,2,_e.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,8),_e.vertexAttribPointer(this.radiusLocation,1,_e.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,16),_e.vertexAttribPointer(this.colorLocation,4,_e.UNSIGNED_BYTE,!0,9*Float32Array.BYTES_PER_ELEMENT,20),_e.vertexAttribPointer(this.barycentricLocation,3,_e.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,24)},xe.prototype.computeIndices=function(){},xe.prototype.process=function(_e,Q,Re,Le,Ve){if(Le)for(var Ae=27*Ve,Se=Ae+27;Ae<Se;Ae++)this.array[Ae]=0;else{var L=Re.size||1,ee=Q.size||1,Ce=_e.x,ze=_e.y,dt=Q.x,st=Q.y,bt=(0,oe.floatColor)(Re.color),ut=dt-Ce,Vt=st-ze,on=ut*ut+Vt*Vt,Ct=0,rn=0;on&&(Ct=-Vt*(on=1/Math.sqrt(on))*L,rn=ut*on*L);var Qt=27*Ve,Ht=this.array;Ht[Qt++]=dt,Ht[Qt++]=st,Ht[Qt++]=-Ct,Ht[Qt++]=-rn,Ht[Qt++]=ee,Ht[Qt++]=bt,Ht[Qt++]=1,Ht[Qt++]=0,Ht[Qt++]=0,Ht[Qt++]=dt,Ht[Qt++]=st,Ht[Qt++]=-Ct,Ht[Qt++]=-rn,Ht[Qt++]=ee,Ht[Qt++]=bt,Ht[Qt++]=0,Ht[Qt++]=1,Ht[Qt++]=0,Ht[Qt++]=dt,Ht[Qt++]=st,Ht[Qt++]=-Ct,Ht[Qt++]=-rn,Ht[Qt++]=ee,Ht[Qt++]=bt,Ht[Qt++]=0,Ht[Qt++]=0,Ht[Qt]=1}},xe.prototype.render=function(_e){if(!this.hasNothingToRender()){var Q=this.gl;Q.useProgram(this.program),Q.uniformMatrix3fv(this.matrixLocation,!1,_e.matrix),Q.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(_e.ratio)),Q.uniform1f(this.correctionRatioLocation,_e.correctionRatio),Q.drawArrays(Q.TRIANGLES,0,this.array.length/9)}},xe}(ae(6160).AbstractEdgeProgram);it.default=Te},2542:function(yt,it,ae){"use strict";var De,ye=this&&this.__extends||(De=function(xe,_e){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,Re){Q.__proto__=Re}||function(Q,Re){for(var Le in Re)Object.prototype.hasOwnProperty.call(Re,Le)&&(Q[Le]=Re[Le])})(xe,_e)},function(xe,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Class extends value "+String(_e)+" is not a constructor or null");function Q(){this.constructor=xe}De(xe,_e),xe.prototype=null===_e?Object.create(_e):(Q.prototype=_e.prototype,new Q)}),j=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(it,"__esModule",{value:!0});var oe=ae(6160),re=ae(1699),ie=j(ae(2529)),V=j(ae(427)),Te=function(De){function xe(_e){var Q=De.call(this,_e,ie.default,V.default,4,6)||this,Re=_e.createBuffer();if(null===Re)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");Q.indicesBuffer=Re,Q.positionLocation=_e.getAttribLocation(Q.program,"a_position"),Q.colorLocation=_e.getAttribLocation(Q.program,"a_color"),Q.normalLocation=_e.getAttribLocation(Q.program,"a_normal"),Q.radiusLocation=_e.getAttribLocation(Q.program,"a_radius");var Le=_e.getUniformLocation(Q.program,"u_matrix");if(null===Le)throw new Error("EdgeClampedProgram: error while getting matrixLocation");Q.matrixLocation=Le;var Ve=_e.getUniformLocation(Q.program,"u_sqrtZoomRatio");if(null===Ve)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");Q.sqrtZoomRatioLocation=Ve;var Ae=_e.getUniformLocation(Q.program,"u_correctionRatio");if(null===Ae)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");return Q.correctionRatioLocation=Ae,Q.canUse32BitsIndices=(0,re.canUse32BitsIndices)(_e),Q.IndicesArray=Q.canUse32BitsIndices?Uint32Array:Uint16Array,Q.indicesArray=new Q.IndicesArray,Q.indicesType=Q.canUse32BitsIndices?_e.UNSIGNED_INT:_e.UNSIGNED_SHORT,Q.bind(),Q}return ye(xe,De),xe.prototype.bind=function(){var _e=this.gl;_e.bindBuffer(_e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),_e.enableVertexAttribArray(this.positionLocation),_e.enableVertexAttribArray(this.normalLocation),_e.enableVertexAttribArray(this.colorLocation),_e.enableVertexAttribArray(this.radiusLocation),_e.vertexAttribPointer(this.positionLocation,2,_e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),_e.vertexAttribPointer(this.normalLocation,2,_e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),_e.vertexAttribPointer(this.colorLocation,4,_e.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,16),_e.vertexAttribPointer(this.radiusLocation,1,_e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,20)},xe.prototype.process=function(_e,Q,Re,Le,Ve){if(Le)for(var Ae=24*Ve,Se=Ae+24;Ae<Se;Ae++)this.array[Ae]=0;else{var L=Re.size||1,ee=_e.x,Ce=_e.y,ze=Q.x,dt=Q.y,st=Q.size||1,bt=(0,re.floatColor)(Re.color),ut=ze-ee,Vt=dt-Ce,on=ut*ut+Vt*Vt,Ct=0,rn=0;on&&(Ct=-Vt*(on=1/Math.sqrt(on))*L,rn=ut*on*L);var Qt=24*Ve,Ht=this.array;Ht[Qt++]=ee,Ht[Qt++]=Ce,Ht[Qt++]=Ct,Ht[Qt++]=rn,Ht[Qt++]=bt,Ht[Qt++]=0,Ht[Qt++]=ee,Ht[Qt++]=Ce,Ht[Qt++]=-Ct,Ht[Qt++]=-rn,Ht[Qt++]=bt,Ht[Qt++]=0,Ht[Qt++]=ze,Ht[Qt++]=dt,Ht[Qt++]=Ct,Ht[Qt++]=rn,Ht[Qt++]=bt,Ht[Qt++]=st,Ht[Qt++]=ze,Ht[Qt++]=dt,Ht[Qt++]=-Ct,Ht[Qt++]=-rn,Ht[Qt++]=bt,Ht[Qt]=-st}},xe.prototype.computeIndices=function(){for(var _e=this.array.length/6,Re=new this.IndicesArray(_e+_e/2),Le=0,Ve=0;Le<_e;Le+=4)Re[Ve++]=Le,Re[Ve++]=Le+1,Re[Ve++]=Le+2,Re[Ve++]=Le+2,Re[Ve++]=Le+1,Re[Ve++]=Le+3;this.indicesArray=Re},xe.prototype.bufferData=function(){De.prototype.bufferData.call(this);var _e=this.gl;_e.bufferData(_e.ELEMENT_ARRAY_BUFFER,this.indicesArray,_e.STATIC_DRAW)},xe.prototype.render=function(_e){if(!this.hasNothingToRender()){var Q=this.gl;Q.useProgram(this.program),Q.uniformMatrix3fv(this.matrixLocation,!1,_e.matrix),Q.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(_e.ratio)),Q.uniform1f(this.correctionRatioLocation,_e.correctionRatio),Q.drawElements(Q.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},xe}(oe.AbstractEdgeProgram);it.default=Te},8959:function(yt,it,ae){"use strict";var De,ye=this&&this.__extends||(De=function(xe,_e){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,Re){Q.__proto__=Re}||function(Q,Re){for(var Le in Re)Object.prototype.hasOwnProperty.call(Re,Le)&&(Q[Le]=Re[Le])})(xe,_e)},function(xe,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Class extends value "+String(_e)+" is not a constructor or null");function Q(){this.constructor=xe}De(xe,_e),xe.prototype=null===_e?Object.create(_e):(Q.prototype=_e.prototype,new Q)}),j=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(it,"__esModule",{value:!0});var oe=ae(1699),re=j(ae(3364)),ie=j(ae(427)),Te=function(De){function xe(_e){var Q=De.call(this,_e,re.default,ie.default,4,5)||this,Re=_e.createBuffer();if(null===Re)throw new Error("EdgeProgram: error while creating indicesBuffer");Q.indicesBuffer=Re,Q.positionLocation=_e.getAttribLocation(Q.program,"a_position"),Q.colorLocation=_e.getAttribLocation(Q.program,"a_color"),Q.normalLocation=_e.getAttribLocation(Q.program,"a_normal");var Le=_e.getUniformLocation(Q.program,"u_matrix");if(null===Le)throw new Error("EdgeProgram: error while getting matrixLocation");Q.matrixLocation=Le;var Ve=_e.getUniformLocation(Q.program,"u_correctionRatio");if(null===Ve)throw new Error("EdgeProgram: error while getting correctionRatioLocation");Q.correctionRatioLocation=Ve;var Ae=_e.getUniformLocation(Q.program,"u_sqrtZoomRatio");if(null===Ae)throw new Error("EdgeProgram: error while getting sqrtZoomRatioLocation");return Q.sqrtZoomRatioLocation=Ae,Q.canUse32BitsIndices=(0,oe.canUse32BitsIndices)(_e),Q.IndicesArray=Q.canUse32BitsIndices?Uint32Array:Uint16Array,Q.indicesArray=new Q.IndicesArray,Q.indicesType=Q.canUse32BitsIndices?_e.UNSIGNED_INT:_e.UNSIGNED_SHORT,Q.bind(),Q}return ye(xe,De),xe.prototype.bind=function(){var _e=this.gl;_e.bindBuffer(_e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),_e.enableVertexAttribArray(this.positionLocation),_e.enableVertexAttribArray(this.normalLocation),_e.enableVertexAttribArray(this.colorLocation),_e.vertexAttribPointer(this.positionLocation,2,_e.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),_e.vertexAttribPointer(this.normalLocation,2,_e.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,8),_e.vertexAttribPointer(this.colorLocation,4,_e.UNSIGNED_BYTE,!0,5*Float32Array.BYTES_PER_ELEMENT,16)},xe.prototype.computeIndices=function(){for(var _e=this.array.length/5,Re=new this.IndicesArray(_e+_e/2),Le=0,Ve=0;Le<_e;Le+=4)Re[Ve++]=Le,Re[Ve++]=Le+1,Re[Ve++]=Le+2,Re[Ve++]=Le+2,Re[Ve++]=Le+1,Re[Ve++]=Le+3;this.indicesArray=Re},xe.prototype.bufferData=function(){De.prototype.bufferData.call(this);var _e=this.gl;_e.bufferData(_e.ELEMENT_ARRAY_BUFFER,this.indicesArray,_e.STATIC_DRAW)},xe.prototype.process=function(_e,Q,Re,Le,Ve){if(Le)for(var Ae=20*Ve,Se=Ae+20;Ae<Se;Ae++)this.array[Ae]=0;else{var L=Re.size||1,ee=_e.x,Ce=_e.y,ze=Q.x,dt=Q.y,st=(0,oe.floatColor)(Re.color),bt=ze-ee,ut=dt-Ce,Vt=bt*bt+ut*ut,on=0,Ct=0;Vt&&(on=-ut*(Vt=1/Math.sqrt(Vt))*L,Ct=bt*Vt*L);var rn=20*Ve,Qt=this.array;Qt[rn++]=ee,Qt[rn++]=Ce,Qt[rn++]=on,Qt[rn++]=Ct,Qt[rn++]=st,Qt[rn++]=ee,Qt[rn++]=Ce,Qt[rn++]=-on,Qt[rn++]=-Ct,Qt[rn++]=st,Qt[rn++]=ze,Qt[rn++]=dt,Qt[rn++]=on,Qt[rn++]=Ct,Qt[rn++]=st,Qt[rn++]=ze,Qt[rn++]=dt,Qt[rn++]=-on,Qt[rn++]=-Ct,Qt[rn]=st}},xe.prototype.render=function(_e){if(!this.hasNothingToRender()){var Q=this.gl;Q.useProgram(this.program),Q.uniformMatrix3fv(this.matrixLocation,!1,_e.matrix),Q.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(_e.ratio)),Q.uniform1f(this.correctionRatioLocation,_e.correctionRatio),Q.drawElements(Q.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},xe}(ae(6160).AbstractEdgeProgram);it.default=Te},105:function(yt,it,ae){"use strict";var Te,ye=this&&this.__extends||(Te=function(De,xe){return(Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,Q){_e.__proto__=Q}||function(_e,Q){for(var Re in Q)Object.prototype.hasOwnProperty.call(Q,Re)&&(_e[Re]=Q[Re])})(De,xe)},function(De,xe){if("function"!=typeof xe&&null!==xe)throw new TypeError("Class extends value "+String(xe)+" is not a constructor or null");function _e(){this.constructor=De}Te(De,xe),De.prototype=null===xe?Object.create(xe):(_e.prototype=xe.prototype,new _e)}),j=this&&this.__importDefault||function(Te){return Te&&Te.__esModule?Te:{default:Te}};Object.defineProperty(it,"__esModule",{value:!0});var oe=ae(1699),re=j(ae(7768)),ie=j(ae(2181)),le=function(Te){function De(xe){var _e=Te.call(this,xe,re.default,ie.default,1,4)||this;return _e.bind(),_e}return ye(De,Te),De.prototype.process=function(xe,_e,Q){var Re=this.array,Le=1*Q*4;if(_e)return Re[Le++]=0,Re[Le++]=0,Re[Le++]=0,void(Re[Le++]=0);var Ve=(0,oe.floatColor)(xe.color);Re[Le++]=xe.x,Re[Le++]=xe.y,Re[Le++]=xe.size,Re[Le]=Ve},De.prototype.render=function(xe){if(!this.hasNothingToRender()){var _e=this.gl;_e.useProgram(this.program),_e.uniform1f(this.ratioLocation,1/Math.sqrt(xe.ratio)),_e.uniform1f(this.scaleLocation,xe.scalingRatio),_e.uniformMatrix3fv(this.matrixLocation,!1,xe.matrix),_e.drawArrays(_e.POINTS,0,this.array.length/4)}},De}(ae(4588).AbstractNodeProgram);it.default=le},2018:yt=>{(()=>{"use strict";var it={d:(j,oe)=>{for(var re in oe)it.o(oe,re)&&!it.o(j,re)&&Object.defineProperty(j,re,{enumerable:!0,get:oe[re]})},o:(j,oe)=>Object.prototype.hasOwnProperty.call(j,oe),r:j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},ae={};it.r(ae),it.d(ae,{default:()=>ye});const ye="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";yt.exports=ae})()},4647:yt=>{(()=>{"use strict";var it={d:(j,oe)=>{for(var re in oe)it.o(oe,re)&&!it.o(j,re)&&Object.defineProperty(j,re,{enumerable:!0,get:oe[re]})},o:(j,oe)=>Object.prototype.hasOwnProperty.call(j,oe),r:j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},ae={};it.r(ae),it.d(ae,{default:()=>ye});const ye="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";yt.exports=ae})()},2529:yt=>{(()=>{"use strict";var it={d:(j,oe)=>{for(var re in oe)it.o(oe,re)&&!it.o(j,re)&&Object.defineProperty(j,re,{enumerable:!0,get:oe[re]})},o:(j,oe)=>Object.prototype.hasOwnProperty.call(j,oe),r:j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},ae={};it.r(ae),it.d(ae,{default:()=>ye});const ye="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";yt.exports=ae})()},427:yt=>{(()=>{"use strict";var it={d:(j,oe)=>{for(var re in oe)it.o(oe,re)&&!it.o(j,re)&&Object.defineProperty(j,re,{enumerable:!0,get:oe[re]})},o:(j,oe)=>Object.prototype.hasOwnProperty.call(j,oe),r:j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},ae={};it.r(ae),it.d(ae,{default:()=>ye});const ye="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}\n";yt.exports=ae})()},3364:yt=>{(()=>{"use strict";var it={d:(j,oe)=>{for(var re in oe)it.o(oe,re)&&!it.o(j,re)&&Object.defineProperty(j,re,{enumerable:!0,get:oe[re]})},o:(j,oe)=>Object.prototype.hasOwnProperty.call(j,oe),r:j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},ae={};it.r(ae),it.d(ae,{default:()=>ye});const ye='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the SQRT zoom ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n\n  // Finally, we adapt the edge thickness to the "SQRT rule" in sigma (so that\n  // items are not too big when zoomed in, and not too small when zoomed out).\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\n  // it\'s simpler like this:\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasint effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n';yt.exports=ae})()},2181:yt=>{(()=>{"use strict";var it={d:(j,oe)=>{for(var re in oe)it.o(oe,re)&&!it.o(j,re)&&Object.defineProperty(j,re,{enumerable:!0,get:oe[re]})},o:(j,oe)=>Object.prototype.hasOwnProperty.call(j,oe),r:j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},ae={};it.r(ae),it.d(ae,{default:()=>ye});const ye="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(transparent, v_color, t);\n}\n";yt.exports=ae})()},7768:yt=>{(()=>{"use strict";var it={d:(j,oe)=>{for(var re in oe)it.o(oe,re)&&!it.o(j,re)&&Object.defineProperty(j,re,{enumerable:!0,get:oe[re]})},o:(j,oe)=>Object.prototype.hasOwnProperty.call(j,oe),r:j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},ae={};it.r(ae),it.d(ae,{default:()=>ye});const ye="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";yt.exports=ae})()},5166:(yt,it)=>{"use strict";function ae(re,ie,V){var q=ie.createShader("VERTEX"===re?ie.VERTEX_SHADER:ie.FRAGMENT_SHADER);if(null===q)throw new Error("loadShader: error while creating the shader");if(ie.shaderSource(q,V),ie.compileShader(q),!ie.getShaderParameter(q,ie.COMPILE_STATUS)){var Te=ie.getShaderInfoLog(q);throw ie.deleteShader(q),new Error("loadShader: error while compiling the shader:\n".concat(Te,"\n").concat(V))}return q}Object.defineProperty(it,"__esModule",{value:!0}),it.loadProgram=it.loadFragmentShader=it.loadVertexShader=void 0,it.loadVertexShader=function ye(re,ie){return ae("VERTEX",re,ie)},it.loadFragmentShader=function j(re,ie){return ae("FRAGMENT",re,ie)},it.loadProgram=function oe(re,ie){var K,q,V=re.createProgram();if(null===V)throw new Error("loadProgram: error while creating the program.");for(K=0,q=ie.length;K<q;K++)re.attachShader(V,ie[K]);if(re.linkProgram(V),!re.getProgramParameter(V,re.LINK_STATUS))throw re.deleteProgram(V),new Error("loadProgram: error while linking the program.");return V}},2621:function(yt,it,ae){"use strict";var ye=this&&this.__importDefault||function(le){return le&&le.__esModule?le:{default:le}};Object.defineProperty(it,"__esModule",{value:!0}),it.DEFAULT_SETTINGS=it.validateSettings=void 0;var j=ye(ae(9597)),oe=ye(ae(4997)),re=ye(ae(1285)),ie=ye(ae(105)),V=ye(ae(8959)),K=ye(ae(1391));it.validateSettings=function q(le){if("number"!=typeof le.labelDensity||le.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var Te=le.minCameraRatio,De=le.maxCameraRatio;if("number"==typeof Te&&"number"==typeof De&&De<Te)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},it.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:j.default,hoverRenderer:oe.default,edgeLabelRenderer:re.default,allowInvalidContainer:!1,nodeProgramClasses:{circle:ie.default},edgeProgramClasses:{arrow:K.default,line:V.default}}},4870:function(yt,it,ae){"use strict";var Ae,ye=this&&this.__extends||(Ae=function(Se,L){return(Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,Ce){ee.__proto__=Ce}||function(ee,Ce){for(var ze in Ce)Object.prototype.hasOwnProperty.call(Ce,ze)&&(ee[ze]=Ce[ze])})(Se,L)},function(Se,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function ee(){this.constructor=Se}Ae(Se,L),Se.prototype=null===L?Object.create(L):(ee.prototype=L.prototype,new ee)}),j=this&&this.__assign||function(){return j=Object.assign||function(Ae){for(var Se,L=1,ee=arguments.length;L<ee;L++)for(var Ce in Se=arguments[L])Object.prototype.hasOwnProperty.call(Se,Ce)&&(Ae[Ce]=Se[Ce]);return Ae},j.apply(this,arguments)},oe=this&&this.__values||function(Ae){var Se="function"==typeof Symbol&&Symbol.iterator,L=Se&&Ae[Se],ee=0;if(L)return L.call(Ae);if(Ae&&"number"==typeof Ae.length)return{next:function(){return Ae&&ee>=Ae.length&&(Ae=void 0),{value:Ae&&Ae[ee++],done:!Ae}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")},re=this&&this.__importDefault||function(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}};Object.defineProperty(it,"__esModule",{value:!0});var ie=re(ae(2002)),V=re(ae(2465)),K=re(ae(3650)),q=ae(57),le=ae(1699),Te=ae(4942),De=ae(2621),xe=re(ae(1565)),_e=ae(7611),Q=ae(3180);function Re(Ae,Se,L){if(!L.hasOwnProperty("x")||!L.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(Se,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return L.color||(L.color=Ae.defaultNodeColor),!L.label&&""!==L.label&&(L.label=null),L.label=null!=L.label?""+L.label:null,L.size||(L.size=2),L.hasOwnProperty("hidden")||(L.hidden=!1),L.hasOwnProperty("highlighted")||(L.highlighted=!1),L.hasOwnProperty("forceLabel")||(L.forceLabel=!1),(!L.type||""===L.type)&&(L.type=Ae.defaultNodeType),L.zIndex||(L.zIndex=0),L}function Le(Ae,Se,L){return L.color||(L.color=Ae.defaultEdgeColor),L.label||(L.label=""),L.size||(L.size=.5),L.hasOwnProperty("hidden")||(L.hidden=!1),L.hasOwnProperty("forceLabel")||(L.forceLabel=!1),(!L.type||""===L.type)&&(L.type=Ae.defaultEdgeType),L.zIndex||(L.zIndex=0),L}var Ve=function(Ae){function Se(L,ee,Ce){void 0===Ce&&(Ce={});var ze=Ae.call(this)||this;if(ze.elements={},ze.canvasContexts={},ze.webGLContexts={},ze.activeListeners={},ze.quadtree=new K.default,ze.labelGrid=new Te.LabelGrid,ze.nodeDataCache={},ze.edgeDataCache={},ze.nodesWithForcedLabels=[],ze.edgesWithForcedLabels=[],ze.nodeExtent={x:[0,1],y:[0,1]},ze.matrix=(0,_e.identity)(),ze.invMatrix=(0,_e.identity)(),ze.correctionRatio=1,ze.customBBox=null,ze.normalizationFunction=(0,le.createNormalizationFunction)({x:[0,1],y:[0,1]}),ze.cameraSizeRatio=1,ze.width=0,ze.height=0,ze.pixelRatio=(0,le.getPixelRatio)(),ze.displayedLabels=new Set,ze.highlightedNodes=new Set,ze.hoveredNode=null,ze.hoveredEdge=null,ze.renderFrame=null,ze.renderHighlightedNodesFrame=null,ze.needToProcess=!1,ze.needToSoftProcess=!1,ze.checkEdgesEventsFrame=null,ze.nodePrograms={},ze.hoverNodePrograms={},ze.edgePrograms={},ze.settings=(0,le.assign)({},De.DEFAULT_SETTINGS,Ce),(0,De.validateSettings)(ze.settings),(0,le.validateGraph)(L),!(ee instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var dt in ze.graph=L,ze.container=ee,ze.createWebGLContext("edges",{preserveDrawingBuffer:!0}),ze.createCanvasContext("edgeLabels"),ze.createWebGLContext("nodes"),ze.createCanvasContext("labels"),ze.createCanvasContext("hovers"),ze.createWebGLContext("hoverNodes"),ze.createCanvasContext("mouse"),ze.webGLContexts){var st=ze.webGLContexts[dt];st.blendFunc(st.ONE,st.ONE_MINUS_SRC_ALPHA),st.enable(st.BLEND)}for(var bt in ze.settings.nodeProgramClasses){var ut=ze.settings.nodeProgramClasses[bt];ze.nodePrograms[bt]=new ut(ze.webGLContexts.nodes,ze),ze.hoverNodePrograms[bt]=new ut(ze.webGLContexts.hoverNodes,ze)}for(var bt in ze.settings.edgeProgramClasses)ze.edgePrograms[bt]=new(0,ze.settings.edgeProgramClasses[bt])(ze.webGLContexts.edges,ze);return ze.resize(),ze.camera=new ie.default,ze.bindCameraHandlers(),ze.mouseCaptor=new V.default(ze.elements.mouse,ze),ze.touchCaptor=new xe.default(ze.elements.mouse,ze),ze.bindEventHandlers(),ze.bindGraphHandlers(),ze.handleSettingsUpdate(),ze.process(),ze.render(),ze}return ye(Se,Ae),Se.prototype.createCanvas=function(L){var ee=(0,le.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(L)});return this.elements[L]=ee,this.container.appendChild(ee),ee},Se.prototype.createCanvasContext=function(L){var ee=this.createCanvas(L);return this.canvasContexts[L]=ee.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},Se.prototype.createWebGLContext=function(L,ee){var dt,Ce=this.createCanvas(L),ze=j({preserveDrawingBuffer:!1,antialias:!1},ee||{});return(dt=Ce.getContext("webgl2",ze))||(dt=Ce.getContext("webgl",ze)),dt||(dt=Ce.getContext("experimental-webgl",ze)),this.webGLContexts[L]=dt,this},Se.prototype.bindCameraHandlers=function(){var L=this;return this.activeListeners.camera=function(){L._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},Se.prototype.mouseIsOnNode=function(L,ee,Ce){var ze=L.x,dt=L.y,st=ee.x,bt=ee.y;return ze>st-Ce&&ze<st+Ce&&dt>bt-Ce&&dt<bt+Ce&&Math.sqrt(Math.pow(ze-st,2)+Math.pow(dt-bt,2))<Ce},Se.prototype.getQuadNodes=function(L){var ee=this.viewportToFramedGraph(L);return this.quadtree.point(ee.x,1-ee.y)},Se.prototype.getNodeAtPosition=function(L){for(var ee=L.x,Ce=L.y,ze=this.getQuadNodes(L),dt=1/0,st=null,bt=0,ut=ze.length;bt<ut;bt++){var Vt=ze[bt],on=this.nodeDataCache[Vt],Ct=this.framedGraphToViewport(on),rn=this.scaleSize(on.size);if(!on.hidden&&this.mouseIsOnNode(L,Ct,rn)){var Qt=Math.sqrt(Math.pow(ee-Ct.x,2)+Math.pow(Ce-Ct.y,2));Qt<dt&&(dt=Qt,st=Vt)}}return st},Se.prototype.bindEventHandlers=function(){var L=this;this.activeListeners.handleResize=function(){L.needToSoftProcess=!0,L._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(Ce){var ze={event:Ce,preventSigmaDefault:function(){Ce.preventSigmaDefault()}},dt=L.getNodeAtPosition(Ce);if(dt&&L.hoveredNode!==dt&&!L.nodeDataCache[dt].hidden)return L.hoveredNode&&L.emit("leaveNode",j(j({},ze),{node:L.hoveredNode})),L.hoveredNode=dt,L.emit("enterNode",j(j({},ze),{node:dt})),void L.scheduleHighlightedNodesRender();if(L.hoveredNode){var st=L.nodeDataCache[L.hoveredNode],bt=L.framedGraphToViewport(st),ut=L.scaleSize(st.size);if(!L.mouseIsOnNode(Ce,bt,ut)){var Vt=L.hoveredNode;return L.hoveredNode=null,L.emit("leaveNode",j(j({},ze),{node:Vt})),void L.scheduleHighlightedNodesRender()}}!0===L.settings.enableEdgeHoverEvents?L.checkEdgeHoverEvents(ze):"debounce"===L.settings.enableEdgeHoverEvents&&(L.checkEdgesEventsFrame||(L.checkEdgesEventsFrame=(0,le.requestFrame)(function(){L.checkEdgeHoverEvents(ze),L.checkEdgesEventsFrame=null})))};var ee=function(Ce){return function(ze){var dt={event:ze,preventSigmaDefault:function(){ze.preventSigmaDefault()}},bt=ze.original.isFakeSigmaMouseEvent?L.getNodeAtPosition(ze):L.hoveredNode;if(bt)return L.emit("".concat(Ce,"Node"),j(j({},dt),{node:bt}));if("wheel"===Ce?L.settings.enableEdgeWheelEvents:L.settings.enableEdgeClickEvents){var ut=L.getEdgeAtPoint(ze.x,ze.y);if(ut)return L.emit("".concat(Ce,"Edge"),j(j({},dt),{edge:ut}))}return L.emit("".concat(Ce,"Stage"),dt)}};return this.activeListeners.handleClick=ee("click"),this.activeListeners.handleRightClick=ee("rightClick"),this.activeListeners.handleDoubleClick=ee("doubleClick"),this.activeListeners.handleWheel=ee("wheel"),this.activeListeners.handleDown=ee("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},Se.prototype.bindGraphHandlers=function(){var L=this,ee=this.graph;return this.activeListeners.graphUpdate=function(){L.needToProcess=!0,L._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){L.needToSoftProcess=!0,L._scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(Ce){delete L.nodeDataCache[Ce.key],L.hoveredNode===Ce.key&&(L.hoveredNode=null),L.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(Ce){delete L.edgeDataCache[Ce.key],L.hoveredEdge===Ce.key&&(L.hoveredEdge=null),L.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){L.edgeDataCache={},L.hoveredEdge=null,L.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){L.nodeDataCache={},L.hoveredNode=null,L.activeListeners.clearEdgesGraphUpdate()},ee.on("nodeAdded",this.activeListeners.graphUpdate),ee.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),ee.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),ee.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),ee.on("edgeAdded",this.activeListeners.graphUpdate),ee.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),ee.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),ee.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),ee.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),ee.on("cleared",this.activeListeners.clearGraphUpdate),this},Se.prototype.checkEdgeHoverEvents=function(L){var ee=this.hoveredNode?null:this.getEdgeAtPoint(L.event.x,L.event.y);return ee!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",j(j({},L),{edge:this.hoveredEdge})),ee&&this.emit("enterEdge",j(j({},L),{edge:ee})),this.hoveredEdge=ee),this},Se.prototype.getEdgeAtPoint=function(L,ee){var Ce,ze,dt=this,bt=this.edgeDataCache,ut=this.nodeDataCache;if(!(0,Q.isPixelColored)(this.webGLContexts.edges,L*this.pixelRatio,ee*this.pixelRatio))return null;var Vt=this.viewportToGraph({x:L,y:ee}),on=Vt.x,Ct=Vt.y,rn=0;if(this.graph.someEdge(function(Jt,Gn,ri,ni,St,Oe){var Ft=St.x,Ot=St.y,li=Oe.x,di=Oe.y;if(bt[Jt].hidden||ut[ri].hidden||ut[ni].hidden)return!1;if(Ft!==li||Ot!==di){var Gt=Math.sqrt(Math.pow(li-Ft,2)+Math.pow(di-Ot,2)),Rt=dt.graphToViewport({x:Ft,y:Ot}),_n=Rt.x,It=Rt.y,rt=dt.graphToViewport({x:li,y:di}),dn=rt.y,Yn=Math.sqrt(Math.pow(rt.x-_n,2)+Math.pow(dn-It,2));return rn=Gt/Yn,!0}}),!rn)return null;var Qt=this.graph.filterEdges(function(Jt,Gn,ri,ni,St,Oe){return!(bt[Jt].hidden||ut[ri].hidden||ut[ni].hidden)&&(!!(0,Q.doEdgeCollideWithPoint)(on,Ct,St.x,St.y,Oe.x,Oe.y,bt[Jt].size*rn/dt.cameraSizeRatio)||void 0)});if(0===Qt.length)return null;var Ht=Qt[Qt.length-1],Qn=-1/0;try{for(var en=oe(Qt),Sn=en.next();!Sn.done;Sn=en.next()){var Pn=Sn.value,xt=this.graph.getEdgeAttribute(Pn,"zIndex");xt>=Qn&&(Ht=Pn,Qn=xt)}}catch(Jt){Ce={error:Jt}}finally{try{Sn&&!Sn.done&&(ze=en.return)&&ze.call(en)}finally{if(Ce)throw Ce.error}}return Ht},Se.prototype.process=function(L){var ee=this;void 0===L&&(L=!1);var Ce=this.graph,ze=this.settings,dt=this.getDimensions(),st=[1/0,-1/0],bt=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(dt,ze.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,le.graphExtent)(Ce),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var ut=new ie.default,Vt=(0,le.matrixFromCamera)(ut.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,le.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var on={},Ct=Ce.nodes(),rn=0,Qt=Ct.length;rn<Qt;rn++){var Ht=Ct[rn],Qn=Object.assign({},Ce.getNodeAttributes(Ht));ze.nodeReducer&&(Qn=ze.nodeReducer(Ht,Qn)),on[(en=Re(this.settings,Ht,Qn)).type]=(on[en.type]||0)+1,this.nodeDataCache[Ht]=en,this.normalizationFunction.applyTo(en),en.forceLabel&&this.nodesWithForcedLabels.push(Ht),this.settings.zIndex&&(en.zIndex<st[0]&&(st[0]=en.zIndex),en.zIndex>st[1]&&(st[1]=en.zIndex))}for(var Sn in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(Sn))throw new Error('Sigma: could not find a suitable program for node type "'.concat(Sn,'"!'));L||this.nodePrograms[Sn].allocate(on[Sn]||0),on[Sn]=0}for(this.settings.zIndex&&st[0]!==st[1]&&(Ct=(0,le.zIndexOrdering)(st,function(Ft){return ee.nodeDataCache[Ft].zIndex},Ct)),rn=0,Qt=Ct.length;rn<Qt;rn++)this.quadtree.add(Ht=Ct[rn],(en=this.nodeDataCache[Ht]).x,1-en.y,en.size/this.width),"string"==typeof en.label&&!en.hidden&&this.labelGrid.add(Ht,en.size,this.framedGraphToViewport(en,{matrix:Vt})),this.nodePrograms[en.type].process(en,en.hidden,on[en.type]++),en.highlighted&&!en.hidden&&this.highlightedNodes.add(Ht);this.labelGrid.organize();var Pn={},xt=Ce.edges();for(rn=0,Qt=xt.length;rn<Qt;rn++){var Jt=xt[rn];Qn=Object.assign({},Ce.getEdgeAttributes(Jt)),ze.edgeReducer&&(Qn=ze.edgeReducer(Jt,Qn)),Pn[(en=Le(this.settings,0,Qn)).type]=(Pn[en.type]||0)+1,this.edgeDataCache[Jt]=en,en.forceLabel&&!en.hidden&&this.edgesWithForcedLabels.push(Jt),this.settings.zIndex&&(en.zIndex<bt[0]&&(bt[0]=en.zIndex),en.zIndex>bt[1]&&(bt[1]=en.zIndex))}for(var Sn in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(Sn))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(Sn,'"!'));L||this.edgePrograms[Sn].allocate(Pn[Sn]||0),Pn[Sn]=0}for(this.settings.zIndex&&bt[0]!==bt[1]&&(xt=(0,le.zIndexOrdering)(bt,function(Ft){return ee.edgeDataCache[Ft].zIndex},xt)),rn=0,Qt=xt.length;rn<Qt;rn++){var en=this.edgeDataCache[Jt=xt[rn]],Gn=Ce.extremities(Jt),ri=this.nodeDataCache[Gn[0]],ni=this.nodeDataCache[Gn[1]];this.edgePrograms[en.type].process(ri,ni,en,en.hidden||ri.hidden||ni.hidden,Pn[en.type]++)}for(var Sn in this.edgePrograms){var Oe=this.edgePrograms[Sn];!L&&"function"==typeof Oe.computeIndices&&Oe.computeIndices()}return this},Se.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},Se.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},Se.prototype._scheduleRefresh=function(){var L=this;return this.renderFrame||(this.renderFrame=(0,le.requestFrame)(function(){L._refresh(),L.renderFrame=null})),this},Se.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var ee,L=this.camera.getState();if(L.ratio>=1)ee=new Set(this.graph.nodes());else{var Ce=this.viewRectangle();ee=new Set(this.quadtree.rectangle(Ce.x1,1-Ce.y1,Ce.x2,1-Ce.y2,Ce.height))}var ze=this.labelGrid.getLabelsToDisplay(L.ratio,this.settings.labelDensity).concat(this.nodesWithForcedLabels);this.displayedLabels=new Set;for(var dt=this.canvasContexts.labels,st=0,bt=ze.length;st<bt;st++){var ut=ze[st],Vt=this.nodeDataCache[ut];if(!this.displayedLabels.has(ut)&&!Vt.hidden){var on=this.framedGraphToViewport(Vt),Ct=on.x,rn=on.y,Qt=this.scaleSize(Vt.size);!Vt.forceLabel&&Qt<this.settings.labelRenderedSizeThreshold||!ee.has(ut)||(this.displayedLabels.add(ut),this.settings.labelRenderer(dt,j(j({key:ut},Vt),{size:Qt,x:Ct,y:rn}),this.settings))}}return this},Se.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var L=this.canvasContexts.edgeLabels;L.clearRect(0,0,this.width,this.height);for(var ee=(0,Te.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),Ce=new Set,ze=0,dt=ee.length;ze<dt;ze++){var st=ee[ze],bt=this.graph.extremities(st),ut=this.nodeDataCache[bt[0]],Vt=this.nodeDataCache[bt[1]],on=this.edgeDataCache[st];Ce.has(st)||on.hidden||ut.hidden||Vt.hidden||(this.settings.edgeLabelRenderer(L,j(j({key:st},on),{size:this.scaleSize(on.size)}),j(j(j({key:bt[0]},ut),this.framedGraphToViewport(ut)),{size:this.scaleSize(ut.size)}),j(j(j({key:bt[1]},Vt),this.framedGraphToViewport(Vt)),{size:this.scaleSize(Vt.size)}),this.settings),Ce.add(st))}return this},Se.prototype.renderHighlightedNodes=function(){var L=this,ee=this.canvasContexts.hovers;ee.clearRect(0,0,this.width,this.height);var ze=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&ze.push(this.hoveredNode),this.highlightedNodes.forEach(function(ut){ut!==L.hoveredNode&&ze.push(ut)}),ze.forEach(function(ut){return function(ut){var Vt=L.nodeDataCache[ut],on=L.framedGraphToViewport(Vt),Ct=on.x,rn=on.y,Qt=L.scaleSize(Vt.size);L.settings.hoverRenderer(ee,j(j({key:ut},Vt),{size:Qt,x:Ct,y:rn}),L.settings)}(ut)});var dt={};for(var st in ze.forEach(function(ut){var Vt=L.nodeDataCache[ut].type;dt[Vt]=(dt[Vt]||0)+1}),this.hoverNodePrograms)this.hoverNodePrograms[st].allocate(dt[st]||0),dt[st]=0;for(var st in ze.forEach(function(ut){var Vt=L.nodeDataCache[ut];L.hoverNodePrograms[Vt.type].process(Vt,Vt.hidden,dt[Vt.type]++)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.hoverNodePrograms){var bt=this.hoverNodePrograms[st];bt.bind(),bt.bufferData(),bt.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:this.pixelRatio})}},Se.prototype.scheduleHighlightedNodesRender=function(){var L=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,le.requestFrame)(function(){L.renderHighlightedNodesFrame=null,L.renderHighlightedNodes(),L.renderEdgeLabels()}))},Se.prototype.render=function(){var L=this;this.emit("beforeRender");var ee=function(){return L.emit("afterRender"),L};if(this.renderFrame&&((0,le.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return ee();var Ce=this.mouseCaptor,ze=this.camera.isAnimated()||Ce.isMoving||Ce.draggedEvents||Ce.currentWheelDirection,dt=this.camera.getState(),st=this.getDimensions(),bt=this.getGraphDimensions(),ut=this.getSetting("stagePadding")||0;for(var Vt in this.matrix=(0,le.matrixFromCamera)(dt,st,bt,ut),this.invMatrix=(0,le.matrixFromCamera)(dt,st,bt,ut,!0),this.correctionRatio=(0,le.getMatrixImpact)(this.matrix,dt,st),this.nodePrograms)(on=this.nodePrograms[Vt]).bind(),on.bufferData(),on.render({matrix:this.matrix,width:this.width,height:this.height,ratio:dt.ratio,correctionRatio:this.correctionRatio/dt.ratio,scalingRatio:this.pixelRatio});if(!this.settings.hideEdgesOnMove||!ze)for(var Vt in this.edgePrograms){var on;(on=this.edgePrograms[Vt]).bind(),on.bufferData(),on.render({matrix:this.matrix,width:this.width,height:this.height,ratio:dt.ratio,correctionRatio:this.correctionRatio/dt.ratio,scalingRatio:this.pixelRatio})}return this.settings.hideLabelsOnMove&&ze||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),ee()},Se.prototype.updateCachedValues=function(){var L=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(L)},Se.prototype.getCamera=function(){return this.camera},Se.prototype.getContainer=function(){return this.container},Se.prototype.getGraph=function(){return this.graph},Se.prototype.getMouseCaptor=function(){return this.mouseCaptor},Se.prototype.getTouchCaptor=function(){return this.touchCaptor},Se.prototype.getDimensions=function(){return{width:this.width,height:this.height}},Se.prototype.getGraphDimensions=function(){var L=this.customBBox||this.nodeExtent;return{width:L.x[1]-L.x[0]||1,height:L.y[1]-L.y[0]||1}},Se.prototype.getNodeDisplayData=function(L){var ee=this.nodeDataCache[L];return ee?Object.assign({},ee):void 0},Se.prototype.getEdgeDisplayData=function(L){var ee=this.edgeDataCache[L];return ee?Object.assign({},ee):void 0},Se.prototype.getSettings=function(){return j({},this.settings)},Se.prototype.getSetting=function(L){return this.settings[L]},Se.prototype.setSetting=function(L,ee){return this.settings[L]=ee,(0,De.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},Se.prototype.updateSetting=function(L,ee){return this.settings[L]=ee(this.settings[L]),(0,De.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},Se.prototype.resize=function(){var L=this.width,ee=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,le.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.");this.height=1}if(L===this.width&&ee===this.height)return this;for(var Ce in this.emit("resize"),this.elements){var ze=this.elements[Ce];ze.style.width=this.width+"px",ze.style.height=this.height+"px"}for(var Ce in this.canvasContexts)this.elements[Ce].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[Ce].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[Ce].scale(this.pixelRatio,this.pixelRatio);for(var Ce in this.webGLContexts)this.elements[Ce].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[Ce].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[Ce].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},Se.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},Se.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},Se.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},Se.prototype.getViewportZoomedState=function(L,ee){var Ce=this.camera.getState(),dt=Ce.angle,st=Ce.x,bt=Ce.y,ut=ee/Ce.ratio,Vt={x:this.width/2,y:this.height/2},on=this.viewportToFramedGraph(L),Ct=this.viewportToFramedGraph(Vt);return{angle:dt,x:(on.x-Ct.x)*(1-ut)+st,y:(on.y-Ct.y)*(1-ut)+bt,ratio:ee}},Se.prototype.viewRectangle=function(){var L=0*this.width/8,ee=0*this.height/8,Ce=this.viewportToFramedGraph({x:0-L,y:0-ee}),ze=this.viewportToFramedGraph({x:this.width+L,y:0-ee}),dt=this.viewportToFramedGraph({x:0,y:this.height+ee});return{x1:Ce.x,y1:Ce.y,x2:ze.x,y2:ze.y,height:ze.y-dt.y}},Se.prototype.framedGraphToViewport=function(L,ee){void 0===ee&&(ee={});var ze=ee.matrix?ee.matrix:ee.cameraState||ee.viewportDimensions||ee.graphDimensions?(0,le.matrixFromCamera)(ee.cameraState||this.camera.getState(),ee.viewportDimensions||this.getDimensions(),ee.graphDimensions||this.getGraphDimensions(),ee.padding||this.getSetting("stagePadding")||0):this.matrix,dt=(0,_e.multiplyVec2)(ze,L);return{x:(1+dt.x)*this.width/2,y:(1-dt.y)*this.height/2}},Se.prototype.viewportToFramedGraph=function(L,ee){void 0===ee&&(ee={});var ze=ee.matrix?ee.matrix:ee.cameraState||ee.viewportDimensions||!ee.graphDimensions?(0,le.matrixFromCamera)(ee.cameraState||this.camera.getState(),ee.viewportDimensions||this.getDimensions(),ee.graphDimensions||this.getGraphDimensions(),ee.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,dt=(0,_e.multiplyVec2)(ze,{x:L.x/this.width*2-1,y:1-L.y/this.height*2});return isNaN(dt.x)&&(dt.x=0),isNaN(dt.y)&&(dt.y=0),dt},Se.prototype.viewportToGraph=function(L,ee){return void 0===ee&&(ee={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(L,ee))},Se.prototype.graphToViewport=function(L,ee){return void 0===ee&&(ee={}),this.framedGraphToViewport(this.normalizationFunction(L),ee)},Se.prototype.getBBox=function(){return(0,le.graphExtent)(this.graph)},Se.prototype.getCustomBBox=function(){return this.customBBox},Se.prototype.setCustomBBox=function(L){return this.customBBox=L,this._scheduleRefresh(),this},Se.prototype.kill=function(){var L=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),L.removeListener("nodeAdded",this.activeListeners.dropNodeGraphUpdate),L.removeListener("nodeDropped",this.activeListeners.graphUpdate),L.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),L.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),L.removeListener("edgeAdded",this.activeListeners.graphUpdate),L.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),L.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),L.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),L.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),L.removeListener("cleared",this.activeListeners.clearGraphUpdate),this.quadtree=new K.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,le.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,le.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var ee=this.container;ee.firstChild;)ee.removeChild(ee.firstChild)},Se.prototype.scaleSize=function(L){return L/this.cameraSizeRatio},Se.prototype.getCanvases=function(){return j({},this.elements)},Se}(q.TypedEventEmitter);it.default=Ve},57:function(yt,it,ae){"use strict";var re,ye=this&&this.__extends||(re=function(ie,V){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,q){K.__proto__=q}||function(K,q){for(var le in q)Object.prototype.hasOwnProperty.call(q,le)&&(K[le]=q[le])})(ie,V)},function(ie,V){if("function"!=typeof V&&null!==V)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");function K(){this.constructor=ie}re(ie,V),ie.prototype=null===V?Object.create(V):(K.prototype=V.prototype,new K)});Object.defineProperty(it,"__esModule",{value:!0}),it.TypedEventEmitter=void 0;var oe=function(re){function ie(){var V=re.call(this)||this;return V.rawEmitter=V,V}return ye(ie,re),ie}(ae(9069).EventEmitter);it.TypedEventEmitter=oe},2630:function(yt,it,ae){"use strict";var ye=this&&this.__importDefault||function(ie){return ie&&ie.__esModule?ie:{default:ie}};Object.defineProperty(it,"__esModule",{value:!0}),it.animateNodes=it.ANIMATE_DEFAULTS=void 0;var j=ae(1699),oe=ye(ae(4539));it.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},it.animateNodes=function re(ie,V,K,q){var le=Object.assign({},it.ANIMATE_DEFAULTS,K),Te="function"==typeof le.easing?le.easing:oe.default[le.easing],De=Date.now(),xe={};for(var _e in V){var Q=V[_e];for(var Re in xe[_e]={},Q)xe[_e][Re]=ie.getNodeAttribute(_e,Re)}var Le=null,Ve=function(){Le=null;var Ae=(Date.now()-De)/le.duration;if(Ae>=1){for(var Se in V){var L=V[Se];for(var ee in L)ie.setNodeAttribute(Se,ee,L[ee])}"function"==typeof q&&q()}else{for(var Se in Ae=Te(Ae),V){L=V[Se];var Ce=xe[Se];for(var ee in L)ie.setNodeAttribute(Se,ee,L[ee]*Ae+Ce[ee]*(1-Ae))}Le=(0,j.requestFrame)(Ve)}};return Ve(),function(){Le&&(0,j.cancelFrame)(Le)}}},5147:(yt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.HTML_COLORS=void 0,it.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"}},4539:(yt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.cubicInOut=it.cubicOut=it.cubicIn=it.quadraticInOut=it.quadraticOut=it.quadraticIn=it.linear=void 0,it.linear=function(q){return q},it.quadraticIn=function(q){return q*q},it.quadraticOut=function(q){return q*(2-q)},it.quadraticInOut=function(q){return(q*=2)<1?.5*q*q:-.5*(--q*(q-2)-1)},it.cubicIn=function(q){return q*q*q},it.cubicOut=function(q){return--q*q*q+1},it.cubicInOut=function(q){return(q*=2)<1?.5*q*q*q:.5*((q-=2)*q*q+2)},it.default={linear:it.linear,quadraticIn:it.quadraticIn,quadraticOut:it.quadraticOut,quadraticInOut:it.quadraticInOut,cubicIn:it.cubicIn,cubicOut:it.cubicOut,cubicInOut:it.cubicInOut}},3180:(yt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.doEdgeCollideWithPoint=it.isPixelColored=void 0,it.isPixelColored=function ae(j,oe,re){var ie=new Uint8Array(4);return j.readPixels(oe,j.drawingBufferHeight-re,1,1,j.RGBA,j.UNSIGNED_BYTE,ie),ie[3]>0},it.doEdgeCollideWithPoint=function ye(j,oe,re,ie,V,K,q){return!(j<re-q&&j<V-q||oe<ie-q&&oe<K-q||j>re+q&&j>V+q||oe>ie+q&&oe>K+q)&&Math.abs((V-re)*(ie-oe)-(re-j)*(K-ie))/Math.sqrt(Math.pow(V-re,2)+Math.pow(K-ie,2))<q/2}},1699:function(yt,it,ae){"use strict";var ye=this&&this.__read||function(Ct,rn){var Qt="function"==typeof Symbol&&Ct[Symbol.iterator];if(!Qt)return Ct;var Qn,Sn,Ht=Qt.call(Ct),en=[];try{for(;(void 0===rn||rn-- >0)&&!(Qn=Ht.next()).done;)en.push(Qn.value)}catch(Pn){Sn={error:Pn}}finally{try{Qn&&!Qn.done&&(Qt=Ht.return)&&Qt.call(Ht)}finally{if(Sn)throw Sn.error}}return en},j=this&&this.__importDefault||function(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}};Object.defineProperty(it,"__esModule",{value:!0}),it.validateGraph=it.canUse32BitsIndices=it.extractPixel=it.getMatrixImpact=it.matrixFromCamera=it.getCorrectionRatio=it.floatColor=it.floatArrayColor=it.parseColor=it.zIndexOrdering=it.createNormalizationFunction=it.graphExtent=it.getPixelRatio=it.createElement=it.cancelFrame=it.requestFrame=it.assignDeep=it.assign=it.isPlainObject=void 0;var oe=j(ae(6714)),re=ae(7611),ie=ae(5147);function V(Ct){return"object"==typeof Ct&&null!==Ct&&Ct.constructor===Object}it.isPlainObject=V,it.assign=function K(Ct){for(var rn=[],Qt=1;Qt<arguments.length;Qt++)rn[Qt-1]=arguments[Qt];Ct=Ct||{};for(var Ht=0,Qn=rn.length;Ht<Qn;Ht++){var en=rn[Ht];!en||Object.assign(Ct,en)}return Ct},it.assignDeep=function q(Ct){for(var rn=[],Qt=1;Qt<arguments.length;Qt++)rn[Qt-1]=arguments[Qt];Ct=Ct||{};for(var Ht=0,Qn=rn.length;Ht<Qn;Ht++){var en=rn[Ht];if(en)for(var Sn in en)Ct[Sn]=V(en[Sn])?q(Ct[Sn],en[Sn]):en[Sn]}return Ct},it.requestFrame=typeof requestAnimationFrame<"u"?function(Ct){return requestAnimationFrame(Ct)}:function(Ct){return setTimeout(Ct,0)},it.cancelFrame=typeof cancelAnimationFrame<"u"?function(Ct){return cancelAnimationFrame(Ct)}:function(Ct){return clearTimeout(Ct)},it.createElement=function le(Ct,rn,Qt){var Ht=document.createElement(Ct);if(rn)for(var Qn in rn)Ht.style[Qn]=rn[Qn];if(Qt)for(var Qn in Qt)Ht.setAttribute(Qn,Qt[Qn]);return Ht},it.getPixelRatio=function Te(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1},it.graphExtent=function De(Ct){if(!Ct.order)return{x:[0,1],y:[0,1]};var rn=1/0,Qt=-1/0,Ht=1/0,Qn=-1/0;return Ct.forEachNode(function(en,Sn){var Pn=Sn.x,xt=Sn.y;Pn<rn&&(rn=Pn),Pn>Qt&&(Qt=Pn),xt<Ht&&(Ht=xt),xt>Qn&&(Qn=xt)}),{x:[rn,Qt],y:[Ht,Qn]}},it.createNormalizationFunction=function xe(Ct){var rn=ye(Ct.x,2),Qt=rn[0],Ht=rn[1],Qn=ye(Ct.y,2),en=Qn[0],Sn=Qn[1],Pn=Math.max(Ht-Qt,Sn-en),xt=(Ht+Qt)/2,Jt=(Sn+en)/2;(0===Pn||Math.abs(Pn)===1/0||isNaN(Pn))&&(Pn=1),isNaN(xt)&&(xt=0),isNaN(Jt)&&(Jt=0);var Gn=function(ri){return{x:.5+(ri.x-xt)/Pn,y:.5+(ri.y-Jt)/Pn}};return Gn.applyTo=function(ri){ri.x=.5+(ri.x-xt)/Pn,ri.y=.5+(ri.y-Jt)/Pn},Gn.inverse=function(ri){return{x:xt+Pn*(ri.x-.5),y:Jt+Pn*(ri.y-.5)}},Gn.ratio=Pn,Gn},it.zIndexOrdering=function _e(Ct,rn,Qt){return Qt.sort(function(Ht,Qn){var en=rn(Ht)||0,Sn=rn(Qn)||0;return en<Sn?-1:en>Sn?1:0})};var Q=new Int8Array(4),Re=new Int32Array(Q.buffer,0,1),Le=new Float32Array(Q.buffer,0,1),Ve=/^\s*rgba?\s*\(/,Ae=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Se(Ct){var rn=0,Qt=0,Ht=0,Qn=1;if("#"===Ct[0])4===Ct.length?(rn=parseInt(Ct.charAt(1)+Ct.charAt(1),16),Qt=parseInt(Ct.charAt(2)+Ct.charAt(2),16),Ht=parseInt(Ct.charAt(3)+Ct.charAt(3),16)):(rn=parseInt(Ct.charAt(1)+Ct.charAt(2),16),Qt=parseInt(Ct.charAt(3)+Ct.charAt(4),16),Ht=parseInt(Ct.charAt(5)+Ct.charAt(6),16));else if(Ve.test(Ct)){var en=Ct.match(Ae);en&&(rn=+en[1],Qt=+en[2],Ht=+en[3],en[4]&&(Qn=+en[4]))}return{r:rn,g:Qt,b:Ht,a:Qn}}it.parseColor=Se;var L={};for(var ee in ie.HTML_COLORS)L[ee]=ze(ie.HTML_COLORS[ee]),L[ie.HTML_COLORS[ee]]=L[ee];function ze(Ct){if(typeof L[Ct]<"u")return L[Ct];var rn=Se(Ct),en=rn.a;Re[0]=4278190079&((en=255*en|0)<<24|rn.b<<16|rn.g<<8|rn.r);var Sn=Le[0];return L[Ct]=Sn,Sn}function dt(Ct,rn){var Qt=Ct.height/Ct.width,Ht=rn.height/rn.width;return Qt<1&&Ht>1||Qt>1&&Ht<1?1:Math.min(Math.max(Ht,1/Ht),Math.max(1/Qt,Qt))}it.floatArrayColor=function Ce(Ct){var rn=Se(Ct=ie.HTML_COLORS[Ct]||Ct);return new Float32Array([rn.r/255,rn.g/255,rn.b/255,rn.a])},it.floatColor=ze,it.getCorrectionRatio=dt,it.matrixFromCamera=function st(Ct,rn,Qt,Ht,Qn){var en=Ct.angle,Sn=Ct.ratio,Pn=Ct.x,xt=Ct.y,Jt=rn.width,Gn=rn.height,ri=(0,re.identity)(),ni=Math.min(Jt,Gn)-2*Ht,St=dt(rn,Qt);return Qn?((0,re.multiply)(ri,(0,re.translate)((0,re.identity)(),Pn,xt)),(0,re.multiply)(ri,(0,re.scale)((0,re.identity)(),Sn)),(0,re.multiply)(ri,(0,re.rotate)((0,re.identity)(),en)),(0,re.multiply)(ri,(0,re.scale)((0,re.identity)(),Jt/ni/2/St,Gn/ni/2/St))):((0,re.multiply)(ri,(0,re.scale)((0,re.identity)(),ni/Jt*2*St,ni/Gn*2*St)),(0,re.multiply)(ri,(0,re.rotate)((0,re.identity)(),-en)),(0,re.multiply)(ri,(0,re.scale)((0,re.identity)(),1/Sn)),(0,re.multiply)(ri,(0,re.translate)((0,re.identity)(),-Pn,-xt))),ri},it.getMatrixImpact=function bt(Ct,rn,Qt){var Ht=(0,re.multiplyVec2)(Ct,{x:Math.cos(rn.angle),y:Math.sin(rn.angle)},0),en=Ht.y;return 1/Math.sqrt(Math.pow(Ht.x,2)+Math.pow(en,2))/Qt.width},it.extractPixel=function ut(Ct,rn,Qt,Ht){var Qn=Ht||new Uint8Array(4);return Ct.readPixels(rn,Qt,1,1,Ct.RGBA,Ct.UNSIGNED_BYTE,Qn),Qn},it.canUse32BitsIndices=function Vt(Ct){return typeof WebGL2RenderingContext<"u"&&Ct instanceof WebGL2RenderingContext||!!Ct.getExtension("OES_element_index_uint")},it.validateGraph=function on(Ct){if(!(0,oe.default)(Ct))throw new Error("Sigma: invalid graph instance.");Ct.forEachNode(function(rn,Qt){if(!Number.isFinite(Qt.x)||!Number.isFinite(Qt.y))throw new Error("Sigma: Coordinates of node ".concat(rn," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}},7611:(yt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.multiplyVec2=it.multiply=it.translate=it.rotate=it.scale=it.identity=void 0,it.identity=function ae(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},it.scale=function ye(V,K,q){return V[0]=K,V[4]="number"==typeof q?q:K,V},it.rotate=function j(V,K){var q=Math.sin(K),le=Math.cos(K);return V[0]=le,V[1]=q,V[3]=-q,V[4]=le,V},it.translate=function oe(V,K,q){return V[6]=K,V[7]=q,V},it.multiply=function re(V,K){var q=V[0],le=V[1],Te=V[2],De=V[3],xe=V[4],_e=V[5],Q=V[6],Re=V[7],Le=V[8],Ve=K[0],Ae=K[1],Se=K[2],L=K[3],ee=K[4],Ce=K[5],ze=K[6],dt=K[7],st=K[8];return V[0]=Ve*q+Ae*De+Se*Q,V[1]=Ve*le+Ae*xe+Se*Re,V[2]=Ve*Te+Ae*_e+Se*Le,V[3]=L*q+ee*De+Ce*Q,V[4]=L*le+ee*xe+Ce*Re,V[5]=L*Te+ee*_e+Ce*Le,V[6]=ze*q+dt*De+st*Q,V[7]=ze*le+dt*xe+st*Re,V[8]=ze*Te+dt*_e+st*Le,V},it.multiplyVec2=function ie(V,K,q){void 0===q&&(q=1);var Re=K.x,Le=K.y;return{x:Re*V[0]+Le*V[3]+V[6]*q,y:Re*V[1]+Le*V[4]+V[7]*q}}},295:(yt,it,ae)=>{yt.exports=oe;var ye=ae(9069).EventEmitter;function oe(){ye.call(this)}ae(3894)(oe,ye),oe.Readable=ae(3154),oe.Writable=ae(520),oe.Duplex=ae(1339),oe.Transform=ae(6025),oe.PassThrough=ae(6071),oe.finished=ae(7542),oe.pipeline=ae(954),oe.Stream=oe,oe.prototype.pipe=function(re,ie){var V=this;function K(Q){re.writable&&!1===re.write(Q)&&V.pause&&V.pause()}function q(){V.readable&&V.resume&&V.resume()}V.on("data",K),re.on("drain",q),!re._isStdio&&(!ie||!1!==ie.end)&&(V.on("end",Te),V.on("close",De));var le=!1;function Te(){le||(le=!0,re.end())}function De(){le||(le=!0,"function"==typeof re.destroy&&re.destroy())}function xe(Q){if(_e(),0===ye.listenerCount(this,"error"))throw Q}function _e(){V.removeListener("data",K),re.removeListener("drain",q),V.removeListener("end",Te),V.removeListener("close",De),V.removeListener("error",xe),re.removeListener("error",xe),V.removeListener("end",_e),V.removeListener("close",_e),re.removeListener("close",_e)}return V.on("error",xe),re.on("error",xe),V.on("end",_e),V.on("close",_e),re.on("close",_e),re.emit("pipe",V),re}},3054:(yt,it,ae)=>{"use strict";var ye=ae(858).Buffer,j=ye.isEncoding||function(Ae){switch((Ae=""+Ae)&&Ae.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ie(Ae){var Se;switch(this.encoding=function re(Ae){var Se=function oe(Ae){if(!Ae)return"utf8";for(var Se;;)switch(Ae){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Ae;default:if(Se)return;Ae=(""+Ae).toLowerCase(),Se=!0}}(Ae);if("string"!=typeof Se&&(ye.isEncoding===j||!j(Ae)))throw new Error("Unknown encoding: "+Ae);return Se||Ae}(Ae),this.encoding){case"utf16le":this.text=xe,this.end=_e,Se=4;break;case"utf8":this.fillLast=le,Se=4;break;case"base64":this.text=Q,this.end=Re,Se=3;break;default:return this.write=Le,void(this.end=Ve)}this.lastNeed=0,this.lastTotal=0,this.lastChar=ye.allocUnsafe(Se)}function V(Ae){return Ae<=127?0:Ae>>5==6?2:Ae>>4==14?3:Ae>>3==30?4:Ae>>6==2?-1:-2}function le(Ae){var Se=this.lastTotal-this.lastNeed,L=function q(Ae,Se,L){if(128!=(192&Se[0]))return Ae.lastNeed=0,"\ufffd";if(Ae.lastNeed>1&&Se.length>1){if(128!=(192&Se[1]))return Ae.lastNeed=1,"\ufffd";if(Ae.lastNeed>2&&Se.length>2&&128!=(192&Se[2]))return Ae.lastNeed=2,"\ufffd"}}(this,Ae);return void 0!==L?L:this.lastNeed<=Ae.length?(Ae.copy(this.lastChar,Se,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(Ae.copy(this.lastChar,Se,0,Ae.length),void(this.lastNeed-=Ae.length))}function xe(Ae,Se){if((Ae.length-Se)%2==0){var L=Ae.toString("utf16le",Se);if(L){var ee=L.charCodeAt(L.length-1);if(ee>=55296&&ee<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=Ae[Ae.length-2],this.lastChar[1]=Ae[Ae.length-1],L.slice(0,-1)}return L}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=Ae[Ae.length-1],Ae.toString("utf16le",Se,Ae.length-1)}function _e(Ae){var Se=Ae&&Ae.length?this.write(Ae):"";return this.lastNeed?Se+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):Se}function Q(Ae,Se){var L=(Ae.length-Se)%3;return 0===L?Ae.toString("base64",Se):(this.lastNeed=3-L,this.lastTotal=3,1===L?this.lastChar[0]=Ae[Ae.length-1]:(this.lastChar[0]=Ae[Ae.length-2],this.lastChar[1]=Ae[Ae.length-1]),Ae.toString("base64",Se,Ae.length-L))}function Re(Ae){var Se=Ae&&Ae.length?this.write(Ae):"";return this.lastNeed?Se+this.lastChar.toString("base64",0,3-this.lastNeed):Se}function Le(Ae){return Ae.toString(this.encoding)}function Ve(Ae){return Ae&&Ae.length?this.write(Ae):""}it.s=ie,ie.prototype.write=function(Ae){if(0===Ae.length)return"";var Se,L;if(this.lastNeed){if(void 0===(Se=this.fillLast(Ae)))return"";L=this.lastNeed,this.lastNeed=0}else L=0;return L<Ae.length?Se?Se+this.text(Ae,L):this.text(Ae,L):Se||""},ie.prototype.end=function De(Ae){var Se=Ae&&Ae.length?this.write(Ae):"";return this.lastNeed?Se+"\ufffd":Se},ie.prototype.text=function Te(Ae,Se){var L=function K(Ae,Se,L){var ee=Se.length-1;if(ee<L)return 0;var Ce=V(Se[ee]);return Ce>=0?(Ce>0&&(Ae.lastNeed=Ce-1),Ce):--ee<L||-2===Ce?0:(Ce=V(Se[ee]))>=0?(Ce>0&&(Ae.lastNeed=Ce-2),Ce):--ee<L||-2===Ce?0:(Ce=V(Se[ee]))>=0?(Ce>0&&(2===Ce?Ce=0:Ae.lastNeed=Ce-3),Ce):0}(this,Ae,Se);if(!this.lastNeed)return Ae.toString("utf8",Se);this.lastTotal=L;var ee=Ae.length-(L-this.lastNeed);return Ae.copy(this.lastChar,0,ee),Ae.toString("utf8",Se,ee)},ie.prototype.fillLast=function(Ae){if(this.lastNeed<=Ae.length)return Ae.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Ae.copy(this.lastChar,this.lastTotal-this.lastNeed,0,Ae.length),this.lastNeed-=Ae.length}},858:(yt,it,ae)=>{var ye=ae(3172),j=ye.Buffer;function oe(ie,V){for(var K in ie)V[K]=ie[K]}function re(ie,V,K){return j(ie,V,K)}j.from&&j.alloc&&j.allocUnsafe&&j.allocUnsafeSlow?yt.exports=ye:(oe(ye,it),it.Buffer=re),re.prototype=Object.create(j.prototype),oe(j,re),re.from=function(ie,V,K){if("number"==typeof ie)throw new TypeError("Argument must not be a number");return j(ie,V,K)},re.alloc=function(ie,V,K){if("number"!=typeof ie)throw new TypeError("Argument must be a number");var q=j(ie);return void 0!==V?"string"==typeof K?q.fill(V,K):q.fill(V):q.fill(0),q},re.allocUnsafe=function(ie){if("number"!=typeof ie)throw new TypeError("Argument must be a number");return j(ie)},re.allocUnsafeSlow=function(ie){if("number"!=typeof ie)throw new TypeError("Argument must be a number");return ye.SlowBuffer(ie)}},5570:function(yt,it,ae){"use strict";var ye=this&&this.__extends||function(le,Te){for(var De in Te)Te.hasOwnProperty(De)&&(le[De]=Te[De]);function xe(){this.constructor=le}le.prototype=null===Te?Object.create(Te):(xe.prototype=Te.prototype,new xe)},j=ae(5237),re={type:"change"},ie={type:"start"},V={type:"end"},K=1e-6,q=function(le){function Te(De,xe,_e){var Q=le.call(this)||this;return Q.object=De,Q.domElement=void 0!==xe?xe:document,Q.window=void 0!==_e?_e:window,Q.enabled=!0,Q.target=new j.Vector3,Q.minDistance=0,Q.maxDistance=1/0,Q.minZoom=0,Q.maxZoom=1/0,Q.minPolarAngle=0,Q.maxPolarAngle=Math.PI,Q.minAzimuthAngle=-1/0,Q.maxAzimuthAngle=1/0,Q.enableDamping=!1,Q.dampingFactor=.25,Q.enableZoom=!0,Q.zoomSpeed=1,Q.enableRotate=!0,Q.rotateSpeed=1,Q.enablePan=!0,Q.keyPanSpeed=7,Q.autoRotate=!1,Q.autoRotateSpeed=2,Q.enableKeys=!0,Q.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},Q.mouseButtons={ORBIT:j.MOUSE.LEFT,ZOOM:j.MOUSE.MIDDLE,PAN:j.MOUSE.RIGHT},Q.target0=Q.target.clone(),Q.position0=Q.object.position.clone(),Q.zoom0=Q.object.zoom,Q.updateOffset=new j.Vector3,Q.updateQuat=(new j.Quaternion).setFromUnitVectors(De.up,new j.Vector3(0,1,0)),Q.updateQuatInverse=Q.updateQuat.clone().inverse(),Q.updateLastPosition=new j.Vector3,Q.updateLastQuaternion=new j.Quaternion,Q.state=-1,Q.scale=1,Q.spherical=new j.Spherical,Q.sphericalDelta=new j.Spherical,Q.panOffset=new j.Vector3,Q.zoomChanged=!1,Q.rotateStart=new j.Vector2,Q.rotateEnd=new j.Vector2,Q.rotateDelta=new j.Vector2,Q.panStart=new j.Vector2,Q.panEnd=new j.Vector2,Q.panDelta=new j.Vector2,Q.dollyStart=new j.Vector2,Q.dollyEnd=new j.Vector2,Q.dollyDelta=new j.Vector2,Q.panLeftV=new j.Vector3,Q.panUpV=new j.Vector3,Q.panInternalOffset=new j.Vector3,Q.onMouseDown=function(Re){if(!1!==Q.enabled){if(Re.preventDefault(),Re.button===Q.mouseButtons.ORBIT){if(!1===Q.enableRotate)return;Q.rotateStart.set(Re.clientX,Re.clientY),Q.state=0}else if(Re.button===Q.mouseButtons.ZOOM){if(!1===Q.enableZoom)return;Q.dollyStart.set(Re.clientX,Re.clientY),Q.state=1}else if(Re.button===Q.mouseButtons.PAN){if(!1===Q.enablePan)return;Q.panStart.set(Re.clientX,Re.clientY),Q.state=2}-1!==Q.state&&(document.addEventListener("mousemove",Q.onMouseMove,!1),document.addEventListener("mouseup",Q.onMouseUp,!1),Q.dispatchEvent(ie))}},Q.onMouseMove=function(Re){if(!1!==Q.enabled)if(Re.preventDefault(),0===Q.state){if(!1===Q.enableRotate)return;Q.rotateEnd.set(Re.clientX,Re.clientY),Q.rotateDelta.subVectors(Q.rotateEnd,Q.rotateStart);var Le=Q.domElement===document?Q.domElement.body:Q.domElement;Q.rotateLeft(2*Math.PI*Q.rotateDelta.x/Le.clientWidth*Q.rotateSpeed),Q.rotateUp(2*Math.PI*Q.rotateDelta.y/Le.clientHeight*Q.rotateSpeed),Q.rotateStart.copy(Q.rotateEnd),Q.update()}else if(1===Q.state){if(!1===Q.enableZoom)return;Q.dollyEnd.set(Re.clientX,Re.clientY),Q.dollyDelta.subVectors(Q.dollyEnd,Q.dollyStart),Q.dollyDelta.y>0?Q.dollyIn(Q.getZoomScale()):Q.dollyDelta.y<0&&Q.dollyOut(Q.getZoomScale()),Q.dollyStart.copy(Q.dollyEnd),Q.update()}else if(2===Q.state){if(!1===Q.enablePan)return;Q.panEnd.set(Re.clientX,Re.clientY),Q.panDelta.subVectors(Q.panEnd,Q.panStart),Q.pan(Q.panDelta.x,Q.panDelta.y),Q.panStart.copy(Q.panEnd),Q.update()}},Q.onMouseUp=function(Re){!1!==Q.enabled&&(document.removeEventListener("mousemove",Q.onMouseMove,!1),document.removeEventListener("mouseup",Q.onMouseUp,!1),Q.dispatchEvent(V),Q.state=-1)},Q.onMouseWheel=function(Re){!1===Q.enabled||!1===Q.enableZoom||-1!==Q.state&&0!==Q.state||(Re.preventDefault(),Re.stopPropagation(),Re.deltaY<0?Q.dollyOut(Q.getZoomScale()):Re.deltaY>0&&Q.dollyIn(Q.getZoomScale()),Q.update(),Q.dispatchEvent(ie),Q.dispatchEvent(V))},Q.onKeyDown=function(Re){if(!1!==Q.enabled&&!1!==Q.enableKeys&&!1!==Q.enablePan)switch(Re.keyCode){case Q.keys.UP:Q.pan(0,Q.keyPanSpeed),Q.update();break;case Q.keys.BOTTOM:Q.pan(0,-Q.keyPanSpeed),Q.update();break;case Q.keys.LEFT:Q.pan(Q.keyPanSpeed,0),Q.update();break;case Q.keys.RIGHT:Q.pan(-Q.keyPanSpeed,0),Q.update()}},Q.onTouchStart=function(Re){if(!1!==Q.enabled){switch(Re.touches.length){case 1:if(!1===Q.enableRotate)return;Q.rotateStart.set(Re.touches[0].pageX,Re.touches[0].pageY),Q.state=3;break;case 2:if(!1===Q.enableZoom)return;var Le=Re.touches[0].pageX-Re.touches[1].pageX,Ve=Re.touches[0].pageY-Re.touches[1].pageY,Ae=Math.sqrt(Le*Le+Ve*Ve);Q.dollyStart.set(0,Ae),Q.state=4;break;case 3:if(!1===Q.enablePan)return;Q.panStart.set(Re.touches[0].pageX,Re.touches[0].pageY),Q.state=5;break;default:Q.state=-1}-1!==Q.state&&Q.dispatchEvent(ie)}},Q.onTouchMove=function(Re){if(!1!==Q.enabled)switch(Re.preventDefault(),Re.stopPropagation(),Re.touches.length){case 1:if(!1===Q.enableRotate||3!==Q.state)return;Q.rotateEnd.set(Re.touches[0].pageX,Re.touches[0].pageY),Q.rotateDelta.subVectors(Q.rotateEnd,Q.rotateStart);var Le=Q.domElement===document?Q.domElement.body:Q.domElement;Q.rotateLeft(2*Math.PI*Q.rotateDelta.x/Le.clientWidth*Q.rotateSpeed),Q.rotateUp(2*Math.PI*Q.rotateDelta.y/Le.clientHeight*Q.rotateSpeed),Q.rotateStart.copy(Q.rotateEnd),Q.update();break;case 2:if(!1===Q.enableZoom||4!==Q.state)return;var Ve=Re.touches[0].pageX-Re.touches[1].pageX,Ae=Re.touches[0].pageY-Re.touches[1].pageY,Se=Math.sqrt(Ve*Ve+Ae*Ae);Q.dollyEnd.set(0,Se),Q.dollyDelta.subVectors(Q.dollyEnd,Q.dollyStart),Q.dollyDelta.y>0?Q.dollyOut(Q.getZoomScale()):Q.dollyDelta.y<0&&Q.dollyIn(Q.getZoomScale()),Q.dollyStart.copy(Q.dollyEnd),Q.update();break;case 3:if(!1===Q.enablePan||5!==Q.state)return;Q.panEnd.set(Re.touches[0].pageX,Re.touches[0].pageY),Q.panDelta.subVectors(Q.panEnd,Q.panStart),Q.pan(Q.panDelta.x,Q.panDelta.y),Q.panStart.copy(Q.panEnd),Q.update();break;default:Q.state=-1}},Q.onTouchEnd=function(Re){!1!==Q.enabled&&(Q.dispatchEvent(V),Q.state=-1)},Q.onContextMenu=function(Re){Re.preventDefault()},Q.domElement.addEventListener("contextmenu",Q.onContextMenu,!1),Q.domElement.addEventListener("mousedown",Q.onMouseDown,!1),Q.domElement.addEventListener("wheel",Q.onMouseWheel,!1),Q.domElement.addEventListener("touchstart",Q.onTouchStart,!1),Q.domElement.addEventListener("touchend",Q.onTouchEnd,!1),Q.domElement.addEventListener("touchmove",Q.onTouchMove,!1),Q.window.addEventListener("keydown",Q.onKeyDown,!1),Q.update(),Q}return ye(Te,le),Te.prototype.update=function(){var De=this.object.position;return this.updateOffset.copy(De).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&-1===this.state&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),De.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>K||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>K)&&(this.dispatchEvent(re),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},Te.prototype.panLeft=function(De,xe){this.panLeftV.setFromMatrixColumn(xe,0),this.panLeftV.multiplyScalar(-De),this.panOffset.add(this.panLeftV)},Te.prototype.panUp=function(De,xe){this.panUpV.setFromMatrixColumn(xe,1),this.panUpV.multiplyScalar(De),this.panOffset.add(this.panUpV)},Te.prototype.pan=function(De,xe){var _e=this.domElement===document?this.domElement.body:this.domElement;if(this.object instanceof j.PerspectiveCamera){this.panInternalOffset.copy(this.object.position).sub(this.target);var Re=this.panInternalOffset.length();Re*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*De*Re/_e.clientHeight,this.object.matrix),this.panUp(2*xe*Re/_e.clientHeight,this.object.matrix)}else this.object instanceof j.OrthographicCamera?(this.panLeft(De*(this.object.right-this.object.left)/this.object.zoom/_e.clientWidth,this.object.matrix),this.panUp(xe*(this.object.top-this.object.bottom)/this.object.zoom/_e.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},Te.prototype.dollyIn=function(De){this.object instanceof j.PerspectiveCamera?this.scale/=De:this.object instanceof j.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*De)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},Te.prototype.dollyOut=function(De){this.object instanceof j.PerspectiveCamera?this.scale*=De:this.object instanceof j.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/De)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},Te.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},Te.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},Te.prototype.rotateLeft=function(De){this.sphericalDelta.theta-=De},Te.prototype.rotateUp=function(De){this.sphericalDelta.phi-=De},Te.prototype.getPolarAngle=function(){return this.spherical.phi},Te.prototype.getAzimuthalAngle=function(){return this.spherical.theta},Te.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},Te.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(re),this.update(),this.state=-1},Object.defineProperty(Te.prototype,"center",{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!0,configurable:!0}),Object.defineProperty(Te.prototype,"noZoom",{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(De){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!De},enumerable:!0,configurable:!0}),Te}(j.EventDispatcher);it.OrbitControls=q},5237:(yt,it,ae)=>{"use strict";function ye(){}ae.r(it),ae.d(it,{AddEquation:()=>Vt,AddOperation:()=>lt,AdditiveBlending:()=>ze,AlphaFormat:()=>gt,AlwaysDepth:()=>Ft,AmbientLight:()=>Im,AnimationClip:()=>Bu,AnimationMixer:()=>Fg,AnimationObjectGroup:()=>Ac,AnimationUtils:()=>xc,ArcCurve:()=>Zp,ArrowHelper:()=>Hc,Audio:()=>yd,AudioAnalyser:()=>pv,AudioContext:()=>Yp,AudioListener:()=>fv,AudioLoader:()=>Rg,AxisHelper:()=>Ap,BackSide:()=>Q,BasicDepthPacking:()=>Mt,BasicShadowMap:()=>Te,BinaryTextureLoader:()=>Ku,BlendingMode:()=>ut,Bone:()=>ov,BooleanKeyframeTrack:()=>Sm,BoundingBoxHelper:()=>oy,Box2:()=>tf,Box3:()=>Na,BoxBufferGeometry:()=>Xu,BoxGeometry:()=>Ru,BoxHelper:()=>Vg,BufferAttribute:()=>bs,BufferGeometry:()=>Bs,BufferGeometryLoader:()=>vd,ByteType:()=>me,Cache:()=>Ch,Camera:()=>tu,CameraHelper:()=>Lm,CanvasRenderer:()=>uy,CanvasTexture:()=>Up,CatmullRomCurve3:()=>vv,CineonToneMapping:()=>us,CircleBufferGeometry:()=>Wl,CircleGeometry:()=>Yu,ClampToEdgeWrapping:()=>S,Clock:()=>mv,ClosedSplineCurve3:()=>bv,Color:()=>na,ColorKeyframeTrack:()=>jp,CompressedTexture:()=>Vc,CompressedTextureLoader:()=>uv,ConeBufferGeometry:()=>kg,ConeGeometry:()=>Lg,CubeCamera:()=>Qu,CubeGeometry:()=>Ru,CubeReflectionMapping:()=>Hr,CubeRefractionMapping:()=>Ds,CubeTexture:()=>Zl,CubeTextureLoader:()=>cv,CubeUVReflectionMapping:()=>l,CubeUVRefractionMapping:()=>d,CubicBezierCurve:()=>qf,CubicBezierCurve3:()=>ny,CubicInterpolant:()=>Bd,CullFaceBack:()=>ie,CullFaceFront:()=>V,CullFaceFrontBack:()=>K,CullFaceNone:()=>re,Curve:()=>Zu,CurvePath:()=>Mm,CurveUtils:()=>oc,CustomBlending:()=>bt,CylinderBufferGeometry:()=>vp,CylinderGeometry:()=>rc,Cylindrical:()=>Eu,DataTexture:()=>da,DataTextureLoader:()=>ac,DefaultLoadingManager:()=>Cc,DepthFormat:()=>We,DepthStencilFormat:()=>Ye,DepthTexture:()=>xm,DirectionalLight:()=>yp,DirectionalLightHelper:()=>zg,DirectionalLightShadow:()=>_p,DiscreteInterpolant:()=>Kh,DodecahedronBufferGeometry:()=>gd,DodecahedronGeometry:()=>Mg,DoubleSide:()=>Re,DstAlphaFactor:()=>Jt,DstColorFactor:()=>ri,DynamicBufferAttribute:()=>r_,EdgesGeometry:()=>Su,EdgesHelper:()=>s0,EllipseCurve:()=>cf,EqualDepth:()=>di,EquirectangularReflectionMapping:()=>nr,EquirectangularRefractionMapping:()=>fr,Euler:()=>Ga,EventDispatcher:()=>ye,ExtrudeGeometry:()=>oh,Face3:()=>Yo,Face4:()=>_v,FaceColors:()=>Se,FaceNormalsHelper:()=>Ud,FileLoader:()=>Vo,FlatShading:()=>Le,Float32Attribute:()=>ay,Float32BufferAttribute:()=>ga,Float64Attribute:()=>r0,Float64BufferAttribute:()=>Nc,FloatType:()=>Ee,Fog:()=>Bc,FogExp2:()=>Pd,Font:()=>Dm,FontLoader:()=>Xf,FrontFaceDirectionCCW:()=>le,FrontFaceDirectionCW:()=>q,FrontSide:()=>_e,Frustum:()=>Xo,GammaEncoding:()=>eo,Geometry:()=>Ba,GeometryIdCount:()=>_m,GeometryUtils:()=>Rm,GreaterDepth:()=>Rt,GreaterEqualDepth:()=>Gt,GridHelper:()=>Bg,Group:()=>zp,HalfFloatType:()=>ke,HemisphereLight:()=>wc,HemisphereLightHelper:()=>gf,IcosahedronBufferGeometry:()=>Hf,IcosahedronGeometry:()=>Hp,ImageLoader:()=>Am,ImageUtils:()=>o_,ImmediateRenderObject:()=>xp,InstancedBufferAttribute:()=>Yf,InstancedBufferGeometry:()=>Jh,InstancedInterleavedBuffer:()=>bd,Int16Attribute:()=>zl,Int16BufferAttribute:()=>Bp,Int32Attribute:()=>Hd,Int32BufferAttribute:()=>cp,Int8Attribute:()=>Ih,Int8BufferAttribute:()=>Md,IntType:()=>pe,InterleavedBuffer:()=>df,InterleavedBufferAttribute:()=>wp,Interpolant:()=>Nu,InterpolateDiscrete:()=>Ai,InterpolateLinear:()=>or,InterpolateSmooth:()=>is,JSONLoader:()=>Tm,KeyframeTrack:()=>Zh,LOD:()=>bl,LatheBufferGeometry:()=>ko,LatheGeometry:()=>mp,Layers:()=>Sg,LensFlare:()=>fd,LessDepth:()=>Ot,LessEqualDepth:()=>li,Light:()=>po,LightShadow:()=>md,Line:()=>yh,Line3:()=>qu,LineBasicMaterial:()=>mu,LineCurve:()=>_d,LineCurve3:()=>Ab,LineDashedMaterial:()=>bc,LinePieces:()=>i_,LineSegments:()=>Lo,LineStrip:()=>Ip,LinearEncoding:()=>Kr,LinearFilter:()=>Z,LinearInterpolant:()=>jf,LinearMipMapLinearFilter:()=>R,LinearMipMapNearestFilter:()=>$,LinearToneMapping:()=>Yn,Loader:()=>lh,LoadingManager:()=>Fu,LogLuvEncoding:()=>Ea,LoopOnce:()=>Ci,LoopPingPong:()=>Ei,LoopRepeat:()=>yi,LuminanceAlphaFormat:()=>qt,LuminanceFormat:()=>Bt,MOUSE:()=>oe,Material:()=>lo,MaterialLoader:()=>Em,Math:()=>An,Matrix3:()=>vn,Matrix4:()=>Zs,MaxEquation:()=>Qt,Mesh:()=>Bl,MeshBasicMaterial:()=>eu,MeshDepthMaterial:()=>br,MeshFaceMaterial:()=>Ib,MeshLambertMaterial:()=>Gp,MeshNormalMaterial:()=>sc,MeshPhongMaterial:()=>Ou,MeshPhysicalMaterial:()=>Yh,MeshStandardMaterial:()=>Xh,MeshToonMaterial:()=>jl,MinEquation:()=>rn,MirroredRepeatWrapping:()=>k,MixOperation:()=>rt,MorphBlendMesh:()=>wl,MultiMaterial:()=>bh,MultiplyBlending:()=>st,MultiplyOperation:()=>It,NearestFilter:()=>z,NearestMipMapLinearFilter:()=>H,NearestMipMapNearestFilter:()=>D,NeverDepth:()=>Oe,NoBlending:()=>ee,NoColors:()=>Ae,NoToneMapping:()=>dn,NormalBlending:()=>Ce,NotEqualDepth:()=>_n,NumberKeyframeTrack:()=>xh,Object3D:()=>Es,ObjectLoader:()=>$p,OctahedronBufferGeometry:()=>ah,OctahedronGeometry:()=>sf,OneFactor:()=>Qn,OneMinusDstAlphaFactor:()=>Gn,OneMinusDstColorFactor:()=>ni,OneMinusSrcAlphaFactor:()=>xt,OneMinusSrcColorFactor:()=>Sn,OrthographicCamera:()=>Ff,PCFShadowMap:()=>De,PCFSoftShadowMap:()=>xe,ParametricBufferGeometry:()=>Vf,ParametricGeometry:()=>Uf,Particle:()=>ry,ParticleBasicMaterial:()=>t0,ParticleSystem:()=>Jy,ParticleSystemMaterial:()=>sy,Path:()=>ma,PerspectiveCamera:()=>ku,Plane:()=>ln,PlaneBufferGeometry:()=>yl,PlaneGeometry:()=>lv,PointCloud:()=>iy,PointCloudMaterial:()=>e0,PointLight:()=>wh,PointLightHelper:()=>pf,Points:()=>Ja,PointsMaterial:()=>zc,PolarGridHelper:()=>ed,PolyhedronBufferGeometry:()=>ic,PolyhedronGeometry:()=>nl,PositionalAudio:()=>Og,Projector:()=>ly,PropertyBinding:()=>ql,PropertyMixer:()=>Uc,QuadraticBezierCurve:()=>hf,QuadraticBezierCurve3:()=>km,Quaternion:()=>to,QuaternionKeyframeTrack:()=>$f,QuaternionLinearInterpolant:()=>Ml,REVISION:()=>j,RGBADepthPacking:()=>sn,RGBAFormat:()=>Lt,RGBA_PVRTC_2BPPV1_Format:()=>jn,RGBA_PVRTC_4BPPV1_Format:()=>On,RGBA_S3TC_DXT1_Format:()=>Ue,RGBA_S3TC_DXT3_Format:()=>ct,RGBA_S3TC_DXT5_Format:()=>Dt,RGBDEncoding:()=>Be,RGBEEncoding:()=>Qi,RGBEFormat:()=>Pe,RGBFormat:()=>Wt,RGBM16Encoding:()=>B,RGBM7Encoding:()=>As,RGB_ETC1_Format:()=>ii,RGB_PVRTC_2BPPV1_Format:()=>nn,RGB_PVRTC_4BPPV1_Format:()=>wt,RGB_S3TC_DXT1_Format:()=>we,RawShaderMaterial:()=>iu,Ray:()=>_l,Raycaster:()=>uh,RectAreaLight:()=>$l,RectAreaLightHelper:()=>Kf,ReinhardToneMapping:()=>Ti,RepeatWrapping:()=>C,ReverseSubtractEquation:()=>Ct,RingBufferGeometry:()=>Xa,RingGeometry:()=>ls,Scene:()=>Ld,SceneUtils:()=>_u,ShaderChunk:()=>io,ShaderLib:()=>Fc,ShaderMaterial:()=>sh,ShadowMaterial:()=>Wf,Shape:()=>Qh,ShapeBufferGeometry:()=>Dg,ShapeGeometry:()=>Pg,ShapePath:()=>Xp,ShapeUtils:()=>Gl,ShortType:()=>ve,Skeleton:()=>rf,SkeletonHelper:()=>Vd,SkinnedMesh:()=>wm,SmoothShading:()=>Ve,Sphere:()=>gn,SphereBufferGeometry:()=>Cl,SphereGeometry:()=>il,Spherical:()=>Pm,SphericalReflectionMapping:()=>y,Spline:()=>Qy,SplineCurve:()=>Ah,SplineCurve3:()=>ty,SpotLight:()=>Nd,SpotLightHelper:()=>zd,SpotLightShadow:()=>Wp,Sprite:()=>_h,SpriteMaterial:()=>jh,SrcAlphaFactor:()=>Pn,SrcAlphaSaturateFactor:()=>St,SrcColorFactor:()=>en,StereoCamera:()=>dv,StringKeyframeTrack:()=>hv,SubtractEquation:()=>on,SubtractiveBlending:()=>dt,TetrahedronBufferGeometry:()=>vu,TetrahedronGeometry:()=>kd,TextGeometry:()=>lf,Texture:()=>lr,TextureFilter:()=>Y,TextureLoader:()=>Fd,TextureMapping:()=>_,TextureWrapping:()=>N,TorusBufferGeometry:()=>$h,TorusGeometry:()=>Od,TorusKnotBufferGeometry:()=>uu,TorusKnotGeometry:()=>af,Triangle:()=>Nl,TriangleFanDrawMode:()=>Xr,TriangleStripDrawMode:()=>ss,TrianglesDrawMode:()=>rs,TubeBufferGeometry:()=>Gf,TubeGeometry:()=>Rd,UVMapping:()=>vs,Uint16Attribute:()=>s_,Uint16BufferAttribute:()=>Of,Uint32Attribute:()=>a_,Uint32BufferAttribute:()=>Wh,Uint8Attribute:()=>n0,Uint8BufferAttribute:()=>Au,Uint8ClampedAttribute:()=>Dl,Uint8ClampedBufferAttribute:()=>Rf,Uncharted2ToneMapping:()=>Di,Uniform:()=>gv,UniformsLib:()=>_a,UniformsUtils:()=>Ul,UnsignedByteType:()=>he,UnsignedInt248Type:()=>pt,UnsignedIntType:()=>de,UnsignedShort4444Type:()=>Xe,UnsignedShort5551Type:()=>je,UnsignedShort565Type:()=>nt,UnsignedShortType:()=>ge,Vector2:()=>qn,Vector3:()=>Bn,Vector4:()=>Pr,VectorKeyframeTrack:()=>bp,Vertex:()=>yv,VertexColors:()=>L,VertexNormalsHelper:()=>Ng,VideoTexture:()=>Vp,WebGLRenderTarget:()=>Ys,WebGLRenderTargetCube:()=>ba,WebGLRenderer:()=>zf,WireframeGeometry:()=>pd,WireframeHelper:()=>Sb,WrapAroundEnding:()=>wr,XHRLoader:()=>Zf,ZeroCurvatureEnding:()=>_r,ZeroFactor:()=>Ht,ZeroSlopeEnding:()=>ws,sRGBEncoding:()=>La}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(o){return o<0?-1:o>0?1:+o}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(o){if(null==o)throw new TypeError("Cannot convert undefined or null to object");for(var f=Object(o),v=1;v<arguments.length;v++){var x=arguments[v];if(null!=x)for(var P in x)Object.prototype.hasOwnProperty.call(x,P)&&(f[P]=x[P])}return f}),Object.assign(ye.prototype,{addEventListener:function(o,f){void 0===this._listeners&&(this._listeners={});var v=this._listeners;void 0===v[o]&&(v[o]=[]),-1===v[o].indexOf(f)&&v[o].push(f)},hasEventListener:function(o,f){if(void 0===this._listeners)return!1;var v=this._listeners;return void 0!==v[o]&&-1!==v[o].indexOf(f)},removeEventListener:function(o,f){if(void 0!==this._listeners){var x=this._listeners[o];if(void 0!==x){var P=x.indexOf(f);-1!==P&&x.splice(P,1)}}},dispatchEvent:function(o){if(void 0!==this._listeners){var v=this._listeners[o.type];if(void 0!==v){o.target=this;var x=[],P=0,G=v.length;for(P=0;P<G;P++)x[P]=v[P];for(P=0;P<G;P++)x[P].call(this,o)}}}});var x,o,f,v,j="83",oe={LEFT:0,MIDDLE:1,RIGHT:2},re=0,ie=1,V=2,K=3,q=0,le=1,Te=0,De=1,xe=2,_e=0,Q=1,Re=2,Le=1,Ve=2,Ae=0,Se=1,L=2,ee=0,Ce=1,ze=2,dt=3,st=4,bt=5,ut={NoBlending:ee,NormalBlending:Ce,AdditiveBlending:ze,SubtractiveBlending:dt,MultiplyBlending:st,CustomBlending:bt},Vt=100,on=101,Ct=102,rn=103,Qt=104,Ht=200,Qn=201,en=202,Sn=203,Pn=204,xt=205,Jt=206,Gn=207,ri=208,ni=209,St=210,Oe=0,Ft=1,Ot=2,li=3,di=4,Gt=5,Rt=6,_n=7,It=0,rt=1,lt=2,dn=0,Yn=1,Ti=2,Di=3,us=4,vs=300,Hr=301,Ds=302,nr=303,fr=304,y=305,l=306,d=307,_={UVMapping:vs,CubeReflectionMapping:Hr,CubeRefractionMapping:Ds,EquirectangularReflectionMapping:nr,EquirectangularRefractionMapping:fr,SphericalReflectionMapping:y,CubeUVReflectionMapping:l,CubeUVRefractionMapping:d},C=1e3,S=1001,k=1002,N={RepeatWrapping:C,ClampToEdgeWrapping:S,MirroredRepeatWrapping:k},z=1003,D=1004,H=1005,Z=1006,$=1007,R=1008,Y={NearestFilter:z,NearestMipMapNearestFilter:D,NearestMipMapLinearFilter:H,LinearFilter:Z,LinearMipMapNearestFilter:$,LinearMipMapLinearFilter:R},he=1009,me=1010,ve=1011,ge=1012,pe=1013,de=1014,Ee=1015,ke=1016,Xe=1017,je=1018,nt=1019,pt=1020,gt=1021,Wt=1022,Lt=1023,Bt=1024,qt=1025,Pe=Lt,We=1026,Ye=1027,we=2001,Ue=2002,ct=2003,Dt=2004,wt=2100,nn=2101,On=2102,jn=2103,ii=2151,Ci=2200,yi=2201,Ei=2202,Ai=2300,or=2301,is=2302,_r=2400,ws=2401,wr=2402,rs=0,ss=1,Xr=2,Kr=3e3,La=3001,eo=3007,Qi=3002,Ea=3003,As=3004,B=3005,Be=3006,Mt=3200,sn=3201,An={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),f=new Array(36),v=0,function(){for(var G=0;G<36;G++)8===G||13===G||18===G||23===G?f[G]="-":14===G?f[G]="4":(v<=2&&(v=33554432+16777216*Math.random()|0),x=15&v,v>>=4,f[G]=o[19===G?3&x|8:x]);return f.join("")}),clamp:function(o,f,v){return Math.max(f,Math.min(v,o))},euclideanModulo:function(o,f){return(o%f+f)%f},mapLinear:function(o,f,v,x,P){return x+(o-f)*(P-x)/(v-f)},lerp:function(o,f,v){return(1-v)*o+v*f},smoothstep:function(o,f,v){return o<=f?0:o>=v?1:(o=(o-f)/(v-f))*o*(3-2*o)},smootherstep:function(o,f,v){return o<=f?0:o>=v?1:(o=(o-f)/(v-f))*o*o*(o*(6*o-15)+10)},randInt:function(o,f){return o+Math.floor(Math.random()*(f-o+1))},randFloat:function(o,f){return o+Math.random()*(f-o)},randFloatSpread:function(o){return o*(.5-Math.random())},degToRad:function(o){return o*An.DEG2RAD},radToDeg:function(o){return o*An.RAD2DEG},isPowerOfTwo:function(o){return 0==(o&o-1)&&0!==o},nearestPowerOfTwo:function(o){return Math.pow(2,Math.round(Math.log(o)/Math.LN2))},nextPowerOfTwo:function(o){return o--,o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,o|=o>>16,++o}};function qn(o,f){this.x=o||0,this.y=f||0}qn.prototype={constructor:qn,isVector2:!0,get width(){return this.x},set width(o){this.x=o},get height(){return this.y},set height(o){this.y=o},set:function(o,f){return this.x=o,this.y=f,this},setScalar:function(o){return this.x=o,this.y=o,this},setX:function(o){return this.x=o,this},setY:function(o){return this.y=o,this},setComponent:function(o,f){switch(o){case 0:this.x=f;break;case 1:this.y=f;break;default:throw new Error("index is out of range: "+o)}return this},getComponent:function(o){switch(o){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+o)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(o){return this.x=o.x,this.y=o.y,this},add:function(o,f){return void 0!==f?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(o,f)):(this.x+=o.x,this.y+=o.y,this)},addScalar:function(o){return this.x+=o,this.y+=o,this},addVectors:function(o,f){return this.x=o.x+f.x,this.y=o.y+f.y,this},addScaledVector:function(o,f){return this.x+=o.x*f,this.y+=o.y*f,this},sub:function(o,f){return void 0!==f?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(o,f)):(this.x-=o.x,this.y-=o.y,this)},subScalar:function(o){return this.x-=o,this.y-=o,this},subVectors:function(o,f){return this.x=o.x-f.x,this.y=o.y-f.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},multiplyScalar:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},divideScalar:function(o){return this.multiplyScalar(1/o)},min:function(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this},max:function(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this},clamp:function(o,f){return this.x=Math.max(o.x,Math.min(f.x,this.x)),this.y=Math.max(o.y,Math.min(f.y,this.y)),this},clampScalar:function(){var o,f;return function(x,P){return void 0===o&&(o=new qn,f=new qn),o.set(x,x),f.set(P,P),this.clamp(o,f)}}(),clampLength:function(o,f){var v=this.length();return this.multiplyScalar(Math.max(o,Math.min(f,v))/v)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(o){return this.x*o.x+this.y*o.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},distanceTo:function(o){return Math.sqrt(this.distanceToSquared(o))},distanceToSquared:function(o){var f=this.x-o.x,v=this.y-o.y;return f*f+v*v},distanceToManhattan:function(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)},setLength:function(o){return this.multiplyScalar(o/this.length())},lerp:function(o,f){return this.x+=(o.x-this.x)*f,this.y+=(o.y-this.y)*f,this},lerpVectors:function(o,f,v){return this.subVectors(f,o).multiplyScalar(v).add(o)},equals:function(o){return o.x===this.x&&o.y===this.y},fromArray:function(o,f){return void 0===f&&(f=0),this.x=o[f],this.y=o[f+1],this},toArray:function(o,f){return void 0===o&&(o=[]),void 0===f&&(f=0),o[f]=this.x,o[f+1]=this.y,o},fromAttribute:function(o,f,v){return void 0!==v&&console.warn("THREE.Vector2: offset has been removed from .fromAttribute()."),this.x=o.getX(f),this.y=o.getY(f),this},rotateAround:function(o,f){var v=Math.cos(f),x=Math.sin(f),P=this.x-o.x,G=this.y-o.y;return this.x=P*v-G*x+o.x,this.y=P*x+G*v+o.y,this}};var Xi=0;function lr(o,f,v,x,P,G,J,se,Fe,Me){Object.defineProperty(this,"id",{value:Xi++}),this.uuid=An.generateUUID(),this.name="",this.image=void 0!==o?o:lr.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==f?f:lr.DEFAULT_MAPPING,this.wrapS=void 0!==v?v:S,this.wrapT=void 0!==x?x:S,this.magFilter=void 0!==P?P:Z,this.minFilter=void 0!==G?G:R,this.anisotropy=void 0!==Fe?Fe:1,this.format=void 0!==J?J:Lt,this.type=void 0!==se?se:he,this.offset=new qn(0,0),this.repeat=new qn(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==Me?Me:Kr,this.version=0,this.onUpdate=null}function Pr(o,f,v,x){this.x=o||0,this.y=f||0,this.z=v||0,this.w=void 0!==x?x:1}function Ys(o,f,v){this.uuid=An.generateUUID(),this.width=o,this.height=f,this.scissor=new Pr(0,0,o,f),this.scissorTest=!1,this.viewport=new Pr(0,0,o,f),void 0===(v=v||{}).minFilter&&(v.minFilter=Z),this.texture=new lr(void 0,void 0,v.wrapS,v.wrapT,v.magFilter,v.minFilter,v.format,v.type,v.anisotropy,v.encoding),this.depthBuffer=void 0===v.depthBuffer||v.depthBuffer,this.stencilBuffer=void 0===v.stencilBuffer||v.stencilBuffer,this.depthTexture=void 0!==v.depthTexture?v.depthTexture:null}function ba(o,f,v){Ys.call(this,o,f,v),this.activeCubeFace=0,this.activeMipMapLevel=0}function to(o,f,v,x){this._x=o||0,this._y=f||0,this._z=v||0,this._w=void 0!==x?x:1}function Bn(o,f,v){this.x=o||0,this.y=f||0,this.z=v||0}function Zs(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Zl(o,f,v,x,P,G,J,se,Fe,Me){lr.call(this,o=void 0!==o?o:[],f=void 0!==f?f:Hr,v,x,P,G,J,se,Fe,Me),this.flipY=!1}lr.DEFAULT_IMAGE=void 0,lr.DEFAULT_MAPPING=vs,lr.prototype={constructor:lr,isTexture:!0,set needsUpdate(o){!0===o&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.image=o.image,this.mipmaps=o.mipmaps.slice(0),this.mapping=o.mapping,this.wrapS=o.wrapS,this.wrapT=o.wrapT,this.magFilter=o.magFilter,this.minFilter=o.minFilter,this.anisotropy=o.anisotropy,this.format=o.format,this.type=o.type,this.offset.copy(o.offset),this.repeat.copy(o.repeat),this.generateMipmaps=o.generateMipmaps,this.premultiplyAlpha=o.premultiplyAlpha,this.flipY=o.flipY,this.unpackAlignment=o.unpackAlignment,this.encoding=o.encoding,this},toJSON:function(o){if(void 0!==o.textures[this.uuid])return o.textures[this.uuid];var v={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var x=this.image;void 0===x.uuid&&(x.uuid=An.generateUUID()),void 0===o.images[x.uuid]&&(o.images[x.uuid]={uuid:x.uuid,url:function f(P){var G;return void 0!==P.toDataURL?G=P:((G=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=P.width,G.height=P.height,G.getContext("2d").drawImage(P,0,0,P.width,P.height)),G.width>2048||G.height>2048?G.toDataURL("image/jpeg",.6):G.toDataURL("image/png")}(x)}),v.image=x.uuid}return o.textures[this.uuid]=v,v},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(o){if(this.mapping===vs){if(o.multiply(this.repeat),o.add(this.offset),o.x<0||o.x>1)switch(this.wrapS){case C:o.x=o.x-Math.floor(o.x);break;case S:o.x=o.x<0?0:1;break;case k:o.x=1===Math.abs(Math.floor(o.x)%2)?Math.ceil(o.x)-o.x:o.x-Math.floor(o.x)}if(o.y<0||o.y>1)switch(this.wrapT){case C:o.y=o.y-Math.floor(o.y);break;case S:o.y=o.y<0?0:1;break;case k:o.y=1===Math.abs(Math.floor(o.y)%2)?Math.ceil(o.y)-o.y:o.y-Math.floor(o.y)}this.flipY&&(o.y=1-o.y)}}},Object.assign(lr.prototype,ye.prototype),Pr.prototype={constructor:Pr,isVector4:!0,set:function(o,f,v,x){return this.x=o,this.y=f,this.z=v,this.w=x,this},setScalar:function(o){return this.x=o,this.y=o,this.z=o,this.w=o,this},setX:function(o){return this.x=o,this},setY:function(o){return this.y=o,this},setZ:function(o){return this.z=o,this},setW:function(o){return this.w=o,this},setComponent:function(o,f){switch(o){case 0:this.x=f;break;case 1:this.y=f;break;case 2:this.z=f;break;case 3:this.w=f;break;default:throw new Error("index is out of range: "+o)}return this},getComponent:function(o){switch(o){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+o)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(o){return this.x=o.x,this.y=o.y,this.z=o.z,this.w=void 0!==o.w?o.w:1,this},add:function(o,f){return void 0!==f?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(o,f)):(this.x+=o.x,this.y+=o.y,this.z+=o.z,this.w+=o.w,this)},addScalar:function(o){return this.x+=o,this.y+=o,this.z+=o,this.w+=o,this},addVectors:function(o,f){return this.x=o.x+f.x,this.y=o.y+f.y,this.z=o.z+f.z,this.w=o.w+f.w,this},addScaledVector:function(o,f){return this.x+=o.x*f,this.y+=o.y*f,this.z+=o.z*f,this.w+=o.w*f,this},sub:function(o,f){return void 0!==f?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(o,f)):(this.x-=o.x,this.y-=o.y,this.z-=o.z,this.w-=o.w,this)},subScalar:function(o){return this.x-=o,this.y-=o,this.z-=o,this.w-=o,this},subVectors:function(o,f){return this.x=o.x-f.x,this.y=o.y-f.y,this.z=o.z-f.z,this.w=o.w-f.w,this},multiplyScalar:function(o){return isFinite(o)?(this.x*=o,this.y*=o,this.z*=o,this.w*=o):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(o){var f=this.x,v=this.y,x=this.z,P=this.w,G=o.elements;return this.x=G[0]*f+G[4]*v+G[8]*x+G[12]*P,this.y=G[1]*f+G[5]*v+G[9]*x+G[13]*P,this.z=G[2]*f+G[6]*v+G[10]*x+G[14]*P,this.w=G[3]*f+G[7]*v+G[11]*x+G[15]*P,this},divideScalar:function(o){return this.multiplyScalar(1/o)},setAxisAngleFromQuaternion:function(o){this.w=2*Math.acos(o.w);var f=Math.sqrt(1-o.w*o.w);return f<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=o.x/f,this.y=o.y/f,this.z=o.z/f),this},setAxisAngleFromRotationMatrix:function(o){var f,v,x,P,G=.01,J=.1,se=o.elements,Fe=se[0],Me=se[4],qe=se[8],Qe=se[1],ft=se[5],mt=se[9],vt=se[2],Kt=se[6],Yt=se[10];if(Math.abs(Me-Qe)<G&&Math.abs(qe-vt)<G&&Math.abs(mt-Kt)<G){if(Math.abs(Me+Qe)<J&&Math.abs(qe+vt)<J&&Math.abs(mt+Kt)<J&&Math.abs(Fe+ft+Yt-3)<J)return this.set(1,0,0,0),this;f=Math.PI;var jt=(Fe+1)/2,cn=(ft+1)/2,fn=(Yt+1)/2,Hn=(Me+Qe)/4,Ln=(qe+vt)/4,oi=(mt+Kt)/4;return jt>cn&&jt>fn?jt<G?(v=0,x=.707106781,P=.707106781):(x=Hn/(v=Math.sqrt(jt)),P=Ln/v):cn>fn?cn<G?(v=.707106781,x=0,P=.707106781):(v=Hn/(x=Math.sqrt(cn)),P=oi/x):fn<G?(v=.707106781,x=.707106781,P=0):(v=Ln/(P=Math.sqrt(fn)),x=oi/P),this.set(v,x,P,f),this}var Jn=Math.sqrt((Kt-mt)*(Kt-mt)+(qe-vt)*(qe-vt)+(Qe-Me)*(Qe-Me));return Math.abs(Jn)<.001&&(Jn=1),this.x=(Kt-mt)/Jn,this.y=(qe-vt)/Jn,this.z=(Qe-Me)/Jn,this.w=Math.acos((Fe+ft+Yt-1)/2),this},min:function(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this.w=Math.min(this.w,o.w),this},max:function(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this.w=Math.max(this.w,o.w),this},clamp:function(o,f){return this.x=Math.max(o.x,Math.min(f.x,this.x)),this.y=Math.max(o.y,Math.min(f.y,this.y)),this.z=Math.max(o.z,Math.min(f.z,this.z)),this.w=Math.max(o.w,Math.min(f.w,this.w)),this},clampScalar:function(){var o,f;return function(x,P){return void 0===o&&(o=new Pr,f=new Pr),o.set(x,x,x,x),f.set(P,P,P,P),this.clamp(o,f)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(o){return this.x*o.x+this.y*o.y+this.z*o.z+this.w*o.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(o){return this.multiplyScalar(o/this.length())},lerp:function(o,f){return this.x+=(o.x-this.x)*f,this.y+=(o.y-this.y)*f,this.z+=(o.z-this.z)*f,this.w+=(o.w-this.w)*f,this},lerpVectors:function(o,f,v){return this.subVectors(f,o).multiplyScalar(v).add(o)},equals:function(o){return o.x===this.x&&o.y===this.y&&o.z===this.z&&o.w===this.w},fromArray:function(o,f){return void 0===f&&(f=0),this.x=o[f],this.y=o[f+1],this.z=o[f+2],this.w=o[f+3],this},toArray:function(o,f){return void 0===o&&(o=[]),void 0===f&&(f=0),o[f]=this.x,o[f+1]=this.y,o[f+2]=this.z,o[f+3]=this.w,o},fromAttribute:function(o,f,v){return void 0!==v&&console.warn("THREE.Vector4: offset has been removed from .fromAttribute()."),this.x=o.getX(f),this.y=o.getY(f),this.z=o.getZ(f),this.w=o.getW(f),this}},Object.assign(Ys.prototype,ye.prototype,{isWebGLRenderTarget:!0,setSize:function(o,f){(this.width!==o||this.height!==f)&&(this.width=o,this.height=f,this.dispose()),this.viewport.set(0,0,o,f),this.scissor.set(0,0,o,f)},clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.width=o.width,this.height=o.height,this.viewport.copy(o.viewport),this.texture=o.texture.clone(),this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,this.depthTexture=o.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(ba.prototype=Object.create(Ys.prototype)).constructor=ba,ba.prototype.isWebGLRenderTargetCube=!0,to.prototype={constructor:to,get x(){return this._x},set x(o){this._x=o,this.onChangeCallback()},get y(){return this._y},set y(o){this._y=o,this.onChangeCallback()},get z(){return this._z},set z(o){this._z=o,this.onChangeCallback()},get w(){return this._w},set w(o){this._w=o,this.onChangeCallback()},set:function(o,f,v,x){return this._x=o,this._y=f,this._z=v,this._w=x,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(o){return this._x=o.x,this._y=o.y,this._z=o.z,this._w=o.w,this.onChangeCallback(),this},setFromEuler:function(o,f){if(!1===(o&&o.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var v=Math.cos(o._x/2),x=Math.cos(o._y/2),P=Math.cos(o._z/2),G=Math.sin(o._x/2),J=Math.sin(o._y/2),se=Math.sin(o._z/2),Fe=o.order;return"XYZ"===Fe?(this._x=G*x*P+v*J*se,this._y=v*J*P-G*x*se,this._z=v*x*se+G*J*P,this._w=v*x*P-G*J*se):"YXZ"===Fe?(this._x=G*x*P+v*J*se,this._y=v*J*P-G*x*se,this._z=v*x*se-G*J*P,this._w=v*x*P+G*J*se):"ZXY"===Fe?(this._x=G*x*P-v*J*se,this._y=v*J*P+G*x*se,this._z=v*x*se+G*J*P,this._w=v*x*P-G*J*se):"ZYX"===Fe?(this._x=G*x*P-v*J*se,this._y=v*J*P+G*x*se,this._z=v*x*se-G*J*P,this._w=v*x*P+G*J*se):"YZX"===Fe?(this._x=G*x*P+v*J*se,this._y=v*J*P+G*x*se,this._z=v*x*se-G*J*P,this._w=v*x*P-G*J*se):"XZY"===Fe&&(this._x=G*x*P-v*J*se,this._y=v*J*P-G*x*se,this._z=v*x*se+G*J*P,this._w=v*x*P+G*J*se),!1!==f&&this.onChangeCallback(),this},setFromAxisAngle:function(o,f){var v=f/2,x=Math.sin(v);return this._x=o.x*x,this._y=o.y*x,this._z=o.z*x,this._w=Math.cos(v),this.onChangeCallback(),this},setFromRotationMatrix:function(o){var ft,f=o.elements,v=f[0],x=f[4],P=f[8],G=f[1],J=f[5],se=f[9],Fe=f[2],Me=f[6],qe=f[10],Qe=v+J+qe;return Qe>0?(ft=.5/Math.sqrt(Qe+1),this._w=.25/ft,this._x=(Me-se)*ft,this._y=(P-Fe)*ft,this._z=(G-x)*ft):v>J&&v>qe?(ft=2*Math.sqrt(1+v-J-qe),this._w=(Me-se)/ft,this._x=.25*ft,this._y=(x+G)/ft,this._z=(P+Fe)/ft):J>qe?(ft=2*Math.sqrt(1+J-v-qe),this._w=(P-Fe)/ft,this._x=(x+G)/ft,this._y=.25*ft,this._z=(se+Me)/ft):(ft=2*Math.sqrt(1+qe-v-J),this._w=(G-x)/ft,this._x=(P+Fe)/ft,this._y=(se+Me)/ft,this._z=.25*ft),this.onChangeCallback(),this},setFromUnitVectors:function(){var o,f;return function(P,G){return void 0===o&&(o=new Bn),(f=P.dot(G)+1)<1e-6?(f=0,Math.abs(P.x)>Math.abs(P.z)?o.set(-P.y,P.x,0):o.set(0,-P.z,P.y)):o.crossVectors(P,G),this._x=o.x,this._y=o.y,this._z=o.z,this._w=f,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(o){return this._x*o._x+this._y*o._y+this._z*o._z+this._w*o._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var o=this.length();return 0===o?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(o=1/o),this._y=this._y*o,this._z=this._z*o,this._w=this._w*o),this.onChangeCallback(),this},multiply:function(o,f){return void 0!==f?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(o,f)):this.multiplyQuaternions(this,o)},premultiply:function(o){return this.multiplyQuaternions(o,this)},multiplyQuaternions:function(o,f){var v=o._x,x=o._y,P=o._z,G=o._w,J=f._x,se=f._y,Fe=f._z,Me=f._w;return this._x=v*Me+G*J+x*Fe-P*se,this._y=x*Me+G*se+P*J-v*Fe,this._z=P*Me+G*Fe+v*se-x*J,this._w=G*Me-v*J-x*se-P*Fe,this.onChangeCallback(),this},slerp:function(o,f){if(0===f)return this;if(1===f)return this.copy(o);var v=this._x,x=this._y,P=this._z,G=this._w,J=G*o._w+v*o._x+x*o._y+P*o._z;if(J<0?(this._w=-o._w,this._x=-o._x,this._y=-o._y,this._z=-o._z,J=-J):this.copy(o),J>=1)return this._w=G,this._x=v,this._y=x,this._z=P,this;var se=Math.sqrt(1-J*J);if(Math.abs(se)<.001)return this._w=.5*(G+this._w),this._x=.5*(v+this._x),this._y=.5*(x+this._y),this._z=.5*(P+this._z),this;var Fe=Math.atan2(se,J),Me=Math.sin((1-f)*Fe)/se,qe=Math.sin(f*Fe)/se;return this._w=G*Me+this._w*qe,this._x=v*Me+this._x*qe,this._y=x*Me+this._y*qe,this._z=P*Me+this._z*qe,this.onChangeCallback(),this},equals:function(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._w===this._w},fromArray:function(o,f){return void 0===f&&(f=0),this._x=o[f],this._y=o[f+1],this._z=o[f+2],this._w=o[f+3],this.onChangeCallback(),this},toArray:function(o,f){return void 0===o&&(o=[]),void 0===f&&(f=0),o[f]=this._x,o[f+1]=this._y,o[f+2]=this._z,o[f+3]=this._w,o},onChange:function(o){return this.onChangeCallback=o,this},onChangeCallback:function(){}},Object.assign(to,{slerp:function(o,f,v,x){return v.copy(o).slerp(f,x)},slerpFlat:function(o,f,v,x,P,G,J){var se=v[x+0],Fe=v[x+1],Me=v[x+2],qe=v[x+3],Qe=P[G+0],ft=P[G+1],mt=P[G+2],vt=P[G+3];if(qe!==vt||se!==Qe||Fe!==ft||Me!==mt){var Kt=1-J,Yt=se*Qe+Fe*ft+Me*mt+qe*vt,jt=Yt>=0?1:-1,cn=1-Yt*Yt;if(cn>Number.EPSILON){var fn=Math.sqrt(cn),Hn=Math.atan2(fn,Yt*jt);Kt=Math.sin(Kt*Hn)/fn,J=Math.sin(J*Hn)/fn}var Ln=J*jt;if(se=se*Kt+Qe*Ln,Fe=Fe*Kt+ft*Ln,Me=Me*Kt+mt*Ln,qe=qe*Kt+vt*Ln,Kt===1-J){var oi=1/Math.sqrt(se*se+Fe*Fe+Me*Me+qe*qe);se*=oi,Fe*=oi,Me*=oi,qe*=oi}}o[f]=se,o[f+1]=Fe,o[f+2]=Me,o[f+3]=qe}}),Bn.prototype={constructor:Bn,isVector3:!0,set:function(o,f,v){return this.x=o,this.y=f,this.z=v,this},setScalar:function(o){return this.x=o,this.y=o,this.z=o,this},setX:function(o){return this.x=o,this},setY:function(o){return this.y=o,this},setZ:function(o){return this.z=o,this},setComponent:function(o,f){switch(o){case 0:this.x=f;break;case 1:this.y=f;break;case 2:this.z=f;break;default:throw new Error("index is out of range: "+o)}return this},getComponent:function(o){switch(o){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+o)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(o){return this.x=o.x,this.y=o.y,this.z=o.z,this},add:function(o,f){return void 0!==f?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(o,f)):(this.x+=o.x,this.y+=o.y,this.z+=o.z,this)},addScalar:function(o){return this.x+=o,this.y+=o,this.z+=o,this},addVectors:function(o,f){return this.x=o.x+f.x,this.y=o.y+f.y,this.z=o.z+f.z,this},addScaledVector:function(o,f){return this.x+=o.x*f,this.y+=o.y*f,this.z+=o.z*f,this},sub:function(o,f){return void 0!==f?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(o,f)):(this.x-=o.x,this.y-=o.y,this.z-=o.z,this)},subScalar:function(o){return this.x-=o,this.y-=o,this.z-=o,this},subVectors:function(o,f){return this.x=o.x-f.x,this.y=o.y-f.y,this.z=o.z-f.z,this},multiply:function(o,f){return void 0!==f?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(o,f)):(this.x*=o.x,this.y*=o.y,this.z*=o.z,this)},multiplyScalar:function(o){return isFinite(o)?(this.x*=o,this.y*=o,this.z*=o):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(o,f){return this.x=o.x*f.x,this.y=o.y*f.y,this.z=o.z*f.z,this},applyEuler:function(){var o;return function(v){return!1===(v&&v.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===o&&(o=new to),this.applyQuaternion(o.setFromEuler(v))}}(),applyAxisAngle:function(){var o;return function(v,x){return void 0===o&&(o=new to),this.applyQuaternion(o.setFromAxisAngle(v,x))}}(),applyMatrix3:function(o){var f=this.x,v=this.y,x=this.z,P=o.elements;return this.x=P[0]*f+P[3]*v+P[6]*x,this.y=P[1]*f+P[4]*v+P[7]*x,this.z=P[2]*f+P[5]*v+P[8]*x,this},applyMatrix4:function(o){var f=this.x,v=this.y,x=this.z,P=o.elements;return this.x=P[0]*f+P[4]*v+P[8]*x+P[12],this.y=P[1]*f+P[5]*v+P[9]*x+P[13],this.z=P[2]*f+P[6]*v+P[10]*x+P[14],this},applyProjection:function(o){var f=this.x,v=this.y,x=this.z,P=o.elements,G=1/(P[3]*f+P[7]*v+P[11]*x+P[15]);return this.x=(P[0]*f+P[4]*v+P[8]*x+P[12])*G,this.y=(P[1]*f+P[5]*v+P[9]*x+P[13])*G,this.z=(P[2]*f+P[6]*v+P[10]*x+P[14])*G,this},applyQuaternion:function(o){var f=this.x,v=this.y,x=this.z,P=o.x,G=o.y,J=o.z,se=o.w,Fe=se*f+G*x-J*v,Me=se*v+J*f-P*x,qe=se*x+P*v-G*f,Qe=-P*f-G*v-J*x;return this.x=Fe*se+Qe*-P+Me*-J-qe*-G,this.y=Me*se+Qe*-G+qe*-P-Fe*-J,this.z=qe*se+Qe*-J+Fe*-G-Me*-P,this},project:function(){var o;return function(v){return void 0===o&&(o=new Zs),o.multiplyMatrices(v.projectionMatrix,o.getInverse(v.matrixWorld)),this.applyProjection(o)}}(),unproject:function(){var o;return function(v){return void 0===o&&(o=new Zs),o.multiplyMatrices(v.matrixWorld,o.getInverse(v.projectionMatrix)),this.applyProjection(o)}}(),transformDirection:function(o){var f=this.x,v=this.y,x=this.z,P=o.elements;return this.x=P[0]*f+P[4]*v+P[8]*x,this.y=P[1]*f+P[5]*v+P[9]*x,this.z=P[2]*f+P[6]*v+P[10]*x,this.normalize()},divide:function(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z,this},divideScalar:function(o){return this.multiplyScalar(1/o)},min:function(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this},max:function(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this},clamp:function(o,f){return this.x=Math.max(o.x,Math.min(f.x,this.x)),this.y=Math.max(o.y,Math.min(f.y,this.y)),this.z=Math.max(o.z,Math.min(f.z,this.z)),this},clampScalar:function(){var o,f;return function(x,P){return void 0===o&&(o=new Bn,f=new Bn),o.set(x,x,x),f.set(P,P,P),this.clamp(o,f)}}(),clampLength:function(o,f){var v=this.length();return this.multiplyScalar(Math.max(o,Math.min(f,v))/v)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(o){return this.x*o.x+this.y*o.y+this.z*o.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(o){return this.multiplyScalar(o/this.length())},lerp:function(o,f){return this.x+=(o.x-this.x)*f,this.y+=(o.y-this.y)*f,this.z+=(o.z-this.z)*f,this},lerpVectors:function(o,f,v){return this.subVectors(f,o).multiplyScalar(v).add(o)},cross:function(o,f){if(void 0!==f)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(o,f);var v=this.x,x=this.y,P=this.z;return this.x=x*o.z-P*o.y,this.y=P*o.x-v*o.z,this.z=v*o.y-x*o.x,this},crossVectors:function(o,f){var v=o.x,x=o.y,P=o.z,G=f.x,J=f.y,se=f.z;return this.x=x*se-P*J,this.y=P*G-v*se,this.z=v*J-x*G,this},projectOnVector:function(o){var f=o.dot(this)/o.lengthSq();return this.copy(o).multiplyScalar(f)},projectOnPlane:function(){var o;return function(v){return void 0===o&&(o=new Bn),o.copy(this).projectOnVector(v),this.sub(o)}}(),reflect:function(){var o;return function(v){return void 0===o&&(o=new Bn),this.sub(o.copy(v).multiplyScalar(2*this.dot(v)))}}(),angleTo:function(o){var f=this.dot(o)/Math.sqrt(this.lengthSq()*o.lengthSq());return Math.acos(An.clamp(f,-1,1))},distanceTo:function(o){return Math.sqrt(this.distanceToSquared(o))},distanceToSquared:function(o){var f=this.x-o.x,v=this.y-o.y,x=this.z-o.z;return f*f+v*v+x*x},distanceToManhattan:function(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)+Math.abs(this.z-o.z)},setFromSpherical:function(o){var f=Math.sin(o.phi)*o.radius;return this.x=f*Math.sin(o.theta),this.y=Math.cos(o.phi)*o.radius,this.z=f*Math.cos(o.theta),this},setFromCylindrical:function(o){return this.x=o.radius*Math.sin(o.theta),this.y=o.y,this.z=o.radius*Math.cos(o.theta),this},setFromMatrixPosition:function(o){return this.setFromMatrixColumn(o,3)},setFromMatrixScale:function(o){var f=this.setFromMatrixColumn(o,0).length(),v=this.setFromMatrixColumn(o,1).length(),x=this.setFromMatrixColumn(o,2).length();return this.x=f,this.y=v,this.z=x,this},setFromMatrixColumn:function(o,f){if("number"==typeof o){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var v=o;o=f,f=v}return this.fromArray(o.elements,4*f)},equals:function(o){return o.x===this.x&&o.y===this.y&&o.z===this.z},fromArray:function(o,f){return void 0===f&&(f=0),this.x=o[f],this.y=o[f+1],this.z=o[f+2],this},toArray:function(o,f){return void 0===o&&(o=[]),void 0===f&&(f=0),o[f]=this.x,o[f+1]=this.y,o[f+2]=this.z,o},fromAttribute:function(o,f,v){return void 0!==v&&console.warn("THREE.Vector3: offset has been removed from .fromAttribute()."),this.x=o.getX(f),this.y=o.getY(f),this.z=o.getZ(f),this}},Zs.prototype={constructor:Zs,isMatrix4:!0,set:function(o,f,v,x,P,G,J,se,Fe,Me,qe,Qe,ft,mt,vt,Kt){var Yt=this.elements;return Yt[0]=o,Yt[4]=f,Yt[8]=v,Yt[12]=x,Yt[1]=P,Yt[5]=G,Yt[9]=J,Yt[13]=se,Yt[2]=Fe,Yt[6]=Me,Yt[10]=qe,Yt[14]=Qe,Yt[3]=ft,Yt[7]=mt,Yt[11]=vt,Yt[15]=Kt,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Zs).fromArray(this.elements)},copy:function(o){return this.elements.set(o.elements),this},copyPosition:function(o){var f=this.elements,v=o.elements;return f[12]=v[12],f[13]=v[13],f[14]=v[14],this},extractBasis:function(o,f,v){return o.setFromMatrixColumn(this,0),f.setFromMatrixColumn(this,1),v.setFromMatrixColumn(this,2),this},makeBasis:function(o,f,v){return this.set(o.x,f.x,v.x,0,o.y,f.y,v.y,0,o.z,f.z,v.z,0,0,0,0,1),this},extractRotation:function(){var o;return function(v){void 0===o&&(o=new Bn);var x=this.elements,P=v.elements,G=1/o.setFromMatrixColumn(v,0).length(),J=1/o.setFromMatrixColumn(v,1).length(),se=1/o.setFromMatrixColumn(v,2).length();return x[0]=P[0]*G,x[1]=P[1]*G,x[2]=P[2]*G,x[4]=P[4]*J,x[5]=P[5]*J,x[6]=P[6]*J,x[8]=P[8]*se,x[9]=P[9]*se,x[10]=P[10]*se,this}}(),makeRotationFromEuler:function(o){!1===(o&&o.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var f=this.elements,v=o.x,x=o.y,P=o.z,G=Math.cos(v),J=Math.sin(v),se=Math.cos(x),Fe=Math.sin(x),Me=Math.cos(P),qe=Math.sin(P);if("XYZ"===o.order){var Qe=G*Me,ft=G*qe,mt=J*Me,vt=J*qe;f[0]=se*Me,f[4]=-se*qe,f[8]=Fe,f[1]=ft+mt*Fe,f[5]=Qe-vt*Fe,f[9]=-J*se,f[2]=vt-Qe*Fe,f[6]=mt+ft*Fe,f[10]=G*se}else if("YXZ"===o.order){var Yt=se*qe,jt=Fe*Me;f[0]=(Kt=se*Me)+(cn=Fe*qe)*J,f[4]=jt*J-Yt,f[8]=G*Fe,f[1]=G*qe,f[5]=G*Me,f[9]=-J,f[2]=Yt*J-jt,f[6]=cn+Kt*J,f[10]=G*se}else if("ZXY"===o.order){var Kt,cn;Yt=se*qe,jt=Fe*Me,f[0]=(Kt=se*Me)-(cn=Fe*qe)*J,f[4]=-G*qe,f[8]=jt+Yt*J,f[1]=Yt+jt*J,f[5]=G*Me,f[9]=cn-Kt*J,f[2]=-G*Fe,f[6]=J,f[10]=G*se}else if("ZYX"===o.order)Qe=G*Me,ft=G*qe,mt=J*Me,vt=J*qe,f[0]=se*Me,f[4]=mt*Fe-ft,f[8]=Qe*Fe+vt,f[1]=se*qe,f[5]=vt*Fe+Qe,f[9]=ft*Fe-mt,f[2]=-Fe,f[6]=J*se,f[10]=G*se;else if("YZX"===o.order){var fn=G*se,Hn=G*Fe,Ln=J*se,oi=J*Fe;f[0]=se*Me,f[4]=oi-fn*qe,f[8]=Ln*qe+Hn,f[1]=qe,f[5]=G*Me,f[9]=-J*Me,f[2]=-Fe*Me,f[6]=Hn*qe+Ln,f[10]=fn-oi*qe}else"XZY"===o.order&&(fn=G*se,Hn=G*Fe,Ln=J*se,oi=J*Fe,f[0]=se*Me,f[4]=-qe,f[8]=Fe*Me,f[1]=fn*qe+oi,f[5]=G*Me,f[9]=Hn*qe-Ln,f[2]=Ln*qe-Hn,f[6]=J*Me,f[10]=oi*qe+fn);return f[3]=0,f[7]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,this},makeRotationFromQuaternion:function(o){var f=this.elements,v=o.x,x=o.y,P=o.z,G=o.w,J=v+v,se=x+x,Fe=P+P,Me=v*J,qe=v*se,Qe=v*Fe,ft=x*se,mt=x*Fe,vt=P*Fe,Kt=G*J,Yt=G*se,jt=G*Fe;return f[0]=1-(ft+vt),f[4]=qe-jt,f[8]=Qe+Yt,f[1]=qe+jt,f[5]=1-(Me+vt),f[9]=mt-Kt,f[2]=Qe-Yt,f[6]=mt+Kt,f[10]=1-(Me+ft),f[3]=0,f[7]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,this},lookAt:function(){var o,f,v;return function(P,G,J){void 0===o&&(o=new Bn,f=new Bn,v=new Bn);var se=this.elements;return v.subVectors(P,G).normalize(),0===v.lengthSq()&&(v.z=1),o.crossVectors(J,v).normalize(),0===o.lengthSq()&&(v.z+=1e-4,o.crossVectors(J,v).normalize()),f.crossVectors(v,o),se[0]=o.x,se[4]=f.x,se[8]=v.x,se[1]=o.y,se[5]=f.y,se[9]=v.y,se[2]=o.z,se[6]=f.z,se[10]=v.z,this}}(),multiply:function(o,f){return void 0!==f?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(o,f)):this.multiplyMatrices(this,o)},premultiply:function(o){return this.multiplyMatrices(o,this)},multiplyMatrices:function(o,f){var v=o.elements,x=f.elements,P=this.elements,G=v[0],J=v[4],se=v[8],Fe=v[12],Me=v[1],qe=v[5],Qe=v[9],ft=v[13],mt=v[2],vt=v[6],Kt=v[10],Yt=v[14],jt=v[3],cn=v[7],fn=v[11],Hn=v[15],Ln=x[0],oi=x[4],Jn=x[8],Xn=x[12],ci=x[1],Li=x[5],Tr=x[9],dr=x[13],zn=x[2],Un=x[6],Gi=x[10],tr=x[14],Mr=x[3],xr=x[7],gr=x[11],fs=x[15];return P[0]=G*Ln+J*ci+se*zn+Fe*Mr,P[4]=G*oi+J*Li+se*Un+Fe*xr,P[8]=G*Jn+J*Tr+se*Gi+Fe*gr,P[12]=G*Xn+J*dr+se*tr+Fe*fs,P[1]=Me*Ln+qe*ci+Qe*zn+ft*Mr,P[5]=Me*oi+qe*Li+Qe*Un+ft*xr,P[9]=Me*Jn+qe*Tr+Qe*Gi+ft*gr,P[13]=Me*Xn+qe*dr+Qe*tr+ft*fs,P[2]=mt*Ln+vt*ci+Kt*zn+Yt*Mr,P[6]=mt*oi+vt*Li+Kt*Un+Yt*xr,P[10]=mt*Jn+vt*Tr+Kt*Gi+Yt*gr,P[14]=mt*Xn+vt*dr+Kt*tr+Yt*fs,P[3]=jt*Ln+cn*ci+fn*zn+Hn*Mr,P[7]=jt*oi+cn*Li+fn*Un+Hn*xr,P[11]=jt*Jn+cn*Tr+fn*Gi+Hn*gr,P[15]=jt*Xn+cn*dr+fn*tr+Hn*fs,this},multiplyToArray:function(o,f,v){var x=this.elements;return this.multiplyMatrices(o,f),v[0]=x[0],v[1]=x[1],v[2]=x[2],v[3]=x[3],v[4]=x[4],v[5]=x[5],v[6]=x[6],v[7]=x[7],v[8]=x[8],v[9]=x[9],v[10]=x[10],v[11]=x[11],v[12]=x[12],v[13]=x[13],v[14]=x[14],v[15]=x[15],this},multiplyScalar:function(o){var f=this.elements;return f[0]*=o,f[4]*=o,f[8]*=o,f[12]*=o,f[1]*=o,f[5]*=o,f[9]*=o,f[13]*=o,f[2]*=o,f[6]*=o,f[10]*=o,f[14]*=o,f[3]*=o,f[7]*=o,f[11]*=o,f[15]*=o,this},applyToVector3Array:function(){var o;return function(v,x,P){void 0===o&&(o=new Bn),void 0===x&&(x=0),void 0===P&&(P=v.length);for(var G=0,J=x;G<P;G+=3,J+=3)o.fromArray(v,J),o.applyMatrix4(this),o.toArray(v,J);return v}}(),applyToBufferAttribute:function(){var o;return function(v){void 0===o&&(o=new Bn);for(var x=0,P=v.count;x<P;x++)o.x=v.getX(x),o.y=v.getY(x),o.z=v.getZ(x),o.applyMatrix4(this),v.setXYZ(x,o.x,o.y,o.z);return v}}(),determinant:function(){var o=this.elements,f=o[0],v=o[4],x=o[8],P=o[12],G=o[1],J=o[5],se=o[9],Fe=o[13],Me=o[2],qe=o[6],Qe=o[10],ft=o[14];return o[3]*(+P*se*qe-x*Fe*qe-P*J*Qe+v*Fe*Qe+x*J*ft-v*se*ft)+o[7]*(+f*se*ft-f*Fe*Qe+P*G*Qe-x*G*ft+x*Fe*Me-P*se*Me)+o[11]*(+f*Fe*qe-f*J*ft-P*G*qe+v*G*ft+P*J*Me-v*Fe*Me)+o[15]*(-x*J*Me-f*se*qe+f*J*Qe+x*G*qe-v*G*Qe+v*se*Me)},transpose:function(){var f,o=this.elements;return f=o[1],o[1]=o[4],o[4]=f,f=o[2],o[2]=o[8],o[8]=f,f=o[6],o[6]=o[9],o[9]=f,f=o[3],o[3]=o[12],o[12]=f,f=o[7],o[7]=o[13],o[13]=f,f=o[11],o[11]=o[14],o[14]=f,this},setPosition:function(o){var f=this.elements;return f[12]=o.x,f[13]=o.y,f[14]=o.z,this},getInverse:function(o,f){var v=this.elements,x=o.elements,P=x[0],G=x[1],J=x[2],se=x[3],Fe=x[4],Me=x[5],qe=x[6],Qe=x[7],ft=x[8],mt=x[9],vt=x[10],Kt=x[11],Yt=x[12],jt=x[13],cn=x[14],fn=x[15],Hn=mt*cn*Qe-jt*vt*Qe+jt*qe*Kt-Me*cn*Kt-mt*qe*fn+Me*vt*fn,Ln=Yt*vt*Qe-ft*cn*Qe-Yt*qe*Kt+Fe*cn*Kt+ft*qe*fn-Fe*vt*fn,oi=ft*jt*Qe-Yt*mt*Qe+Yt*Me*Kt-Fe*jt*Kt-ft*Me*fn+Fe*mt*fn,Jn=Yt*mt*qe-ft*jt*qe-Yt*Me*vt+Fe*jt*vt+ft*Me*cn-Fe*mt*cn,Xn=P*Hn+G*Ln+J*oi+se*Jn;if(0===Xn){var ci="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===f)throw new Error(ci);return console.warn(ci),this.identity()}var Li=1/Xn;return v[0]=Hn*Li,v[1]=(jt*vt*se-mt*cn*se-jt*J*Kt+G*cn*Kt+mt*J*fn-G*vt*fn)*Li,v[2]=(Me*cn*se-jt*qe*se+jt*J*Qe-G*cn*Qe-Me*J*fn+G*qe*fn)*Li,v[3]=(mt*qe*se-Me*vt*se-mt*J*Qe+G*vt*Qe+Me*J*Kt-G*qe*Kt)*Li,v[4]=Ln*Li,v[5]=(ft*cn*se-Yt*vt*se+Yt*J*Kt-P*cn*Kt-ft*J*fn+P*vt*fn)*Li,v[6]=(Yt*qe*se-Fe*cn*se-Yt*J*Qe+P*cn*Qe+Fe*J*fn-P*qe*fn)*Li,v[7]=(Fe*vt*se-ft*qe*se+ft*J*Qe-P*vt*Qe-Fe*J*Kt+P*qe*Kt)*Li,v[8]=oi*Li,v[9]=(Yt*mt*se-ft*jt*se-Yt*G*Kt+P*jt*Kt+ft*G*fn-P*mt*fn)*Li,v[10]=(Fe*jt*se-Yt*Me*se+Yt*G*Qe-P*jt*Qe-Fe*G*fn+P*Me*fn)*Li,v[11]=(ft*Me*se-Fe*mt*se-ft*G*Qe+P*mt*Qe+Fe*G*Kt-P*Me*Kt)*Li,v[12]=Jn*Li,v[13]=(ft*jt*J-Yt*mt*J+Yt*G*vt-P*jt*vt-ft*G*cn+P*mt*cn)*Li,v[14]=(Yt*Me*J-Fe*jt*J-Yt*G*qe+P*jt*qe+Fe*G*cn-P*Me*cn)*Li,v[15]=(Fe*mt*J-ft*Me*J+ft*G*qe-P*mt*qe-Fe*G*vt+P*Me*vt)*Li,this},scale:function(o){var f=this.elements,v=o.x,x=o.y,P=o.z;return f[0]*=v,f[4]*=x,f[8]*=P,f[1]*=v,f[5]*=x,f[9]*=P,f[2]*=v,f[6]*=x,f[10]*=P,f[3]*=v,f[7]*=x,f[11]*=P,this},getMaxScaleOnAxis:function(){var o=this.elements;return Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1]+o[2]*o[2],o[4]*o[4]+o[5]*o[5]+o[6]*o[6],o[8]*o[8]+o[9]*o[9]+o[10]*o[10]))},makeTranslation:function(o,f,v){return this.set(1,0,0,o,0,1,0,f,0,0,1,v,0,0,0,1),this},makeRotationX:function(o){var f=Math.cos(o),v=Math.sin(o);return this.set(1,0,0,0,0,f,-v,0,0,v,f,0,0,0,0,1),this},makeRotationY:function(o){var f=Math.cos(o),v=Math.sin(o);return this.set(f,0,v,0,0,1,0,0,-v,0,f,0,0,0,0,1),this},makeRotationZ:function(o){var f=Math.cos(o),v=Math.sin(o);return this.set(f,-v,0,0,v,f,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(o,f){var v=Math.cos(f),x=Math.sin(f),P=1-v,G=o.x,J=o.y,se=o.z,Fe=P*G,Me=P*J;return this.set(Fe*G+v,Fe*J-x*se,Fe*se+x*J,0,Fe*J+x*se,Me*J+v,Me*se-x*G,0,Fe*se-x*J,Me*se+x*G,P*se*se+v,0,0,0,0,1),this},makeScale:function(o,f,v){return this.set(o,0,0,0,0,f,0,0,0,0,v,0,0,0,0,1),this},makeShear:function(o,f,v){return this.set(1,f,v,0,o,1,v,0,o,f,1,0,0,0,0,1),this},compose:function(o,f,v){return this.makeRotationFromQuaternion(f),this.scale(v),this.setPosition(o),this},decompose:function(){var o,f;return function(x,P,G){void 0===o&&(o=new Bn,f=new Zs);var J=this.elements,se=o.set(J[0],J[1],J[2]).length(),Fe=o.set(J[4],J[5],J[6]).length(),Me=o.set(J[8],J[9],J[10]).length();this.determinant()<0&&(se=-se),x.x=J[12],x.y=J[13],x.z=J[14],f.elements.set(this.elements);var Qe=1/se,ft=1/Fe,mt=1/Me;return f.elements[0]*=Qe,f.elements[1]*=Qe,f.elements[2]*=Qe,f.elements[4]*=ft,f.elements[5]*=ft,f.elements[6]*=ft,f.elements[8]*=mt,f.elements[9]*=mt,f.elements[10]*=mt,P.setFromRotationMatrix(f),G.x=se,G.y=Fe,G.z=Me,this}}(),makeFrustum:function(o,f,v,x,P,G){var J=this.elements,Fe=2*P/(x-v),Me=(f+o)/(f-o),qe=(x+v)/(x-v),Qe=-(G+P)/(G-P),ft=-2*G*P/(G-P);return J[0]=2*P/(f-o),J[4]=0,J[8]=Me,J[12]=0,J[1]=0,J[5]=Fe,J[9]=qe,J[13]=0,J[2]=0,J[6]=0,J[10]=Qe,J[14]=ft,J[3]=0,J[7]=0,J[11]=-1,J[15]=0,this},makePerspective:function(o,f,v,x){var P=v*Math.tan(An.DEG2RAD*o*.5),G=-P;return this.makeFrustum(G*f,P*f,G,P,v,x)},makeOrthographic:function(o,f,v,x,P,G){var J=this.elements,se=1/(f-o),Fe=1/(v-x),Me=1/(G-P),qe=(f+o)*se,Qe=(v+x)*Fe,ft=(G+P)*Me;return J[0]=2*se,J[4]=0,J[8]=0,J[12]=-qe,J[1]=0,J[5]=2*Fe,J[9]=0,J[13]=-Qe,J[2]=0,J[6]=0,J[10]=-2*Me,J[14]=-ft,J[3]=0,J[7]=0,J[11]=0,J[15]=1,this},equals:function(o){for(var f=this.elements,v=o.elements,x=0;x<16;x++)if(f[x]!==v[x])return!1;return!0},fromArray:function(o,f){void 0===f&&(f=0);for(var v=0;v<16;v++)this.elements[v]=o[v+f];return this},toArray:function(o,f){void 0===o&&(o=[]),void 0===f&&(f=0);var v=this.elements;return o[f]=v[0],o[f+1]=v[1],o[f+2]=v[2],o[f+3]=v[3],o[f+4]=v[4],o[f+5]=v[5],o[f+6]=v[6],o[f+7]=v[7],o[f+8]=v[8],o[f+9]=v[9],o[f+10]=v[10],o[f+11]=v[11],o[f+12]=v[12],o[f+13]=v[13],o[f+14]=v[14],o[f+15]=v[15],o}},(Zl.prototype=Object.create(lr.prototype)).constructor=Zl,Zl.prototype.isCubeTexture=!0,Object.defineProperty(Zl.prototype,"images",{get:function(){return this.image},set:function(o){this.image=o}});var mc=new lr,Ql=new Zl;function Pu(){this.seq=[],this.map={}}var xl=[],$a=[];function th(o,f,v){var x=o[0];if(x<=0||x>0)return o;var P=f*v,G=xl[P];if(void 0===G&&(G=new Float32Array(P),xl[P]=G),0!==f){x.toArray(G,0);for(var J=1,se=0;J!==f;++J)o[J].toArray(G,se+=v)}return G}function lm(o,f){var v=$a[f];void 0===v&&(v=new Int32Array(f),$a[f]=v);for(var x=0;x!==f;++x)v[x]=o.allocTextureUnit();return v}function Cu(o,f){o.uniform1f(this.addr,f)}function Zr(o,f){o.uniform1i(this.addr,f)}function op(o,f){void 0===f.x?o.uniform2fv(this.addr,f):o.uniform2f(this.addr,f.x,f.y)}function Ps(o,f){void 0!==f.x?o.uniform3f(this.addr,f.x,f.y,f.z):void 0!==f.r?o.uniform3f(this.addr,f.r,f.g,f.b):o.uniform3fv(this.addr,f)}function Gu(o,f){void 0===f.x?o.uniform4fv(this.addr,f):o.uniform4f(this.addr,f.x,f.y,f.z,f.w)}function um(o,f){o.uniformMatrix2fv(this.addr,!1,f.elements||f)}function Qm(o,f){o.uniformMatrix3fv(this.addr,!1,f.elements||f)}function Al(o,f){o.uniformMatrix4fv(this.addr,!1,f.elements||f)}function ul(o,f,v){var x=v.allocTextureUnit();o.uniform1i(this.addr,x),v.setTexture2D(f||mc,x)}function Mf(o,f,v){var x=v.allocTextureUnit();o.uniform1i(this.addr,x),v.setTextureCube(f||Ql,x)}function lp(o,f){o.uniform2iv(this.addr,f)}function vg(o,f){o.uniform3iv(this.addr,f)}function _g(o,f){o.uniform4iv(this.addr,f)}function cm(o,f){o.uniform1fv(this.addr,f)}function yg(o,f){o.uniform1iv(this.addr,f)}function Wu(o,f){o.uniform2fv(this.addr,th(f,this.size,2))}function Lu(o,f){o.uniform3fv(this.addr,th(f,this.size,3))}function qv(o,f){o.uniform4fv(this.addr,th(f,this.size,4))}function nh(o,f){o.uniformMatrix2fv(this.addr,!1,th(f,this.size,4))}function vc(o,f){o.uniformMatrix3fv(this.addr,!1,th(f,this.size,9))}function Jm(o,f){o.uniformMatrix4fv(this.addr,!1,th(f,this.size,16))}function Bh(o,f,v){var x=f.length,P=lm(v,x);o.uniform1iv(this.addr,P);for(var G=0;G!==x;++G)v.setTexture2D(f[G]||mc,P[G])}function fl(o,f,v){var x=f.length,P=lm(v,x);o.uniform1iv(this.addr,P);for(var G=0;G!==x;++G)v.setTextureCube(f[G]||Ql,P[G])}function ev(o,f,v){this.id=o,this.addr=v,this.setValue=function ua(o){switch(o){case 5126:return Cu;case 35664:return op;case 35665:return Ps;case 35666:return Gu;case 35674:return um;case 35675:return Qm;case 35676:return Al;case 35678:return ul;case 35680:return Mf;case 5124:case 35670:return Zr;case 35667:case 35671:return lp;case 35668:case 35672:return vg;case 35669:case 35673:return _g}}(f.type)}function tv(o,f,v){this.id=o,this.addr=v,this.size=f.size,this.setValue=function ho(o){switch(o){case 5126:return cm;case 35664:return Wu;case 35665:return Lu;case 35666:return qv;case 35674:return nh;case 35675:return vc;case 35676:return Jm;case 35678:return Bh;case 35680:return fl;case 5124:case 35670:return yg;case 35667:case 35671:return lp;case 35668:case 35672:return vg;case 35669:case 35673:return _g}}(f.type)}function gh(o){this.id=o,Pu.call(this)}gh.prototype.setValue=function(o,f){for(var v=this.seq,x=0,P=v.length;x!==P;++x){var G=v[x];G.setValue(o,f[G.id])}};var no=/([\w\d_]+)(\])?(\[|\.)?/g;function pl(o,f){o.seq.push(f),o.map[f.id]=f}function Kd(o,f,v){var x=o.name,P=x.length;for(no.lastIndex=0;;){var G=no.exec(x),se=G[1],Me=G[3];if("]"===G[2]&&(se|=0),void 0===Me||"["===Me&&no.lastIndex+2===P){pl(v,void 0===Me?new ev(se,o,f):new tv(se,o,f));break}var Qe=v.map[se];void 0===Qe&&pl(v,Qe=new gh(se)),v=Qe}}function tl(o,f,v){Pu.call(this),this.renderer=v;for(var x=o.getProgramParameter(f,o.ACTIVE_UNIFORMS),P=0;P!==x;++P){var G=o.getActiveUniform(f,P);Kd(G,o.getUniformLocation(f,G.name),this)}}tl.prototype.setValue=function(o,f,v){var x=this.map[f];void 0!==x&&x.setValue(o,v,this.renderer)},tl.prototype.set=function(o,f,v){var x=this.map[v];void 0!==x&&x.setValue(o,f[v],this.renderer)},tl.prototype.setOptional=function(o,f,v){var x=f[v];void 0!==x&&this.setValue(o,v,x)},tl.upload=function(o,f,v,x){for(var P=0,G=f.length;P!==G;++P){var J=f[P],se=v[J.id];!1!==se.needsUpdate&&J.setValue(o,se.value,x)}},tl.seqWithValue=function(o,f){for(var v=[],x=0,P=o.length;x!==P;++x){var G=o[x];G.id in f&&v.push(G)}return v};var Ul={merge:function(o){for(var f={},v=0;v<o.length;v++){var x=this.clone(o[v]);for(var P in x)f[P]=x[P]}return f},clone:function(o){var f={};for(var v in o)for(var x in f[v]={},o[v]){var P=o[v][x];f[v][x]=P&&(P.isColor||P.isMatrix3||P.isMatrix4||P.isVector2||P.isVector3||P.isVector4||P.isTexture)?P.clone():Array.isArray(P)?P.slice():P}return f}},io={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#include <premultiplied_alpha_fragment>\n\t#include <encodings_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};function na(o,f,v){return void 0===f&&void 0===v?this.set(o):this.setRGB(o,f,v)}na.prototype={constructor:na,isColor:!0,r:1,g:1,b:1,set:function(o){return o&&o.isColor?this.copy(o):"number"==typeof o?this.setHex(o):"string"==typeof o&&this.setStyle(o),this},setScalar:function(o){return this.r=o,this.g=o,this.b=o,this},setHex:function(o){return o=Math.floor(o),this.r=(o>>16&255)/255,this.g=(o>>8&255)/255,this.b=(255&o)/255,this},setRGB:function(o,f,v){return this.r=o,this.g=f,this.b=v,this},setHSL:function(){function o(f,v,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?f+6*(v-f)*x:x<.5?v:x<2/3?f+6*(v-f)*(2/3-x):f}return function(v,x,P){if(v=An.euclideanModulo(v,1),x=An.clamp(x,0,1),P=An.clamp(P,0,1),0===x)this.r=this.g=this.b=P;else{var G=P<=.5?P*(1+x):P+x-P*x,J=2*P-G;this.r=o(J,G,v+1/3),this.g=o(J,G,v),this.b=o(J,G,v-1/3)}return this}}(),setStyle:function(o){function f(Qe){void 0!==Qe&&parseFloat(Qe)<1&&console.warn("THREE.Color: Alpha component of "+o+" will be ignored.")}var v;if(v=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(o)){var x,G=v[2];switch(v[1]){case"rgb":case"rgba":if(x=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(G))return this.r=Math.min(255,parseInt(x[1],10))/255,this.g=Math.min(255,parseInt(x[2],10))/255,this.b=Math.min(255,parseInt(x[3],10))/255,f(x[5]),this;if(x=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(G))return this.r=Math.min(100,parseInt(x[1],10))/100,this.g=Math.min(100,parseInt(x[2],10))/100,this.b=Math.min(100,parseInt(x[3],10))/100,f(x[5]),this;break;case"hsl":case"hsla":if(x=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(G)){var J=parseFloat(x[1])/360,se=parseInt(x[2],10)/100,Fe=parseInt(x[3],10)/100;return f(x[5]),this.setHSL(J,se,Fe)}}}else if(v=/^\#([A-Fa-f0-9]+)$/.exec(o)){var Me,qe=(Me=v[1]).length;if(3===qe)return this.r=parseInt(Me.charAt(0)+Me.charAt(0),16)/255,this.g=parseInt(Me.charAt(1)+Me.charAt(1),16)/255,this.b=parseInt(Me.charAt(2)+Me.charAt(2),16)/255,this;if(6===qe)return this.r=parseInt(Me.charAt(0)+Me.charAt(1),16)/255,this.g=parseInt(Me.charAt(2)+Me.charAt(3),16)/255,this.b=parseInt(Me.charAt(4)+Me.charAt(5),16)/255,this}return o&&o.length>0&&(void 0!==(Me=mm[o])?this.setHex(Me):console.warn("THREE.Color: Unknown color "+o)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(o){return this.r=o.r,this.g=o.g,this.b=o.b,this},copyGammaToLinear:function(o,f){return void 0===f&&(f=2),this.r=Math.pow(o.r,f),this.g=Math.pow(o.g,f),this.b=Math.pow(o.b,f),this},copyLinearToGamma:function(o,f){void 0===f&&(f=2);var v=f>0?1/f:1;return this.r=Math.pow(o.r,v),this.g=Math.pow(o.g,v),this.b=Math.pow(o.b,v),this},convertGammaToLinear:function(){var o=this.r,f=this.g,v=this.b;return this.r=o*o,this.g=f*f,this.b=v*v,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(o){var se,Fe,f=o||{h:0,s:0,l:0},v=this.r,x=this.g,P=this.b,G=Math.max(v,x,P),J=Math.min(v,x,P),Me=(J+G)/2;if(J===G)se=0,Fe=0;else{var qe=G-J;switch(Fe=Me<=.5?qe/(G+J):qe/(2-G-J),G){case v:se=(x-P)/qe+(x<P?6:0);break;case x:se=(P-v)/qe+2;break;case P:se=(v-x)/qe+4}se/=6}return f.h=se,f.s=Fe,f.l=Me,f},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(o,f,v){var x=this.getHSL();return x.h+=o,x.s+=f,x.l+=v,this.setHSL(x.h,x.s,x.l),this},add:function(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this},addColors:function(o,f){return this.r=o.r+f.r,this.g=o.g+f.g,this.b=o.b+f.b,this},addScalar:function(o){return this.r+=o,this.g+=o,this.b+=o,this},sub:function(o){return this.r=Math.max(0,this.r-o.r),this.g=Math.max(0,this.g-o.g),this.b=Math.max(0,this.b-o.b),this},multiply:function(o){return this.r*=o.r,this.g*=o.g,this.b*=o.b,this},multiplyScalar:function(o){return this.r*=o,this.g*=o,this.b*=o,this},lerp:function(o,f){return this.r+=(o.r-this.r)*f,this.g+=(o.g-this.g)*f,this.b+=(o.b-this.b)*f,this},equals:function(o){return o.r===this.r&&o.g===this.g&&o.b===this.b},fromArray:function(o,f){return void 0===f&&(f=0),this.r=o[f],this.g=o[f+1],this.b=o[f+2],this},toArray:function(o,f){return void 0===o&&(o=[]),void 0===f&&(f=0),o[f]=this.r,o[f+1]=this.g,o[f+2]=this.b,o},toJSON:function(){return this.getHex()}};var mm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function da(o,f,v,x,P,G,J,se,Fe,Me,qe,Qe){lr.call(this,null,G,J,se,Fe,Me,x,P,qe,Qe),this.image={data:o,width:f,height:v},this.magFilter=void 0!==Fe?Fe:z,this.minFilter=void 0!==Me?Me:z,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}(da.prototype=Object.create(lr.prototype)).constructor=da,da.prototype.isDataTexture=!0;var _a={common:{diffuse:{value:new na(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Pr(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new qn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new na(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new na(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Pr(0,0,1,1)}}},Fc={basic:{uniforms:Ul.merge([_a.common,_a.aomap,_a.lightmap,_a.fog]),vertexShader:io.meshbasic_vert,fragmentShader:io.meshbasic_frag},lambert:{uniforms:Ul.merge([_a.common,_a.aomap,_a.lightmap,_a.emissivemap,_a.fog,_a.lights,{emissive:{value:new na(0)}}]),vertexShader:io.meshlambert_vert,fragmentShader:io.meshlambert_frag},phong:{uniforms:Ul.merge([_a.common,_a.aomap,_a.lightmap,_a.emissivemap,_a.bumpmap,_a.normalmap,_a.displacementmap,_a.gradientmap,_a.fog,_a.lights,{emissive:{value:new na(0)},specular:{value:new na(1118481)},shininess:{value:30}}]),vertexShader:io.meshphong_vert,fragmentShader:io.meshphong_frag},standard:{uniforms:Ul.merge([_a.common,_a.aomap,_a.lightmap,_a.emissivemap,_a.bumpmap,_a.normalmap,_a.displacementmap,_a.roughnessmap,_a.metalnessmap,_a.fog,_a.lights,{emissive:{value:new na(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:io.meshphysical_vert,fragmentShader:io.meshphysical_frag},points:{uniforms:Ul.merge([_a.points,_a.fog]),vertexShader:io.points_vert,fragmentShader:io.points_frag},dashed:{uniforms:Ul.merge([_a.common,_a.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:io.linedashed_vert,fragmentShader:io.linedashed_frag},depth:{uniforms:Ul.merge([_a.common,_a.displacementmap]),vertexShader:io.depth_vert,fragmentShader:io.depth_frag},normal:{uniforms:Ul.merge([_a.common,_a.bumpmap,_a.normalmap,_a.displacementmap,{opacity:{value:1}}]),vertexShader:io.normal_vert,fragmentShader:io.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:io.cube_vert,fragmentShader:io.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:io.equirect_vert,fragmentShader:io.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new Bn}},vertexShader:io.distanceRGBA_vert,fragmentShader:io.distanceRGBA_frag}};function tf(o,f){this.min=void 0!==o?o:new qn(1/0,1/0),this.max=void 0!==f?f:new qn(-1/0,-1/0)}function Ig(o,f){var P,G,J,se,Fe,Me,qe,Qe,v=o.context,x=o.state;this.render=function(vt,Kt,Yt){if(0!==f.length){var jt=new Bn,cn=Yt.w/Yt.z,fn=.5*Yt.z,Hn=.5*Yt.w,Ln=16/Yt.w,oi=new qn(Ln*cn,Ln),Jn=new Bn(1,1,0),Xn=new qn(1,1),ci=new tf;ci.min.set(Yt.x,Yt.y),ci.max.set(Yt.x+(Yt.z-16),Yt.y+(Yt.w-16)),void 0===se&&function ft(){var vt=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),Kt=new Uint16Array([0,1,2,0,2,3]);P=v.createBuffer(),G=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,P),v.bufferData(v.ARRAY_BUFFER,vt,v.STATIC_DRAW),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,G),v.bufferData(v.ELEMENT_ARRAY_BUFFER,Kt,v.STATIC_DRAW),qe=v.createTexture(),Qe=v.createTexture(),x.bindTexture(v.TEXTURE_2D,qe),v.texImage2D(v.TEXTURE_2D,0,v.RGB,16,16,0,v.RGB,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),x.bindTexture(v.TEXTURE_2D,Qe),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,16,16,0,v.RGBA,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),J={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},se=function mt(vt){var Kt=v.createProgram(),Yt=v.createShader(v.FRAGMENT_SHADER),jt=v.createShader(v.VERTEX_SHADER),cn="precision "+o.getPrecision()+" float;\n";return v.shaderSource(Yt,cn+vt.fragmentShader),v.shaderSource(jt,cn+vt.vertexShader),v.compileShader(Yt),v.compileShader(jt),v.attachShader(Kt,Yt),v.attachShader(Kt,jt),v.linkProgram(Kt),Kt}(J),Fe={vertex:v.getAttribLocation(se,"position"),uv:v.getAttribLocation(se,"uv")},Me={renderType:v.getUniformLocation(se,"renderType"),map:v.getUniformLocation(se,"map"),occlusionMap:v.getUniformLocation(se,"occlusionMap"),opacity:v.getUniformLocation(se,"opacity"),color:v.getUniformLocation(se,"color"),scale:v.getUniformLocation(se,"scale"),rotation:v.getUniformLocation(se,"rotation"),screenPosition:v.getUniformLocation(se,"screenPosition")}}(),v.useProgram(se),x.initAttributes(),x.enableAttribute(Fe.vertex),x.enableAttribute(Fe.uv),x.disableUnusedAttributes(),v.uniform1i(Me.occlusionMap,0),v.uniform1i(Me.map,1),v.bindBuffer(v.ARRAY_BUFFER,P),v.vertexAttribPointer(Fe.vertex,2,v.FLOAT,!1,16,0),v.vertexAttribPointer(Fe.uv,2,v.FLOAT,!1,16,8),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,G),x.disable(v.CULL_FACE),x.setDepthWrite(!1);for(var Li=0,Tr=f.length;Li<Tr;Li++){oi.set((Ln=16/Yt.w)*cn,Ln);var dr=f[Li];if(jt.set(dr.matrixWorld.elements[12],dr.matrixWorld.elements[13],dr.matrixWorld.elements[14]),jt.applyMatrix4(Kt.matrixWorldInverse),jt.applyProjection(Kt.projectionMatrix),Jn.copy(jt),Xn.x=Yt.x+Jn.x*fn+fn-8,Xn.y=Yt.y+Jn.y*Hn+Hn-8,!0===ci.containsPoint(Xn)){x.activeTexture(v.TEXTURE0),x.bindTexture(v.TEXTURE_2D,null),x.activeTexture(v.TEXTURE1),x.bindTexture(v.TEXTURE_2D,qe),v.copyTexImage2D(v.TEXTURE_2D,0,v.RGB,Xn.x,Xn.y,16,16,0),v.uniform1i(Me.renderType,0),v.uniform2f(Me.scale,oi.x,oi.y),v.uniform3f(Me.screenPosition,Jn.x,Jn.y,Jn.z),x.disable(v.BLEND),x.enable(v.DEPTH_TEST),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0),x.activeTexture(v.TEXTURE0),x.bindTexture(v.TEXTURE_2D,Qe),v.copyTexImage2D(v.TEXTURE_2D,0,v.RGBA,Xn.x,Xn.y,16,16,0),v.uniform1i(Me.renderType,1),x.disable(v.DEPTH_TEST),x.activeTexture(v.TEXTURE1),x.bindTexture(v.TEXTURE_2D,qe),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0),dr.positionScreen.copy(Jn),dr.customUpdateCallback?dr.customUpdateCallback(dr):dr.updateLensFlares(),v.uniform1i(Me.renderType,2),x.enable(v.BLEND);for(var zn=0,Un=dr.lensFlares.length;zn<Un;zn++){var Gi=dr.lensFlares[zn];Gi.opacity>.001&&Gi.scale>.001&&(Jn.x=Gi.x,Jn.y=Gi.y,Jn.z=Gi.z,oi.x=(Ln=Gi.size*Gi.scale/Yt.w)*cn,oi.y=Ln,v.uniform3f(Me.screenPosition,Jn.x,Jn.y,Jn.z),v.uniform2f(Me.scale,oi.x,oi.y),v.uniform1f(Me.rotation,Gi.rotation),v.uniform1f(Me.opacity,Gi.opacity),v.uniform3f(Me.color,Gi.color.r,Gi.color.g,Gi.color.b),x.setBlending(Gi.blending,Gi.blendEquation,Gi.blendSrc,Gi.blendDst),o.setTexture2D(Gi.texture,1),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0))}}}x.enable(v.CULL_FACE),x.enable(v.DEPTH_TEST),x.setDepthWrite(!0),o.resetGLState()}}}function Ky(o,f){var P,G,J,se,Fe,Me,v=o.context,x=o.state,qe=new Bn,Qe=new to,ft=new Bn;function Kt(Yt,jt){return Yt.renderOrder!==jt.renderOrder?Yt.renderOrder-jt.renderOrder:Yt.z!==jt.z?jt.z-Yt.z:jt.id-Yt.id}this.render=function(Yt,jt){if(0!==f.length){void 0===J&&function mt(){var Yt=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),jt=new Uint16Array([0,1,2,0,2,3]);P=v.createBuffer(),G=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,P),v.bufferData(v.ARRAY_BUFFER,Yt,v.STATIC_DRAW),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,G),v.bufferData(v.ELEMENT_ARRAY_BUFFER,jt,v.STATIC_DRAW),J=function vt(){var Yt=v.createProgram(),jt=v.createShader(v.VERTEX_SHADER),cn=v.createShader(v.FRAGMENT_SHADER);return v.shaderSource(jt,["precision "+o.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),v.shaderSource(cn,["precision "+o.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),v.compileShader(jt),v.compileShader(cn),v.attachShader(Yt,jt),v.attachShader(Yt,cn),v.linkProgram(Yt),Yt}(),se={position:v.getAttribLocation(J,"position"),uv:v.getAttribLocation(J,"uv")},Fe={uvOffset:v.getUniformLocation(J,"uvOffset"),uvScale:v.getUniformLocation(J,"uvScale"),rotation:v.getUniformLocation(J,"rotation"),scale:v.getUniformLocation(J,"scale"),color:v.getUniformLocation(J,"color"),map:v.getUniformLocation(J,"map"),opacity:v.getUniformLocation(J,"opacity"),modelViewMatrix:v.getUniformLocation(J,"modelViewMatrix"),projectionMatrix:v.getUniformLocation(J,"projectionMatrix"),fogType:v.getUniformLocation(J,"fogType"),fogDensity:v.getUniformLocation(J,"fogDensity"),fogNear:v.getUniformLocation(J,"fogNear"),fogFar:v.getUniformLocation(J,"fogFar"),fogColor:v.getUniformLocation(J,"fogColor"),alphaTest:v.getUniformLocation(J,"alphaTest")};var cn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");cn.width=8,cn.height=8;var fn=cn.getContext("2d");fn.fillStyle="white",fn.fillRect(0,0,8,8),(Me=new lr(cn)).needsUpdate=!0}(),v.useProgram(J),x.initAttributes(),x.enableAttribute(se.position),x.enableAttribute(se.uv),x.disableUnusedAttributes(),x.disable(v.CULL_FACE),x.enable(v.BLEND),v.bindBuffer(v.ARRAY_BUFFER,P),v.vertexAttribPointer(se.position,2,v.FLOAT,!1,16,0),v.vertexAttribPointer(se.uv,2,v.FLOAT,!1,16,8),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,G),v.uniformMatrix4fv(Fe.projectionMatrix,!1,jt.projectionMatrix.elements),x.activeTexture(v.TEXTURE0),v.uniform1i(Fe.map,0);var cn=0,fn=0,Hn=Yt.fog;Hn?(v.uniform3f(Fe.fogColor,Hn.color.r,Hn.color.g,Hn.color.b),Hn.isFog?(v.uniform1f(Fe.fogNear,Hn.near),v.uniform1f(Fe.fogFar,Hn.far),v.uniform1i(Fe.fogType,1),cn=1,fn=1):Hn.isFogExp2&&(v.uniform1f(Fe.fogDensity,Hn.density),v.uniform1i(Fe.fogType,2),cn=2,fn=2)):(v.uniform1i(Fe.fogType,0),cn=0,fn=0);for(var Ln=0,oi=f.length;Ln<oi;Ln++)(Jn=f[Ln]).modelViewMatrix.multiplyMatrices(jt.matrixWorldInverse,Jn.matrixWorld),Jn.z=-Jn.modelViewMatrix.elements[14];f.sort(Kt);var Xn=[];for(Ln=0,oi=f.length;Ln<oi;Ln++){var Jn,ci=(Jn=f[Ln]).material;if(!1!==ci.visible){v.uniform1f(Fe.alphaTest,ci.alphaTest),v.uniformMatrix4fv(Fe.modelViewMatrix,!1,Jn.modelViewMatrix.elements),Jn.matrixWorld.decompose(qe,Qe,ft),Xn[0]=ft.x,Xn[1]=ft.y;var Li=0;Yt.fog&&ci.fog&&(Li=fn),cn!==Li&&(v.uniform1i(Fe.fogType,Li),cn=Li),null!==ci.map?(v.uniform2f(Fe.uvOffset,ci.map.offset.x,ci.map.offset.y),v.uniform2f(Fe.uvScale,ci.map.repeat.x,ci.map.repeat.y)):(v.uniform2f(Fe.uvOffset,0,0),v.uniform2f(Fe.uvScale,1,1)),v.uniform1f(Fe.opacity,ci.opacity),v.uniform3f(Fe.color,ci.color.r,ci.color.g,ci.color.b),v.uniform1f(Fe.rotation,ci.rotation),v.uniform2fv(Fe.scale,Xn),x.setBlending(ci.blending,ci.blendEquation,ci.blendSrc,ci.blendDst),x.setDepthTest(ci.depthTest),x.setDepthWrite(ci.depthWrite),o.setTexture2D(ci.map?ci.map:Me,0),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0)}}x.enable(v.CULL_FACE),o.resetGLState()}}}Fc.physical={uniforms:Ul.merge([Fc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:io.meshphysical_vert,fragmentShader:io.meshphysical_frag},tf.prototype={constructor:tf,set:function(o,f){return this.min.copy(o),this.max.copy(f),this},setFromPoints:function(o){this.makeEmpty();for(var f=0,v=o.length;f<v;f++)this.expandByPoint(o[f]);return this},setFromCenterAndSize:function(){var o=new qn;return function(v,x){var P=o.copy(x).multiplyScalar(.5);return this.min.copy(v).sub(P),this.max.copy(v).add(P),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.min.copy(o.min),this.max.copy(o.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(o){var f=o||new qn;return this.isEmpty()?f.set(0,0):f.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(o){var f=o||new qn;return this.isEmpty()?f.set(0,0):f.subVectors(this.max,this.min)},expandByPoint:function(o){return this.min.min(o),this.max.max(o),this},expandByVector:function(o){return this.min.sub(o),this.max.add(o),this},expandByScalar:function(o){return this.min.addScalar(-o),this.max.addScalar(o),this},containsPoint:function(o){return!(o.x<this.min.x||o.x>this.max.x||o.y<this.min.y||o.y>this.max.y)},containsBox:function(o){return this.min.x<=o.min.x&&o.max.x<=this.max.x&&this.min.y<=o.min.y&&o.max.y<=this.max.y},getParameter:function(o,f){return(f||new qn).set((o.x-this.min.x)/(this.max.x-this.min.x),(o.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(o){return!(o.max.x<this.min.x||o.min.x>this.max.x||o.max.y<this.min.y||o.min.y>this.max.y)},clampPoint:function(o,f){return(f||new qn).copy(o).clamp(this.min,this.max)},distanceToPoint:function(){var o=new qn;return function(v){return o.copy(v).clamp(this.min,this.max).sub(v).length()}}(),intersect:function(o){return this.min.max(o.min),this.max.min(o.max),this},union:function(o){return this.min.min(o.min),this.max.max(o.max),this},translate:function(o){return this.min.add(o),this.max.add(o),this},equals:function(o){return o.min.equals(this.min)&&o.max.equals(this.max)}};var Q_=0;function lo(){Object.defineProperty(this,"id",{value:Q_++}),this.uuid=An.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Ce,this.side=_e,this.shading=Ve,this.vertexColors=Ae,this.opacity=1,this.transparent=!1,this.blendSrc=Pn,this.blendDst=xt,this.blendEquation=Vt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=li,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function sh(o){lo.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==o&&(void 0!==o.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(o))}function br(o){lo.call(this),this.type="MeshDepthMaterial",this.depthPacking=Mt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(o)}function Na(o,f){this.min=void 0!==o?o:new Bn(1/0,1/0,1/0),this.max=void 0!==f?f:new Bn(-1/0,-1/0,-1/0)}function gn(o,f){this.center=void 0!==o?o:new Bn,this.radius=void 0!==f?f:0}function vn(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function ln(o,f){this.normal=void 0!==o?o:new Bn(1,0,0),this.constant=void 0!==f?f:0}function Xo(o,f,v,x,P,G){this.planes=[void 0!==o?o:new ln,void 0!==f?f:new ln,void 0!==v?v:new ln,void 0!==x?x:new ln,void 0!==P?P:new ln,void 0!==G?G:new ln]}function zo(o,f,v,x){var P=o.context,G=o.state,J=new Xo,se=new Zs,Fe=f.shadows,Me=new qn,qe=new qn(x.maxTextureSize,x.maxTextureSize),Qe=new Bn,ft=new Bn,mt=[],jt=new Array(4),cn=new Array(4),fn={},Hn=[new Bn(1,0,0),new Bn(-1,0,0),new Bn(0,0,1),new Bn(0,0,-1),new Bn(0,1,0),new Bn(0,-1,0)],Ln=[new Bn(0,1,0),new Bn(0,1,0),new Bn(0,1,0),new Bn(0,1,0),new Bn(0,0,1),new Bn(0,0,-1)],oi=[new Pr,new Pr,new Pr,new Pr,new Pr,new Pr],Jn=new br;Jn.depthPacking=sn,Jn.clipping=!0;for(var Xn=Fc.distanceRGBA,ci=Ul.clone(Xn.uniforms),Li=0;4!==Li;++Li){var Tr=0!=(1&Li),dr=0!=(2&Li),zn=Jn.clone();zn.morphTargets=Tr,zn.skinning=dr,jt[Li]=zn;var Un=new sh({defines:{USE_SHADOWMAP:""},uniforms:ci,vertexShader:Xn.vertexShader,fragmentShader:Xn.fragmentShader,morphTargets:Tr,skinning:dr,clipping:!0});cn[Li]=Un}var Gi=this;function tr(xr,gr,fs,Wr){var $i=xr.geometry,Ui=null,g=jt,c=xr.customDepthMaterial;if(fs&&(g=cn,c=xr.customDistanceMaterial),c)Ui=c;else{var p=!1;gr.morphTargets&&($i&&$i.isBufferGeometry?p=$i.morphAttributes&&$i.morphAttributes.position&&$i.morphAttributes.position.length>0:$i&&$i.isGeometry&&(p=$i.morphTargets&&$i.morphTargets.length>0));var A=0;p&&(A|=1),xr.isSkinnedMesh&&gr.skinning&&(A|=2),Ui=g[A]}if(o.localClippingEnabled&&!0===gr.clipShadows&&0!==gr.clippingPlanes.length){var E=Ui.uuid,M=gr.uuid,U=fn[E];void 0===U&&(fn[E]=U={});var ne=U[M];void 0===ne&&(ne=Ui.clone(),U[M]=ne),Ui=ne}Ui.visible=gr.visible,Ui.wireframe=gr.wireframe;var X=gr.side;return Gi.renderSingleSided&&X==Re&&(X=_e),Gi.renderReverseSided&&(X===_e?X=Q:X===Q&&(X=_e)),Ui.side=X,Ui.clipShadows=gr.clipShadows,Ui.clippingPlanes=gr.clippingPlanes,Ui.wireframeLinewidth=gr.wireframeLinewidth,Ui.linewidth=gr.linewidth,fs&&void 0!==Ui.uniforms.lightPos&&Ui.uniforms.lightPos.value.copy(Wr),Ui}function Mr(xr,gr,fs){if(!1!==xr.visible){0!=(xr.layers.mask&gr.layers.mask)&&(xr.isMesh||xr.isLine||xr.isPoints)&&xr.castShadow&&(!1===xr.frustumCulled||!0===J.intersectsObject(xr))&&!0===xr.material.visible&&(xr.modelViewMatrix.multiplyMatrices(fs.matrixWorldInverse,xr.matrixWorld),mt.push(xr));for(var Ui=xr.children,g=0,c=Ui.length;g<c;g++)Mr(Ui[g],gr,fs)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=De,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(xr,gr){if(!1!==Gi.enabled&&(!1!==Gi.autoUpdate||!1!==Gi.needsUpdate)&&0!==Fe.length){G.buffers.color.setClear(1,1,1,1),G.disable(P.BLEND),G.setDepthTest(!0),G.setScissorTest(!1);for(var fs,Wr,$i=0,Ui=Fe.length;$i<Ui;$i++){var g=Fe[$i],c=g.shadow;if(void 0!==c){var p=c.camera;if(Me.copy(c.mapSize),Me.min(qe),g&&g.isPointLight){fs=6,Wr=!0;var b=Me.x,A=Me.y;oi[0].set(2*b,A,b,A),oi[1].set(0,A,b,A),oi[2].set(3*b,A,b,A),oi[3].set(b,A,b,A),oi[4].set(3*b,0,b,A),oi[5].set(b,0,b,A),Me.x*=4,Me.y*=2}else fs=1,Wr=!1;null===c.map&&(c.map=new Ys(Me.x,Me.y,{minFilter:z,magFilter:z,format:Lt}),p.updateProjectionMatrix()),c.isSpotLightShadow&&c.update(g),c&&c.isRectAreaLightShadow&&c.update(g);var M=c.map,U=c.matrix;ft.setFromMatrixPosition(g.matrixWorld),p.position.copy(ft),o.setRenderTarget(M),o.clear();for(var ne=0;ne<fs;ne++){Wr?(Qe.copy(p.position),Qe.add(Hn[ne]),p.up.copy(Ln[ne]),p.lookAt(Qe),G.viewport(oi[ne])):(Qe.setFromMatrixPosition(g.target.matrixWorld),p.lookAt(Qe)),p.updateMatrixWorld(),p.matrixWorldInverse.getInverse(p.matrixWorld),U.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),U.multiply(p.projectionMatrix),U.multiply(p.matrixWorldInverse),se.multiplyMatrices(p.projectionMatrix,p.matrixWorldInverse),J.setFromMatrix(se),mt.length=0,Mr(xr,gr,p);for(var fe=0,be=mt.length;fe<be;fe++){var Ge=mt[fe],$e=v.update(Ge),Ke=Ge.material;if(Ke&&Ke.isMultiMaterial)for(var ot=$e.groups,_t=Ke.materials,Et=0,$t=ot.length;Et<$t;Et++){var Ut=ot[Et],un=_t[Ut.materialIndex];if(!0===un.visible){var In=tr(Ge,un,Wr,ft);o.renderBufferDirect(p,null,$e,In,Ge,Ut)}}else In=tr(Ge,Ke,Wr,ft),o.renderBufferDirect(p,null,$e,In,Ge,null)}}}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}var En=o.getClearColor(),hn=o.getClearAlpha();o.setClearColor(En,hn),Gi.needsUpdate=!1}}}function _l(o,f){this.origin=void 0!==o?o:new Bn,this.direction=void 0!==f?f:new Bn}function Ga(o,f,v,x){this._x=o||0,this._y=f||0,this._z=v||0,this._order=x||Ga.DefaultOrder}function Sg(){this.mask=1}lo.prototype={constructor:lo,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(o){!0===o&&this.update(),this._needsUpdate=o},setValues:function(o){if(void 0!==o)for(var f in o){var v=o[f];if(void 0!==v){var x=this[f];void 0!==x?x&&x.isColor?x.set(v):x&&x.isVector3&&v&&v.isVector3?x.copy(v):this[f]="overdraw"===f?Number(v):v:console.warn("THREE."+this.type+": '"+f+"' is not a property of this material.")}else console.warn("THREE.Material: '"+f+"' parameter is undefined.")}},toJSON:function(o){var f=void 0===o;f&&(o={textures:{},images:{}});var v={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function x(J){var se=[];for(var Fe in J){var Me=J[Fe];delete Me.metadata,se.push(Me)}return se}if(v.uuid=this.uuid,v.type=this.type,""!==this.name&&(v.name=this.name),this.color&&this.color.isColor&&(v.color=this.color.getHex()),void 0!==this.roughness&&(v.roughness=this.roughness),void 0!==this.metalness&&(v.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(v.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(v.specular=this.specular.getHex()),void 0!==this.shininess&&(v.shininess=this.shininess),void 0!==this.clearCoat&&(v.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(v.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(v.map=this.map.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(v.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(v.lightMap=this.lightMap.toJSON(o).uuid),this.bumpMap&&this.bumpMap.isTexture&&(v.bumpMap=this.bumpMap.toJSON(o).uuid,v.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(v.normalMap=this.normalMap.toJSON(o).uuid,v.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(v.displacementMap=this.displacementMap.toJSON(o).uuid,v.displacementScale=this.displacementScale,v.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(v.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(v.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(v.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(v.specularMap=this.specularMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(v.envMap=this.envMap.toJSON(o).uuid,v.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(v.gradientMap=this.gradientMap.toJSON(o).uuid),void 0!==this.size&&(v.size=this.size),void 0!==this.sizeAttenuation&&(v.sizeAttenuation=this.sizeAttenuation),this.blending!==Ce&&(v.blending=this.blending),this.shading!==Ve&&(v.shading=this.shading),this.side!==_e&&(v.side=this.side),this.vertexColors!==Ae&&(v.vertexColors=this.vertexColors),this.opacity<1&&(v.opacity=this.opacity),!0===this.transparent&&(v.transparent=this.transparent),v.depthFunc=this.depthFunc,v.depthTest=this.depthTest,v.depthWrite=this.depthWrite,this.alphaTest>0&&(v.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(v.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(v.wireframe=this.wireframe),this.wireframeLinewidth>1&&(v.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(v.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(v.wireframeLinejoin=this.wireframeLinejoin),v.skinning=this.skinning,v.morphTargets=this.morphTargets,f){var P=x(o.textures),G=x(o.images);P.length>0&&(v.textures=P),G.length>0&&(v.images=G)}return v},clone:function(){return(new this.constructor).copy(this)},copy:function(o){this.name=o.name,this.fog=o.fog,this.lights=o.lights,this.blending=o.blending,this.side=o.side,this.shading=o.shading,this.vertexColors=o.vertexColors,this.opacity=o.opacity,this.transparent=o.transparent,this.blendSrc=o.blendSrc,this.blendDst=o.blendDst,this.blendEquation=o.blendEquation,this.blendSrcAlpha=o.blendSrcAlpha,this.blendDstAlpha=o.blendDstAlpha,this.blendEquationAlpha=o.blendEquationAlpha,this.depthFunc=o.depthFunc,this.depthTest=o.depthTest,this.depthWrite=o.depthWrite,this.colorWrite=o.colorWrite,this.precision=o.precision,this.polygonOffset=o.polygonOffset,this.polygonOffsetFactor=o.polygonOffsetFactor,this.polygonOffsetUnits=o.polygonOffsetUnits,this.alphaTest=o.alphaTest,this.premultipliedAlpha=o.premultipliedAlpha,this.overdraw=o.overdraw,this.visible=o.visible,this.clipShadows=o.clipShadows,this.clipIntersection=o.clipIntersection;var f=o.clippingPlanes,v=null;if(null!==f){var x=f.length;v=new Array(x);for(var P=0;P!==x;++P)v[P]=f[P].clone()}return this.clippingPlanes=v,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(lo.prototype,ye.prototype),(sh.prototype=Object.create(lo.prototype)).constructor=sh,sh.prototype.isShaderMaterial=!0,sh.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.fragmentShader=o.fragmentShader,this.vertexShader=o.vertexShader,this.uniforms=Ul.clone(o.uniforms),this.defines=o.defines,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.lights=o.lights,this.clipping=o.clipping,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this.extensions=o.extensions,this},sh.prototype.toJSON=function(o){var f=lo.prototype.toJSON.call(this,o);return f.uniforms=this.uniforms,f.vertexShader=this.vertexShader,f.fragmentShader=this.fragmentShader,f},(br.prototype=Object.create(lo.prototype)).constructor=br,br.prototype.isMeshDepthMaterial=!0,br.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.depthPacking=o.depthPacking,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this},Na.prototype={constructor:Na,isBox3:!0,set:function(o,f){return this.min.copy(o),this.max.copy(f),this},setFromArray:function(o){for(var f=1/0,v=1/0,x=1/0,P=-1/0,G=-1/0,J=-1/0,se=0,Fe=o.length;se<Fe;se+=3){var Me=o[se],qe=o[se+1],Qe=o[se+2];Me<f&&(f=Me),qe<v&&(v=qe),Qe<x&&(x=Qe),Me>P&&(P=Me),qe>G&&(G=qe),Qe>J&&(J=Qe)}this.min.set(f,v,x),this.max.set(P,G,J)},setFromBufferAttribute:function(o){for(var f=1/0,v=1/0,x=1/0,P=-1/0,G=-1/0,J=-1/0,se=0,Fe=o.count;se<Fe;se++){var Me=o.getX(se),qe=o.getY(se),Qe=o.getZ(se);Me<f&&(f=Me),qe<v&&(v=qe),Qe<x&&(x=Qe),Me>P&&(P=Me),qe>G&&(G=qe),Qe>J&&(J=Qe)}this.min.set(f,v,x),this.max.set(P,G,J)},setFromPoints:function(o){this.makeEmpty();for(var f=0,v=o.length;f<v;f++)this.expandByPoint(o[f]);return this},setFromCenterAndSize:function(){var o=new Bn;return function(v,x){var P=o.copy(x).multiplyScalar(.5);return this.min.copy(v).sub(P),this.max.copy(v).add(P),this}}(),setFromObject:function(){var o=new Bn;return function(v){var x=this;return v.updateMatrixWorld(!0),this.makeEmpty(),v.traverse(function(P){var G,J,se=P.geometry;if(void 0!==se)if(se.isGeometry){var Fe=se.vertices;for(G=0,J=Fe.length;G<J;G++)o.copy(Fe[G]),o.applyMatrix4(P.matrixWorld),x.expandByPoint(o)}else if(se.isBufferGeometry){var Me=se.attributes.position;if(void 0!==Me)for(G=0,J=Me.count;G<J;G++)o.fromAttribute(Me,G).applyMatrix4(P.matrixWorld),x.expandByPoint(o)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.min.copy(o.min),this.max.copy(o.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(o){var f=o||new Bn;return this.isEmpty()?f.set(0,0,0):f.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(o){var f=o||new Bn;return this.isEmpty()?f.set(0,0,0):f.subVectors(this.max,this.min)},expandByPoint:function(o){return this.min.min(o),this.max.max(o),this},expandByVector:function(o){return this.min.sub(o),this.max.add(o),this},expandByScalar:function(o){return this.min.addScalar(-o),this.max.addScalar(o),this},containsPoint:function(o){return!(o.x<this.min.x||o.x>this.max.x||o.y<this.min.y||o.y>this.max.y||o.z<this.min.z||o.z>this.max.z)},containsBox:function(o){return this.min.x<=o.min.x&&o.max.x<=this.max.x&&this.min.y<=o.min.y&&o.max.y<=this.max.y&&this.min.z<=o.min.z&&o.max.z<=this.max.z},getParameter:function(o,f){return(f||new Bn).set((o.x-this.min.x)/(this.max.x-this.min.x),(o.y-this.min.y)/(this.max.y-this.min.y),(o.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(o){return!(o.max.x<this.min.x||o.min.x>this.max.x||o.max.y<this.min.y||o.min.y>this.max.y||o.max.z<this.min.z||o.min.z>this.max.z)},intersectsSphere:function(){var o;return function(v){return void 0===o&&(o=new Bn),this.clampPoint(v.center,o),o.distanceToSquared(v.center)<=v.radius*v.radius}}(),intersectsPlane:function(o){var f,v;return o.normal.x>0?(f=o.normal.x*this.min.x,v=o.normal.x*this.max.x):(f=o.normal.x*this.max.x,v=o.normal.x*this.min.x),o.normal.y>0?(f+=o.normal.y*this.min.y,v+=o.normal.y*this.max.y):(f+=o.normal.y*this.max.y,v+=o.normal.y*this.min.y),o.normal.z>0?(f+=o.normal.z*this.min.z,v+=o.normal.z*this.max.z):(f+=o.normal.z*this.max.z,v+=o.normal.z*this.min.z),f<=o.constant&&v>=o.constant},clampPoint:function(o,f){return(f||new Bn).copy(o).clamp(this.min,this.max)},distanceToPoint:function(){var o=new Bn;return function(v){return o.copy(v).clamp(this.min,this.max).sub(v).length()}}(),getBoundingSphere:function(){var o=new Bn;return function(v){var x=v||new gn;return this.getCenter(x.center),x.radius=.5*this.getSize(o).length(),x}}(),intersect:function(o){return this.min.max(o.min),this.max.min(o.max),this.isEmpty()&&this.makeEmpty(),this},union:function(o){return this.min.min(o.min),this.max.max(o.max),this},applyMatrix4:function(){var o=[new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn];return function(v){return this.isEmpty()||(o[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(v),o[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(v),o[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(v),o[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(v),o[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(v),o[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(v),o[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(v),o[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(v),this.setFromPoints(o)),this}}(),translate:function(o){return this.min.add(o),this.max.add(o),this},equals:function(o){return o.min.equals(this.min)&&o.max.equals(this.max)}},gn.prototype={constructor:gn,set:function(o,f){return this.center.copy(o),this.radius=f,this},setFromPoints:function(){var o=new Na;return function(v,x){var P=this.center;void 0!==x?P.copy(x):o.setFromPoints(v).getCenter(P);for(var G=0,J=0,se=v.length;J<se;J++)G=Math.max(G,P.distanceToSquared(v[J]));return this.radius=Math.sqrt(G),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.center.copy(o.center),this.radius=o.radius,this},empty:function(){return this.radius<=0},containsPoint:function(o){return o.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(o){return o.distanceTo(this.center)-this.radius},intersectsSphere:function(o){var f=this.radius+o.radius;return o.center.distanceToSquared(this.center)<=f*f},intersectsBox:function(o){return o.intersectsSphere(this)},intersectsPlane:function(o){return Math.abs(this.center.dot(o.normal)-o.constant)<=this.radius},clampPoint:function(o,f){var v=this.center.distanceToSquared(o),x=f||new Bn;return x.copy(o),v>this.radius*this.radius&&(x.sub(this.center).normalize(),x.multiplyScalar(this.radius).add(this.center)),x},getBoundingBox:function(o){var f=o||new Na;return f.set(this.center,this.center),f.expandByScalar(this.radius),f},applyMatrix4:function(o){return this.center.applyMatrix4(o),this.radius=this.radius*o.getMaxScaleOnAxis(),this},translate:function(o){return this.center.add(o),this},equals:function(o){return o.center.equals(this.center)&&o.radius===this.radius}},vn.prototype={constructor:vn,isMatrix3:!0,set:function(o,f,v,x,P,G,J,se,Fe){var Me=this.elements;return Me[0]=o,Me[1]=x,Me[2]=J,Me[3]=f,Me[4]=P,Me[5]=se,Me[6]=v,Me[7]=G,Me[8]=Fe,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(o){var f=o.elements;return this.set(f[0],f[3],f[6],f[1],f[4],f[7],f[2],f[5],f[8]),this},setFromMatrix4:function(o){var f=o.elements;return this.set(f[0],f[4],f[8],f[1],f[5],f[9],f[2],f[6],f[10]),this},applyToVector3Array:function(){var o;return function(v,x,P){void 0===o&&(o=new Bn),void 0===x&&(x=0),void 0===P&&(P=v.length);for(var G=0,J=x;G<P;G+=3,J+=3)o.fromArray(v,J),o.applyMatrix3(this),o.toArray(v,J);return v}}(),applyToBufferAttribute:function(){var o;return function(v){void 0===o&&(o=new Bn);for(var x=0,P=v.count;x<P;x++)o.x=v.getX(x),o.y=v.getY(x),o.z=v.getZ(x),o.applyMatrix3(this),v.setXYZ(x,o.x,o.y,o.z);return v}}(),multiplyScalar:function(o){var f=this.elements;return f[0]*=o,f[3]*=o,f[6]*=o,f[1]*=o,f[4]*=o,f[7]*=o,f[2]*=o,f[5]*=o,f[8]*=o,this},determinant:function(){var o=this.elements,f=o[0],v=o[1],x=o[2],P=o[3],G=o[4],J=o[5],se=o[6],Fe=o[7],Me=o[8];return f*G*Me-f*J*Fe-v*P*Me+v*J*se+x*P*Fe-x*G*se},getInverse:function(o,f){o&&o.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var v=o.elements,x=this.elements,P=v[0],G=v[1],J=v[2],se=v[3],Fe=v[4],Me=v[5],qe=v[6],Qe=v[7],ft=v[8],mt=ft*Fe-Me*Qe,vt=Me*qe-ft*se,Kt=Qe*se-Fe*qe,Yt=P*mt+G*vt+J*Kt;if(0===Yt){var jt="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===f)throw new Error(jt);return console.warn(jt),this.identity()}var cn=1/Yt;return x[0]=mt*cn,x[1]=(J*Qe-ft*G)*cn,x[2]=(Me*G-J*Fe)*cn,x[3]=vt*cn,x[4]=(ft*P-J*qe)*cn,x[5]=(J*se-Me*P)*cn,x[6]=Kt*cn,x[7]=(G*qe-Qe*P)*cn,x[8]=(Fe*P-G*se)*cn,this},transpose:function(){var o,f=this.elements;return o=f[1],f[1]=f[3],f[3]=o,o=f[2],f[2]=f[6],f[6]=o,o=f[5],f[5]=f[7],f[7]=o,this},getNormalMatrix:function(o){return this.setFromMatrix4(o).getInverse(this).transpose()},transposeIntoArray:function(o){var f=this.elements;return o[0]=f[0],o[1]=f[3],o[2]=f[6],o[3]=f[1],o[4]=f[4],o[5]=f[7],o[6]=f[2],o[7]=f[5],o[8]=f[8],this},fromArray:function(o,f){void 0===f&&(f=0);for(var v=0;v<9;v++)this.elements[v]=o[v+f];return this},toArray:function(o,f){void 0===o&&(o=[]),void 0===f&&(f=0);var v=this.elements;return o[f]=v[0],o[f+1]=v[1],o[f+2]=v[2],o[f+3]=v[3],o[f+4]=v[4],o[f+5]=v[5],o[f+6]=v[6],o[f+7]=v[7],o[f+8]=v[8],o}},ln.prototype={constructor:ln,set:function(o,f){return this.normal.copy(o),this.constant=f,this},setComponents:function(o,f,v,x){return this.normal.set(o,f,v),this.constant=x,this},setFromNormalAndCoplanarPoint:function(o,f){return this.normal.copy(o),this.constant=-f.dot(this.normal),this},setFromCoplanarPoints:function(){var o=new Bn,f=new Bn;return function(x,P,G){var J=o.subVectors(G,P).cross(f.subVectors(x,P)).normalize();return this.setFromNormalAndCoplanarPoint(J,x),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.normal.copy(o.normal),this.constant=o.constant,this},normalize:function(){var o=1/this.normal.length();return this.normal.multiplyScalar(o),this.constant*=o,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(o){return this.normal.dot(o)+this.constant},distanceToSphere:function(o){return this.distanceToPoint(o.center)-o.radius},projectPoint:function(o,f){return this.orthoPoint(o,f).sub(o).negate()},orthoPoint:function(o,f){var v=this.distanceToPoint(o);return(f||new Bn).copy(this.normal).multiplyScalar(v)},intersectLine:function(){var o=new Bn;return function(v,x){var P=x||new Bn,G=v.delta(o),J=this.normal.dot(G);if(0===J)return 0===this.distanceToPoint(v.start)?P.copy(v.start):void 0;var se=-(v.start.dot(this.normal)+this.constant)/J;return se<0||se>1?void 0:P.copy(G).multiplyScalar(se).add(v.start)}}(),intersectsLine:function(o){var f=this.distanceToPoint(o.start),v=this.distanceToPoint(o.end);return f<0&&v>0||v<0&&f>0},intersectsBox:function(o){return o.intersectsPlane(this)},intersectsSphere:function(o){return o.intersectsPlane(this)},coplanarPoint:function(o){return(o||new Bn).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var o=new Bn,f=new vn;return function(x,P){var G=this.coplanarPoint(o).applyMatrix4(x),J=P||f.getNormalMatrix(x),se=this.normal.applyMatrix3(J).normalize();return this.constant=-G.dot(se),this}}(),translate:function(o){return this.constant=this.constant-o.dot(this.normal),this},equals:function(o){return o.normal.equals(this.normal)&&o.constant===this.constant}},Xo.prototype={constructor:Xo,set:function(o,f,v,x,P,G){var J=this.planes;return J[0].copy(o),J[1].copy(f),J[2].copy(v),J[3].copy(x),J[4].copy(P),J[5].copy(G),this},clone:function(){return(new this.constructor).copy(this)},copy:function(o){for(var f=this.planes,v=0;v<6;v++)f[v].copy(o.planes[v]);return this},setFromMatrix:function(o){var f=this.planes,v=o.elements,x=v[0],P=v[1],G=v[2],J=v[3],se=v[4],Fe=v[5],Me=v[6],qe=v[7],Qe=v[8],ft=v[9],mt=v[10],vt=v[11],Kt=v[12],Yt=v[13],jt=v[14],cn=v[15];return f[0].setComponents(J-x,qe-se,vt-Qe,cn-Kt).normalize(),f[1].setComponents(J+x,qe+se,vt+Qe,cn+Kt).normalize(),f[2].setComponents(J+P,qe+Fe,vt+ft,cn+Yt).normalize(),f[3].setComponents(J-P,qe-Fe,vt-ft,cn-Yt).normalize(),f[4].setComponents(J-G,qe-Me,vt-mt,cn-jt).normalize(),f[5].setComponents(J+G,qe+Me,vt+mt,cn+jt).normalize(),this},intersectsObject:function(){var o=new gn;return function(v){var x=v.geometry;return null===x.boundingSphere&&x.computeBoundingSphere(),o.copy(x.boundingSphere).applyMatrix4(v.matrixWorld),this.intersectsSphere(o)}}(),intersectsSprite:function(){var o=new gn;return function(v){return o.center.set(0,0,0),o.radius=.7071067811865476,o.applyMatrix4(v.matrixWorld),this.intersectsSphere(o)}}(),intersectsSphere:function(o){for(var f=this.planes,v=o.center,x=-o.radius,P=0;P<6;P++)if(f[P].distanceToPoint(v)<x)return!1;return!0},intersectsBox:function(){var o=new Bn,f=new Bn;return function(x){for(var P=this.planes,G=0;G<6;G++){var J=P[G];o.x=J.normal.x>0?x.min.x:x.max.x,f.x=J.normal.x>0?x.max.x:x.min.x,o.y=J.normal.y>0?x.min.y:x.max.y,f.y=J.normal.y>0?x.max.y:x.min.y,o.z=J.normal.z>0?x.min.z:x.max.z,f.z=J.normal.z>0?x.max.z:x.min.z;var se=J.distanceToPoint(o),Fe=J.distanceToPoint(f);if(se<0&&Fe<0)return!1}return!0}}(),containsPoint:function(o){for(var f=this.planes,v=0;v<6;v++)if(f[v].distanceToPoint(o)<0)return!1;return!0}},_l.prototype={constructor:_l,set:function(o,f){return this.origin.copy(o),this.direction.copy(f),this},clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.origin.copy(o.origin),this.direction.copy(o.direction),this},at:function(o,f){return(f||new Bn).copy(this.direction).multiplyScalar(o).add(this.origin)},lookAt:function(o){return this.direction.copy(o).sub(this.origin).normalize(),this},recast:function(){var o=new Bn;return function(v){return this.origin.copy(this.at(v,o)),this}}(),closestPointToPoint:function(o,f){var v=f||new Bn;v.subVectors(o,this.origin);var x=v.dot(this.direction);return x<0?v.copy(this.origin):v.copy(this.direction).multiplyScalar(x).add(this.origin)},distanceToPoint:function(o){return Math.sqrt(this.distanceSqToPoint(o))},distanceSqToPoint:function(){var o=new Bn;return function(v){var x=o.subVectors(v,this.origin).dot(this.direction);return x<0?this.origin.distanceToSquared(v):(o.copy(this.direction).multiplyScalar(x).add(this.origin),o.distanceToSquared(v))}}(),distanceSqToSegment:function(){var o=new Bn,f=new Bn,v=new Bn;return function(P,G,J,se){o.copy(P).add(G).multiplyScalar(.5),f.copy(G).sub(P).normalize(),v.copy(this.origin).sub(o);var vt,Kt,Yt,jt,Fe=.5*P.distanceTo(G),Me=-this.direction.dot(f),qe=v.dot(this.direction),Qe=-v.dot(f),ft=v.lengthSq(),mt=Math.abs(1-Me*Me);if(mt>0)if(Kt=Me*qe-Qe,jt=Fe*mt,(vt=Me*Qe-qe)>=0)if(Kt>=-jt)if(Kt<=jt){var cn=1/mt;Yt=(vt*=cn)*(vt+Me*(Kt*=cn)+2*qe)+Kt*(Me*vt+Kt+2*Qe)+ft}else Kt=Fe,Yt=-(vt=Math.max(0,-(Me*Kt+qe)))*vt+Kt*(Kt+2*Qe)+ft;else Kt=-Fe,Yt=-(vt=Math.max(0,-(Me*Kt+qe)))*vt+Kt*(Kt+2*Qe)+ft;else Kt<=-jt?Yt=-(vt=Math.max(0,-(-Me*Fe+qe)))*vt+(Kt=vt>0?-Fe:Math.min(Math.max(-Fe,-Qe),Fe))*(Kt+2*Qe)+ft:Kt<=jt?(vt=0,Yt=(Kt=Math.min(Math.max(-Fe,-Qe),Fe))*(Kt+2*Qe)+ft):Yt=-(vt=Math.max(0,-(Me*Fe+qe)))*vt+(Kt=vt>0?Fe:Math.min(Math.max(-Fe,-Qe),Fe))*(Kt+2*Qe)+ft;else Kt=Me>0?-Fe:Fe,Yt=-(vt=Math.max(0,-(Me*Kt+qe)))*vt+Kt*(Kt+2*Qe)+ft;return J&&J.copy(this.direction).multiplyScalar(vt).add(this.origin),se&&se.copy(f).multiplyScalar(Kt).add(o),Yt}}(),intersectSphere:function(){var o=new Bn;return function(v,x){o.subVectors(v.center,this.origin);var P=o.dot(this.direction),G=o.dot(o)-P*P,J=v.radius*v.radius;if(G>J)return null;var se=Math.sqrt(J-G),Fe=P-se,Me=P+se;return Fe<0&&Me<0?null:this.at(Fe<0?Me:Fe,x)}}(),intersectsSphere:function(o){return this.distanceToPoint(o.center)<=o.radius},distanceToPlane:function(o){var f=o.normal.dot(this.direction);if(0===f)return 0===o.distanceToPoint(this.origin)?0:null;var v=-(this.origin.dot(o.normal)+o.constant)/f;return v>=0?v:null},intersectPlane:function(o,f){var v=this.distanceToPlane(o);return null===v?null:this.at(v,f)},intersectsPlane:function(o){var f=o.distanceToPoint(this.origin);return 0===f||o.normal.dot(this.direction)*f<0},intersectBox:function(o,f){var v,x,P,G,J,se,Fe=1/this.direction.x,Me=1/this.direction.y,qe=1/this.direction.z,Qe=this.origin;return Fe>=0?(v=(o.min.x-Qe.x)*Fe,x=(o.max.x-Qe.x)*Fe):(v=(o.max.x-Qe.x)*Fe,x=(o.min.x-Qe.x)*Fe),Me>=0?(P=(o.min.y-Qe.y)*Me,G=(o.max.y-Qe.y)*Me):(P=(o.max.y-Qe.y)*Me,G=(o.min.y-Qe.y)*Me),v>G||P>x||((P>v||v!=v)&&(v=P),(G<x||x!=x)&&(x=G),qe>=0?(J=(o.min.z-Qe.z)*qe,se=(o.max.z-Qe.z)*qe):(J=(o.max.z-Qe.z)*qe,se=(o.min.z-Qe.z)*qe),v>se||J>x)||((J>v||v!=v)&&(v=J),(se<x||x!=x)&&(x=se),x<0)?null:this.at(v>=0?v:x,f)},intersectsBox:function(){var o=new Bn;return function(v){return null!==this.intersectBox(v,o)}}(),intersectTriangle:function(){var o=new Bn,f=new Bn,v=new Bn,x=new Bn;return function(G,J,se,Fe,Me){f.subVectors(J,G),v.subVectors(se,G),x.crossVectors(f,v);var Qe,qe=this.direction.dot(x);if(qe>0){if(Fe)return null;Qe=1}else{if(!(qe<0))return null;Qe=-1,qe=-qe}o.subVectors(this.origin,G);var ft=Qe*this.direction.dot(v.crossVectors(o,v));if(ft<0)return null;var mt=Qe*this.direction.dot(f.cross(o));if(mt<0||ft+mt>qe)return null;var vt=-Qe*o.dot(x);return vt<0?null:this.at(vt/qe,Me)}}(),applyMatrix4:function(o){return this.direction.add(this.origin).applyMatrix4(o),this.origin.applyMatrix4(o),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(o){return o.origin.equals(this.origin)&&o.direction.equals(this.direction)}},Ga.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Ga.DefaultOrder="XYZ",Ga.prototype={constructor:Ga,isEuler:!0,get x(){return this._x},set x(o){this._x=o,this.onChangeCallback()},get y(){return this._y},set y(o){this._y=o,this.onChangeCallback()},get z(){return this._z},set z(o){this._z=o,this.onChangeCallback()},get order(){return this._order},set order(o){this._order=o,this.onChangeCallback()},set:function(o,f,v,x){return this._x=o,this._y=f,this._z=v,this._order=x||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(o){return this._x=o._x,this._y=o._y,this._z=o._z,this._order=o._order,this.onChangeCallback(),this},setFromRotationMatrix:function(o,f,v){var x=An.clamp,P=o.elements,G=P[0],J=P[4],se=P[8],Fe=P[1],Me=P[5],qe=P[9],Qe=P[2],ft=P[6],mt=P[10];return"XYZ"===(f=f||this._order)?(this._y=Math.asin(x(se,-1,1)),Math.abs(se)<.99999?(this._x=Math.atan2(-qe,mt),this._z=Math.atan2(-J,G)):(this._x=Math.atan2(ft,Me),this._z=0)):"YXZ"===f?(this._x=Math.asin(-x(qe,-1,1)),Math.abs(qe)<.99999?(this._y=Math.atan2(se,mt),this._z=Math.atan2(Fe,Me)):(this._y=Math.atan2(-Qe,G),this._z=0)):"ZXY"===f?(this._x=Math.asin(x(ft,-1,1)),Math.abs(ft)<.99999?(this._y=Math.atan2(-Qe,mt),this._z=Math.atan2(-J,Me)):(this._y=0,this._z=Math.atan2(Fe,G))):"ZYX"===f?(this._y=Math.asin(-x(Qe,-1,1)),Math.abs(Qe)<.99999?(this._x=Math.atan2(ft,mt),this._z=Math.atan2(Fe,G)):(this._x=0,this._z=Math.atan2(-J,Me))):"YZX"===f?(this._z=Math.asin(x(Fe,-1,1)),Math.abs(Fe)<.99999?(this._x=Math.atan2(-qe,Me),this._y=Math.atan2(-Qe,G)):(this._x=0,this._y=Math.atan2(se,mt))):"XZY"===f?(this._z=Math.asin(-x(J,-1,1)),Math.abs(J)<.99999?(this._x=Math.atan2(ft,Me),this._y=Math.atan2(se,G)):(this._x=Math.atan2(-qe,mt),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+f),this._order=f,!1!==v&&this.onChangeCallback(),this},setFromQuaternion:function(){var o;return function(v,x,P){return void 0===o&&(o=new Zs),o.makeRotationFromQuaternion(v),this.setFromRotationMatrix(o,x,P)}}(),setFromVector3:function(o,f){return this.set(o.x,o.y,o.z,f||this._order)},reorder:function(){var o=new to;return function(v){return o.setFromEuler(this),this.setFromQuaternion(o,v)}}(),equals:function(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._order===this._order},fromArray:function(o){return this._x=o[0],this._y=o[1],this._z=o[2],void 0!==o[3]&&(this._order=o[3]),this.onChangeCallback(),this},toArray:function(o,f){return void 0===o&&(o=[]),void 0===f&&(f=0),o[f]=this._x,o[f+1]=this._y,o[f+2]=this._z,o[f+3]=this._order,o},toVector3:function(o){return o?o.set(this._x,this._y,this._z):new Bn(this._x,this._y,this._z)},onChange:function(o){return this.onChangeCallback=o,this},onChangeCallback:function(){}},Sg.prototype={constructor:Sg,set:function(o){this.mask=1<<o},enable:function(o){this.mask|=1<<o},toggle:function(o){this.mask^=1<<o},disable:function(o){this.mask&=~(1<<o)},test:function(o){return 0!=(this.mask&o.mask)}};var Np=0;function Es(){Object.defineProperty(this,"id",{value:Np++}),this.uuid=An.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Es.DefaultUp.clone();var o=new Bn,f=new Ga,v=new to,x=new Bn(1,1,1);f.onChange(function P(){v.setFromEuler(f,!1)}),v.onChange(function G(){f.setFromQuaternion(v,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:o},rotation:{enumerable:!0,value:f},quaternion:{enumerable:!0,value:v},scale:{enumerable:!0,value:x},modelViewMatrix:{value:new Zs},normalMatrix:{value:new vn}}),this.matrix=new Zs,this.matrixWorld=new Zs,this.matrixAutoUpdate=Es.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Sg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function qu(o,f){this.start=void 0!==o?o:new Bn,this.end=void 0!==f?f:new Bn}function Nl(o,f,v){this.a=void 0!==o?o:new Bn,this.b=void 0!==f?f:new Bn,this.c=void 0!==v?v:new Bn}function Yo(o,f,v,x,P,G){this.a=o,this.b=f,this.c=v,this.normal=x&&x.isVector3?x:new Bn,this.vertexNormals=Array.isArray(x)?x:[],this.color=P&&P.isColor?P:new na,this.vertexColors=Array.isArray(P)?P:[],this.materialIndex=void 0!==G?G:0}function eu(o){lo.call(this),this.type="MeshBasicMaterial",this.color=new na(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=It,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(o)}function bs(o,f,v){if(Array.isArray(o))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=An.generateUUID(),this.array=o,this.itemSize=f,this.count=void 0!==o?o.length/f:0,this.normalized=!0===v,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Md(o,f){bs.call(this,new Int8Array(o),f)}function Au(o,f){bs.call(this,new Uint8Array(o),f)}function Rf(o,f){bs.call(this,new Uint8ClampedArray(o),f)}function Bp(o,f){bs.call(this,new Int16Array(o),f)}function Of(o,f){bs.call(this,new Uint16Array(o),f)}function cp(o,f){bs.call(this,new Int32Array(o),f)}function Wh(o,f){bs.call(this,new Uint32Array(o),f)}function ga(o,f){bs.call(this,new Float32Array(o),f)}function Nc(o,f){bs.call(this,new Float64Array(o),f)}function vm(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ba(){Object.defineProperty(this,"id",{value:_m()}),this.uuid=An.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Es.DefaultUp=new Bn(0,1,0),Es.DefaultMatrixAutoUpdate=!0,Object.assign(Es.prototype,ye.prototype,{isObject3D:!0,applyMatrix:function(o){this.matrix.multiplyMatrices(o,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(o,f){this.quaternion.setFromAxisAngle(o,f)},setRotationFromEuler:function(o){this.quaternion.setFromEuler(o,!0)},setRotationFromMatrix:function(o){this.quaternion.setFromRotationMatrix(o)},setRotationFromQuaternion:function(o){this.quaternion.copy(o)},rotateOnAxis:function(){var o=new to;return function(v,x){return o.setFromAxisAngle(v,x),this.quaternion.multiply(o),this}}(),rotateX:function(){var o=new Bn(1,0,0);return function(v){return this.rotateOnAxis(o,v)}}(),rotateY:function(){var o=new Bn(0,1,0);return function(v){return this.rotateOnAxis(o,v)}}(),rotateZ:function(){var o=new Bn(0,0,1);return function(v){return this.rotateOnAxis(o,v)}}(),translateOnAxis:function(){var o=new Bn;return function(v,x){return o.copy(v).applyQuaternion(this.quaternion),this.position.add(o.multiplyScalar(x)),this}}(),translateX:function(){var o=new Bn(1,0,0);return function(v){return this.translateOnAxis(o,v)}}(),translateY:function(){var o=new Bn(0,1,0);return function(v){return this.translateOnAxis(o,v)}}(),translateZ:function(){var o=new Bn(0,0,1);return function(v){return this.translateOnAxis(o,v)}}(),localToWorld:function(o){return o.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var o=new Zs;return function(v){return v.applyMatrix4(o.getInverse(this.matrixWorld))}}(),lookAt:function(){var o=new Zs;return function(v){o.lookAt(v,this.position,this.up),this.quaternion.setFromRotationMatrix(o)}}(),add:function(o){if(arguments.length>1){for(var f=0;f<arguments.length;f++)this.add(arguments[f]);return this}return o===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",o),this):(o&&o.isObject3D?(null!==o.parent&&o.parent.remove(o),o.parent=this,o.dispatchEvent({type:"added"}),this.children.push(o)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",o),this)},remove:function(o){if(arguments.length>1)for(var f=0;f<arguments.length;f++)this.remove(arguments[f]);var v=this.children.indexOf(o);-1!==v&&(o.parent=null,o.dispatchEvent({type:"removed"}),this.children.splice(v,1))},getObjectById:function(o){return this.getObjectByProperty("id",o)},getObjectByName:function(o){return this.getObjectByProperty("name",o)},getObjectByProperty:function(o,f){if(this[o]===f)return this;for(var v=0,x=this.children.length;v<x;v++){var G=this.children[v].getObjectByProperty(o,f);if(void 0!==G)return G}},getWorldPosition:function(o){var f=o||new Bn;return this.updateMatrixWorld(!0),f.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var o=new Bn,f=new Bn;return function(x){var P=x||new to;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(o,P,f),P}}(),getWorldRotation:function(){var o=new to;return function(v){var x=v||new Ga;return this.getWorldQuaternion(o),x.setFromQuaternion(o,this.rotation.order,!1)}}(),getWorldScale:function(){var o=new Bn,f=new to;return function(x){var P=x||new Bn;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(o,f,P),P}}(),getWorldDirection:function(){var o=new to;return function(v){var x=v||new Bn;return this.getWorldQuaternion(o),x.set(0,0,1).applyQuaternion(o)}}(),raycast:function(){},traverse:function(o){o(this);for(var f=this.children,v=0,x=f.length;v<x;v++)f[v].traverse(o)},traverseVisible:function(o){if(!1!==this.visible){o(this);for(var f=this.children,v=0,x=f.length;v<x;v++)f[v].traverseVisible(o)}},traverseAncestors:function(o){var f=this.parent;null!==f&&(o(f),f.traverseAncestors(o))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(o){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===o)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0);for(var f=this.children,v=0,x=f.length;v<x;v++)f[v].updateMatrixWorld(o)},toJSON:function(o){var f=void 0===o||""===o,v={};f&&(o={geometries:{},materials:{},textures:{},images:{}},v.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var x={};if(x.uuid=this.uuid,x.type=this.type,""!==this.name&&(x.name=this.name),"{}"!==JSON.stringify(this.userData)&&(x.userData=this.userData),!0===this.castShadow&&(x.castShadow=!0),!0===this.receiveShadow&&(x.receiveShadow=!0),!1===this.visible&&(x.visible=!1),x.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===o.geometries[this.geometry.uuid]&&(o.geometries[this.geometry.uuid]=this.geometry.toJSON(o)),x.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===o.materials[this.material.uuid]&&(o.materials[this.material.uuid]=this.material.toJSON(o)),x.material=this.material.uuid),this.children.length>0){x.children=[];for(var P=0;P<this.children.length;P++)x.children.push(this.children[P].toJSON(o).object)}if(f){var G=Me(o.geometries),J=Me(o.materials),se=Me(o.textures),Fe=Me(o.images);G.length>0&&(v.geometries=G),J.length>0&&(v.materials=J),se.length>0&&(v.textures=se),Fe.length>0&&(v.images=Fe)}return v.object=x,v;function Me(qe){var Qe=[];for(var ft in qe){var mt=qe[ft];delete mt.metadata,Qe.push(mt)}return Qe}},clone:function(o){return(new this.constructor).copy(this,o)},copy:function(o,f){if(void 0===f&&(f=!0),this.name=o.name,this.up.copy(o.up),this.position.copy(o.position),this.quaternion.copy(o.quaternion),this.scale.copy(o.scale),this.matrix.copy(o.matrix),this.matrixWorld.copy(o.matrixWorld),this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrixWorldNeedsUpdate=o.matrixWorldNeedsUpdate,this.layers.mask=o.layers.mask,this.visible=o.visible,this.castShadow=o.castShadow,this.receiveShadow=o.receiveShadow,this.frustumCulled=o.frustumCulled,this.renderOrder=o.renderOrder,this.userData=JSON.parse(JSON.stringify(o.userData)),!0===f)for(var v=0;v<o.children.length;v++)this.add(o.children[v].clone());return this}}),qu.prototype={constructor:qu,set:function(o,f){return this.start.copy(o),this.end.copy(f),this},clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.start.copy(o.start),this.end.copy(o.end),this},getCenter:function(o){return(o||new Bn).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(o){return(o||new Bn).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(o,f){var v=f||new Bn;return this.delta(v).multiplyScalar(o).add(this.start)},closestPointToPointParameter:function(){var o=new Bn,f=new Bn;return function(x,P){o.subVectors(x,this.start),f.subVectors(this.end,this.start);var G=f.dot(f),se=f.dot(o)/G;return P&&(se=An.clamp(se,0,1)),se}}(),closestPointToPoint:function(o,f,v){var x=this.closestPointToPointParameter(o,f),P=v||new Bn;return this.delta(P).multiplyScalar(x).add(this.start)},applyMatrix4:function(o){return this.start.applyMatrix4(o),this.end.applyMatrix4(o),this},equals:function(o){return o.start.equals(this.start)&&o.end.equals(this.end)}},Nl.normal=function(){var o=new Bn;return function(v,x,P,G){var J=G||new Bn;J.subVectors(P,x),o.subVectors(v,x),J.cross(o);var se=J.lengthSq();return se>0?J.multiplyScalar(1/Math.sqrt(se)):J.set(0,0,0)}}(),Nl.barycoordFromPoint=function(){var o=new Bn,f=new Bn,v=new Bn;return function(P,G,J,se,Fe){o.subVectors(se,G),f.subVectors(J,G),v.subVectors(P,G);var Me=o.dot(o),qe=o.dot(f),Qe=o.dot(v),ft=f.dot(f),mt=f.dot(v),vt=Me*ft-qe*qe,Kt=Fe||new Bn;if(0===vt)return Kt.set(-2,-1,-1);var Yt=1/vt,jt=(ft*Qe-qe*mt)*Yt,cn=(Me*mt-qe*Qe)*Yt;return Kt.set(1-jt-cn,cn,jt)}}(),Nl.containsPoint=function(){var o=new Bn;return function(v,x,P,G){var J=Nl.barycoordFromPoint(v,x,P,G,o);return J.x>=0&&J.y>=0&&J.x+J.y<=1}}(),Nl.prototype={constructor:Nl,set:function(o,f,v){return this.a.copy(o),this.b.copy(f),this.c.copy(v),this},setFromPointsAndIndices:function(o,f,v,x){return this.a.copy(o[f]),this.b.copy(o[v]),this.c.copy(o[x]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.a.copy(o.a),this.b.copy(o.b),this.c.copy(o.c),this},area:function(){var o=new Bn,f=new Bn;return function(){return o.subVectors(this.c,this.b),f.subVectors(this.a,this.b),.5*o.cross(f).length()}}(),midpoint:function(o){return(o||new Bn).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(o){return Nl.normal(this.a,this.b,this.c,o)},plane:function(o){return(o||new ln).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(o,f){return Nl.barycoordFromPoint(o,this.a,this.b,this.c,f)},containsPoint:function(o){return Nl.containsPoint(o,this.a,this.b,this.c)},closestPointToPoint:function(){var o,f,v,x;return function(G,J){void 0===o&&(o=new ln,f=[new qu,new qu,new qu],v=new Bn,x=new Bn);var se=J||new Bn,Fe=1/0;if(o.setFromCoplanarPoints(this.a,this.b,this.c),o.projectPoint(G,v),!0===this.containsPoint(v))se.copy(v);else{f[0].set(this.a,this.b),f[1].set(this.b,this.c),f[2].set(this.c,this.a);for(var Me=0;Me<f.length;Me++){f[Me].closestPointToPoint(v,!0,x);var qe=v.distanceToSquared(x);qe<Fe&&(Fe=qe,se.copy(x))}}return se}}(),equals:function(o){return o.a.equals(this.a)&&o.b.equals(this.b)&&o.c.equals(this.c)}},Yo.prototype={constructor:Yo,clone:function(){return(new this.constructor).copy(this)},copy:function(o){this.a=o.a,this.b=o.b,this.c=o.c,this.normal.copy(o.normal),this.color.copy(o.color),this.materialIndex=o.materialIndex;for(var f=0,v=o.vertexNormals.length;f<v;f++)this.vertexNormals[f]=o.vertexNormals[f].clone();for(f=0,v=o.vertexColors.length;f<v;f++)this.vertexColors[f]=o.vertexColors[f].clone();return this}},(eu.prototype=Object.create(lo.prototype)).constructor=eu,eu.prototype.isMeshBasicMaterial=!0,eu.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this},bs.prototype={constructor:bs,isBufferAttribute:!0,set needsUpdate(o){!0===o&&this.version++},setArray:function(o){if(Array.isArray(o))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==o?o.length/this.itemSize:0,this.array=o},setDynamic:function(o){return this.dynamic=o,this},copy:function(o){return this.array=new o.array.constructor(o.array),this.itemSize=o.itemSize,this.count=o.count,this.normalized=o.normalized,this.dynamic=o.dynamic,this},copyAt:function(o,f,v){o*=this.itemSize,v*=f.itemSize;for(var x=0,P=this.itemSize;x<P;x++)this.array[o+x]=f.array[v+x];return this},copyArray:function(o){return this.array.set(o),this},copyColorsArray:function(o){for(var f=this.array,v=0,x=0,P=o.length;x<P;x++){var G=o[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",x),G=new na),f[v++]=G.r,f[v++]=G.g,f[v++]=G.b}return this},copyIndicesArray:function(o){for(var f=this.array,v=0,x=0,P=o.length;x<P;x++){var G=o[x];f[v++]=G.a,f[v++]=G.b,f[v++]=G.c}return this},copyVector2sArray:function(o){for(var f=this.array,v=0,x=0,P=o.length;x<P;x++){var G=o[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",x),G=new qn),f[v++]=G.x,f[v++]=G.y}return this},copyVector3sArray:function(o){for(var f=this.array,v=0,x=0,P=o.length;x<P;x++){var G=o[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",x),G=new Bn),f[v++]=G.x,f[v++]=G.y,f[v++]=G.z}return this},copyVector4sArray:function(o){for(var f=this.array,v=0,x=0,P=o.length;x<P;x++){var G=o[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",x),G=new Pr),f[v++]=G.x,f[v++]=G.y,f[v++]=G.z,f[v++]=G.w}return this},set:function(o,f){return void 0===f&&(f=0),this.array.set(o,f),this},getX:function(o){return this.array[o*this.itemSize]},setX:function(o,f){return this.array[o*this.itemSize]=f,this},getY:function(o){return this.array[o*this.itemSize+1]},setY:function(o,f){return this.array[o*this.itemSize+1]=f,this},getZ:function(o){return this.array[o*this.itemSize+2]},setZ:function(o,f){return this.array[o*this.itemSize+2]=f,this},getW:function(o){return this.array[o*this.itemSize+3]},setW:function(o,f){return this.array[o*this.itemSize+3]=f,this},setXY:function(o,f,v){return this.array[0+(o*=this.itemSize)]=f,this.array[o+1]=v,this},setXYZ:function(o,f,v,x){return this.array[0+(o*=this.itemSize)]=f,this.array[o+1]=v,this.array[o+2]=x,this},setXYZW:function(o,f,v,x,P){return this.array[0+(o*=this.itemSize)]=f,this.array[o+1]=v,this.array[o+2]=x,this.array[o+3]=P,this},onUpload:function(o){return this.onUploadCallback=o,this},clone:function(){return(new this.constructor).copy(this)}},(Md.prototype=Object.create(bs.prototype)).constructor=Md,(Au.prototype=Object.create(bs.prototype)).constructor=Au,(Rf.prototype=Object.create(bs.prototype)).constructor=Rf,(Bp.prototype=Object.create(bs.prototype)).constructor=Bp,(Of.prototype=Object.create(bs.prototype)).constructor=Of,(cp.prototype=Object.create(bs.prototype)).constructor=cp,(Wh.prototype=Object.create(bs.prototype)).constructor=Wh,(ga.prototype=Object.create(bs.prototype)).constructor=ga,(Nc.prototype=Object.create(bs.prototype)).constructor=Nc,Object.assign(vm.prototype,{computeGroups:function(o){for(var f,v=[],x=void 0,P=o.faces,G=0;G<P.length;G++){var J=P[G];J.materialIndex!==x&&(x=J.materialIndex,void 0!==f&&(f.count=3*G-f.start,v.push(f)),f={start:3*G,materialIndex:x})}void 0!==f&&(f.count=3*G-f.start,v.push(f)),this.groups=v},fromGeometry:function(o){var Fe,f=o.faces,v=o.vertices,x=o.faceVertexUvs,P=x[0]&&x[0].length>0,G=x[1]&&x[1].length>0,J=o.morphTargets,se=J.length;if(se>0){Fe=[];for(var Me=0;Me<se;Me++)Fe[Me]=[];this.morphTargets.position=Fe}var ft,qe=o.morphNormals,Qe=qe.length;if(Qe>0){for(ft=[],Me=0;Me<Qe;Me++)ft[Me]=[];this.morphTargets.normal=ft}var mt=o.skinIndices,vt=o.skinWeights,Kt=mt.length===v.length,Yt=vt.length===v.length;for(Me=0;Me<f.length;Me++){var jt=f[Me];this.vertices.push(v[jt.a],v[jt.b],v[jt.c]);var cn=jt.vertexNormals;if(3===cn.length)this.normals.push(cn[0],cn[1],cn[2]);else{var fn=jt.normal;this.normals.push(fn,fn,fn)}var oi,Hn=jt.vertexColors;if(3===Hn.length)this.colors.push(Hn[0],Hn[1],Hn[2]);else{var Ln=jt.color;this.colors.push(Ln,Ln,Ln)}!0===P&&(void 0!==(oi=x[0][Me])?this.uvs.push(oi[0],oi[1],oi[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Me),this.uvs.push(new qn,new qn,new qn))),!0===G&&(void 0!==(oi=x[1][Me])?this.uvs2.push(oi[0],oi[1],oi[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Me),this.uvs2.push(new qn,new qn,new qn)));for(var Jn=0;Jn<se;Jn++){var Xn=J[Jn].vertices;Fe[Jn].push(Xn[jt.a],Xn[jt.b],Xn[jt.c])}for(Jn=0;Jn<Qe;Jn++){var ci=qe[Jn].vertexNormals[Me];ft[Jn].push(ci.a,ci.b,ci.c)}Kt&&this.skinIndices.push(mt[jt.a],mt[jt.b],mt[jt.c]),Yt&&this.skinWeights.push(vt[jt.a],vt[jt.b],vt[jt.c])}return this.computeGroups(o),this.verticesNeedUpdate=o.verticesNeedUpdate,this.normalsNeedUpdate=o.normalsNeedUpdate,this.colorsNeedUpdate=o.colorsNeedUpdate,this.uvsNeedUpdate=o.uvsNeedUpdate,this.groupsNeedUpdate=o.groupsNeedUpdate,this}}),Object.assign(Ba.prototype,ye.prototype,{isGeometry:!0,applyMatrix:function(o){for(var f=(new vn).getNormalMatrix(o),v=0,x=this.vertices.length;v<x;v++)this.vertices[v].applyMatrix4(o);for(v=0,x=this.faces.length;v<x;v++){var G=this.faces[v];G.normal.applyMatrix3(f).normalize();for(var J=0,se=G.vertexNormals.length;J<se;J++)G.vertexNormals[J].applyMatrix3(f).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var o;return function(v){return void 0===o&&(o=new Zs),o.makeRotationX(v),this.applyMatrix(o),this}}(),rotateY:function(){var o;return function(v){return void 0===o&&(o=new Zs),o.makeRotationY(v),this.applyMatrix(o),this}}(),rotateZ:function(){var o;return function(v){return void 0===o&&(o=new Zs),o.makeRotationZ(v),this.applyMatrix(o),this}}(),translate:function(){var o;return function(v,x,P){return void 0===o&&(o=new Zs),o.makeTranslation(v,x,P),this.applyMatrix(o),this}}(),scale:function(){var o;return function(v,x,P){return void 0===o&&(o=new Zs),o.makeScale(v,x,P),this.applyMatrix(o),this}}(),lookAt:function(){var o;return function(v){void 0===o&&(o=new Es),o.lookAt(v),o.updateMatrix(),this.applyMatrix(o.matrix)}}(),fromBufferGeometry:function(o){var f=this,v=null!==o.index?o.index.array:void 0,x=o.attributes,P=x.position.array,G=void 0!==x.normal?x.normal.array:void 0,J=void 0!==x.color?x.color.array:void 0,se=void 0!==x.uv?x.uv.array:void 0,Fe=void 0!==x.uv2?x.uv2.array:void 0;void 0!==Fe&&(this.faceVertexUvs[1]=[]);for(var Me=[],qe=[],Qe=[],ft=0,mt=0;ft<P.length;ft+=3,mt+=2)f.vertices.push(new Bn(P[ft],P[ft+1],P[ft+2])),void 0!==G&&Me.push(new Bn(G[ft],G[ft+1],G[ft+2])),void 0!==J&&f.colors.push(new na(J[ft],J[ft+1],J[ft+2])),void 0!==se&&qe.push(new qn(se[mt],se[mt+1])),void 0!==Fe&&Qe.push(new qn(Fe[mt],Fe[mt+1]));function vt(Hn,Ln,oi,Jn){var Li=new Yo(Hn,Ln,oi,void 0!==G?[Me[Hn].clone(),Me[Ln].clone(),Me[oi].clone()]:[],void 0!==J?[f.colors[Hn].clone(),f.colors[Ln].clone(),f.colors[oi].clone()]:[],Jn);f.faces.push(Li),void 0!==se&&f.faceVertexUvs[0].push([qe[Hn].clone(),qe[Ln].clone(),qe[oi].clone()]),void 0!==Fe&&f.faceVertexUvs[1].push([Qe[Hn].clone(),Qe[Ln].clone(),Qe[oi].clone()])}if(void 0!==v){var Kt=o.groups;if(Kt.length>0)for(ft=0;ft<Kt.length;ft++)for(var Yt=Kt[ft],jt=Yt.start,fn=(mt=jt,jt+Yt.count);mt<fn;mt+=3)vt(v[mt],v[mt+1],v[mt+2],Yt.materialIndex);else for(ft=0;ft<v.length;ft+=3)vt(v[ft],v[ft+1],v[ft+2])}else for(ft=0;ft<P.length/3;ft+=3)vt(ft,ft+1,ft+2);return this.computeFaceNormals(),null!==o.boundingBox&&(this.boundingBox=o.boundingBox.clone()),null!==o.boundingSphere&&(this.boundingSphere=o.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var o=this.boundingBox.getCenter().negate();return this.translate(o.x,o.y,o.z),o},normalize:function(){this.computeBoundingSphere();var o=this.boundingSphere.center,f=this.boundingSphere.radius,v=0===f?1:1/f,x=new Zs;return x.set(v,0,0,-v*o.x,0,v,0,-v*o.y,0,0,v,-v*o.z,0,0,0,1),this.applyMatrix(x),this},computeFaceNormals:function(){for(var o=new Bn,f=new Bn,v=0,x=this.faces.length;v<x;v++){var P=this.faces[v],G=this.vertices[P.a],J=this.vertices[P.b];o.subVectors(this.vertices[P.c],J),f.subVectors(G,J),o.cross(f),o.normalize(),P.normal.copy(o)}},computeVertexNormals:function(o){var f,v,x,P,G,J;for(void 0===o&&(o=!0),J=new Array(this.vertices.length),f=0,v=this.vertices.length;f<v;f++)J[f]=new Bn;if(o){var se,Fe,qe=new Bn,Qe=new Bn;for(x=0,P=this.faces.length;x<P;x++)se=this.vertices[(G=this.faces[x]).a],qe.subVectors(this.vertices[G.c],Fe=this.vertices[G.b]),Qe.subVectors(se,Fe),qe.cross(Qe),J[G.a].add(qe),J[G.b].add(qe),J[G.c].add(qe)}else for(this.computeFaceNormals(),x=0,P=this.faces.length;x<P;x++)J[(G=this.faces[x]).a].add(G.normal),J[G.b].add(G.normal),J[G.c].add(G.normal);for(f=0,v=this.vertices.length;f<v;f++)J[f].normalize();for(x=0,P=this.faces.length;x<P;x++){var ft=(G=this.faces[x]).vertexNormals;3===ft.length?(ft[0].copy(J[G.a]),ft[1].copy(J[G.b]),ft[2].copy(J[G.c])):(ft[0]=J[G.a].clone(),ft[1]=J[G.b].clone(),ft[2]=J[G.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var o,f,v;for(this.computeFaceNormals(),o=0,f=this.faces.length;o<f;o++){var x=(v=this.faces[o]).vertexNormals;3===x.length?(x[0].copy(v.normal),x[1].copy(v.normal),x[2].copy(v.normal)):(x[0]=v.normal.clone(),x[1]=v.normal.clone(),x[2]=v.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var o,f,v,x,P;for(v=0,x=this.faces.length;v<x;v++)for((P=this.faces[v]).__originalFaceNormal?P.__originalFaceNormal.copy(P.normal):P.__originalFaceNormal=P.normal.clone(),P.__originalVertexNormals||(P.__originalVertexNormals=[]),o=0,f=P.vertexNormals.length;o<f;o++)P.__originalVertexNormals[o]?P.__originalVertexNormals[o].copy(P.vertexNormals[o]):P.__originalVertexNormals[o]=P.vertexNormals[o].clone();var G=new Ba;for(G.faces=this.faces,o=0,f=this.morphTargets.length;o<f;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];var J=this.morphNormals[o].faceNormals,se=this.morphNormals[o].vertexNormals;for(v=0,x=this.faces.length;v<x;v++)Me=new Bn,qe={a:new Bn,b:new Bn,c:new Bn},J.push(Me),se.push(qe)}var Me,qe,Fe=this.morphNormals[o];for(G.vertices=this.morphTargets[o].vertices,G.computeFaceNormals(),G.computeVertexNormals(),v=0,x=this.faces.length;v<x;v++)qe=Fe.vertexNormals[v],(Me=Fe.faceNormals[v]).copy((P=this.faces[v]).normal),qe.a.copy(P.vertexNormals[0]),qe.b.copy(P.vertexNormals[1]),qe.c.copy(P.vertexNormals[2])}for(v=0,x=this.faces.length;v<x;v++)(P=this.faces[v]).normal=P.__originalFaceNormal,P.vertexNormals=P.__originalVertexNormals},computeLineDistances:function(){for(var o=0,f=this.vertices,v=0,x=f.length;v<x;v++)v>0&&(o+=f[v].distanceTo(f[v-1])),this.lineDistances[v]=o},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Na),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(o,f,v){if(!1!==(o&&o.isGeometry)){var x,P=this.vertices.length,G=this.vertices,J=o.vertices,se=this.faces,Fe=o.faces,Me=this.faceVertexUvs[0],qe=o.faceVertexUvs[0],Qe=this.colors,ft=o.colors;void 0===v&&(v=0),void 0!==f&&(x=(new vn).getNormalMatrix(f));for(var mt=0,vt=J.length;mt<vt;mt++){var Yt=J[mt].clone();void 0!==f&&Yt.applyMatrix4(f),G.push(Yt)}for(mt=0,vt=ft.length;mt<vt;mt++)Qe.push(ft[mt].clone());for(mt=0,vt=Fe.length;mt<vt;mt++){var cn,fn,jt=Fe[mt],Ln=jt.vertexNormals,oi=jt.vertexColors;(cn=new Yo(jt.a+P,jt.b+P,jt.c+P)).normal.copy(jt.normal),void 0!==x&&cn.normal.applyMatrix3(x).normalize();for(var Jn=0,Xn=Ln.length;Jn<Xn;Jn++)fn=Ln[Jn].clone(),void 0!==x&&fn.applyMatrix3(x).normalize(),cn.vertexNormals.push(fn);for(cn.color.copy(jt.color),Jn=0,Xn=oi.length;Jn<Xn;Jn++)cn.vertexColors.push(oi[Jn].clone());cn.materialIndex=jt.materialIndex+v,se.push(cn)}for(mt=0,vt=qe.length;mt<vt;mt++){var ci=qe[mt],Li=[];if(void 0!==ci){for(Jn=0,Xn=ci.length;Jn<Xn;Jn++)Li.push(ci[Jn].clone());Me.push(Li)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",o)},mergeMesh:function(o){!1!==(o&&o.isMesh)?(o.matrixAutoUpdate&&o.updateMatrix(),this.merge(o.geometry,o.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",o)},mergeVertices:function(){var x,P,se,Fe,Me,qe,Qe,ft,o={},f=[],v=[],J=Math.pow(10,4);for(se=0,Fe=this.vertices.length;se<Fe;se++)x=this.vertices[se],void 0===o[P=Math.round(x.x*J)+"_"+Math.round(x.y*J)+"_"+Math.round(x.z*J)]?(o[P]=se,f.push(this.vertices[se]),v[se]=f.length-1):v[se]=v[o[P]];var mt=[];for(se=0,Fe=this.faces.length;se<Fe;se++){(Me=this.faces[se]).a=v[Me.a],Me.b=v[Me.b],Me.c=v[Me.c],qe=[Me.a,Me.b,Me.c];for(var Kt=0;Kt<3;Kt++)if(qe[Kt]===qe[(Kt+1)%3]){mt.push(se);break}}for(se=mt.length-1;se>=0;se--){var Yt=mt[se];for(this.faces.splice(Yt,1),Qe=0,ft=this.faceVertexUvs.length;Qe<ft;Qe++)this.faceVertexUvs[Qe].splice(Yt,1)}var jt=this.vertices.length-f.length;return this.vertices=f,jt},sortFacesByMaterialIndex:function(){for(var o=this.faces,f=o.length,v=0;v<f;v++)o[v]._id=v;o.sort(function x(Me,qe){return Me.materialIndex-qe.materialIndex});var J,se,P=this.faceVertexUvs[0],G=this.faceVertexUvs[1];for(P&&P.length===f&&(J=[]),G&&G.length===f&&(se=[]),v=0;v<f;v++){var Fe=o[v]._id;J&&J.push(P[Fe]),se&&se.push(G[Fe])}J&&(this.faceVertexUvs[0]=J),se&&(this.faceVertexUvs[1]=se)},toJSON:function(){var o={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),void 0!==this.parameters){var f=this.parameters;for(var v in f)void 0!==f[v]&&(o[v]=f[v]);return o}for(var x=[],P=0;P<this.vertices.length;P++){var G=this.vertices[P];x.push(G.x,G.y,G.z)}var J=[],se=[],Fe={},Me=[],qe={},Qe=[],ft={};for(P=0;P<this.faces.length;P++){var mt=this.faces[P],Yt=void 0!==this.faceVertexUvs[0][P],jt=mt.normal.length()>0,cn=mt.vertexNormals.length>0,fn=1!==mt.color.r||1!==mt.color.g||1!==mt.color.b,Hn=mt.vertexColors.length>0,Ln=0;if(Ln=ci(Ln,0,0),Ln=ci(Ln,1,!0),Ln=ci(Ln,2,!1),Ln=ci(Ln,3,Yt),Ln=ci(Ln,4,jt),Ln=ci(Ln,5,cn),Ln=ci(Ln,6,fn),Ln=ci(Ln,7,Hn),J.push(Ln),J.push(mt.a,mt.b,mt.c),J.push(mt.materialIndex),Yt){var oi=this.faceVertexUvs[0][P];J.push(dr(oi[0]),dr(oi[1]),dr(oi[2]))}if(jt&&J.push(Li(mt.normal)),cn){var Jn=mt.vertexNormals;J.push(Li(Jn[0]),Li(Jn[1]),Li(Jn[2]))}if(fn&&J.push(Tr(mt.color)),Hn){var Xn=mt.vertexColors;J.push(Tr(Xn[0]),Tr(Xn[1]),Tr(Xn[2]))}}function ci(zn,Un,Gi){return Gi?zn|1<<Un:zn&~(1<<Un)}function Li(zn){var Un=zn.x.toString()+zn.y.toString()+zn.z.toString();return void 0!==Fe[Un]||(Fe[Un]=se.length/3,se.push(zn.x,zn.y,zn.z)),Fe[Un]}function Tr(zn){var Un=zn.r.toString()+zn.g.toString()+zn.b.toString();return void 0!==qe[Un]||(qe[Un]=Me.length,Me.push(zn.getHex())),qe[Un]}function dr(zn){var Un=zn.x.toString()+zn.y.toString();return void 0!==ft[Un]||(ft[Un]=Qe.length/2,Qe.push(zn.x,zn.y)),ft[Un]}return o.data={},o.data.vertices=x,o.data.normals=se,Me.length>0&&(o.data.colors=Me),Qe.length>0&&(o.data.uvs=[Qe]),o.data.faces=J,o},clone:function(){return(new Ba).copy(this)},copy:function(o){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var f=o.vertices,v=0,x=f.length;v<x;v++)this.vertices.push(f[v].clone());var P=o.colors;for(v=0,x=P.length;v<x;v++)this.colors.push(P[v].clone());var G=o.faces;for(v=0,x=G.length;v<x;v++)this.faces.push(G[v].clone());for(v=0,x=o.faceVertexUvs.length;v<x;v++){var J=o.faceVertexUvs[v];void 0===this.faceVertexUvs[v]&&(this.faceVertexUvs[v]=[]);for(var se=0,Fe=J.length;se<Fe;se++){for(var Me=J[se],qe=[],Qe=0,ft=Me.length;Qe<ft;Qe++)qe.push(Me[Qe].clone());this.faceVertexUvs[v].push(qe)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Kv=0;function _m(){return Kv++}function Bs(){Object.defineProperty(this,"id",{value:_m()}),this.uuid=An.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Bl(o,f){Es.call(this),this.type="Mesh",this.geometry=void 0!==o?o:new Bs,this.material=void 0!==f?f:new eu({color:16777215*Math.random()}),this.drawMode=rs,this.updateMorphTargets()}function Xu(o,f,v,x,P,G){Bs.call(this),this.type="BoxBufferGeometry",this.parameters={width:o,height:f,depth:v,widthSegments:x,heightSegments:P,depthSegments:G};var J=this,se=function cn(Ln,oi,Jn){var Xn=0;return Xn+=(Ln+1)*(oi+1)*2,(Xn+=(Ln+1)*(Jn+1)*2)+(Jn+1)*(oi+1)*2}(x=Math.floor(x)||1,P=Math.floor(P)||1,G=Math.floor(G)||1),Fe=function fn(Ln,oi,Jn){var Xn=0;return Xn+=Ln*oi*2,6*((Xn+=Ln*Jn*2)+Jn*oi*2)}(x,P,G),Me=new(Fe>65535?Uint32Array:Uint16Array)(Fe),qe=new Float32Array(3*se),Qe=new Float32Array(3*se),ft=new Float32Array(2*se),mt=0,vt=0,Kt=0,Yt=0,jt=0;function Hn(Ln,oi,Jn,Xn,ci,Li,Tr,dr,zn,Un,Gi){for(var tr=Li/zn,Mr=Tr/Un,xr=Li/2,gr=Tr/2,fs=dr/2,Wr=zn+1,$i=Un+1,Ui=0,g=0,c=new Bn,p=0;p<$i;p++)for(var b=p*Mr-gr,A=0;A<Wr;A++)c[Ln]=(A*tr-xr)*Xn,c[oi]=b*ci,c[Jn]=fs,qe[mt]=c.x,qe[mt+1]=c.y,qe[mt+2]=c.z,c[Ln]=0,c[oi]=0,c[Jn]=dr>0?1:-1,Qe[mt]=c.x,Qe[mt+1]=c.y,Qe[mt+2]=c.z,ft[vt]=A/zn,ft[vt+1]=1-p/Un,mt+=3,vt+=2,Ui+=1;for(p=0;p<Un;p++)for(A=0;A<zn;A++){var U=Yt+A+Wr*(p+1),ne=Yt+(A+1)+Wr*(p+1),X=Yt+(A+1)+Wr*p;Me[Kt]=Yt+A+Wr*p,Me[Kt+1]=U,Me[Kt+2]=X,Me[Kt+3]=U,Me[Kt+4]=ne,Me[Kt+5]=X,Kt+=6,g+=6}J.addGroup(jt,g,Gi),jt+=g,Yt+=Ui}Hn("z","y","x",-1,-1,v,f,o,G,P,0),Hn("z","y","x",1,-1,v,f,-o,G,P,1),Hn("x","z","y",1,1,o,v,f,x,G,2),Hn("x","z","y",1,-1,o,v,-f,x,G,3),Hn("x","y","z",1,-1,o,f,v,x,P,4),Hn("x","y","z",-1,-1,o,f,-v,x,P,5),this.setIndex(new bs(Me,1)),this.addAttribute("position",new bs(qe,3)),this.addAttribute("normal",new bs(Qe,3)),this.addAttribute("uv",new bs(ft,2))}function yl(o,f,v,x){Bs.call(this),this.type="PlaneBufferGeometry",this.parameters={width:o,height:f,widthSegments:v,heightSegments:x};for(var P=o/2,G=f/2,J=Math.floor(v)||1,se=Math.floor(x)||1,Fe=J+1,Me=se+1,qe=o/J,Qe=f/se,ft=new Float32Array(Fe*Me*3),mt=new Float32Array(Fe*Me*3),vt=new Float32Array(Fe*Me*2),Kt=0,Yt=0,jt=0;jt<Me;jt++)for(var cn=jt*Qe-G,fn=0;fn<Fe;fn++)ft[Kt]=fn*qe-P,ft[Kt+1]=-cn,mt[Kt+2]=1,vt[Yt]=fn/J,vt[Yt+1]=1-jt/se,Kt+=3,Yt+=2;Kt=0;var Ln=new(ft.length/3>65535?Uint32Array:Uint16Array)(J*se*6);for(jt=0;jt<se;jt++)for(fn=0;fn<J;fn++){var Jn=fn+Fe*(jt+1),Xn=fn+1+Fe*(jt+1),ci=fn+1+Fe*jt;Ln[Kt]=fn+Fe*jt,Ln[Kt+1]=Jn,Ln[Kt+2]=ci,Ln[Kt+3]=Jn,Ln[Kt+4]=Xn,Ln[Kt+5]=ci,Kt+=6}this.setIndex(new bs(Ln,1)),this.addAttribute("position",new bs(ft,3)),this.addAttribute("normal",new bs(mt,3)),this.addAttribute("uv",new bs(vt,2))}function tu(){Es.call(this),this.type="Camera",this.matrixWorldInverse=new Zs,this.projectionMatrix=new Zs}function ku(o,f,v,x){tu.call(this),this.type="PerspectiveCamera",this.fov=void 0!==o?o:50,this.zoom=1,this.near=void 0!==v?v:.1,this.far=void 0!==x?x:2e3,this.focus=10,this.aspect=void 0!==f?f:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ff(o,f,v,x,P,G){tu.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=o,this.right=f,this.top=v,this.bottom=x,this.near=void 0!==P?P:.1,this.far=void 0!==G?G:2e3,this.updateProjectionMatrix()}function yc(o,f,v){var x,G,J;return{setMode:function P(qe){x=qe},setIndex:function se(qe){qe.array instanceof Uint32Array&&f.get("OES_element_index_uint")?(G=o.UNSIGNED_INT,J=4):qe.array instanceof Uint16Array?(G=o.UNSIGNED_SHORT,J=2):(G=o.UNSIGNED_BYTE,J=1)},render:function Fe(qe,Qe){o.drawElements(x,Qe,G,qe*J),v.calls++,v.vertices+=Qe,x===o.TRIANGLES&&(v.faces+=Qe/3)},renderInstances:function Me(qe,Qe,ft){var mt=f.get("ANGLE_instanced_arrays");null!==mt?(mt.drawElementsInstancedANGLE(x,ft,G,Qe*J,qe.maxInstancedCount),v.calls++,v.vertices+=ft*qe.maxInstancedCount,x===o.TRIANGLES&&(v.faces+=qe.maxInstancedCount*ft/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function hp(o,f,v){var x;return{setMode:function P(se){x=se},render:function G(se,Fe){o.drawArrays(x,se,Fe),v.calls++,v.vertices+=Fe,x===o.TRIANGLES&&(v.faces+=Fe/3)},renderInstances:function J(se){var Fe=f.get("ANGLE_instanced_arrays");if(null!==Fe){var Me=se.attributes.position,qe=0;Fe.drawArraysInstancedANGLE(x,0,qe=Me.isInterleavedBufferAttribute?Me.data.count:Me.count,se.maxInstancedCount),v.calls++,v.vertices+=qe*se.maxInstancedCount,x===o.TRIANGLES&&(v.faces+=se.maxInstancedCount*qe/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function nu(){var o={};return{get:function(f){if(void 0!==o[f.id])return o[f.id];var v;switch(f.type){case"DirectionalLight":v={direction:new Bn,color:new na,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new qn};break;case"SpotLight":v={position:new Bn,direction:new Bn,color:new na,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new qn};break;case"PointLight":v={position:new Bn,color:new na,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new qn};break;case"HemisphereLight":v={direction:new Bn,skyColor:new na,groundColor:new na};break;case"RectAreaLight":v={color:new na,position:new Bn,halfWidth:new Bn,halfHeight:new Bn}}return o[f.id]=v,v}}}function Qv(o,f,v){var x=o.createShader(f);return o.shaderSource(x,v),o.compileShader(x),!1===o.getShaderParameter(x,o.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==o.getShaderInfoLog(x)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",f===o.VERTEX_SHADER?"vertex":"fragment",o.getShaderInfoLog(x),function Zv(o){for(var f=o.split("\n"),v=0;v<f.length;v++)f[v]=v+1+": "+f[v];return f.join("\n")}(v)),x}Object.assign(Bs.prototype,ye.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(o){this.index=o},addAttribute:function(o,f){return!1===(f&&f.isBufferAttribute)&&!1===(f&&f.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(o,new bs(arguments[1],arguments[2]))):"index"===o?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(f)):(this.attributes[o]=f,this)},getAttribute:function(o){return this.attributes[o]},removeAttribute:function(o){return delete this.attributes[o],this},addGroup:function(o,f,v){this.groups.push({start:o,count:f,materialIndex:void 0!==v?v:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(o,f){this.drawRange.start=o,this.drawRange.count=f},applyMatrix:function(o){var f=this.attributes.position;void 0!==f&&(o.applyToVector3Array(f.array),f.needsUpdate=!0);var v=this.attributes.normal;return void 0!==v&&((new vn).getNormalMatrix(o).applyToVector3Array(v.array),v.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var o;return function(v){return void 0===o&&(o=new Zs),o.makeRotationX(v),this.applyMatrix(o),this}}(),rotateY:function(){var o;return function(v){return void 0===o&&(o=new Zs),o.makeRotationY(v),this.applyMatrix(o),this}}(),rotateZ:function(){var o;return function(v){return void 0===o&&(o=new Zs),o.makeRotationZ(v),this.applyMatrix(o),this}}(),translate:function(){var o;return function(v,x,P){return void 0===o&&(o=new Zs),o.makeTranslation(v,x,P),this.applyMatrix(o),this}}(),scale:function(){var o;return function(v,x,P){return void 0===o&&(o=new Zs),o.makeScale(v,x,P),this.applyMatrix(o),this}}(),lookAt:function(){var o;return function(v){void 0===o&&(o=new Es),o.lookAt(v),o.updateMatrix(),this.applyMatrix(o.matrix)}}(),center:function(){this.computeBoundingBox();var o=this.boundingBox.getCenter().negate();return this.translate(o.x,o.y,o.z),o},setFromObject:function(o){var f=o.geometry;if(o.isPoints||o.isLine){var v=new ga(3*f.vertices.length,3),x=new ga(3*f.colors.length,3);if(this.addAttribute("position",v.copyVector3sArray(f.vertices)),this.addAttribute("color",x.copyColorsArray(f.colors)),f.lineDistances&&f.lineDistances.length===f.vertices.length){var P=new ga(f.lineDistances.length,1);this.addAttribute("lineDistance",P.copyArray(f.lineDistances))}null!==f.boundingSphere&&(this.boundingSphere=f.boundingSphere.clone()),null!==f.boundingBox&&(this.boundingBox=f.boundingBox.clone())}else o.isMesh&&f&&f.isGeometry&&this.fromGeometry(f);return this},updateFromObject:function(o){var x,f=o.geometry;if(o.isMesh){var v=f.__directGeometry;if(!0===f.elementsNeedUpdate&&(v=void 0,f.elementsNeedUpdate=!1),void 0===v)return this.fromGeometry(f);v.verticesNeedUpdate=f.verticesNeedUpdate,v.normalsNeedUpdate=f.normalsNeedUpdate,v.colorsNeedUpdate=f.colorsNeedUpdate,v.uvsNeedUpdate=f.uvsNeedUpdate,v.groupsNeedUpdate=f.groupsNeedUpdate,f.verticesNeedUpdate=!1,f.normalsNeedUpdate=!1,f.colorsNeedUpdate=!1,f.uvsNeedUpdate=!1,f.groupsNeedUpdate=!1,f=v}return!0===f.verticesNeedUpdate&&(void 0!==(x=this.attributes.position)&&(x.copyVector3sArray(f.vertices),x.needsUpdate=!0),f.verticesNeedUpdate=!1),!0===f.normalsNeedUpdate&&(void 0!==(x=this.attributes.normal)&&(x.copyVector3sArray(f.normals),x.needsUpdate=!0),f.normalsNeedUpdate=!1),!0===f.colorsNeedUpdate&&(void 0!==(x=this.attributes.color)&&(x.copyColorsArray(f.colors),x.needsUpdate=!0),f.colorsNeedUpdate=!1),f.uvsNeedUpdate&&(void 0!==(x=this.attributes.uv)&&(x.copyVector2sArray(f.uvs),x.needsUpdate=!0),f.uvsNeedUpdate=!1),f.lineDistancesNeedUpdate&&(void 0!==(x=this.attributes.lineDistance)&&(x.copyArray(f.lineDistances),x.needsUpdate=!0),f.lineDistancesNeedUpdate=!1),f.groupsNeedUpdate&&(f.computeGroups(o.geometry),this.groups=f.groups,f.groupsNeedUpdate=!1),this},fromGeometry:function(o){return o.__directGeometry=(new vm).fromGeometry(o),this.fromDirectGeometry(o.__directGeometry)},fromDirectGeometry:function(o){var f=new Float32Array(3*o.vertices.length);if(this.addAttribute("position",new bs(f,3).copyVector3sArray(o.vertices)),o.normals.length>0){var v=new Float32Array(3*o.normals.length);this.addAttribute("normal",new bs(v,3).copyVector3sArray(o.normals))}if(o.colors.length>0){var x=new Float32Array(3*o.colors.length);this.addAttribute("color",new bs(x,3).copyColorsArray(o.colors))}if(o.uvs.length>0){var P=new Float32Array(2*o.uvs.length);this.addAttribute("uv",new bs(P,2).copyVector2sArray(o.uvs))}if(o.uvs2.length>0){var G=new Float32Array(2*o.uvs2.length);this.addAttribute("uv2",new bs(G,2).copyVector2sArray(o.uvs2))}if(o.indices.length>0){var se=new(o.vertices.length>65535?Uint32Array:Uint16Array)(3*o.indices.length);this.setIndex(new bs(se,1).copyIndicesArray(o.indices))}for(var Fe in this.groups=o.groups,o.morphTargets){for(var Me=[],qe=o.morphTargets[Fe],Qe=0,ft=qe.length;Qe<ft;Qe++){var mt=qe[Qe],vt=new ga(3*mt.length,3);Me.push(vt.copyVector3sArray(mt))}this.morphAttributes[Fe]=Me}if(o.skinIndices.length>0){var Kt=new ga(4*o.skinIndices.length,4);this.addAttribute("skinIndex",Kt.copyVector4sArray(o.skinIndices))}if(o.skinWeights.length>0){var Yt=new ga(4*o.skinWeights.length,4);this.addAttribute("skinWeight",Yt.copyVector4sArray(o.skinWeights))}return null!==o.boundingSphere&&(this.boundingSphere=o.boundingSphere.clone()),null!==o.boundingBox&&(this.boundingBox=o.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Na);var o=this.attributes.position;void 0!==o?this.boundingBox.setFromBufferAttribute(o):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var o=new Na,f=new Bn;return function(){null===this.boundingSphere&&(this.boundingSphere=new gn);var x=this.attributes.position;if(x){var P=this.boundingSphere.center;o.setFromBufferAttribute(x),o.getCenter(P);for(var G=0,J=0,se=x.count;J<se;J++)f.x=x.getX(J),f.y=x.getY(J),f.z=x.getZ(J),G=Math.max(G,P.distanceToSquared(f));this.boundingSphere.radius=Math.sqrt(G),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var o=this.index,f=this.attributes,v=this.groups;if(f.position){var x=f.position.array;if(void 0===f.normal)this.addAttribute("normal",new bs(new Float32Array(x.length),3));else for(var P=f.normal.array,G=0,J=P.length;G<J;G++)P[G]=0;var Fe,Me,qe,se=f.normal.array,Qe=new Bn,ft=new Bn,mt=new Bn,vt=new Bn,Kt=new Bn;if(o){var Yt=o.array;0===v.length&&this.addGroup(0,Yt.length);for(var jt=0,cn=v.length;jt<cn;++jt){var fn=v[jt],Hn=fn.start;for(G=Hn,J=Hn+fn.count;G<J;G+=3)Me=3*Yt[G+1],qe=3*Yt[G+2],Qe.fromArray(x,Fe=3*Yt[G+0]),ft.fromArray(x,Me),mt.fromArray(x,qe),vt.subVectors(mt,ft),Kt.subVectors(Qe,ft),vt.cross(Kt),se[Fe]+=vt.x,se[Fe+1]+=vt.y,se[Fe+2]+=vt.z,se[Me]+=vt.x,se[Me+1]+=vt.y,se[Me+2]+=vt.z,se[qe]+=vt.x,se[qe+1]+=vt.y,se[qe+2]+=vt.z}}else for(G=0,J=x.length;G<J;G+=9)Qe.fromArray(x,G),ft.fromArray(x,G+3),mt.fromArray(x,G+6),vt.subVectors(mt,ft),Kt.subVectors(Qe,ft),vt.cross(Kt),se[G]=vt.x,se[G+1]=vt.y,se[G+2]=vt.z,se[G+3]=vt.x,se[G+4]=vt.y,se[G+5]=vt.z,se[G+6]=vt.x,se[G+7]=vt.y,se[G+8]=vt.z;this.normalizeNormals(),f.normal.needsUpdate=!0}},merge:function(o,f){if(!1!==(o&&o.isBufferGeometry)){void 0===f&&(f=0);var v=this.attributes;for(var x in v)if(void 0!==o.attributes[x])for(var G=v[x].array,J=o.attributes[x],se=J.array,Me=0,qe=J.itemSize*f;Me<se.length;Me++,qe++)G[qe]=se[Me];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",o)},normalizeNormals:function(){for(var f,v,x,P,o=this.attributes.normal.array,G=0,J=o.length;G<J;G+=3)f=o[G],v=o[G+1],x=o[G+2],P=1/Math.sqrt(f*f+v*v+x*x),o[G]*=P,o[G+1]*=P,o[G+2]*=P},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var o=new Bs,f=this.index.array,v=this.attributes;for(var x in v){for(var P=v[x],G=P.array,J=P.itemSize,se=new G.constructor(f.length*J),Fe=0,Me=0,qe=0,Qe=f.length;qe<Qe;qe++){Fe=f[qe]*J;for(var ft=0;ft<J;ft++)se[Me++]=G[Fe++]}o.addAttribute(x,new bs(se,J))}return o},toJSON:function(){var o={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),void 0!==this.parameters){var f=this.parameters;for(var v in f)void 0!==f[v]&&(o[v]=f[v]);return o}o.data={attributes:{}};var x=this.index;if(null!==x){var P=Array.prototype.slice.call(x.array);o.data.index={type:x.array.constructor.name,array:P}}var G=this.attributes;for(var v in G){var J=G[v];P=Array.prototype.slice.call(J.array),o.data.attributes[v]={itemSize:J.itemSize,type:J.array.constructor.name,array:P,normalized:J.normalized}}var se=this.groups;se.length>0&&(o.data.groups=JSON.parse(JSON.stringify(se)));var Fe=this.boundingSphere;return null!==Fe&&(o.data.boundingSphere={center:Fe.center.toArray(),radius:Fe.radius}),o},clone:function(){return(new Bs).copy(this)},copy:function(o){var f=o.index;null!==f&&this.setIndex(f.clone());var v=o.attributes;for(var x in v)this.addAttribute(x,v[x].clone());for(var G=o.groups,J=0,se=G.length;J<se;J++){var Fe=G[J];this.addGroup(Fe.start,Fe.count,Fe.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Bs.MaxIndex=65535,Bl.prototype=Object.assign(Object.create(Es.prototype),{constructor:Bl,isMesh:!0,setDrawMode:function(o){this.drawMode=o},copy:function(o){return Es.prototype.copy.call(this,o),this.drawMode=o.drawMode,this},updateMorphTargets:function(){var o=this.geometry.morphTargets;if(void 0!==o&&o.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var f=0,v=o.length;f<v;f++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[o[f].name]=f}},raycast:function(){var o=new Zs,f=new _l,v=new gn,x=new Bn,P=new Bn,G=new Bn,J=new Bn,se=new Bn,Fe=new Bn,Me=new qn,qe=new qn,Qe=new qn,ft=new Bn,mt=new Bn,vt=new Bn;function Kt(cn,fn,Hn,Ln,oi,Jn,Xn){return Nl.barycoordFromPoint(cn,fn,Hn,Ln,ft),oi.multiplyScalar(ft.x),Jn.multiplyScalar(ft.y),Xn.multiplyScalar(ft.z),oi.add(Jn).add(Xn),oi.clone()}function Yt(cn,fn,Hn,Ln,oi,Jn,Xn){var Li=cn.material;if(null===(Li.side===Q?Hn.intersectTriangle(Jn,oi,Ln,!0,Xn):Hn.intersectTriangle(Ln,oi,Jn,Li.side!==Re,Xn)))return null;vt.copy(Xn),vt.applyMatrix4(cn.matrixWorld);var Tr=fn.ray.origin.distanceTo(vt);return Tr<fn.near||Tr>fn.far?null:{distance:Tr,point:vt.clone(),object:cn}}function jt(cn,fn,Hn,Ln,oi,Jn,Xn,ci){x.fromArray(Ln,3*Jn),P.fromArray(Ln,3*Xn),G.fromArray(Ln,3*ci);var Li=Yt(cn,fn,Hn,x,P,G,mt);return Li&&(oi&&(Me.fromArray(oi,2*Jn),qe.fromArray(oi,2*Xn),Qe.fromArray(oi,2*ci),Li.uv=Kt(mt,x,P,G,Me,qe,Qe)),Li.face=new Yo(Jn,Xn,ci,Nl.normal(x,P,G)),Li.faceIndex=Jn),Li}return function(fn,Hn){var Xn,ci,Ln=this.geometry,oi=this.material,Jn=this.matrixWorld;if(void 0!==oi&&(null===Ln.boundingSphere&&Ln.computeBoundingSphere(),v.copy(Ln.boundingSphere),v.applyMatrix4(Jn),!1!==fn.ray.intersectsSphere(v)&&(o.getInverse(Jn),f.copy(fn.ray).applyMatrix4(o),null===Ln.boundingBox||!1!==f.intersectsBox(Ln.boundingBox))))if(Ln.isBufferGeometry){var Li,zn=Ln.index,Un=Ln.attributes,Gi=Un.position.array;if(void 0!==Un.uv&&(Xn=Un.uv.array),null!==zn)for(var tr=zn.array,Mr=0,xr=tr.length;Mr<xr;Mr+=3)(ci=jt(this,fn,f,Gi,Xn,Li=tr[Mr],tr[Mr+1],tr[Mr+2]))&&(ci.faceIndex=Math.floor(Mr/3),Hn.push(ci));else for(Mr=0,xr=Gi.length;Mr<xr;Mr+=9)(ci=jt(this,fn,f,Gi,Xn,Li=Mr/3,Li+1,Li+2))&&(ci.index=Li,Hn.push(ci))}else if(Ln.isGeometry){var gr,fs,Wr,$i=oi&&oi.isMultiMaterial,Ui=!0===$i?oi.materials:null,g=Ln.vertices,c=Ln.faces,p=Ln.faceVertexUvs[0];p.length>0&&(Xn=p);for(var b=0,A=c.length;b<A;b++){var E=c[b],M=!0===$i?Ui[E.materialIndex]:oi;if(void 0!==M){if(gr=g[E.a],fs=g[E.b],Wr=g[E.c],!0===M.morphTargets){var U=Ln.morphTargets,ne=this.morphTargetInfluences;x.set(0,0,0),P.set(0,0,0),G.set(0,0,0);for(var X=0,fe=U.length;X<fe;X++){var be=ne[X];if(0!==be){var Ge=U[X].vertices;x.addScaledVector(J.subVectors(Ge[E.a],gr),be),P.addScaledVector(se.subVectors(Ge[E.b],fs),be),G.addScaledVector(Fe.subVectors(Ge[E.c],Wr),be)}}x.add(gr),P.add(fs),G.add(Wr),gr=x,fs=P,Wr=G}if(ci=Yt(this,fn,f,gr,fs,Wr,mt)){if(Xn){var $e=Xn[b];Me.copy($e[0]),qe.copy($e[1]),Qe.copy($e[2]),ci.uv=Kt(mt,gr,fs,Wr,Me,qe,Qe)}ci.face=E,ci.faceIndex=b,Hn.push(ci)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Xu.prototype=Object.create(Bs.prototype)).constructor=Xu,(yl.prototype=Object.create(Bs.prototype)).constructor=yl,(tu.prototype=Object.create(Es.prototype)).constructor=tu,tu.prototype.isCamera=!0,tu.prototype.getWorldDirection=function(){var o=new to;return function(v){var x=v||new Bn;return this.getWorldQuaternion(o),x.set(0,0,-1).applyQuaternion(o)}}(),tu.prototype.lookAt=function(){var o=new Zs;return function(v){o.lookAt(this.position,v,this.up),this.quaternion.setFromRotationMatrix(o)}}(),tu.prototype.clone=function(){return(new this.constructor).copy(this)},tu.prototype.copy=function(o){return Es.prototype.copy.call(this,o),this.matrixWorldInverse.copy(o.matrixWorldInverse),this.projectionMatrix.copy(o.projectionMatrix),this},ku.prototype=Object.assign(Object.create(tu.prototype),{constructor:ku,isPerspectiveCamera:!0,copy:function(o){return tu.prototype.copy.call(this,o),this.fov=o.fov,this.zoom=o.zoom,this.near=o.near,this.far=o.far,this.focus=o.focus,this.aspect=o.aspect,this.view=null===o.view?null:Object.assign({},o.view),this.filmGauge=o.filmGauge,this.filmOffset=o.filmOffset,this},setFocalLength:function(o){var f=.5*this.getFilmHeight()/o;this.fov=2*An.RAD2DEG*Math.atan(f),this.updateProjectionMatrix()},getFocalLength:function(){var o=Math.tan(.5*An.DEG2RAD*this.fov);return.5*this.getFilmHeight()/o},getEffectiveFOV:function(){return 2*An.RAD2DEG*Math.atan(Math.tan(.5*An.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(o,f,v,x,P,G){this.aspect=o/f,this.view={fullWidth:o,fullHeight:f,offsetX:v,offsetY:x,width:P,height:G},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var o=this.near,f=o*Math.tan(.5*An.DEG2RAD*this.fov)/this.zoom,v=2*f,x=this.aspect*v,P=-.5*x,G=this.view;if(null!==G){var J=G.fullWidth,se=G.fullHeight;P+=G.offsetX*x/J,f-=G.offsetY*v/se,x*=G.width/J,v*=G.height/se}var Fe=this.filmOffset;0!==Fe&&(P+=o*Fe/this.getFilmWidth()),this.projectionMatrix.makeFrustum(P,P+x,f-v,f,o,this.far)},toJSON:function(o){var f=Es.prototype.toJSON.call(this,o);return f.object.fov=this.fov,f.object.zoom=this.zoom,f.object.near=this.near,f.object.far=this.far,f.object.focus=this.focus,f.object.aspect=this.aspect,null!==this.view&&(f.object.view=Object.assign({},this.view)),f.object.filmGauge=this.filmGauge,f.object.filmOffset=this.filmOffset,f}}),Ff.prototype=Object.assign(Object.create(tu.prototype),{constructor:Ff,isOrthographicCamera:!0,copy:function(o){return tu.prototype.copy.call(this,o),this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.near=o.near,this.far=o.far,this.zoom=o.zoom,this.view=null===o.view?null:Object.assign({},o.view),this},setViewOffset:function(o,f,v,x,P,G){this.view={fullWidth:o,fullHeight:f,offsetX:v,offsetY:x,width:P,height:G},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var o=(this.right-this.left)/(2*this.zoom),f=(this.top-this.bottom)/(2*this.zoom),v=(this.right+this.left)/2,x=(this.top+this.bottom)/2,P=v-o,G=v+o,J=x+f,se=x-f;if(null!==this.view){var Fe=this.zoom/(this.view.width/this.view.fullWidth),Me=this.zoom/(this.view.height/this.view.fullHeight),qe=(this.right-this.left)/this.view.width,Qe=(this.top-this.bottom)/this.view.height;G=(P+=qe*(this.view.offsetX/Fe))+qe*(this.view.width/Fe),se=(J-=Qe*(this.view.offsetY/Me))-Qe*(this.view.height/Me)}this.projectionMatrix.makeOrthographic(P,G,J,se,this.near,this.far)},toJSON:function(o){var f=Es.prototype.toJSON.call(this,o);return f.object.zoom=this.zoom,f.object.left=this.left,f.object.right=this.right,f.object.top=this.top,f.object.bottom=this.bottom,f.object.near=this.near,f.object.far=this.far,null!==this.view&&(f.object.view=Object.assign({},this.view)),f}});var ym=0;function bm(o){switch(o){case Kr:return["Linear","( value )"];case La:return["sRGB","( value )"];case Qi:return["RGBE","( value )"];case As:return["RGBM","( value, 7.0 )"];case B:return["RGBM","( value, 16.0 )"];case Be:return["RGBD","( value, 256.0 )"];case eo:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+o)}}function dp(o,f){var v=bm(f);return"vec4 "+o+"( vec4 value ) { return "+v[0]+"ToLinear"+v[1]+"; }"}function av(o,f){var v=bm(f);return"vec4 "+o+"( vec4 value ) { return LinearTo"+v[0]+v[1]+"; }"}function fp(o,f){var v;switch(f){case Yn:v="Linear";break;case Ti:v="Reinhard";break;case Di:v="Uncharted2";break;case us:v="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+f)}return"vec3 "+o+"( vec3 color ) { return "+v+"ToneMapping( color ); }"}function pp(o){return""!==o}function gp(o,f){return o.replace(/NUM_DIR_LIGHTS/g,f.numDirLights).replace(/NUM_SPOT_LIGHTS/g,f.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,f.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,f.numPointLights).replace(/NUM_HEMI_LIGHTS/g,f.numHemiLights)}function Iu(o){return o.replace(/#include +<([\w\d.]+)>/g,function v(x,P){var G=io[P];if(void 0===G)throw new Error("Can not resolve #include <"+P+">");return Iu(G)})}function Eg(o){return o.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function v(x,P,G,J){for(var se="",Fe=parseInt(P);Fe<parseInt(G);Fe++)se+=J.replace(/\[ i \]/g,"[ "+Fe+" ]");return se})}function J_(o,f,v,x){var P=o.context,G=v.extensions,J=v.defines,se=v.__webglShader.vertexShader,Fe=v.__webglShader.fragmentShader,Me="SHADOWMAP_TYPE_BASIC";x.shadowMapType===De?Me="SHADOWMAP_TYPE_PCF":x.shadowMapType===xe&&(Me="SHADOWMAP_TYPE_PCF_SOFT");var qe="ENVMAP_TYPE_CUBE",Qe="ENVMAP_MODE_REFLECTION",ft="ENVMAP_BLENDING_MULTIPLY";if(x.envMap){switch(v.envMap.mapping){case Hr:case Ds:qe="ENVMAP_TYPE_CUBE";break;case l:case d:qe="ENVMAP_TYPE_CUBE_UV";break;case nr:case fr:qe="ENVMAP_TYPE_EQUIREC";break;case y:qe="ENVMAP_TYPE_SPHERE"}switch(v.envMap.mapping){case Ds:case fr:Qe="ENVMAP_MODE_REFRACTION"}switch(v.combine){case It:ft="ENVMAP_BLENDING_MULTIPLY";break;case rt:ft="ENVMAP_BLENDING_MIX";break;case lt:ft="ENVMAP_BLENDING_ADD"}}var jt,cn,mt=o.gammaFactor>0?o.gammaFactor:1,vt=function Nf(o,f,v){return[(o=o||{}).derivatives||f.envMapCubeUV||f.bumpMap||f.normalMap||f.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(o.fragDepth||f.logarithmicDepthBuffer)&&v.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",o.drawBuffers&&v.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(o.shaderTextureLOD||f.envMap)&&v.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(pp).join("\n")}(G,x,o.extensions),Kt=function Cm(o){var f=[];for(var v in o){var x=o[v];!1!==x&&f.push("#define "+v+" "+x)}return f.join("\n")}(J),Yt=P.createProgram();v.isRawShaderMaterial?(jt=[Kt,"\n"].filter(pp).join("\n"),cn=[vt,Kt,"\n"].filter(pp).join("\n")):(jt=["precision "+x.precision+" float;","precision "+x.precision+" int;","#define SHADER_NAME "+v.__webglShader.name,Kt,x.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+mt,"#define MAX_BONES "+x.maxBones,x.map?"#define USE_MAP":"",x.envMap?"#define USE_ENVMAP":"",x.envMap?"#define "+Qe:"",x.lightMap?"#define USE_LIGHTMAP":"",x.aoMap?"#define USE_AOMAP":"",x.emissiveMap?"#define USE_EMISSIVEMAP":"",x.bumpMap?"#define USE_BUMPMAP":"",x.normalMap?"#define USE_NORMALMAP":"",x.displacementMap&&x.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",x.specularMap?"#define USE_SPECULARMAP":"",x.roughnessMap?"#define USE_ROUGHNESSMAP":"",x.metalnessMap?"#define USE_METALNESSMAP":"",x.alphaMap?"#define USE_ALPHAMAP":"",x.vertexColors?"#define USE_COLOR":"",x.flatShading?"#define FLAT_SHADED":"",x.skinning?"#define USE_SKINNING":"",x.useVertexTexture?"#define BONE_TEXTURE":"",x.morphTargets?"#define USE_MORPHTARGETS":"",x.morphNormals&&!1===x.flatShading?"#define USE_MORPHNORMALS":"",x.doubleSided?"#define DOUBLE_SIDED":"",x.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+x.numClippingPlanes,x.shadowMapEnabled?"#define USE_SHADOWMAP":"",x.shadowMapEnabled?"#define "+Me:"",x.sizeAttenuation?"#define USE_SIZEATTENUATION":"",x.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",x.logarithmicDepthBuffer&&o.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(pp).join("\n"),cn=[vt,"precision "+x.precision+" float;","precision "+x.precision+" int;","#define SHADER_NAME "+v.__webglShader.name,Kt,x.alphaTest?"#define ALPHATEST "+x.alphaTest:"","#define GAMMA_FACTOR "+mt,x.useFog&&x.fog?"#define USE_FOG":"",x.useFog&&x.fogExp?"#define FOG_EXP2":"",x.map?"#define USE_MAP":"",x.envMap?"#define USE_ENVMAP":"",x.envMap?"#define "+qe:"",x.envMap?"#define "+Qe:"",x.envMap?"#define "+ft:"",x.lightMap?"#define USE_LIGHTMAP":"",x.aoMap?"#define USE_AOMAP":"",x.emissiveMap?"#define USE_EMISSIVEMAP":"",x.bumpMap?"#define USE_BUMPMAP":"",x.normalMap?"#define USE_NORMALMAP":"",x.specularMap?"#define USE_SPECULARMAP":"",x.roughnessMap?"#define USE_ROUGHNESSMAP":"",x.metalnessMap?"#define USE_METALNESSMAP":"",x.alphaMap?"#define USE_ALPHAMAP":"",x.vertexColors?"#define USE_COLOR":"",x.gradientMap?"#define USE_GRADIENTMAP":"",x.flatShading?"#define FLAT_SHADED":"",x.doubleSided?"#define DOUBLE_SIDED":"",x.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+x.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(x.numClippingPlanes-x.numClipIntersection),x.shadowMapEnabled?"#define USE_SHADOWMAP":"",x.shadowMapEnabled?"#define "+Me:"",x.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",x.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",x.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",x.logarithmicDepthBuffer&&o.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",x.envMap&&o.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",x.toneMapping!==dn?"#define TONE_MAPPING":"",x.toneMapping!==dn?io.tonemapping_pars_fragment:"",x.toneMapping!==dn?fp("toneMapping",x.toneMapping):"",x.outputEncoding||x.mapEncoding||x.envMapEncoding||x.emissiveMapEncoding?io.encodings_pars_fragment:"",x.mapEncoding?dp("mapTexelToLinear",x.mapEncoding):"",x.envMapEncoding?dp("envMapTexelToLinear",x.envMapEncoding):"",x.emissiveMapEncoding?dp("emissiveMapTexelToLinear",x.emissiveMapEncoding):"",x.outputEncoding?av("linearToOutputTexel",x.outputEncoding):"",x.depthPacking?"#define DEPTH_PACKING "+v.depthPacking:"","\n"].filter(pp).join("\n")),se=gp(se=Iu(se),x),Fe=gp(Fe=Iu(Fe),x),v.isShaderMaterial||(se=Eg(se),Fe=Eg(Fe));var Hn=cn+Fe,Ln=Qv(P,P.VERTEX_SHADER,jt+se),oi=Qv(P,P.FRAGMENT_SHADER,Hn);P.attachShader(Yt,Ln),P.attachShader(Yt,oi),void 0!==v.index0AttributeName?P.bindAttribLocation(Yt,0,v.index0AttributeName):!0===x.morphTargets&&P.bindAttribLocation(Yt,0,"position"),P.linkProgram(Yt);var dr,zn,Jn=P.getProgramInfoLog(Yt),Xn=P.getShaderInfoLog(Ln),ci=P.getShaderInfoLog(oi),Li=!0,Tr=!0;return!1===P.getProgramParameter(Yt,P.LINK_STATUS)?(Li=!1,console.error("THREE.WebGLProgram: shader error: ",P.getError(),"gl.VALIDATE_STATUS",P.getProgramParameter(Yt,P.VALIDATE_STATUS),"gl.getProgramInfoLog",Jn,Xn,ci)):""!==Jn?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Jn):(""===Xn||""===ci)&&(Tr=!1),Tr&&(this.diagnostics={runnable:Li,material:v,programLog:Jn,vertexShader:{log:Xn,prefix:jt},fragmentShader:{log:ci,prefix:cn}}),P.deleteShader(Ln),P.deleteShader(oi),this.getUniforms=function(){return void 0===dr&&(dr=new tl(P,Yt,o)),dr},this.getAttributes=function(){return void 0===zn&&(zn=function Dd(o,f,v){for(var x={},P=o.getProgramParameter(f,o.ACTIVE_ATTRIBUTES),G=0;G<P;G++){var se=o.getActiveAttrib(f,G).name;x[se]=o.getAttribLocation(f,se)}return x}(P,Yt)),zn},this.destroy=function(){P.deleteProgram(Yt),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=ym++,this.code=f,this.usedTimes=1,this.program=Yt,this.vertexShader=Ln,this.fragmentShader=oi,this}function ey(o,f){var v=[],x={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},P=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];function J(se,Fe){var Me;return se?se.isTexture?Me=se.encoding:se.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Me=se.texture.encoding):Me=Kr,Me===Kr&&Fe&&(Me=eo),Me}this.getParameters=function(se,Fe,Me,qe,Qe,ft){var mt=x[se.type],vt=function G(se){if(f.floatVertexTextures&&se&&se.skeleton&&se.skeleton.useVertexTexture)return 1024;var qe=Math.floor((f.maxVertexUniforms-20)/4);return void 0!==se&&se&&se.isSkinnedMesh&&(qe=Math.min(se.skeleton.bones.length,qe))<se.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+se.skeleton.bones.length+", this GPU supports just "+qe+" (try OpenGL instead of ANGLE)"),qe}(ft),Kt=o.getPrecision();null!==se.precision&&(Kt=f.getMaxPrecision(se.precision))!==se.precision&&console.warn("THREE.WebGLProgram.getParameters:",se.precision,"not supported, using",Kt,"instead.");var Yt=o.getCurrentRenderTarget();return{shaderID:mt,precision:Kt,supportsVertexTextures:f.vertexTextures,outputEncoding:J(Yt?Yt.texture:null,o.gammaOutput),map:!!se.map,mapEncoding:J(se.map,o.gammaInput),envMap:!!se.envMap,envMapMode:se.envMap&&se.envMap.mapping,envMapEncoding:J(se.envMap,o.gammaInput),envMapCubeUV:!!se.envMap&&(se.envMap.mapping===l||se.envMap.mapping===d),lightMap:!!se.lightMap,aoMap:!!se.aoMap,emissiveMap:!!se.emissiveMap,emissiveMapEncoding:J(se.emissiveMap,o.gammaInput),bumpMap:!!se.bumpMap,normalMap:!!se.normalMap,displacementMap:!!se.displacementMap,roughnessMap:!!se.roughnessMap,metalnessMap:!!se.metalnessMap,specularMap:!!se.specularMap,alphaMap:!!se.alphaMap,gradientMap:!!se.gradientMap,combine:se.combine,vertexColors:se.vertexColors,fog:!!Me,useFog:se.fog,fogExp:Me&&Me.isFogExp2,flatShading:se.shading===Le,sizeAttenuation:se.sizeAttenuation,logarithmicDepthBuffer:f.logarithmicDepthBuffer,skinning:se.skinning,maxBones:vt,useVertexTexture:f.floatVertexTextures&&ft&&ft.skeleton&&ft.skeleton.useVertexTexture,morphTargets:se.morphTargets,morphNormals:se.morphNormals,maxMorphTargets:o.maxMorphTargets,maxMorphNormals:o.maxMorphNormals,numDirLights:Fe.directional.length,numPointLights:Fe.point.length,numSpotLights:Fe.spot.length,numRectAreaLights:Fe.rectArea.length,numHemiLights:Fe.hemi.length,numClippingPlanes:qe,numClipIntersection:Qe,shadowMapEnabled:o.shadowMap.enabled&&ft.receiveShadow&&Fe.shadows.length>0,shadowMapType:o.shadowMap.type,toneMapping:o.toneMapping,physicallyCorrectLights:o.physicallyCorrectLights,premultipliedAlpha:se.premultipliedAlpha,alphaTest:se.alphaTest,doubleSided:se.side===Re,flipSided:se.side===Q,depthPacking:void 0!==se.depthPacking&&se.depthPacking}},this.getProgramCode=function(se,Fe){var Me=[];if(Fe.shaderID?Me.push(Fe.shaderID):(Me.push(se.fragmentShader),Me.push(se.vertexShader)),void 0!==se.defines)for(var qe in se.defines)Me.push(qe),Me.push(se.defines[qe]);for(var Qe=0;Qe<P.length;Qe++)Me.push(Fe[P[Qe]]);return Me.join()},this.acquireProgram=function(se,Fe,Me){for(var qe,Qe=0,ft=v.length;Qe<ft;Qe++){var mt=v[Qe];if(mt.code===Me){++(qe=mt).usedTimes;break}}return void 0===qe&&(qe=new J_(o,Me,se,Fe),v.push(qe)),qe},this.releaseProgram=function(se){if(0==--se.usedTimes){var Fe=v.indexOf(se);v[Fe]=v[v.length-1],v.pop(),se.destroy()}},this.programs=v}function Bf(o,f,v){var x={};function P(Me){var qe=Me.target,Qe=x[qe.id];null!==Qe.index&&J(Qe.index),function se(Me){for(var qe in Me)J(Me[qe])}(Qe.attributes),qe.removeEventListener("dispose",P),delete x[qe.id];var ft=f.get(qe);ft.wireframe&&J(ft.wireframe),f.delete(qe);var mt=f.get(Qe);mt.wireframe&&J(mt.wireframe),f.delete(Qe),v.memory.geometries--}function J(Me){var qe=function G(Me){return Me.isInterleavedBufferAttribute?f.get(Me.data).__webglBuffer:f.get(Me).__webglBuffer}(Me);void 0!==qe&&(o.deleteBuffer(qe),function Fe(Me){f.delete(Me.isInterleavedBufferAttribute?Me.data:Me)}(Me))}return{get:function(Me){var Qe,qe=Me.geometry;return void 0!==x[qe.id]?x[qe.id]:(qe.addEventListener("dispose",P),qe.isBufferGeometry?Qe=qe:qe.isGeometry&&(void 0===qe._bufferGeometry&&(qe._bufferGeometry=(new Bs).setFromObject(Me)),Qe=qe._bufferGeometry),x[qe.id]=Qe,v.memory.geometries++,Qe)}}}function nf(o,f,v){var x=new Bf(o,f,v);function G(Qe,ft){var mt=Qe.isInterleavedBufferAttribute?Qe.data:Qe,vt=f.get(mt);void 0===vt.__webglBuffer?function J(Qe,ft,mt){Qe.__webglBuffer=o.createBuffer(),o.bindBuffer(mt,Qe.__webglBuffer),o.bufferData(mt,ft.array,ft.dynamic?o.DYNAMIC_DRAW:o.STATIC_DRAW);var Kt=o.FLOAT,Yt=ft.array;Yt instanceof Float32Array?Kt=o.FLOAT:Yt instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):Yt instanceof Uint16Array?Kt=o.UNSIGNED_SHORT:Yt instanceof Int16Array?Kt=o.SHORT:Yt instanceof Uint32Array?Kt=o.UNSIGNED_INT:Yt instanceof Int32Array?Kt=o.INT:Yt instanceof Int8Array?Kt=o.BYTE:Yt instanceof Uint8Array&&(Kt=o.UNSIGNED_BYTE),Qe.bytesPerElement=Yt.BYTES_PER_ELEMENT,Qe.type=Kt,Qe.version=ft.version,ft.onUploadCallback()}(vt,mt,ft):vt.version!==mt.version&&function se(Qe,ft,mt){o.bindBuffer(mt,Qe.__webglBuffer),!1===ft.dynamic?o.bufferData(mt,ft.array,o.STATIC_DRAW):-1===ft.updateRange.count?o.bufferSubData(mt,0,ft.array):0===ft.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(o.bufferSubData(mt,ft.updateRange.offset*ft.array.BYTES_PER_ELEMENT,ft.array.subarray(ft.updateRange.offset,ft.updateRange.offset+ft.updateRange.count)),ft.updateRange.count=0),Qe.version=ft.version}(vt,mt,ft)}return{getAttributeBuffer:function Fe(Qe){return Qe.isInterleavedBufferAttribute?f.get(Qe.data).__webglBuffer:f.get(Qe).__webglBuffer},getAttributeProperties:function Me(Qe){return f.get(Qe.isInterleavedBufferAttribute?Qe.data:Qe)},getWireframeAttribute:function qe(Qe){var ft=f.get(Qe);if(void 0!==ft.wireframe)return ft.wireframe;var cn,mt=[],vt=Qe.index,Kt=Qe.attributes,Yt=Kt.position;if(null!==vt)for(var fn=0,Hn=(cn=vt.array).length;fn<Hn;fn+=3)mt.push(Ln=cn[fn+0],oi=cn[fn+1],oi,Jn=cn[fn+2],Jn,Ln);else for(fn=0,Hn=(cn=Kt.position.array).length/3-1;fn<Hn;fn+=3){var Ln,oi,Jn;mt.push(Ln=fn+0,oi=fn+1,oi,Jn=fn+2,Jn,Ln)}var ci=new bs(new(Yt.count>65535?Uint32Array:Uint16Array)(mt),1);return G(ci,o.ELEMENT_ARRAY_BUFFER),ft.wireframe=ci,ci},update:function P(Qe){var ft=x.get(Qe);Qe.geometry.isGeometry&&ft.updateFromObject(Qe);var mt=ft.index,vt=ft.attributes;for(var Kt in null!==mt&&G(mt,o.ELEMENT_ARRAY_BUFFER),vt)G(vt[Kt],o.ARRAY_BUFFER);var Yt=ft.morphAttributes;for(var Kt in Yt)for(var jt=Yt[Kt],cn=0,fn=jt.length;cn<fn;cn++)G(jt[cn],o.ARRAY_BUFFER);return ft}}}function Jv(o,f,v,x,P,G,J){var se=J.memory,Fe=typeof WebGL2RenderingContext<"u"&&o instanceof WebGL2RenderingContext;function Me(zn,Un){if(zn.width>Un||zn.height>Un){var Gi=Un/Math.max(zn.width,zn.height),tr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return tr.width=Math.floor(zn.width*Gi),tr.height=Math.floor(zn.height*Gi),tr.getContext("2d").drawImage(zn,0,0,zn.width,zn.height,0,0,tr.width,tr.height),console.warn("THREE.WebGLRenderer: image is too big ("+zn.width+"x"+zn.height+"). Resized to "+tr.width+"x"+tr.height,zn),tr}return zn}function qe(zn){return An.isPowerOfTwo(zn.width)&&An.isPowerOfTwo(zn.height)}function mt(zn){return zn===z||zn===D||zn===H?o.NEAREST:o.LINEAR}function vt(zn){var Un=zn.target;Un.removeEventListener("dispose",vt),function Yt(zn){var Un=x.get(zn);if(zn.image&&Un.__image__webglTextureCube)o.deleteTexture(Un.__image__webglTextureCube);else{if(void 0===Un.__webglInit)return;o.deleteTexture(Un.__webglTexture)}x.delete(zn)}(Un),se.textures--}function Kt(zn){var Un=zn.target;Un.removeEventListener("dispose",Kt),function jt(zn){var Un=x.get(zn),Gi=x.get(zn.texture);if(zn){if(void 0!==Gi.__webglTexture&&o.deleteTexture(Gi.__webglTexture),zn.depthTexture&&zn.depthTexture.dispose(),zn.isWebGLRenderTargetCube)for(var tr=0;tr<6;tr++)o.deleteFramebuffer(Un.__webglFramebuffer[tr]),Un.__webglDepthbuffer&&o.deleteRenderbuffer(Un.__webglDepthbuffer[tr]);else o.deleteFramebuffer(Un.__webglFramebuffer),Un.__webglDepthbuffer&&o.deleteRenderbuffer(Un.__webglDepthbuffer);x.delete(zn.texture),x.delete(zn)}}(Un),se.textures--}function cn(zn,Un){var Gi=x.get(zn);if(zn.version>0&&Gi.__version!==zn.version){var tr=zn.image;if(void 0===tr)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",zn);else{if(!1!==tr.complete)return void function oi(zn,Un,Gi){void 0===zn.__webglInit&&(zn.__webglInit=!0,Un.addEventListener("dispose",vt),zn.__webglTexture=o.createTexture(),se.textures++),v.activeTexture(o.TEXTURE0+Gi),v.bindTexture(o.TEXTURE_2D,zn.__webglTexture),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,Un.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Un.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,Un.unpackAlignment);var tr=Me(Un.image,P.maxTextureSize);(function ft(zn){return zn.wrapS!==S||zn.wrapT!==S||zn.minFilter!==z&&zn.minFilter!==Z})(Un)&&!1===qe(tr)&&(tr=function Qe(zn){if(zn instanceof HTMLImageElement||zn instanceof HTMLCanvasElement){var Un=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return Un.width=An.nearestPowerOfTwo(zn.width),Un.height=An.nearestPowerOfTwo(zn.height),Un.getContext("2d").drawImage(zn,0,0,Un.width,Un.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+zn.width+"x"+zn.height+"). Resized to "+Un.width+"x"+Un.height,zn),Un}return zn}(tr));var Mr=qe(tr),xr=G(Un.format),gr=G(Un.type);Ln(o.TEXTURE_2D,Un,Mr);var fs,Wr=Un.mipmaps;if(Un.isDepthTexture){var $i=o.DEPTH_COMPONENT;if(Un.type===Ee){if(!Fe)throw new Error("Float Depth Texture only supported in WebGL2.0");$i=o.DEPTH_COMPONENT32F}else Fe&&($i=o.DEPTH_COMPONENT16);Un.format===We&&$i===o.DEPTH_COMPONENT&&Un.type!==ge&&Un.type!==de&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Un.type=ge,gr=G(Un.type)),Un.format===Ye&&($i=o.DEPTH_STENCIL,Un.type!==pt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Un.type=pt,gr=G(Un.type))),v.texImage2D(o.TEXTURE_2D,0,$i,tr.width,tr.height,0,xr,gr,null)}else if(Un.isDataTexture)if(Wr.length>0&&Mr){for(var Ui=0,g=Wr.length;Ui<g;Ui++)v.texImage2D(o.TEXTURE_2D,Ui,xr,(fs=Wr[Ui]).width,fs.height,0,xr,gr,fs.data);Un.generateMipmaps=!1}else v.texImage2D(o.TEXTURE_2D,0,xr,tr.width,tr.height,0,xr,gr,tr.data);else if(Un.isCompressedTexture)for(Ui=0,g=Wr.length;Ui<g;Ui++)fs=Wr[Ui],Un.format!==Lt&&Un.format!==Wt?v.getCompressedTextureFormats().indexOf(xr)>-1?v.compressedTexImage2D(o.TEXTURE_2D,Ui,xr,fs.width,fs.height,0,fs.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v.texImage2D(o.TEXTURE_2D,Ui,xr,fs.width,fs.height,0,xr,gr,fs.data);else if(Wr.length>0&&Mr){for(Ui=0,g=Wr.length;Ui<g;Ui++)v.texImage2D(o.TEXTURE_2D,Ui,xr,xr,gr,fs=Wr[Ui]);Un.generateMipmaps=!1}else v.texImage2D(o.TEXTURE_2D,0,xr,xr,gr,tr);Un.generateMipmaps&&Mr&&o.generateMipmap(o.TEXTURE_2D),zn.__version=Un.version,Un.onUpdate&&Un.onUpdate(Un)}(Gi,zn,Un);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",zn)}}v.activeTexture(o.TEXTURE0+Un),v.bindTexture(o.TEXTURE_2D,Gi.__webglTexture)}function Ln(zn,Un,Gi){var tr;if(Gi?(o.texParameteri(zn,o.TEXTURE_WRAP_S,G(Un.wrapS)),o.texParameteri(zn,o.TEXTURE_WRAP_T,G(Un.wrapT)),o.texParameteri(zn,o.TEXTURE_MAG_FILTER,G(Un.magFilter)),o.texParameteri(zn,o.TEXTURE_MIN_FILTER,G(Un.minFilter))):(o.texParameteri(zn,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(zn,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),(Un.wrapS!==S||Un.wrapT!==S)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",Un),o.texParameteri(zn,o.TEXTURE_MAG_FILTER,mt(Un.magFilter)),o.texParameteri(zn,o.TEXTURE_MIN_FILTER,mt(Un.minFilter)),Un.minFilter!==z&&Un.minFilter!==Z&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",Un)),tr=f.get("EXT_texture_filter_anisotropic")){if(Un.type===Ee&&null===f.get("OES_texture_float_linear")||Un.type===ke&&null===f.get("OES_texture_half_float_linear"))return;(Un.anisotropy>1||x.get(Un).__currentAnisotropy)&&(o.texParameterf(zn,tr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Un.anisotropy,P.getMaxAnisotropy())),x.get(Un).__currentAnisotropy=Un.anisotropy)}}function Jn(zn,Un,Gi,tr){var Mr=G(Un.texture.format),xr=G(Un.texture.type);v.texImage2D(tr,0,Mr,Un.width,Un.height,0,Mr,xr,null),o.bindFramebuffer(o.FRAMEBUFFER,zn),o.framebufferTexture2D(o.FRAMEBUFFER,Gi,tr,x.get(Un.texture).__webglTexture,0),o.bindFramebuffer(o.FRAMEBUFFER,null)}function Xn(zn,Un){o.bindRenderbuffer(o.RENDERBUFFER,zn),Un.depthBuffer&&!Un.stencilBuffer?(o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,Un.width,Un.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,zn)):Un.depthBuffer&&Un.stencilBuffer?(o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,Un.width,Un.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,zn)):o.renderbufferStorage(o.RENDERBUFFER,o.RGBA4,Un.width,Un.height),o.bindRenderbuffer(o.RENDERBUFFER,null)}this.setTexture2D=cn,this.setTextureCube=function fn(zn,Un){var Gi=x.get(zn);if(6===zn.image.length)if(zn.version>0&&Gi.__version!==zn.version){Gi.__image__webglTextureCube||(zn.addEventListener("dispose",vt),Gi.__image__webglTextureCube=o.createTexture(),se.textures++),v.activeTexture(o.TEXTURE0+Un),v.bindTexture(o.TEXTURE_CUBE_MAP,Gi.__image__webglTextureCube),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,zn.flipY);for(var tr=zn&&zn.isCompressedTexture,Mr=zn.image[0]&&zn.image[0].isDataTexture,xr=[],gr=0;gr<6;gr++)xr[gr]=tr||Mr?Mr?zn.image[gr].image:zn.image[gr]:Me(zn.image[gr],P.maxCubemapSize);var Wr=qe(xr[0]),$i=G(zn.format),Ui=G(zn.type);for(Ln(o.TEXTURE_CUBE_MAP,zn,Wr),gr=0;gr<6;gr++)if(tr)for(var g,c=xr[gr].mipmaps,p=0,b=c.length;p<b;p++)g=c[p],zn.format!==Lt&&zn.format!==Wt?v.getCompressedTextureFormats().indexOf($i)>-1?v.compressedTexImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+gr,p,$i,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+gr,p,$i,g.width,g.height,0,$i,Ui,g.data);else Mr?v.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+gr,0,$i,xr[gr].width,xr[gr].height,0,$i,Ui,xr[gr].data):v.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+gr,0,$i,$i,Ui,xr[gr]);zn.generateMipmaps&&Wr&&o.generateMipmap(o.TEXTURE_CUBE_MAP),Gi.__version=zn.version,zn.onUpdate&&zn.onUpdate(zn)}else v.activeTexture(o.TEXTURE0+Un),v.bindTexture(o.TEXTURE_CUBE_MAP,Gi.__image__webglTextureCube)},this.setTextureCubeDynamic=function Hn(zn,Un){v.activeTexture(o.TEXTURE0+Un),v.bindTexture(o.TEXTURE_CUBE_MAP,x.get(zn).__webglTexture)},this.setupRenderTarget=function Tr(zn){var Un=x.get(zn),Gi=x.get(zn.texture);zn.addEventListener("dispose",Kt),Gi.__webglTexture=o.createTexture(),se.textures++;var tr=!0===zn.isWebGLRenderTargetCube,Mr=qe(zn);if(tr){Un.__webglFramebuffer=[];for(var xr=0;xr<6;xr++)Un.__webglFramebuffer[xr]=o.createFramebuffer()}else Un.__webglFramebuffer=o.createFramebuffer();if(tr){for(v.bindTexture(o.TEXTURE_CUBE_MAP,Gi.__webglTexture),Ln(o.TEXTURE_CUBE_MAP,zn.texture,Mr),xr=0;xr<6;xr++)Jn(Un.__webglFramebuffer[xr],zn,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+xr);zn.texture.generateMipmaps&&Mr&&o.generateMipmap(o.TEXTURE_CUBE_MAP),v.bindTexture(o.TEXTURE_CUBE_MAP,null)}else v.bindTexture(o.TEXTURE_2D,Gi.__webglTexture),Ln(o.TEXTURE_2D,zn.texture,Mr),Jn(Un.__webglFramebuffer,zn,o.COLOR_ATTACHMENT0,o.TEXTURE_2D),zn.texture.generateMipmaps&&Mr&&o.generateMipmap(o.TEXTURE_2D),v.bindTexture(o.TEXTURE_2D,null);zn.depthBuffer&&function Li(zn){var Un=x.get(zn),Gi=!0===zn.isWebGLRenderTargetCube;if(zn.depthTexture){if(Gi)throw new Error("target.depthTexture not supported in Cube render targets");!function ci(zn,Un){if(Un&&Un.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(o.bindFramebuffer(o.FRAMEBUFFER,zn),!Un.depthTexture||!Un.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!x.get(Un.depthTexture).__webglTexture||Un.depthTexture.image.width!==Un.width||Un.depthTexture.image.height!==Un.height)&&(Un.depthTexture.image.width=Un.width,Un.depthTexture.image.height=Un.height,Un.depthTexture.needsUpdate=!0),cn(Un.depthTexture,0);var tr=x.get(Un.depthTexture).__webglTexture;if(Un.depthTexture.format===We)o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,tr,0);else{if(Un.depthTexture.format!==Ye)throw new Error("Unknown depthTexture format");o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.TEXTURE_2D,tr,0)}}(Un.__webglFramebuffer,zn)}else if(Gi){Un.__webglDepthbuffer=[];for(var tr=0;tr<6;tr++)o.bindFramebuffer(o.FRAMEBUFFER,Un.__webglFramebuffer[tr]),Un.__webglDepthbuffer[tr]=o.createRenderbuffer(),Xn(Un.__webglDepthbuffer[tr],zn)}else o.bindFramebuffer(o.FRAMEBUFFER,Un.__webglFramebuffer),Un.__webglDepthbuffer=o.createRenderbuffer(),Xn(Un.__webglDepthbuffer,zn);o.bindFramebuffer(o.FRAMEBUFFER,null)}(zn)},this.updateRenderTargetMipmap=function dr(zn){var Un=zn.texture;if(Un.generateMipmaps&&qe(zn)&&Un.minFilter!==z&&Un.minFilter!==Z){var Gi=zn&&zn.isWebGLRenderTargetCube?o.TEXTURE_CUBE_MAP:o.TEXTURE_2D,tr=x.get(Un).__webglTexture;v.bindTexture(Gi,tr),o.generateMipmap(Gi),v.bindTexture(Gi,null)}}}function Zy(){var o={};return{get:function(f){var v=f.uuid,x=o[v];return void 0===x&&(o[v]=x={}),x},delete:function(f){delete o[f.uuid]},clear:function(){o={}}}}function e_(o,f,v){var J=new function x(){var Xt=!1,Nn=new Pr,xn=null,gi=new Pr;return{setMask:function($n){xn!==$n&&!Xt&&(o.colorMask($n,$n,$n,$n),xn=$n)},setLocked:function($n){Xt=$n},setClear:function($n,ai,wi,Pi,er){!0===er&&($n*=Pi,ai*=Pi,wi*=Pi),Nn.set($n,ai,wi,Pi),!1===gi.equals(Nn)&&(o.clearColor($n,ai,wi,Pi),gi.copy(Nn))},reset:function(){Xt=!1,xn=null,gi.set(0,0,0,1)}}},se=new function P(){var Xt=!1,Nn=null,xn=null,gi=null;return{setTest:function($n){$n?b(o.DEPTH_TEST):A(o.DEPTH_TEST)},setMask:function($n){Nn!==$n&&!Xt&&(o.depthMask($n),Nn=$n)},setFunc:function($n){if(xn!==$n){if($n)switch($n){case Oe:o.depthFunc(o.NEVER);break;case Ft:o.depthFunc(o.ALWAYS);break;case Ot:o.depthFunc(o.LESS);break;case li:o.depthFunc(o.LEQUAL);break;case di:o.depthFunc(o.EQUAL);break;case Gt:o.depthFunc(o.GEQUAL);break;case Rt:o.depthFunc(o.GREATER);break;case _n:o.depthFunc(o.NOTEQUAL);break;default:o.depthFunc(o.LEQUAL)}else o.depthFunc(o.LEQUAL);xn=$n}},setLocked:function($n){Xt=$n},setClear:function($n){gi!==$n&&(o.clearDepth($n),gi=$n)},reset:function(){Xt=!1,Nn=null,xn=null,gi=null}}},Fe=new function G(){var Xt=!1,Nn=null,xn=null,gi=null,$n=null,ai=null,wi=null,Pi=null,er=null;return{setTest:function(xi){xi?b(o.STENCIL_TEST):A(o.STENCIL_TEST)},setMask:function(xi){Nn!==xi&&!Xt&&(o.stencilMask(xi),Nn=xi)},setFunc:function(xi,Ki,hr){(xn!==xi||gi!==Ki||$n!==hr)&&(o.stencilFunc(xi,Ki,hr),xn=xi,gi=Ki,$n=hr)},setOp:function(xi,Ki,hr){(ai!==xi||wi!==Ki||Pi!==hr)&&(o.stencilOp(xi,Ki,hr),ai=xi,wi=Ki,Pi=hr)},setLocked:function(xi){Xt=xi},setClear:function(xi){er!==xi&&(o.clearStencil(xi),er=xi)},reset:function(){Xt=!1,Nn=null,xn=null,gi=null,$n=null,ai=null,wi=null,Pi=null,er=null}}},Me=o.getParameter(o.MAX_VERTEX_ATTRIBS),qe=new Uint8Array(Me),Qe=new Uint8Array(Me),ft=new Uint8Array(Me),mt={},vt=null,Kt=null,Yt=null,jt=null,cn=null,fn=null,Hn=null,Ln=null,oi=!1,Jn=null,Xn=null,ci=null,Li=null,Tr=null,dr=null,zn=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS),Un=parseFloat(/^WebGL\ ([0-9])/.exec(o.getParameter(o.VERSION))[1]),Gi=parseFloat(Un)>=1,tr=null,Mr={},xr=new Pr,gr=new Pr;function fs(Xt,Nn,xn){var gi=new Uint8Array(4),$n=o.createTexture();o.bindTexture(Xt,$n),o.texParameteri(Xt,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(Xt,o.TEXTURE_MAG_FILTER,o.NEAREST);for(var ai=0;ai<xn;ai++)o.texImage2D(Nn+ai,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,gi);return $n}var Wr={};function b(Xt){!0!==mt[Xt]&&(o.enable(Xt),mt[Xt]=!0)}function A(Xt){!1!==mt[Xt]&&(o.disable(Xt),mt[Xt]=!1)}function M(Xt,Nn,xn,gi,$n,ai,wi,Pi){Xt!==ee?b(o.BLEND):A(o.BLEND),(Xt!==Kt||Pi!==oi)&&(Xt===ze?Pi?(o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD),o.blendFuncSeparate(o.ONE,o.ONE,o.ONE,o.ONE)):(o.blendEquation(o.FUNC_ADD),o.blendFunc(o.SRC_ALPHA,o.ONE)):Xt===dt?Pi?(o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD),o.blendFuncSeparate(o.ZERO,o.ZERO,o.ONE_MINUS_SRC_COLOR,o.ONE_MINUS_SRC_ALPHA)):(o.blendEquation(o.FUNC_ADD),o.blendFunc(o.ZERO,o.ONE_MINUS_SRC_COLOR)):Xt===st?Pi?(o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD),o.blendFuncSeparate(o.ZERO,o.SRC_COLOR,o.ZERO,o.SRC_ALPHA)):(o.blendEquation(o.FUNC_ADD),o.blendFunc(o.ZERO,o.SRC_COLOR)):Pi?(o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD),o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA)):(o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA)),Kt=Xt,oi=Pi),Xt===bt?($n=$n||Nn,ai=ai||xn,wi=wi||gi,(Nn!==Yt||$n!==fn)&&(o.blendEquationSeparate(v(Nn),v($n)),Yt=Nn,fn=$n),(xn!==jt||gi!==cn||ai!==Hn||wi!==Ln)&&(o.blendFuncSeparate(v(xn),v(gi),v(ai),v(wi)),jt=xn,cn=gi,Hn=ai,Ln=wi)):(Yt=null,jt=null,cn=null,fn=null,Hn=null,Ln=null)}function fe(Xt){se.setFunc(Xt)}function ot(Xt){Jn!==Xt&&(o.frontFace(Xt?o.CW:o.CCW),Jn=Xt)}function _t(Xt){Xt!==re?(b(o.CULL_FACE),Xt!==Xn&&o.cullFace(Xt===ie?o.BACK:Xt===V?o.FRONT:o.FRONT_AND_BACK)):A(o.CULL_FACE),Xn=Xt}function In(Xt){void 0===Xt&&(Xt=o.TEXTURE0+zn-1),tr!==Xt&&(o.activeTexture(Xt),tr=Xt)}return Wr[o.TEXTURE_2D]=fs(o.TEXTURE_2D,o.TEXTURE_2D,1),Wr[o.TEXTURE_CUBE_MAP]=fs(o.TEXTURE_CUBE_MAP,o.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:J,depth:se,stencil:Fe},init:function $i(){J.setClear(0,0,0,1),se.setClear(1),Fe.setClear(0),b(o.DEPTH_TEST),fe(li),ot(!1),_t(ie),b(o.CULL_FACE),b(o.BLEND),M(Ce)},initAttributes:function Ui(){for(var Xt=0,Nn=qe.length;Xt<Nn;Xt++)qe[Xt]=0},enableAttribute:function g(Xt){qe[Xt]=1,0===Qe[Xt]&&(o.enableVertexAttribArray(Xt),Qe[Xt]=1),0!==ft[Xt]&&(f.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Xt,0),ft[Xt]=0)},enableAttributeAndDivisor:function c(Xt,Nn,xn){qe[Xt]=1,0===Qe[Xt]&&(o.enableVertexAttribArray(Xt),Qe[Xt]=1),ft[Xt]!==Nn&&(xn.vertexAttribDivisorANGLE(Xt,Nn),ft[Xt]=Nn)},disableUnusedAttributes:function p(){for(var Xt=0,Nn=Qe.length;Xt!==Nn;++Xt)Qe[Xt]!==qe[Xt]&&(o.disableVertexAttribArray(Xt),Qe[Xt]=0)},enable:b,disable:A,getCompressedTextureFormats:function E(){if(null===vt&&(vt=[],f.get("WEBGL_compressed_texture_pvrtc")||f.get("WEBGL_compressed_texture_s3tc")||f.get("WEBGL_compressed_texture_etc1")))for(var Xt=o.getParameter(o.COMPRESSED_TEXTURE_FORMATS),Nn=0;Nn<Xt.length;Nn++)vt.push(Xt[Nn]);return vt},setBlending:M,setColorWrite:function U(Xt){J.setMask(Xt)},setDepthTest:function ne(Xt){se.setTest(Xt)},setDepthWrite:function X(Xt){se.setMask(Xt)},setDepthFunc:fe,setStencilTest:function be(Xt){Fe.setTest(Xt)},setStencilWrite:function Ge(Xt){Fe.setMask(Xt)},setStencilFunc:function $e(Xt,Nn,xn){Fe.setFunc(Xt,Nn,xn)},setStencilOp:function Ke(Xt,Nn,xn){Fe.setOp(Xt,Nn,xn)},setFlipSided:ot,setCullFace:_t,setLineWidth:function Et(Xt){Xt!==ci&&(Gi&&o.lineWidth(Xt),ci=Xt)},setPolygonOffset:function $t(Xt,Nn,xn){Xt?(b(o.POLYGON_OFFSET_FILL),(Li!==Nn||Tr!==xn)&&(o.polygonOffset(Nn,xn),Li=Nn,Tr=xn)):A(o.POLYGON_OFFSET_FILL)},getScissorTest:function Ut(){return dr},setScissorTest:function un(Xt){dr=Xt,Xt?b(o.SCISSOR_TEST):A(o.SCISSOR_TEST)},activeTexture:In,bindTexture:function En(Xt,Nn){null===tr&&In();var xn=Mr[tr];void 0===xn&&(Mr[tr]=xn={type:void 0,texture:void 0}),(xn.type!==Xt||xn.texture!==Nn)&&(o.bindTexture(Xt,Nn||Wr[Xt]),xn.type=Xt,xn.texture=Nn)},compressedTexImage2D:function hn(){try{o.compressedTexImage2D.apply(o,arguments)}catch(Xt){console.error(Xt)}},texImage2D:function Mn(){try{o.texImage2D.apply(o,arguments)}catch(Xt){console.error(Xt)}},scissor:function mn(Xt){!1===xr.equals(Xt)&&(o.scissor(Xt.x,Xt.y,Xt.z,Xt.w),xr.copy(Xt))},viewport:function Fn(Xt){!1===gr.equals(Xt)&&(o.viewport(Xt.x,Xt.y,Xt.z,Xt.w),gr.copy(Xt))},reset:function Rn(){for(var Xt=0;Xt<Qe.length;Xt++)1===Qe[Xt]&&(o.disableVertexAttribArray(Xt),Qe[Xt]=0);mt={},vt=null,tr=null,Mr={},Kt=null,Jn=null,Xn=null,J.reset(),se.reset(),Fe.reset()}}}function xb(o,f,v){var x;function G(Hn){if("highp"===Hn){if(o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_FLOAT).precision>0&&o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT).precision>0)return"highp";Hn="mediump"}return"mediump"===Hn&&o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_FLOAT).precision>0&&o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var J=void 0!==v.precision?v.precision:"highp",se=G(J);se!==J&&(console.warn("THREE.WebGLRenderer:",J,"not supported, using",se,"instead."),J=se);var Fe=!0===v.logarithmicDepthBuffer&&!!f.get("EXT_frag_depth"),Me=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS),qe=o.getParameter(o.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Qe=o.getParameter(o.MAX_TEXTURE_SIZE),ft=o.getParameter(o.MAX_CUBE_MAP_TEXTURE_SIZE),mt=o.getParameter(o.MAX_VERTEX_ATTRIBS),vt=o.getParameter(o.MAX_VERTEX_UNIFORM_VECTORS),Kt=o.getParameter(o.MAX_VARYING_VECTORS),Yt=o.getParameter(o.MAX_FRAGMENT_UNIFORM_VECTORS),jt=qe>0,cn=!!f.get("OES_texture_float");return{getMaxAnisotropy:function P(){if(void 0!==x)return x;var Hn=f.get("EXT_texture_filter_anisotropic");return x=null!==Hn?o.getParameter(Hn.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:G,precision:J,logarithmicDepthBuffer:Fe,maxTextures:Me,maxVertexTextures:qe,maxTextureSize:Qe,maxCubemapSize:ft,maxAttributes:mt,maxVertexUniforms:vt,maxVaryings:Kt,maxFragmentUniforms:Yt,vertexTextures:jt,floatFragmentTextures:cn,floatVertexTextures:jt&&cn}}function Tg(o){var f={};return{get:function(v){if(void 0!==f[v])return f[v];var x;switch(v){case"WEBGL_depth_texture":x=o.getExtension("WEBGL_depth_texture")||o.getExtension("MOZ_WEBGL_depth_texture")||o.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":x=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":x=o.getExtension("WEBGL_compressed_texture_s3tc")||o.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":x=o.getExtension("WEBGL_compressed_texture_pvrtc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":x=o.getExtension("WEBGL_compressed_texture_etc1");break;default:x=o.getExtension(v)}return null===x&&console.warn("THREE.WebGLRenderer: "+v+" extension not supported."),f[v]=x,x}}}function gu(){var o=this,f=null,v=0,x=!1,P=!1,G=new ln,J=new vn,se={value:null,needsUpdate:!1};function Fe(){se.value!==f&&(se.value=f,se.needsUpdate=v>0),o.numPlanes=v,o.numIntersection=0}function Me(qe,Qe,ft,mt){var vt=null!==qe?qe.length:0,Kt=null;if(0!==vt){if(Kt=se.value,!0!==mt||null===Kt){var Yt=ft+4*vt,jt=Qe.matrixWorldInverse;J.getNormalMatrix(jt),(null===Kt||Kt.length<Yt)&&(Kt=new Float32Array(Yt));for(var cn=0,fn=ft;cn!==vt;++cn,fn+=4)G.copy(qe[cn]).applyMatrix4(jt,J),G.normal.toArray(Kt,fn),Kt[fn+3]=G.constant}se.value=Kt,se.needsUpdate=!0}return o.numPlanes=vt,Kt}this.uniform=se,this.numPlanes=0,this.numIntersection=0,this.init=function(qe,Qe,ft){var mt=0!==qe.length||Qe||0!==v||x;return x=Qe,f=Me(qe,ft,0),v=qe.length,mt},this.beginShadows=function(){P=!0,Me(null)},this.endShadows=function(){P=!1,Fe()},this.setState=function(qe,Qe,ft,mt,vt,Kt){if(!x||null===qe||0===qe.length||P&&!ft)P?Me(null):Fe();else{var Yt=P?0:v,jt=4*Yt,cn=vt.clippingState||null;se.value=cn,cn=Me(qe,mt,jt,Kt);for(var fn=0;fn!==jt;++fn)cn[fn]=f[fn];vt.clippingState=cn,this.numIntersection=Qe?this.numPlanes:0,this.numPlanes+=Yt}}}function zf(o){console.log("THREE.WebGLRenderer",j);var f=void 0!==(o=o||{}).canvas?o.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),v=void 0!==o.context?o.context:null,x=void 0!==o.alpha&&o.alpha,P=void 0===o.depth||o.depth,G=void 0===o.stencil||o.stencil,J=void 0!==o.antialias&&o.antialias,se=void 0===o.premultipliedAlpha||o.premultipliedAlpha,Fe=void 0!==o.preserveDrawingBuffer&&o.preserveDrawingBuffer,Me=[],qe=[],Qe=-1,ft=[],mt=-1,vt=new Float32Array(8),Kt=[],Yt=[];this.domElement=f,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Yn,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var U,jt=this,cn=null,fn=null,Hn=null,Ln=-1,oi="",Jn=null,Xn=new Pr,ci=null,Li=new Pr,Tr=0,dr=new na(0),zn=0,Un=f.width,Gi=f.height,tr=1,Mr=new Pr(0,0,Un,Gi),xr=!1,gr=new Pr(0,0,Un,Gi),fs=new Xo,Wr=new gu,$i=!1,Ui=!1,g=new gn,c=new Zs,p=new Bn,b=new Zs,A=new Zs,E={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},M={calls:0,vertices:0,faces:0,points:0};this.info={render:M,memory:{geometries:0,textures:0},programs:null};try{var ne={alpha:x,depth:P,stencil:G,antialias:J,premultipliedAlpha:se,preserveDrawingBuffer:Fe};if(null===(U=v||f.getContext("webgl",ne)||f.getContext("experimental-webgl",ne)))throw null!==f.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===U.getShaderPrecisionFormat&&(U.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),f.addEventListener("webglcontextlost",xn,!1)}catch(Tt){console.error("THREE.WebGLRenderer: "+Tt)}var X=new Tg(U);X.get("WEBGL_depth_texture"),X.get("OES_texture_float"),X.get("OES_texture_float_linear"),X.get("OES_texture_half_float"),X.get("OES_texture_half_float_linear"),X.get("OES_standard_derivatives"),X.get("ANGLE_instanced_arrays"),X.get("OES_element_index_uint")&&(Bs.MaxIndex=4294967296);var fe=new xb(U,X,o),be=new e_(U,X,Lr),Ge=new Zy,$e=new Jv(U,X,be,Ge,fe,Lr,this.info),Ke=new nf(U,Ge,this.info),ot=new ey(this,fe),_t=new nu;this.info.programs=ot.programs;var Et=new hp(U,X,M),$t=new yc(U,X,M),Ut=new Ff(-1,1,1,-1,0,1),un=new ku,In=new Bl(new yl(2,2),new eu({depthTest:!1,depthWrite:!1,fog:!1})),En=Fc.cube,hn=new Bl(new Xu(5,5,5),new sh({uniforms:En.uniforms,vertexShader:En.vertexShader,fragmentShader:En.fragmentShader,side:Q,depthTest:!1,depthWrite:!1,fog:!1}));function Mn(){return null===fn?tr:1}function mn(){be.init(),be.scissor(Xn.copy(Mr).multiplyScalar(tr)),be.viewport(Li.copy(gr).multiplyScalar(tr)),be.buffers.color.setClear(dr.r,dr.g,dr.b,zn,se)}function Fn(){cn=null,Jn=null,oi="",Ln=-1,be.reset()}mn(),this.context=U,this.capabilities=fe,this.extensions=X,this.properties=Ge,this.state=be;var Rn=new zo(this,E,Ke,fe);this.shadowMap=Rn;var Tt,Xt=new Ky(this,Kt),Nn=new Ig(this,Yt);function xn(Tt){Tt.preventDefault(),Fn(),mn(),Ge.clear()}function gi(Tt){var an=Tt.target;an.removeEventListener("dispose",gi),function $n(Tt){ai(Tt),Ge.delete(Tt)}(an)}function ai(Tt){var an=Ge.get(Tt).program;Tt.program=void 0,void 0!==an&&ot.releaseProgram(an)}function Pi(Tt,an){return Math.abs(an[0])-Math.abs(Tt[0])}function er(Tt,an){return Tt.object.renderOrder!==an.object.renderOrder?Tt.object.renderOrder-an.object.renderOrder:Tt.material.program&&an.material.program&&Tt.material.program!==an.material.program?Tt.material.program.id-an.material.program.id:Tt.material.id!==an.material.id?Tt.material.id-an.material.id:Tt.z!==an.z?Tt.z-an.z:Tt.id-an.id}function xi(Tt,an){return Tt.object.renderOrder!==an.object.renderOrder?Tt.object.renderOrder-an.object.renderOrder:Tt.z!==an.z?an.z-Tt.z:Tt.id-an.id}function Ki(Tt,an,ti,hi,pi){var os,gs;ti.transparent?(os=ft,gs=++mt):(os=qe,gs=++Qe);var rr=os[gs];void 0!==rr?(rr.id=Tt.id,rr.object=Tt,rr.geometry=an,rr.material=ti,rr.z=p.z,rr.group=pi):os.push(rr={id:Tt.id,object:Tt,geometry:an,material:ti,z:p.z,group:pi})}function mr(Tt){if(!fs.intersectsSphere(Tt))return!1;var an=Wr.numPlanes;if(0===an)return!0;var ti=jt.clippingPlanes,hi=Tt.center,pi=-Tt.radius,os=0;do{if(ti[os].distanceToPoint(hi)<pi)return!1}while(++os!==an);return!0}function pr(Tt,an){if(!1!==Tt.visible){if(0!=(Tt.layers.mask&an.layers.mask))if(Tt.isLight)Me.push(Tt);else if(Tt.isSprite)(!1===Tt.frustumCulled||!0===function Ar(Tt){return g.center.set(0,0,0),g.radius=.7071067811865476,g.applyMatrix4(Tt.matrixWorld),mr(g)}(Tt))&&Kt.push(Tt);else if(Tt.isLensFlare)Yt.push(Tt);else if(Tt.isImmediateRenderObject)!0===jt.sortObjects&&(p.setFromMatrixPosition(Tt.matrixWorld),p.applyProjection(c)),Ki(Tt,null,Tt.material,0,null);else if((Tt.isMesh||Tt.isLine||Tt.isPoints)&&(Tt.isSkinnedMesh&&Tt.skeleton.update(),!1===Tt.frustumCulled||!0===function hr(Tt){var an=Tt.geometry;return null===an.boundingSphere&&an.computeBoundingSphere(),g.copy(an.boundingSphere).applyMatrix4(Tt.matrixWorld),mr(g)}(Tt))){var hi=Tt.material;if(!0===hi.visible){!0===jt.sortObjects&&(p.setFromMatrixPosition(Tt.matrixWorld),p.applyProjection(c));var pi=Ke.update(Tt);if(hi.isMultiMaterial)for(var os=pi.groups,gs=hi.materials,rr=0,Ws=os.length;rr<Ws;rr++){var Ur=os[rr],Gr=gs[Ur.materialIndex];!0===Gr.visible&&Ki(Tt,pi,Gr,0,Ur)}else Ki(Tt,pi,hi,0,null)}}var as=Tt.children;for(rr=0,Ws=as.length;rr<Ws;rr++)pr(as[rr],an)}}function Si(Tt,an,ti,hi){for(var pi=0,os=Tt.length;pi<os;pi++){var gs=Tt[pi],rr=gs.object,Ws=gs.geometry,Ur=void 0===hi?gs.material:hi,Gr=gs.group;if(rr.modelViewMatrix.multiplyMatrices(ti.matrixWorldInverse,rr.matrixWorld),rr.normalMatrix.getNormalMatrix(rr.modelViewMatrix),rr.onBeforeRender(jt,an,ti,Ws,Ur,Gr),rr.isImmediateRenderObject){Sr(Ur);var as=ts(ti,an.fog,Ur,rr);oi="",rr.render(function(go){jt.renderBufferImmediate(go,as,Ur)})}else jt.renderBufferDirect(ti,an.fog,Ws,Ur,rr,Gr);rr.onAfterRender(jt,an,ti,Ws,Ur,Gr)}}function Sr(Tt){Tt.side===Re?be.disable(U.CULL_FACE):be.enable(U.CULL_FACE),be.setFlipSided(Tt.side===Q),!0===Tt.transparent?be.setBlending(Tt.blending,Tt.blendEquation,Tt.blendSrc,Tt.blendDst,Tt.blendEquationAlpha,Tt.blendSrcAlpha,Tt.blendDstAlpha,Tt.premultipliedAlpha):be.setBlending(ee),be.setDepthFunc(Tt.depthFunc),be.setDepthTest(Tt.depthTest),be.setDepthWrite(Tt.depthWrite),be.setColorWrite(Tt.colorWrite),be.setPolygonOffset(Tt.polygonOffset,Tt.polygonOffsetFactor,Tt.polygonOffsetUnits)}function ts(Tt,an,ti,hi){Tr=0;var pi=Ge.get(ti);$i&&(Ui||Tt!==Jn)&&Wr.setState(ti.clippingPlanes,ti.clipIntersection,ti.clipShadows,Tt,pi,Tt===Jn&&ti.id===Ln),!1===ti.needsUpdate&&(void 0===pi.program||ti.fog&&pi.fog!==an||ti.lights&&pi.lightsHash!==E.hash||void 0!==pi.numClippingPlanes&&(pi.numClippingPlanes!==Wr.numPlanes||pi.numIntersection!==Wr.numIntersection))&&(ti.needsUpdate=!0),ti.needsUpdate&&(function sr(Tt,an,ti){var hi=Ge.get(Tt),pi=ot.getParameters(Tt,E,an,Wr.numPlanes,Wr.numIntersection,ti),os=ot.getProgramCode(Tt,pi),gs=hi.program,rr=!0;if(void 0===gs)Tt.addEventListener("dispose",gi);else if(gs.code!==os)ai(Tt);else{if(void 0!==pi.shaderID)return;rr=!1}if(rr){if(pi.shaderID){var Ws=Fc[pi.shaderID];hi.__webglShader={name:Tt.type,uniforms:Ul.clone(Ws.uniforms),vertexShader:Ws.vertexShader,fragmentShader:Ws.fragmentShader}}else hi.__webglShader={name:Tt.type,uniforms:Tt.uniforms,vertexShader:Tt.vertexShader,fragmentShader:Tt.fragmentShader};Tt.__webglShader=hi.__webglShader,gs=ot.acquireProgram(Tt,pi,os),hi.program=gs,Tt.program=gs}var Ur=gs.getAttributes();if(Tt.morphTargets){Tt.numSupportedMorphTargets=0;for(var Gr=0;Gr<jt.maxMorphTargets;Gr++)Ur["morphTarget"+Gr]>=0&&Tt.numSupportedMorphTargets++}if(Tt.morphNormals)for(Tt.numSupportedMorphNormals=0,Gr=0;Gr<jt.maxMorphNormals;Gr++)Ur["morphNormal"+Gr]>=0&&Tt.numSupportedMorphNormals++;var as=hi.__webglShader.uniforms;(!Tt.isShaderMaterial&&!Tt.isRawShaderMaterial||!0===Tt.clipping)&&(hi.numClippingPlanes=Wr.numPlanes,hi.numIntersection=Wr.numIntersection,as.clippingPlanes=Wr.uniform),hi.fog=an,hi.lightsHash=E.hash,Tt.lights&&(as.ambientLightColor.value=E.ambient,as.directionalLights.value=E.directional,as.spotLights.value=E.spot,as.rectAreaLights.value=E.rectArea,as.pointLights.value=E.point,as.hemisphereLights.value=E.hemi,as.directionalShadowMap.value=E.directionalShadowMap,as.directionalShadowMatrix.value=E.directionalShadowMatrix,as.spotShadowMap.value=E.spotShadowMap,as.spotShadowMatrix.value=E.spotShadowMatrix,as.pointShadowMap.value=E.pointShadowMap,as.pointShadowMatrix.value=E.pointShadowMatrix);var go=hi.program.getUniforms(),Ao=tl.seqWithValue(go.seq,as);hi.uniformsList=Ao}(ti,an,hi),ti.needsUpdate=!1);var gs=!1,rr=!1,Ws=!1,Ur=pi.program,Gr=Ur.getUniforms(),as=pi.__webglShader.uniforms;if(Ur.id!==cn&&(U.useProgram(Ur.program),cn=Ur.id,gs=!0,rr=!0,Ws=!0),ti.id!==Ln&&(Ln=ti.id,rr=!0),gs||Tt!==Jn){if(Gr.set(U,Tt,"projectionMatrix"),fe.logarithmicDepthBuffer&&Gr.setValue(U,"logDepthBufFC",2/(Math.log(Tt.far+1)/Math.LN2)),Tt!==Jn&&(Jn=Tt,rr=!0,Ws=!0),ti.isShaderMaterial||ti.isMeshPhongMaterial||ti.isMeshStandardMaterial||ti.envMap){var go=Gr.map.cameraPosition;void 0!==go&&go.setValue(U,p.setFromMatrixPosition(Tt.matrixWorld))}(ti.isMeshPhongMaterial||ti.isMeshLambertMaterial||ti.isMeshBasicMaterial||ti.isMeshStandardMaterial||ti.isShaderMaterial||ti.skinning)&&Gr.setValue(U,"viewMatrix",Tt.matrixWorldInverse),Gr.set(U,jt,"toneMappingExposure"),Gr.set(U,jt,"toneMappingWhitePoint")}if(ti.skinning){Gr.setOptional(U,hi,"bindMatrix"),Gr.setOptional(U,hi,"bindMatrixInverse");var Ao=hi.skeleton;Ao&&(fe.floatVertexTextures&&Ao.useVertexTexture?(Gr.set(U,Ao,"boneTexture"),Gr.set(U,Ao,"boneTextureWidth"),Gr.set(U,Ao,"boneTextureHeight")):Gr.setOptional(U,Ao,"boneMatrices"))}return rr&&(ti.lights&&function oa(Tt,an){Tt.ambientLightColor.needsUpdate=an,Tt.directionalLights.needsUpdate=an,Tt.pointLights.needsUpdate=an,Tt.spotLights.needsUpdate=an,Tt.rectAreaLights.needsUpdate=an,Tt.hemisphereLights.needsUpdate=an}(as,Ws),an&&ti.fog&&function ds(Tt,an){Tt.fogColor.value=an.color,an.isFog?(Tt.fogNear.value=an.near,Tt.fogFar.value=an.far):an.isFogExp2&&(Tt.fogDensity.value=an.density)}(as,an),(ti.isMeshBasicMaterial||ti.isMeshLambertMaterial||ti.isMeshPhongMaterial||ti.isMeshStandardMaterial||ti.isMeshNormalMaterial||ti.isMeshDepthMaterial)&&function ps(Tt,an){var ti;if(Tt.opacity.value=an.opacity,Tt.diffuse.value=an.color,an.emissive&&Tt.emissive.value.copy(an.emissive).multiplyScalar(an.emissiveIntensity),Tt.map.value=an.map,Tt.specularMap.value=an.specularMap,Tt.alphaMap.value=an.alphaMap,an.lightMap&&(Tt.lightMap.value=an.lightMap,Tt.lightMapIntensity.value=an.lightMapIntensity),an.aoMap&&(Tt.aoMap.value=an.aoMap,Tt.aoMapIntensity.value=an.aoMapIntensity),an.map?ti=an.map:an.specularMap?ti=an.specularMap:an.displacementMap?ti=an.displacementMap:an.normalMap?ti=an.normalMap:an.bumpMap?ti=an.bumpMap:an.roughnessMap?ti=an.roughnessMap:an.metalnessMap?ti=an.metalnessMap:an.alphaMap?ti=an.alphaMap:an.emissiveMap&&(ti=an.emissiveMap),void 0!==ti){ti.isWebGLRenderTarget&&(ti=ti.texture);var hi=ti.offset,pi=ti.repeat;Tt.offsetRepeat.value.set(hi.x,hi.y,pi.x,pi.y)}Tt.envMap.value=an.envMap,Tt.flipEnvMap.value=an.envMap&&an.envMap.isCubeTexture?-1:1,Tt.reflectivity.value=an.reflectivity,Tt.refractionRatio.value=an.refractionRatio}(as,ti),ti.isLineBasicMaterial?Xs(as,ti):ti.isLineDashedMaterial?(Xs(as,ti),function sa(Tt,an){Tt.dashSize.value=an.dashSize,Tt.totalSize.value=an.dashSize+an.gapSize,Tt.scale.value=an.scale}(as,ti)):ti.isPointsMaterial?function Cs(Tt,an){if(Tt.diffuse.value=an.color,Tt.opacity.value=an.opacity,Tt.size.value=an.size*tr,Tt.scale.value=.5*Gi,Tt.map.value=an.map,null!==an.map){var ti=an.map.offset,hi=an.map.repeat;Tt.offsetRepeat.value.set(ti.x,ti.y,hi.x,hi.y)}}(as,ti):ti.isMeshLambertMaterial?function ia(Tt,an){an.emissiveMap&&(Tt.emissiveMap.value=an.emissiveMap)}(as,ti):ti.isMeshToonMaterial?function Is(Tt,an){Rr(Tt,an),an.gradientMap&&(Tt.gradientMap.value=an.gradientMap)}(as,ti):ti.isMeshPhongMaterial?Rr(as,ti):ti.isMeshPhysicalMaterial?function aa(Tt,an){Tt.clearCoat.value=an.clearCoat,Tt.clearCoatRoughness.value=an.clearCoatRoughness,Ts(Tt,an)}(as,ti):ti.isMeshStandardMaterial?Ts(as,ti):ti.isMeshDepthMaterial?ti.displacementMap&&(as.displacementMap.value=ti.displacementMap,as.displacementScale.value=ti.displacementScale,as.displacementBias.value=ti.displacementBias):ti.isMeshNormalMaterial&&function Ya(Tt,an){an.bumpMap&&(Tt.bumpMap.value=an.bumpMap,Tt.bumpScale.value=an.bumpScale),an.normalMap&&(Tt.normalMap.value=an.normalMap,Tt.normalScale.value.copy(an.normalScale)),an.displacementMap&&(Tt.displacementMap.value=an.displacementMap,Tt.displacementScale.value=an.displacementScale,Tt.displacementBias.value=an.displacementBias)}(as,ti),void 0!==as.ltcMat&&(as.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==as.ltcMag&&(as.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),tl.upload(U,pi.uniformsList,as,jt)),Gr.set(U,hi,"modelViewMatrix"),Gr.set(U,hi,"normalMatrix"),Gr.setValue(U,"modelMatrix",hi.matrixWorld),Ur}function Xs(Tt,an){Tt.diffuse.value=an.color,Tt.opacity.value=an.opacity}function Rr(Tt,an){Tt.specular.value=an.specular,Tt.shininess.value=Math.max(an.shininess,1e-4),an.emissiveMap&&(Tt.emissiveMap.value=an.emissiveMap),an.bumpMap&&(Tt.bumpMap.value=an.bumpMap,Tt.bumpScale.value=an.bumpScale),an.normalMap&&(Tt.normalMap.value=an.normalMap,Tt.normalScale.value.copy(an.normalScale)),an.displacementMap&&(Tt.displacementMap.value=an.displacementMap,Tt.displacementScale.value=an.displacementScale,Tt.displacementBias.value=an.displacementBias)}function Ts(Tt,an){Tt.roughness.value=an.roughness,Tt.metalness.value=an.metalness,an.roughnessMap&&(Tt.roughnessMap.value=an.roughnessMap),an.metalnessMap&&(Tt.metalnessMap.value=an.metalnessMap),an.emissiveMap&&(Tt.emissiveMap.value=an.emissiveMap),an.bumpMap&&(Tt.bumpMap.value=an.bumpMap,Tt.bumpScale.value=an.bumpScale),an.normalMap&&(Tt.normalMap.value=an.normalMap,Tt.normalScale.value.copy(an.normalScale)),an.displacementMap&&(Tt.displacementMap.value=an.displacementMap,Tt.displacementScale.value=an.displacementScale,Tt.displacementBias.value=an.displacementBias),an.envMap&&(Tt.envMapIntensity.value=an.envMapIntensity)}function Lr(Tt){var an;if(Tt===C)return U.REPEAT;if(Tt===S)return U.CLAMP_TO_EDGE;if(Tt===k)return U.MIRRORED_REPEAT;if(Tt===z)return U.NEAREST;if(Tt===D)return U.NEAREST_MIPMAP_NEAREST;if(Tt===H)return U.NEAREST_MIPMAP_LINEAR;if(Tt===Z)return U.LINEAR;if(Tt===$)return U.LINEAR_MIPMAP_NEAREST;if(Tt===R)return U.LINEAR_MIPMAP_LINEAR;if(Tt===he)return U.UNSIGNED_BYTE;if(Tt===Xe)return U.UNSIGNED_SHORT_4_4_4_4;if(Tt===je)return U.UNSIGNED_SHORT_5_5_5_1;if(Tt===nt)return U.UNSIGNED_SHORT_5_6_5;if(Tt===me)return U.BYTE;if(Tt===ve)return U.SHORT;if(Tt===ge)return U.UNSIGNED_SHORT;if(Tt===pe)return U.INT;if(Tt===de)return U.UNSIGNED_INT;if(Tt===Ee)return U.FLOAT;if(Tt===ke&&null!==(an=X.get("OES_texture_half_float")))return an.HALF_FLOAT_OES;if(Tt===gt)return U.ALPHA;if(Tt===Wt)return U.RGB;if(Tt===Lt)return U.RGBA;if(Tt===Bt)return U.LUMINANCE;if(Tt===qt)return U.LUMINANCE_ALPHA;if(Tt===We)return U.DEPTH_COMPONENT;if(Tt===Ye)return U.DEPTH_STENCIL;if(Tt===Vt)return U.FUNC_ADD;if(Tt===on)return U.FUNC_SUBTRACT;if(Tt===Ct)return U.FUNC_REVERSE_SUBTRACT;if(Tt===Ht)return U.ZERO;if(Tt===Qn)return U.ONE;if(Tt===en)return U.SRC_COLOR;if(Tt===Sn)return U.ONE_MINUS_SRC_COLOR;if(Tt===Pn)return U.SRC_ALPHA;if(Tt===xt)return U.ONE_MINUS_SRC_ALPHA;if(Tt===Jt)return U.DST_ALPHA;if(Tt===Gn)return U.ONE_MINUS_DST_ALPHA;if(Tt===ri)return U.DST_COLOR;if(Tt===ni)return U.ONE_MINUS_DST_COLOR;if(Tt===St)return U.SRC_ALPHA_SATURATE;if((Tt===we||Tt===Ue||Tt===ct||Tt===Dt)&&null!==(an=X.get("WEBGL_compressed_texture_s3tc"))){if(Tt===we)return an.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Tt===Ue)return an.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Tt===ct)return an.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Tt===Dt)return an.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((Tt===wt||Tt===nn||Tt===On||Tt===jn)&&null!==(an=X.get("WEBGL_compressed_texture_pvrtc"))){if(Tt===wt)return an.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Tt===nn)return an.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Tt===On)return an.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Tt===jn)return an.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(Tt===ii&&null!==(an=X.get("WEBGL_compressed_texture_etc1")))return an.COMPRESSED_RGB_ETC1_WEBGL;if((Tt===rn||Tt===Qt)&&null!==(an=X.get("EXT_blend_minmax"))){if(Tt===rn)return an.MIN_EXT;if(Tt===Qt)return an.MAX_EXT}return Tt===pt&&null!==(an=X.get("WEBGL_depth_texture"))?an.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return U},this.getContextAttributes=function(){return U.getContextAttributes()},this.forceContextLoss=function(){X.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return fe.getMaxAnisotropy()},this.getPrecision=function(){return fe.precision},this.getPixelRatio=function(){return tr},this.setPixelRatio=function(Tt){void 0!==Tt&&(tr=Tt,this.setSize(gr.z,gr.w,!1))},this.getSize=function(){return{width:Un,height:Gi}},this.setSize=function(Tt,an,ti){Un=Tt,Gi=an,f.width=Tt*tr,f.height=an*tr,!1!==ti&&(f.style.width=Tt+"px",f.style.height=an+"px"),this.setViewport(0,0,Tt,an)},this.setViewport=function(Tt,an,ti,hi){be.viewport(gr.set(Tt,an,ti,hi))},this.setScissor=function(Tt,an,ti,hi){be.scissor(Mr.set(Tt,an,ti,hi))},this.setScissorTest=function(Tt){be.setScissorTest(xr=Tt)},this.getClearColor=function(){return dr},this.setClearColor=function(Tt,an){dr.set(Tt),be.buffers.color.setClear(dr.r,dr.g,dr.b,zn=void 0!==an?an:1,se)},this.getClearAlpha=function(){return zn},this.setClearAlpha=function(Tt){be.buffers.color.setClear(dr.r,dr.g,dr.b,zn=Tt,se)},this.clear=function(Tt,an,ti){var hi=0;(void 0===Tt||Tt)&&(hi|=U.COLOR_BUFFER_BIT),(void 0===an||an)&&(hi|=U.DEPTH_BUFFER_BIT),(void 0===ti||ti)&&(hi|=U.STENCIL_BUFFER_BIT),U.clear(hi)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(Tt,an,ti,hi){this.setRenderTarget(Tt),this.clear(an,ti,hi)},this.resetGLState=Fn,this.dispose=function(){ft=[],mt=-1,qe=[],Qe=-1,f.removeEventListener("webglcontextlost",xn,!1)},this.renderBufferImmediate=function(Tt,an,ti){be.initAttributes();var hi=Ge.get(Tt);Tt.hasPositions&&!hi.position&&(hi.position=U.createBuffer()),Tt.hasNormals&&!hi.normal&&(hi.normal=U.createBuffer()),Tt.hasUvs&&!hi.uv&&(hi.uv=U.createBuffer()),Tt.hasColors&&!hi.color&&(hi.color=U.createBuffer());var pi=an.getAttributes();if(Tt.hasPositions&&(U.bindBuffer(U.ARRAY_BUFFER,hi.position),U.bufferData(U.ARRAY_BUFFER,Tt.positionArray,U.DYNAMIC_DRAW),be.enableAttribute(pi.position),U.vertexAttribPointer(pi.position,3,U.FLOAT,!1,0,0)),Tt.hasNormals){if(U.bindBuffer(U.ARRAY_BUFFER,hi.normal),!ti.isMeshPhongMaterial&&!ti.isMeshStandardMaterial&&!ti.isMeshNormalMaterial&&ti.shading===Le)for(var os=0,gs=3*Tt.count;os<gs;os+=9){var rr=Tt.normalArray,Ws=(rr[os+0]+rr[os+3]+rr[os+6])/3,Ur=(rr[os+1]+rr[os+4]+rr[os+7])/3,Gr=(rr[os+2]+rr[os+5]+rr[os+8])/3;rr[os+0]=Ws,rr[os+1]=Ur,rr[os+2]=Gr,rr[os+3]=Ws,rr[os+4]=Ur,rr[os+5]=Gr,rr[os+6]=Ws,rr[os+7]=Ur,rr[os+8]=Gr}U.bufferData(U.ARRAY_BUFFER,Tt.normalArray,U.DYNAMIC_DRAW),be.enableAttribute(pi.normal),U.vertexAttribPointer(pi.normal,3,U.FLOAT,!1,0,0)}Tt.hasUvs&&ti.map&&(U.bindBuffer(U.ARRAY_BUFFER,hi.uv),U.bufferData(U.ARRAY_BUFFER,Tt.uvArray,U.DYNAMIC_DRAW),be.enableAttribute(pi.uv),U.vertexAttribPointer(pi.uv,2,U.FLOAT,!1,0,0)),Tt.hasColors&&ti.vertexColors!==Ae&&(U.bindBuffer(U.ARRAY_BUFFER,hi.color),U.bufferData(U.ARRAY_BUFFER,Tt.colorArray,U.DYNAMIC_DRAW),be.enableAttribute(pi.color),U.vertexAttribPointer(pi.color,3,U.FLOAT,!1,0,0)),be.disableUnusedAttributes(),U.drawArrays(U.TRIANGLES,0,Tt.count),Tt.count=0},this.renderBufferDirect=function(Tt,an,ti,hi,pi,os){Sr(hi);var gs=ts(Tt,an,hi,pi),rr=!1,Ws=ti.id+"_"+gs.id+"_"+hi.wireframe;Ws!==oi&&(oi=Ws,rr=!0);var Ur=pi.morphTargetInfluences;if(void 0!==Ur){for(var Gr=[],as=0,go=Ur.length;as<go;as++)Gr.push([Ao=Ur[as],as]);Gr.sort(Pi),Gr.length>8&&(Gr.length=8);var Xl=ti.morphAttributes;for(as=0,go=Gr.length;as<go;as++){var Ao;if(vt[as]=(Ao=Gr[as])[0],0!==Ao[0]){var Uo=Ao[1];!0===hi.morphTargets&&Xl.position&&ti.addAttribute("morphTarget"+as,Xl.position[Uo]),!0===hi.morphNormals&&Xl.normal&&ti.addAttribute("morphNormal"+as,Xl.normal[Uo])}else!0===hi.morphTargets&&ti.removeAttribute("morphTarget"+as),!0===hi.morphNormals&&ti.removeAttribute("morphNormal"+as)}as=Gr.length;for(var rl=vt.length;as<rl;as++)vt[as]=0;gs.getUniforms().setValue(U,"morphTargetInfluences",vt),rr=!0}Uo=ti.index;var ru,al=ti.attributes.position,Os=1;!0===hi.wireframe&&(Uo=Ke.getWireframeAttribute(ti),Os=2),null!==Uo?(ru=$t).setIndex(Uo):ru=Et,rr&&(function wi(Tt,an,ti,hi){var pi;if(ti&&ti.isInstancedBufferGeometry&&null===(pi=X.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===hi&&(hi=0),be.initAttributes();var os=ti.attributes,gs=an.getAttributes(),rr=Tt.defaultAttributeValues;for(var Ws in gs){var Ur=gs[Ws];if(Ur>=0){var Gr=os[Ws];if(void 0!==Gr){var as=Gr.normalized,go=Gr.itemSize,Ao=Ke.getAttributeProperties(Gr),Xl=Ao.__webglBuffer,rl=Ao.type,Uo=Ao.bytesPerElement;if(Gr.isInterleavedBufferAttribute){var al=Gr.data,Os=al.stride,ru=Gr.offset;al&&al.isInstancedInterleavedBuffer?(be.enableAttributeAndDivisor(Ur,al.meshPerAttribute,pi),void 0===ti.maxInstancedCount&&(ti.maxInstancedCount=al.meshPerAttribute*al.count)):be.enableAttribute(Ur),U.bindBuffer(U.ARRAY_BUFFER,Xl),U.vertexAttribPointer(Ur,go,rl,as,Os*Uo,(hi*Os+ru)*Uo)}else Gr.isInstancedBufferAttribute?(be.enableAttributeAndDivisor(Ur,Gr.meshPerAttribute,pi),void 0===ti.maxInstancedCount&&(ti.maxInstancedCount=Gr.meshPerAttribute*Gr.count)):be.enableAttribute(Ur),U.bindBuffer(U.ARRAY_BUFFER,Xl),U.vertexAttribPointer(Ur,go,rl,as,0,hi*go*Uo)}else if(void 0!==rr){var Ju=rr[Ws];if(void 0!==Ju)switch(Ju.length){case 2:U.vertexAttrib2fv(Ur,Ju);break;case 3:U.vertexAttrib3fv(Ur,Ju);break;case 4:U.vertexAttrib4fv(Ur,Ju);break;default:U.vertexAttrib1fv(Ur,Ju)}}}}be.disableUnusedAttributes()}}(hi,gs,ti),null!==Uo&&U.bindBuffer(U.ELEMENT_ARRAY_BUFFER,Ke.getAttributeBuffer(Uo)));var Ju=0;null!==Uo?Ju=Uo.count:void 0!==al&&(Ju=al.count);var ec=ti.drawRange.start*Os,Gc=ti.drawRange.count*Os,Qp=null!==os?os.start*Os:0,Sp=null!==os?os.count*Os:1/0,Wc=Math.max(ec,Qp),lc=Math.min(Ju,ec+Gc,Qp+Sp)-1,jc=Math.max(0,lc-Wc+1);if(0!==jc){if(pi.isMesh)if(!0===hi.wireframe)be.setLineWidth(hi.wireframeLinewidth*Mn()),ru.setMode(U.LINES);else switch(pi.drawMode){case rs:ru.setMode(U.TRIANGLES);break;case ss:ru.setMode(U.TRIANGLE_STRIP);break;case Xr:ru.setMode(U.TRIANGLE_FAN)}else if(pi.isLine){var Jp=hi.linewidth;void 0===Jp&&(Jp=1),be.setLineWidth(Jp*Mn()),ru.setMode(pi.isLineSegments?U.LINES:U.LINE_STRIP)}else pi.isPoints&&ru.setMode(U.POINTS);ti&&ti.isInstancedBufferGeometry?ti.maxInstancedCount>0&&ru.renderInstances(ti,Wc,jc):ru.render(Wc,jc)}},this.render=function(Tt,an,ti,hi){if(void 0===an||!0===an.isCamera){oi="",Ln=-1,Jn=null,!0===Tt.autoUpdate&&Tt.updateMatrixWorld(),null===an.parent&&an.updateMatrixWorld(),an.matrixWorldInverse.getInverse(an.matrixWorld),c.multiplyMatrices(an.projectionMatrix,an.matrixWorldInverse),fs.setFromMatrix(c),Me.length=0,Qe=-1,mt=-1,Kt.length=0,Yt.length=0,$i=Wr.init(this.clippingPlanes,Ui=this.localClippingEnabled,an),pr(Tt,an),qe.length=Qe+1,ft.length=mt+1,!0===jt.sortObjects&&(qe.sort(er),ft.sort(xi)),$i&&Wr.beginShadows(),function Yr(Tt){for(var an=0,ti=0,hi=Tt.length;ti<hi;ti++){var pi=Tt[ti];pi.castShadow&&(E.shadows[an++]=pi)}E.shadows.length=an}(Me),Rn.render(Tt,an),function Cn(Tt,an){var ti,hi,pi,Ws,Ur,Gr,as,os=0,gs=0,rr=0,go=an.matrixWorldInverse,Ao=0,Xl=0,rl=0,Uo=0,al=0;for(ti=0,hi=Tt.length;ti<hi;ti++)if(Ws=(pi=Tt[ti]).color,Ur=pi.intensity,Gr=pi.distance,as=pi.shadow&&pi.shadow.map?pi.shadow.map.texture:null,pi.isAmbientLight)os+=Ws.r*Ur,gs+=Ws.g*Ur,rr+=Ws.b*Ur;else if(pi.isDirectionalLight)(Os=_t.get(pi)).color.copy(pi.color).multiplyScalar(pi.intensity),Os.direction.setFromMatrixPosition(pi.matrixWorld),p.setFromMatrixPosition(pi.target.matrixWorld),Os.direction.sub(p),Os.direction.transformDirection(go),Os.shadow=pi.castShadow,pi.castShadow&&(Os.shadowBias=pi.shadow.bias,Os.shadowRadius=pi.shadow.radius,Os.shadowMapSize=pi.shadow.mapSize),E.directionalShadowMap[Ao]=as,E.directionalShadowMatrix[Ao]=pi.shadow.matrix,E.directional[Ao++]=Os;else if(pi.isSpotLight)(Os=_t.get(pi)).position.setFromMatrixPosition(pi.matrixWorld),Os.position.applyMatrix4(go),Os.color.copy(Ws).multiplyScalar(Ur),Os.distance=Gr,Os.direction.setFromMatrixPosition(pi.matrixWorld),p.setFromMatrixPosition(pi.target.matrixWorld),Os.direction.sub(p),Os.direction.transformDirection(go),Os.coneCos=Math.cos(pi.angle),Os.penumbraCos=Math.cos(pi.angle*(1-pi.penumbra)),Os.decay=0===pi.distance?0:pi.decay,Os.shadow=pi.castShadow,pi.castShadow&&(Os.shadowBias=pi.shadow.bias,Os.shadowRadius=pi.shadow.radius,Os.shadowMapSize=pi.shadow.mapSize),E.spotShadowMap[rl]=as,E.spotShadowMatrix[rl]=pi.shadow.matrix,E.spot[rl++]=Os;else if(pi.isRectAreaLight)(Os=_t.get(pi)).color.copy(Ws).multiplyScalar(Ur/(pi.width*pi.height)),Os.position.setFromMatrixPosition(pi.matrixWorld),Os.position.applyMatrix4(go),A.identity(),b.copy(pi.matrixWorld),b.premultiply(go),A.extractRotation(b),Os.halfWidth.set(.5*pi.width,0,0),Os.halfHeight.set(0,.5*pi.height,0),Os.halfWidth.applyMatrix4(A),Os.halfHeight.applyMatrix4(A),E.rectArea[Uo++]=Os;else if(pi.isPointLight)(Os=_t.get(pi)).position.setFromMatrixPosition(pi.matrixWorld),Os.position.applyMatrix4(go),Os.color.copy(pi.color).multiplyScalar(pi.intensity),Os.distance=pi.distance,Os.decay=0===pi.distance?0:pi.decay,Os.shadow=pi.castShadow,pi.castShadow&&(Os.shadowBias=pi.shadow.bias,Os.shadowRadius=pi.shadow.radius,Os.shadowMapSize=pi.shadow.mapSize),E.pointShadowMap[Xl]=as,void 0===E.pointShadowMatrix[Xl]&&(E.pointShadowMatrix[Xl]=new Zs),p.setFromMatrixPosition(pi.matrixWorld).negate(),E.pointShadowMatrix[Xl].identity().setPosition(p),E.point[Xl++]=Os;else if(pi.isHemisphereLight){var Os;(Os=_t.get(pi)).direction.setFromMatrixPosition(pi.matrixWorld),Os.direction.transformDirection(go),Os.direction.normalize(),Os.skyColor.copy(pi.color).multiplyScalar(Ur),Os.groundColor.copy(pi.groundColor).multiplyScalar(Ur),E.hemi[al++]=Os}E.ambient[0]=os,E.ambient[1]=gs,E.ambient[2]=rr,E.directional.length=Ao,E.spot.length=rl,E.rectArea.length=Uo,E.point.length=Xl,E.hemi.length=al,E.hash=Ao+","+Xl+","+rl+","+Uo+","+al+","+E.shadows.length}(Me,an),$i&&Wr.endShadows(),M.calls=0,M.vertices=0,M.faces=0,M.points=0,void 0===ti&&(ti=null),this.setRenderTarget(ti);var pi=Tt.background;if(null===pi?be.buffers.color.setClear(dr.r,dr.g,dr.b,zn,se):pi&&pi.isColor&&(be.buffers.color.setClear(pi.r,pi.g,pi.b,1,se),hi=!0),(this.autoClear||hi)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),pi&&pi.isCubeTexture?(un.projectionMatrix.copy(an.projectionMatrix),un.matrixWorld.extractRotation(an.matrixWorld),un.matrixWorldInverse.getInverse(un.matrixWorld),hn.material.uniforms.tCube.value=pi,hn.modelViewMatrix.multiplyMatrices(un.matrixWorldInverse,hn.matrixWorld),Ke.update(hn),jt.renderBufferDirect(un,null,hn.geometry,hn.material,hn,null)):pi&&pi.isTexture&&(In.material.map=pi,Ke.update(In),jt.renderBufferDirect(Ut,null,In.geometry,In.material,In,null)),Tt.overrideMaterial){var os=Tt.overrideMaterial;Si(qe,Tt,an,os),Si(ft,Tt,an,os)}else be.setBlending(ee),Si(qe,Tt,an),Si(ft,Tt,an);Xt.render(Tt,an),Nn.render(Tt,an,Li),ti&&$e.updateRenderTargetMipmap(ti),be.setDepthTest(!0),be.setDepthWrite(!0),be.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(Tt,an){be.setCullFace(Tt),be.setFlipSided(an===q)},this.allocTextureUnit=function qi(){var Tt=Tr;return Tt>=fe.maxTextures&&console.warn("WebGLRenderer: trying to use "+Tt+" texture units while this GPU supports only "+fe.maxTextures),Tr+=1,Tt},this.setTexture2D=(Tt=!1,function(ti,hi){ti&&ti.isWebGLRenderTarget&&(Tt||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Tt=!0),ti=ti.texture),$e.setTexture2D(ti,hi)}),this.setTexture=function(){var Tt=!1;return function(ti,hi){Tt||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),Tt=!0),$e.setTexture2D(ti,hi)}}(),this.setTextureCube=function(){var Tt=!1;return function(ti,hi){ti&&ti.isWebGLRenderTargetCube&&(Tt||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Tt=!0),ti=ti.texture),ti&&ti.isCubeTexture||Array.isArray(ti.image)&&6===ti.image.length?$e.setTextureCube(ti,hi):$e.setTextureCubeDynamic(ti,hi)}}(),this.getCurrentRenderTarget=function(){return fn},this.setRenderTarget=function(Tt){fn=Tt,Tt&&void 0===Ge.get(Tt).__webglFramebuffer&&$e.setupRenderTarget(Tt);var ti,an=Tt&&Tt.isWebGLRenderTargetCube;if(Tt){var hi=Ge.get(Tt);ti=an?hi.__webglFramebuffer[Tt.activeCubeFace]:hi.__webglFramebuffer,Xn.copy(Tt.scissor),ci=Tt.scissorTest,Li.copy(Tt.viewport)}else ti=null,Xn.copy(Mr).multiplyScalar(tr),ci=xr,Li.copy(gr).multiplyScalar(tr);if(Hn!==ti&&(U.bindFramebuffer(U.FRAMEBUFFER,ti),Hn=ti),be.scissor(Xn),be.setScissorTest(ci),be.viewport(Li),an){var pi=Ge.get(Tt.texture);U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_CUBE_MAP_POSITIVE_X+Tt.activeCubeFace,pi.__webglTexture,Tt.activeMipMapLevel)}},this.readRenderTargetPixels=function(Tt,an,ti,hi,pi,os){if(!1!==(Tt&&Tt.isWebGLRenderTarget)){var gs=Ge.get(Tt).__webglFramebuffer;if(gs){var rr=!1;gs!==Hn&&(U.bindFramebuffer(U.FRAMEBUFFER,gs),rr=!0);try{var Ws=Tt.texture,Ur=Ws.format,Gr=Ws.type;if(Ur!==Lt&&Lr(Ur)!==U.getParameter(U.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(Gr===he||Lr(Gr)===U.getParameter(U.IMPLEMENTATION_COLOR_READ_TYPE)||Gr===Ee&&(X.get("OES_texture_float")||X.get("WEBGL_color_buffer_float"))||Gr===ke&&X.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");U.checkFramebufferStatus(U.FRAMEBUFFER)===U.FRAMEBUFFER_COMPLETE?an>=0&&an<=Tt.width-hi&&ti>=0&&ti<=Tt.height-pi&&U.readPixels(an,ti,hi,pi,Lr(Ur),Lr(Gr),os):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{rr&&U.bindFramebuffer(U.FRAMEBUFFER,Hn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function Pd(o,f){this.name="",this.color=new na(o),this.density=void 0!==f?f:25e-5}function Bc(o,f,v){this.name="",this.color=new na(o),this.near=void 0!==f?f:1,this.far=void 0!==v?v:1e3}function Ld(){Es.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function fd(o,f,v,x,P){Es.call(this),this.lensFlares=[],this.positionScreen=new Bn,this.customUpdateCallback=void 0,void 0!==o&&this.add(o,f,v,x,P)}function jh(o){lo.call(this),this.type="SpriteMaterial",this.color=new na(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(o)}function _h(o){Es.call(this),this.type="Sprite",this.material=void 0!==o?o:new jh}function bl(){Es.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function rf(o,f,v){if(this.useVertexTexture=void 0===v||v,this.identityMatrix=new Zs,this.bones=(o=o||[]).slice(0),this.useVertexTexture){var x=Math.sqrt(4*this.bones.length);x=An.nextPowerOfTwo(Math.ceil(x)),x=Math.max(x,4),this.boneTextureWidth=x,this.boneTextureHeight=x,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new da(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Lt,Ee)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===f)this.calculateInverses();else if(this.bones.length===f.length)this.boneInverses=f.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var P=0,G=this.bones.length;P<G;P++)this.boneInverses.push(new Zs)}}function ov(){Es.call(this),this.type="Bone"}function wm(o,f,v){Bl.call(this,o,f),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Zs,this.bindMatrixInverse=new Zs;var x=[];if(this.geometry&&void 0!==this.geometry.bones){for(var P,G,J=0,se=this.geometry.bones.length;J<se;++J)G=this.geometry.bones[J],P=new ov,x.push(P),P.name=G.name,P.position.fromArray(G.pos),P.quaternion.fromArray(G.rotq),void 0!==G.scl&&P.scale.fromArray(G.scl);for(J=0,se=this.geometry.bones.length;J<se;++J)-1!==(G=this.geometry.bones[J]).parent&&null!==G.parent&&void 0!==x[G.parent]?x[G.parent].add(x[J]):this.add(x[J])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new rf(x,void 0,v),this.matrixWorld)}function mu(o){lo.call(this),this.type="LineBasicMaterial",this.color=new na(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(o)}function yh(o,f,v){if(1===v)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Lo(o,f);Es.call(this),this.type="Line",this.geometry=void 0!==o?o:new Bs,this.material=void 0!==f?f:new mu({color:16777215*Math.random()})}function Lo(o,f){yh.call(this,o,f),this.type="LineSegments"}function zc(o){lo.call(this),this.type="PointsMaterial",this.color=new na(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(o)}function Ja(o,f){Es.call(this),this.type="Points",this.geometry=void 0!==o?o:new Bs,this.material=void 0!==f?f:new zc({color:16777215*Math.random()})}function zp(){Es.call(this),this.type="Group"}function Vp(o,f,v,x,P,G,J,se,Fe){lr.call(this,o,f,v,x,P,G,J,se,Fe),this.generateMipmaps=!1;var Me=this;!function qe(){requestAnimationFrame(qe),o.readyState>=o.HAVE_CURRENT_DATA&&(Me.needsUpdate=!0)}()}function Vc(o,f,v,x,P,G,J,se,Fe,Me,qe,Qe){lr.call(this,null,G,J,se,Fe,Me,x,P,qe,Qe),this.image={width:f,height:v},this.mipmaps=o,this.flipY=!1,this.generateMipmaps=!1}function Up(o,f,v,x,P,G,J,se,Fe){lr.call(this,o,f,v,x,P,G,J,se,Fe),this.needsUpdate=!0}function xm(o,f,v,x,P,G,J,se,Fe,Me){if((Me=void 0!==Me?Me:We)!==We&&Me!==Ye)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===v&&Me===We&&(v=ge),void 0===v&&Me===Ye&&(v=pt),lr.call(this,null,x,P,G,J,se,Me,v,Fe),this.image={width:o,height:f},this.magFilter=void 0!==J?J:z,this.minFilter=void 0!==se?se:z,this.flipY=!1,this.generateMipmaps=!1}function pd(o){Bs.call(this);var f=[0,0],v={};function x(dr,zn){return dr-zn}var P=["a","b","c"];if(o&&o.isGeometry){for(var G=o.vertices,J=o.faces,se=0,Fe=new Uint32Array(6*J.length),Me=0,qe=J.length;Me<qe;Me++)for(var Qe=J[Me],ft=0;ft<3;ft++)f[0]=Qe[P[ft]],f[1]=Qe[P[(ft+1)%3]],f.sort(x),void 0===v[mt=f.toString()]&&(Fe[2*se]=f[0],Fe[2*se+1]=f[1],v[mt]=!0,se++);var vt=new Float32Array(2*se*3);for(Me=0,qe=se;Me<qe;Me++)for(ft=0;ft<2;ft++){var Kt=G[Fe[2*Me+ft]];vt[0+(Yt=6*Me+3*ft)]=Kt.x,vt[Yt+1]=Kt.y,vt[Yt+2]=Kt.z}this.addAttribute("position",new bs(vt,3))}else if(o&&o.isBufferGeometry)if(null!==o.index){var jt=o.index.array,cn=(G=o.attributes.position,o.groups);se=0,0===cn.length&&o.addGroup(0,jt.length),Fe=new Uint32Array(2*jt.length);for(var fn=0,Hn=cn.length;fn<Hn;++fn)for(var Ln=cn[fn],oi=Ln.start,Xn=(Me=oi,oi+Ln.count);Me<Xn;Me+=3)for(ft=0;ft<3;ft++){var mt;f[0]=jt[Me+ft],f[1]=jt[Me+(ft+1)%3],f.sort(x),void 0===v[mt=f.toString()]&&(Fe[2*se]=f[0],Fe[2*se+1]=f[1],v[mt]=!0,se++)}for(vt=new Float32Array(2*se*3),Me=0,qe=se;Me<qe;Me++)for(ft=0;ft<2;ft++)vt[0+(Yt=6*Me+3*ft)]=G.getX(ci=Fe[2*Me+ft]),vt[Yt+1]=G.getY(ci),vt[Yt+2]=G.getZ(ci);this.addAttribute("position",new bs(vt,3))}else{var Li=(se=(G=o.attributes.position.array).length/3)/3;for(vt=new Float32Array(2*se*3),Me=0,qe=Li;Me<qe;Me++)for(ft=0;ft<3;ft++){var Yt,ci,Tr=9*Me+3*ft;vt[0+(Yt=18*Me+6*ft)]=G[Tr],vt[Yt+1]=G[Tr+1],vt[Yt+2]=G[Tr+2],vt[Yt+3]=G[ci=9*Me+(ft+1)%3*3],vt[Yt+4]=G[ci+1],vt[Yt+5]=G[ci+2]}this.addAttribute("position",new bs(vt,3))}}function Vf(o,f,v){Bs.call(this),this.type="ParametricBufferGeometry",this.parameters={func:o,slices:f,stacks:v};var G,J,se,Fe,Me,x=[],P=[],qe=f+1;for(G=0;G<=v;G++)for(Me=G/v,J=0;J<=f;J++)se=o(Fe=J/f,Me),x.push(se.x,se.y,se.z),P.push(Fe,Me);var mt,vt,Kt,Qe=[];for(G=0;G<v;G++)for(J=0;J<f;J++)vt=(G+1)*qe+J+1,Qe.push(G*qe+J,mt=G*qe+J+1,Kt=(G+1)*qe+J),Qe.push(mt,vt,Kt);this.setIndex(new(Qe.length>65535?Wh:Of)(Qe,1)),this.addAttribute("position",new ga(x,3)),this.addAttribute("uv",new ga(P,2)),this.computeVertexNormals()}function Uf(o,f,v){Ba.call(this),this.type="ParametricGeometry",this.parameters={func:o,slices:f,stacks:v},this.fromBufferGeometry(new Vf(o,f,v)),this.mergeVertices()}function ic(o,f,v,x){Bs.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:o,indices:f,radius:v,detail:x},v=v||1;var P=[],G=[];function se(jt,cn,fn,Hn){var Jn,Xn,Ln=Math.pow(2,Hn),oi=[];for(Jn=0;Jn<=Ln;Jn++){oi[Jn]=[];var ci=jt.clone().lerp(fn,Jn/Ln),Li=cn.clone().lerp(fn,Jn/Ln),Tr=Ln-Jn;for(Xn=0;Xn<=Tr;Xn++)oi[Jn][Xn]=0===Xn&&Jn===Ln?ci:ci.clone().lerp(Li,Xn/Tr)}for(Jn=0;Jn<Ln;Jn++)for(Xn=0;Xn<2*(Ln-Jn)-1;Xn++){var dr=Math.floor(Xn/2);Xn%2==0?(Qe(oi[Jn][dr+1]),Qe(oi[Jn+1][dr]),Qe(oi[Jn][dr])):(Qe(oi[Jn][dr+1]),Qe(oi[Jn+1][dr+1]),Qe(oi[Jn+1][dr]))}}function Qe(jt){P.push(jt.x,jt.y,jt.z)}function ft(jt,cn){var fn=3*jt;cn.x=o[fn+0],cn.y=o[fn+1],cn.z=o[fn+2]}function vt(jt,cn,fn,Hn){Hn<0&&1===jt.x&&(G[cn]=jt.x-1),0===fn.x&&0===fn.z&&(G[cn]=Hn/2/Math.PI+.5)}function Kt(jt){return Math.atan2(jt.z,-jt.x)}function Yt(jt){return Math.atan2(-jt.y,Math.sqrt(jt.x*jt.x+jt.z*jt.z))}(function J(jt){for(var cn=new Bn,fn=new Bn,Hn=new Bn,Ln=0;Ln<f.length;Ln+=3)ft(f[Ln+0],cn),ft(f[Ln+1],fn),ft(f[Ln+2],Hn),se(cn,fn,Hn,jt)})(x=x||0),function Fe(jt){for(var cn=new Bn,fn=0;fn<P.length;fn+=3)cn.x=P[fn+0],cn.y=P[fn+1],cn.z=P[fn+2],cn.normalize().multiplyScalar(jt),P[fn+0]=cn.x,P[fn+1]=cn.y,P[fn+2]=cn.z}(v),function Me(){for(var jt=new Bn,cn=0;cn<P.length;cn+=3){jt.x=P[cn+0],jt.y=P[cn+1],jt.z=P[cn+2];var fn=Kt(jt)/2/Math.PI+.5,Hn=Yt(jt)/Math.PI+.5;G.push(fn,1-Hn)}(function mt(){for(var jt=new Bn,cn=new Bn,fn=new Bn,Hn=new Bn,Ln=new qn,oi=new qn,Jn=new qn,Xn=0,ci=0;Xn<P.length;Xn+=9,ci+=6){jt.set(P[Xn+0],P[Xn+1],P[Xn+2]),cn.set(P[Xn+3],P[Xn+4],P[Xn+5]),fn.set(P[Xn+6],P[Xn+7],P[Xn+8]),Ln.set(G[ci+0],G[ci+1]),oi.set(G[ci+2],G[ci+3]),Jn.set(G[ci+4],G[ci+5]),Hn.copy(jt).add(cn).add(fn).divideScalar(3);var Li=Kt(Hn);vt(Ln,ci+0,jt,Li),vt(oi,ci+2,cn,Li),vt(Jn,ci+4,fn,Li)}})(),function qe(){for(var jt=0;jt<G.length;jt+=6){var cn=G[jt+0],fn=G[jt+2],Hn=G[jt+4],Ln=Math.max(cn,fn,Hn),oi=Math.min(cn,fn,Hn);Ln>.9&&oi<.1&&(cn<.2&&(G[jt+0]+=1),fn<.2&&(G[jt+2]+=1),Hn<.2&&(G[jt+4]+=1))}}()}(),this.addAttribute("position",new ga(P,3)),this.addAttribute("normal",new ga(P.slice(),3)),this.addAttribute("uv",new ga(G,2)),this.normalizeNormals(),this.boundingSphere=new gn(new Bn,v)}function vu(o,f){ic.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],o,f),this.type="TetrahedronBufferGeometry",this.parameters={radius:o,detail:f}}function kd(o,f){Ba.call(this),this.type="TetrahedronGeometry",this.parameters={radius:o,detail:f},this.fromBufferGeometry(new vu(o,f)),this.mergeVertices()}function ah(o,f){ic.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],o,f),this.type="OctahedronBufferGeometry",this.parameters={radius:o,detail:f}}function sf(o,f){Ba.call(this),this.type="OctahedronGeometry",this.parameters={radius:o,detail:f},this.fromBufferGeometry(new ah(o,f)),this.mergeVertices()}function Hf(o,f){var v=(1+Math.sqrt(5))/2;ic.call(this,[-1,v,0,1,v,0,-1,-v,0,1,-v,0,0,-1,v,0,1,v,0,-1,-v,0,1,-v,v,0,-1,v,0,1,-v,0,-1,-v,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o,f),this.type="IcosahedronBufferGeometry",this.parameters={radius:o,detail:f}}function Hp(o,f){Ba.call(this),this.type="IcosahedronGeometry",this.parameters={radius:o,detail:f},this.fromBufferGeometry(new Hf(o,f)),this.mergeVertices()}function gd(o,f){var v=(1+Math.sqrt(5))/2,x=1/v;ic.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-x,-v,0,-x,v,0,x,-v,0,x,v,-x,-v,0,-x,v,0,x,-v,0,x,v,0,-v,0,-x,v,0,-x,-v,0,x,v,0,x],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o,f),this.type="DodecahedronBufferGeometry",this.parameters={radius:o,detail:f}}function Mg(o,f){Ba.call(this),this.type="DodecahedronGeometry",this.parameters={radius:o,detail:f},this.fromBufferGeometry(new gd(o,f)),this.mergeVertices()}function nl(o,f,v,x){Ba.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:o,indices:f,radius:v,detail:x},this.fromBufferGeometry(new ic(o,f,v,x)),this.mergeVertices()}function Gf(o,f,v,x,P){Bs.call(this),this.type="TubeBufferGeometry",this.parameters={path:o,tubularSegments:f,radius:v,radialSegments:x,closed:P},v=v||1,x=x||8;var G=o.computeFrenetFrames(f=f||64,P=P||!1);this.tangents=G.tangents,this.normals=G.normals,this.binormals=G.binormals;var Me,qe,J=new Bn,se=new Bn,Fe=new qn,Qe=[],ft=[],mt=[],vt=[];function Yt(fn){var Hn=o.getPointAt(fn/f),Ln=G.normals[fn],oi=G.binormals[fn];for(qe=0;qe<=x;qe++){var Jn=qe/x*Math.PI*2,Xn=Math.sin(Jn),ci=-Math.cos(Jn);se.x=ci*Ln.x+Xn*oi.x,se.y=ci*Ln.y+Xn*oi.y,se.z=ci*Ln.z+Xn*oi.z,se.normalize(),ft.push(se.x,se.y,se.z),J.x=Hn.x+v*se.x,J.y=Hn.y+v*se.y,J.z=Hn.z+v*se.z,Qe.push(J.x,J.y,J.z)}}(function Kt(){for(Me=0;Me<f;Me++)Yt(Me);Yt(!1===P?f:0),function cn(){for(Me=0;Me<=f;Me++)for(qe=0;qe<=x;qe++)Fe.x=Me/f,Fe.y=qe/x,mt.push(Fe.x,Fe.y)}(),function jt(){for(qe=1;qe<=f;qe++)for(Me=1;Me<=x;Me++){var Hn=(x+1)*qe+(Me-1),Ln=(x+1)*qe+Me,oi=(x+1)*(qe-1)+Me;vt.push((x+1)*(qe-1)+(Me-1),Hn,oi),vt.push(Hn,Ln,oi)}}()})(),this.setIndex(new(vt.length>65535?Wh:Of)(vt,1)),this.addAttribute("position",new ga(Qe,3)),this.addAttribute("normal",new ga(ft,3)),this.addAttribute("uv",new ga(mt,2))}function Rd(o,f,v,x,P,G){Ba.call(this),this.type="TubeGeometry",this.parameters={path:o,tubularSegments:f,radius:v,radialSegments:x,closed:P},void 0!==G&&console.warn("THREE.TubeGeometry: taper has been removed.");var J=new Gf(o,f,v,x,P);this.tangents=J.tangents,this.normals=J.normals,this.binormals=J.binormals,this.fromBufferGeometry(J),this.mergeVertices()}function uu(o,f,v,x,P,G){Bs.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:o,tube:f,tubularSegments:v,radialSegments:x,p:P,q:G},o=o||100,f=f||40,v=Math.floor(v)||64,P=P||2,G=G||3;var ft,mt,J=((x=Math.floor(x)||8)+1)*(v+1),se=x*v*2*3,Fe=new bs(new(se>65535?Uint32Array:Uint16Array)(se),1),Me=new bs(new Float32Array(3*J),3),qe=new bs(new Float32Array(3*J),3),Qe=new bs(new Float32Array(2*J),2),vt=0,Kt=0,Yt=new Bn,jt=new Bn,cn=new qn,fn=new Bn,Hn=new Bn,Ln=new Bn,oi=new Bn,Jn=new Bn;for(ft=0;ft<=v;++ft){var Xn=ft/v*P*Math.PI*2;for(tr(Xn,P,G,o,fn),tr(Xn+.01,P,G,o,Hn),oi.subVectors(Hn,fn),Jn.addVectors(Hn,fn),Ln.crossVectors(oi,Jn),Jn.crossVectors(Ln,oi),Ln.normalize(),Jn.normalize(),mt=0;mt<=x;++mt){var ci=mt/x*Math.PI*2,Li=-f*Math.cos(ci),Tr=f*Math.sin(ci);Yt.x=fn.x+(Li*Jn.x+Tr*Ln.x),Yt.y=fn.y+(Li*Jn.y+Tr*Ln.y),Yt.z=fn.z+(Li*Jn.z+Tr*Ln.z),Me.setXYZ(vt,Yt.x,Yt.y,Yt.z),jt.subVectors(Yt,fn).normalize(),qe.setXYZ(vt,jt.x,jt.y,jt.z),cn.x=ft/v,cn.y=mt/x,Qe.setXY(vt,cn.x,cn.y),vt++}}for(mt=1;mt<=v;mt++)for(ft=1;ft<=x;ft++){var zn=(x+1)*mt+(ft-1),Un=(x+1)*mt+ft,Gi=(x+1)*(mt-1)+ft;Fe.setX(Kt,(x+1)*(mt-1)+(ft-1)),Kt++,Fe.setX(Kt,zn),Kt++,Fe.setX(Kt,Gi),Kt++,Fe.setX(Kt,zn),Kt++,Fe.setX(Kt,Un),Kt++,Fe.setX(Kt,Gi),Kt++}function tr(Mr,xr,gr,fs,Wr){var $i=Math.cos(Mr),Ui=Math.sin(Mr),g=gr/xr*Mr,c=Math.cos(g);Wr.x=fs*(2+c)*.5*$i,Wr.y=fs*(2+c)*Ui*.5,Wr.z=fs*Math.sin(g)*.5}this.setIndex(Fe),this.addAttribute("position",Me),this.addAttribute("normal",qe),this.addAttribute("uv",Qe)}function af(o,f,v,x,P,G,J){Ba.call(this),this.type="TorusKnotGeometry",this.parameters={radius:o,tube:f,tubularSegments:v,radialSegments:x,p:P,q:G},void 0!==J&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new uu(o,f,v,x,P,G)),this.mergeVertices()}function $h(o,f,v,x,P){Bs.call(this),this.type="TorusBufferGeometry",this.parameters={radius:o,tube:f,radialSegments:v,tubularSegments:x,arc:P},o=o||100,f=f||40,v=Math.floor(v)||8,x=Math.floor(x)||6,P=P||2*Math.PI;var jt,cn,G=(v+1)*(x+1),J=v*x*2*3,se=new(J>65535?Uint32Array:Uint16Array)(J),Fe=new Float32Array(3*G),Me=new Float32Array(3*G),qe=new Float32Array(2*G),Qe=0,ft=0,mt=0,vt=new Bn,Kt=new Bn,Yt=new Bn;for(jt=0;jt<=v;jt++)for(cn=0;cn<=x;cn++){var fn=cn/x*P,Hn=jt/v*Math.PI*2;Kt.x=(o+f*Math.cos(Hn))*Math.cos(fn),Kt.y=(o+f*Math.cos(Hn))*Math.sin(fn),Kt.z=f*Math.sin(Hn),Fe[Qe]=Kt.x,Fe[Qe+1]=Kt.y,Fe[Qe+2]=Kt.z,vt.x=o*Math.cos(fn),vt.y=o*Math.sin(fn),Yt.subVectors(Kt,vt).normalize(),Me[Qe]=Yt.x,Me[Qe+1]=Yt.y,Me[Qe+2]=Yt.z,qe[ft]=cn/x,qe[ft+1]=jt/v,Qe+=3,ft+=2}for(jt=1;jt<=v;jt++)for(cn=1;cn<=x;cn++){var oi=(x+1)*(jt-1)+cn-1,Jn=(x+1)*(jt-1)+cn,Xn=(x+1)*jt+cn;se[mt]=(x+1)*jt+cn-1,se[mt+1]=oi,se[mt+2]=Xn,se[mt+3]=oi,se[mt+4]=Jn,se[mt+5]=Xn,mt+=6}this.setIndex(new bs(se,1)),this.addAttribute("position",new bs(Fe,3)),this.addAttribute("normal",new bs(Me,3)),this.addAttribute("uv",new bs(qe,2))}function Od(o,f,v,x,P){Ba.call(this),this.type="TorusGeometry",this.parameters={radius:o,tube:f,radialSegments:v,tubularSegments:x,arc:P},this.fromBufferGeometry(new $h(o,f,v,x,P))}Pd.prototype.isFogExp2=!0,Pd.prototype.clone=function(){return new Pd(this.color.getHex(),this.density)},Pd.prototype.toJSON=function(o){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Bc.prototype.isFog=!0,Bc.prototype.clone=function(){return new Bc(this.color.getHex(),this.near,this.far)},Bc.prototype.toJSON=function(o){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},(Ld.prototype=Object.create(Es.prototype)).constructor=Ld,Ld.prototype.copy=function(o,f){return Es.prototype.copy.call(this,o,f),null!==o.background&&(this.background=o.background.clone()),null!==o.fog&&(this.fog=o.fog.clone()),null!==o.overrideMaterial&&(this.overrideMaterial=o.overrideMaterial.clone()),this.autoUpdate=o.autoUpdate,this.matrixAutoUpdate=o.matrixAutoUpdate,this},Ld.prototype.toJSON=function(o){var f=Es.prototype.toJSON.call(this,o);return null!==this.background&&(f.object.background=this.background.toJSON(o)),null!==this.fog&&(f.object.fog=this.fog.toJSON()),f},fd.prototype=Object.assign(Object.create(Es.prototype),{constructor:fd,isLensFlare:!0,copy:function(o){Es.prototype.copy.call(this,o),this.positionScreen.copy(o.positionScreen),this.customUpdateCallback=o.customUpdateCallback;for(var f=0,v=o.lensFlares.length;f<v;f++)this.lensFlares.push(o.lensFlares[f]);return this},add:function(o,f,v,x,P,G){void 0===f&&(f=-1),void 0===v&&(v=0),void 0===G&&(G=1),void 0===P&&(P=new na(16777215)),void 0===x&&(x=Ce),v=Math.min(v,Math.max(0,v)),this.lensFlares.push({texture:o,size:f,distance:v,x:0,y:0,z:0,scale:1,rotation:0,opacity:G,color:P,blending:x})},updateLensFlares:function(){var o,v,f=this.lensFlares.length,x=2*-this.positionScreen.x,P=2*-this.positionScreen.y;for(o=0;o<f;o++)(v=this.lensFlares[o]).x=this.positionScreen.x+x*v.distance,v.y=this.positionScreen.y+P*v.distance,v.wantedRotation=v.x*Math.PI*.25,v.rotation+=.25*(v.wantedRotation-v.rotation)}}),(jh.prototype=Object.create(lo.prototype)).constructor=jh,jh.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.color.copy(o.color),this.map=o.map,this.rotation=o.rotation,this},_h.prototype=Object.assign(Object.create(Es.prototype),{constructor:_h,isSprite:!0,raycast:function(){var o=new Bn;return function(v,x){o.setFromMatrixPosition(this.matrixWorld);var P=v.ray.distanceSqToPoint(o);P>this.scale.x*this.scale.y/4||x.push({distance:Math.sqrt(P),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),bl.prototype=Object.assign(Object.create(Es.prototype),{constructor:bl,copy:function(o){Es.prototype.copy.call(this,o,!1);for(var f=o.levels,v=0,x=f.length;v<x;v++){var P=f[v];this.addLevel(P.object.clone(),P.distance)}return this},addLevel:function(o,f){void 0===f&&(f=0),f=Math.abs(f);for(var v=this.levels,x=0;x<v.length&&!(f<v[x].distance);x++);v.splice(x,0,{distance:f,object:o}),this.add(o)},getObjectForDistance:function(o){for(var f=this.levels,v=1,x=f.length;v<x&&!(o<f[v].distance);v++);return f[v-1].object},raycast:function(){var o=new Bn;return function(v,x){o.setFromMatrixPosition(this.matrixWorld);var P=v.ray.origin.distanceTo(o);this.getObjectForDistance(P).raycast(v,x)}}(),update:function(){var o=new Bn,f=new Bn;return function(x){var P=this.levels;if(P.length>1){o.setFromMatrixPosition(x.matrixWorld),f.setFromMatrixPosition(this.matrixWorld);var G=o.distanceTo(f);P[0].object.visible=!0;for(var J=1,se=P.length;J<se&&G>=P[J].distance;J++)P[J-1].object.visible=!1,P[J].object.visible=!0;for(;J<se;J++)P[J].object.visible=!1}}}(),toJSON:function(o){var f=Es.prototype.toJSON.call(this,o);f.object.levels=[];for(var v=this.levels,x=0,P=v.length;x<P;x++){var G=v[x];f.object.levels.push({object:G.object.uuid,distance:G.distance})}return f}}),Object.assign(rf.prototype,{calculateInverses:function(){this.boneInverses=[];for(var o=0,f=this.bones.length;o<f;o++){var v=new Zs;this.bones[o]&&v.getInverse(this.bones[o].matrixWorld),this.boneInverses.push(v)}},pose:function(){for(var o,f=0,v=this.bones.length;f<v;f++)(o=this.bones[f])&&o.matrixWorld.getInverse(this.boneInverses[f]);for(f=0,v=this.bones.length;f<v;f++)(o=this.bones[f])&&(o.parent&&o.parent.isBone?(o.matrix.getInverse(o.parent.matrixWorld),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))},update:function(){var o=new Zs;return function(){for(var v=0,x=this.bones.length;v<x;v++)o.multiplyMatrices(this.bones[v]?this.bones[v].matrixWorld:this.identityMatrix,this.boneInverses[v]),o.toArray(this.boneMatrices,16*v);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new rf(this.bones,this.boneInverses,this.useVertexTexture)}}),ov.prototype=Object.assign(Object.create(Es.prototype),{constructor:ov,isBone:!0}),wm.prototype=Object.assign(Object.create(Bl.prototype),{constructor:wm,isSkinnedMesh:!0,bind:function(o,f){this.skeleton=o,void 0===f&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),f=this.matrixWorld),this.bindMatrix.copy(f),this.bindMatrixInverse.getInverse(f)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var o=0;o<this.geometry.skinWeights.length;o++){var f=this.geometry.skinWeights[o];(v=1/f.lengthManhattan())!=1/0?f.multiplyScalar(v):f.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var x=new Pr,P=this.geometry.attributes.skinWeight;for(o=0;o<P.count;o++){var v;x.x=P.getX(o),x.y=P.getY(o),x.z=P.getZ(o),x.w=P.getW(o),(v=1/x.lengthManhattan())!=1/0?x.multiplyScalar(v):x.set(1,0,0,0),P.setXYZW(o,x.x,x.y,x.z,x.w)}}},updateMatrixWorld:function(o){Bl.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),(mu.prototype=Object.create(lo.prototype)).constructor=mu,mu.prototype.isLineBasicMaterial=!0,mu.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.color.copy(o.color),this.linewidth=o.linewidth,this.linecap=o.linecap,this.linejoin=o.linejoin,this},yh.prototype=Object.assign(Object.create(Es.prototype),{constructor:yh,isLine:!0,raycast:function(){var o=new Zs,f=new _l,v=new gn;return function(P,G){var J=P.linePrecision,se=J*J,Fe=this.geometry,Me=this.matrixWorld;if(null===Fe.boundingSphere&&Fe.computeBoundingSphere(),v.copy(Fe.boundingSphere),v.applyMatrix4(Me),!1!==P.ray.intersectsSphere(v)){o.getInverse(Me),f.copy(P.ray).applyMatrix4(o);var qe=new Bn,Qe=new Bn,ft=new Bn,mt=new Bn,vt=this&&this.isLineSegments?2:1;if(Fe.isBufferGeometry){var Kt=Fe.index,jt=Fe.attributes.position.array;if(null!==Kt)for(var cn=Kt.array,fn=0,Hn=cn.length-1;fn<Hn;fn+=vt){var oi=cn[fn+1];qe.fromArray(jt,3*cn[fn]),Qe.fromArray(jt,3*oi),f.distanceSqToSegment(qe,Qe,mt,ft)>se||(mt.applyMatrix4(this.matrixWorld),(Xn=P.ray.origin.distanceTo(mt))<P.near||Xn>P.far||G.push({distance:Xn,point:ft.clone().applyMatrix4(this.matrixWorld),index:fn,face:null,faceIndex:null,object:this}))}else for(fn=0,Hn=jt.length/3-1;fn<Hn;fn+=vt)qe.fromArray(jt,3*fn),Qe.fromArray(jt,3*fn+3),f.distanceSqToSegment(qe,Qe,mt,ft)>se||(mt.applyMatrix4(this.matrixWorld),(Xn=P.ray.origin.distanceTo(mt))<P.near||Xn>P.far||G.push({distance:Xn,point:ft.clone().applyMatrix4(this.matrixWorld),index:fn,face:null,faceIndex:null,object:this}))}else if(Fe.isGeometry){var ci=Fe.vertices,Li=ci.length;for(fn=0;fn<Li-1;fn+=vt){var Xn;f.distanceSqToSegment(ci[fn],ci[fn+1],mt,ft)>se||(mt.applyMatrix4(this.matrixWorld),(Xn=P.ray.origin.distanceTo(mt))<P.near||Xn>P.far||G.push({distance:Xn,point:ft.clone().applyMatrix4(this.matrixWorld),index:fn,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Lo.prototype=Object.assign(Object.create(yh.prototype),{constructor:Lo,isLineSegments:!0}),(zc.prototype=Object.create(lo.prototype)).constructor=zc,zc.prototype.isPointsMaterial=!0,zc.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.color.copy(o.color),this.map=o.map,this.size=o.size,this.sizeAttenuation=o.sizeAttenuation,this},Ja.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ja,isPoints:!0,raycast:function(){var o=new Zs,f=new _l,v=new gn;return function(P,G){var J=this,se=this.geometry,Fe=this.matrixWorld,Me=P.params.Points.threshold;if(null===se.boundingSphere&&se.computeBoundingSphere(),v.copy(se.boundingSphere),v.applyMatrix4(Fe),!1!==P.ray.intersectsSphere(v)){o.getInverse(Fe),f.copy(P.ray).applyMatrix4(o);var qe=Me/((this.scale.x+this.scale.y+this.scale.z)/3),Qe=qe*qe,ft=new Bn;if(se.isBufferGeometry){var vt=se.index,Yt=se.attributes.position.array;if(null!==vt)for(var jt=vt.array,cn=0,fn=jt.length;cn<fn;cn++){var Hn=jt[cn];ft.fromArray(Yt,3*Hn),mt(ft,Hn)}else{cn=0;for(var Ln=Yt.length/3;cn<Ln;cn++)ft.fromArray(Yt,3*cn),mt(ft,cn)}}else{var oi=se.vertices;for(cn=0,Ln=oi.length;cn<Ln;cn++)mt(oi[cn],cn)}}function mt(Jn,Xn){var ci=f.distanceSqToPoint(Jn);if(ci<Qe){var Li=f.closestPointToPoint(Jn);Li.applyMatrix4(Fe);var Tr=P.ray.origin.distanceTo(Li);if(Tr<P.near||Tr>P.far)return;G.push({distance:Tr,distanceToRay:Math.sqrt(ci),point:Li.clone(),index:Xn,face:null,object:J})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),zp.prototype=Object.assign(Object.create(Es.prototype),{constructor:zp}),(Vp.prototype=Object.create(lr.prototype)).constructor=Vp,(Vc.prototype=Object.create(lr.prototype)).constructor=Vc,Vc.prototype.isCompressedTexture=!0,(Up.prototype=Object.create(lr.prototype)).constructor=Up,(xm.prototype=Object.create(lr.prototype)).constructor=xm,xm.prototype.isDepthTexture=!0,(pd.prototype=Object.create(Bs.prototype)).constructor=pd,(Vf.prototype=Object.create(Bs.prototype)).constructor=Vf,(Uf.prototype=Object.create(Ba.prototype)).constructor=Uf,(ic.prototype=Object.create(Bs.prototype)).constructor=ic,(vu.prototype=Object.create(ic.prototype)).constructor=vu,(kd.prototype=Object.create(Ba.prototype)).constructor=kd,(ah.prototype=Object.create(ic.prototype)).constructor=ah,(sf.prototype=Object.create(Ba.prototype)).constructor=sf,(Hf.prototype=Object.create(ic.prototype)).constructor=Hf,(Hp.prototype=Object.create(Ba.prototype)).constructor=Hp,(gd.prototype=Object.create(ic.prototype)).constructor=gd,(Mg.prototype=Object.create(Ba.prototype)).constructor=Mg,(nl.prototype=Object.create(Ba.prototype)).constructor=nl,(Gf.prototype=Object.create(Bs.prototype)).constructor=Gf,(Rd.prototype=Object.create(Ba.prototype)).constructor=Rd,(uu.prototype=Object.create(Bs.prototype)).constructor=uu,(af.prototype=Object.create(Ba.prototype)).constructor=af,($h.prototype=Object.create(Bs.prototype)).constructor=$h,(Od.prototype=Object.create(Ba.prototype)).constructor=Od;var Gl={area:function(o){for(var f=o.length,v=0,x=f-1,P=0;P<f;x=P++)v+=o[x].x*o[P].y-o[P].x*o[x].y;return.5*v},triangulate:function(){function o(f,v,x,P,G,J){var se,Fe,Me,qe,Qe,ft,mt,vt,Kt,Yt,jt,cn,fn,Hn,Ln;if(((qe=f[J[x]].x)-(Fe=f[J[v]].x))*((mt=f[J[P]].y)-(Me=f[J[v]].y))-((Qe=f[J[x]].y)-Me)*((ft=f[J[P]].x)-Fe)<=0)return!1;for(Yt=ft-qe,jt=mt-Qe,cn=Fe-ft,fn=Me-mt,Hn=qe-Fe,Ln=Qe-Me,se=0;se<G;se++)if(Kt=f[J[se]].y,!((vt=f[J[se]].x)===Fe&&Kt===Me||vt===qe&&Kt===Qe||vt===ft&&Kt===mt)&&Yt*(Kt-Qe)-jt*(vt-qe)>=-Number.EPSILON&&cn*(Kt-mt)-fn*(vt-ft)>=-Number.EPSILON&&Hn*(Kt-Me)-Ln*(vt-Fe)>=-Number.EPSILON)return!1;return!0}return function(v,x){var P=v.length;if(P<3)return null;var Fe,Me,qe,G=[],J=[],se=[];if(Gl.area(v)>0)for(Me=0;Me<P;Me++)J[Me]=Me;else for(Me=0;Me<P;Me++)J[Me]=P-1-Me;var Qe=P,ft=2*Qe;for(Me=Qe-1;Qe>2;){if(ft--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),x?se:G;if(Qe<=(Fe=Me)&&(Fe=0),Qe<=(Me=Fe+1)&&(Me=0),Qe<=(qe=Me+1)&&(qe=0),o(v,Fe,Me,qe,Qe,J)){var Yt,jt;for(G.push([v[J[Fe]],v[J[Me]],v[J[qe]]]),se.push([J[Fe],J[Me],J[qe]]),Yt=Me,jt=Me+1;jt<Qe;Yt++,jt++)J[Yt]=J[jt];ft=2*--Qe}}return x?se:G}}(),triangulateShape:function(o,f){function v(fn){var Hn=fn.length;Hn>2&&fn[Hn-1].equals(fn[0])&&fn.pop()}function x(fn,Hn,Ln){return fn.x!==Hn.x?fn.x<Hn.x?fn.x<=Ln.x&&Ln.x<=Hn.x:Hn.x<=Ln.x&&Ln.x<=fn.x:fn.y<Hn.y?fn.y<=Ln.y&&Ln.y<=Hn.y:Hn.y<=Ln.y&&Ln.y<=fn.y}function P(fn,Hn,Ln,oi,Jn){var Xn=Hn.x-fn.x,ci=Hn.y-fn.y,Li=oi.x-Ln.x,Tr=oi.y-Ln.y,dr=fn.x-Ln.x,zn=fn.y-Ln.y,Un=ci*Li-Xn*Tr,Gi=ci*dr-Xn*zn;if(Math.abs(Un)>Number.EPSILON){var tr;if(Un>0){if(Gi<0||Gi>Un)return[];if((tr=Tr*dr-Li*zn)<0||tr>Un)return[]}else{if(Gi>0||Gi<Un)return[];if((tr=Tr*dr-Li*zn)>0||tr<Un)return[]}if(0===tr)return!Jn||0!==Gi&&Gi!==Un?[fn]:[];if(tr===Un)return!Jn||0!==Gi&&Gi!==Un?[Hn]:[];if(0===Gi)return[Ln];if(Gi===Un)return[oi];var Mr=tr/Un;return[{x:fn.x+Mr*Xn,y:fn.y+Mr*ci}]}if(0!==Gi||Tr*dr!=Li*zn)return[];var fs,Wr,$i,Ui,g,c,p,b,xr=0===Xn&&0===ci,gr=0===Li&&0===Tr;return xr&&gr?fn.x!==Ln.x||fn.y!==Ln.y?[]:[fn]:xr?x(Ln,oi,fn)?[fn]:[]:gr?x(fn,Hn,Ln)?[Ln]:[]:(0!==Xn?(fn.x<Hn.x?(fs=fn,$i=fn.x,Wr=Hn,Ui=Hn.x):(fs=Hn,$i=Hn.x,Wr=fn,Ui=fn.x),Ln.x<oi.x?(g=Ln,p=Ln.x,c=oi,b=oi.x):(g=oi,p=oi.x,c=Ln,b=Ln.x)):(fn.y<Hn.y?(fs=fn,$i=fn.y,Wr=Hn,Ui=Hn.y):(fs=Hn,$i=Hn.y,Wr=fn,Ui=fn.y),Ln.y<oi.y?(g=Ln,p=Ln.y,c=oi,b=oi.y):(g=oi,p=oi.y,c=Ln,b=Ln.y)),$i<=p?Ui<p?[]:Ui===p?Jn?[]:[g]:Ui<=b?[g,Wr]:[g,c]:$i>b?[]:$i===b?Jn?[]:[fs]:Ui<=b?[fs,Wr]:[fs,c])}function G(fn,Hn,Ln,oi){var Jn=Hn.x-fn.x,Xn=Hn.y-fn.y,ci=Ln.x-fn.x,Li=Ln.y-fn.y,Tr=oi.x-fn.x,dr=oi.y-fn.y,zn=Jn*Li-Xn*ci,Un=Jn*dr-Xn*Tr;if(Math.abs(zn)>Number.EPSILON){var Gi=Tr*Li-dr*ci;return zn>0?Un>=0&&Gi>=0:Un>=0||Gi>=0}return Un>0}v(o),f.forEach(v);for(var se,Fe,Me,qe,Qe,ft,mt={},vt=o.concat(),Kt=0,Yt=f.length;Kt<Yt;Kt++)Array.prototype.push.apply(vt,f[Kt]);for(se=0,Fe=vt.length;se<Fe;se++)void 0!==mt[Qe=vt[se].x+":"+vt[se].y]&&console.warn("THREE.ShapeUtils: Duplicate point",Qe,se),mt[Qe]=se;var jt=function J(fn,Hn){var oi,Ln=fn.concat();function Jn(b,A){var E=Ln.length-1,M=b-1;M<0&&(M=E);var U=b+1;U>E&&(U=0);var ne=G(Ln[b],Ln[M],Ln[U],oi[A]);if(!ne)return!1;var X=oi.length-1,fe=A-1;fe<0&&(fe=X);var be=A+1;return be>X&&(be=0),!!(ne=G(oi[A],oi[fe],oi[be],Ln[b]))}function Xn(b,A){var E,M;for(E=0;E<Ln.length;E++)if(M=E+1,P(b,A,Ln[E],Ln[M%=Ln.length],!0).length>0)return!0;return!1}var ci=[];function Li(b,A){var E,M,U,ne;for(E=0;E<ci.length;E++)for(M=Hn[ci[E]],U=0;U<M.length;U++)if(ne=U+1,P(b,A,M[U],M[ne%=M.length],!0).length>0)return!0;return!1}for(var Tr,dr,zn,Un,Gi,tr,xr,gr,fs,Wr,Mr=[],$i=0,Ui=Hn.length;$i<Ui;$i++)ci.push($i);for(var g=0,c=2*ci.length;ci.length>0;){if(--c<0){console.log("Infinite Loop! Holes left:"+ci.length+", Probably Hole outside Shape!");break}for(dr=g;dr<Ln.length;dr++){for(zn=Ln[dr],Tr=-1,$i=0;$i<ci.length;$i++)if(void 0===Mr[tr=zn.x+":"+zn.y+":"+(Gi=ci[$i])]){oi=Hn[Gi];for(var p=0;p<oi.length;p++)if(Un=oi[p],Jn(dr,p)&&!Xn(zn,Un)&&!Li(zn,Un)){Tr=p,ci.splice($i,1),xr=Ln.slice(0,dr+1),gr=Ln.slice(dr),fs=oi.slice(Tr),Wr=oi.slice(0,Tr+1),Ln=xr.concat(fs).concat(Wr).concat(gr),g=dr;break}if(Tr>=0)break;Mr[tr]=!0}if(Tr>=0)break}}return Ln}(o,f),cn=Gl.triangulate(jt,!1);for(se=0,Fe=cn.length;se<Fe;se++)for(qe=cn[se],Me=0;Me<3;Me++)void 0!==(ft=mt[Qe=qe[Me].x+":"+qe[Me].y])&&(qe[Me]=ft);return cn.concat()},isClockWise:function(o){return Gl.area(o)<0},b2:function(P,G,J,se){return function o(x,P){var G=1-x;return G*G*P}(P,G)+function f(x,P){return 2*(1-x)*x*P}(P,J)+function v(x,P){return x*x*P}(P,se)},b3:function(G,J,se,Fe,Me){return function o(P,G){var J=1-P;return J*J*J*G}(G,J)+function f(P,G){var J=1-P;return 3*J*J*P*G}(G,se)+function v(P,G){return 3*(1-P)*P*P*G}(G,Fe)+function x(P,G){return P*P*P*G}(G,Me)}};function oh(o,f){typeof o>"u"?o=[]:(Ba.call(this),this.type="ExtrudeGeometry",o=Array.isArray(o)?o:[o],this.addShapeList(o,f),this.computeFaceNormals())}function lf(o,f){var v=(f=f||{}).font;if(!1===(v&&v.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ba;var x=v.generateShapes(o,f.size,f.curveSegments);f.amount=void 0!==f.height?f.height:50,void 0===f.bevelThickness&&(f.bevelThickness=10),void 0===f.bevelSize&&(f.bevelSize=8),void 0===f.bevelEnabled&&(f.bevelEnabled=!1),oh.call(this,x,f),this.type="TextGeometry"}function Cl(o,f,v,x,P,G,J){Bs.call(this),this.type="SphereBufferGeometry",this.parameters={radius:o,widthSegments:f,heightSegments:v,phiStart:x,phiLength:P,thetaStart:G,thetaLength:J},o=o||50,f=Math.max(3,Math.floor(f)||8),v=Math.max(2,Math.floor(v)||6),x=void 0!==x?x:0,P=void 0!==P?P:2*Math.PI;for(var se=(G=void 0!==G?G:0)+(J=void 0!==J?J:Math.PI),Fe=(f+1)*(v+1),Me=new bs(new Float32Array(3*Fe),3),qe=new bs(new Float32Array(3*Fe),3),Qe=new bs(new Float32Array(2*Fe),2),ft=0,mt=[],vt=new Bn,Kt=0;Kt<=v;Kt++){for(var Yt=[],jt=Kt/v,cn=0;cn<=f;cn++){var fn=cn/f,Hn=-o*Math.cos(x+fn*P)*Math.sin(G+jt*J),Ln=o*Math.cos(G+jt*J),oi=o*Math.sin(x+fn*P)*Math.sin(G+jt*J);vt.set(Hn,Ln,oi).normalize(),Me.setXYZ(ft,Hn,Ln,oi),qe.setXYZ(ft,vt.x,vt.y,vt.z),Qe.setXY(ft,fn,1-jt),Yt.push(ft),ft++}mt.push(Yt)}var Jn=[];for(Kt=0;Kt<v;Kt++)for(cn=0;cn<f;cn++){var ci=mt[Kt][cn],Li=mt[Kt+1][cn],Tr=mt[Kt+1][cn+1];(0!==Kt||G>0)&&Jn.push(mt[Kt][cn+1],ci,Tr),(Kt!==v-1||se<Math.PI)&&Jn.push(ci,Li,Tr)}this.setIndex(new(Me.count>65535?Wh:Of)(Jn,1)),this.addAttribute("position",Me),this.addAttribute("normal",qe),this.addAttribute("uv",Qe),this.boundingSphere=new gn(new Bn,o)}function il(o,f,v,x,P,G,J){Ba.call(this),this.type="SphereGeometry",this.parameters={radius:o,widthSegments:f,heightSegments:v,phiStart:x,phiLength:P,thetaStart:G,thetaLength:J},this.fromBufferGeometry(new Cl(o,f,v,x,P,G,J))}function Xa(o,f,v,x,P,G){Bs.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:o,outerRadius:f,thetaSegments:v,phiSegments:x,thetaStart:P,thetaLength:G},o=o||20,f=f||50,P=void 0!==P?P:0,G=void 0!==G?G:2*Math.PI;var vt,fn,Hn,J=((v=void 0!==v?Math.max(3,v):8)+1)*((x=void 0!==x?Math.max(1,x):1)+1),se=v*x*2*3,Fe=new bs(new(se>65535?Uint32Array:Uint16Array)(se),1),Me=new bs(new Float32Array(3*J),3),qe=new bs(new Float32Array(3*J),3),Qe=new bs(new Float32Array(2*J),2),ft=0,mt=0,Kt=o,Yt=(f-o)/x,jt=new Bn,cn=new qn;for(fn=0;fn<=x;fn++){for(Hn=0;Hn<=v;Hn++)vt=P+Hn/v*G,jt.x=Kt*Math.cos(vt),jt.y=Kt*Math.sin(vt),Me.setXYZ(ft,jt.x,jt.y,jt.z),qe.setXYZ(ft,0,0,1),cn.x=(jt.x/f+1)/2,cn.y=(jt.y/f+1)/2,Qe.setXY(ft,cn.x,cn.y),ft++;Kt+=Yt}for(fn=0;fn<x;fn++){var Ln=fn*(v+1);for(Hn=0;Hn<v;Hn++){var oi=vt=Hn+Ln,Jn=vt+v+1,Xn=vt+v+2,ci=vt+1;Fe.setX(mt,oi),mt++,Fe.setX(mt,Jn),mt++,Fe.setX(mt,Xn),mt++,Fe.setX(mt,oi),mt++,Fe.setX(mt,Xn),mt++,Fe.setX(mt,ci),mt++}}this.setIndex(Fe),this.addAttribute("position",Me),this.addAttribute("normal",qe),this.addAttribute("uv",Qe)}function ls(o,f,v,x,P,G){Ba.call(this),this.type="RingGeometry",this.parameters={innerRadius:o,outerRadius:f,thetaSegments:v,phiSegments:x,thetaStart:P,thetaLength:G},this.fromBufferGeometry(new Xa(o,f,v,x,P,G))}function lv(o,f,v,x){Ba.call(this),this.type="PlaneGeometry",this.parameters={width:o,height:f,widthSegments:v,heightSegments:x},this.fromBufferGeometry(new yl(o,f,v,x))}function ko(o,f,v,x){Bs.call(this),this.type="LatheBufferGeometry",this.parameters={points:o,segments:f,phiStart:v,phiLength:x},f=Math.floor(f)||12,v=v||0,x=x||2*Math.PI,x=An.clamp(x,0,2*Math.PI);var Qe,Kt,Yt,P=(f+1)*o.length,G=f*o.length*2*3,J=new bs(new(G>65535?Uint32Array:Uint16Array)(G),1),se=new bs(new Float32Array(3*P),3),Fe=new bs(new Float32Array(2*P),2),Me=0,qe=0,ft=1/f,mt=new Bn,vt=new qn;for(Kt=0;Kt<=f;Kt++){var jt=v+Kt*ft*x,cn=Math.sin(jt),fn=Math.cos(jt);for(Yt=0;Yt<=o.length-1;Yt++)mt.x=o[Yt].x*cn,mt.y=o[Yt].y,mt.z=o[Yt].x*fn,se.setXYZ(Me,mt.x,mt.y,mt.z),vt.x=Kt/f,vt.y=Yt/(o.length-1),Fe.setXY(Me,vt.x,vt.y),Me++}for(Kt=0;Kt<f;Kt++)for(Yt=0;Yt<o.length-1;Yt++){var Ln=(Qe=Yt+Kt*o.length)+o.length,oi=Qe+o.length+1,Jn=Qe+1;J.setX(qe,Qe),qe++,J.setX(qe,Ln),qe++,J.setX(qe,Jn),qe++,J.setX(qe,Ln),qe++,J.setX(qe,oi),qe++,J.setX(qe,Jn),qe++}if(this.setIndex(J),this.addAttribute("position",se),this.addAttribute("uv",Fe),this.computeVertexNormals(),x===2*Math.PI){var Xn=this.attributes.normal.array,ci=new Bn,Li=new Bn,Tr=new Bn;for(Qe=f*o.length*3,Kt=0,Yt=0;Kt<o.length;Kt++,Yt+=3)ci.x=Xn[Yt+0],ci.y=Xn[Yt+1],ci.z=Xn[Yt+2],Li.x=Xn[Qe+Yt+0],Li.y=Xn[Qe+Yt+1],Li.z=Xn[Qe+Yt+2],Tr.addVectors(ci,Li).normalize(),Xn[Yt+0]=Xn[Qe+Yt+0]=Tr.x,Xn[Yt+1]=Xn[Qe+Yt+1]=Tr.y,Xn[Yt+2]=Xn[Qe+Yt+2]=Tr.z}}function mp(o,f,v,x){Ba.call(this),this.type="LatheGeometry",this.parameters={points:o,segments:f,phiStart:v,phiLength:x},this.fromBufferGeometry(new ko(o,f,v,x)),this.mergeVertices()}function Dg(o,f){Bs.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:o,curveSegments:f},f=f||12;var v=[],x=[],P=[],G=[],J=0,se=0;if(!1===Array.isArray(o))Me(o);else for(var Fe=0;Fe<o.length;Fe++)Me(o[Fe]),this.addGroup(J,se,Fe),J+=se,se=0;function Me(qe){var Qe,ft,mt,vt=v.length/3,Kt=qe.extractPoints(f),Yt=Kt.shape,jt=Kt.holes;if(!1===Gl.isClockWise(Yt))for(Yt=Yt.reverse(),Qe=0,ft=jt.length;Qe<ft;Qe++)!0===Gl.isClockWise(mt=jt[Qe])&&(jt[Qe]=mt.reverse());var cn=Gl.triangulateShape(Yt,jt);for(Qe=0,ft=jt.length;Qe<ft;Qe++)Yt=Yt.concat(mt=jt[Qe]);for(Qe=0,ft=Yt.length;Qe<ft;Qe++){var fn=Yt[Qe];v.push(fn.x,fn.y,0),x.push(0,0,1),P.push(fn.x,fn.y)}for(Qe=0,ft=cn.length;Qe<ft;Qe++){var Hn=cn[Qe];G.push(Hn[0]+vt,Hn[1]+vt,Hn[2]+vt),se+=3}}this.setIndex(new(G.length>65535?Wh:Of)(G,1)),this.addAttribute("position",new ga(v,3)),this.addAttribute("normal",new ga(x,3)),this.addAttribute("uv",new ga(P,2))}function Pg(o,f){Ba.call(this),this.type="ShapeGeometry","object"==typeof f&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),f=f.curveSegments),this.parameters={shapes:o,curveSegments:f},this.fromBufferGeometry(new Dg(o,f)),this.mergeVertices()}function Su(o,f){Bs.call(this),f=void 0!==f?f:1;var v=Math.cos(An.DEG2RAD*f),x=[0,0],P={};function G(cn,fn){return cn-fn}var se,J=["a","b","c"];o.isBufferGeometry?(se=new Ba).fromBufferGeometry(o):se=o.clone(),se.mergeVertices(),se.computeFaceNormals();for(var Fe=se.vertices,Me=se.faces,qe=0,Qe=Me.length;qe<Qe;qe++)for(var ft=Me[qe],mt=0;mt<3;mt++)x[0]=ft[J[mt]],x[1]=ft[J[(mt+1)%3]],x.sort(G),void 0===P[vt=x.toString()]?P[vt]={vert1:x[0],vert2:x[1],face1:qe,face2:void 0}:P[vt].face2=qe;var Kt=[];for(var vt in P){var Yt=P[vt];if(void 0===Yt.face2||Me[Yt.face1].normal.dot(Me[Yt.face2].normal)<=v){var jt=Fe[Yt.vert1];Kt.push(jt.x),Kt.push(jt.y),Kt.push(jt.z),Kt.push((jt=Fe[Yt.vert2]).x),Kt.push(jt.y),Kt.push(jt.z)}}this.addAttribute("position",new ga(Kt,3))}function vp(o,f,v,x,P,G,J,se){Bs.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:o,radiusBottom:f,height:v,radialSegments:x,heightSegments:P,openEnded:G,thetaStart:J,thetaLength:se};var Fe=this;o=void 0!==o?o:20,f=void 0!==f?f:20,v=void 0!==v?v:100,x=Math.floor(x)||8,P=Math.floor(P)||1,G=void 0!==G&&G,J=void 0!==J?J:0,se=void 0!==se?se:2*Math.PI;var Me=0;!1===G&&(o>0&&Me++,f>0&&Me++);var qe=function Ln(){var ci=(x+1)*(P+1);return!1===G&&(ci+=(x+1)*Me+x*Me),ci}(),Qe=function oi(){var ci=x*P*2*3;return!1===G&&(ci+=x*Me*3),ci}(),ft=new bs(new(Qe>65535?Uint32Array:Uint16Array)(Qe),1),mt=new bs(new Float32Array(3*qe),3),vt=new bs(new Float32Array(3*qe),3),Kt=new bs(new Float32Array(2*qe),2),Yt=0,jt=0,cn=[],fn=v/2,Hn=0;function Xn(ci){var Li,Tr,dr,zn=new qn,Un=new Bn,Gi=0,tr=!0===ci?o:f,Mr=!0===ci?1:-1;for(Tr=Yt,Li=1;Li<=x;Li++)mt.setXYZ(Yt,0,fn*Mr,0),vt.setXYZ(Yt,0,Mr,0),zn.x=.5,zn.y=.5,Kt.setXY(Yt,zn.x,zn.y),Yt++;for(dr=Yt,Li=0;Li<=x;Li++){var gr=Li/x*se+J,fs=Math.cos(gr),Wr=Math.sin(gr);Un.x=tr*Wr,Un.y=fn*Mr,Un.z=tr*fs,mt.setXYZ(Yt,Un.x,Un.y,Un.z),vt.setXYZ(Yt,0,Mr,0),zn.x=.5*fs+.5,zn.y=.5*Wr*Mr+.5,Kt.setXY(Yt,zn.x,zn.y),Yt++}for(Li=0;Li<x;Li++){var $i=Tr+Li,Ui=dr+Li;!0===ci?(ft.setX(jt,Ui),jt++,ft.setX(jt,Ui+1),jt++,ft.setX(jt,$i),jt++):(ft.setX(jt,Ui+1),jt++,ft.setX(jt,Ui),jt++,ft.setX(jt,$i),jt++),Gi+=3}Fe.addGroup(Hn,Gi,!0===ci?1:2),Hn+=Gi}(function Jn(){var ci,Li,Tr=new Bn,dr=new Bn,zn=0,Un=(f-o)/v;for(Li=0;Li<=P;Li++){var Gi=[],tr=Li/P,Mr=tr*(f-o)+o;for(ci=0;ci<=x;ci++){var xr=ci/x,gr=xr*se+J,fs=Math.sin(gr),Wr=Math.cos(gr);dr.x=Mr*fs,dr.y=-tr*v+fn,dr.z=Mr*Wr,mt.setXYZ(Yt,dr.x,dr.y,dr.z),Tr.set(fs,Un,Wr).normalize(),vt.setXYZ(Yt,Tr.x,Tr.y,Tr.z),Kt.setXY(Yt,xr,1-tr),Gi.push(Yt),Yt++}cn.push(Gi)}for(ci=0;ci<x;ci++)for(Li=0;Li<P;Li++){var Ui=cn[Li+1][ci],g=cn[Li+1][ci+1],c=cn[Li][ci+1];ft.setX(jt,cn[Li][ci]),jt++,ft.setX(jt,Ui),jt++,ft.setX(jt,c),jt++,ft.setX(jt,Ui),jt++,ft.setX(jt,g),jt++,ft.setX(jt,c),jt++,zn+=6}Fe.addGroup(Hn,zn,0),Hn+=zn})(),!1===G&&(o>0&&Xn(!0),f>0&&Xn(!1)),this.setIndex(ft),this.addAttribute("position",mt),this.addAttribute("normal",vt),this.addAttribute("uv",Kt)}function rc(o,f,v,x,P,G,J,se){Ba.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:o,radiusBottom:f,height:v,radialSegments:x,heightSegments:P,openEnded:G,thetaStart:J,thetaLength:se},this.fromBufferGeometry(new vp(o,f,v,x,P,G,J,se)),this.mergeVertices()}function Lg(o,f,v,x,P,G,J){rc.call(this,0,o,f,v,x,P,G,J),this.type="ConeGeometry",this.parameters={radius:o,height:f,radialSegments:v,heightSegments:x,openEnded:P,thetaStart:G,thetaLength:J}}function kg(o,f,v,x,P,G,J){vp.call(this,0,o,f,v,x,P,G,J),this.type="ConeBufferGeometry",this.parameters={radius:o,height:f,radialSegments:v,heightSegments:x,openEnded:P,thetaStart:G,thetaLength:J}}function Wl(o,f,v,x){Bs.call(this),this.type="CircleBufferGeometry",this.parameters={radius:o,segments:f,thetaStart:v,thetaLength:x},o=o||50,f=void 0!==f?Math.max(3,f):8,v=void 0!==v?v:0,x=void 0!==x?x:2*Math.PI;var P=f+2,G=new Float32Array(3*P),J=new Float32Array(3*P),se=new Float32Array(2*P);J[2]=1,se[0]=.5,se[1]=.5;for(var Fe=0,Me=3,qe=2;Fe<=f;Fe++,Me+=3,qe+=2){var Qe=v+Fe/f*x;G[Me]=o*Math.cos(Qe),G[Me+1]=o*Math.sin(Qe),J[Me+2]=1,se[qe]=(G[Me]/o+1)/2,se[qe+1]=(G[Me+1]/o+1)/2}var ft=[];for(Me=1;Me<=f;Me++)ft.push(Me,Me+1,0);this.setIndex(new bs(new Uint16Array(ft),1)),this.addAttribute("position",new bs(G,3)),this.addAttribute("normal",new bs(J,3)),this.addAttribute("uv",new bs(se,2)),this.boundingSphere=new gn(new Bn,o)}function Yu(o,f,v,x){Ba.call(this),this.type="CircleGeometry",this.parameters={radius:o,segments:f,thetaStart:v,thetaLength:x},this.fromBufferGeometry(new Wl(o,f,v,x))}function Ru(o,f,v,x,P,G){Ba.call(this),this.type="BoxGeometry",this.parameters={width:o,height:f,depth:v,widthSegments:x,heightSegments:P,depthSegments:G},this.fromBufferGeometry(new Xu(o,f,v,x,P,G)),this.mergeVertices()}(oh.prototype=Object.create(Ba.prototype)).constructor=oh,oh.prototype.addShapeList=function(o,f){for(var v=o.length,x=0;x<v;x++)this.addShape(o[x],f)},oh.prototype.addShape=function(o,f){var qe,mt,vt,Kt,Yt,v=void 0!==f.amount?f.amount:100,x=void 0!==f.bevelThickness?f.bevelThickness:6,P=void 0!==f.bevelSize?f.bevelSize:x-2,G=void 0!==f.bevelSegments?f.bevelSegments:3,J=void 0===f.bevelEnabled||f.bevelEnabled,se=void 0!==f.curveSegments?f.curveSegments:12,Fe=void 0!==f.steps?f.steps:1,Me=f.extrudePath,Qe=!1,ft=void 0!==f.UVGenerator?f.UVGenerator:oh.WorldUVGenerator;Me&&(qe=Me.getSpacedPoints(Fe),Qe=!0,J=!1,mt=void 0!==f.frames?f.frames:Me.computeFrenetFrames(Fe,!1),vt=new Bn,Kt=new Bn,Yt=new Bn),J||(G=0,x=0,P=0);var jt,cn,fn,Hn=this,Ln=this.vertices.length,oi=o.extractPoints(se),Jn=oi.shape,Xn=oi.holes,ci=!Gl.isClockWise(Jn);if(ci){for(Jn=Jn.reverse(),cn=0,fn=Xn.length;cn<fn;cn++)Gl.isClockWise(jt=Xn[cn])&&(Xn[cn]=jt.reverse());ci=!1}var Li=Gl.triangulateShape(Jn,Xn),Tr=Jn;for(cn=0,fn=Xn.length;cn<fn;cn++)Jn=Jn.concat(jt=Xn[cn]);function dr($e,Ke,ot){return Ke||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ke.clone().multiplyScalar(ot).add($e)}var zn,Un,Gi,tr,Mr,gr,xr=Jn.length,fs=Li.length;function Wr($e,Ke,ot){var _t,Et,$t=1,Ut=$e.x-Ke.x,un=$e.y-Ke.y,In=ot.x-$e.x,En=ot.y-$e.y,hn=Ut*Ut+un*un;if(Math.abs(Ut*En-un*In)>Number.EPSILON){var mn=Math.sqrt(hn),Fn=Math.sqrt(In*In+En*En),Rn=Ke.x-un/mn,Xt=Ke.y+Ut/mn,gi=((ot.x-En/Fn-Rn)*En-(ot.y+In/Fn-Xt)*In)/(Ut*En-un*In),$n=(_t=Rn+Ut*gi-$e.x)*_t+(Et=Xt+un*gi-$e.y)*Et;if($n<=2)return new qn(_t,Et);$t=Math.sqrt($n/2)}else{var ai=!1;Ut>Number.EPSILON?In>Number.EPSILON&&(ai=!0):Ut<-Number.EPSILON?In<-Number.EPSILON&&(ai=!0):Math.sign(un)===Math.sign(En)&&(ai=!0),ai?(_t=-un,Et=Ut,$t=Math.sqrt(hn)):(_t=Ut,Et=un,$t=Math.sqrt(hn/2))}return new qn(_t/$t,Et/$t)}for(var $i=[],Ui=0,g=Tr.length,c=g-1,p=Ui+1;Ui<g;Ui++,c++,p++)c===g&&(c=0),p===g&&(p=0),$i[Ui]=Wr(Tr[Ui],Tr[c],Tr[p]);var A,M,b=[],E=$i.concat();for(cn=0,fn=Xn.length;cn<fn;cn++){for(A=[],c=(g=(jt=Xn[cn]).length)-1,p=1+(Ui=0);Ui<g;Ui++,c++,p++)c===g&&(c=0),p===g&&(p=0),A[Ui]=Wr(jt[Ui],jt[c],jt[p]);b.push(A),E=E.concat(A)}for(zn=0;zn<G;zn++){for(Gi=zn/G,tr=x*Math.cos(Gi*Math.PI/2),Un=P*Math.sin(Gi*Math.PI/2),Ui=0,g=Tr.length;Ui<g;Ui++)fe((Mr=dr(Tr[Ui],$i[Ui],Un)).x,Mr.y,-tr);for(cn=0,fn=Xn.length;cn<fn;cn++)for(A=b[cn],Ui=0,g=(jt=Xn[cn]).length;Ui<g;Ui++)fe((Mr=dr(jt[Ui],A[Ui],Un)).x,Mr.y,-tr)}for(Un=P,Ui=0;Ui<xr;Ui++)Mr=J?dr(Jn[Ui],E[Ui],Un):Jn[Ui],Qe?(Kt.copy(mt.normals[0]).multiplyScalar(Mr.x),vt.copy(mt.binormals[0]).multiplyScalar(Mr.y),Yt.copy(qe[0]).add(Kt).add(vt),fe(Yt.x,Yt.y,Yt.z)):fe(Mr.x,Mr.y,0);for(M=1;M<=Fe;M++)for(Ui=0;Ui<xr;Ui++)Mr=J?dr(Jn[Ui],E[Ui],Un):Jn[Ui],Qe?(Kt.copy(mt.normals[M]).multiplyScalar(Mr.x),vt.copy(mt.binormals[M]).multiplyScalar(Mr.y),Yt.copy(qe[M]).add(Kt).add(vt),fe(Yt.x,Yt.y,Yt.z)):fe(Mr.x,Mr.y,v/Fe*M);for(zn=G-1;zn>=0;zn--){for(Gi=zn/G,tr=x*Math.cos(Gi*Math.PI/2),Un=P*Math.sin(Gi*Math.PI/2),Ui=0,g=Tr.length;Ui<g;Ui++)fe((Mr=dr(Tr[Ui],$i[Ui],Un)).x,Mr.y,v+tr);for(cn=0,fn=Xn.length;cn<fn;cn++)for(A=b[cn],Ui=0,g=(jt=Xn[cn]).length;Ui<g;Ui++)Mr=dr(jt[Ui],A[Ui],Un),Qe?fe(Mr.x,Mr.y+qe[Fe-1].y,qe[Fe-1].x+tr):fe(Mr.x,Mr.y,v+tr)}function X($e,Ke){var ot,_t;for(Ui=$e.length;--Ui>=0;){ot=Ui,(_t=Ui-1)<0&&(_t=$e.length-1);var Et=0,$t=Fe+2*G;for(Et=0;Et<$t;Et++){var Ut=xr*Et,un=xr*(Et+1);Ge(Ke+ot+Ut,Ke+_t+Ut,Ke+_t+un,Ke+ot+un)}}}function fe($e,Ke,ot){Hn.vertices.push(new Bn($e,Ke,ot))}function be($e,Ke,ot){Hn.faces.push(new Yo($e+=Ln,Ke+=Ln,ot+=Ln,null,null,0));var _t=ft.generateTopUV(Hn,$e,Ke,ot);Hn.faceVertexUvs[0].push(_t)}function Ge($e,Ke,ot,_t,Et,$t,Ut,un,In){ot+=Ln,Hn.faces.push(new Yo($e+=Ln,Ke+=Ln,_t+=Ln,null,null,1)),Hn.faces.push(new Yo(Ke,ot,_t,null,null,1));var En=ft.generateSideWallUV(Hn,$e,Ke,ot,_t);Hn.faceVertexUvs[0].push([En[0],En[1],En[3]]),Hn.faceVertexUvs[0].push([En[1],En[2],En[3]])}(function U(){if(J){var $e=0,Ke=xr*$e;for(Ui=0;Ui<fs;Ui++)be((gr=Li[Ui])[2]+Ke,gr[1]+Ke,gr[0]+Ke);for(Ke=xr*($e=Fe+2*G),Ui=0;Ui<fs;Ui++)be((gr=Li[Ui])[0]+Ke,gr[1]+Ke,gr[2]+Ke)}else{for(Ui=0;Ui<fs;Ui++)be((gr=Li[Ui])[2],gr[1],gr[0]);for(Ui=0;Ui<fs;Ui++)be((gr=Li[Ui])[0]+xr*Fe,gr[1]+xr*Fe,gr[2]+xr*Fe)}})(),function ne(){var $e=0;for(X(Tr,$e),$e+=Tr.length,cn=0,fn=Xn.length;cn<fn;cn++)X(jt=Xn[cn],$e),$e+=jt.length}()},oh.WorldUVGenerator={generateTopUV:function(o,f,v,x){var P=o.vertices,G=P[f],J=P[v],se=P[x];return[new qn(G.x,G.y),new qn(J.x,J.y),new qn(se.x,se.y)]},generateSideWallUV:function(o,f,v,x,P){var G=o.vertices,J=G[f],se=G[v],Fe=G[x],Me=G[P];return Math.abs(J.y-se.y)<.01?[new qn(J.x,1-J.z),new qn(se.x,1-se.z),new qn(Fe.x,1-Fe.z),new qn(Me.x,1-Me.z)]:[new qn(J.y,1-J.z),new qn(se.y,1-se.z),new qn(Fe.y,1-Fe.z),new qn(Me.y,1-Me.z)]}},(lf.prototype=Object.create(oh.prototype)).constructor=lf,(Cl.prototype=Object.create(Bs.prototype)).constructor=Cl,(il.prototype=Object.create(Ba.prototype)).constructor=il,(Xa.prototype=Object.create(Bs.prototype)).constructor=Xa,(ls.prototype=Object.create(Ba.prototype)).constructor=ls,(lv.prototype=Object.create(Ba.prototype)).constructor=lv,(ko.prototype=Object.create(Bs.prototype)).constructor=ko,(mp.prototype=Object.create(Ba.prototype)).constructor=mp,(Dg.prototype=Object.create(Bs.prototype)).constructor=Dg,(Pg.prototype=Object.create(Ba.prototype)).constructor=Pg,(Su.prototype=Object.create(Bs.prototype)).constructor=Su,(vp.prototype=Object.create(Bs.prototype)).constructor=vp,(rc.prototype=Object.create(Ba.prototype)).constructor=rc,(Lg.prototype=Object.create(rc.prototype)).constructor=Lg,(kg.prototype=Object.create(vp.prototype)).constructor=kg,(Wl.prototype=Object.create(Bs.prototype)).constructor=Wl,(Yu.prototype=Object.create(Ba.prototype)).constructor=Yu,(Ru.prototype=Object.create(Ba.prototype)).constructor=Ru;var qh=Object.freeze({WireframeGeometry:pd,ParametricGeometry:Uf,ParametricBufferGeometry:Vf,TetrahedronGeometry:kd,TetrahedronBufferGeometry:vu,OctahedronGeometry:sf,OctahedronBufferGeometry:ah,IcosahedronGeometry:Hp,IcosahedronBufferGeometry:Hf,DodecahedronGeometry:Mg,DodecahedronBufferGeometry:gd,PolyhedronGeometry:nl,PolyhedronBufferGeometry:ic,TubeGeometry:Rd,TubeBufferGeometry:Gf,TorusKnotGeometry:af,TorusKnotBufferGeometry:uu,TorusGeometry:Od,TorusBufferGeometry:$h,TextGeometry:lf,SphereBufferGeometry:Cl,SphereGeometry:il,RingGeometry:ls,RingBufferGeometry:Xa,PlaneBufferGeometry:yl,PlaneGeometry:lv,LatheGeometry:mp,LatheBufferGeometry:ko,ShapeGeometry:Pg,ShapeBufferGeometry:Dg,ExtrudeGeometry:oh,EdgesGeometry:Su,ConeGeometry:Lg,ConeBufferGeometry:kg,CylinderGeometry:rc,CylinderBufferGeometry:vp,CircleBufferGeometry:Wl,CircleGeometry:Yu,BoxBufferGeometry:Xu,BoxGeometry:Ru});function Wf(){sh.call(this,{uniforms:Ul.merge([_a.lights,{opacity:{value:1}}]),vertexShader:io.shadow_vert,fragmentShader:io.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(o){this.uniforms.opacity.value=o}}})}function iu(o){sh.call(this,o),this.type="RawShaderMaterial"}function bh(o){this.uuid=An.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(o)?o:[],this.visible=!0}function Xh(o){lo.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new na(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new na(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(o)}function Yh(o){Xh.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(o)}function Ou(o){lo.call(this),this.type="MeshPhongMaterial",this.color=new na(16777215),this.specular=new na(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new na(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=It,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(o)}function jl(o){Ou.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(o)}function sc(o){lo.call(this,o),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(o)}function Gp(o){lo.call(this),this.type="MeshLambertMaterial",this.color=new na(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new na(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=It,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(o)}function bc(o){lo.call(this),this.type="LineDashedMaterial",this.color=new na(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(o)}(Wf.prototype=Object.create(sh.prototype)).constructor=Wf,Wf.prototype.isShadowMaterial=!0,(iu.prototype=Object.create(sh.prototype)).constructor=iu,iu.prototype.isRawShaderMaterial=!0,bh.prototype={constructor:bh,isMultiMaterial:!0,toJSON:function(o){for(var f={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},v=this.materials,x=0,P=v.length;x<P;x++){var G=v[x].toJSON(o);delete G.metadata,f.materials.push(G)}return f.visible=this.visible,f},clone:function(){for(var o=new this.constructor,f=0;f<this.materials.length;f++)o.materials.push(this.materials[f].clone());return o.visible=this.visible,o}},(Xh.prototype=Object.create(lo.prototype)).constructor=Xh,Xh.prototype.isMeshStandardMaterial=!0,Xh.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.defines={STANDARD:""},this.color.copy(o.color),this.roughness=o.roughness,this.metalness=o.metalness,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.roughnessMap=o.roughnessMap,this.metalnessMap=o.metalnessMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.envMapIntensity=o.envMapIntensity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this},(Yh.prototype=Object.create(Xh.prototype)).constructor=Yh,Yh.prototype.isMeshPhysicalMaterial=!0,Yh.prototype.copy=function(o){return Xh.prototype.copy.call(this,o),this.defines={PHYSICAL:""},this.reflectivity=o.reflectivity,this.clearCoat=o.clearCoat,this.clearCoatRoughness=o.clearCoatRoughness,this},(Ou.prototype=Object.create(lo.prototype)).constructor=Ou,Ou.prototype.isMeshPhongMaterial=!0,Ou.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.color.copy(o.color),this.specular.copy(o.specular),this.shininess=o.shininess,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this},(jl.prototype=Object.create(Ou.prototype)).constructor=jl,jl.prototype.isMeshToonMaterial=!0,jl.prototype.copy=function(o){return Ou.prototype.copy.call(this,o),this.gradientMap=o.gradientMap,this},(sc.prototype=Object.create(lo.prototype)).constructor=sc,sc.prototype.isMeshNormalMaterial=!0,sc.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this},(Gp.prototype=Object.create(lo.prototype)).constructor=Gp,Gp.prototype.isMeshLambertMaterial=!0,Gp.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this},(bc.prototype=Object.create(lo.prototype)).constructor=bc,bc.prototype.isLineDashedMaterial=!0,bc.prototype.copy=function(o){return lo.prototype.copy.call(this,o),this.color.copy(o.color),this.linewidth=o.linewidth,this.scale=o.scale,this.dashSize=o.dashSize,this.gapSize=o.gapSize,this};var t_=Object.freeze({ShadowMaterial:Wf,SpriteMaterial:jh,RawShaderMaterial:iu,ShaderMaterial:sh,PointsMaterial:zc,MultiMaterial:bh,MeshPhysicalMaterial:Yh,MeshStandardMaterial:Xh,MeshPhongMaterial:Ou,MeshToonMaterial:jl,MeshNormalMaterial:sc,MeshLambertMaterial:Gp,MeshDepthMaterial:br,MeshBasicMaterial:eu,LineDashedMaterial:bc,LineBasicMaterial:mu,Material:lo}),Ch={enabled:!1,files:{},add:function(o,f){!1!==this.enabled&&(this.files[o]=f)},get:function(o){if(!1!==this.enabled)return this.files[o]},remove:function(o){delete this.files[o]},clear:function(){this.files={}}};function Fu(o,f,v){var x=this,P=!1,G=0,J=0;this.onStart=void 0,this.onLoad=o,this.onProgress=f,this.onError=v,this.itemStart=function(se){J++,!1===P&&void 0!==x.onStart&&x.onStart(se,G,J),P=!0},this.itemEnd=function(se){G++,void 0!==x.onProgress&&x.onProgress(se,G,J),G===J&&(P=!1,void 0!==x.onLoad&&x.onLoad())},this.itemError=function(se){void 0!==x.onError&&x.onError(se)}}var Cc=new Fu;function Vo(o){this.manager=void 0!==o?o:Cc}function uv(o){this.manager=void 0!==o?o:Cc,this._parser=null}Object.assign(Vo.prototype,{load:function(o,f,v,x){void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o);var P=this,G=Ch.get(o);if(void 0!==G)return P.manager.itemStart(o),setTimeout(function(){f&&f(G),P.manager.itemEnd(o)},0),G;var se=o.match(/^data:(.*?)(;base64)?,(.*)$/);if(se){var Fe=se[1],Me=!!se[2],qe=se[3];qe=window.decodeURIComponent(qe),Me&&(qe=window.atob(qe));try{var Qe,ft=(this.responseType||"").toLowerCase();switch(ft){case"arraybuffer":case"blob":Qe=new ArrayBuffer(qe.length);for(var mt=new Uint8Array(Qe),vt=0;vt<qe.length;vt++)mt[vt]=qe.charCodeAt(vt);"blob"===ft&&(Qe=new Blob([Qe],{type:Fe}));break;case"document":var Kt=new DOMParser;Qe=Kt.parseFromString(qe,Fe);break;case"json":Qe=JSON.parse(qe);break;default:Qe=qe}window.setTimeout(function(){f&&f(Qe),P.manager.itemEnd(o)},0)}catch(jt){window.setTimeout(function(){x&&x(jt),P.manager.itemError(o)},0)}}else{var Yt=new XMLHttpRequest;Yt.open("GET",o,!0),Yt.addEventListener("load",function(jt){var cn=jt.target.response;Ch.add(o,cn),200===this.status?(f&&f(cn),P.manager.itemEnd(o)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),f&&f(cn),P.manager.itemEnd(o)):(x&&x(jt),P.manager.itemError(o))},!1),void 0!==v&&Yt.addEventListener("progress",function(jt){v(jt)},!1),Yt.addEventListener("error",function(jt){x&&x(jt),P.manager.itemError(o)},!1),void 0!==this.responseType&&(Yt.responseType=this.responseType),void 0!==this.withCredentials&&(Yt.withCredentials=this.withCredentials),Yt.overrideMimeType&&Yt.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),Yt.send(null)}return P.manager.itemStart(o),Yt},setPath:function(o){return this.path=o,this},setResponseType:function(o){return this.responseType=o,this},setWithCredentials:function(o){return this.withCredentials=o,this},setMimeType:function(o){return this.mimeType=o,this}}),Object.assign(uv.prototype,{load:function(o,f,v,x){var P=this,G=[],J=new Vc;J.image=G;var se=new Vo(this.manager);function Fe(ft){se.load(o[ft],function(mt){var vt=P._parser(mt,!0);G[ft]={width:vt.width,height:vt.height,format:vt.format,mipmaps:vt.mipmaps},6===(Me+=1)&&(1===vt.mipmapCount&&(J.minFilter=Z),J.format=vt.format,J.needsUpdate=!0,f&&f(J))},v,x)}if(se.setPath(this.path),se.setResponseType("arraybuffer"),Array.isArray(o))for(var Me=0,qe=0,Qe=o.length;qe<Qe;++qe)Fe(qe);else se.load(o,function(ft){var mt=P._parser(ft,!0);if(mt.isCubemap)for(var vt=mt.mipmaps.length/mt.mipmapCount,Kt=0;Kt<vt;Kt++){G[Kt]={mipmaps:[]};for(var Yt=0;Yt<mt.mipmapCount;Yt++)G[Kt].mipmaps.push(mt.mipmaps[Kt*mt.mipmapCount+Yt]),G[Kt].format=mt.format,G[Kt].width=mt.width,G[Kt].height=mt.height}else J.image.width=mt.width,J.image.height=mt.height,J.mipmaps=mt.mipmaps;1===mt.mipmapCount&&(J.minFilter=Z),J.format=mt.format,J.needsUpdate=!0,f&&f(J)},v,x);return J},setPath:function(o){return this.path=o,this}});var ac=Ku;function Ku(o){this.manager=void 0!==o?o:Cc,this._parser=null}function Am(o){this.manager=void 0!==o?o:Cc}function cv(o){this.manager=void 0!==o?o:Cc}function Fd(o){this.manager=void 0!==o?o:Cc}function po(o,f){Es.call(this),this.type="Light",this.color=new na(o),this.intensity=void 0!==f?f:1,this.receiveShadow=void 0}function wc(o,f,v){po.call(this,o,v),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Es.DefaultUp),this.updateMatrix(),this.groundColor=new na(f)}function md(o){this.camera=o,this.bias=0,this.radius=1,this.mapSize=new qn(512,512),this.map=null,this.matrix=new Zs}function Wp(){md.call(this,new ku(50,1,.5,500))}function Nd(o,f,v,x,P,G){po.call(this,o,f),this.type="SpotLight",this.position.copy(Es.DefaultUp),this.updateMatrix(),this.target=new Es,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(J){this.intensity=J/Math.PI}}),this.distance=void 0!==v?v:0,this.angle=void 0!==x?x:Math.PI/3,this.penumbra=void 0!==P?P:0,this.decay=void 0!==G?G:1,this.shadow=new Wp}function wh(o,f,v,x){po.call(this,o,f),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(P){this.intensity=P/(4*Math.PI)}}),this.distance=void 0!==v?v:0,this.decay=void 0!==x?x:1,this.shadow=new md(new ku(90,1,.5,500))}function _p(o){md.call(this,new Ff(-5,5,5,-5,.5,500))}function yp(o,f){po.call(this,o,f),this.type="DirectionalLight",this.position.copy(Es.DefaultUp),this.updateMatrix(),this.target=new Es,this.shadow=new _p}function Im(o,f){po.call(this,o,f),this.type="AmbientLight",this.castShadow=void 0}Object.assign(Ku.prototype,{load:function(o,f,v,x){var P=this,G=new da,J=new Vo(this.manager);return J.setResponseType("arraybuffer"),J.load(o,function(se){var Fe=P._parser(se);!Fe||(void 0!==Fe.image?G.image=Fe.image:void 0!==Fe.data&&(G.image.width=Fe.width,G.image.height=Fe.height,G.image.data=Fe.data),G.wrapS=void 0!==Fe.wrapS?Fe.wrapS:S,G.wrapT=void 0!==Fe.wrapT?Fe.wrapT:S,G.magFilter=void 0!==Fe.magFilter?Fe.magFilter:Z,G.minFilter=void 0!==Fe.minFilter?Fe.minFilter:R,G.anisotropy=void 0!==Fe.anisotropy?Fe.anisotropy:1,void 0!==Fe.format&&(G.format=Fe.format),void 0!==Fe.type&&(G.type=Fe.type),void 0!==Fe.mipmaps&&(G.mipmaps=Fe.mipmaps),1===Fe.mipmapCount&&(G.minFilter=Z),G.needsUpdate=!0,f&&f(G,Fe))},v,x),G}}),Object.assign(Am.prototype,{load:function(o,f,v,x){var P=this,G=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(G.onload=function(){G.onload=null,URL.revokeObjectURL(G.src),f&&f(G),P.manager.itemEnd(o)},G.onerror=x,0===o.indexOf("data:"))G.src=o;else if(void 0!==this.crossOrigin)G.crossOrigin=this.crossOrigin,G.src=o;else{var J=new Vo;J.setPath(this.path),J.setResponseType("blob"),J.setWithCredentials(this.withCredentials),J.load(o,function(se){G.src=URL.createObjectURL(se)},v,x)}return P.manager.itemStart(o),G},setCrossOrigin:function(o){return this.crossOrigin=o,this},setWithCredentials:function(o){return this.withCredentials=o,this},setPath:function(o){return this.path=o,this}}),Object.assign(cv.prototype,{load:function(o,f,v,x){var P=new Zl,G=new Am(this.manager);G.setCrossOrigin(this.crossOrigin),G.setPath(this.path);var J=0;function se(Me){G.load(o[Me],function(qe){P.images[Me]=qe,6==++J&&(P.needsUpdate=!0,f&&f(P))},void 0,x)}for(var Fe=0;Fe<o.length;++Fe)se(Fe);return P},setCrossOrigin:function(o){return this.crossOrigin=o,this},setPath:function(o){return this.path=o,this}}),Object.assign(Fd.prototype,{load:function(o,f,v,x){var P=new lr,G=new Am(this.manager);return G.setCrossOrigin(this.crossOrigin),G.setWithCredentials(this.withCredentials),G.setPath(this.path),G.load(o,function(J){var se=o.search(/\.(jpg|jpeg)$/)>0||0===o.search(/^data\:image\/jpeg/);P.format=se?Wt:Lt,P.image=J,P.needsUpdate=!0,void 0!==f&&f(P)},v,x),P},setCrossOrigin:function(o){return this.crossOrigin=o,this},setWithCredentials:function(o){return this.withCredentials=o,this},setPath:function(o){return this.path=o,this}}),po.prototype=Object.assign(Object.create(Es.prototype),{constructor:po,isLight:!0,copy:function(o){return Es.prototype.copy.call(this,o),this.color.copy(o.color),this.intensity=o.intensity,this},toJSON:function(o){var f=Es.prototype.toJSON.call(this,o);return f.object.color=this.color.getHex(),f.object.intensity=this.intensity,void 0!==this.groundColor&&(f.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(f.object.distance=this.distance),void 0!==this.angle&&(f.object.angle=this.angle),void 0!==this.decay&&(f.object.decay=this.decay),void 0!==this.penumbra&&(f.object.penumbra=this.penumbra),void 0!==this.shadow&&(f.object.shadow=this.shadow.toJSON()),f}}),wc.prototype=Object.assign(Object.create(po.prototype),{constructor:wc,isHemisphereLight:!0,copy:function(o){return po.prototype.copy.call(this,o),this.groundColor.copy(o.groundColor),this}}),Object.assign(md.prototype,{copy:function(o){return this.camera=o.camera.clone(),this.bias=o.bias,this.radius=o.radius,this.mapSize.copy(o.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var o={};return 0!==this.bias&&(o.bias=this.bias),1!==this.radius&&(o.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(o.mapSize=this.mapSize.toArray()),o.camera=this.camera.toJSON(!1).object,delete o.camera.matrix,o}}),Wp.prototype=Object.assign(Object.create(md.prototype),{constructor:Wp,isSpotLightShadow:!0,update:function(o){var f=2*An.RAD2DEG*o.angle,v=this.mapSize.width/this.mapSize.height,x=o.distance||500,P=this.camera;(f!==P.fov||v!==P.aspect||x!==P.far)&&(P.fov=f,P.aspect=v,P.far=x,P.updateProjectionMatrix())}}),Nd.prototype=Object.assign(Object.create(po.prototype),{constructor:Nd,isSpotLight:!0,copy:function(o){return po.prototype.copy.call(this,o),this.distance=o.distance,this.angle=o.angle,this.penumbra=o.penumbra,this.decay=o.decay,this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}),wh.prototype=Object.assign(Object.create(po.prototype),{constructor:wh,isPointLight:!0,copy:function(o){return po.prototype.copy.call(this,o),this.distance=o.distance,this.decay=o.decay,this.shadow=o.shadow.clone(),this}}),_p.prototype=Object.assign(Object.create(md.prototype),{constructor:_p}),yp.prototype=Object.assign(Object.create(po.prototype),{constructor:yp,isDirectionalLight:!0,copy:function(o){return po.prototype.copy.call(this,o),this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}),Im.prototype=Object.assign(Object.create(po.prototype),{constructor:Im,isAmbientLight:!0});var uf,xc={arraySlice:function(o,f,v){return xc.isTypedArray(o)?new o.constructor(o.subarray(f,v)):o.slice(f,v)},convertArray:function(o,f,v){return!o||!v&&o.constructor===f?o:"number"==typeof f.BYTES_PER_ELEMENT?new f(o):Array.prototype.slice.call(o)},isTypedArray:function(o){return ArrayBuffer.isView(o)&&!(o instanceof DataView)},getKeyframeOrder:function(o){for(var v=o.length,x=new Array(v),P=0;P!==v;++P)x[P]=P;return x.sort(function f(G,J){return o[G]-o[J]}),x},sortedArray:function(o,f,v){for(var x=o.length,P=new o.constructor(x),G=0,J=0;J!==x;++G)for(var se=v[G]*f,Fe=0;Fe!==f;++Fe)P[J++]=o[se+Fe];return P},flattenJSON:function(o,f,v,x){for(var P=1,G=o[0];void 0!==G&&void 0===G[x];)G=o[P++];if(void 0!==G){var J=G[x];if(void 0!==J)if(Array.isArray(J))do{void 0!==(J=G[x])&&(f.push(G.time),v.push.apply(v,J)),G=o[P++]}while(void 0!==G);else if(void 0!==J.toArray)do{void 0!==(J=G[x])&&(f.push(G.time),J.toArray(v,v.length)),G=o[P++]}while(void 0!==G);else do{void 0!==(J=G[x])&&(f.push(G.time),v.push(J)),G=o[P++]}while(void 0!==G)}}};function Nu(o,f,v,x){this.parameterPositions=o,this._cachedIndex=0,this.resultBuffer=void 0!==x?x:new f.constructor(v),this.sampleValues=f,this.valueSize=v}function Bd(o,f,v,x){Nu.call(this,o,f,v,x),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function jf(o,f,v,x){Nu.call(this,o,f,v,x)}function Kh(o,f,v,x){Nu.call(this,o,f,v,x)}function ji(o,f,v,x){if(void 0===o)throw new Error("track name is undefined");if(void 0===f||0===f.length)throw new Error("no keyframes in track named "+o);this.name=o,this.times=xc.convertArray(f,this.TimeBufferType),this.values=xc.convertArray(v,this.ValueBufferType),this.setInterpolation(x||this.DefaultInterpolation),this.validate(),this.optimize()}function bp(o,f,v,x){ji.call(this,o,f,v,x)}function Ml(o,f,v,x){Nu.call(this,o,f,v,x)}function $f(o,f,v,x){ji.call(this,o,f,v,x)}function xh(o,f,v,x){ji.call(this,o,f,v,x)}function hv(o,f,v,x){ji.call(this,o,f,v,x)}function Sm(o,f,v){ji.call(this,o,f,v)}function jp(o,f,v,x){ji.call(this,o,f,v,x)}function Zh(o,f,v,x){ji.apply(this,arguments)}function Bu(o,f,v){this.name=o,this.tracks=v,this.duration=void 0!==f?f:-1,this.uuid=An.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Em(o){this.manager=void 0!==o?o:Cc,this.textures={}}function vd(o){this.manager=void 0!==o?o:Cc}function lh(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Tm(o){"boolean"==typeof o&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),o=void 0),this.manager=void 0!==o?o:Cc,this.withCredentials=!1}function $p(o){this.manager=void 0!==o?o:Cc,this.texturePath=""}function Zu(){}function _d(o,f){this.v1=o,this.v2=f}function Mm(){this.curves=[],this.autoClose=!1}function cf(o,f,v,x,P,G,J,se){this.aX=o,this.aY=f,this.xRadius=v,this.yRadius=x,this.aStartAngle=P,this.aEndAngle=G,this.aClockwise=J,this.aRotation=se||0}Nu.prototype={constructor:Nu,evaluate:function(o){var f=this.parameterPositions,v=this._cachedIndex,x=f[v],P=f[v-1];e:{t:{var G;n:{i:if(!(o<x)){for(var J=v+2;;){if(void 0===x){if(o<P)break i;return this._cachedIndex=v=f.length,this.afterEnd_(v-1,o,P)}if(v===J)break;if(P=x,o<(x=f[++v]))break t}G=f.length;break n}if(o>=P)break e;var se=f[1];for(o<se&&(v=2,P=se),J=v-2;;){if(void 0===P)return this._cachedIndex=0,this.beforeStart_(0,o,x);if(v===J)break;if(x=P,o>=(P=f[--v-1]))break t}G=v,v=0}for(;v<G;){var Fe=v+G>>>1;o<f[Fe]?G=Fe:v=Fe+1}if(x=f[v],void 0===(P=f[v-1]))return this._cachedIndex=0,this.beforeStart_(0,o,x);if(void 0===x)return this._cachedIndex=v=f.length,this.afterEnd_(v-1,P,o)}this._cachedIndex=v,this.intervalChanged_(v,P,x)}return this.interpolate_(v,P,o,x)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(o){for(var f=this.resultBuffer,v=this.sampleValues,x=this.valueSize,P=o*x,G=0;G!==x;++G)f[G]=v[P+G];return f},interpolate_:function(o,f,v,x){throw new Error("call to abstract method")},intervalChanged_:function(o,f,v){}},Object.assign(Nu.prototype,{beforeStart_:Nu.prototype.copySampleValue_,afterEnd_:Nu.prototype.copySampleValue_}),Bd.prototype=Object.assign(Object.create(Nu.prototype),{constructor:Bd,DefaultSettings_:{endingStart:_r,endingEnd:_r},intervalChanged_:function(o,f,v){var x=this.parameterPositions,P=o-2,G=o+1,J=x[P],se=x[G];if(void 0===J)switch(this.getSettings_().endingStart){case ws:P=o,J=2*f-v;break;case wr:J=f+x[P=x.length-2]-x[P+1];break;default:P=o,J=v}if(void 0===se)switch(this.getSettings_().endingEnd){case ws:G=o,se=2*v-f;break;case wr:G=1,se=v+x[1]-x[0];break;default:G=o-1,se=f}var Fe=.5*(v-f),Me=this.valueSize;this._weightPrev=Fe/(f-J),this._weightNext=Fe/(se-v),this._offsetPrev=P*Me,this._offsetNext=G*Me},interpolate_:function(o,f,v,x){for(var P=this.resultBuffer,G=this.sampleValues,J=this.valueSize,se=o*J,Fe=se-J,Me=this._offsetPrev,qe=this._offsetNext,Qe=this._weightPrev,ft=this._weightNext,mt=(v-f)/(x-f),vt=mt*mt,Kt=vt*mt,Yt=-Qe*Kt+2*Qe*vt-Qe*mt,jt=(1+Qe)*Kt+(-1.5-2*Qe)*vt+(-.5+Qe)*mt+1,cn=(-1-ft)*Kt+(1.5+ft)*vt+.5*mt,fn=ft*Kt-ft*vt,Hn=0;Hn!==J;++Hn)P[Hn]=Yt*G[Me+Hn]+jt*G[Fe+Hn]+cn*G[se+Hn]+fn*G[qe+Hn];return P}}),jf.prototype=Object.assign(Object.create(Nu.prototype),{constructor:jf,interpolate_:function(o,f,v,x){for(var P=this.resultBuffer,G=this.sampleValues,J=this.valueSize,se=o*J,Fe=se-J,Me=(v-f)/(x-f),qe=1-Me,Qe=0;Qe!==J;++Qe)P[Qe]=G[Fe+Qe]*qe+G[se+Qe]*Me;return P}}),Kh.prototype=Object.assign(Object.create(Nu.prototype),{constructor:Kh,interpolate_:function(o,f,v,x){return this.copySampleValue_(o-1)}}),uf={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:or,InterpolantFactoryMethodDiscrete:function(o){return new Kh(this.times,this.values,this.getValueSize(),o)},InterpolantFactoryMethodLinear:function(o){return new jf(this.times,this.values,this.getValueSize(),o)},InterpolantFactoryMethodSmooth:function(o){return new Bd(this.times,this.values,this.getValueSize(),o)},setInterpolation:function(o){var f;switch(o){case Ai:f=this.InterpolantFactoryMethodDiscrete;break;case or:f=this.InterpolantFactoryMethodLinear;break;case is:f=this.InterpolantFactoryMethodSmooth}if(void 0!==f)this.createInterpolant=f;else{var v="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(o===this.DefaultInterpolation)throw new Error(v);this.setInterpolation(this.DefaultInterpolation)}console.warn(v)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ai;case this.InterpolantFactoryMethodLinear:return or;case this.InterpolantFactoryMethodSmooth:return is}},getValueSize:function(){return this.values.length/this.times.length},shift:function(o){if(0!==o)for(var f=this.times,v=0,x=f.length;v!==x;++v)f[v]+=o;return this},scale:function(o){if(1!==o)for(var f=this.times,v=0,x=f.length;v!==x;++v)f[v]*=o;return this},trim:function(o,f){for(var v=this.times,x=v.length,P=0,G=x-1;P!==x&&v[P]<o;)++P;for(;-1!==G&&v[G]>f;)--G;if(++G,0!==P||G!==x){P>=G&&(P=(G=Math.max(G,1))-1);var J=this.getValueSize();this.times=xc.arraySlice(v,P,G),this.values=xc.arraySlice(this.values,P*J,G*J)}return this},validate:function(){var o=!0,f=this.getValueSize();f-Math.floor(f)!=0&&(console.error("invalid value size in track",this),o=!1);var v=this.times,x=this.values,P=v.length;0===P&&(console.error("track is empty",this),o=!1);for(var G=null,J=0;J!==P;J++){var se=v[J];if("number"==typeof se&&isNaN(se)){console.error("time is not a valid number",this,J,se),o=!1;break}if(null!==G&&G>se){console.error("out of order keys",this,J,se,G),o=!1;break}G=se}if(void 0!==x&&xc.isTypedArray(x)){J=0;for(var Fe=x.length;J!==Fe;++J){var Me=x[J];if(isNaN(Me)){console.error("value is not a valid number",this,J,Me),o=!1;break}}}return o},optimize:function(){for(var o=this.times,f=this.values,v=this.getValueSize(),x=this.getInterpolation()===is,P=1,G=o.length-1,J=1;J<G;++J){var se=!1,Fe=o[J];if(Fe!==o[J+1]&&(1!==J||Fe!==Fe[0]))if(x)se=!0;else for(var qe=J*v,Qe=qe-v,ft=qe+v,mt=0;mt!==v;++mt){var vt=f[qe+mt];if(vt!==f[Qe+mt]||vt!==f[ft+mt]){se=!0;break}}if(se){if(J!==P){o[P]=o[J];var Kt=J*v,Yt=P*v;for(mt=0;mt!==v;++mt)f[Yt+mt]=f[Kt+mt]}++P}}if(G>0){for(o[P]=o[G],Kt=G*v,Yt=P*v,mt=0;mt!==v;++mt)f[Yt+mt]=f[Kt+mt];++P}return P!==o.length&&(this.times=xc.arraySlice(o,0,P),this.values=xc.arraySlice(f,0,P*v)),this}},bp.prototype=Object.assign(Object.create(uf),{constructor:bp,ValueTypeName:"vector"}),Ml.prototype=Object.assign(Object.create(Nu.prototype),{constructor:Ml,interpolate_:function(o,f,v,x){for(var P=this.resultBuffer,G=this.sampleValues,J=this.valueSize,se=o*J,Fe=(v-f)/(x-f),Me=se+J;se!==Me;se+=4)to.slerpFlat(P,0,G,se-J,G,se,Fe);return P}}),$f.prototype=Object.assign(Object.create(uf),{constructor:$f,ValueTypeName:"quaternion",DefaultInterpolation:or,InterpolantFactoryMethodLinear:function(o){return new Ml(this.times,this.values,this.getValueSize(),o)},InterpolantFactoryMethodSmooth:void 0}),xh.prototype=Object.assign(Object.create(uf),{constructor:xh,ValueTypeName:"number"}),hv.prototype=Object.assign(Object.create(uf),{constructor:hv,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ai,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Sm.prototype=Object.assign(Object.create(uf),{constructor:Sm,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ai,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),jp.prototype=Object.assign(Object.create(uf),{constructor:jp,ValueTypeName:"color"}),Zh.prototype=uf,uf.constructor=Zh,Object.assign(Zh,{parse:function(o){if(void 0===o.type)throw new Error("track type undefined, can not parse");var f=Zh._getTrackTypeForValueTypeName(o.type);if(void 0===o.times){var v=[],x=[];xc.flattenJSON(o.keys,v,x,"value"),o.times=v,o.values=x}return void 0!==f.parse?f.parse(o):new f(o.name,o.times,o.values,o.interpolation)},toJSON:function(o){var v,f=o.constructor;if(void 0!==f.toJSON)v=f.toJSON(o);else{v={name:o.name,times:xc.convertArray(o.times,Array),values:xc.convertArray(o.values,Array)};var x=o.getInterpolation();x!==o.DefaultInterpolation&&(v.interpolation=x)}return v.type=o.ValueTypeName,v},_getTrackTypeForValueTypeName:function(o){switch(o.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xh;case"vector":case"vector2":case"vector3":case"vector4":return bp;case"color":return jp;case"quaternion":return $f;case"bool":case"boolean":return Sm;case"string":return hv}throw new Error("Unsupported typeName: "+o)}}),Bu.prototype={constructor:Bu,resetDuration:function(){for(var f=0,v=0,x=this.tracks.length;v!==x;++v){var P=this.tracks[v];f=Math.max(f,P.times[P.times.length-1])}this.duration=f},trim:function(){for(var o=0;o<this.tracks.length;o++)this.tracks[o].trim(0,this.duration);return this},optimize:function(){for(var o=0;o<this.tracks.length;o++)this.tracks[o].optimize();return this}},Object.assign(Bu,{parse:function(o){for(var f=[],v=o.tracks,x=1/(o.fps||1),P=0,G=v.length;P!==G;++P)f.push(Zh.parse(v[P]).scale(x));return new Bu(o.name,o.duration,f)},toJSON:function(o){for(var f=[],v=o.tracks,x={name:o.name,duration:o.duration,tracks:f},P=0,G=v.length;P!==G;++P)f.push(Zh.toJSON(v[P]));return x},CreateFromMorphTargetSequence:function(o,f,v,x){for(var P=f.length,G=[],J=0;J<P;J++){var se=[],Fe=[];se.push((J+P-1)%P,J,(J+1)%P),Fe.push(0,1,0);var Me=xc.getKeyframeOrder(se);se=xc.sortedArray(se,1,Me),Fe=xc.sortedArray(Fe,1,Me),!x&&0===se[0]&&(se.push(P),Fe.push(Fe[0])),G.push(new xh(".morphTargetInfluences["+f[J].name+"]",se,Fe).scale(1/v))}return new Bu(o,-1,G)},findByName:function(o,f){var v=o;Array.isArray(o)||(v=o.geometry&&o.geometry.animations||o.animations);for(var P=0;P<v.length;P++)if(v[P].name===f)return v[P];return null},CreateClipsFromMorphTargetSequences:function(o,f,v){for(var x={},P=/^([\w-]*?)([\d]+)$/,G=0,J=o.length;G<J;G++){var se=o[G],Fe=se.name.match(P);if(Fe&&Fe.length>1){var qe=x[Me=Fe[1]];qe||(x[Me]=qe=[]),qe.push(se)}}var Qe=[];for(var Me in x)Qe.push(Bu.CreateFromMorphTargetSequence(Me,x[Me],f,v));return Qe},parseAnimation:function(o,f){if(!o)return console.error("  no animation in JSONLoader data"),null;for(var v=function(fn,Hn,Ln,oi,Jn){if(0!==Ln.length){var Xn=[],ci=[];xc.flattenJSON(Ln,Xn,ci,oi),0!==Xn.length&&Jn.push(new fn(Hn,Xn,ci))}},x=[],P=o.name||"default",G=o.length||-1,J=o.fps||30,se=o.hierarchy||[],Fe=0;Fe<se.length;Fe++){var Me=se[Fe].keys;if(Me&&0!==Me.length)if(Me[0].morphTargets){for(var qe={},Qe=0;Qe<Me.length;Qe++)if(Me[Qe].morphTargets)for(var ft=0;ft<Me[Qe].morphTargets.length;ft++)qe[Me[Qe].morphTargets[ft]]=-1;for(var mt in qe){var vt=[],Kt=[];for(ft=0;ft!==Me[Qe].morphTargets.length;++ft){var Yt=Me[Qe];vt.push(Yt.time),Kt.push(Yt.morphTarget===mt?1:0)}x.push(new xh(".morphTargetInfluence["+mt+"]",vt,Kt))}G=qe.length*(J||1)}else{var jt=".bones["+f[Fe].name+"]";v(bp,jt+".position",Me,"pos",x),v($f,jt+".quaternion",Me,"rot",x),v(bp,jt+".scale",Me,"scl",x)}}return 0===x.length?null:new Bu(P,G,x)}}),Object.assign(Em.prototype,{load:function(o,f,v,x){var P=this;new Vo(P.manager).load(o,function(J){f(P.parse(JSON.parse(J)))},v,x)},setTextures:function(o){this.textures=o},parse:function(o){var f=this.textures;function v(se){return void 0===f[se]&&console.warn("THREE.MaterialLoader: Undefined texture",se),f[se]}var x=new t_[o.type];if(void 0!==o.uuid&&(x.uuid=o.uuid),void 0!==o.name&&(x.name=o.name),void 0!==o.color&&x.color.setHex(o.color),void 0!==o.roughness&&(x.roughness=o.roughness),void 0!==o.metalness&&(x.metalness=o.metalness),void 0!==o.emissive&&x.emissive.setHex(o.emissive),void 0!==o.specular&&x.specular.setHex(o.specular),void 0!==o.shininess&&(x.shininess=o.shininess),void 0!==o.clearCoat&&(x.clearCoat=o.clearCoat),void 0!==o.clearCoatRoughness&&(x.clearCoatRoughness=o.clearCoatRoughness),void 0!==o.uniforms&&(x.uniforms=o.uniforms),void 0!==o.vertexShader&&(x.vertexShader=o.vertexShader),void 0!==o.fragmentShader&&(x.fragmentShader=o.fragmentShader),void 0!==o.vertexColors&&(x.vertexColors=o.vertexColors),void 0!==o.fog&&(x.fog=o.fog),void 0!==o.shading&&(x.shading=o.shading),void 0!==o.blending&&(x.blending=o.blending),void 0!==o.side&&(x.side=o.side),void 0!==o.opacity&&(x.opacity=o.opacity),void 0!==o.transparent&&(x.transparent=o.transparent),void 0!==o.alphaTest&&(x.alphaTest=o.alphaTest),void 0!==o.depthTest&&(x.depthTest=o.depthTest),void 0!==o.depthWrite&&(x.depthWrite=o.depthWrite),void 0!==o.colorWrite&&(x.colorWrite=o.colorWrite),void 0!==o.wireframe&&(x.wireframe=o.wireframe),void 0!==o.wireframeLinewidth&&(x.wireframeLinewidth=o.wireframeLinewidth),void 0!==o.wireframeLinecap&&(x.wireframeLinecap=o.wireframeLinecap),void 0!==o.wireframeLinejoin&&(x.wireframeLinejoin=o.wireframeLinejoin),void 0!==o.skinning&&(x.skinning=o.skinning),void 0!==o.morphTargets&&(x.morphTargets=o.morphTargets),void 0!==o.size&&(x.size=o.size),void 0!==o.sizeAttenuation&&(x.sizeAttenuation=o.sizeAttenuation),void 0!==o.map&&(x.map=v(o.map)),void 0!==o.alphaMap&&(x.alphaMap=v(o.alphaMap),x.transparent=!0),void 0!==o.bumpMap&&(x.bumpMap=v(o.bumpMap)),void 0!==o.bumpScale&&(x.bumpScale=o.bumpScale),void 0!==o.normalMap&&(x.normalMap=v(o.normalMap)),void 0!==o.normalScale){var P=o.normalScale;!1===Array.isArray(P)&&(P=[P,P]),x.normalScale=(new qn).fromArray(P)}if(void 0!==o.displacementMap&&(x.displacementMap=v(o.displacementMap)),void 0!==o.displacementScale&&(x.displacementScale=o.displacementScale),void 0!==o.displacementBias&&(x.displacementBias=o.displacementBias),void 0!==o.roughnessMap&&(x.roughnessMap=v(o.roughnessMap)),void 0!==o.metalnessMap&&(x.metalnessMap=v(o.metalnessMap)),void 0!==o.emissiveMap&&(x.emissiveMap=v(o.emissiveMap)),void 0!==o.emissiveIntensity&&(x.emissiveIntensity=o.emissiveIntensity),void 0!==o.specularMap&&(x.specularMap=v(o.specularMap)),void 0!==o.envMap&&(x.envMap=v(o.envMap)),void 0!==o.reflectivity&&(x.reflectivity=o.reflectivity),void 0!==o.lightMap&&(x.lightMap=v(o.lightMap)),void 0!==o.lightMapIntensity&&(x.lightMapIntensity=o.lightMapIntensity),void 0!==o.aoMap&&(x.aoMap=v(o.aoMap)),void 0!==o.aoMapIntensity&&(x.aoMapIntensity=o.aoMapIntensity),void 0!==o.gradientMap&&(x.gradientMap=v(o.gradientMap)),void 0!==o.materials)for(var G=0,J=o.materials.length;G<J;G++)x.materials.push(this.parse(o.materials[G]));return x}}),Object.assign(vd.prototype,{load:function(o,f,v,x){var P=this;new Vo(P.manager).load(o,function(J){f(P.parse(JSON.parse(J)))},v,x)},parse:function(o){var f=new Bs,v=o.data.index,x={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};if(void 0!==v){var P=new x[v.type](v.array);f.setIndex(new bs(P,1))}var G=o.data.attributes;for(var J in G){var se=G[J];P=new x[se.type](se.array),f.addAttribute(J,new bs(P,se.itemSize,se.normalized))}var Fe=o.data.groups||o.data.drawcalls||o.data.offsets;if(void 0!==Fe)for(var Me=0,qe=Fe.length;Me!==qe;++Me){var Qe=Fe[Me];f.addGroup(Qe.start,Qe.count,Qe.materialIndex)}var ft=o.data.boundingSphere;if(void 0!==ft){var mt=new Bn;void 0!==ft.center&&mt.fromArray(ft.center),f.boundingSphere=new gn(mt,ft.radius)}return f}}),lh.prototype={constructor:lh,crossOrigin:void 0,extractUrlBase:function(o){var f=o.split("/");return 1===f.length?"./":(f.pop(),f.join("/")+"/")},initMaterials:function(o,f,v){for(var x=[],P=0;P<o.length;++P)x[P]=this.createMaterial(o[P],f,v);return x},createMaterial:function(){var o,f,v;return function(P,G,J){void 0===o&&(o=new na),void 0===f&&(f=new Fd),void 0===v&&(v=new Em);var se={};function Fe(ft,mt,vt,Kt,Yt){var fn,jt=G+ft,cn=lh.Handlers.get(jt);null!==cn?fn=cn.load(jt):(f.setCrossOrigin(J),fn=f.load(jt)),void 0!==mt&&(fn.repeat.fromArray(mt),1!==mt[0]&&(fn.wrapS=C),1!==mt[1]&&(fn.wrapT=C)),void 0!==vt&&fn.offset.fromArray(vt),void 0!==Kt&&("repeat"===Kt[0]&&(fn.wrapS=C),"mirror"===Kt[0]&&(fn.wrapS=k),"repeat"===Kt[1]&&(fn.wrapT=C),"mirror"===Kt[1]&&(fn.wrapT=k)),void 0!==Yt&&(fn.anisotropy=Yt);var Hn=An.generateUUID();return se[Hn]=fn,Hn}var Me={uuid:An.generateUUID(),type:"MeshLambertMaterial"};for(var qe in P){var Qe=P[qe];switch(qe){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":Me.name=Qe;break;case"blending":Me.blending=ut[Qe];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",qe,"is no longer supported.");break;case"colorDiffuse":Me.color=o.fromArray(Qe).getHex();break;case"colorSpecular":Me.specular=o.fromArray(Qe).getHex();break;case"colorEmissive":Me.emissive=o.fromArray(Qe).getHex();break;case"specularCoef":Me.shininess=Qe;break;case"shading":"basic"===Qe.toLowerCase()&&(Me.type="MeshBasicMaterial"),"phong"===Qe.toLowerCase()&&(Me.type="MeshPhongMaterial"),"standard"===Qe.toLowerCase()&&(Me.type="MeshStandardMaterial");break;case"mapDiffuse":Me.map=Fe(Qe,P.mapDiffuseRepeat,P.mapDiffuseOffset,P.mapDiffuseWrap,P.mapDiffuseAnisotropy);break;case"mapEmissive":Me.emissiveMap=Fe(Qe,P.mapEmissiveRepeat,P.mapEmissiveOffset,P.mapEmissiveWrap,P.mapEmissiveAnisotropy);break;case"mapLight":Me.lightMap=Fe(Qe,P.mapLightRepeat,P.mapLightOffset,P.mapLightWrap,P.mapLightAnisotropy);break;case"mapAO":Me.aoMap=Fe(Qe,P.mapAORepeat,P.mapAOOffset,P.mapAOWrap,P.mapAOAnisotropy);break;case"mapBump":Me.bumpMap=Fe(Qe,P.mapBumpRepeat,P.mapBumpOffset,P.mapBumpWrap,P.mapBumpAnisotropy);break;case"mapBumpScale":Me.bumpScale=Qe;break;case"mapNormal":Me.normalMap=Fe(Qe,P.mapNormalRepeat,P.mapNormalOffset,P.mapNormalWrap,P.mapNormalAnisotropy);break;case"mapNormalFactor":Me.normalScale=[Qe,Qe];break;case"mapSpecular":Me.specularMap=Fe(Qe,P.mapSpecularRepeat,P.mapSpecularOffset,P.mapSpecularWrap,P.mapSpecularAnisotropy);break;case"mapMetalness":Me.metalnessMap=Fe(Qe,P.mapMetalnessRepeat,P.mapMetalnessOffset,P.mapMetalnessWrap,P.mapMetalnessAnisotropy);break;case"mapRoughness":Me.roughnessMap=Fe(Qe,P.mapRoughnessRepeat,P.mapRoughnessOffset,P.mapRoughnessWrap,P.mapRoughnessAnisotropy);break;case"mapAlpha":Me.alphaMap=Fe(Qe,P.mapAlphaRepeat,P.mapAlphaOffset,P.mapAlphaWrap,P.mapAlphaAnisotropy);break;case"flipSided":Me.side=Q;break;case"doubleSided":Me.side=Re;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),Me.opacity=Qe;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":Me[qe]=Qe;break;case"vertexColors":!0===Qe&&(Me.vertexColors=L),"face"===Qe&&(Me.vertexColors=Se);break;default:console.error("THREE.Loader.createMaterial: Unsupported",qe,Qe)}}return"MeshBasicMaterial"===Me.type&&delete Me.emissive,"MeshPhongMaterial"!==Me.type&&delete Me.specular,Me.opacity<1&&(Me.transparent=!0),v.setTextures(se),v.parse(Me)}}()},lh.Handlers={handlers:[],add:function(o,f){this.handlers.push(o,f)},get:function(o){for(var f=this.handlers,v=0,x=f.length;v<x;v+=2){var G=f[v+1];if(f[v].test(o))return G}return null}},Object.assign(Tm.prototype,{load:function(o,f,v,x){var P=this,G=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:lh.prototype.extractUrlBase(o),J=new Vo(this.manager);J.setWithCredentials(this.withCredentials),J.load(o,function(se){var Fe=JSON.parse(se),Me=Fe.metadata;if(void 0!==Me){var qe=Me.type;if(void 0!==qe){if("object"===qe.toLowerCase())return void console.error("THREE.JSONLoader: "+o+" should be loaded with THREE.ObjectLoader instead.");if("scene"===qe.toLowerCase())return void console.error("THREE.JSONLoader: "+o+" should be loaded with THREE.SceneLoader instead.")}}var Qe=P.parse(Fe,G);f(Qe.geometry,Qe.materials)},v,x)},setTexturePath:function(o){this.texturePath=o},parse:function(o,f){var v=new Ba,x=void 0!==o.scale?1/o.scale:1;if(function P(Me){function qe(b,A){return b&1<<A}var Qe,ft,mt,vt,Kt,Yt,jt,cn,fn,Hn,Ln,oi,Jn,Xn,ci,Li,Tr,dr,zn,Un,Gi,tr,Mr,xr,gr,$i=o.faces,Ui=o.vertices,g=o.normals,c=o.colors,p=0;if(void 0!==o.uvs){for(Qe=0;Qe<o.uvs.length;Qe++)o.uvs[Qe].length&&p++;for(Qe=0;Qe<p;Qe++)v.faceVertexUvs[Qe]=[]}for(vt=0,Kt=Ui.length;vt<Kt;)(dr=new Bn).x=Ui[vt++]*Me,dr.y=Ui[vt++]*Me,dr.z=Ui[vt++]*Me,v.vertices.push(dr);for(vt=0,Kt=$i.length;vt<Kt;)if(Ln=qe(Hn=$i[vt++],0),oi=qe(Hn,1),Jn=qe(Hn,3),Xn=qe(Hn,4),ci=qe(Hn,5),Li=qe(Hn,6),Tr=qe(Hn,7),Ln){if((Un=new Yo).a=$i[vt],Un.b=$i[vt+1],Un.c=$i[vt+3],(Gi=new Yo).a=$i[vt+1],Gi.b=$i[vt+2],Gi.c=$i[vt+3],vt+=4,oi&&(fn=$i[vt++],Un.materialIndex=fn,Gi.materialIndex=fn),mt=v.faces.length,Jn)for(Qe=0;Qe<p;Qe++)for(xr=o.uvs[Qe],v.faceVertexUvs[Qe][mt]=[],v.faceVertexUvs[Qe][mt+1]=[],ft=0;ft<4;ft++)gr=new qn(xr[2*(cn=$i[vt++])],xr[2*cn+1]),2!==ft&&v.faceVertexUvs[Qe][mt].push(gr),0!==ft&&v.faceVertexUvs[Qe][mt+1].push(gr);if(Xn&&(jt=3*$i[vt++],Un.normal.set(g[jt++],g[jt++],g[jt]),Gi.normal.copy(Un.normal)),ci)for(Qe=0;Qe<4;Qe++)jt=3*$i[vt++],Mr=new Bn(g[jt++],g[jt++],g[jt]),2!==Qe&&Un.vertexNormals.push(Mr),0!==Qe&&Gi.vertexNormals.push(Mr);if(Li&&(Yt=$i[vt++],Un.color.setHex(tr=c[Yt]),Gi.color.setHex(tr)),Tr)for(Qe=0;Qe<4;Qe++)tr=c[Yt=$i[vt++]],2!==Qe&&Un.vertexColors.push(new na(tr)),0!==Qe&&Gi.vertexColors.push(new na(tr));v.faces.push(Un),v.faces.push(Gi)}else{if((zn=new Yo).a=$i[vt++],zn.b=$i[vt++],zn.c=$i[vt++],oi&&(fn=$i[vt++],zn.materialIndex=fn),mt=v.faces.length,Jn)for(Qe=0;Qe<p;Qe++)for(xr=o.uvs[Qe],v.faceVertexUvs[Qe][mt]=[],ft=0;ft<3;ft++)gr=new qn(xr[2*(cn=$i[vt++])],xr[2*cn+1]),v.faceVertexUvs[Qe][mt].push(gr);if(Xn&&(jt=3*$i[vt++],zn.normal.set(g[jt++],g[jt++],g[jt])),ci)for(Qe=0;Qe<3;Qe++)jt=3*$i[vt++],Mr=new Bn(g[jt++],g[jt++],g[jt]),zn.vertexNormals.push(Mr);if(Li&&(Yt=$i[vt++],zn.color.setHex(c[Yt])),Tr)for(Qe=0;Qe<3;Qe++)Yt=$i[vt++],zn.vertexColors.push(new na(c[Yt]));v.faces.push(zn)}}(x),function G(){var Me=void 0!==o.influencesPerVertex?o.influencesPerVertex:2;if(o.skinWeights)for(var qe=0,Qe=o.skinWeights.length;qe<Qe;qe+=Me)v.skinWeights.push(new Pr(o.skinWeights[qe],Me>1?o.skinWeights[qe+1]:0,Me>2?o.skinWeights[qe+2]:0,Me>3?o.skinWeights[qe+3]:0));if(o.skinIndices)for(qe=0,Qe=o.skinIndices.length;qe<Qe;qe+=Me)v.skinIndices.push(new Pr(o.skinIndices[qe],Me>1?o.skinIndices[qe+1]:0,Me>2?o.skinIndices[qe+2]:0,Me>3?o.skinIndices[qe+3]:0));v.bones=o.bones,v.bones&&v.bones.length>0&&(v.skinWeights.length!==v.skinIndices.length||v.skinIndices.length!==v.vertices.length)&&console.warn("When skinning, number of vertices ("+v.vertices.length+"), skinIndices ("+v.skinIndices.length+"), and skinWeights ("+v.skinWeights.length+") should match.")}(),function J(Me){if(void 0!==o.morphTargets)for(var qe=0,Qe=o.morphTargets.length;qe<Qe;qe++){v.morphTargets[qe]={},v.morphTargets[qe].name=o.morphTargets[qe].name,v.morphTargets[qe].vertices=[];for(var ft=v.morphTargets[qe].vertices,mt=o.morphTargets[qe].vertices,vt=0,Kt=mt.length;vt<Kt;vt+=3){var Yt=new Bn;Yt.x=mt[vt]*Me,Yt.y=mt[vt+1]*Me,Yt.z=mt[vt+2]*Me,ft.push(Yt)}}if(void 0!==o.morphColors&&o.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var jt=v.faces,cn=o.morphColors[0].colors;for(qe=0,Qe=jt.length;qe<Qe;qe++)jt[qe].color.fromArray(cn,3*qe)}}(x),function se(){var Me=[],qe=[];void 0!==o.animation&&qe.push(o.animation),void 0!==o.animations&&(o.animations.length?qe=qe.concat(o.animations):qe.push(o.animations));for(var Qe=0;Qe<qe.length;Qe++){var ft=Bu.parseAnimation(qe[Qe],v.bones);ft&&Me.push(ft)}if(v.morphTargets){var mt=Bu.CreateClipsFromMorphTargetSequences(v.morphTargets,10);Me=Me.concat(mt)}Me.length>0&&(v.animations=Me)}(),v.computeFaceNormals(),v.computeBoundingSphere(),void 0===o.materials||0===o.materials.length)return{geometry:v};var Fe=lh.prototype.initMaterials(o.materials,f,this.crossOrigin);return{geometry:v,materials:Fe}}}),Object.assign($p.prototype,{load:function(o,f,v,x){""===this.texturePath&&(this.texturePath=o.substring(0,o.lastIndexOf("/")+1));var P=this;new Vo(P.manager).load(o,function(J){var se=null;try{se=JSON.parse(J)}catch(Me){return void console.error("THREE:ObjectLoader: Can't parse "+o+".",Me.message)}var Fe=se.metadata;void 0!==Fe&&void 0!==Fe.type&&"geometry"!==Fe.type.toLowerCase()?P.parse(se,f):console.error("THREE.ObjectLoader: Can't load "+o+". Use THREE.JSONLoader instead.")},v,x)},setTexturePath:function(o){this.texturePath=o},setCrossOrigin:function(o){this.crossOrigin=o},parse:function(o,f){var v=this.parseGeometries(o.geometries),x=this.parseImages(o.images,function(){void 0!==f&&f(J)}),P=this.parseTextures(o.textures,x),G=this.parseMaterials(o.materials,P),J=this.parseObject(o.object,v,G);return o.animations&&(J.animations=this.parseAnimations(o.animations)),(void 0===o.images||0===o.images.length)&&void 0!==f&&f(J),J},parseGeometries:function(o){var f={};if(void 0!==o)for(var v=new Tm,x=new vd,P=0,G=o.length;P<G;P++){var J,se=o[P];switch(se.type){case"PlaneGeometry":case"PlaneBufferGeometry":J=new qh[se.type](se.width,se.height,se.widthSegments,se.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":J=new qh[se.type](se.width,se.height,se.depth,se.widthSegments,se.heightSegments,se.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":J=new qh[se.type](se.radius,se.segments,se.thetaStart,se.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":J=new qh[se.type](se.radiusTop,se.radiusBottom,se.height,se.radialSegments,se.heightSegments,se.openEnded,se.thetaStart,se.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":J=new qh[se.type](se.radius,se.height,se.radialSegments,se.heightSegments,se.openEnded,se.thetaStart,se.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":J=new qh[se.type](se.radius,se.widthSegments,se.heightSegments,se.phiStart,se.phiLength,se.thetaStart,se.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":J=new qh[se.type](se.radius,se.detail);break;case"RingGeometry":case"RingBufferGeometry":J=new qh[se.type](se.innerRadius,se.outerRadius,se.thetaSegments,se.phiSegments,se.thetaStart,se.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":J=new qh[se.type](se.radius,se.tube,se.radialSegments,se.tubularSegments,se.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":J=new qh[se.type](se.radius,se.tube,se.tubularSegments,se.radialSegments,se.p,se.q);break;case"LatheGeometry":case"LatheBufferGeometry":J=new qh[se.type](se.points,se.segments,se.phiStart,se.phiLength);break;case"BufferGeometry":J=x.parse(se);break;case"Geometry":J=v.parse(se.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+se.type+'"');continue}J.uuid=se.uuid,void 0!==se.name&&(J.name=se.name),f[se.uuid]=J}return f},parseMaterials:function(o,f){var v={};if(void 0!==o){var x=new Em;x.setTextures(f);for(var P=0,G=o.length;P<G;P++){var J=x.parse(o[P]);v[J.uuid]=J}}return v},parseAnimations:function(o){for(var f=[],v=0;v<o.length;v++){var x=Bu.parse(o[v]);f.push(x)}return f},parseImages:function(o,f){var v=this,x={};function P(Qe){return v.manager.itemStart(Qe),J.load(Qe,function(){v.manager.itemEnd(Qe)},void 0,function(){v.manager.itemError(Qe)})}if(void 0!==o&&o.length>0){var J=new Am(new Fu(f));J.setCrossOrigin(this.crossOrigin);for(var se=0,Fe=o.length;se<Fe;se++){var Me=o[se],qe=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Me.url)?Me.url:v.texturePath+Me.url;x[Me.uuid]=P(qe)}}return x},parseTextures:function(o,f){function v(Fe,Me){return"number"==typeof Fe?Fe:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Fe),Me[Fe])}var x={};if(void 0!==o)for(var P=0,G=o.length;P<G;P++){var J=o[P];void 0===J.image&&console.warn('THREE.ObjectLoader: No "image" specified for',J.uuid),void 0===f[J.image]&&console.warn("THREE.ObjectLoader: Undefined image",J.image);var se=new lr(f[J.image]);se.needsUpdate=!0,se.uuid=J.uuid,void 0!==J.name&&(se.name=J.name),void 0!==J.mapping&&(se.mapping=v(J.mapping,_)),void 0!==J.offset&&se.offset.fromArray(J.offset),void 0!==J.repeat&&se.repeat.fromArray(J.repeat),void 0!==J.wrap&&(se.wrapS=v(J.wrap[0],N),se.wrapT=v(J.wrap[1],N)),void 0!==J.minFilter&&(se.minFilter=v(J.minFilter,Y)),void 0!==J.magFilter&&(se.magFilter=v(J.magFilter,Y)),void 0!==J.anisotropy&&(se.anisotropy=J.anisotropy),void 0!==J.flipY&&(se.flipY=J.flipY),x[J.uuid]=se}return x},parseObject:function(){var o=new Zs;return function(v,x,P){var G;function J(vt){return void 0===x[vt]&&console.warn("THREE.ObjectLoader: Undefined geometry",vt),x[vt]}function se(vt){if(void 0!==vt)return void 0===P[vt]&&console.warn("THREE.ObjectLoader: Undefined material",vt),P[vt]}switch(v.type){case"Scene":G=new Ld,void 0!==v.background&&Number.isInteger(v.background)&&(G.background=new na(v.background)),void 0!==v.fog&&("Fog"===v.fog.type?G.fog=new Bc(v.fog.color,v.fog.near,v.fog.far):"FogExp2"===v.fog.type&&(G.fog=new Pd(v.fog.color,v.fog.density)));break;case"PerspectiveCamera":G=new ku(v.fov,v.aspect,v.near,v.far),void 0!==v.focus&&(G.focus=v.focus),void 0!==v.zoom&&(G.zoom=v.zoom),void 0!==v.filmGauge&&(G.filmGauge=v.filmGauge),void 0!==v.filmOffset&&(G.filmOffset=v.filmOffset),void 0!==v.view&&(G.view=Object.assign({},v.view));break;case"OrthographicCamera":G=new Ff(v.left,v.right,v.top,v.bottom,v.near,v.far);break;case"AmbientLight":G=new Im(v.color,v.intensity);break;case"DirectionalLight":G=new yp(v.color,v.intensity);break;case"PointLight":G=new wh(v.color,v.intensity,v.distance,v.decay);break;case"SpotLight":G=new Nd(v.color,v.intensity,v.distance,v.angle,v.penumbra,v.decay);break;case"HemisphereLight":G=new wc(v.color,v.groundColor,v.intensity);break;case"Mesh":var Fe=J(v.geometry),Me=se(v.material);G=Fe.bones&&Fe.bones.length>0?new wm(Fe,Me):new Bl(Fe,Me);break;case"LOD":G=new bl;break;case"Line":G=new yh(J(v.geometry),se(v.material),v.mode);break;case"LineSegments":G=new Lo(J(v.geometry),se(v.material));break;case"PointCloud":case"Points":G=new Ja(J(v.geometry),se(v.material));break;case"Sprite":G=new _h(se(v.material));break;case"Group":G=new zp;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:G=new Es}if(G.uuid=v.uuid,void 0!==v.name&&(G.name=v.name),void 0!==v.matrix?(o.fromArray(v.matrix),o.decompose(G.position,G.quaternion,G.scale)):(void 0!==v.position&&G.position.fromArray(v.position),void 0!==v.rotation&&G.rotation.fromArray(v.rotation),void 0!==v.quaternion&&G.quaternion.fromArray(v.quaternion),void 0!==v.scale&&G.scale.fromArray(v.scale)),void 0!==v.castShadow&&(G.castShadow=v.castShadow),void 0!==v.receiveShadow&&(G.receiveShadow=v.receiveShadow),v.shadow&&(void 0!==v.shadow.bias&&(G.shadow.bias=v.shadow.bias),void 0!==v.shadow.radius&&(G.shadow.radius=v.shadow.radius),void 0!==v.shadow.mapSize&&G.shadow.mapSize.fromArray(v.shadow.mapSize),void 0!==v.shadow.camera&&(G.shadow.camera=this.parseObject(v.shadow.camera))),void 0!==v.visible&&(G.visible=v.visible),void 0!==v.userData&&(G.userData=v.userData),void 0!==v.children)for(var qe in v.children)G.add(this.parseObject(v.children[qe],x,P));if("LOD"===v.type)for(var Qe=v.levels,ft=0;ft<Qe.length;ft++){var mt=Qe[ft];void 0!==(qe=G.getObjectByProperty("uuid",mt.object))&&G.addLevel(qe,mt.distance)}return G}}()}),Zu.prototype={constructor:Zu,getPoint:function(o){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(o){var f=this.getUtoTmapping(o);return this.getPoint(f)},getPoints:function(o){o||(o=5);for(var f=[],v=0;v<=o;v++)f.push(this.getPoint(v/o));return f},getSpacedPoints:function(o){o||(o=5);for(var f=[],v=0;v<=o;v++)f.push(this.getPointAt(v/o));return f},getLength:function(){var o=this.getLengths();return o[o.length-1]},getLengths:function(o){if(o||(o=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===o+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var v,P,f=[],x=this.getPoint(0),G=0;for(f.push(0),P=1;P<=o;P++)G+=(v=this.getPoint(P/o)).distanceTo(x),f.push(G),x=v;return this.cacheArcLengths=f,f},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(o,f){var G,v=this.getLengths(),x=0,P=v.length;G=f||o*v[P-1];for(var Fe,J=0,se=P-1;J<=se;)if((Fe=v[x=Math.floor(J+(se-J)/2)]-G)<0)J=x+1;else{if(!(Fe>0)){se=x;break}se=x-1}if(v[x=se]===G)return x/(P-1);var Me=v[x];return(x+(G-Me)/(v[x+1]-Me))/(P-1)},getTangent:function(o){var f=1e-4,v=o-f,x=o+f;v<0&&(v=0),x>1&&(x=1);var P=this.getPoint(v);return this.getPoint(x).clone().sub(P).normalize()},getTangentAt:function(o){var f=this.getUtoTmapping(o);return this.getTangent(f)},computeFrenetFrames:function(o,f){var Fe,qe,v=new Bn,x=[],P=[],G=[],J=new Bn,se=new Zs;for(Fe=0;Fe<=o;Fe++)x[Fe]=this.getTangentAt(Fe/o),x[Fe].normalize();P[0]=new Bn,G[0]=new Bn;var Qe=Number.MAX_VALUE,ft=Math.abs(x[0].x),mt=Math.abs(x[0].y),vt=Math.abs(x[0].z);for(ft<=Qe&&(Qe=ft,v.set(1,0,0)),mt<=Qe&&(Qe=mt,v.set(0,1,0)),vt<=Qe&&v.set(0,0,1),J.crossVectors(x[0],v).normalize(),P[0].crossVectors(x[0],J),G[0].crossVectors(x[0],P[0]),Fe=1;Fe<=o;Fe++)P[Fe]=P[Fe-1].clone(),G[Fe]=G[Fe-1].clone(),J.crossVectors(x[Fe-1],x[Fe]),J.length()>Number.EPSILON&&(J.normalize(),qe=Math.acos(An.clamp(x[Fe-1].dot(x[Fe]),-1,1)),P[Fe].applyMatrix4(se.makeRotationAxis(J,qe))),G[Fe].crossVectors(x[Fe],P[Fe]);if(!0===f)for(qe=Math.acos(An.clamp(P[0].dot(P[o]),-1,1)),qe/=o,x[0].dot(J.crossVectors(P[0],P[o]))>0&&(qe=-qe),Fe=1;Fe<=o;Fe++)P[Fe].applyMatrix4(se.makeRotationAxis(x[Fe],qe*Fe)),G[Fe].crossVectors(x[Fe],P[Fe]);return{tangents:x,normals:P,binormals:G}}},Zu.create=function(o,f){return o.prototype=Object.create(Zu.prototype),o.prototype.constructor=o,o.prototype.getPoint=f,o},(_d.prototype=Object.create(Zu.prototype)).constructor=_d,_d.prototype.isLineCurve=!0,_d.prototype.getPoint=function(o){if(1===o)return this.v2.clone();var f=this.v2.clone().sub(this.v1);return f.multiplyScalar(o).add(this.v1),f},_d.prototype.getPointAt=function(o){return this.getPoint(o)},_d.prototype.getTangent=function(o){return this.v2.clone().sub(this.v1).normalize()},Mm.prototype=Object.assign(Object.create(Zu.prototype),{constructor:Mm,add:function(o){this.curves.push(o)},closePath:function(){var o=this.curves[0].getPoint(0),f=this.curves[this.curves.length-1].getPoint(1);o.equals(f)||this.curves.push(new _d(f,o))},getPoint:function(o){for(var f=o*this.getLength(),v=this.getCurveLengths(),x=0;x<v.length;){if(v[x]>=f){var P=v[x]-f,G=this.curves[x],J=G.getLength();return G.getPointAt(0===J?0:1-P/J)}x++}return null},getLength:function(){var o=this.getCurveLengths();return o[o.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var o=[],f=0,v=0,x=this.curves.length;v<x;v++)f+=this.curves[v].getLength(),o.push(f);return this.cacheLengths=o,o},getSpacedPoints:function(o){o||(o=40);for(var f=[],v=0;v<=o;v++)f.push(this.getPoint(v/o));return this.autoClose&&f.push(f[0]),f},getPoints:function(o){o=o||12;for(var v,f=[],x=0,P=this.curves;x<P.length;x++)for(var G=P[x],se=G.getPoints(G&&G.isEllipseCurve?2*o:G&&G.isLineCurve?1:G&&G.isSplineCurve?o*G.points.length:o),Fe=0;Fe<se.length;Fe++){var Me=se[Fe];v&&v.equals(Me)||(f.push(Me),v=Me)}return this.autoClose&&f.length>1&&!f[f.length-1].equals(f[0])&&f.push(f[0]),f},createPointsGeometry:function(o){var f=this.getPoints(o);return this.createGeometry(f)},createSpacedPointsGeometry:function(o){var f=this.getSpacedPoints(o);return this.createGeometry(f)},createGeometry:function(o){for(var f=new Ba,v=0,x=o.length;v<x;v++){var P=o[v];f.vertices.push(new Bn(P.x,P.y,P.z||0))}return f}}),(cf.prototype=Object.create(Zu.prototype)).constructor=cf,cf.prototype.isEllipseCurve=!0,cf.prototype.getPoint=function(o){for(var f=2*Math.PI,v=this.aEndAngle-this.aStartAngle,x=Math.abs(v)<Number.EPSILON;v<0;)v+=f;for(;v>f;)v-=f;v<Number.EPSILON&&(v=x?0:f),!0===this.aClockwise&&!x&&(v===f?v=-f:v-=f);var P=this.aStartAngle+o*v,G=this.aX+this.xRadius*Math.cos(P),J=this.aY+this.yRadius*Math.sin(P);if(0!==this.aRotation){var se=Math.cos(this.aRotation),Fe=Math.sin(this.aRotation),Me=G-this.aX,qe=J-this.aY;G=Me*se-qe*Fe+this.aX,J=Me*Fe+qe*se+this.aY}return new qn(G,J)};var oc={tangentQuadraticBezier:function(o,f,v,x){return 2*(1-o)*(v-f)+2*o*(x-v)},tangentCubicBezier:function(o,f,v,x,P){return-3*f*(1-o)*(1-o)+3*v*(1-o)*(1-o)-6*o*v*(1-o)+6*o*x*(1-o)-3*o*o*x+3*o*o*P},tangentSpline:function(o,f,v,x,P){return 6*o*o-6*o+(3*o*o-4*o+1)+(-6*o*o+6*o)+(3*o*o-2*o)},interpolate:function(o,f,v,x,P){var G=.5*(v-o),J=.5*(x-f),se=P*P;return(2*f-2*v+G+J)*(P*se)+(-3*f+3*v-2*G-J)*se+G*P+f}};function Ah(o){this.points=void 0===o?[]:o}function qf(o,f,v,x){this.v0=o,this.v1=f,this.v2=v,this.v3=x}function hf(o,f,v){this.v0=o,this.v1=f,this.v2=v}(Ah.prototype=Object.create(Zu.prototype)).constructor=Ah,Ah.prototype.isSplineCurve=!0,Ah.prototype.getPoint=function(o){var f=this.points,v=(f.length-1)*o,x=Math.floor(v),P=v-x,G=f[0===x?x:x-1],J=f[x],se=f[x>f.length-2?f.length-1:x+1],Fe=f[x>f.length-3?f.length-1:x+2],Me=oc.interpolate;return new qn(Me(G.x,J.x,se.x,Fe.x,P),Me(G.y,J.y,se.y,Fe.y,P))},(qf.prototype=Object.create(Zu.prototype)).constructor=qf,qf.prototype.getPoint=function(o){var f=Gl.b3;return new qn(f(o,this.v0.x,this.v1.x,this.v2.x,this.v3.x),f(o,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},qf.prototype.getTangent=function(o){var f=oc.tangentCubicBezier;return new qn(f(o,this.v0.x,this.v1.x,this.v2.x,this.v3.x),f(o,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},(hf.prototype=Object.create(Zu.prototype)).constructor=hf,hf.prototype.getPoint=function(o){var f=Gl.b2;return new qn(f(o,this.v0.x,this.v1.x,this.v2.x),f(o,this.v0.y,this.v1.y,this.v2.y))},hf.prototype.getTangent=function(o){var f=oc.tangentQuadraticBezier;return new qn(f(o,this.v0.x,this.v1.x,this.v2.x),f(o,this.v0.y,this.v1.y,this.v2.y)).normalize()};var qp=Object.assign(Object.create(Mm.prototype),{fromPoints:function(o){this.moveTo(o[0].x,o[0].y);for(var f=1,v=o.length;f<v;f++)this.lineTo(o[f].x,o[f].y)},moveTo:function(o,f){this.currentPoint.set(o,f)},lineTo:function(o,f){var v=new _d(this.currentPoint.clone(),new qn(o,f));this.curves.push(v),this.currentPoint.set(o,f)},quadraticCurveTo:function(o,f,v,x){var P=new hf(this.currentPoint.clone(),new qn(o,f),new qn(v,x));this.curves.push(P),this.currentPoint.set(v,x)},bezierCurveTo:function(o,f,v,x,P,G){var J=new qf(this.currentPoint.clone(),new qn(o,f),new qn(v,x),new qn(P,G));this.curves.push(J),this.currentPoint.set(P,G)},splineThru:function(o){var v=new Ah([this.currentPoint.clone()].concat(o));this.curves.push(v),this.currentPoint.copy(o[o.length-1])},arc:function(o,f,v,x,P,G){this.absarc(o+this.currentPoint.x,f+this.currentPoint.y,v,x,P,G)},absarc:function(o,f,v,x,P,G){this.absellipse(o,f,v,v,x,P,G)},ellipse:function(o,f,v,x,P,G,J,se){this.absellipse(o+this.currentPoint.x,f+this.currentPoint.y,v,x,P,G,J,se)},absellipse:function(o,f,v,x,P,G,J,se){var Fe=new cf(o,f,v,x,P,G,J,se);if(this.curves.length>0){var Me=Fe.getPoint(0);Me.equals(this.currentPoint)||this.lineTo(Me.x,Me.y)}this.curves.push(Fe);var qe=Fe.getPoint(1);this.currentPoint.copy(qe)}});function Qh(){ma.apply(this,arguments),this.holes=[]}function ma(o){Mm.call(this),this.currentPoint=new qn,o&&this.fromPoints(o)}function Xp(){this.subPaths=[],this.currentPath=null}function Dm(o){this.data=o}function Xf(o){this.manager=void 0!==o?o:Cc}Qh.prototype=Object.assign(Object.create(qp),{constructor:Qh,getPointsHoles:function(o){for(var f=[],v=0,x=this.holes.length;v<x;v++)f[v]=this.holes[v].getPoints(o);return f},extractAllPoints:function(o){return{shape:this.getPoints(o),holes:this.getPointsHoles(o)}},extractPoints:function(o){return this.extractAllPoints(o)}}),ma.prototype=qp,qp.constructor=ma,Xp.prototype={moveTo:function(o,f){this.currentPath=new ma,this.subPaths.push(this.currentPath),this.currentPath.moveTo(o,f)},lineTo:function(o,f){this.currentPath.lineTo(o,f)},quadraticCurveTo:function(o,f,v,x){this.currentPath.quadraticCurveTo(o,f,v,x)},bezierCurveTo:function(o,f,v,x,P,G){this.currentPath.bezierCurveTo(o,f,v,x,P,G)},splineThru:function(o){this.currentPath.splineThru(o)},toShapes:function(o,f){function v(Gi){for(var tr=[],Mr=0,xr=Gi.length;Mr<xr;Mr++){var gr=Gi[Mr],fs=new Qh;fs.curves=gr.curves,tr.push(fs)}return tr}function x(Gi,tr){for(var Mr=tr.length,xr=!1,gr=Mr-1,fs=0;fs<Mr;gr=fs++){var Wr=tr[gr],$i=tr[fs],Ui=$i.x-Wr.x,g=$i.y-Wr.y;if(Math.abs(g)>Number.EPSILON){if(g<0&&(Wr=tr[fs],Ui=-Ui,$i=tr[gr],g=-g),Gi.y<Wr.y||Gi.y>$i.y)continue;if(Gi.y===Wr.y){if(Gi.x===Wr.x)return!0}else{var c=g*(Gi.x-Wr.x)-Ui*(Gi.y-Wr.y);if(0===c)return!0;if(c<0)continue;xr=!xr}}else{if(Gi.y!==Wr.y)continue;if($i.x<=Gi.x&&Gi.x<=Wr.x||Wr.x<=Gi.x&&Gi.x<=$i.x)return!0}}return xr}var P=Gl.isClockWise,G=this.subPaths;if(0===G.length)return[];if(!0===f)return v(G);var J,se,Fe,Me=[];if(1===G.length)return se=G[0],(Fe=new Qh).curves=se.curves,Me.push(Fe),Me;var qe=!P(G[0].getPoints());qe=o?!qe:qe;var Kt,Qe=[],ft=[],mt=[],vt=0;ft[vt]=void 0,mt[vt]=[];for(var Yt=0,jt=G.length;Yt<jt;Yt++)J=P(Kt=(se=G[Yt]).getPoints()),(J=o?!J:J)?(!qe&&ft[vt]&&vt++,ft[vt]={s:new Qh,p:Kt},ft[vt].s.curves=se.curves,qe&&vt++,mt[vt]=[]):mt[vt].push({h:se,p:Kt[0]});if(!ft[0])return v(G);if(ft.length>1){for(var cn=!1,fn=[],Hn=0,Ln=ft.length;Hn<Ln;Hn++)Qe[Hn]=[];for(Hn=0,Ln=ft.length;Hn<Ln;Hn++)for(var oi=mt[Hn],Jn=0;Jn<oi.length;Jn++){for(var Xn=oi[Jn],ci=!0,Li=0;Li<ft.length;Li++)x(Xn.p,ft[Li].p)&&(Hn!==Li&&fn.push({froms:Hn,tos:Li,hole:Jn}),ci?(ci=!1,Qe[Li].push(Xn)):cn=!0);ci&&Qe[Hn].push(Xn)}fn.length>0&&(cn||(mt=Qe))}Yt=0;for(var Tr,dr=ft.length;Yt<dr;Yt++){Me.push(Fe=ft[Yt].s);for(var zn=0,Un=(Tr=mt[Yt]).length;zn<Un;zn++)Fe.holes.push(Tr[zn].h)}return Me}},Object.assign(Dm.prototype,{isFont:!0,generateShapes:function(o,f,v){function P(qe,Qe,ft){var mt=G.glyphs[qe]||G.glyphs["?"];if(mt){var cn,fn,Hn,Ln,oi,Jn,Xn,ci,Li,Tr,dr,vt=new Xp,Kt=[],Yt=Gl.b2,jt=Gl.b3;if(mt.o)for(var zn=mt._cachedOutline||(mt._cachedOutline=mt.o.split(" ")),Un=0,Gi=zn.length;Un<Gi;)switch(zn[Un++]){case"m":cn=zn[Un++]*Qe+ft,fn=zn[Un++]*Qe,vt.moveTo(cn,fn);break;case"l":cn=zn[Un++]*Qe+ft,fn=zn[Un++]*Qe,vt.lineTo(cn,fn);break;case"q":if(Hn=zn[Un++]*Qe+ft,Ln=zn[Un++]*Qe,Xn=zn[Un++]*Qe+ft,ci=zn[Un++]*Qe,vt.quadraticCurveTo(Xn,ci,Hn,Ln),dr=Kt[Kt.length-1]){oi=dr.x,Jn=dr.y;for(var Mr=1;Mr<=v;Mr++)Yt(xr=Mr/v,oi,Xn,Hn),Yt(xr,Jn,ci,Ln)}break;case"b":if(Hn=zn[Un++]*Qe+ft,Ln=zn[Un++]*Qe,Xn=zn[Un++]*Qe+ft,ci=zn[Un++]*Qe,Li=zn[Un++]*Qe+ft,Tr=zn[Un++]*Qe,vt.bezierCurveTo(Xn,ci,Li,Tr,Hn,Ln),dr=Kt[Kt.length-1])for(oi=dr.x,Jn=dr.y,Mr=1;Mr<=v;Mr++){var xr;jt(xr=Mr/v,oi,Xn,Li,Hn),jt(xr,Jn,ci,Tr,Ln)}}return{offset:mt.ha*Qe,path:vt}}}void 0===f&&(f=100),void 0===v&&(v=4);for(var G=this.data,J=function x(qe){for(var Qe=String(qe).split(""),ft=f/G.resolution,mt=0,vt=[],Kt=0;Kt<Qe.length;Kt++){var Yt=P(Qe[Kt],ft,mt);mt+=Yt.offset,vt.push(Yt.path)}return vt}(o),se=[],Fe=0,Me=J.length;Fe<Me;Fe++)Array.prototype.push.apply(se,J[Fe].toShapes());return se}}),Object.assign(Xf.prototype,{load:function(o,f,v,x){var P=this;new Vo(this.manager).load(o,function(J){var se;try{se=JSON.parse(J)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),se=JSON.parse(J.substring(65,J.length-2))}var Fe=P.parse(se);f&&f(Fe)},v,x)},parse:function(o){return new Dm(o)}});var Cp,Yp={getContext:function(){return void 0===Cp&&(Cp=new(window.AudioContext||window.webkitAudioContext)),Cp},setContext:function(o){Cp=o}};function Rg(o){this.manager=void 0!==o?o:Cc}function $l(o,f,v,x){po.call(this,o,f),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==v?v:10,this.height=void 0!==x?x:10}function dv(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ku,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ku,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Qu(o,f,v){Es.call(this),this.type="CubeCamera";var x=90,G=new ku(x,1,o,f);G.up.set(0,-1,0),G.lookAt(new Bn(1,0,0)),this.add(G);var J=new ku(x,1,o,f);J.up.set(0,-1,0),J.lookAt(new Bn(-1,0,0)),this.add(J);var se=new ku(x,1,o,f);se.up.set(0,0,1),se.lookAt(new Bn(0,1,0)),this.add(se);var Fe=new ku(x,1,o,f);Fe.up.set(0,0,-1),Fe.lookAt(new Bn(0,-1,0)),this.add(Fe);var Me=new ku(x,1,o,f);Me.up.set(0,-1,0),Me.lookAt(new Bn(0,0,1)),this.add(Me);var qe=new ku(x,1,o,f);qe.up.set(0,-1,0),qe.lookAt(new Bn(0,0,-1)),this.add(qe),this.renderTarget=new ba(v,v,{format:Wt,magFilter:Z,minFilter:Z}),this.updateCubeMap=function(ft,mt){null===this.parent&&this.updateMatrixWorld();var vt=this.renderTarget,Kt=vt.texture.generateMipmaps;vt.texture.generateMipmaps=!1,vt.activeCubeFace=0,ft.render(mt,G,vt),vt.activeCubeFace=1,ft.render(mt,J,vt),vt.activeCubeFace=2,ft.render(mt,se,vt),vt.activeCubeFace=3,ft.render(mt,Fe,vt),vt.activeCubeFace=4,ft.render(mt,Me,vt),vt.texture.generateMipmaps=Kt,vt.activeCubeFace=5,ft.render(mt,qe,vt),ft.setRenderTarget(null)}}function fv(){Es.call(this),this.type="AudioListener",this.context=Yp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function yd(o){Es.call(this),this.type="Audio",this.context=o.context,this.gain=this.context.createGain(),this.gain.connect(o.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Og(o){yd.call(this,o),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function pv(o,f){this.analyser=o.context.createAnalyser(),this.analyser.fftSize=void 0!==f?f:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),o.getOutput().connect(this.analyser)}function Uc(o,f,v){this.binding=o,this.valueSize=v;var P,x=Float64Array;switch(f){case"quaternion":P=this._slerp;break;case"string":case"bool":x=Array,P=this._select;break;default:P=this._lerp}this.buffer=new x(4*v),this._mixBufferRegion=P,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function ql(o,f,v){this.path=f,this.parsedPath=v||ql.parseTrackName(f),this.node=ql.findNode(o,this.parsedPath.nodeName)||o,this.rootNode=o}function Ac(o){this.uuid=An.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var f={};this._indicesByUUID=f;for(var v=0,x=arguments.length;v!==x;++v)f[arguments[v].uuid]=v;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var P=this;this.stats={objects:{get total(){return P._objects.length},get inUse(){return this.total-P.nCachedObjects_}},get bindingsPerObject(){return P._bindings.length}}}function Ic(o,f,v){this._mixer=o,this._clip=f,this._localRoot=v||null;for(var x=f.tracks,P=x.length,G=new Array(P),J={endingStart:_r,endingEnd:_r},se=0;se!==P;++se){var Fe=x[se].createInterpolant(null);G[se]=Fe,Fe.settings=J}this._interpolantSettings=J,this._interpolants=G,this._propertyBindings=new Array(P),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=yi,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Fg(o){this._root=o,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function gv(o){"string"==typeof o&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),o=arguments[1]),this.value=o}function Jh(){Bs.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function wp(o,f,v,x){this.uuid=An.generateUUID(),this.data=o,this.itemSize=f,this.offset=v,this.normalized=!0===x}function df(o,f){this.uuid=An.generateUUID(),this.array=o,this.stride=f,this.count=void 0!==o?o.length/f:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function bd(o,f,v){df.call(this,o,f),this.meshPerAttribute=v||1}function Yf(o,f,v){bs.call(this,o,f),this.meshPerAttribute=v||1}function uh(o,f,v,x){this.ray=new _l(o,f),this.near=v||0,this.far=x||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ff(o,f){return o.distance-f.distance}function Kp(o,f,v,x){if(!1!==o.visible&&(o.raycast(f,v),!0===x))for(var P=o.children,G=0,J=P.length;G<J;G++)Kp(P[G],f,v,!0)}function mv(o){this.autoStart=void 0===o||o,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Qy(o){this.points=o;var x,P,G,J,se,Fe,Me,qe,Qe,f=[],v={x:0,y:0,z:0};function ft(mt,vt,Kt,Yt,jt,cn,fn){var Hn=.5*(Kt-mt),Ln=.5*(Yt-vt);return(2*(vt-Kt)+Hn+Ln)*fn+(-3*(vt-Kt)-2*Hn-Ln)*cn+Hn*jt+vt}this.initFromArray=function(mt){this.points=[];for(var vt=0;vt<mt.length;vt++)this.points[vt]={x:mt[vt][0],y:mt[vt][1],z:mt[vt][2]}},this.getPoint=function(mt){return x=(this.points.length-1)*mt,P=Math.floor(x),G=x-P,f[0]=0===P?P:P-1,f[1]=P,f[2]=P>this.points.length-2?this.points.length-1:P+1,f[3]=P>this.points.length-3?this.points.length-1:P+2,v.x=ft((Fe=this.points[f[0]]).x,(Me=this.points[f[1]]).x,(qe=this.points[f[2]]).x,(Qe=this.points[f[3]]).x,G,J=G*G,se=G*J),v.y=ft(Fe.y,Me.y,qe.y,Qe.y,G,J,se),v.z=ft(Fe.z,Me.z,qe.z,Qe.z,G,J,se),v},this.getControlPointsArray=function(){var mt,vt,Kt=this.points.length,Yt=[];for(mt=0;mt<Kt;mt++)Yt[mt]=[(vt=this.points[mt]).x,vt.y,vt.z];return Yt},this.getLength=function(mt){var vt,Kt,Yt,jt,fn=0,Hn=0,Ln=new Bn,oi=new Bn,Jn=[],Xn=0;for(Jn[0]=0,mt||(mt=100),Yt=this.points.length*mt,Ln.copy(this.points[0]),vt=1;vt<Yt;vt++)jt=this.getPoint(Kt=vt/Yt),oi.copy(jt),Xn+=oi.distanceTo(Ln),Ln.copy(jt),(fn=Math.floor((this.points.length-1)*Kt))!==Hn&&(Jn[fn]=Xn,Hn=fn);return Jn[Jn.length]=Xn,{chunks:Jn,total:Xn}},this.reparametrizeByArcLength=function(mt){var vt,Kt,jt,cn,Hn,Ln,oi=[],Jn=new Bn,Xn=this.getLength();for(oi.push(Jn.copy(this.points[0]).clone()),vt=1;vt<this.points.length;vt++){for(Hn=Math.ceil(mt*(Xn.chunks[vt]-Xn.chunks[vt-1])/Xn.total),jt=(vt-1)/(this.points.length-1),cn=vt/(this.points.length-1),Kt=1;Kt<Hn-1;Kt++)Ln=this.getPoint(jt+Kt*(1/Hn)*(cn-jt)),oi.push(Jn.copy(Ln).clone());oi.push(Jn.copy(this.points[vt]).clone())}this.points=oi}}function Pm(o,f,v){return this.radius=void 0!==o?o:1,this.phi=void 0!==f?f:0,this.theta=void 0!==v?v:0,this}function Eu(o,f,v){return this.radius=void 0!==o?o:1,this.theta=void 0!==f?f:0,this.y=void 0!==v?v:0,this}function wl(o,f){Bl.call(this,o,f),this.animationsMap={},this.animationsList=[];var v=this.geometry.morphTargets.length,x="__default";this.createAnimation(x,0,v-1,v/1),this.setAnimationWeight(x,1)}function xp(o){Es.call(this),this.material=o,this.render=function(f){}}function Ng(o,f,v,x){this.object=o,this.size=void 0!==f?f:1;var P=void 0!==v?v:16711680,G=void 0!==x?x:1,J=0,se=this.object.geometry;se&&se.isGeometry?J=3*se.faces.length:se&&se.isBufferGeometry&&(J=se.attributes.normal.count);var Fe=new Bs,Me=new ga(2*J*3,3);Fe.addAttribute("position",Me),Lo.call(this,Fe,new mu({color:P,linewidth:G})),this.matrixAutoUpdate=!1,this.update()}function zd(o){Es.call(this),this.light=o,this.light.updateMatrixWorld(),this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1;for(var f=new Bs,v=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],x=0,P=1;x<32;x++,P++){var J=x/32*Math.PI*2,se=P/32*Math.PI*2;v.push(Math.cos(J),Math.sin(J),1,Math.cos(se),Math.sin(se),1)}f.addAttribute("position",new ga(v,3));var Fe=new mu({fog:!1});this.cone=new Lo(f,Fe),this.add(this.cone),this.update()}function Vd(o){this.bones=this.getBoneList(o);for(var f=new Bs,v=[],x=[],P=new na(0,0,1),G=new na(0,1,0),J=0;J<this.bones.length;J++){var se=this.bones[J];se.parent&&se.parent.isBone&&(v.push(0,0,0),v.push(0,0,0),x.push(P.r,P.g,P.b),x.push(G.r,G.g,G.b))}f.addAttribute("position",new ga(v,3)),f.addAttribute("color",new ga(x,3));var Fe=new mu({vertexColors:L,depthTest:!1,depthWrite:!1,transparent:!0});Lo.call(this,f,Fe),this.root=o,this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function pf(o,f){this.light=o,this.light.updateMatrixWorld();var v=new Cl(f,4,2),x=new eu({wireframe:!0,fog:!1});x.color.copy(this.light.color).multiplyScalar(this.light.intensity),Bl.call(this,v,x),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Kf(o){Es.call(this),this.light=o,this.light.updateMatrixWorld();var f=new eu({color:o.color,fog:!1}),v=new eu({color:o.color,fog:!1,wireframe:!0}),x=new Bs;x.addAttribute("position",new bs(new Float32Array(18),3)),this.add(new Bl(x,f)),this.add(new Bl(x,v)),this.update()}function gf(o,f){Es.call(this),this.light=o,this.light.updateMatrixWorld(),this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1;var v=new ah(f);v.rotateY(.5*Math.PI);var x=new eu({vertexColors:L,wireframe:!0}),P=v.getAttribute("position"),G=new Float32Array(3*P.count);v.addAttribute("color",new bs(G,3)),this.add(new Bl(v,x)),this.update()}function Bg(o,f,v,x){o=o||10,f=f||10,v=new na(void 0!==v?v:4473924),x=new na(void 0!==x?x:8947848);for(var P=f/2,G=2*o/f,J=[],se=[],Fe=0,Me=0,qe=-o;Fe<=f;Fe++,qe+=G){J.push(-o,0,qe,o,0,qe),J.push(qe,0,-o,qe,0,o);var Qe=Fe===P?v:x;Qe.toArray(se,Me),Qe.toArray(se,Me+=3),Qe.toArray(se,Me+=3),Qe.toArray(se,Me+=3),Me+=3}var ft=new Bs;ft.addAttribute("position",new ga(J,3)),ft.addAttribute("color",new ga(se,3));var mt=new mu({vertexColors:L});Lo.call(this,ft,mt)}function ed(o,f,v,x,P,G){o=o||10,f=f||16,v=v||8,x=x||64,P=new na(void 0!==P?P:4473924),G=new na(void 0!==G?G:8947848);var Fe,Me,qe,Qe,ft,mt,vt,J=[],se=[];for(Qe=0;Qe<=f;Qe++)qe=Qe/f*(2*Math.PI),Fe=Math.sin(qe)*o,Me=Math.cos(qe)*o,J.push(0,0,0),J.push(Fe,0,Me),se.push((vt=1&Qe?P:G).r,vt.g,vt.b),se.push(vt.r,vt.g,vt.b);for(Qe=0;Qe<=v;Qe++)for(vt=1&Qe?P:G,mt=o-o/v*Qe,ft=0;ft<x;ft++)qe=ft/x*(2*Math.PI),Fe=Math.sin(qe)*mt,Me=Math.cos(qe)*mt,J.push(Fe,0,Me),se.push(vt.r,vt.g,vt.b),qe=(ft+1)/x*(2*Math.PI),Fe=Math.sin(qe)*mt,Me=Math.cos(qe)*mt,J.push(Fe,0,Me),se.push(vt.r,vt.g,vt.b);var Kt=new Bs;Kt.addAttribute("position",new ga(J,3)),Kt.addAttribute("color",new ga(se,3));var Yt=new mu({vertexColors:L});Lo.call(this,Kt,Yt)}function Ud(o,f,v,x){this.object=o,this.size=void 0!==f?f:1;var P=void 0!==v?v:16776960,G=void 0!==x?x:1,J=0,se=this.object.geometry;se&&se.isGeometry?J=se.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var Fe=new Bs,Me=new ga(2*J*3,3);Fe.addAttribute("position",Me),Lo.call(this,Fe,new mu({color:P,linewidth:G})),this.matrixAutoUpdate=!1,this.update()}function zg(o,f){Es.call(this),this.light=o,this.light.updateMatrixWorld(),this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1,void 0===f&&(f=1);var v=new Bs;v.addAttribute("position",new ga([-f,f,0,f,f,0,f,-f,0,-f,-f,0,-f,f,0],3));var x=new mu({fog:!1});this.add(new yh(v,x)),(v=new Bs).addAttribute("position",new ga([0,0,0,0,0,1],3)),this.add(new yh(v,x)),this.update()}function Lm(o){var f=new Bs,v=new mu({color:16777215,vertexColors:Se}),x=[],P=[],G={},J=new na(16755200),se=new na(16711680),Fe=new na(43775),Me=new na(16777215),qe=new na(3355443);function Qe(mt,vt,Kt){ft(mt,Kt),ft(vt,Kt)}function ft(mt,vt){x.push(0,0,0),P.push(vt.r,vt.g,vt.b),void 0===G[mt]&&(G[mt]=[]),G[mt].push(x.length/3-1)}Qe("n1","n2",J),Qe("n2","n4",J),Qe("n4","n3",J),Qe("n3","n1",J),Qe("f1","f2",J),Qe("f2","f4",J),Qe("f4","f3",J),Qe("f3","f1",J),Qe("n1","f1",J),Qe("n2","f2",J),Qe("n3","f3",J),Qe("n4","f4",J),Qe("p","n1",se),Qe("p","n2",se),Qe("p","n3",se),Qe("p","n4",se),Qe("u1","u2",Fe),Qe("u2","u3",Fe),Qe("u3","u1",Fe),Qe("c","t",Me),Qe("p","c",qe),Qe("cn1","cn2",qe),Qe("cn3","cn4",qe),Qe("cf1","cf2",qe),Qe("cf3","cf4",qe),f.addAttribute("position",new ga(x,3)),f.addAttribute("color",new ga(P,3)),Lo.call(this,f,v),this.camera=o,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=G,this.update()}function Vg(o,f){void 0===f&&(f=16776960);var v=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),x=new Float32Array(24),P=new Bs;P.setIndex(new bs(v,1)),P.addAttribute("position",new bs(x,3)),Lo.call(this,P,new mu({color:f})),void 0!==o&&this.update(o)}Object.assign(Rg.prototype,{load:function(o,f,v,x){var P=new Vo(this.manager);P.setResponseType("arraybuffer"),P.load(o,function(G){Yp.getContext().decodeAudioData(G,function(se){f(se)})},v,x)}}),$l.prototype=Object.assign(Object.create(po.prototype),{constructor:$l,isRectAreaLight:!0,copy:function(o){return po.prototype.copy.call(this,o),this.width=o.width,this.height=o.height,this}}),Object.assign(dv.prototype,{update:function(){var o,f,v,x,P,G,J,se=new Zs,Fe=new Zs;return function(qe){if(o!==this||f!==qe.focus||v!==qe.fov||x!==qe.aspect*this.aspect||P!==qe.near||G!==qe.far||J!==qe.zoom){o=this,f=qe.focus,v=qe.fov,x=qe.aspect*this.aspect,P=qe.near,G=qe.far,J=qe.zoom;var Yt,jt,ft=qe.projectionMatrix.clone(),mt=this.eyeSep/2,vt=mt*P/f,Kt=P*Math.tan(An.DEG2RAD*v*.5)/J;Fe.elements[12]=-mt,se.elements[12]=mt,ft.elements[0]=2*P/((jt=Kt*x+vt)-(Yt=-Kt*x+vt)),ft.elements[8]=(jt+Yt)/(jt-Yt),this.cameraL.projectionMatrix.copy(ft),ft.elements[0]=2*P/((jt=Kt*x-vt)-(Yt=-Kt*x-vt)),ft.elements[8]=(jt+Yt)/(jt-Yt),this.cameraR.projectionMatrix.copy(ft)}this.cameraL.matrixWorld.copy(qe.matrixWorld).multiply(Fe),this.cameraR.matrixWorld.copy(qe.matrixWorld).multiply(se)}}()}),(Qu.prototype=Object.create(Es.prototype)).constructor=Qu,fv.prototype=Object.assign(Object.create(Es.prototype),{constructor:fv,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(o){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=o,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(o){this.gain.gain.value=o},updateMatrixWorld:function(){var o=new Bn,f=new to,v=new Bn,x=new Bn;return function(G){Es.prototype.updateMatrixWorld.call(this,G);var J=this.context.listener,se=this.up;this.matrixWorld.decompose(o,f,v),x.set(0,0,-1).applyQuaternion(f),J.positionX?(J.positionX.setValueAtTime(o.x,this.context.currentTime),J.positionY.setValueAtTime(o.y,this.context.currentTime),J.positionZ.setValueAtTime(o.z,this.context.currentTime),J.forwardX.setValueAtTime(x.x,this.context.currentTime),J.forwardY.setValueAtTime(x.y,this.context.currentTime),J.forwardZ.setValueAtTime(x.z,this.context.currentTime),J.upX.setValueAtTime(se.x,this.context.currentTime),J.upY.setValueAtTime(se.y,this.context.currentTime),J.upZ.setValueAtTime(se.z,this.context.currentTime)):(J.setPosition(o.x,o.y,o.z),J.setOrientation(x.x,x.y,x.z,se.x,se.y,se.z))}}()}),yd.prototype=Object.assign(Object.create(Es.prototype),{constructor:yd,getOutput:function(){return this.gain},setNodeSource:function(o){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=o,this.connect(),this},setBuffer:function(o){return this.buffer=o,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.onended=this.onEnded.bind(this),o.playbackRate.setValueAtTime(this.playbackRate,this.startTime),o.start(0,this.startTime),this.isPlaying=!0,this.source=o,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var o=1,f=this.filters.length;o<f;o++)this.filters[o-1].connect(this.filters[o]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var o=1,f=this.filters.length;o<f;o++)this.filters[o-1].disconnect(this.filters[o]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(o){return o||(o=[]),!0===this.isPlaying?(this.disconnect(),this.filters=o,this.connect()):this.filters=o,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(o){return this.setFilters(o?[o]:[])},setPlaybackRate:function(o){if(!1!==this.hasPlaybackControl)return this.playbackRate=o,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(o){if(!1!==this.hasPlaybackControl)return this.loop=o,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(o){return this.gain.gain.value=o,this}}),Og.prototype=Object.assign(Object.create(yd.prototype),{constructor:Og,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(o){this.panner.refDistance=o},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(o){this.panner.rolloffFactor=o},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(o){this.panner.distanceModel=o},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(o){this.panner.maxDistance=o},updateMatrixWorld:function(){var o=new Bn;return function(v){Es.prototype.updateMatrixWorld.call(this,v),o.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(o.x,o.y,o.z)}}()}),Object.assign(pv.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var o=0,f=this.getFrequencyData(),v=0;v<f.length;v++)o+=f[v];return o/f.length}}),Uc.prototype={constructor:Uc,accumulate:function(o,f){var v=this.buffer,x=this.valueSize,P=o*x+x,G=this.cumulativeWeight;if(0===G){for(var J=0;J!==x;++J)v[P+J]=v[J];G=f}else this._mixBufferRegion(v,P,0,f/(G+=f),x);this.cumulativeWeight=G},apply:function(o){var f=this.valueSize,v=this.buffer,x=o*f+f,P=this.cumulativeWeight,G=this.binding;this.cumulativeWeight=0,P<1&&this._mixBufferRegion(v,x,3*f,1-P,f);for(var se=f,Fe=f+f;se!==Fe;++se)if(v[se]!==v[se+f]){G.setValue(v,x);break}},saveOriginalState:function(){var f=this.buffer,v=this.valueSize,x=3*v;this.binding.getValue(f,x);for(var P=v,G=x;P!==G;++P)f[P]=f[x+P%v];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(o,f,v,x,P){if(x>=.5)for(var G=0;G!==P;++G)o[f+G]=o[v+G]},_slerp:function(o,f,v,x,P){to.slerpFlat(o,f,o,f,o,v,x)},_lerp:function(o,f,v,x,P){for(var G=1-x,J=0;J!==P;++J){var se=f+J;o[se]=o[se]*G+o[v+J]*x}}},ql.prototype={constructor:ql,getValue:function(f,v){this.bind(),this.getValue(f,v)},setValue:function(f,v){this.bind(),this.setValue(f,v)},bind:function(){var o=this.node,f=this.parsedPath,v=f.objectName,x=f.propertyName,P=f.propertyIndex;if(o||(o=ql.findNode(this.rootNode,f.nodeName)||this.rootNode,this.node=o),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,o){if(v){var G=f.objectIndex;switch(v){case"materials":if(!o.material)return void console.error("  can not bind to material as node does not have a material",this);if(!o.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);o=o.material.materials;break;case"bones":if(!o.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);o=o.skeleton.bones;for(var J=0;J<o.length;J++)if(o[J].name===G){G=J;break}break;default:if(void 0===o[v])return void console.error("  can not bind to objectName of node, undefined",this);o=o[v]}if(void 0!==G){if(void 0===o[G])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,o);o=o[G]}}var se=o[x];if(void 0!==se){var Me=this.Versioning.None;void 0!==o.needsUpdate?(Me=this.Versioning.NeedsUpdate,this.targetObject=o):void 0!==o.matrixWorldNeedsUpdate&&(Me=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=o);var qe=this.BindingType.Direct;if(void 0!==P){if("morphTargetInfluences"===x){if(!o.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!o.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(J=0;J<this.node.geometry.morphTargets.length;J++)if(o.geometry.morphTargets[J].name===P){P=J;break}}qe=this.BindingType.ArrayElement,this.resolvedProperty=se,this.propertyIndex=P}else void 0!==se.fromArray&&void 0!==se.toArray?(qe=this.BindingType.HasFromToArray,this.resolvedProperty=se):void 0!==se.length?(qe=this.BindingType.EntireArray,this.resolvedProperty=se):this.propertyName=x;this.getValue=this.GetterByBindingType[qe],this.setValue=this.SetterByBindingTypeAndVersioning[qe][Me]}else console.error("  trying to update property for track: "+f.nodeName+"."+x+" but it wasn't found.",o)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(ql.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:ql.prototype.getValue,_setValue_unbound:ql.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(f,v){f[v]=this.node[this.propertyName]},function(f,v){for(var x=this.resolvedProperty,P=0,G=x.length;P!==G;++P)f[v++]=x[P]},function(f,v){f[v]=this.resolvedProperty[this.propertyIndex]},function(f,v){this.resolvedProperty.toArray(f,v)}],SetterByBindingTypeAndVersioning:[[function(f,v){this.node[this.propertyName]=f[v]},function(f,v){this.node[this.propertyName]=f[v],this.targetObject.needsUpdate=!0},function(f,v){this.node[this.propertyName]=f[v],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(f,v){for(var x=this.resolvedProperty,P=0,G=x.length;P!==G;++P)x[P]=f[v++]},function(f,v){for(var x=this.resolvedProperty,P=0,G=x.length;P!==G;++P)x[P]=f[v++];this.targetObject.needsUpdate=!0},function(f,v){for(var x=this.resolvedProperty,P=0,G=x.length;P!==G;++P)x[P]=f[v++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(f,v){this.resolvedProperty[this.propertyIndex]=f[v]},function(f,v){this.resolvedProperty[this.propertyIndex]=f[v],this.targetObject.needsUpdate=!0},function(f,v){this.resolvedProperty[this.propertyIndex]=f[v],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(f,v){this.resolvedProperty.fromArray(f,v)},function(f,v){this.resolvedProperty.fromArray(f,v),this.targetObject.needsUpdate=!0},function(f,v){this.resolvedProperty.fromArray(f,v),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),(ql.Composite=function(o,f,v){var x=v||ql.parseTrackName(f);this._targetGroup=o,this._bindings=o.subscribe_(f,x)}).prototype={constructor:ql.Composite,getValue:function(o,f){this.bind();var x=this._bindings[this._targetGroup.nCachedObjects_];void 0!==x&&x.getValue(o,f)},setValue:function(o,f){for(var v=this._bindings,x=this._targetGroup.nCachedObjects_,P=v.length;x!==P;++x)v[x].setValue(o,f)},bind:function(){for(var o=this._bindings,f=this._targetGroup.nCachedObjects_,v=o.length;f!==v;++f)o[f].bind()},unbind:function(){for(var o=this._bindings,f=this._targetGroup.nCachedObjects_,v=o.length;f!==v;++f)o[f].unbind()}},ql.create=function(o,f,v){return o&&o.isAnimationObjectGroup?new ql.Composite(o,f,v):new ql(o,f,v)},ql.parseTrackName=function(o){var v=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(o);if(!v)throw new Error("cannot parse trackName at all: "+o);var x={nodeName:v[2],objectName:v[3],objectIndex:v[4],propertyName:v[5],propertyIndex:v[6]};if(null===x.propertyName||0===x.propertyName.length)throw new Error("can not parse propertyName from trackName: "+o);return x},ql.findNode=function(o,f){if(!f||""===f||"root"===f||"."===f||-1===f||f===o.name||f===o.uuid)return o;if(o.skeleton){var x=function(J){for(var se=0;se<J.bones.length;se++){var Fe=J.bones[se];if(Fe.name===f)return Fe}return null}(o.skeleton);if(x)return x}if(o.children){var P=function(J){for(var se=0;se<J.length;se++){var Fe=J[se];if(Fe.name===f||Fe.uuid===f)return Fe;var Me=P(Fe.children);if(Me)return Me}return null},G=P(o.children);if(G)return G}return null},Ac.prototype={constructor:Ac,isAnimationObjectGroup:!0,add:function(o){for(var f=this._objects,v=f.length,x=this.nCachedObjects_,P=this._indicesByUUID,G=this._paths,J=this._parsedPaths,se=this._bindings,Fe=se.length,Me=0,qe=arguments.length;Me!==qe;++Me){var Qe=arguments[Me],ft=Qe.uuid,mt=P[ft],vt=void 0;if(void 0===mt){mt=v++,P[ft]=mt,f.push(Qe);for(var Kt=0,Yt=Fe;Kt!==Yt;++Kt)se[Kt].push(new ql(Qe,G[Kt],J[Kt]))}else if(mt<x){vt=f[mt];var jt=--x,cn=f[jt];for(P[cn.uuid]=mt,f[mt]=cn,P[ft]=jt,f[jt]=Qe,Kt=0,Yt=Fe;Kt!==Yt;++Kt){var fn=se[Kt],Hn=fn[jt],Ln=fn[mt];fn[mt]=Hn,void 0===Ln&&(Ln=new ql(Qe,G[Kt],J[Kt])),fn[jt]=Ln}}else f[mt]!==vt&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=x},remove:function(o){for(var f=this._objects,v=this.nCachedObjects_,x=this._indicesByUUID,P=this._bindings,G=P.length,J=0,se=arguments.length;J!==se;++J){var Fe=arguments[J],Me=Fe.uuid,qe=x[Me];if(void 0!==qe&&qe>=v){var Qe=v++,ft=f[Qe];x[ft.uuid]=qe,f[qe]=ft,x[Me]=Qe,f[Qe]=Fe;for(var mt=0,vt=G;mt!==vt;++mt){var Kt=P[mt],Yt=Kt[Qe],jt=Kt[qe];Kt[qe]=Yt,Kt[Qe]=jt}}}this.nCachedObjects_=v},uncache:function(o){for(var f=this._objects,v=f.length,x=this.nCachedObjects_,P=this._indicesByUUID,G=this._bindings,J=G.length,se=0,Fe=arguments.length;se!==Fe;++se){var Me=arguments[se],qe=Me.uuid,Qe=P[qe];if(void 0!==Qe)if(delete P[qe],Qe<x){var ft=--x,mt=f[ft],Kt=f[vt=--v];P[mt.uuid]=Qe,f[Qe]=mt,P[Kt.uuid]=ft,f[ft]=Kt,f.pop();for(var Yt=0,jt=J;Yt!==jt;++Yt){var fn=(cn=G[Yt])[ft],Hn=cn[vt];cn[Qe]=fn,cn[ft]=Hn,cn.pop()}}else{var vt;for(P[(Kt=f[vt=--v]).uuid]=Qe,f[Qe]=Kt,f.pop(),Yt=0,jt=J;Yt!==jt;++Yt){var cn;(cn=G[Yt])[Qe]=cn[vt],cn.pop()}}}this.nCachedObjects_=x},subscribe_:function(o,f){var v=this._bindingsIndicesByPath,x=v[o],P=this._bindings;if(void 0!==x)return P[x];var G=this._paths,J=this._parsedPaths,se=this._objects,Me=this.nCachedObjects_,qe=new Array(se.length);v[o]=x=P.length,G.push(o),J.push(f),P.push(qe);for(var Qe=Me,ft=se.length;Qe!==ft;++Qe)qe[Qe]=new ql(se[Qe],o,f);return qe},unsubscribe_:function(o){var f=this._bindingsIndicesByPath,v=f[o];if(void 0!==v){var x=this._paths,P=this._parsedPaths,G=this._bindings,J=G.length-1,se=G[J];f[o[J]]=v,G[v]=se,G.pop(),P[v]=P[J],P.pop(),x[v]=x[J],x.pop()}}},Ic.prototype={constructor:Ic,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(o){return this._startTime=o,this},setLoop:function(o,f){return this.loop=o,this.repetitions=f,this},setEffectiveWeight:function(o){return this.weight=o,this._effectiveWeight=this.enabled?o:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(o){return this._scheduleFading(o,0,1)},fadeOut:function(o){return this._scheduleFading(o,1,0)},crossFadeFrom:function(o,f,v){if(o.fadeOut(f),this.fadeIn(f),v){var x=this._clip.duration,P=o._clip.duration,J=x/P;o.warp(1,P/x,f),this.warp(J,1,f)}return this},crossFadeTo:function(o,f,v){return o.crossFadeFrom(this,f,v)},stopFading:function(){var o=this._weightInterpolant;return null!==o&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(o)),this},setEffectiveTimeScale:function(o){return this.timeScale=o,this._effectiveTimeScale=this.paused?0:o,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(o){return this.timeScale=this._clip.duration/o,this.stopWarping()},syncWith:function(o){return this.time=o.time,this.timeScale=o.timeScale,this.stopWarping()},halt:function(o){return this.warp(this._effectiveTimeScale,0,o)},warp:function(o,f,v){var x=this._mixer,P=x.time,G=this._timeScaleInterpolant,J=this.timeScale;null===G&&(G=x._lendControlInterpolant(),this._timeScaleInterpolant=G);var se=G.parameterPositions,Fe=G.sampleValues;return se[0]=P,se[1]=P+v,Fe[0]=o/J,Fe[1]=f/J,this},stopWarping:function(){var o=this._timeScaleInterpolant;return null!==o&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(o)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(o,f,v,x){var P=this._startTime;if(null!==P){var G=(o-P)*v;if(G<0||0===v)return;this._startTime=null,f=v*G}f*=this._updateTimeScale(o);var J=this._updateTime(f),se=this._updateWeight(o);if(se>0)for(var Fe=this._interpolants,Me=this._propertyBindings,qe=0,Qe=Fe.length;qe!==Qe;++qe)Fe[qe].evaluate(J),Me[qe].accumulate(x,se)},_updateWeight:function(o){var f=0;if(this.enabled){f=this.weight;var v=this._weightInterpolant;if(null!==v){var x=v.evaluate(o)[0];f*=x,o>v.parameterPositions[1]&&(this.stopFading(),0===x&&(this.enabled=!1))}}return this._effectiveWeight=f,f},_updateTimeScale:function(o){var f=0;if(!this.paused){f=this.timeScale;var v=this._timeScaleInterpolant;null!==v&&(f*=v.evaluate(o)[0],o>v.parameterPositions[1]&&(this.stopWarping(),0===f?this.paused=!0:this.timeScale=f))}return this._effectiveTimeScale=f,f},_updateTime:function(o){var f=this.time+o;if(0===o)return f;var v=this._clip.duration,x=this.loop,P=this._loopCount;if(x===Ci){-1===P&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(f>=v)f=v;else{if(!(f<0))break e;f=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:o<0?-1:1})}}else{var G=x===Ei;if(-1===P&&(o>=0?(P=0,this._setEndings(!0,0===this.repetitions,G)):this._setEndings(0===this.repetitions,!0,G)),f>=v||f<0){var J=Math.floor(f/v);f-=v*J,P+=Math.abs(J);var se=this.repetitions-P;if(se<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,f=o>0?v:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:o>0?1:-1});else{if(0===se){var Fe=o<0;this._setEndings(Fe,!Fe,G)}else this._setEndings(!1,!1,G);this._loopCount=P,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:J})}}if(G&&1==(1&P))return this.time=f,v-f}return this.time=f,f},_setEndings:function(o,f,v){var x=this._interpolantSettings;v?(x.endingStart=ws,x.endingEnd=ws):(x.endingStart=o?this.zeroSlopeAtStart?ws:_r:wr,x.endingEnd=f?this.zeroSlopeAtEnd?ws:_r:wr)},_scheduleFading:function(o,f,v){var x=this._mixer,P=x.time,G=this._weightInterpolant;null===G&&(G=x._lendControlInterpolant(),this._weightInterpolant=G);var J=G.parameterPositions,se=G.sampleValues;return J[0]=P,se[0]=f,J[1]=P+o,se[1]=v,this}},Object.assign(Fg.prototype,ye.prototype,{clipAction:function(o,f){var v=f||this._root,x=v.uuid,P="string"==typeof o?Bu.findByName(v,o):o,G=null!==P?P.uuid:o,J=this._actionsByClip[G],se=null;if(void 0!==J){var Fe=J.actionByRoot[x];if(void 0!==Fe)return Fe;se=J.knownActions[0],null===P&&(P=se._clip)}if(null===P)return null;var Me=new Ic(this,P,f);return this._bindAction(Me,se),this._addInactiveAction(Me,G,x),Me},existingAction:function(o,f){var v=f||this._root,x=v.uuid,P="string"==typeof o?Bu.findByName(v,o):o,J=this._actionsByClip[P?P.uuid:o];return void 0!==J&&J.actionByRoot[x]||null},stopAllAction:function(){var o=this._actions,f=this._nActiveActions,v=this._bindings,x=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var P=0;P!==f;++P)o[P].reset();for(P=0;P!==x;++P)v[P].useCount=0;return this},update:function(o){for(var f=this._actions,v=this._nActiveActions,x=this.time+=o*=this.timeScale,P=Math.sign(o),G=this._accuIndex^=1,J=0;J!==v;++J){var se=f[J];se.enabled&&se._update(x,o,P,G)}var Fe=this._bindings,Me=this._nActiveBindings;for(J=0;J!==Me;++J)Fe[J].apply(G);return this},getRoot:function(){return this._root},uncacheClip:function(o){var f=this._actions,v=o.uuid,x=this._actionsByClip,P=x[v];if(void 0!==P){for(var G=P.knownActions,J=0,se=G.length;J!==se;++J){var Fe=G[J];this._deactivateAction(Fe);var Me=Fe._cacheIndex,qe=f[f.length-1];Fe._cacheIndex=null,Fe._byClipCacheIndex=null,qe._cacheIndex=Me,f[Me]=qe,f.pop(),this._removeInactiveBindingsForAction(Fe)}delete x[v]}},uncacheRoot:function(o){var f=o.uuid,v=this._actionsByClip;for(var x in v){var G=v[x].actionByRoot[f];void 0!==G&&(this._deactivateAction(G),this._removeInactiveAction(G))}var se=this._bindingsByRootAndName[f];if(void 0!==se)for(var Fe in se){var Me=se[Fe];Me.restoreOriginalState(),this._removeInactiveBinding(Me)}},uncacheAction:function(o,f){var v=this.existingAction(o,f);null!==v&&(this._deactivateAction(v),this._removeInactiveAction(v))}}),Object.assign(Fg.prototype,{_bindAction:function(o,f){var v=o._localRoot||this._root,x=o._clip.tracks,P=x.length,G=o._propertyBindings,J=o._interpolants,se=v.uuid,Fe=this._bindingsByRootAndName,Me=Fe[se];void 0===Me&&(Fe[se]=Me={});for(var qe=0;qe!==P;++qe){var Qe=x[qe],ft=Qe.name,mt=Me[ft];if(void 0!==mt)G[qe]=mt;else{if(void 0!==(mt=G[qe])){null===mt._cacheIndex&&(++mt.referenceCount,this._addInactiveBinding(mt,se,ft));continue}++(mt=new Uc(ql.create(v,ft,f&&f._propertyBindings[qe].binding.parsedPath),Qe.ValueTypeName,Qe.getValueSize())).referenceCount,this._addInactiveBinding(mt,se,ft),G[qe]=mt}J[qe].resultBuffer=mt.buffer}},_activateAction:function(o){if(!this._isActiveAction(o)){if(null===o._cacheIndex){var f=(o._localRoot||this._root).uuid,v=o._clip.uuid,x=this._actionsByClip[v];this._bindAction(o,x&&x.knownActions[0]),this._addInactiveAction(o,v,f)}for(var P=o._propertyBindings,G=0,J=P.length;G!==J;++G){var se=P[G];0==se.useCount++&&(this._lendBinding(se),se.saveOriginalState())}this._lendAction(o)}},_deactivateAction:function(o){if(this._isActiveAction(o)){for(var f=o._propertyBindings,v=0,x=f.length;v!==x;++v){var P=f[v];0==--P.useCount&&(P.restoreOriginalState(),this._takeBackBinding(P))}this._takeBackAction(o)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var o=this;this.stats={actions:{get total(){return o._actions.length},get inUse(){return o._nActiveActions}},bindings:{get total(){return o._bindings.length},get inUse(){return o._nActiveBindings}},controlInterpolants:{get total(){return o._controlInterpolants.length},get inUse(){return o._nActiveControlInterpolants}}}},_isActiveAction:function(o){var f=o._cacheIndex;return null!==f&&f<this._nActiveActions},_addInactiveAction:function(o,f,v){var x=this._actions,P=this._actionsByClip,G=P[f];if(void 0===G)G={knownActions:[o],actionByRoot:{}},o._byClipCacheIndex=0,P[f]=G;else{var J=G.knownActions;o._byClipCacheIndex=J.length,J.push(o)}o._cacheIndex=x.length,x.push(o),G.actionByRoot[v]=o},_removeInactiveAction:function(o){var f=this._actions,v=f[f.length-1],x=o._cacheIndex;v._cacheIndex=x,f[x]=v,f.pop(),o._cacheIndex=null;var P=o._clip.uuid,G=this._actionsByClip,J=G[P],se=J.knownActions,Fe=se[se.length-1],Me=o._byClipCacheIndex;Fe._byClipCacheIndex=Me,se[Me]=Fe,se.pop(),o._byClipCacheIndex=null,delete J.actionByRoot[(f._localRoot||this._root).uuid],0===se.length&&delete G[P],this._removeInactiveBindingsForAction(o)},_removeInactiveBindingsForAction:function(o){for(var f=o._propertyBindings,v=0,x=f.length;v!==x;++v){var P=f[v];0==--P.referenceCount&&this._removeInactiveBinding(P)}},_lendAction:function(o){var f=this._actions,v=o._cacheIndex,x=this._nActiveActions++,P=f[x];o._cacheIndex=x,f[x]=o,P._cacheIndex=v,f[v]=P},_takeBackAction:function(o){var f=this._actions,v=o._cacheIndex,x=--this._nActiveActions,P=f[x];o._cacheIndex=x,f[x]=o,P._cacheIndex=v,f[v]=P},_addInactiveBinding:function(o,f,v){var x=this._bindingsByRootAndName,P=x[f],G=this._bindings;void 0===P&&(x[f]=P={}),P[v]=o,o._cacheIndex=G.length,G.push(o)},_removeInactiveBinding:function(o){var f=this._bindings,v=o.binding,x=v.rootNode.uuid,P=v.path,G=this._bindingsByRootAndName,J=G[x],se=f[f.length-1],Fe=o._cacheIndex;se._cacheIndex=Fe,f[Fe]=se,f.pop(),delete J[P];e:{for(var Me in J)break e;delete G[x]}},_lendBinding:function(o){var f=this._bindings,v=o._cacheIndex,x=this._nActiveBindings++,P=f[x];o._cacheIndex=x,f[x]=o,P._cacheIndex=v,f[v]=P},_takeBackBinding:function(o){var f=this._bindings,v=o._cacheIndex,x=--this._nActiveBindings,P=f[x];o._cacheIndex=x,f[x]=o,P._cacheIndex=v,f[v]=P},_lendControlInterpolant:function(){var o=this._controlInterpolants,f=this._nActiveControlInterpolants++,v=o[f];return void 0===v&&((v=new jf(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=f,o[f]=v),v},_takeBackControlInterpolant:function(o){var f=this._controlInterpolants,v=o.__cacheIndex,x=--this._nActiveControlInterpolants,P=f[x];o.__cacheIndex=x,f[x]=o,P.__cacheIndex=v,f[v]=P},_controlInterpolantsResultBuffer:new Float32Array(1)}),gv.prototype.clone=function(){return new gv(void 0===this.value.clone?this.value:this.value.clone())},(Jh.prototype=Object.create(Bs.prototype)).constructor=Jh,Jh.prototype.isInstancedBufferGeometry=!0,Jh.prototype.addGroup=function(o,f,v){this.groups.push({start:o,count:f,materialIndex:v})},Jh.prototype.copy=function(o){var f=o.index;null!==f&&this.setIndex(f.clone());var v=o.attributes;for(var x in v)this.addAttribute(x,v[x].clone());for(var G=o.groups,J=0,se=G.length;J<se;J++){var Fe=G[J];this.addGroup(Fe.start,Fe.count,Fe.materialIndex)}return this},wp.prototype={constructor:wp,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(o,f){return this.data.array[o*this.data.stride+this.offset]=f,this},setY:function(o,f){return this.data.array[o*this.data.stride+this.offset+1]=f,this},setZ:function(o,f){return this.data.array[o*this.data.stride+this.offset+2]=f,this},setW:function(o,f){return this.data.array[o*this.data.stride+this.offset+3]=f,this},getX:function(o){return this.data.array[o*this.data.stride+this.offset]},getY:function(o){return this.data.array[o*this.data.stride+this.offset+1]},getZ:function(o){return this.data.array[o*this.data.stride+this.offset+2]},getW:function(o){return this.data.array[o*this.data.stride+this.offset+3]},setXY:function(o,f,v){return this.data.array[(o=o*this.data.stride+this.offset)+0]=f,this.data.array[o+1]=v,this},setXYZ:function(o,f,v,x){return this.data.array[(o=o*this.data.stride+this.offset)+0]=f,this.data.array[o+1]=v,this.data.array[o+2]=x,this},setXYZW:function(o,f,v,x,P){return this.data.array[(o=o*this.data.stride+this.offset)+0]=f,this.data.array[o+1]=v,this.data.array[o+2]=x,this.data.array[o+3]=P,this}},df.prototype={constructor:df,isInterleavedBuffer:!0,set needsUpdate(o){!0===o&&this.version++},setArray:function(o){if(Array.isArray(o))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==o?o.length/this.stride:0,this.array=o},setDynamic:function(o){return this.dynamic=o,this},copy:function(o){return this.array=new o.array.constructor(o.array),this.count=o.count,this.stride=o.stride,this.dynamic=o.dynamic,this},copyAt:function(o,f,v){o*=this.stride,v*=f.stride;for(var x=0,P=this.stride;x<P;x++)this.array[o+x]=f.array[v+x];return this},set:function(o,f){return void 0===f&&(f=0),this.array.set(o,f),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(o){return this.onUploadCallback=o,this}},(bd.prototype=Object.create(df.prototype)).constructor=bd,bd.prototype.isInstancedInterleavedBuffer=!0,bd.prototype.copy=function(o){return df.prototype.copy.call(this,o),this.meshPerAttribute=o.meshPerAttribute,this},(Yf.prototype=Object.create(bs.prototype)).constructor=Yf,Yf.prototype.isInstancedBufferAttribute=!0,Yf.prototype.copy=function(o){return bs.prototype.copy.call(this,o),this.meshPerAttribute=o.meshPerAttribute,this},uh.prototype={constructor:uh,linePrecision:1,set:function(o,f){this.ray.set(o,f)},setFromCamera:function(o,f){f&&f.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(f.matrixWorld),this.ray.direction.set(o.x,o.y,.5).unproject(f).sub(this.ray.origin).normalize()):f&&f.isOrthographicCamera?(this.ray.origin.set(o.x,o.y,(f.near+f.far)/(f.near-f.far)).unproject(f),this.ray.direction.set(0,0,-1).transformDirection(f.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(o,f){var v=[];return Kp(o,this,v,f),v.sort(ff),v},intersectObjects:function(o,f){var v=[];if(!1===Array.isArray(o))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),v;for(var x=0,P=o.length;x<P;x++)Kp(o[x],this,v,f);return v.sort(ff),v}},mv.prototype={constructor:mv,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var o=0;if(this.autoStart&&!this.running&&this.start(),this.running){var f=(performance||Date).now();o=(f-this.oldTime)/1e3,this.oldTime=f,this.elapsedTime+=o}return o}},Pm.prototype={constructor:Pm,set:function(o,f,v){return this.radius=o,this.phi=f,this.theta=v,this},clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.radius=o.radius,this.phi=o.phi,this.theta=o.theta,this},makeSafe:function(){var o=1e-6;return this.phi=Math.max(o,Math.min(Math.PI-o,this.phi)),this},setFromVector3:function(o){return this.radius=o.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(o.x,o.z),this.phi=Math.acos(An.clamp(o.y/this.radius,-1,1))),this}},Eu.prototype={constructor:Eu,set:function(o,f,v){return this.radius=o,this.theta=f,this.y=v,this},clone:function(){return(new this.constructor).copy(this)},copy:function(o){return this.radius=o.radius,this.theta=o.theta,this.y=o.y,this},setFromVector3:function(o){return this.radius=Math.sqrt(o.x*o.x+o.z*o.z),this.theta=Math.atan2(o.x,o.z),this.y=o.y,this}},(wl.prototype=Object.create(Bl.prototype)).constructor=wl,wl.prototype.createAnimation=function(o,f,v,x){var P={start:f,end:v,length:v-f+1,fps:x,duration:(v-f)/x,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[o]=P,this.animationsList.push(P)},wl.prototype.autoCreateAnimations=function(o){for(var v,f=/([a-z]+)_?(\d+)/i,x={},P=this.geometry,G=0,J=P.morphTargets.length;G<J;G++){var Fe=P.morphTargets[G].name.match(f);Fe&&Fe.length>1&&(x[Me=Fe[1]]||(x[Me]={start:1/0,end:-1/0}),G<(qe=x[Me]).start&&(qe.start=G),G>qe.end&&(qe.end=G),v||(v=Me))}for(var Me in x){var qe;this.createAnimation(Me,(qe=x[Me]).start,qe.end,o)}this.firstAnimation=v},wl.prototype.setAnimationDirectionForward=function(o){var f=this.animationsMap[o];f&&(f.direction=1,f.directionBackwards=!1)},wl.prototype.setAnimationDirectionBackward=function(o){var f=this.animationsMap[o];f&&(f.direction=-1,f.directionBackwards=!0)},wl.prototype.setAnimationFPS=function(o,f){var v=this.animationsMap[o];v&&(v.fps=f,v.duration=(v.end-v.start)/v.fps)},wl.prototype.setAnimationDuration=function(o,f){var v=this.animationsMap[o];v&&(v.duration=f,v.fps=(v.end-v.start)/v.duration)},wl.prototype.setAnimationWeight=function(o,f){var v=this.animationsMap[o];v&&(v.weight=f)},wl.prototype.setAnimationTime=function(o,f){var v=this.animationsMap[o];v&&(v.time=f)},wl.prototype.getAnimationTime=function(o){var f=0,v=this.animationsMap[o];return v&&(f=v.time),f},wl.prototype.getAnimationDuration=function(o){var f=-1,v=this.animationsMap[o];return v&&(f=v.duration),f},wl.prototype.playAnimation=function(o){var f=this.animationsMap[o];f?(f.time=0,f.active=!0):console.warn("THREE.MorphBlendMesh: animation["+o+"] undefined in .playAnimation()")},wl.prototype.stopAnimation=function(o){var f=this.animationsMap[o];f&&(f.active=!1)},wl.prototype.update=function(o){for(var f=0,v=this.animationsList.length;f<v;f++){var x=this.animationsList[f];if(x.active){var P=x.duration/x.length;x.time+=x.direction*o,x.mirroredLoop?(x.time>x.duration||x.time<0)&&(x.direction*=-1,x.time>x.duration&&(x.time=x.duration,x.directionBackwards=!0),x.time<0&&(x.time=0,x.directionBackwards=!1)):(x.time=x.time%x.duration,x.time<0&&(x.time+=x.duration));var G=x.start+An.clamp(Math.floor(x.time/P),0,x.length-1),J=x.weight;G!==x.currentFrame&&(this.morphTargetInfluences[x.lastFrame]=0,this.morphTargetInfluences[x.currentFrame]=1*J,this.morphTargetInfluences[G]=0,x.lastFrame=x.currentFrame,x.currentFrame=G);var se=x.time%P/P;x.directionBackwards&&(se=1-se),x.currentFrame!==x.lastFrame?(this.morphTargetInfluences[x.currentFrame]=se*J,this.morphTargetInfluences[x.lastFrame]=(1-se)*J):this.morphTargetInfluences[x.currentFrame]=J}}},(xp.prototype=Object.create(Es.prototype)).constructor=xp,xp.prototype.isImmediateRenderObject=!0,(Ng.prototype=Object.create(Lo.prototype)).constructor=Ng,Ng.prototype.update=function(){var o=new Bn,f=new Bn,v=new vn;return function(){var P=["a","b","c"];this.object.updateMatrixWorld(!0),v.getNormalMatrix(this.object.matrixWorld);var G=this.object.matrixWorld,J=this.geometry.attributes.position,se=this.object.geometry;if(se&&se.isGeometry)for(var Fe=se.vertices,Me=se.faces,qe=0,Qe=0,ft=Me.length;Qe<ft;Qe++)for(var mt=Me[Qe],vt=0,Kt=mt.vertexNormals.length;vt<Kt;vt++){var jt=mt.vertexNormals[vt];o.copy(Fe[mt[P[vt]]]).applyMatrix4(G),f.copy(jt).applyMatrix3(v).normalize().multiplyScalar(this.size).add(o),J.setXYZ(qe,o.x,o.y,o.z),J.setXYZ(qe+=1,f.x,f.y,f.z),qe+=1}else if(se&&se.isBufferGeometry){var cn=se.attributes.position,fn=se.attributes.normal;for(qe=0,vt=0,Kt=cn.count;vt<Kt;vt++)o.set(cn.getX(vt),cn.getY(vt),cn.getZ(vt)).applyMatrix4(G),f.set(fn.getX(vt),fn.getY(vt),fn.getZ(vt)),f.applyMatrix3(v).normalize().multiplyScalar(this.size).add(o),J.setXYZ(qe,o.x,o.y,o.z),J.setXYZ(qe+=1,f.x,f.y,f.z),qe+=1}return J.needsUpdate=!0,this}}(),(zd.prototype=Object.create(Es.prototype)).constructor=zd,zd.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},zd.prototype.update=function(){var o=new Bn,f=new Bn;return function(){var x=this.light.distance?this.light.distance:1e3,P=x*Math.tan(this.light.angle);this.cone.scale.set(P,P,x),o.setFromMatrixPosition(this.light.matrixWorld),f.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(f.sub(o)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),(Vd.prototype=Object.create(Lo.prototype)).constructor=Vd,Vd.prototype.getBoneList=function(o){var f=[];o&&o.isBone&&f.push(o);for(var v=0;v<o.children.length;v++)f.push.apply(f,this.getBoneList(o.children[v]));return f},Vd.prototype.update=function(){var o=new Bn,f=new Zs,v=new Zs;return function(){var P=this.geometry,G=P.getAttribute("position");v.getInverse(this.root.matrixWorld);for(var J=0,se=0;J<this.bones.length;J++){var Fe=this.bones[J];Fe.parent&&Fe.parent.isBone&&(f.multiplyMatrices(v,Fe.matrixWorld),o.setFromMatrixPosition(f),G.setXYZ(se,o.x,o.y,o.z),f.multiplyMatrices(v,Fe.parent.matrixWorld),o.setFromMatrixPosition(f),G.setXYZ(se+1,o.x,o.y,o.z),se+=2)}P.getAttribute("position").needsUpdate=!0}}(),(pf.prototype=Object.create(Bl.prototype)).constructor=pf,pf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},pf.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},(Kf.prototype=Object.create(Es.prototype)).constructor=Kf,Kf.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},Kf.prototype.update=function(){var o=new Bn,f=new Bn;return function(){var x=this.children[0],P=this.children[1];if(this.light.target){o.setFromMatrixPosition(this.light.matrixWorld),f.setFromMatrixPosition(this.light.target.matrixWorld);var G=f.clone().sub(o);x.lookAt(G),P.lookAt(G)}x.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),P.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var J=.5*this.light.width,se=.5*this.light.height,Fe=x.geometry.getAttribute("position"),Me=Fe.array;Me[0]=J,Me[1]=-se,Me[2]=0,Me[3]=J,Me[4]=se,Me[5]=0,Me[6]=-J,Me[7]=se,Me[8]=0,Me[9]=-J,Me[10]=se,Me[11]=0,Me[12]=-J,Me[13]=-se,Me[14]=0,Me[15]=J,Me[16]=-se,Me[17]=0,Fe.needsUpdate=!0}}(),(gf.prototype=Object.create(Es.prototype)).constructor=gf,gf.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},gf.prototype.update=function(){var o=new Bn,f=new na,v=new na;return function(){var P=this.children[0],G=P.geometry.getAttribute("color");f.copy(this.light.color).multiplyScalar(this.light.intensity),v.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var J=0,se=G.count;J<se;J++){var Fe=J<se/2?f:v;G.setXYZ(J,Fe.r,Fe.g,Fe.b)}P.lookAt(o.setFromMatrixPosition(this.light.matrixWorld).negate()),G.needsUpdate=!0}}(),(Bg.prototype=Object.create(Lo.prototype)).constructor=Bg,(ed.prototype=Object.create(Lo.prototype)).constructor=ed,(Ud.prototype=Object.create(Lo.prototype)).constructor=Ud,Ud.prototype.update=function(){var o=new Bn,f=new Bn,v=new vn;return function(){this.object.updateMatrixWorld(!0),v.getNormalMatrix(this.object.matrixWorld);for(var P=this.object.matrixWorld,G=this.geometry.attributes.position,J=this.object.geometry,se=J.vertices,Fe=J.faces,Me=0,qe=0,Qe=Fe.length;qe<Qe;qe++){var ft=Fe[qe],mt=ft.normal;o.copy(se[ft.a]).add(se[ft.b]).add(se[ft.c]).divideScalar(3).applyMatrix4(P),f.copy(mt).applyMatrix3(v).normalize().multiplyScalar(this.size).add(o),G.setXYZ(Me,o.x,o.y,o.z),G.setXYZ(Me+=1,f.x,f.y,f.z),Me+=1}return G.needsUpdate=!0,this}}(),(zg.prototype=Object.create(Es.prototype)).constructor=zg,zg.prototype.dispose=function(){var o=this.children[0],f=this.children[1];o.geometry.dispose(),o.material.dispose(),f.geometry.dispose(),f.material.dispose()},zg.prototype.update=function(){var o=new Bn,f=new Bn,v=new Bn;return function(){o.setFromMatrixPosition(this.light.matrixWorld),f.setFromMatrixPosition(this.light.target.matrixWorld),v.subVectors(f,o);var P=this.children[0],G=this.children[1];P.lookAt(v),P.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),G.lookAt(v),G.scale.z=v.length()}}(),(Lm.prototype=Object.create(Lo.prototype)).constructor=Lm,Lm.prototype.update=function(){var o,f,v=new Bn,x=new tu;function P(G,J,se,Fe){v.set(J,se,Fe).unproject(x);var Me=f[G];if(void 0!==Me)for(var qe=o.getAttribute("position"),Qe=0,ft=Me.length;Qe<ft;Qe++)qe.setXYZ(Me[Qe],v.x,v.y,v.z)}return function(){o=this.geometry,f=this.pointMap,x.projectionMatrix.copy(this.camera.projectionMatrix),P("c",0,0,-1),P("t",0,0,1),P("n1",-1,-1,-1),P("n2",1,-1,-1),P("n3",-1,1,-1),P("n4",1,1,-1),P("f1",-1,-1,1),P("f2",1,-1,1),P("f3",-1,1,1),P("f4",1,1,1),P("u1",.7,1.1,-1),P("u2",-.7,1.1,-1),P("u3",0,2,-1),P("cf1",-1,0,1),P("cf2",1,0,1),P("cf3",0,-1,1),P("cf4",0,1,1),P("cn1",-1,0,-1),P("cn2",1,0,-1),P("cn3",0,-1,-1),P("cn4",0,1,-1),o.getAttribute("position").needsUpdate=!0}}(),(Vg.prototype=Object.create(Lo.prototype)).constructor=Vg,Vg.prototype.update=function(){var o=new Na;return function(v){if(v&&v.isBox3?o.copy(v):o.setFromObject(v),!o.isEmpty()){var x=o.min,P=o.max,G=this.geometry.attributes.position,J=G.array;J[0]=P.x,J[1]=P.y,J[2]=P.z,J[3]=x.x,J[4]=P.y,J[5]=P.z,J[6]=x.x,J[7]=x.y,J[8]=P.z,J[9]=P.x,J[10]=x.y,J[11]=P.z,J[12]=P.x,J[13]=P.y,J[14]=x.z,J[15]=x.x,J[16]=P.y,J[17]=x.z,J[18]=x.x,J[19]=x.y,J[20]=x.z,J[21]=P.x,J[22]=x.y,J[23]=x.z,G.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Ug=new Bs;Ug.addAttribute("position",new ga([0,0,0,0,1,0],3));var n_=new vp(0,.5,1,5,1);function Hc(o,f,v,x,P,G){Es.call(this),void 0===x&&(x=16776960),void 0===v&&(v=1),void 0===P&&(P=.2*v),void 0===G&&(G=.2*P),this.position.copy(f),this.line=new yh(Ug,new mu({color:x})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bl(n_,new eu({color:x})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(o),this.setLength(v,P,G)}function Ap(o){var f=[0,0,0,o=o||1,0,0,0,0,0,0,o,0,0,0,0,0,0,o],x=new Bs;x.addAttribute("position",new ga(f,3)),x.addAttribute("color",new ga([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var P=new mu({vertexColors:L});Lo.call(this,x,P)}n_.translate(0,-.5,0),(Hc.prototype=Object.create(Es.prototype)).constructor=Hc,Hc.prototype.setDirection=function(){var f,o=new Bn;return function(x){x.y>.99999?this.quaternion.set(0,0,0,1):x.y<-.99999?this.quaternion.set(1,0,0,0):(o.set(x.z,0,-x.x).normalize(),f=Math.acos(x.y),this.quaternion.setFromAxisAngle(o,f))}}(),Hc.prototype.setLength=function(o,f,v){void 0===f&&(f=.2*o),void 0===v&&(v=.2*f),this.line.scale.set(1,Math.max(0,o-f),1),this.line.updateMatrix(),this.cone.scale.set(v,f,v),this.cone.position.y=o,this.cone.updateMatrix()},Hc.prototype.setColor=function(o){this.line.material.color.copy(o),this.cone.material.color.copy(o)},(Ap.prototype=Object.create(Lo.prototype)).constructor=Ap;var vv=function(){var o=new Bn,f=new P,v=new P,x=new P;function P(){}return P.prototype.init=function(G,J,se,Fe){this.c0=G,this.c1=se,this.c2=-3*G+3*J-2*se-Fe,this.c3=2*G-2*J+se+Fe},P.prototype.initNonuniformCatmullRom=function(G,J,se,Fe,Me,qe,Qe){var ft=(J-G)/Me-(se-G)/(Me+qe)+(se-J)/qe,mt=(se-J)/qe-(Fe-J)/(qe+Qe)+(Fe-se)/Qe;this.init(J,se,ft*=qe,mt*=qe)},P.prototype.initCatmullRom=function(G,J,se,Fe,Me){this.init(J,se,Me*(se-G),Me*(Fe-J))},P.prototype.calc=function(G){var J=G*G;return this.c0+this.c1*G+this.c2*J+this.c3*(J*G)},Zu.create(function(G){this.points=G||[],this.closed=!1},function(G){var se,Fe,Me,qe,Qe,ft,mt,vt,J=this.points;if((qe=J.length)<2&&console.log("duh, you need at least 2 points"),Me=(se=(qe-(this.closed?0:1))*G)-(Fe=Math.floor(se)),this.closed?Fe+=Fe>0?0:(Math.floor(Math.abs(Fe)/J.length)+1)*J.length:0===Me&&Fe===qe-1&&(Fe=qe-2,Me=1),this.closed||Fe>0?Qe=J[(Fe-1)%qe]:(o.subVectors(J[0],J[1]).add(J[0]),Qe=o),ft=J[Fe%qe],mt=J[(Fe+1)%qe],this.closed||Fe+2<qe?vt=J[(Fe+2)%qe]:(o.subVectors(J[qe-1],J[qe-2]).add(J[qe-1]),vt=o),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var Kt="chordal"===this.type?.5:.25,Yt=Math.pow(Qe.distanceToSquared(ft),Kt),jt=Math.pow(ft.distanceToSquared(mt),Kt),cn=Math.pow(mt.distanceToSquared(vt),Kt);jt<1e-4&&(jt=1),Yt<1e-4&&(Yt=jt),cn<1e-4&&(cn=jt),f.initNonuniformCatmullRom(Qe.x,ft.x,mt.x,vt.x,Yt,jt,cn),v.initNonuniformCatmullRom(Qe.y,ft.y,mt.y,vt.y,Yt,jt,cn),x.initNonuniformCatmullRom(Qe.z,ft.z,mt.z,vt.z,Yt,jt,cn)}else if("catmullrom"===this.type){var fn=void 0!==this.tension?this.tension:.5;f.initCatmullRom(Qe.x,ft.x,mt.x,vt.x,fn),v.initCatmullRom(Qe.y,ft.y,mt.y,vt.y,fn),x.initCatmullRom(Qe.z,ft.z,mt.z,vt.z,fn)}return new Bn(f.calc(Me),v.calc(Me),x.calc(Me))})}(),ty=Zu.create(function(o){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===o?[]:o},function(o){var f=this.points,v=(f.length-1)*o,x=Math.floor(v),P=v-x,G=f[0==x?x:x-1],J=f[x],se=f[x>f.length-2?f.length-1:x+1],Fe=f[x>f.length-3?f.length-1:x+2],Me=oc.interpolate;return new Bn(Me(G.x,J.x,se.x,Fe.x,P),Me(G.y,J.y,se.y,Fe.y,P),Me(G.z,J.z,se.z,Fe.z,P))}),ny=Zu.create(function(o,f,v,x){this.v0=o,this.v1=f,this.v2=v,this.v3=x},function(o){var f=Gl.b3;return new Bn(f(o,this.v0.x,this.v1.x,this.v2.x,this.v3.x),f(o,this.v0.y,this.v1.y,this.v2.y,this.v3.y),f(o,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),km=Zu.create(function(o,f,v){this.v0=o,this.v1=f,this.v2=v},function(o){var f=Gl.b2;return new Bn(f(o,this.v0.x,this.v1.x,this.v2.x),f(o,this.v0.y,this.v1.y,this.v2.y),f(o,this.v0.z,this.v1.z,this.v2.z))}),Ab=Zu.create(function(o,f){this.v1=o,this.v2=f},function(o){if(1===o)return this.v2.clone();var f=new Bn;return f.subVectors(this.v2,this.v1),f.multiplyScalar(o),f.add(this.v1),f});function Zp(o,f,v,x,P,G){cf.call(this,o,f,v,v,x,P,G)}(Zp.prototype=Object.create(cf.prototype)).constructor=Zp;var _u={createMultiMaterialObject:function(o,f){for(var v=new zp,x=0,P=f.length;x<P;x++)v.add(new Bl(o,f[x]));return v},detach:function(o,f,v){o.applyMatrix(f.matrixWorld),f.remove(o),v.add(o)},attach:function(o,f,v){var x=new Zs;x.getInverse(v.matrixWorld),o.applyMatrix(x),f.remove(o),v.add(o)}};function _v(o,f,v,x,P,G,J){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Yo(o,f,v,P,G,J)}var Ip=0,i_=1;function Ib(o){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new bh(o)}function iy(o,f){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ja(o,f)}function ry(o){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new _h(o)}function Jy(o,f){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ja(o,f)}function e0(o){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new zc(o)}function t0(o){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new zc(o)}function sy(o){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new zc(o)}function yv(o,f,v){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Bn(o,f,v)}function r_(o,f){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new bs(o,f).setDynamic(!0)}function Ih(o,f){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Md(o,f)}function n0(o,f){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Au(o,f)}function Dl(o,f){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Rf(o,f)}function zl(o,f){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Bp(o,f)}function s_(o,f){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Of(o,f)}function Hd(o,f){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new cp(o,f)}function a_(o,f){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Wh(o,f)}function ay(o,f){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ga(o,f)}function r0(o,f){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Nc(o,f)}function bv(o){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),vv.call(this,o),this.type="catmullrom",this.closed=!0}function oy(o,f){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Vg(o,f)}function s0(o,f){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Lo(new Su(o.geometry),new mu({color:void 0!==f?f:16777215}))}function Sb(o,f){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Lo(new pd(o.geometry),new mu({color:void 0!==f?f:16777215}))}function Zf(o){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Vo(o)}bv.prototype=Object.create(vv.prototype),Bg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(tf.prototype,{center:function(o){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(o)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(o){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(o)},size:function(o){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(o)}}),Object.assign(Na.prototype,{center:function(o){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(o)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(o){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(o)},isIntersectionSphere:function(o){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(o)},size:function(o){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(o)}}),qu.prototype.center=function(o){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(o)},An.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(vn.prototype,{flattenToArrayOffset:function(o,f){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(o,f)},multiplyVector3:function(o){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),o.applyMatrix3(this)},multiplyVector3Array:function(o){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(o)},applyToBuffer:function(o,f,v){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(o)}}),Object.assign(Zs.prototype,{extractPosition:function(o){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(o)},flattenToArrayOffset:function(o,f){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(o,f)},getPosition:function(){var o;return function(){return void 0===o&&(o=new Bn),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),o.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(o){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(o)},multiplyVector3:function(o){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),o.applyProjection(this)},multiplyVector4:function(o){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),o.applyMatrix4(this)},multiplyVector3Array:function(o){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(o)},rotateAxis:function(o){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),o.transformDirection(this)},crossVector:function(o){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),o.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(o,f,v){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(o)}}),ln.prototype.isIntersectionLine=function(o){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(o)},to.prototype.multiplyVector3=function(o){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),o.applyQuaternion(this)},Object.assign(_l.prototype,{isIntersectionBox:function(o){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(o)},isIntersectionPlane:function(o){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(o)},isIntersectionSphere:function(o){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(o)}}),Object.assign(Qh.prototype,{extrude:function(o){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new oh(this,o)},makeGeometry:function(o){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Pg(this,o)}}),Object.assign(Bn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(o){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(o)},getScaleFromMatrix:function(o){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(o)},getColumnFromMatrix:function(o,f){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(f,o)}}),Ba.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(Es.prototype,{getChildByName:function(o){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(o)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(o,f){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(f,o)}}),Object.defineProperties(Es.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(o){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=o}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(bl.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),ku.prototype.setLens=function(o,f){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==f&&(this.filmGauge=f),this.setFocalLength(o)},Object.defineProperties(po.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(o){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=o}},shadowCameraLeft:{set:function(o){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=o}},shadowCameraRight:{set:function(o){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=o}},shadowCameraTop:{set:function(o){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=o}},shadowCameraBottom:{set:function(o){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=o}},shadowCameraNear:{set:function(o){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=o}},shadowCameraFar:{set:function(o){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=o}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(o){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=o}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(o){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=o}},shadowMapHeight:{set:function(o){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=o}}}),Object.defineProperties(bs.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Bs.prototype,{addIndex:function(o){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(o)},addDrawCall:function(o,f,v){void 0!==v&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(o,f)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Bs.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(gv.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(lo.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new na}}}),Object.defineProperties(Ou.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(sh.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(o){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=o}}}),ye.prototype=Object.assign(Object.create({constructor:ye,apply:function(o){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(o,this)}}),ye.prototype),Object.assign(zf.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(o){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(o)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(zf.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(o){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=o}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(o){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=o}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(o){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=o}}}),Object.defineProperties(zo.prototype,{cullFace:{get:function(){return this.renderReverseSided?V:ie},set:function(o){var f=o!==ie;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+f+"."),this.renderReverseSided=f}}}),Object.defineProperties(Ys.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(o){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=o}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(o){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=o}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(o){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=o}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(o){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=o}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(o){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=o}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(o){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=o}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(o){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=o}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(o){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=o}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(o){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=o}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(o){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=o}}}),yd.prototype.load=function(o){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var f=this;return(new Rg).load(o,function(x){f.setBuffer(x)}),this},pv.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var Rm={merge:function(o,f,v){var x;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),f.isMesh&&(f.matrixAutoUpdate&&f.updateMatrix(),x=f.matrix,f=f.geometry),o.merge(f,x,v)},center:function(o){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),o.center()}},o_={crossOrigin:void 0,loadTexture:function(o,f,v,x){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var P=new Fd;P.setCrossOrigin(this.crossOrigin);var G=P.load(o,v,void 0,x);return f&&(G.mapping=f),G},loadTextureCube:function(o,f,v,x){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var P=new cv;P.setCrossOrigin(this.crossOrigin);var G=P.load(o,v,void 0,x);return f&&(G.mapping=f),G},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function ly(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(o,f){console.warn("THREE.Projector: .projectVector() is now vector.project()."),o.project(f)},this.unprojectVector=function(o,f){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),o.unproject(f)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function uy(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}},2944:function(yt,it,ae){var ye=typeof global<"u"&&global||typeof self<"u"&&self||window,j=Function.prototype.apply;function oe(re,ie){this._id=re,this._clearFn=ie}it.setTimeout=function(){return new oe(j.call(setTimeout,ye,arguments),clearTimeout)},it.setInterval=function(){return new oe(j.call(setInterval,ye,arguments),clearInterval)},it.clearTimeout=it.clearInterval=function(re){re&&re.close()},oe.prototype.unref=oe.prototype.ref=function(){},oe.prototype.close=function(){this._clearFn.call(ye,this._id)},it.enroll=function(re,ie){clearTimeout(re._idleTimeoutId),re._idleTimeout=ie},it.unenroll=function(re){clearTimeout(re._idleTimeoutId),re._idleTimeout=-1},it._unrefActive=it.active=function(re){clearTimeout(re._idleTimeoutId);var ie=re._idleTimeout;ie>=0&&(re._idleTimeoutId=setTimeout(function(){re._onTimeout&&re._onTimeout()},ie))},ae(6563),it.setImmediate=typeof self<"u"&&self.setImmediate||typeof global<"u"&&global.setImmediate||this&&this.setImmediate,it.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof global<"u"&&global.clearImmediate||this&&this.clearImmediate},9699:yt=>{yt.exports=/[\0-\x1F\x7F-\x9F]/},9127:yt=>{yt.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},6020:yt=>{yt.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},5450:yt=>{yt.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},9315:(yt,it,ae)=>{"use strict";it.Any=ae(1129),it.Cc=ae(9699),it.Cf=ae(9127),it.P=ae(6020),it.Z=ae(5450)},1129:yt=>{yt.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},3532:yt=>{function ae(ye){try{if(!global.localStorage)return!1}catch{return!1}var j=global.localStorage[ye];return null!=j&&"true"===String(j).toLowerCase()}yt.exports=function it(ye,j){if(ae("noDeprecation"))return ye;var oe=!1;return function re(){if(!oe){if(ae("throwDeprecation"))throw new Error(j);ae("traceDeprecation")?console.trace(j):console.warn(j),oe=!0}return ye.apply(this,arguments)}}},4922:function(yt,it){(function(){"use strict";it.stripBOM=function(ae){return"\ufeff"===ae[0]?ae.substring(1):ae}}).call(this)},4032:function(yt,it,ae){(function(){"use strict";var ye,j,oe,re,ie,V={}.hasOwnProperty;ye=ae(7904),j=ae(7067).defaults,re=function(K){return"string"==typeof K&&(K.indexOf("&")>=0||K.indexOf(">")>=0||K.indexOf("<")>=0)},ie=function(K){return"<![CDATA["+oe(K)+"]]>"},oe=function(K){return K.replace("]]>","]]]]><![CDATA[>")},it.Builder=function(){function K(q){var le,Te;for(le in this.options={},Te=j[.2])!V.call(Te,le)||(this.options[le]=Te[le]);for(le in q)!V.call(q,le)||(this.options[le]=q[le])}return K.prototype.buildObject=function(q){var le,Te,De,xe,_e,Q;return le=this.options.attrkey,Te=this.options.charkey,1===Object.keys(q).length&&this.options.rootName===j[.2].rootName?q=q[_e=Object.keys(q)[0]]:_e=this.options.rootName,Q=this,De=function(Re,Le){var Ve,Ae,Se,L,ee;if("object"!=typeof Le)Q.options.cdata&&re(Le)?Re.raw(ie(Le)):Re.txt(Le);else if(Array.isArray(Le)){for(L in Le)if(V.call(Le,L))for(ee in Ae=Le[L])Se=Ae[ee],Re=De(Re.ele(ee),Se).up()}else for(ee in Le)if(V.call(Le,ee))if(Ae=Le[ee],ee===le){if("object"==typeof Ae)for(Ve in Ae)Re=Re.att(Ve,Ae[Ve])}else if(ee===Te)Re=Q.options.cdata&&re(Ae)?Re.raw(ie(Ae)):Re.txt(Ae);else if(Array.isArray(Ae))for(L in Ae)!V.call(Ae,L)||(Re="string"==typeof(Se=Ae[L])?Q.options.cdata&&re(Se)?Re.ele(ee).raw(ie(Se)).up():Re.ele(ee,Se).up():De(Re.ele(ee),Se).up());else"object"==typeof Ae?Re=De(Re.ele(ee),Ae).up():"string"==typeof Ae&&Q.options.cdata&&re(Ae)?Re=Re.ele(ee).raw(ie(Ae)).up():(null==Ae&&(Ae=""),Re=Re.ele(ee,Ae.toString()).up());return Re},xe=ye.create(_e,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),De(xe,q).end(this.options.renderOpts)},K}()}).call(this)},7067:function(yt,it){(function(){it.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},2238:function(yt,it,ae){(function(){"use strict";var ye,j,oe,re,ie,V,K,q,le=function(xe,_e){return function(){return xe.apply(_e,arguments)}},De={}.hasOwnProperty;K=ae(1503),oe=ae(9069),ye=ae(4922),V=ae(3749),q=ae(2944).setImmediate,j=ae(7067).defaults,re=function(xe){return"object"==typeof xe&&null!=xe&&0===Object.keys(xe).length},ie=function(xe,_e,Q){var Re,Le;for(Re=0,Le=xe.length;Re<Le;Re++)_e=(0,xe[Re])(_e,Q);return _e},it.Parser=function(xe){function _e(Q){var Re,Le;if(this.parseStringPromise=le(this.parseStringPromise,this),this.parseString=le(this.parseString,this),this.reset=le(this.reset,this),this.assignOrPush=le(this.assignOrPush,this),this.processAsync=le(this.processAsync,this),!(this instanceof it.Parser))return new it.Parser(Q);for(Re in this.options={},Le=j[.2])!De.call(Le,Re)||(this.options[Re]=Le[Re]);for(Re in Q)!De.call(Q,Re)||(this.options[Re]=Q[Re]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(V.normalize)),this.reset()}return function(xe,_e){for(var Q in _e)De.call(_e,Q)&&(xe[Q]=_e[Q]);function Re(){this.constructor=xe}Re.prototype=_e.prototype,xe.prototype=new Re,xe.__super__=_e.prototype}(_e,xe),_e.prototype.processAsync=function(){var Q,Re;try{return this.remaining.length<=this.options.chunkSize?(Q=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(Q),this.saxParser.close()):(Q=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(Q),q(this.processAsync))}catch(Le){if(Re=Le,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(Re)}},_e.prototype.assignOrPush=function(Q,Re,Le){return Re in Q?(Q[Re]instanceof Array||(Q[Re]=[Q[Re]]),Q[Re].push(Le)):Q[Re]=this.options.explicitArray?[Le]:Le},_e.prototype.reset=function(){var Q,Re,Le,Ve,Ae;return this.removeAllListeners(),this.saxParser=K.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(Ae=this,function(Se){if(Ae.saxParser.resume(),!Ae.saxParser.errThrown)return Ae.saxParser.errThrown=!0,Ae.emit("error",Se)}),this.saxParser.onend=function(Ae){return function(){if(!Ae.saxParser.ended)return Ae.saxParser.ended=!0,Ae.emit("end",Ae.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,Ve=[],Q=this.options.attrkey,Re=this.options.charkey,this.saxParser.onopentag=function(Ae){return function(Se){var L,ee,Ce,ze,dt;if((Ce={})[Re]="",!Ae.options.ignoreAttrs)for(L in dt=Se.attributes)!De.call(dt,L)||(!(Q in Ce)&&!Ae.options.mergeAttrs&&(Ce[Q]={}),ee=Ae.options.attrValueProcessors?ie(Ae.options.attrValueProcessors,Se.attributes[L],L):Se.attributes[L],ze=Ae.options.attrNameProcessors?ie(Ae.options.attrNameProcessors,L):L,Ae.options.mergeAttrs?Ae.assignOrPush(Ce,ze,ee):Ce[Q][ze]=ee);return Ce["#name"]=Ae.options.tagNameProcessors?ie(Ae.options.tagNameProcessors,Se.name):Se.name,Ae.options.xmlns&&(Ce[Ae.options.xmlnskey]={uri:Se.uri,local:Se.local}),Ve.push(Ce)}}(this),this.saxParser.onclosetag=function(Ae){return function(){var Se,L,ee,Ce,ze,dt,st,bt,ut,Vt;if(dt=Ve.pop(),ze=dt["#name"],(!Ae.options.explicitChildren||!Ae.options.preserveChildrenOrder)&&delete dt["#name"],!0===dt.cdata&&(Se=dt.cdata,delete dt.cdata),ut=Ve[Ve.length-1],dt[Re].match(/^\s*$/)&&!Se?(L=dt[Re],delete dt[Re]):(Ae.options.trim&&(dt[Re]=dt[Re].trim()),Ae.options.normalize&&(dt[Re]=dt[Re].replace(/\s{2,}/g," ").trim()),dt[Re]=Ae.options.valueProcessors?ie(Ae.options.valueProcessors,dt[Re],ze):dt[Re],1===Object.keys(dt).length&&Re in dt&&!Ae.EXPLICIT_CHARKEY&&(dt=dt[Re])),re(dt)&&(dt=""!==Ae.options.emptyTag?Ae.options.emptyTag:L),null!=Ae.options.validator&&(Vt="/"+function(){var on,Ct,rn;for(rn=[],on=0,Ct=Ve.length;on<Ct;on++)rn.push((Ce=Ve[on])["#name"]);return rn}().concat(ze).join("/"),function(){try{dt=Ae.options.validator(Vt,ut&&ut[ze],dt)}catch(Ct){return Ae.emit("error",Ct)}}()),Ae.options.explicitChildren&&!Ae.options.mergeAttrs&&"object"==typeof dt)if(Ae.options.preserveChildrenOrder){if(ut){for(ee in ut[Ae.options.childkey]=ut[Ae.options.childkey]||[],st={},dt)!De.call(dt,ee)||(st[ee]=dt[ee]);ut[Ae.options.childkey].push(st),delete dt["#name"],1===Object.keys(dt).length&&Re in dt&&!Ae.EXPLICIT_CHARKEY&&(dt=dt[Re])}}else Ce={},Ae.options.attrkey in dt&&(Ce[Ae.options.attrkey]=dt[Ae.options.attrkey],delete dt[Ae.options.attrkey]),!Ae.options.charsAsChildren&&Ae.options.charkey in dt&&(Ce[Ae.options.charkey]=dt[Ae.options.charkey],delete dt[Ae.options.charkey]),Object.getOwnPropertyNames(dt).length>0&&(Ce[Ae.options.childkey]=dt),dt=Ce;return Ve.length>0?Ae.assignOrPush(ut,ze,dt):(Ae.options.explicitRoot&&(bt=dt,(dt={})[ze]=bt),Ae.resultObject=dt,Ae.saxParser.ended=!0,Ae.emit("end",Ae.resultObject))}}(this),Le=function(Ae){return function(Se){var L,ee;if(ee=Ve[Ve.length-1])return ee[Re]+=Se,Ae.options.explicitChildren&&Ae.options.preserveChildrenOrder&&Ae.options.charsAsChildren&&(Ae.options.includeWhiteChars||""!==Se.replace(/\\n/g,"").trim())&&(ee[Ae.options.childkey]=ee[Ae.options.childkey]||[],(L={"#name":"__text__"})[Re]=Se,Ae.options.normalize&&(L[Re]=L[Re].replace(/\s{2,}/g," ").trim()),ee[Ae.options.childkey].push(L)),ee}}(this),this.saxParser.ontext=Le,this.saxParser.oncdata=function(Se){var L;if(L=Le(Se))return L.cdata=!0}},_e.prototype.parseString=function(Q,Re){var Le;null!=Re&&"function"==typeof Re&&(this.on("end",function(Ve){return this.reset(),Re(null,Ve)}),this.on("error",function(Ve){return this.reset(),Re(Ve)}));try{return""===(Q=Q.toString()).trim()?(this.emit("end",null),!0):(Q=ye.stripBOM(Q),this.options.async?(this.remaining=Q,q(this.processAsync),this.saxParser):this.saxParser.write(Q).close())}catch(Ve){if(Le=Ve,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",Le),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw Le}},_e.prototype.parseStringPromise=function(Q){return new Promise((Re=this,function(Le,Ve){return Re.parseString(Q,function(Ae,Se){return Ae?Ve(Ae):Le(Se)})}));var Re},_e}(oe),it.parseString=function(xe,_e,Q){var Re,Le;return null!=Q?("function"==typeof Q&&(Re=Q),"object"==typeof _e&&(Le=_e)):("function"==typeof _e&&(Re=_e),Le={}),new it.Parser(Le).parseString(xe,Re)},it.parseStringPromise=function(xe,_e){var Q;return"object"==typeof _e&&(Q=_e),new it.Parser(Q).parseStringPromise(xe)}}).call(this)},3749:function(yt,it){(function(){"use strict";var ae;ae=new RegExp(/(?!xmlns)^.*:/),it.normalize=function(ye){return ye.toLowerCase()},it.firstCharLowerCase=function(ye){return ye.charAt(0).toLowerCase()+ye.slice(1)},it.stripPrefix=function(ye){return ye.replace(ae,"")},it.parseNumbers=function(ye){return isNaN(ye)||(ye=ye%1==0?parseInt(ye,10):parseFloat(ye)),ye},it.parseBooleans=function(ye){return/^(?:true|false)$/i.test(ye)&&(ye="true"===ye.toLowerCase()),ye}}).call(this)},5452:function(yt,it,ae){(function(){"use strict";var ye,j,oe,re,V={}.hasOwnProperty;j=ae(7067),ye=ae(4032),oe=ae(2238),re=ae(3749),it.defaults=j.defaults,it.processors=re,it.ValidationError=function(K){function q(le){this.message=le}return function(K,q){for(var le in q)V.call(q,le)&&(K[le]=q[le]);function Te(){this.constructor=K}Te.prototype=q.prototype,K.prototype=new Te,K.__super__=q.prototype}(q,Error),q}(),it.Builder=ye.Builder,it.Parser=oe.Parser,it.parseString=oe.parseString,it.parseStringPromise=oe.parseStringPromise}).call(this)},599:function(yt){(function(){yt.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},2269:function(yt){(function(){yt.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},3452:function(yt){(function(){var it,ae,ye,j,oe,re,ie,V=[].slice,K={}.hasOwnProperty;it=function(){var q,le,Te,De,xe,_e;if(_e=arguments[0],xe=2<=arguments.length?V.call(arguments,1):[],oe(Object.assign))Object.assign.apply(null,arguments);else for(q=0,Te=xe.length;q<Te;q++)if(null!=(De=xe[q]))for(le in De)!K.call(De,le)||(_e[le]=De[le]);return _e},oe=function(q){return!!q&&"[object Function]"===Object.prototype.toString.call(q)},re=function(q){var le;return!!q&&("function"==(le=typeof q)||"object"===le)},ye=function(q){return oe(Array.isArray)?Array.isArray(q):"[object Array]"===Object.prototype.toString.call(q)},j=function(q){var le;if(ye(q))return!q.length;for(le in q)if(K.call(q,le))return!1;return!0},ie=function(q){var le,Te;return re(q)&&(Te=Object.getPrototypeOf(q))&&(le=Te.constructor)&&"function"==typeof le&&le instanceof le&&Function.prototype.toString.call(le)===Function.prototype.toString.call(Object)},ae=function(q){return oe(q.valueOf)?q.valueOf():q},yt.exports.assign=it,yt.exports.isFunction=oe,yt.exports.isObject=re,yt.exports.isArray=ye,yt.exports.isEmpty=j,yt.exports.isPlainObject=ie,yt.exports.getValue=ae}).call(this)},6316:function(yt){(function(){yt.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},5968:function(yt,it,ae){(function(){var ye;ye=ae(2269),ae(8563),yt.exports=function(){function re(ie,V,K){if(this.parent=ie,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==V)throw new Error("Missing attribute name. "+this.debugInfo(V));this.name=this.stringify.name(V),this.value=this.stringify.attValue(K),this.type=ye.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(re.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(re.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(re.prototype,"textContent",{get:function(){return this.value},set:function(ie){return this.value=ie||""}}),Object.defineProperty(re.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(re.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(re.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(re.prototype,"specified",{get:function(){return!0}}),re.prototype.clone=function(){return Object.create(this)},re.prototype.toString=function(ie){return this.options.writer.attribute(this,this.options.writer.filterOptions(ie))},re.prototype.debugInfo=function(ie){return null==(ie=ie||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+ie+"}, parent: <"+this.parent.name+">"},re.prototype.isEqualNode=function(ie){return!(ie.namespaceURI!==this.namespaceURI||ie.prefix!==this.prefix||ie.localName!==this.localName||ie.value!==this.value)},re}()}).call(this)},1361:function(yt,it,ae){(function(){var ye,oe,ie={}.hasOwnProperty;ye=ae(2269),oe=ae(2182),yt.exports=function(V){function K(q,le){if(K.__super__.constructor.call(this,q),null==le)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=ye.CData,this.value=this.stringify.cdata(le)}return function(V,K){for(var q in K)ie.call(K,q)&&(V[q]=K[q]);function le(){this.constructor=V}le.prototype=K.prototype,V.prototype=new le,V.__super__=K.prototype}(K,V),K.prototype.clone=function(){return Object.create(this)},K.prototype.toString=function(q){return this.options.writer.cdata(this,this.options.writer.filterOptions(q))},K}(oe)}).call(this)},2182:function(yt,it,ae){(function(){var j,re={}.hasOwnProperty;j=ae(8563),yt.exports=function(ie){function V(K){V.__super__.constructor.call(this,K),this.value=""}return function(ie,V){for(var K in V)re.call(V,K)&&(ie[K]=V[K]);function q(){this.constructor=ie}q.prototype=V.prototype,ie.prototype=new q,ie.__super__=V.prototype}(V,ie),Object.defineProperty(V.prototype,"data",{get:function(){return this.value},set:function(K){return this.value=K||""}}),Object.defineProperty(V.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(V.prototype,"textContent",{get:function(){return this.value},set:function(K){return this.value=K||""}}),V.prototype.clone=function(){return Object.create(this)},V.prototype.substringData=function(K,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.appendData=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.insertData=function(K,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.deleteData=function(K,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.replaceData=function(K,q,le){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.isEqualNode=function(K){return!(!V.__super__.isEqualNode.apply(this,arguments).isEqualNode(K)||K.data!==this.data)},V}(j)}).call(this)},2516:function(yt,it,ae){(function(){var ye,j,ie={}.hasOwnProperty;ye=ae(2269),j=ae(2182),yt.exports=function(V){function K(q,le){if(K.__super__.constructor.call(this,q),null==le)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=ye.Comment,this.value=this.stringify.comment(le)}return function(V,K){for(var q in K)ie.call(K,q)&&(V[q]=K[q]);function le(){this.constructor=V}le.prototype=K.prototype,V.prototype=new le,V.__super__=K.prototype}(K,V),K.prototype.clone=function(){return Object.create(this)},K.prototype.toString=function(q){return this.options.writer.comment(this,this.options.writer.filterOptions(q))},K}(j)}).call(this)},5806:function(yt,it,ae){(function(){var j,oe;j=ae(9276),oe=ae(3735),yt.exports=function(){function re(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new j,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(re.prototype,"parameterNames",{get:function(){return new oe(Object.keys(this.defaultParams))}}),re.prototype.getParameter=function(ie){return this.params.hasOwnProperty(ie)?this.params[ie]:null},re.prototype.canSetParameter=function(ie,V){return!0},re.prototype.setParameter=function(ie,V){return null!=V?this.params[ie]=V:delete this.params[ie]},re}()}).call(this)},9276:function(yt){(function(){yt.exports=function(){function ae(){}return ae.prototype.handleError=function(ye){throw new Error(ye)},ae}()}).call(this)},9906:function(yt){(function(){yt.exports=function(){function ae(){}return ae.prototype.hasFeature=function(ye,j){return!0},ae.prototype.createDocumentType=function(ye,j,oe){throw new Error("This DOM method is not implemented.")},ae.prototype.createDocument=function(ye,j,oe){throw new Error("This DOM method is not implemented.")},ae.prototype.createHTMLDocument=function(ye){throw new Error("This DOM method is not implemented.")},ae.prototype.getFeature=function(ye,j){throw new Error("This DOM method is not implemented.")},ae}()}).call(this)},3735:function(yt){(function(){yt.exports=function(){function ae(ye){this.arr=ye||[]}return Object.defineProperty(ae.prototype,"length",{get:function(){return this.arr.length}}),ae.prototype.item=function(ye){return this.arr[ye]||null},ae.prototype.contains=function(ye){return-1!==this.arr.indexOf(ye)},ae}()}).call(this)},7274:function(yt,it,ae){(function(){var ye,oe,ie={}.hasOwnProperty;oe=ae(8563),ye=ae(2269),yt.exports=function(V){function K(q,le,Te,De,xe,_e){if(K.__super__.constructor.call(this,q),null==le)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==Te)throw new Error("Missing DTD attribute name. "+this.debugInfo(le));if(!De)throw new Error("Missing DTD attribute type. "+this.debugInfo(le));if(!xe)throw new Error("Missing DTD attribute default. "+this.debugInfo(le));if(0!==xe.indexOf("#")&&(xe="#"+xe),!xe.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(le));if(_e&&!xe.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(le));this.elementName=this.stringify.name(le),this.type=ye.AttributeDeclaration,this.attributeName=this.stringify.name(Te),this.attributeType=this.stringify.dtdAttType(De),_e&&(this.defaultValue=this.stringify.dtdAttDefault(_e)),this.defaultValueType=xe}return function(V,K){for(var q in K)ie.call(K,q)&&(V[q]=K[q]);function le(){this.constructor=V}le.prototype=K.prototype,V.prototype=new le,V.__super__=K.prototype}(K,V),K.prototype.toString=function(q){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(q))},K}(oe)}).call(this)},2068:function(yt,it,ae){(function(){var ye,oe,ie={}.hasOwnProperty;oe=ae(8563),ye=ae(2269),yt.exports=function(V){function K(q,le,Te){if(K.__super__.constructor.call(this,q),null==le)throw new Error("Missing DTD element name. "+this.debugInfo());Te||(Te="(#PCDATA)"),Array.isArray(Te)&&(Te="("+Te.join(",")+")"),this.name=this.stringify.name(le),this.type=ye.ElementDeclaration,this.value=this.stringify.dtdElementValue(Te)}return function(V,K){for(var q in K)ie.call(K,q)&&(V[q]=K[q]);function le(){this.constructor=V}le.prototype=K.prototype,V.prototype=new le,V.__super__=K.prototype}(K,V),K.prototype.toString=function(q){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(q))},K}(oe)}).call(this)},8349:function(yt,it,ae){(function(){var ye,oe,re,V={}.hasOwnProperty;re=ae(3452).isObject,oe=ae(8563),ye=ae(2269),yt.exports=function(K){function q(le,Te,De,xe){if(q.__super__.constructor.call(this,le),null==De)throw new Error("Missing DTD entity name. "+this.debugInfo(De));if(null==xe)throw new Error("Missing DTD entity value. "+this.debugInfo(De));if(this.pe=!!Te,this.name=this.stringify.name(De),this.type=ye.EntityDeclaration,re(xe)){if(!xe.pubID&&!xe.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(De));if(xe.pubID&&!xe.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(De));if(this.internal=!1,null!=xe.pubID&&(this.pubID=this.stringify.dtdPubID(xe.pubID)),null!=xe.sysID&&(this.sysID=this.stringify.dtdSysID(xe.sysID)),null!=xe.nData&&(this.nData=this.stringify.dtdNData(xe.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(De))}else this.value=this.stringify.dtdEntityValue(xe),this.internal=!0}return function(K,q){for(var le in q)V.call(q,le)&&(K[le]=q[le]);function Te(){this.constructor=K}Te.prototype=q.prototype,K.prototype=new Te,K.__super__=q.prototype}(q,K),Object.defineProperty(q.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(q.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(q.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(q.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlVersion",{get:function(){return null}}),q.prototype.toString=function(le){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(le))},q}(oe)}).call(this)},3087:function(yt,it,ae){(function(){var ye,oe,ie={}.hasOwnProperty;oe=ae(8563),ye=ae(2269),yt.exports=function(V){function K(q,le,Te){if(K.__super__.constructor.call(this,q),null==le)throw new Error("Missing DTD notation name. "+this.debugInfo(le));if(!Te.pubID&&!Te.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(le));this.name=this.stringify.name(le),this.type=ye.NotationDeclaration,null!=Te.pubID&&(this.pubID=this.stringify.dtdPubID(Te.pubID)),null!=Te.sysID&&(this.sysID=this.stringify.dtdSysID(Te.sysID))}return function(V,K){for(var q in K)ie.call(K,q)&&(V[q]=K[q]);function le(){this.constructor=V}le.prototype=K.prototype,V.prototype=new le,V.__super__=K.prototype}(K,V),Object.defineProperty(K.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(K.prototype,"systemId",{get:function(){return this.sysID}}),K.prototype.toString=function(q){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(q))},K}(oe)}).call(this)},4789:function(yt,it,ae){(function(){var ye,oe,re,V={}.hasOwnProperty;re=ae(3452).isObject,oe=ae(8563),ye=ae(2269),yt.exports=function(K){function q(le,Te,De,xe){var _e;q.__super__.constructor.call(this,le),re(Te)&&(Te=(_e=Te).version,De=_e.encoding,xe=_e.standalone),Te||(Te="1.0"),this.type=ye.Declaration,this.version=this.stringify.xmlVersion(Te),null!=De&&(this.encoding=this.stringify.xmlEncoding(De)),null!=xe&&(this.standalone=this.stringify.xmlStandalone(xe))}return function(K,q){for(var le in q)V.call(q,le)&&(K[le]=q[le]);function Te(){this.constructor=K}Te.prototype=q.prototype,K.prototype=new Te,K.__super__=q.prototype}(q,K),q.prototype.toString=function(le){return this.options.writer.declaration(this,this.options.writer.filterOptions(le))},q}(oe)}).call(this)},9195:function(yt,it,ae){(function(){var ye,j,oe,re,ie,K,q,le,De={}.hasOwnProperty;le=ae(3452).isObject,q=ae(8563),ye=ae(2269),j=ae(7274),re=ae(8349),oe=ae(2068),ie=ae(3087),K=ae(5264),yt.exports=function(xe){function _e(Q,Re,Le){var Ve,Ae,Se,L,ee,Ce;if(_e.__super__.constructor.call(this,Q),this.type=ye.DocType,Q.children)for(Ae=0,Se=(L=Q.children).length;Ae<Se;Ae++)if((Ve=L[Ae]).type===ye.Element){this.name=Ve.name;break}this.documentObject=Q,le(Re)&&(Re=(ee=Re).pubID,Le=ee.sysID),null==Le&&(Le=(Ce=[Re,Le])[0],Re=Ce[1]),null!=Re&&(this.pubID=this.stringify.dtdPubID(Re)),null!=Le&&(this.sysID=this.stringify.dtdSysID(Le))}return function(xe,_e){for(var Q in _e)De.call(_e,Q)&&(xe[Q]=_e[Q]);function Re(){this.constructor=xe}Re.prototype=_e.prototype,xe.prototype=new Re,xe.__super__=_e.prototype}(_e,xe),Object.defineProperty(_e.prototype,"entities",{get:function(){var Q,Re,Le,Ve,Ae;for(Ve={},Re=0,Le=(Ae=this.children).length;Re<Le;Re++)(Q=Ae[Re]).type===ye.EntityDeclaration&&!Q.pe&&(Ve[Q.name]=Q);return new K(Ve)}}),Object.defineProperty(_e.prototype,"notations",{get:function(){var Q,Re,Le,Ve,Ae;for(Ve={},Re=0,Le=(Ae=this.children).length;Re<Le;Re++)(Q=Ae[Re]).type===ye.NotationDeclaration&&(Ve[Q.name]=Q);return new K(Ve)}}),Object.defineProperty(_e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(_e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(_e.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),_e.prototype.element=function(Q,Re){var Le;return Le=new oe(this,Q,Re),this.children.push(Le),this},_e.prototype.attList=function(Q,Re,Le,Ve,Ae){var Se;return Se=new j(this,Q,Re,Le,Ve,Ae),this.children.push(Se),this},_e.prototype.entity=function(Q,Re){var Le;return Le=new re(this,!1,Q,Re),this.children.push(Le),this},_e.prototype.pEntity=function(Q,Re){var Le;return Le=new re(this,!0,Q,Re),this.children.push(Le),this},_e.prototype.notation=function(Q,Re){var Le;return Le=new ie(this,Q,Re),this.children.push(Le),this},_e.prototype.toString=function(Q){return this.options.writer.docType(this,this.options.writer.filterOptions(Q))},_e.prototype.ele=function(Q,Re){return this.element(Q,Re)},_e.prototype.att=function(Q,Re,Le,Ve,Ae){return this.attList(Q,Re,Le,Ve,Ae)},_e.prototype.ent=function(Q,Re){return this.entity(Q,Re)},_e.prototype.pent=function(Q,Re){return this.pEntity(Q,Re)},_e.prototype.not=function(Q,Re){return this.notation(Q,Re)},_e.prototype.up=function(){return this.root()||this.documentObject},_e.prototype.isEqualNode=function(Q){return!(!_e.__super__.isEqualNode.apply(this,arguments).isEqualNode(Q)||Q.name!==this.name||Q.publicId!==this.publicId||Q.systemId!==this.systemId)},_e}(q)}).call(this)},519:function(yt,it,ae){(function(){var ye,j,oe,ie,V,K,q,Te={}.hasOwnProperty;q=ae(3452).isPlainObject,oe=ae(9906),j=ae(5806),ie=ae(8563),ye=ae(2269),K=ae(5041),V=ae(4354),yt.exports=function(De){function xe(_e){xe.__super__.constructor.call(this,null),this.name="#document",this.type=ye.Document,this.documentURI=null,this.domConfig=new j,_e||(_e={}),_e.writer||(_e.writer=new V),this.options=_e,this.stringify=new K(_e)}return function(De,xe){for(var _e in xe)Te.call(xe,_e)&&(De[_e]=xe[_e]);function Q(){this.constructor=De}Q.prototype=xe.prototype,De.prototype=new Q,De.__super__=xe.prototype}(xe,De),Object.defineProperty(xe.prototype,"implementation",{value:new oe}),Object.defineProperty(xe.prototype,"doctype",{get:function(){var _e,Q,Re,Le;for(Q=0,Re=(Le=this.children).length;Q<Re;Q++)if((_e=Le[Q]).type===ye.DocType)return _e;return null}}),Object.defineProperty(xe.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(xe.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(xe.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(xe.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===ye.Declaration?this.children[0].encoding:null}}),Object.defineProperty(xe.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===ye.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(xe.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===ye.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(xe.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(xe.prototype,"origin",{get:function(){return null}}),Object.defineProperty(xe.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(xe.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(xe.prototype,"contentType",{get:function(){return null}}),xe.prototype.end=function(_e){var Q;return Q={},_e?q(_e)&&(Q=_e,_e=this.options.writer):_e=this.options.writer,_e.document(this,_e.filterOptions(Q))},xe.prototype.toString=function(_e){return this.options.writer.document(this,this.options.writer.filterOptions(_e))},xe.prototype.createElement=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createTextNode=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createComment=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createCDATASection=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createProcessingInstruction=function(_e,Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createAttribute=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createEntityReference=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.getElementsByTagName=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.importNode=function(_e,Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createElementNS=function(_e,Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createAttributeNS=function(_e,Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.getElementsByTagNameNS=function(_e,Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.getElementById=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.adoptNode=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.renameNode=function(_e,Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.getElementsByClassName=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createEvent=function(_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createNodeIterator=function(_e,Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe.prototype.createTreeWalker=function(_e,Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},xe}(ie)}).call(this)},1105:function(yt,it,ae){(function(){var ye,j,oe,re,ie,V,K,q,le,Te,De,xe,Q,Re,Le,Ve,Ae,Se,L,ee,Ce,ze,dt,st={}.hasOwnProperty;dt=ae(3452),Ce=dt.isObject,ee=dt.isFunction,ze=dt.isPlainObject,L=dt.getValue,ye=ae(2269),xe=ae(519),Q=ae(3352),re=ae(1361),ie=ae(2516),Le=ae(9942),Se=ae(474),Re=ae(4666),Te=ae(4789),De=ae(9195),V=ae(7274),q=ae(8349),K=ae(2068),le=ae(3087),oe=ae(5968),Ae=ae(5041),Ve=ae(4354),j=ae(6316),yt.exports=function(){function bt(ut,Vt,on){var Ct;this.name="?xml",this.type=ye.Document,ut||(ut={}),Ct={},ut.writer?ze(ut.writer)&&(Ct=ut.writer,ut.writer=new Ve):ut.writer=new Ve,this.options=ut,this.writer=ut.writer,this.writerOptions=this.writer.filterOptions(Ct),this.stringify=new Ae(ut),this.onDataCallback=Vt||function(){},this.onEndCallback=on||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return bt.prototype.createChildNode=function(ut){var on,Ct,rn,Qt,Ht,Qn,en;switch(ut.type){case ye.CData:this.cdata(ut.value);break;case ye.Comment:this.comment(ut.value);break;case ye.Element:for(on in Ct={},Qn=ut.attribs)!st.call(Qn,on)||(Ct[on]=Qn[on].value);this.node(ut.name,Ct);break;case ye.Dummy:this.dummy();break;case ye.Raw:this.raw(ut.value);break;case ye.Text:this.text(ut.value);break;case ye.ProcessingInstruction:this.instruction(ut.target,ut.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+ut.constructor.name)}for(Qt=0,Ht=(en=ut.children).length;Qt<Ht;Qt++)this.createChildNode(rn=en[Qt]),rn.type===ye.Element&&this.up();return this},bt.prototype.dummy=function(){return this},bt.prototype.node=function(ut,Vt,on){var Ct;if(null==ut)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(ut));return this.openCurrent(),ut=L(ut),null==Vt&&(Vt={}),Vt=L(Vt),Ce(Vt)||(on=(Ct=[Vt,on])[0],Vt=Ct[1]),this.currentNode=new Q(this,ut,Vt),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=on&&this.text(on),this},bt.prototype.element=function(ut,Vt,on){var Ct,rn,Qt,Ht,Qn,en;if(this.currentNode&&this.currentNode.type===ye.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(ut)||Ce(ut)||ee(ut))for(Ht=this.options.noValidation,this.options.noValidation=!0,(en=new xe(this.options).element("TEMP_ROOT")).element(ut),this.options.noValidation=Ht,rn=0,Qt=(Qn=en.children).length;rn<Qt;rn++)this.createChildNode(Ct=Qn[rn]),Ct.type===ye.Element&&this.up();else this.node(ut,Vt,on);return this},bt.prototype.attribute=function(ut,Vt){var on;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(ut));if(null!=ut&&(ut=L(ut)),Ce(ut))for(on in ut)!st.call(ut,on)||this.attribute(on,ut[on]);else ee(Vt)&&(Vt=Vt.apply()),this.options.keepNullAttributes&&null==Vt?this.currentNode.attribs[ut]=new oe(this,ut,""):null!=Vt&&(this.currentNode.attribs[ut]=new oe(this,ut,Vt));return this},bt.prototype.text=function(ut){var Vt;return this.openCurrent(),Vt=new Se(this,ut),this.onData(this.writer.text(Vt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.cdata=function(ut){var Vt;return this.openCurrent(),Vt=new re(this,ut),this.onData(this.writer.cdata(Vt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.comment=function(ut){var Vt;return this.openCurrent(),Vt=new ie(this,ut),this.onData(this.writer.comment(Vt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.raw=function(ut){var Vt;return this.openCurrent(),Vt=new Le(this,ut),this.onData(this.writer.raw(Vt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.instruction=function(ut,Vt){var on,Ct,Qt,Ht;if(this.openCurrent(),null!=ut&&(ut=L(ut)),null!=Vt&&(Vt=L(Vt)),Array.isArray(ut))for(on=0,Qt=ut.length;on<Qt;on++)this.instruction(Ct=ut[on]);else if(Ce(ut))for(Ct in ut)!st.call(ut,Ct)||this.instruction(Ct,ut[Ct]);else ee(Vt)&&(Vt=Vt.apply()),Ht=new Re(this,ut,Vt),this.onData(this.writer.processingInstruction(Ht,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},bt.prototype.declaration=function(ut,Vt,on){var Ct;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return Ct=new Te(this,ut,Vt,on),this.onData(this.writer.declaration(Ct,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.doctype=function(ut,Vt,on){if(this.openCurrent(),null==ut)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new De(this,Vt,on),this.currentNode.rootNodeName=ut,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},bt.prototype.dtdElement=function(ut,Vt){var on;return this.openCurrent(),on=new K(this,ut,Vt),this.onData(this.writer.dtdElement(on,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.attList=function(ut,Vt,on,Ct,rn){var Qt;return this.openCurrent(),Qt=new V(this,ut,Vt,on,Ct,rn),this.onData(this.writer.dtdAttList(Qt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.entity=function(ut,Vt){var on;return this.openCurrent(),on=new q(this,!1,ut,Vt),this.onData(this.writer.dtdEntity(on,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.pEntity=function(ut,Vt){var on;return this.openCurrent(),on=new q(this,!0,ut,Vt),this.onData(this.writer.dtdEntity(on,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.notation=function(ut,Vt){var on;return this.openCurrent(),on=new le(this,ut,Vt),this.onData(this.writer.dtdNotation(on,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},bt.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},bt.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},bt.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},bt.prototype.openNode=function(ut){var on,Ct,rn;if(!ut.isOpen){if(!this.root&&0===this.currentLevel&&ut.type===ye.Element&&(this.root=ut),on="",ut.type===ye.Element){for(Ct in this.writerOptions.state=j.OpenTag,on=this.writer.indent(ut,this.writerOptions,this.currentLevel)+"<"+ut.name,rn=ut.attribs)!st.call(rn,Ct)||(on+=this.writer.attribute(rn[Ct],this.writerOptions,this.currentLevel));on+=(ut.children?">":"/>")+this.writer.endline(ut,this.writerOptions,this.currentLevel),this.writerOptions.state=j.InsideTag}else this.writerOptions.state=j.OpenTag,on=this.writer.indent(ut,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+ut.rootNodeName,ut.pubID&&ut.sysID?on+=' PUBLIC "'+ut.pubID+'" "'+ut.sysID+'"':ut.sysID&&(on+=' SYSTEM "'+ut.sysID+'"'),ut.children?(on+=" [",this.writerOptions.state=j.InsideTag):(this.writerOptions.state=j.CloseTag,on+=">"),on+=this.writer.endline(ut,this.writerOptions,this.currentLevel);return this.onData(on,this.currentLevel),ut.isOpen=!0}},bt.prototype.closeNode=function(ut){var Vt;if(!ut.isClosed)return"",this.writerOptions.state=j.CloseTag,Vt=ut.type===ye.Element?this.writer.indent(ut,this.writerOptions,this.currentLevel)+"</"+ut.name+">"+this.writer.endline(ut,this.writerOptions,this.currentLevel):this.writer.indent(ut,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(ut,this.writerOptions,this.currentLevel),this.writerOptions.state=j.None,this.onData(Vt,this.currentLevel),ut.isClosed=!0},bt.prototype.onData=function(ut,Vt){return this.documentStarted=!0,this.onDataCallback(ut,Vt+1)},bt.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},bt.prototype.debugInfo=function(ut){return null==ut?"":"node: <"+ut+">"},bt.prototype.ele=function(){return this.element.apply(this,arguments)},bt.prototype.nod=function(ut,Vt,on){return this.node(ut,Vt,on)},bt.prototype.txt=function(ut){return this.text(ut)},bt.prototype.dat=function(ut){return this.cdata(ut)},bt.prototype.com=function(ut){return this.comment(ut)},bt.prototype.ins=function(ut,Vt){return this.instruction(ut,Vt)},bt.prototype.dec=function(ut,Vt,on){return this.declaration(ut,Vt,on)},bt.prototype.dtd=function(ut,Vt,on){return this.doctype(ut,Vt,on)},bt.prototype.e=function(ut,Vt,on){return this.element(ut,Vt,on)},bt.prototype.n=function(ut,Vt,on){return this.node(ut,Vt,on)},bt.prototype.t=function(ut){return this.text(ut)},bt.prototype.d=function(ut){return this.cdata(ut)},bt.prototype.c=function(ut){return this.comment(ut)},bt.prototype.r=function(ut){return this.raw(ut)},bt.prototype.i=function(ut,Vt){return this.instruction(ut,Vt)},bt.prototype.att=function(){return this.currentNode&&this.currentNode.type===ye.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},bt.prototype.a=function(){return this.currentNode&&this.currentNode.type===ye.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},bt.prototype.ent=function(ut,Vt){return this.entity(ut,Vt)},bt.prototype.pent=function(ut,Vt){return this.pEntity(ut,Vt)},bt.prototype.not=function(ut,Vt){return this.notation(ut,Vt)},bt}()}).call(this)},4173:function(yt,it,ae){(function(){var ye,oe,ie={}.hasOwnProperty;oe=ae(8563),ye=ae(2269),yt.exports=function(V){function K(q){K.__super__.constructor.call(this,q),this.type=ye.Dummy}return function(V,K){for(var q in K)ie.call(K,q)&&(V[q]=K[q]);function le(){this.constructor=V}le.prototype=K.prototype,V.prototype=new le,V.__super__=K.prototype}(K,V),K.prototype.clone=function(){return Object.create(this)},K.prototype.toString=function(q){return""},K}(oe)}).call(this)},3352:function(yt,it,ae){(function(){var ye,j,re,ie,V,K,q,le,De={}.hasOwnProperty;le=ae(3452),q=le.isObject,K=le.isFunction,V=le.getValue,ie=ae(8563),ye=ae(2269),j=ae(5968),re=ae(5264),yt.exports=function(xe){function _e(Q,Re,Le){var Ve,Ae,Se,L;if(_e.__super__.constructor.call(this,Q),null==Re)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(Re),this.type=ye.Element,this.attribs={},this.schemaTypeInfo=null,null!=Le&&this.attribute(Le),Q.type===ye.Document&&(this.isRoot=!0,this.documentObject=Q,Q.rootObject=this,Q.children))for(Ae=0,Se=(L=Q.children).length;Ae<Se;Ae++)if((Ve=L[Ae]).type===ye.DocType){Ve.name=this.name;break}}return function(xe,_e){for(var Q in _e)De.call(_e,Q)&&(xe[Q]=_e[Q]);function Re(){this.constructor=xe}Re.prototype=_e.prototype,xe.prototype=new Re,xe.__super__=_e.prototype}(_e,xe),Object.defineProperty(_e.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(_e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(_e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(_e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(_e.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(_e.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(_e.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(_e.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new re(this.attribs)),this.attributeMap}}),_e.prototype.clone=function(){var Re,Le,Ve;for(Re in(Le=Object.create(this)).isRoot&&(Le.documentObject=null),Le.attribs={},Ve=this.attribs)!De.call(Ve,Re)||(Le.attribs[Re]=Ve[Re].clone());return Le.children=[],this.children.forEach(function(Ae){var Se;return(Se=Ae.clone()).parent=Le,Le.children.push(Se)}),Le},_e.prototype.attribute=function(Q,Re){var Le;if(null!=Q&&(Q=V(Q)),q(Q))for(Le in Q)!De.call(Q,Le)||this.attribute(Le,Q[Le]);else K(Re)&&(Re=Re.apply()),this.options.keepNullAttributes&&null==Re?this.attribs[Q]=new j(this,Q,""):null!=Re&&(this.attribs[Q]=new j(this,Q,Re));return this},_e.prototype.removeAttribute=function(Q){var Le,Ve;if(null==Q)throw new Error("Missing attribute name. "+this.debugInfo());if(Q=V(Q),Array.isArray(Q))for(Le=0,Ve=Q.length;Le<Ve;Le++)delete this.attribs[Q[Le]];else delete this.attribs[Q];return this},_e.prototype.toString=function(Q){return this.options.writer.element(this,this.options.writer.filterOptions(Q))},_e.prototype.att=function(Q,Re){return this.attribute(Q,Re)},_e.prototype.a=function(Q,Re){return this.attribute(Q,Re)},_e.prototype.getAttribute=function(Q){return this.attribs.hasOwnProperty(Q)?this.attribs[Q].value:null},_e.prototype.setAttribute=function(Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.getAttributeNode=function(Q){return this.attribs.hasOwnProperty(Q)?this.attribs[Q]:null},_e.prototype.setAttributeNode=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.removeAttributeNode=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.getElementsByTagName=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.getAttributeNS=function(Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.setAttributeNS=function(Q,Re,Le){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.removeAttributeNS=function(Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.getAttributeNodeNS=function(Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.setAttributeNodeNS=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.getElementsByTagNameNS=function(Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.hasAttribute=function(Q){return this.attribs.hasOwnProperty(Q)},_e.prototype.hasAttributeNS=function(Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.setIdAttribute=function(Q,Re){return this.attribs.hasOwnProperty(Q)?this.attribs[Q].isId:Re},_e.prototype.setIdAttributeNS=function(Q,Re,Le){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.setIdAttributeNode=function(Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.getElementsByTagName=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.getElementsByTagNameNS=function(Q,Re){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.getElementsByClassName=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},_e.prototype.isEqualNode=function(Q){var Re,Le,Ve;if(!_e.__super__.isEqualNode.apply(this,arguments).isEqualNode(Q)||Q.namespaceURI!==this.namespaceURI||Q.prefix!==this.prefix||Q.localName!==this.localName||Q.attribs.length!==this.attribs.length)return!1;for(Re=Le=0,Ve=this.attribs.length-1;0<=Ve?Le<=Ve:Le>=Ve;Re=0<=Ve?++Le:--Le)if(!this.attribs[Re].isEqualNode(Q.attribs[Re]))return!1;return!0},_e}(ie)}).call(this)},5264:function(yt){(function(){yt.exports=function(){function ae(ye){this.nodes=ye}return Object.defineProperty(ae.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),ae.prototype.clone=function(){return this.nodes=null},ae.prototype.getNamedItem=function(ye){return this.nodes[ye]},ae.prototype.setNamedItem=function(ye){var j;return j=this.nodes[ye.nodeName],this.nodes[ye.nodeName]=ye,j||null},ae.prototype.removeNamedItem=function(ye){var j;return j=this.nodes[ye],delete this.nodes[ye],j||null},ae.prototype.item=function(ye){return this.nodes[Object.keys(this.nodes)[ye]]||null},ae.prototype.getNamedItemNS=function(ye,j){throw new Error("This DOM method is not implemented.")},ae.prototype.setNamedItemNS=function(ye){throw new Error("This DOM method is not implemented.")},ae.prototype.removeNamedItemNS=function(ye,j){throw new Error("This DOM method is not implemented.")},ae}()}).call(this)},8563:function(yt,it,ae){(function(){var ye,j,oe,re,ie,V,K,q,De,xe,_e,Q,Re,Le,Ve,Ae,Se,L={}.hasOwnProperty;Se=ae(3452),Ae=Se.isObject,Ve=Se.isFunction,Le=Se.isEmpty,Re=Se.getValue,q=null,oe=null,re=null,ie=null,V=null,_e=null,Q=null,xe=null,K=null,j=null,De=null,ye=null,yt.exports=function(){function ee(Ce){this.parent=Ce,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,q||(q=ae(3352),oe=ae(1361),re=ae(2516),ie=ae(4789),V=ae(9195),_e=ae(9942),Q=ae(474),xe=ae(4666),K=ae(4173),j=ae(2269),De=ae(5112),ae(5264),ye=ae(599))}return Object.defineProperty(ee.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(ee.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(ee.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(ee.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(ee.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new De(this.children)),this.childNodeList}}),Object.defineProperty(ee.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(ee.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(ee.prototype,"previousSibling",{get:function(){var Ce;return Ce=this.parent.children.indexOf(this),this.parent.children[Ce-1]||null}}),Object.defineProperty(ee.prototype,"nextSibling",{get:function(){var Ce;return Ce=this.parent.children.indexOf(this),this.parent.children[Ce+1]||null}}),Object.defineProperty(ee.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(ee.prototype,"textContent",{get:function(){var Ce,ze,dt,st,bt;if(this.nodeType===j.Element||this.nodeType===j.DocumentFragment){for(bt="",ze=0,dt=(st=this.children).length;ze<dt;ze++)(Ce=st[ze]).textContent&&(bt+=Ce.textContent);return bt}return null},set:function(Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),ee.prototype.setParent=function(Ce){var dt,st,bt,ut;for(this.parent=Ce,Ce&&(this.options=Ce.options,this.stringify=Ce.stringify),ut=[],dt=0,st=(bt=this.children).length;dt<st;dt++)ut.push(bt[dt].setParent(this));return ut},ee.prototype.element=function(Ce,ze,dt){var st,ut,Vt,on,Ct,rn,Qt,Ht,Qn,en;if(Ct=null,null===ze&&null==dt&&(ze=(Ht=[{},null])[0],dt=Ht[1]),null==ze&&(ze={}),ze=Re(ze),Ae(ze)||(dt=(Qn=[ze,dt])[0],ze=Qn[1]),null!=Ce&&(Ce=Re(Ce)),Array.isArray(Ce))for(ut=0,rn=Ce.length;ut<rn;ut++)Ct=this.element(Ce[ut]);else if(Ve(Ce))Ct=this.element(Ce.apply());else if(Ae(Ce)){for(on in Ce)if(L.call(Ce,on))if(Ve(en=Ce[on])&&(en=en.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===on.indexOf(this.stringify.convertAttKey))Ct=this.attribute(on.substr(this.stringify.convertAttKey.length),en);else if(!this.options.separateArrayItems&&Array.isArray(en)&&Le(en))Ct=this.dummy();else if(Ae(en)&&Le(en))Ct=this.element(on);else if(this.options.keepNullNodes||null!=en)if(!this.options.separateArrayItems&&Array.isArray(en))for(Vt=0,Qt=en.length;Vt<Qt;Vt++)(st={})[on]=en[Vt],Ct=this.element(st);else Ae(en)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===on.indexOf(this.stringify.convertTextKey)?Ct=this.element(en):(Ct=this.element(on)).element(en):Ct=this.element(on,en);else Ct=this.dummy()}else Ct=this.options.keepNullNodes||null!==dt?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===Ce.indexOf(this.stringify.convertTextKey)?this.text(dt):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===Ce.indexOf(this.stringify.convertCDataKey)?this.cdata(dt):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===Ce.indexOf(this.stringify.convertCommentKey)?this.comment(dt):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===Ce.indexOf(this.stringify.convertRawKey)?this.raw(dt):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===Ce.indexOf(this.stringify.convertPIKey)?this.instruction(Ce.substr(this.stringify.convertPIKey.length),dt):this.node(Ce,ze,dt):this.dummy();if(null==Ct)throw new Error("Could not create any elements with: "+Ce+". "+this.debugInfo());return Ct},ee.prototype.insertBefore=function(Ce,ze,dt){var st,bt,ut,Vt,on;if(Ce?.type)return Vt=ze,(ut=Ce).setParent(this),Vt?(bt=children.indexOf(Vt),on=children.splice(bt),children.push(ut),Array.prototype.push.apply(children,on)):children.push(ut),ut;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(Ce));return bt=this.parent.children.indexOf(this),on=this.parent.children.splice(bt),st=this.parent.element(Ce,ze,dt),Array.prototype.push.apply(this.parent.children,on),st},ee.prototype.insertAfter=function(Ce,ze,dt){var st,bt,ut;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(Ce));return bt=this.parent.children.indexOf(this),ut=this.parent.children.splice(bt+1),st=this.parent.element(Ce,ze,dt),Array.prototype.push.apply(this.parent.children,ut),st},ee.prototype.remove=function(){var Ce;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return Ce=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[Ce,Ce-Ce+1].concat([])),this.parent},ee.prototype.node=function(Ce,ze,dt){var st,bt;return null!=Ce&&(Ce=Re(Ce)),ze||(ze={}),ze=Re(ze),Ae(ze)||(dt=(bt=[ze,dt])[0],ze=bt[1]),st=new q(this,Ce,ze),null!=dt&&st.text(dt),this.children.push(st),st},ee.prototype.text=function(Ce){var ze;return Ae(Ce)&&this.element(Ce),ze=new Q(this,Ce),this.children.push(ze),this},ee.prototype.cdata=function(Ce){var ze;return ze=new oe(this,Ce),this.children.push(ze),this},ee.prototype.comment=function(Ce){var ze;return ze=new re(this,Ce),this.children.push(ze),this},ee.prototype.commentBefore=function(Ce){var dt,st;return dt=this.parent.children.indexOf(this),st=this.parent.children.splice(dt),this.parent.comment(Ce),Array.prototype.push.apply(this.parent.children,st),this},ee.prototype.commentAfter=function(Ce){var dt,st;return dt=this.parent.children.indexOf(this),st=this.parent.children.splice(dt+1),this.parent.comment(Ce),Array.prototype.push.apply(this.parent.children,st),this},ee.prototype.raw=function(Ce){var ze;return ze=new _e(this,Ce),this.children.push(ze),this},ee.prototype.dummy=function(){return new K(this)},ee.prototype.instruction=function(Ce,ze){var dt,bt,ut,Vt;if(null!=Ce&&(Ce=Re(Ce)),null!=ze&&(ze=Re(ze)),Array.isArray(Ce))for(ut=0,Vt=Ce.length;ut<Vt;ut++)this.instruction(dt=Ce[ut]);else if(Ae(Ce))for(dt in Ce)!L.call(Ce,dt)||this.instruction(dt,Ce[dt]);else Ve(ze)&&(ze=ze.apply()),bt=new xe(this,Ce,ze),this.children.push(bt);return this},ee.prototype.instructionBefore=function(Ce,ze){var st,bt;return st=this.parent.children.indexOf(this),bt=this.parent.children.splice(st),this.parent.instruction(Ce,ze),Array.prototype.push.apply(this.parent.children,bt),this},ee.prototype.instructionAfter=function(Ce,ze){var st,bt;return st=this.parent.children.indexOf(this),bt=this.parent.children.splice(st+1),this.parent.instruction(Ce,ze),Array.prototype.push.apply(this.parent.children,bt),this},ee.prototype.declaration=function(Ce,ze,dt){var st,bt;return st=this.document(),bt=new ie(st,Ce,ze,dt),0===st.children.length?st.children.unshift(bt):st.children[0].type===j.Declaration?st.children[0]=bt:st.children.unshift(bt),st.root()||st},ee.prototype.dtd=function(Ce,ze){var st,bt,ut,Vt,on,Ct,rn,Qt,Ht;for(st=this.document(),bt=new V(st,Ce,ze),ut=Vt=0,Ct=(Qt=st.children).length;Vt<Ct;ut=++Vt)if(Qt[ut].type===j.DocType)return st.children[ut]=bt,bt;for(ut=on=0,rn=(Ht=st.children).length;on<rn;ut=++on)if(Ht[ut].isRoot)return st.children.splice(ut,0,bt),bt;return st.children.push(bt),bt},ee.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},ee.prototype.root=function(){var Ce;for(Ce=this;Ce;){if(Ce.type===j.Document)return Ce.rootObject;if(Ce.isRoot)return Ce;Ce=Ce.parent}},ee.prototype.document=function(){var Ce;for(Ce=this;Ce;){if(Ce.type===j.Document)return Ce;Ce=Ce.parent}},ee.prototype.end=function(Ce){return this.document().end(Ce)},ee.prototype.prev=function(){var Ce;if((Ce=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[Ce-1]},ee.prototype.next=function(){var Ce;if(-1===(Ce=this.parent.children.indexOf(this))||Ce===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[Ce+1]},ee.prototype.importDocument=function(Ce){var ze;return(ze=Ce.root().clone()).parent=this,ze.isRoot=!1,this.children.push(ze),this},ee.prototype.debugInfo=function(Ce){var ze,dt;return null!=(Ce=Ce||this.name)||null!=(ze=this.parent)&&ze.name?null==Ce?"parent: <"+this.parent.name+">":null!=(dt=this.parent)&&dt.name?"node: <"+Ce+">, parent: <"+this.parent.name+">":"node: <"+Ce+">":""},ee.prototype.ele=function(Ce,ze,dt){return this.element(Ce,ze,dt)},ee.prototype.nod=function(Ce,ze,dt){return this.node(Ce,ze,dt)},ee.prototype.txt=function(Ce){return this.text(Ce)},ee.prototype.dat=function(Ce){return this.cdata(Ce)},ee.prototype.com=function(Ce){return this.comment(Ce)},ee.prototype.ins=function(Ce,ze){return this.instruction(Ce,ze)},ee.prototype.doc=function(){return this.document()},ee.prototype.dec=function(Ce,ze,dt){return this.declaration(Ce,ze,dt)},ee.prototype.e=function(Ce,ze,dt){return this.element(Ce,ze,dt)},ee.prototype.n=function(Ce,ze,dt){return this.node(Ce,ze,dt)},ee.prototype.t=function(Ce){return this.text(Ce)},ee.prototype.d=function(Ce){return this.cdata(Ce)},ee.prototype.c=function(Ce){return this.comment(Ce)},ee.prototype.r=function(Ce){return this.raw(Ce)},ee.prototype.i=function(Ce,ze){return this.instruction(Ce,ze)},ee.prototype.u=function(){return this.up()},ee.prototype.importXMLBuilder=function(Ce){return this.importDocument(Ce)},ee.prototype.replaceChild=function(Ce,ze){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.removeChild=function(Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.appendChild=function(Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.hasChildNodes=function(){return 0!==this.children.length},ee.prototype.cloneNode=function(Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.isSupported=function(Ce,ze){return!0},ee.prototype.hasAttributes=function(){return 0!==this.attribs.length},ee.prototype.compareDocumentPosition=function(Ce){var dt;return this===Ce?0:this.document()!==Ce.document()?(dt=ye.Disconnected|ye.ImplementationSpecific,Math.random()<.5?dt|=ye.Preceding:dt|=ye.Following,dt):this.isAncestor(Ce)?ye.Contains|ye.Preceding:this.isDescendant(Ce)?ye.Contains|ye.Following:this.isPreceding(Ce)?ye.Preceding:ye.Following},ee.prototype.isSameNode=function(Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.lookupPrefix=function(Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.isDefaultNamespace=function(Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.lookupNamespaceURI=function(Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.isEqualNode=function(Ce){var ze,dt,st;if(Ce.nodeType!==this.nodeType||Ce.children.length!==this.children.length)return!1;for(ze=dt=0,st=this.children.length-1;0<=st?dt<=st:dt>=st;ze=0<=st?++dt:--dt)if(!this.children[ze].isEqualNode(Ce.children[ze]))return!1;return!0},ee.prototype.getFeature=function(Ce,ze){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.setUserData=function(Ce,ze,dt){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.getUserData=function(Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.contains=function(Ce){return!!Ce&&(Ce===this||this.isDescendant(Ce))},ee.prototype.isDescendant=function(Ce){var ze,st,bt,ut;for(st=0,bt=(ut=this.children).length;st<bt;st++)if(Ce===(ze=ut[st])||ze.isDescendant(Ce))return!0;return!1},ee.prototype.isAncestor=function(Ce){return Ce.isDescendant(this)},ee.prototype.isPreceding=function(Ce){var ze,dt;return ze=this.treePosition(Ce),dt=this.treePosition(this),-1!==ze&&-1!==dt&&ze<dt},ee.prototype.isFollowing=function(Ce){var ze,dt;return ze=this.treePosition(Ce),dt=this.treePosition(this),-1!==ze&&-1!==dt&&ze>dt},ee.prototype.treePosition=function(Ce){var ze,dt;return dt=0,ze=!1,this.foreachTreeNode(this.document(),function(st){if(dt++,!ze&&st===Ce)return ze=!0}),ze?dt:-1},ee.prototype.foreachTreeNode=function(Ce,ze){var dt,st,bt,ut,Vt;for(Ce||(Ce=this.document()),st=0,bt=(ut=Ce.children).length;st<bt;st++){if(Vt=ze(dt=ut[st]))return Vt;if(Vt=this.foreachTreeNode(dt,ze))return Vt}},ee}()}).call(this)},5112:function(yt){(function(){yt.exports=function(){function ae(ye){this.nodes=ye}return Object.defineProperty(ae.prototype,"length",{get:function(){return this.nodes.length||0}}),ae.prototype.clone=function(){return this.nodes=null},ae.prototype.item=function(ye){return this.nodes[ye]||null},ae}()}).call(this)},4666:function(yt,it,ae){(function(){var ye,j,ie={}.hasOwnProperty;ye=ae(2269),j=ae(2182),yt.exports=function(V){function K(q,le,Te){if(K.__super__.constructor.call(this,q),null==le)throw new Error("Missing instruction target. "+this.debugInfo());this.type=ye.ProcessingInstruction,this.target=this.stringify.insTarget(le),this.name=this.target,Te&&(this.value=this.stringify.insValue(Te))}return function(V,K){for(var q in K)ie.call(K,q)&&(V[q]=K[q]);function le(){this.constructor=V}le.prototype=K.prototype,V.prototype=new le,V.__super__=K.prototype}(K,V),K.prototype.clone=function(){return Object.create(this)},K.prototype.toString=function(q){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(q))},K.prototype.isEqualNode=function(q){return!(!K.__super__.isEqualNode.apply(this,arguments).isEqualNode(q)||q.target!==this.target)},K}(j)}).call(this)},9942:function(yt,it,ae){(function(){var ye,j,ie={}.hasOwnProperty;ye=ae(2269),j=ae(8563),yt.exports=function(V){function K(q,le){if(K.__super__.constructor.call(this,q),null==le)throw new Error("Missing raw text. "+this.debugInfo());this.type=ye.Raw,this.value=this.stringify.raw(le)}return function(V,K){for(var q in K)ie.call(K,q)&&(V[q]=K[q]);function le(){this.constructor=V}le.prototype=K.prototype,V.prototype=new le,V.__super__=K.prototype}(K,V),K.prototype.clone=function(){return Object.create(this)},K.prototype.toString=function(q){return this.options.writer.raw(this,this.options.writer.filterOptions(q))},K}(j)}).call(this)},7647:function(yt,it,ae){(function(){var ye,j,re,V={}.hasOwnProperty;ye=ae(2269),re=ae(3576),j=ae(6316),yt.exports=function(K){function q(le,Te){this.stream=le,q.__super__.constructor.call(this,Te)}return function(K,q){for(var le in q)V.call(q,le)&&(K[le]=q[le]);function Te(){this.constructor=K}Te.prototype=q.prototype,K.prototype=new Te,K.__super__=q.prototype}(q,K),q.prototype.endline=function(le,Te,De){return le.isLastRootNode&&Te.state===j.CloseTag?"":q.__super__.endline.call(this,le,Te,De)},q.prototype.document=function(le,Te){var xe,_e,Q,Re,Le,Ve,Ae,Se;for(xe=_e=0,Re=(Ve=le.children).length;_e<Re;xe=++_e)Ve[xe].isLastRootNode=xe===le.children.length-1;for(Te=this.filterOptions(Te),Se=[],Q=0,Le=(Ae=le.children).length;Q<Le;Q++)Se.push(this.writeChildNode(Ae[Q],Te,0));return Se},q.prototype.attribute=function(le,Te,De){return this.stream.write(q.__super__.attribute.call(this,le,Te,De))},q.prototype.cdata=function(le,Te,De){return this.stream.write(q.__super__.cdata.call(this,le,Te,De))},q.prototype.comment=function(le,Te,De){return this.stream.write(q.__super__.comment.call(this,le,Te,De))},q.prototype.declaration=function(le,Te,De){return this.stream.write(q.__super__.declaration.call(this,le,Te,De))},q.prototype.docType=function(le,Te,De){var _e,Q,Re;if(De||(De=0),this.openNode(le,Te,De),Te.state=j.OpenTag,this.stream.write(this.indent(le,Te,De)),this.stream.write("<!DOCTYPE "+le.root().name),le.pubID&&le.sysID?this.stream.write(' PUBLIC "'+le.pubID+'" "'+le.sysID+'"'):le.sysID&&this.stream.write(' SYSTEM "'+le.sysID+'"'),le.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(le,Te,De)),Te.state=j.InsideTag,_e=0,Q=(Re=le.children).length;_e<Q;_e++)this.writeChildNode(Re[_e],Te,De+1);Te.state=j.CloseTag,this.stream.write("]")}return Te.state=j.CloseTag,this.stream.write(Te.spaceBeforeSlash+">"),this.stream.write(this.endline(le,Te,De)),Te.state=j.None,this.closeNode(le,Te,De)},q.prototype.element=function(le,Te,De){var Q,Re,Le,Ve,Ae,L,ee;for(Ae in De||(De=0),this.openNode(le,Te,De),Te.state=j.OpenTag,this.stream.write(this.indent(le,Te,De)+"<"+le.name),L=le.attribs)!V.call(L,Ae)||this.attribute(L[Ae],Te,De);if(Re=0===(Q=le.children.length)?null:le.children[0],0===Q||le.children.every(function(Ce){return(Ce.type===ye.Text||Ce.type===ye.Raw)&&""===Ce.value}))Te.allowEmpty?(this.stream.write(">"),Te.state=j.CloseTag,this.stream.write("</"+le.name+">")):(Te.state=j.CloseTag,this.stream.write(Te.spaceBeforeSlash+"/>"));else if(!Te.pretty||1!==Q||Re.type!==ye.Text&&Re.type!==ye.Raw||null==Re.value){for(this.stream.write(">"+this.endline(le,Te,De)),Te.state=j.InsideTag,Le=0,Ve=(ee=le.children).length;Le<Ve;Le++)this.writeChildNode(ee[Le],Te,De+1);Te.state=j.CloseTag,this.stream.write(this.indent(le,Te,De)+"</"+le.name+">")}else this.stream.write(">"),Te.state=j.InsideTag,Te.suppressPrettyCount++,this.writeChildNode(Re,Te,De+1),Te.suppressPrettyCount--,Te.state=j.CloseTag,this.stream.write("</"+le.name+">");return this.stream.write(this.endline(le,Te,De)),Te.state=j.None,this.closeNode(le,Te,De)},q.prototype.processingInstruction=function(le,Te,De){return this.stream.write(q.__super__.processingInstruction.call(this,le,Te,De))},q.prototype.raw=function(le,Te,De){return this.stream.write(q.__super__.raw.call(this,le,Te,De))},q.prototype.text=function(le,Te,De){return this.stream.write(q.__super__.text.call(this,le,Te,De))},q.prototype.dtdAttList=function(le,Te,De){return this.stream.write(q.__super__.dtdAttList.call(this,le,Te,De))},q.prototype.dtdElement=function(le,Te,De){return this.stream.write(q.__super__.dtdElement.call(this,le,Te,De))},q.prototype.dtdEntity=function(le,Te,De){return this.stream.write(q.__super__.dtdEntity.call(this,le,Te,De))},q.prototype.dtdNotation=function(le,Te,De){return this.stream.write(q.__super__.dtdNotation.call(this,le,Te,De))},q}(re)}).call(this)},4354:function(yt,it,ae){(function(){var j,re={}.hasOwnProperty;j=ae(3576),yt.exports=function(ie){function V(K){V.__super__.constructor.call(this,K)}return function(ie,V){for(var K in V)re.call(V,K)&&(ie[K]=V[K]);function q(){this.constructor=ie}q.prototype=V.prototype,ie.prototype=new q,ie.__super__=V.prototype}(V,ie),V.prototype.document=function(K,q){var Te,De,xe,_e;for(q=this.filterOptions(q),xe="",Te=0,De=(_e=K.children).length;Te<De;Te++)xe+=this.writeChildNode(_e[Te],q,0);return q.pretty&&xe.slice(-q.newline.length)===q.newline&&(xe=xe.slice(0,-q.newline.length)),xe},V}(j)}).call(this)},5041:function(yt){(function(){var ae=function(j,oe){return function(){return j.apply(oe,arguments)}},ye={}.hasOwnProperty;yt.exports=function(){function j(oe){var re,ie;for(re in this.assertLegalName=ae(this.assertLegalName,this),this.assertLegalChar=ae(this.assertLegalChar,this),oe||(oe={}),this.options=oe,this.options.version||(this.options.version="1.0"),ie=oe.stringify||{})!ye.call(ie,re)||(this[re]=ie[re])}return j.prototype.name=function(oe){return this.options.noValidation?oe:this.assertLegalName(""+oe||"")},j.prototype.text=function(oe){return this.options.noValidation?oe:this.assertLegalChar(this.textEscape(""+oe||""))},j.prototype.cdata=function(oe){return this.options.noValidation?oe:(oe=(oe=""+oe||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(oe))},j.prototype.comment=function(oe){if(this.options.noValidation)return oe;if((oe=""+oe||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+oe);return this.assertLegalChar(oe)},j.prototype.raw=function(oe){return this.options.noValidation?oe:""+oe||""},j.prototype.attValue=function(oe){return this.options.noValidation?oe:this.assertLegalChar(this.attEscape(oe=""+oe||""))},j.prototype.insTarget=function(oe){return this.options.noValidation?oe:this.assertLegalChar(""+oe||"")},j.prototype.insValue=function(oe){if(this.options.noValidation)return oe;if((oe=""+oe||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+oe);return this.assertLegalChar(oe)},j.prototype.xmlVersion=function(oe){if(this.options.noValidation)return oe;if(!(oe=""+oe||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+oe);return oe},j.prototype.xmlEncoding=function(oe){if(this.options.noValidation)return oe;if(!(oe=""+oe||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+oe);return this.assertLegalChar(oe)},j.prototype.xmlStandalone=function(oe){return this.options.noValidation?oe:oe?"yes":"no"},j.prototype.dtdPubID=function(oe){return this.options.noValidation?oe:this.assertLegalChar(""+oe||"")},j.prototype.dtdSysID=function(oe){return this.options.noValidation?oe:this.assertLegalChar(""+oe||"")},j.prototype.dtdElementValue=function(oe){return this.options.noValidation?oe:this.assertLegalChar(""+oe||"")},j.prototype.dtdAttType=function(oe){return this.options.noValidation?oe:this.assertLegalChar(""+oe||"")},j.prototype.dtdAttDefault=function(oe){return this.options.noValidation?oe:this.assertLegalChar(""+oe||"")},j.prototype.dtdEntityValue=function(oe){return this.options.noValidation?oe:this.assertLegalChar(""+oe||"")},j.prototype.dtdNData=function(oe){return this.options.noValidation?oe:this.assertLegalChar(""+oe||"")},j.prototype.convertAttKey="@",j.prototype.convertPIKey="?",j.prototype.convertTextKey="#text",j.prototype.convertCDataKey="#cdata",j.prototype.convertCommentKey="#comment",j.prototype.convertRawKey="#raw",j.prototype.assertLegalChar=function(oe){var ie;if(this.options.noValidation)return oe;if("1.0"===this.options.version){if(ie=oe.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+oe+" at index "+ie.index)}else if("1.1"===this.options.version&&(ie=oe.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+oe+" at index "+ie.index);return oe},j.prototype.assertLegalName=function(oe){if(this.options.noValidation)return oe;if(this.assertLegalChar(oe),!oe.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return oe},j.prototype.textEscape=function(oe){return this.options.noValidation?oe:oe.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},j.prototype.attEscape=function(oe){return this.options.noValidation?oe:oe.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},j}()}).call(this)},474:function(yt,it,ae){(function(){var ye,j,ie={}.hasOwnProperty;ye=ae(2269),j=ae(2182),yt.exports=function(V){function K(q,le){if(K.__super__.constructor.call(this,q),null==le)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=ye.Text,this.value=this.stringify.text(le)}return function(V,K){for(var q in K)ie.call(K,q)&&(V[q]=K[q]);function le(){this.constructor=V}le.prototype=K.prototype,V.prototype=new le,V.__super__=K.prototype}(K,V),Object.defineProperty(K.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(K.prototype,"wholeText",{get:function(){var q,le,Te;for(Te="",le=this.previousSibling;le;)Te=le.data+Te,le=le.previousSibling;for(Te+=this.data,q=this.nextSibling;q;)Te+=q.data,q=q.nextSibling;return Te}}),K.prototype.clone=function(){return Object.create(this)},K.prototype.toString=function(q){return this.options.writer.text(this,this.options.writer.filterOptions(q))},K.prototype.splitText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.replaceWholeText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},K}(j)}).call(this)},3576:function(yt,it,ae){(function(){var ye,j,Ve,Ae={}.hasOwnProperty;Ve=ae(3452).assign,ye=ae(2269),ae(4789),ae(9195),ae(1361),ae(2516),ae(3352),ae(9942),ae(474),ae(4666),ae(4173),ae(7274),ae(2068),ae(8349),ae(3087),j=ae(6316),yt.exports=function(){function Se(L){var ee,Ce,ze;for(ee in L||(L={}),this.options=L,Ce=L.writer||{})!Ae.call(Ce,ee)||(ze=Ce[ee],this["_"+ee]=this[ee],this[ee]=ze)}return Se.prototype.filterOptions=function(L){var ee,Ce,ze,dt,st,bt,ut,Vt;return L||(L={}),L=Ve({},this.options,L),(ee={writer:this}).pretty=L.pretty||!1,ee.allowEmpty=L.allowEmpty||!1,ee.indent=null!=(Ce=L.indent)?Ce:"  ",ee.newline=null!=(ze=L.newline)?ze:"\n",ee.offset=null!=(dt=L.offset)?dt:0,ee.dontPrettyTextNodes=null!=(st=null!=(bt=L.dontPrettyTextNodes)?bt:L.dontprettytextnodes)?st:0,ee.spaceBeforeSlash=null!=(ut=null!=(Vt=L.spaceBeforeSlash)?Vt:L.spacebeforeslash)?ut:"",!0===ee.spaceBeforeSlash&&(ee.spaceBeforeSlash=" "),ee.suppressPrettyCount=0,ee.user={},ee.state=j.None,ee},Se.prototype.indent=function(L,ee,Ce){var ze;return!ee.pretty||ee.suppressPrettyCount?"":ee.pretty&&(ze=(Ce||0)+ee.offset+1)>0?new Array(ze).join(ee.indent):""},Se.prototype.endline=function(L,ee,Ce){return!ee.pretty||ee.suppressPrettyCount?"":ee.newline},Se.prototype.attribute=function(L,ee,Ce){var ze;return this.openAttribute(L,ee,Ce),ze=" "+L.name+'="'+L.value+'"',this.closeAttribute(L,ee,Ce),ze},Se.prototype.cdata=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce)+"<![CDATA[",ee.state=j.InsideTag,ze+=L.value,ee.state=j.CloseTag,ze+="]]>"+this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.comment=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce)+"\x3c!-- ",ee.state=j.InsideTag,ze+=L.value,ee.state=j.CloseTag,ze+=" --\x3e"+this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.declaration=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce)+"<?xml",ee.state=j.InsideTag,ze+=' version="'+L.version+'"',null!=L.encoding&&(ze+=' encoding="'+L.encoding+'"'),null!=L.standalone&&(ze+=' standalone="'+L.standalone+'"'),ee.state=j.CloseTag,ze+=ee.spaceBeforeSlash+"?>",ze+=this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.docType=function(L,ee,Ce){var dt,st,bt,ut;if(Ce||(Ce=0),this.openNode(L,ee,Ce),ee.state=j.OpenTag,bt=this.indent(L,ee,Ce),bt+="<!DOCTYPE "+L.root().name,L.pubID&&L.sysID?bt+=' PUBLIC "'+L.pubID+'" "'+L.sysID+'"':L.sysID&&(bt+=' SYSTEM "'+L.sysID+'"'),L.children.length>0){for(bt+=" [",bt+=this.endline(L,ee,Ce),ee.state=j.InsideTag,dt=0,st=(ut=L.children).length;dt<st;dt++)bt+=this.writeChildNode(ut[dt],ee,Ce+1);ee.state=j.CloseTag,bt+="]"}return ee.state=j.CloseTag,bt+=ee.spaceBeforeSlash+">",bt+=this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),bt},Se.prototype.element=function(L,ee,Ce){var dt,st,bt,ut,Vt,on,Ct,rn,Qt,Ht,Qn,en,Sn;for(rn in Ce||(Ce=0),Qt=!1,Ht="",this.openNode(L,ee,Ce),ee.state=j.OpenTag,Ht+=this.indent(L,ee,Ce)+"<"+L.name,Qn=L.attribs)!Ae.call(Qn,rn)||(Ht+=this.attribute(Qn[rn],ee,Ce));if(bt=0===(st=L.children.length)?null:L.children[0],0===st||L.children.every(function(Pn){return(Pn.type===ye.Text||Pn.type===ye.Raw)&&""===Pn.value}))ee.allowEmpty?(Ht+=">",ee.state=j.CloseTag,Ht+="</"+L.name+">"+this.endline(L,ee,Ce)):(ee.state=j.CloseTag,Ht+=ee.spaceBeforeSlash+"/>"+this.endline(L,ee,Ce));else if(!ee.pretty||1!==st||bt.type!==ye.Text&&bt.type!==ye.Raw||null==bt.value){if(ee.dontPrettyTextNodes)for(ut=0,on=(en=L.children).length;ut<on;ut++)if(((dt=en[ut]).type===ye.Text||dt.type===ye.Raw)&&null!=dt.value){ee.suppressPrettyCount++,Qt=!0;break}for(Ht+=">"+this.endline(L,ee,Ce),ee.state=j.InsideTag,Vt=0,Ct=(Sn=L.children).length;Vt<Ct;Vt++)Ht+=this.writeChildNode(dt=Sn[Vt],ee,Ce+1);ee.state=j.CloseTag,Ht+=this.indent(L,ee,Ce)+"</"+L.name+">",Qt&&ee.suppressPrettyCount--,Ht+=this.endline(L,ee,Ce),ee.state=j.None}else Ht+=">",ee.state=j.InsideTag,ee.suppressPrettyCount++,Qt=!0,Ht+=this.writeChildNode(bt,ee,Ce+1),ee.suppressPrettyCount--,Qt=!1,ee.state=j.CloseTag,Ht+="</"+L.name+">"+this.endline(L,ee,Ce);return this.closeNode(L,ee,Ce),Ht},Se.prototype.writeChildNode=function(L,ee,Ce){switch(L.type){case ye.CData:return this.cdata(L,ee,Ce);case ye.Comment:return this.comment(L,ee,Ce);case ye.Element:return this.element(L,ee,Ce);case ye.Raw:return this.raw(L,ee,Ce);case ye.Text:return this.text(L,ee,Ce);case ye.ProcessingInstruction:return this.processingInstruction(L,ee,Ce);case ye.Dummy:return"";case ye.Declaration:return this.declaration(L,ee,Ce);case ye.DocType:return this.docType(L,ee,Ce);case ye.AttributeDeclaration:return this.dtdAttList(L,ee,Ce);case ye.ElementDeclaration:return this.dtdElement(L,ee,Ce);case ye.EntityDeclaration:return this.dtdEntity(L,ee,Ce);case ye.NotationDeclaration:return this.dtdNotation(L,ee,Ce);default:throw new Error("Unknown XML node type: "+L.constructor.name)}},Se.prototype.processingInstruction=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce)+"<?",ee.state=j.InsideTag,ze+=L.target,L.value&&(ze+=" "+L.value),ee.state=j.CloseTag,ze+=ee.spaceBeforeSlash+"?>",ze+=this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.raw=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce),ee.state=j.InsideTag,ze+=L.value,ee.state=j.CloseTag,ze+=this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.text=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce),ee.state=j.InsideTag,ze+=L.value,ee.state=j.CloseTag,ze+=this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.dtdAttList=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce)+"<!ATTLIST",ee.state=j.InsideTag,ze+=" "+L.elementName+" "+L.attributeName+" "+L.attributeType,"#DEFAULT"!==L.defaultValueType&&(ze+=" "+L.defaultValueType),L.defaultValue&&(ze+=' "'+L.defaultValue+'"'),ee.state=j.CloseTag,ze+=ee.spaceBeforeSlash+">"+this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.dtdElement=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce)+"<!ELEMENT",ee.state=j.InsideTag,ze+=" "+L.name+" "+L.value,ee.state=j.CloseTag,ze+=ee.spaceBeforeSlash+">"+this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.dtdEntity=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce)+"<!ENTITY",ee.state=j.InsideTag,L.pe&&(ze+=" %"),ze+=" "+L.name,L.value?ze+=' "'+L.value+'"':(L.pubID&&L.sysID?ze+=' PUBLIC "'+L.pubID+'" "'+L.sysID+'"':L.sysID&&(ze+=' SYSTEM "'+L.sysID+'"'),L.nData&&(ze+=" NDATA "+L.nData)),ee.state=j.CloseTag,ze+=ee.spaceBeforeSlash+">"+this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.dtdNotation=function(L,ee,Ce){var ze;return this.openNode(L,ee,Ce),ee.state=j.OpenTag,ze=this.indent(L,ee,Ce)+"<!NOTATION",ee.state=j.InsideTag,ze+=" "+L.name,L.pubID&&L.sysID?ze+=' PUBLIC "'+L.pubID+'" "'+L.sysID+'"':L.pubID?ze+=' PUBLIC "'+L.pubID+'"':L.sysID&&(ze+=' SYSTEM "'+L.sysID+'"'),ee.state=j.CloseTag,ze+=ee.spaceBeforeSlash+">"+this.endline(L,ee,Ce),ee.state=j.None,this.closeNode(L,ee,Ce),ze},Se.prototype.openNode=function(L,ee,Ce){},Se.prototype.closeNode=function(L,ee,Ce){},Se.prototype.openAttribute=function(L,ee,Ce){},Se.prototype.closeAttribute=function(L,ee,Ce){},Se}()}).call(this)},7904:function(yt,it,ae){(function(){var ye,j,oe,re,ie,V,K,q,le,Te;Te=ae(3452),q=Te.assign,le=Te.isFunction,oe=ae(9906),re=ae(519),ie=ae(1105),K=ae(4354),V=ae(7647),ye=ae(2269),j=ae(6316),yt.exports.create=function(De,xe,_e,Q){var Re,Le;if(null==De)throw new Error("Root element needs a name.");return Q=q({},xe,_e,Q),Le=(Re=new re(Q)).element(De),Q.headless||(Re.declaration(Q),(null!=Q.pubID||null!=Q.sysID)&&Re.dtd(Q)),Le},yt.exports.begin=function(De,xe,_e){var Q;return le(De)&&(xe=(Q=[De,xe])[0],_e=Q[1],De={}),xe?new ie(De,xe,_e):new re(De)},yt.exports.stringWriter=function(De){return new K(De)},yt.exports.streamWriter=function(De,xe){return new V(De,xe)},yt.exports.implementation=new oe,yt.exports.nodeType=ye,yt.exports.writerState=j}).call(this)},1839:()=>{},4158:()=>{},2361:()=>{},4616:()=>{},5485:yt=>{"use strict";yt.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\u{1d504}","afr":"\u{1d51e}","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1d538}","aopf":"\u{1d552}","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\u{1d49c}","ascr":"\u{1d4b6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\u{1d505}","bfr":"\u{1d51f}","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\u{1d539}","bopf":"\u{1d553}","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\u{1d4b7}","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\u{1d520}","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\u{1d554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\u{1d49e}","cscr":"\u{1d4b8}","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\u{1d507}","dfr":"\u{1d521}","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\u{1d53b}","dopf":"\u{1d555}","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\u{1d49f}","dscr":"\u{1d4b9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1d508}","efr":"\u{1d522}","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1d53c}","eopf":"\u{1d556}","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\u{1d509}","ffr":"\u{1d523}","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\u{1d53d}","fopf":"\u{1d557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\u{1d4bb}","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\u{1d50a}","gfr":"\u{1d524}","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\u{1d53e}","gopf":"\u{1d558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\u{1d4a2}","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\u{1d525}","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\u{1d559}","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1d4bd}","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\u{1d526}","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\u{1d540}","iopf":"\u{1d55a}","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\u{1d4be}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1d50d}","jfr":"\u{1d527}","jmath":"\u0237","Jopf":"\u{1d541}","jopf":"\u{1d55b}","Jscr":"\u{1d4a5}","jscr":"\u{1d4bf}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\u{1d50e}","kfr":"\u{1d528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\u{1d542}","kopf":"\u{1d55c}","Kscr":"\u{1d4a6}","kscr":"\u{1d4c0}","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\u{1d50f}","lfr":"\u{1d529}","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\u{1d543}","lopf":"\u{1d55d}","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\u{1d4c1}","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\u{1d510}","mfr":"\u{1d52a}","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\u{1d544}","mopf":"\u{1d55e}","mp":"\u2213","mscr":"\u{1d4c2}","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1d511}","nfr":"\u{1d52b}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\u{1d55f}","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\u{1d4a9}","nscr":"\u{1d4c3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\u{1d512}","ofr":"\u{1d52c}","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\u{1d546}","oopf":"\u{1d560}","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\u{1d4aa}","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\u{1d513}","pfr":"\u{1d52d}","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\u{1d561}","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\u{1d4ab}","pscr":"\u{1d4c5}","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\u{1d514}","qfr":"\u{1d52e}","qint":"\u2a0c","qopf":"\u{1d562}","Qopf":"\u211a","qprime":"\u2057","Qscr":"\u{1d4ac}","qscr":"\u{1d4c6}","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\u{1d52f}","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\u{1d563}","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\u{1d4c7}","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1d516}","sfr":"\u{1d530}","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\u{1d54a}","sopf":"\u{1d564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\u{1d4ae}","sscr":"\u{1d4c8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\u{1d517}","tfr":"\u{1d531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\u{1d54b}","topf":"\u{1d565}","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\u{1d4af}","tscr":"\u{1d4c9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\u{1d518}","ufr":"\u{1d532}","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1d54c}","uopf":"\u{1d566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\u{1d4b0}","uscr":"\u{1d4ca}","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\u{1d519}","vfr":"\u{1d533}","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\u{1d54d}","vopf":"\u{1d567}","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\u{1d4b1}","vscr":"\u{1d4cb}","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1d51a}","wfr":"\u{1d534}","Wopf":"\u{1d54e}","wopf":"\u{1d568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1d4b2}","wscr":"\u{1d4cc}","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\u{1d51b}","xfr":"\u{1d535}","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\u{1d54f}","xopf":"\u{1d569}","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\u{1d4b3}","xscr":"\u{1d4cd}","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\u{1d51c}","yfr":"\u{1d536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1d550}","yopf":"\u{1d56a}","Yscr":"\u{1d4b4}","yscr":"\u{1d4ce}","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\u{1d537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\u{1d56b}","Zopf":"\u2124","Zscr":"\u{1d4b5}","zscr":"\u{1d4cf}","zwj":"\u200d","zwnj":"\u200c"}')}},yt=>{yt(yt.s=3658)}]);